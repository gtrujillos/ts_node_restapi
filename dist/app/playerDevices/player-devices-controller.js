var a118_0x5c32=['status','json','playing_item','find','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','device_uuid','body','network_info','firmware_info','then','player_id'];(function(_0x3f64b5,_0x5a80bf){var _0x108f38=function(_0x24c354){while(--_0x24c354){_0x3f64b5['push'](_0x3f64b5['shift']());}};_0x108f38(++_0x5a80bf);}(a118_0x5c32,0x149));var a118_0x2d90=function(_0x2e4897,_0x250163){_0x2e4897=_0x2e4897-0x0;var _0x248183=a118_0x5c32[_0x2e4897];return _0x248183;};'use strict';var __importDefault=this&&this[a118_0x2d90('0x0')]||function(_0x574b64){return _0x574b64&&_0x574b64[a118_0x2d90('0x1')]?_0x574b64:{'default':_0x574b64};};Object[a118_0x2d90('0x2')](exports,a118_0x2d90('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a118_0x2d90('0x3')));const responseUtils=require(a118_0x2d90('0x4'));class PlayerDevicesController extends controller_utils_1[a118_0x2d90('0x5')]{constructor(_0x3210f8,_0x213db3,_0x3f14eb){super(_0x3210f8,null);this[a118_0x2d90('0x6')]=_0x213db3;this[a118_0x2d90('0x7')]=_0x3f14eb;this[a118_0x2d90('0x8')]=this[a118_0x2d90('0x8')][a118_0x2d90('0x9')](this);this[a118_0x2d90('0xa')]=this[a118_0x2d90('0xa')][a118_0x2d90('0x9')](this);this[a118_0x2d90('0xb')]=this['getStatus'][a118_0x2d90('0x9')](this);}['register'](_0x29bd70,_0x2fb7f4,_0x1504c8){return this['devicesController'][a118_0x2d90('0xc')]({'params':{'uuid':_0x29bd70['body']['device_uuid']},'body':{'uuid':_0x29bd70['body'][a118_0x2d90('0xd')],'network_info':_0x29bd70[a118_0x2d90('0xe')][a118_0x2d90('0xf')],'firmware_info':_0x29bd70[a118_0x2d90('0xe')][a118_0x2d90('0x10')]}},null,_0x1504c8,!![])[a118_0x2d90('0x11')](_0xe85f1=>{return this[a118_0x2d90('0xc')]({'params':{'device_id':_0xe85f1['id'],'player_id':_0x29bd70[a118_0x2d90('0xe')][a118_0x2d90('0x12')]},'body':{'device_id':_0xe85f1['id'],'player_id':_0x29bd70[a118_0x2d90('0xe')]['player_id'],'status':_0x29bd70[a118_0x2d90('0xe')][a118_0x2d90('0x13')],'playlist':_0x29bd70['body']['playlist'],'reported_at':new Date()}},null,_0x1504c8)[a118_0x2d90('0x11')](_0x36c1f8=>{delete _0xe85f1['id'];return _0x2fb7f4[a118_0x2d90('0x14')]({'success':!![],'data':_0xe85f1});});});}['reportStatus'](_0x198389,_0x4c35fb,_0x379164){return this[a118_0x2d90('0x6')][a118_0x2d90('0xc')]({'params':{'uuid':_0x198389[a118_0x2d90('0xe')][a118_0x2d90('0xd')]},'body':{'uuid':_0x198389['body'][a118_0x2d90('0xd')]}},null,_0x379164,!![])[a118_0x2d90('0x11')](_0x585564=>{return this[a118_0x2d90('0xc')]({'params':{'device_id':_0x585564['id'],'player_id':_0x198389['body'][a118_0x2d90('0x12')]},'body':{'device_id':_0x585564['id'],'player_id':_0x198389[a118_0x2d90('0xe')][a118_0x2d90('0x12')],'playing_item':_0x198389[a118_0x2d90('0xe')][a118_0x2d90('0x15')],'status':_0x198389['body'][a118_0x2d90('0x13')],'reported_at':new Date()}},null,_0x379164)[a118_0x2d90('0x11')](_0x1352b8=>{delete _0x585564['id'];return _0x4c35fb[a118_0x2d90('0x14')]({'success':!![],'data':_0x1352b8});});});}[a118_0x2d90('0xb')](_0x16567a,_0x4b823a,_0x4d06e4){return this[a118_0x2d90('0x7')][a118_0x2d90('0x16')]({'params':{'$user.uuid$':_0x16567a[a118_0x2d90('0x17')][a118_0x2d90('0x18')]}},null,_0x4d06e4,!![],[sequelize_utils_1['default'][a118_0x2d90('0x19')][a118_0x2d90('0x1a')],sequelize_utils_1[a118_0x2d90('0x5')][a118_0x2d90('0x19')][a118_0x2d90('0x1b')]])['then'](_0x1c12d8=>{console[a118_0x2d90('0x1c')](_0x1c12d8);return _0x4b823a[a118_0x2d90('0x14')]({'success':!![],'data':_0x1c12d8});});}}exports['default']=PlayerDevicesController;