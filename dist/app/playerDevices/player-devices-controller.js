var a57_0x38b3=['body','firmware_info','then','player_id','status','playlist','json','updateOrCreate','playing_item','user_uuid','models','log','__importDefault','defineProperty','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','reportStatus','bind','getStatus','device_uuid'];(function(_0x22cfa2,_0x273bce){var _0x28004f=function(_0x1f4e2e){while(--_0x1f4e2e){_0x22cfa2['push'](_0x22cfa2['shift']());}};_0x28004f(++_0x273bce);}(a57_0x38b3,0x1c6));var a57_0x33af=function(_0x4fb800,_0x3afdae){_0x4fb800=_0x4fb800-0x0;var _0x3fcfe5=a57_0x38b3[_0x4fb800];return _0x3fcfe5;};'use strict';var __importDefault=this&&this[a57_0x33af('0x0')]||function(_0x55ed5c){return _0x55ed5c&&_0x55ed5c['__esModule']?_0x55ed5c:{'default':_0x55ed5c};};Object[a57_0x33af('0x1')](exports,a57_0x33af('0x2'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x33af('0x3')));const sequelize_utils_1=__importDefault(require(a57_0x33af('0x4')));const responseUtils=require(a57_0x33af('0x5'));class PlayerDevicesController extends controller_utils_1[a57_0x33af('0x6')]{constructor(_0xc87d5c,_0x1372a7,_0x50ea9b){super(_0xc87d5c,null);this[a57_0x33af('0x7')]=_0x1372a7;this[a57_0x33af('0x8')]=_0x50ea9b;this[a57_0x33af('0x9')]=this[a57_0x33af('0x9')]['bind'](this);this['reportStatus']=this[a57_0x33af('0xa')][a57_0x33af('0xb')](this);this[a57_0x33af('0xc')]=this['getStatus'][a57_0x33af('0xb')](this);}[a57_0x33af('0x9')](_0x471af6,_0x218ebb,_0x5bc334){return this[a57_0x33af('0x7')]['updateOrCreate']({'params':{'uuid':_0x471af6['body'][a57_0x33af('0xd')]},'body':{'uuid':_0x471af6[a57_0x33af('0xe')][a57_0x33af('0xd')],'network_info':_0x471af6['body']['network_info'],'firmware_info':_0x471af6[a57_0x33af('0xe')][a57_0x33af('0xf')]}},null,_0x5bc334,!![])[a57_0x33af('0x10')](_0x48483f=>{return this['updateOrCreate']({'params':{'device_id':_0x48483f['id'],'player_id':_0x471af6[a57_0x33af('0xe')]['player_id']},'body':{'device_id':_0x48483f['id'],'player_id':_0x471af6[a57_0x33af('0xe')][a57_0x33af('0x11')],'status':_0x471af6[a57_0x33af('0xe')][a57_0x33af('0x12')],'playlist':_0x471af6[a57_0x33af('0xe')][a57_0x33af('0x13')],'reported_at':new Date()}},null,_0x5bc334)[a57_0x33af('0x10')](_0x25efb4=>{delete _0x48483f['id'];return _0x218ebb[a57_0x33af('0x14')]({'success':!![],'data':_0x48483f});});});}[a57_0x33af('0xa')](_0x20b439,_0x527481,_0x20b2fe){return this[a57_0x33af('0x7')][a57_0x33af('0x15')]({'params':{'uuid':_0x20b439[a57_0x33af('0xe')][a57_0x33af('0xd')]},'body':{'uuid':_0x20b439['body'][a57_0x33af('0xd')]}},null,_0x20b2fe,!![])[a57_0x33af('0x10')](_0x1ac78b=>{return this['updateOrCreate']({'params':{'device_id':_0x1ac78b['id'],'player_id':_0x20b439[a57_0x33af('0xe')][a57_0x33af('0x11')]},'body':{'device_id':_0x1ac78b['id'],'player_id':_0x20b439[a57_0x33af('0xe')]['player_id'],'playing_item':_0x20b439['body'][a57_0x33af('0x16')],'status':_0x20b439[a57_0x33af('0xe')][a57_0x33af('0x12')],'reported_at':new Date()}},null,_0x20b2fe)[a57_0x33af('0x10')](_0x384e06=>{delete _0x1ac78b['id'];return _0x527481[a57_0x33af('0x14')]({'success':!![],'data':_0x384e06});});});}[a57_0x33af('0xc')](_0x22bfc6,_0xd09bfe,_0x19ae43){return this[a57_0x33af('0x8')]['find']({'params':{'$user.uuid$':_0x22bfc6['params'][a57_0x33af('0x17')]}},null,_0x19ae43,!![],[sequelize_utils_1[a57_0x33af('0x6')][a57_0x33af('0x18')]['usersModel'],sequelize_utils_1['default']['models']['playerDevicesModel']])[a57_0x33af('0x10')](_0xda2188=>{console[a57_0x33af('0x19')](_0xda2188);return _0xd09bfe[a57_0x33af('0x14')]({'success':!![],'data':_0xda2188});});}}exports['default']=PlayerDevicesController;