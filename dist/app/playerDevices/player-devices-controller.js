var a118_0x4d8c=['defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','default','devicesController','playersController','register','reportStatus','bind','getStatus','body','device_uuid','network_info','firmware_info','updateOrCreate','player_id','status','then','uuid','json','find','params','user_uuid','usersModel','models','playerDevicesModel'];(function(_0x3f8020,_0x5ca59c){var _0x159f37=function(_0x2ea461){while(--_0x2ea461){_0x3f8020['push'](_0x3f8020['shift']());}};_0x159f37(++_0x5ca59c);}(a118_0x4d8c,0x82));var a118_0x4838=function(_0x538378,_0x4bed06){_0x538378=_0x538378-0x0;var _0x2a3288=a118_0x4d8c[_0x538378];return _0x2a3288;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x478cd7){return _0x478cd7&&_0x478cd7['__esModule']?_0x478cd7:{'default':_0x478cd7};};Object[a118_0x4838('0x0')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x4838('0x1')));const sequelize_utils_1=__importDefault(require(a118_0x4838('0x2')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1[a118_0x4838('0x3')]{constructor(_0x568673,_0x432b14,_0x3f323c){super(_0x568673,null);this[a118_0x4838('0x4')]=_0x432b14;this[a118_0x4838('0x5')]=_0x3f323c;this['register']=this[a118_0x4838('0x6')]['bind'](this);this[a118_0x4838('0x7')]=this[a118_0x4838('0x7')][a118_0x4838('0x8')](this);this['getStatus']=this[a118_0x4838('0x9')][a118_0x4838('0x8')](this);}[a118_0x4838('0x6')](_0x294818,_0x558fda,_0x9d1d37){return this[a118_0x4838('0x4')]['updateOrCreate']({'params':{'uuid':_0x294818[a118_0x4838('0xa')][a118_0x4838('0xb')]},'body':{'uuid':_0x294818[a118_0x4838('0xa')][a118_0x4838('0xb')],'network_info':_0x294818[a118_0x4838('0xa')][a118_0x4838('0xc')],'firmware_info':_0x294818['body'][a118_0x4838('0xd')]}},null,_0x9d1d37,!![],!![])['then'](_0x4c7cc1=>{return this[a118_0x4838('0xe')]({'params':{'device_id':_0x4c7cc1['id'],'player_id':_0x294818[a118_0x4838('0xa')][a118_0x4838('0xf')]},'body':{'device_id':_0x4c7cc1['id'],'player_id':_0x294818[a118_0x4838('0xa')][a118_0x4838('0xf')],'status':_0x294818[a118_0x4838('0xa')][a118_0x4838('0x10')],'playlist':_0x294818['body']['playlist'],'reported_at':new Date()}},null,_0x9d1d37,![],!![])[a118_0x4838('0x11')](_0x4d2d34=>{const _0x45d73a={'uuid':_0x4d2d34[a118_0x4838('0x12')]};return _0x558fda[a118_0x4838('0x13')]({'success':!![],'data':_0x45d73a});});});}[a118_0x4838('0x7')](_0x37e12f,_0x4cddfa,_0x1a3977){return this[a118_0x4838('0x4')][a118_0x4838('0xe')]({'params':{'uuid':_0x37e12f[a118_0x4838('0xa')][a118_0x4838('0xb')]},'body':{'uuid':_0x37e12f[a118_0x4838('0xa')][a118_0x4838('0xb')]}},null,_0x1a3977,!![],!![])['then'](_0x51e401=>{return this[a118_0x4838('0xe')]({'params':{'device_id':_0x51e401['id'],'player_id':_0x37e12f['body'][a118_0x4838('0xf')]},'body':{'device_id':_0x51e401['id'],'player_id':_0x37e12f[a118_0x4838('0xa')]['player_id'],'playing_item':_0x37e12f['body']['playing_item'],'status':_0x37e12f['body'][a118_0x4838('0x10')],'reported_at':new Date()}},null,_0x1a3977,![],!![])['then'](_0x555d9e=>{const _0x485bd9={'uuid':_0x555d9e[a118_0x4838('0x12')]};return _0x4cddfa[a118_0x4838('0x13')]({'success':!![],'data':_0x485bd9});});});}[a118_0x4838('0x9')](_0x15ede4,_0xb4db44,_0x2d3bf8){return this[a118_0x4838('0x5')][a118_0x4838('0x14')]({'params':{'$user.uuid$':_0x15ede4[a118_0x4838('0x15')][a118_0x4838('0x16')]}},null,_0x2d3bf8,!![],[sequelize_utils_1[a118_0x4838('0x3')]['models'][a118_0x4838('0x17')],sequelize_utils_1[a118_0x4838('0x3')][a118_0x4838('0x18')][a118_0x4838('0x19')]])[a118_0x4838('0x11')](_0x210118=>{console['log'](_0x210118);return _0xb4db44[a118_0x4838('0x13')]({'success':!![],'data':_0x210118});});}}exports[a118_0x4838('0x3')]=PlayerDevicesController;