var a118_0x1def=['player_id','status','playlist','json','playing_item','find','params','user_uuid','models','usersModel','playerDevicesModel','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','firmware_info','then'];(function(_0x3ee96d,_0x5a6bf6){var _0x5c4494=function(_0x279982){while(--_0x279982){_0x3ee96d['push'](_0x3ee96d['shift']());}};_0x5c4494(++_0x5a6bf6);}(a118_0x1def,0x1db));var a118_0x15c6=function(_0x5e152f,_0x587ff2){_0x5e152f=_0x5e152f-0x0;var _0x5bf1ae=a118_0x1def[_0x5e152f];return _0x5bf1ae;};'use strict';var __importDefault=this&&this[a118_0x15c6('0x0')]||function(_0x5c3e9b){return _0x5c3e9b&&_0x5c3e9b[a118_0x15c6('0x1')]?_0x5c3e9b:{'default':_0x5c3e9b};};Object[a118_0x15c6('0x2')](exports,a118_0x15c6('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x15c6('0x3')));const sequelize_utils_1=__importDefault(require(a118_0x15c6('0x4')));const responseUtils=require(a118_0x15c6('0x5'));class PlayerDevicesController extends controller_utils_1[a118_0x15c6('0x6')]{constructor(_0x53a721,_0x50000b,_0x11c147){super(_0x53a721,null);this[a118_0x15c6('0x7')]=_0x50000b;this[a118_0x15c6('0x8')]=_0x11c147;this[a118_0x15c6('0x9')]=this[a118_0x15c6('0x9')][a118_0x15c6('0xa')](this);this[a118_0x15c6('0xb')]=this['reportStatus'][a118_0x15c6('0xa')](this);this[a118_0x15c6('0xc')]=this['getStatus']['bind'](this);}[a118_0x15c6('0x9')](_0x2eef47,_0x558635,_0x3d22d0){return this[a118_0x15c6('0x7')][a118_0x15c6('0xd')]({'params':{'uuid':_0x2eef47[a118_0x15c6('0xe')][a118_0x15c6('0xf')]},'body':{'uuid':_0x2eef47[a118_0x15c6('0xe')]['device_uuid'],'network_info':_0x2eef47[a118_0x15c6('0xe')]['network_info'],'firmware_info':_0x2eef47[a118_0x15c6('0xe')][a118_0x15c6('0x10')]}},null,_0x3d22d0,!![])[a118_0x15c6('0x11')](_0x4061a9=>{return this[a118_0x15c6('0xd')]({'params':{'device_id':_0x4061a9['id'],'player_id':_0x2eef47[a118_0x15c6('0xe')][a118_0x15c6('0x12')]},'body':{'device_id':_0x4061a9['id'],'player_id':_0x2eef47[a118_0x15c6('0xe')]['player_id'],'status':_0x2eef47[a118_0x15c6('0xe')][a118_0x15c6('0x13')],'playlist':_0x2eef47[a118_0x15c6('0xe')][a118_0x15c6('0x14')],'reported_at':new Date()}},null,_0x3d22d0)[a118_0x15c6('0x11')](_0x5263ac=>{delete _0x4061a9['id'];return _0x558635[a118_0x15c6('0x15')]({'success':!![],'data':_0x4061a9});});});}[a118_0x15c6('0xb')](_0x4e46d9,_0x500242,_0xb827a8){return this[a118_0x15c6('0x7')][a118_0x15c6('0xd')]({'params':{'uuid':_0x4e46d9[a118_0x15c6('0xe')][a118_0x15c6('0xf')]},'body':{'uuid':_0x4e46d9[a118_0x15c6('0xe')]['device_uuid']}},null,_0xb827a8,!![])[a118_0x15c6('0x11')](_0xc392c9=>{return this['updateOrCreate']({'params':{'device_id':_0xc392c9['id'],'player_id':_0x4e46d9['body']['player_id']},'body':{'device_id':_0xc392c9['id'],'player_id':_0x4e46d9[a118_0x15c6('0xe')]['player_id'],'playing_item':_0x4e46d9[a118_0x15c6('0xe')][a118_0x15c6('0x16')],'status':_0x4e46d9[a118_0x15c6('0xe')]['status'],'reported_at':new Date()}},null,_0xb827a8)['then'](_0x1d705d=>{delete _0xc392c9['id'];return _0x500242['json']({'success':!![],'data':_0x1d705d});});});}[a118_0x15c6('0xc')](_0x3410ae,_0x4ab7db,_0x22728b){return this[a118_0x15c6('0x8')][a118_0x15c6('0x17')]({'params':{'$user.uuid$':_0x3410ae[a118_0x15c6('0x18')][a118_0x15c6('0x19')]}},null,_0x22728b,!![],[sequelize_utils_1[a118_0x15c6('0x6')][a118_0x15c6('0x1a')][a118_0x15c6('0x1b')],sequelize_utils_1['default'][a118_0x15c6('0x1a')][a118_0x15c6('0x1c')]])[a118_0x15c6('0x11')](_0x57dc89=>{console['log'](_0x57dc89);return _0x4ab7db[a118_0x15c6('0x15')]({'success':!![],'data':_0x57dc89});});}}exports[a118_0x15c6('0x6')]=PlayerDevicesController;