var a66_0x51d1=['__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','register','bind','reportStatus','getStatus','devicesController','updateOrCreate','body','device_uuid','network_info','then','player_id','status','playlist','json','playing_item','playersController','find','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault'];(function(_0x4bd822,_0x2bd6f7){var _0xb4bdb3=function(_0x1d68f6){while(--_0x1d68f6){_0x4bd822['push'](_0x4bd822['shift']());}};_0xb4bdb3(++_0x2bd6f7);}(a66_0x51d1,0x1b2));var a66_0x4237=function(_0x16794b,_0x3f2c7e){_0x16794b=_0x16794b-0x0;var _0x5dadff=a66_0x51d1[_0x16794b];return _0x5dadff;};'use strict';var __importDefault=this&&this[a66_0x4237('0x0')]||function(_0x35cc11){return _0x35cc11&&_0x35cc11[a66_0x4237('0x1')]?_0x35cc11:{'default':_0x35cc11};};Object[a66_0x4237('0x2')](exports,a66_0x4237('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a66_0x4237('0x3')));const sequelize_utils_1=__importDefault(require(a66_0x4237('0x4')));const responseUtils=require(a66_0x4237('0x5'));class PlayerDevicesController extends controller_utils_1[a66_0x4237('0x6')]{constructor(_0x28e1f3,_0x260538,_0x6e0ced){super(_0x28e1f3,null);this['devicesController']=_0x260538;this['playersController']=_0x6e0ced;this['register']=this[a66_0x4237('0x7')][a66_0x4237('0x8')](this);this['reportStatus']=this[a66_0x4237('0x9')][a66_0x4237('0x8')](this);this['getStatus']=this[a66_0x4237('0xa')][a66_0x4237('0x8')](this);}[a66_0x4237('0x7')](_0x3039d9,_0x11427a,_0x22cbae){return this[a66_0x4237('0xb')][a66_0x4237('0xc')]({'params':{'uuid':_0x3039d9[a66_0x4237('0xd')][a66_0x4237('0xe')]},'body':{'uuid':_0x3039d9[a66_0x4237('0xd')][a66_0x4237('0xe')],'network_info':_0x3039d9[a66_0x4237('0xd')][a66_0x4237('0xf')],'firmware_info':_0x3039d9[a66_0x4237('0xd')]['firmware_info']}},null,_0x22cbae,!![])[a66_0x4237('0x10')](_0x4a3fbb=>{return this[a66_0x4237('0xc')]({'params':{'device_id':_0x4a3fbb['id'],'player_id':_0x3039d9[a66_0x4237('0xd')][a66_0x4237('0x11')]},'body':{'device_id':_0x4a3fbb['id'],'player_id':_0x3039d9['body']['player_id'],'status':_0x3039d9[a66_0x4237('0xd')][a66_0x4237('0x12')],'playlist':_0x3039d9[a66_0x4237('0xd')][a66_0x4237('0x13')],'reported_at':new Date()}},null,_0x22cbae)[a66_0x4237('0x10')](_0x47edcc=>{delete _0x4a3fbb['id'];return _0x11427a[a66_0x4237('0x14')]({'success':!![],'data':_0x4a3fbb});});});}[a66_0x4237('0x9')](_0xb80ee8,_0x1791f0,_0x5aecc1){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0xb80ee8[a66_0x4237('0xd')][a66_0x4237('0xe')]},'body':{'uuid':_0xb80ee8[a66_0x4237('0xd')][a66_0x4237('0xe')]}},null,_0x5aecc1,!![])[a66_0x4237('0x10')](_0x29940b=>{return this['updateOrCreate']({'params':{'device_id':_0x29940b['id'],'player_id':_0xb80ee8[a66_0x4237('0xd')][a66_0x4237('0x11')]},'body':{'device_id':_0x29940b['id'],'player_id':_0xb80ee8['body']['player_id'],'playing_item':_0xb80ee8[a66_0x4237('0xd')][a66_0x4237('0x15')],'status':_0xb80ee8[a66_0x4237('0xd')]['status'],'reported_at':new Date()}},null,_0x5aecc1)['then'](_0x55b8c0=>{delete _0x29940b['id'];return _0x1791f0[a66_0x4237('0x14')]({'success':!![],'data':_0x55b8c0});});});}['getStatus'](_0x587480,_0x2243b1,_0x2bedf0){return this[a66_0x4237('0x16')][a66_0x4237('0x17')]({'params':{'$user.uuid$':_0x587480['params'][a66_0x4237('0x18')]}},null,_0x2bedf0,!![],[sequelize_utils_1[a66_0x4237('0x6')][a66_0x4237('0x19')][a66_0x4237('0x1a')],sequelize_utils_1[a66_0x4237('0x6')][a66_0x4237('0x19')][a66_0x4237('0x1b')]])[a66_0x4237('0x10')](_0x23d3e7=>{console[a66_0x4237('0x1c')](_0x23d3e7);return _0x2243b1[a66_0x4237('0x14')]({'success':!![],'data':_0x23d3e7});});}}exports[a66_0x4237('0x6')]=PlayerDevicesController;