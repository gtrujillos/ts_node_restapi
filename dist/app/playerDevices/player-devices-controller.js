var a57_0x153d=['device_uuid','network_info','firmware_info','player_id','playlist','then','json','playing_item','status','find','params','models','usersModel','playerDevicesModel','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body'];(function(_0x550ad2,_0x47cef8){var _0x41564c=function(_0x1645fa){while(--_0x1645fa){_0x550ad2['push'](_0x550ad2['shift']());}};_0x41564c(++_0x47cef8);}(a57_0x153d,0x7e));var a57_0xf5c1=function(_0x3e58bc,_0x4c5913){_0x3e58bc=_0x3e58bc-0x0;var _0x30045b=a57_0x153d[_0x3e58bc];return _0x30045b;};'use strict';var __importDefault=this&&this[a57_0xf5c1('0x0')]||function(_0x32635a){return _0x32635a&&_0x32635a[a57_0xf5c1('0x1')]?_0x32635a:{'default':_0x32635a};};Object[a57_0xf5c1('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0xf5c1('0x3')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a57_0xf5c1('0x4'));class PlayerDevicesController extends controller_utils_1[a57_0xf5c1('0x5')]{constructor(_0x1488b7,_0xe4b159,_0x4b9ac7){super(_0x1488b7,null);this[a57_0xf5c1('0x6')]=_0xe4b159;this[a57_0xf5c1('0x7')]=_0x4b9ac7;this[a57_0xf5c1('0x8')]=this['register'][a57_0xf5c1('0x9')](this);this[a57_0xf5c1('0xa')]=this[a57_0xf5c1('0xa')][a57_0xf5c1('0x9')](this);this[a57_0xf5c1('0xb')]=this[a57_0xf5c1('0xb')][a57_0xf5c1('0x9')](this);}['register'](_0x49d91c,_0x20d736,_0x3af2ee){return this[a57_0xf5c1('0x6')][a57_0xf5c1('0xc')]({'params':{'uuid':_0x49d91c[a57_0xf5c1('0xd')][a57_0xf5c1('0xe')]},'body':{'uuid':_0x49d91c['body'][a57_0xf5c1('0xe')],'network_info':_0x49d91c['body'][a57_0xf5c1('0xf')],'firmware_info':_0x49d91c[a57_0xf5c1('0xd')][a57_0xf5c1('0x10')]}},null,_0x3af2ee,!![])['then'](_0x43594a=>{return this[a57_0xf5c1('0xc')]({'params':{'device_id':_0x43594a['id'],'player_id':_0x49d91c[a57_0xf5c1('0xd')][a57_0xf5c1('0x11')]},'body':{'device_id':_0x43594a['id'],'player_id':_0x49d91c[a57_0xf5c1('0xd')][a57_0xf5c1('0x11')],'status':_0x49d91c[a57_0xf5c1('0xd')]['status'],'playlist':_0x49d91c[a57_0xf5c1('0xd')][a57_0xf5c1('0x12')],'reported_at':new Date()}},null,_0x3af2ee)[a57_0xf5c1('0x13')](_0x18747a=>{delete _0x43594a['id'];return _0x20d736[a57_0xf5c1('0x14')]({'success':!![],'data':_0x43594a});});});}[a57_0xf5c1('0xa')](_0x7f0b9,_0x482cf0,_0x32a415){return this[a57_0xf5c1('0x6')][a57_0xf5c1('0xc')]({'params':{'uuid':_0x7f0b9[a57_0xf5c1('0xd')][a57_0xf5c1('0xe')]},'body':{'uuid':_0x7f0b9[a57_0xf5c1('0xd')][a57_0xf5c1('0xe')]}},null,_0x32a415,!![])[a57_0xf5c1('0x13')](_0x4ef081=>{return this[a57_0xf5c1('0xc')]({'params':{'device_id':_0x4ef081['id'],'player_id':_0x7f0b9[a57_0xf5c1('0xd')][a57_0xf5c1('0x11')]},'body':{'device_id':_0x4ef081['id'],'player_id':_0x7f0b9[a57_0xf5c1('0xd')]['player_id'],'playing_item':_0x7f0b9[a57_0xf5c1('0xd')][a57_0xf5c1('0x15')],'status':_0x7f0b9[a57_0xf5c1('0xd')][a57_0xf5c1('0x16')],'reported_at':new Date()}},null,_0x32a415)['then'](_0x23145b=>{delete _0x4ef081['id'];return _0x482cf0['json']({'success':!![],'data':_0x23145b});});});}[a57_0xf5c1('0xb')](_0xd040e2,_0x5a7fe9,_0x5a04e6){return this['playersController'][a57_0xf5c1('0x17')]({'params':{'$user.uuid$':_0xd040e2[a57_0xf5c1('0x18')]['user_uuid']}},null,_0x5a04e6,!![],[sequelize_utils_1[a57_0xf5c1('0x5')][a57_0xf5c1('0x19')][a57_0xf5c1('0x1a')],sequelize_utils_1[a57_0xf5c1('0x5')][a57_0xf5c1('0x19')][a57_0xf5c1('0x1b')]])['then'](_0x1de563=>{console['log'](_0x1de563);return _0x5a7fe9[a57_0xf5c1('0x14')]({'success':!![],'data':_0x1de563});});}}exports['default']=PlayerDevicesController;