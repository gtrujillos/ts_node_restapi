var a118_0x8ca6=['bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','playlist','uuid','json','find','params','user_uuid','models','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','default','devicesController','playersController','register'];(function(_0x575180,_0x147a08){var _0x3dd42d=function(_0x18f1d2){while(--_0x18f1d2){_0x575180['push'](_0x575180['shift']());}};_0x3dd42d(++_0x147a08);}(a118_0x8ca6,0x84));var a118_0x7b95=function(_0x3aa48d,_0x59b7b0){_0x3aa48d=_0x3aa48d-0x0;var _0x4c9288=a118_0x8ca6[_0x3aa48d];return _0x4c9288;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x38fa0a){return _0x38fa0a&&_0x38fa0a[a118_0x7b95('0x0')]?_0x38fa0a:{'default':_0x38fa0a};};Object[a118_0x7b95('0x1')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x7b95('0x2')));const sequelize_utils_1=__importDefault(require(a118_0x7b95('0x3')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1[a118_0x7b95('0x4')]{constructor(_0x5a3f3a,_0x5b7b9e,_0x323e6b){super(_0x5a3f3a,null);this[a118_0x7b95('0x5')]=_0x5b7b9e;this[a118_0x7b95('0x6')]=_0x323e6b;this[a118_0x7b95('0x7')]=this[a118_0x7b95('0x7')][a118_0x7b95('0x8')](this);this['reportStatus']=this[a118_0x7b95('0x9')]['bind'](this);this[a118_0x7b95('0xa')]=this[a118_0x7b95('0xa')][a118_0x7b95('0x8')](this);}[a118_0x7b95('0x7')](_0x8dddb7,_0x1aa2fc,_0x3c6698){return this['devicesController'][a118_0x7b95('0xb')]({'params':{'uuid':_0x8dddb7[a118_0x7b95('0xc')]['device_uuid']},'body':{'uuid':_0x8dddb7['body'][a118_0x7b95('0xd')],'network_info':_0x8dddb7[a118_0x7b95('0xc')][a118_0x7b95('0xe')],'firmware_info':_0x8dddb7[a118_0x7b95('0xc')][a118_0x7b95('0xf')]}},null,_0x3c6698,!![],!![])[a118_0x7b95('0x10')](_0x30715b=>{return this[a118_0x7b95('0xb')]({'params':{'device_id':_0x30715b['id'],'player_id':_0x8dddb7['body'][a118_0x7b95('0x11')]},'body':{'device_id':_0x30715b['id'],'player_id':_0x8dddb7['body'][a118_0x7b95('0x11')],'status':_0x8dddb7[a118_0x7b95('0xc')][a118_0x7b95('0x12')],'playlist':_0x8dddb7[a118_0x7b95('0xc')][a118_0x7b95('0x13')],'reported_at':new Date()}},null,_0x3c6698,![],!![])['then'](_0x3c84ba=>{const _0x2dcf17={'uuid':_0x3c84ba[a118_0x7b95('0x14')]};return _0x1aa2fc[a118_0x7b95('0x15')]({'success':!![],'data':_0x2dcf17});});});}[a118_0x7b95('0x9')](_0x189188,_0x568506,_0x405bc2){return this[a118_0x7b95('0x5')]['updateOrCreate']({'params':{'uuid':_0x189188[a118_0x7b95('0xc')]['device_uuid']},'body':{'uuid':_0x189188[a118_0x7b95('0xc')][a118_0x7b95('0xd')]}},null,_0x405bc2,!![],!![])[a118_0x7b95('0x10')](_0x1bed0e=>{return this['updateOrCreate']({'params':{'device_id':_0x1bed0e['id'],'player_id':_0x189188[a118_0x7b95('0xc')][a118_0x7b95('0x11')]},'body':{'device_id':_0x1bed0e['id'],'player_id':_0x189188[a118_0x7b95('0xc')][a118_0x7b95('0x11')],'playing_item':_0x189188[a118_0x7b95('0xc')]['playing_item'],'status':_0x189188['body'][a118_0x7b95('0x12')],'reported_at':new Date()}},null,_0x405bc2,![],!![])[a118_0x7b95('0x10')](_0x210e66=>{const _0x356d67={'uuid':_0x210e66[a118_0x7b95('0x14')]};return _0x568506[a118_0x7b95('0x15')]({'success':!![],'data':_0x356d67});});});}[a118_0x7b95('0xa')](_0x353323,_0x5d85ec,_0x3b0a2c){return this[a118_0x7b95('0x6')][a118_0x7b95('0x16')]({'params':{'$user.uuid$':_0x353323[a118_0x7b95('0x17')][a118_0x7b95('0x18')]}},null,_0x3b0a2c,!![],[sequelize_utils_1[a118_0x7b95('0x4')][a118_0x7b95('0x19')]['usersModel'],sequelize_utils_1[a118_0x7b95('0x4')][a118_0x7b95('0x19')][a118_0x7b95('0x1a')]])[a118_0x7b95('0x10')](_0x2f35d6=>{console[a118_0x7b95('0x1b')](_0x2f35d6);return _0x5d85ec[a118_0x7b95('0x15')]({'success':!![],'data':_0x2f35d6});});}}exports[a118_0x7b95('0x4')]=PlayerDevicesController;