var a57_0x49f1=['player_id','status','playlist','json','updateOrCreate','playersController','find','user_uuid','models','usersModel','default','log','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','register','bind','reportStatus','getStatus','body','device_uuid','then'];(function(_0x117bc3,_0x2cc566){var _0x124fab=function(_0x3cd0cf){while(--_0x3cd0cf){_0x117bc3['push'](_0x117bc3['shift']());}};_0x124fab(++_0x2cc566);}(a57_0x49f1,0x1ec));var a57_0x482e=function(_0x147779,_0x15ca3a){_0x147779=_0x147779-0x0;var _0xb66e18=a57_0x49f1[_0x147779];return _0xb66e18;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x7c51f0){return _0x7c51f0&&_0x7c51f0[a57_0x482e('0x0')]?_0x7c51f0:{'default':_0x7c51f0};};Object[a57_0x482e('0x1')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x482e('0x2')));const sequelize_utils_1=__importDefault(require(a57_0x482e('0x3')));const responseUtils=require(a57_0x482e('0x4'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x5a3c2e,_0x545d4e,_0x8e3d19){super(_0x5a3c2e,null);this['devicesController']=_0x545d4e;this['playersController']=_0x8e3d19;this['register']=this[a57_0x482e('0x5')][a57_0x482e('0x6')](this);this[a57_0x482e('0x7')]=this[a57_0x482e('0x7')][a57_0x482e('0x6')](this);this[a57_0x482e('0x8')]=this[a57_0x482e('0x8')][a57_0x482e('0x6')](this);}[a57_0x482e('0x5')](_0x19adac,_0x529596,_0x5c5bc1){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x19adac[a57_0x482e('0x9')][a57_0x482e('0xa')]},'body':{'uuid':_0x19adac[a57_0x482e('0x9')][a57_0x482e('0xa')],'network_info':_0x19adac[a57_0x482e('0x9')]['network_info'],'firmware_info':_0x19adac['body']['firmware_info']}},null,_0x5c5bc1,!![])[a57_0x482e('0xb')](_0x4b52bc=>{return this['updateOrCreate']({'params':{'device_id':_0x4b52bc['id'],'player_id':_0x19adac[a57_0x482e('0x9')]['player_id']},'body':{'device_id':_0x4b52bc['id'],'player_id':_0x19adac[a57_0x482e('0x9')][a57_0x482e('0xc')],'status':_0x19adac[a57_0x482e('0x9')][a57_0x482e('0xd')],'playlist':_0x19adac['body'][a57_0x482e('0xe')],'reported_at':new Date()}},null,_0x5c5bc1)[a57_0x482e('0xb')](_0x5aa3cd=>{delete _0x4b52bc['id'];return _0x529596[a57_0x482e('0xf')]({'success':!![],'data':_0x4b52bc});});});}[a57_0x482e('0x7')](_0x2176d4,_0x4d7f65,_0x103fd6){return this['devicesController'][a57_0x482e('0x10')]({'params':{'uuid':_0x2176d4[a57_0x482e('0x9')][a57_0x482e('0xa')]},'body':{'uuid':_0x2176d4[a57_0x482e('0x9')]['device_uuid']}},null,_0x103fd6,!![])['then'](_0x5698f9=>{return this[a57_0x482e('0x10')]({'params':{'device_id':_0x5698f9['id'],'player_id':_0x2176d4['body'][a57_0x482e('0xc')]},'body':{'device_id':_0x5698f9['id'],'player_id':_0x2176d4['body'][a57_0x482e('0xc')],'playing_item':_0x2176d4[a57_0x482e('0x9')]['playing_item'],'status':_0x2176d4[a57_0x482e('0x9')][a57_0x482e('0xd')],'reported_at':new Date()}},null,_0x103fd6)['then'](_0x50b105=>{delete _0x5698f9['id'];return _0x4d7f65['json']({'success':!![],'data':_0x50b105});});});}[a57_0x482e('0x8')](_0x4ee875,_0x1af779,_0x2b1a3d){return this[a57_0x482e('0x11')][a57_0x482e('0x12')]({'params':{'$user.uuid$':_0x4ee875['params'][a57_0x482e('0x13')]}},null,_0x2b1a3d,!![],[sequelize_utils_1['default'][a57_0x482e('0x14')][a57_0x482e('0x15')],sequelize_utils_1[a57_0x482e('0x16')][a57_0x482e('0x14')]['playerDevicesModel']])[a57_0x482e('0xb')](_0x30640a=>{console[a57_0x482e('0x17')](_0x30640a);return _0x1af779['json']({'success':!![],'data':_0x30640a});});}}exports[a57_0x482e('0x16')]=PlayerDevicesController;