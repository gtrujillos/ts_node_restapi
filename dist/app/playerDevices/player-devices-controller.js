var a57_0x251d=['json','playing_item','find','params','user_uuid','models','playerDevicesModel','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','firmware_info','player_id','status','playlist','then'];(function(_0x327ff0,_0x457fa4){var _0x1e7c08=function(_0x5ec155){while(--_0x5ec155){_0x327ff0['push'](_0x327ff0['shift']());}};_0x1e7c08(++_0x457fa4);}(a57_0x251d,0x125));var a57_0xaa18=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a57_0x251d[_0x2d8f05];return _0x4d74cb;};'use strict';var __importDefault=this&&this[a57_0xaa18('0x0')]||function(_0x764d55){return _0x764d55&&_0x764d55[a57_0xaa18('0x1')]?_0x764d55:{'default':_0x764d55};};Object[a57_0xaa18('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0xaa18('0x3')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1[a57_0xaa18('0x4')]{constructor(_0x2bc1c0,_0x34e854,_0x5b760c){super(_0x2bc1c0,null);this[a57_0xaa18('0x5')]=_0x34e854;this[a57_0xaa18('0x6')]=_0x5b760c;this[a57_0xaa18('0x7')]=this[a57_0xaa18('0x7')][a57_0xaa18('0x8')](this);this[a57_0xaa18('0x9')]=this['reportStatus'][a57_0xaa18('0x8')](this);this[a57_0xaa18('0xa')]=this[a57_0xaa18('0xa')][a57_0xaa18('0x8')](this);}[a57_0xaa18('0x7')](_0x3a19a1,_0x368208,_0x12b8c5){return this[a57_0xaa18('0x5')][a57_0xaa18('0xb')]({'params':{'uuid':_0x3a19a1[a57_0xaa18('0xc')][a57_0xaa18('0xd')]},'body':{'uuid':_0x3a19a1[a57_0xaa18('0xc')][a57_0xaa18('0xd')],'network_info':_0x3a19a1[a57_0xaa18('0xc')]['network_info'],'firmware_info':_0x3a19a1[a57_0xaa18('0xc')][a57_0xaa18('0xe')]}},null,_0x12b8c5,!![])['then'](_0x5e3bcd=>{return this['updateOrCreate']({'params':{'device_id':_0x5e3bcd['id'],'player_id':_0x3a19a1[a57_0xaa18('0xc')][a57_0xaa18('0xf')]},'body':{'device_id':_0x5e3bcd['id'],'player_id':_0x3a19a1[a57_0xaa18('0xc')][a57_0xaa18('0xf')],'status':_0x3a19a1[a57_0xaa18('0xc')][a57_0xaa18('0x10')],'playlist':_0x3a19a1[a57_0xaa18('0xc')][a57_0xaa18('0x11')],'reported_at':new Date()}},null,_0x12b8c5)[a57_0xaa18('0x12')](_0x21b3bd=>{delete _0x5e3bcd['id'];return _0x368208[a57_0xaa18('0x13')]({'success':!![],'data':_0x5e3bcd});});});}[a57_0xaa18('0x9')](_0x857c00,_0x5aa761,_0x117680){return this[a57_0xaa18('0x5')][a57_0xaa18('0xb')]({'params':{'uuid':_0x857c00['body'][a57_0xaa18('0xd')]},'body':{'uuid':_0x857c00['body'][a57_0xaa18('0xd')]}},null,_0x117680,!![])[a57_0xaa18('0x12')](_0x1637fa=>{return this['updateOrCreate']({'params':{'device_id':_0x1637fa['id'],'player_id':_0x857c00[a57_0xaa18('0xc')][a57_0xaa18('0xf')]},'body':{'device_id':_0x1637fa['id'],'player_id':_0x857c00[a57_0xaa18('0xc')]['player_id'],'playing_item':_0x857c00[a57_0xaa18('0xc')][a57_0xaa18('0x14')],'status':_0x857c00[a57_0xaa18('0xc')][a57_0xaa18('0x10')],'reported_at':new Date()}},null,_0x117680)[a57_0xaa18('0x12')](_0x2882e2=>{delete _0x1637fa['id'];return _0x5aa761['json']({'success':!![],'data':_0x2882e2});});});}[a57_0xaa18('0xa')](_0x212f90,_0x386e32,_0x37b776){return this[a57_0xaa18('0x6')][a57_0xaa18('0x15')]({'params':{'$user.uuid$':_0x212f90[a57_0xaa18('0x16')][a57_0xaa18('0x17')]}},null,_0x37b776,!![],[sequelize_utils_1[a57_0xaa18('0x4')][a57_0xaa18('0x18')]['usersModel'],sequelize_utils_1[a57_0xaa18('0x4')]['models'][a57_0xaa18('0x19')]])[a57_0xaa18('0x12')](_0x3d07fc=>{console['log'](_0x3d07fc);return _0x386e32[a57_0xaa18('0x13')]({'success':!![],'data':_0x3d07fc});});}}exports['default']=PlayerDevicesController;