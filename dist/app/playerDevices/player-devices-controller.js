var a118_0x4e34=['device_uuid','network_info','firmware_info','then','player_id','status','playlist','uuid','playing_item','json','playersController','find','params','models','usersModel','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/response-utils','default','devicesController','register','bind','reportStatus','getStatus','updateOrCreate','body'];(function(_0x57e6bb,_0x134ec2){var _0x2ff79d=function(_0x22bca5){while(--_0x22bca5){_0x57e6bb['push'](_0x57e6bb['shift']());}};_0x2ff79d(++_0x134ec2);}(a118_0x4e34,0xf1));var a118_0x5d14=function(_0x43c084,_0x10c701){_0x43c084=_0x43c084-0x0;var _0x2c27a0=a118_0x4e34[_0x43c084];return _0x2c27a0;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4897f9){return _0x4897f9&&_0x4897f9[a118_0x5d14('0x0')]?_0x4897f9:{'default':_0x4897f9};};Object[a118_0x5d14('0x1')](exports,a118_0x5d14('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a118_0x5d14('0x2'));class PlayerDevicesController extends controller_utils_1[a118_0x5d14('0x3')]{constructor(_0x8208e5,_0x260939,_0x1fab7a){super(_0x8208e5,null);this[a118_0x5d14('0x4')]=_0x260939;this['playersController']=_0x1fab7a;this['register']=this[a118_0x5d14('0x5')][a118_0x5d14('0x6')](this);this['reportStatus']=this[a118_0x5d14('0x7')][a118_0x5d14('0x6')](this);this[a118_0x5d14('0x8')]=this[a118_0x5d14('0x8')][a118_0x5d14('0x6')](this);}[a118_0x5d14('0x5')](_0x1917e8,_0x6ba3c8,_0x1ce02f){return this[a118_0x5d14('0x4')][a118_0x5d14('0x9')]({'params':{'uuid':_0x1917e8[a118_0x5d14('0xa')][a118_0x5d14('0xb')]},'body':{'uuid':_0x1917e8[a118_0x5d14('0xa')][a118_0x5d14('0xb')],'network_info':_0x1917e8['body'][a118_0x5d14('0xc')],'firmware_info':_0x1917e8[a118_0x5d14('0xa')][a118_0x5d14('0xd')]}},null,_0x1ce02f,!![],!![])[a118_0x5d14('0xe')](_0x2ae89b=>{return this[a118_0x5d14('0x9')]({'params':{'device_id':_0x2ae89b['id'],'player_id':_0x1917e8[a118_0x5d14('0xa')][a118_0x5d14('0xf')]},'body':{'device_id':_0x2ae89b['id'],'player_id':_0x1917e8['body'][a118_0x5d14('0xf')],'status':_0x1917e8[a118_0x5d14('0xa')][a118_0x5d14('0x10')],'playlist':_0x1917e8['body'][a118_0x5d14('0x11')],'reported_at':new Date()}},null,_0x1ce02f,![],!![])[a118_0x5d14('0xe')](_0x4abc0d=>{const _0x5731f4={'uuid':_0x4abc0d[a118_0x5d14('0x12')]};return _0x6ba3c8['json']({'success':!![],'data':_0x5731f4});});});}[a118_0x5d14('0x7')](_0x1084e6,_0x605642,_0x4a1ba9){return this['devicesController'][a118_0x5d14('0x9')]({'params':{'uuid':_0x1084e6['body'][a118_0x5d14('0xb')]},'body':{'uuid':_0x1084e6[a118_0x5d14('0xa')]['device_uuid']}},null,_0x4a1ba9,!![],!![])[a118_0x5d14('0xe')](_0x482a6c=>{return this[a118_0x5d14('0x9')]({'params':{'device_id':_0x482a6c['id'],'player_id':_0x1084e6[a118_0x5d14('0xa')][a118_0x5d14('0xf')]},'body':{'device_id':_0x482a6c['id'],'player_id':_0x1084e6[a118_0x5d14('0xa')][a118_0x5d14('0xf')],'playing_item':_0x1084e6[a118_0x5d14('0xa')][a118_0x5d14('0x13')],'status':_0x1084e6[a118_0x5d14('0xa')][a118_0x5d14('0x10')],'reported_at':new Date()}},null,_0x4a1ba9,![],!![])['then'](_0x457fd2=>{const _0x1a57c9={'uuid':_0x457fd2['uuid']};return _0x605642[a118_0x5d14('0x14')]({'success':!![],'data':_0x1a57c9});});});}[a118_0x5d14('0x8')](_0x2b724a,_0x3d3508,_0x3babe6){return this[a118_0x5d14('0x15')][a118_0x5d14('0x16')]({'params':{'$user.uuid$':_0x2b724a[a118_0x5d14('0x17')]['user_uuid']}},null,_0x3babe6,!![],[sequelize_utils_1[a118_0x5d14('0x3')][a118_0x5d14('0x18')][a118_0x5d14('0x19')],sequelize_utils_1['default'][a118_0x5d14('0x18')][a118_0x5d14('0x1a')]])[a118_0x5d14('0xe')](_0x26db10=>{console[a118_0x5d14('0x1b')](_0x26db10);return _0x3d3508[a118_0x5d14('0x14')]({'success':!![],'data':_0x26db10});});}}exports[a118_0x5d14('0x3')]=PlayerDevicesController;