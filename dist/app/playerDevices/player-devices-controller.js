var a57_0x742e=['params','user_uuid','models','usersModel','playerDevicesModel','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','playlist','playing_item','json'];(function(_0x24084c,_0x96b7e){var _0x48ba47=function(_0x430969){while(--_0x430969){_0x24084c['push'](_0x24084c['shift']());}};_0x48ba47(++_0x96b7e);}(a57_0x742e,0x19b));var a57_0x3264=function(_0x290597,_0x26a794){_0x290597=_0x290597-0x0;var _0x52443f=a57_0x742e[_0x290597];return _0x52443f;};'use strict';var __importDefault=this&&this[a57_0x3264('0x0')]||function(_0x7bcf3c){return _0x7bcf3c&&_0x7bcf3c[a57_0x3264('0x1')]?_0x7bcf3c:{'default':_0x7bcf3c};};Object[a57_0x3264('0x2')](exports,a57_0x3264('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x3264('0x3')));const sequelize_utils_1=__importDefault(require(a57_0x3264('0x4')));const responseUtils=require(a57_0x3264('0x5'));class PlayerDevicesController extends controller_utils_1[a57_0x3264('0x6')]{constructor(_0x258de0,_0x44941b,_0x36ef01){super(_0x258de0,null);this[a57_0x3264('0x7')]=_0x44941b;this[a57_0x3264('0x8')]=_0x36ef01;this['register']=this[a57_0x3264('0x9')][a57_0x3264('0xa')](this);this[a57_0x3264('0xb')]=this['reportStatus'][a57_0x3264('0xa')](this);this[a57_0x3264('0xc')]=this[a57_0x3264('0xc')]['bind'](this);}[a57_0x3264('0x9')](_0x29cc82,_0x379cd6,_0x54bdb1){return this['devicesController'][a57_0x3264('0xd')]({'params':{'uuid':_0x29cc82[a57_0x3264('0xe')][a57_0x3264('0xf')]},'body':{'uuid':_0x29cc82[a57_0x3264('0xe')][a57_0x3264('0xf')],'network_info':_0x29cc82[a57_0x3264('0xe')][a57_0x3264('0x10')],'firmware_info':_0x29cc82[a57_0x3264('0xe')][a57_0x3264('0x11')]}},null,_0x54bdb1,!![])[a57_0x3264('0x12')](_0x19db51=>{return this[a57_0x3264('0xd')]({'params':{'device_id':_0x19db51['id'],'player_id':_0x29cc82[a57_0x3264('0xe')][a57_0x3264('0x13')]},'body':{'device_id':_0x19db51['id'],'player_id':_0x29cc82['body'][a57_0x3264('0x13')],'status':_0x29cc82[a57_0x3264('0xe')][a57_0x3264('0x14')],'playlist':_0x29cc82[a57_0x3264('0xe')][a57_0x3264('0x15')],'reported_at':new Date()}},null,_0x54bdb1)[a57_0x3264('0x12')](_0x4b9c93=>{delete _0x19db51['id'];return _0x379cd6['json']({'success':!![],'data':_0x19db51});});});}['reportStatus'](_0x47142b,_0x2bbc72,_0x202b09){return this[a57_0x3264('0x7')][a57_0x3264('0xd')]({'params':{'uuid':_0x47142b[a57_0x3264('0xe')][a57_0x3264('0xf')]},'body':{'uuid':_0x47142b[a57_0x3264('0xe')]['device_uuid']}},null,_0x202b09,!![])[a57_0x3264('0x12')](_0x5717d3=>{return this[a57_0x3264('0xd')]({'params':{'device_id':_0x5717d3['id'],'player_id':_0x47142b[a57_0x3264('0xe')]['player_id']},'body':{'device_id':_0x5717d3['id'],'player_id':_0x47142b[a57_0x3264('0xe')][a57_0x3264('0x13')],'playing_item':_0x47142b['body'][a57_0x3264('0x16')],'status':_0x47142b['body'][a57_0x3264('0x14')],'reported_at':new Date()}},null,_0x202b09)[a57_0x3264('0x12')](_0x56bac6=>{delete _0x5717d3['id'];return _0x2bbc72[a57_0x3264('0x17')]({'success':!![],'data':_0x56bac6});});});}['getStatus'](_0x28378d,_0xac23e4,_0x2c68f4){return this[a57_0x3264('0x8')]['find']({'params':{'$user.uuid$':_0x28378d[a57_0x3264('0x18')][a57_0x3264('0x19')]}},null,_0x2c68f4,!![],[sequelize_utils_1[a57_0x3264('0x6')][a57_0x3264('0x1a')][a57_0x3264('0x1b')],sequelize_utils_1[a57_0x3264('0x6')]['models'][a57_0x3264('0x1c')]])[a57_0x3264('0x12')](_0x4d820b=>{console['log'](_0x4d820b);return _0xac23e4['json']({'success':!![],'data':_0x4d820b});});}}exports[a57_0x3264('0x6')]=PlayerDevicesController;