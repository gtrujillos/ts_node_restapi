var a118_0x3753=['usersModel','playerDevicesModel','log','__importDefault','__esModule','../../infrastructure/controller-utils','../../infrastructure/response-utils','default','register','bind','reportStatus','getStatus','devicesController','updateOrCreate','body','network_info','firmware_info','then','player_id','status','json','device_uuid','playersController','user_uuid','models'];(function(_0x57d67e,_0x32c9fe){var _0x54be33=function(_0x2e85d3){while(--_0x2e85d3){_0x57d67e['push'](_0x57d67e['shift']());}};_0x54be33(++_0x32c9fe);}(a118_0x3753,0x99));var a118_0x17e6=function(_0x1a4bfc,_0x41b763){_0x1a4bfc=_0x1a4bfc-0x0;var _0x5612b3=a118_0x3753[_0x1a4bfc];return _0x5612b3;};'use strict';var __importDefault=this&&this[a118_0x17e6('0x0')]||function(_0x43a2b8){return _0x43a2b8&&_0x43a2b8[a118_0x17e6('0x1')]?_0x43a2b8:{'default':_0x43a2b8};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x17e6('0x2')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a118_0x17e6('0x3'));class PlayerDevicesController extends controller_utils_1[a118_0x17e6('0x4')]{constructor(_0x3fed40,_0x5edee9,_0x3b05bc){super(_0x3fed40,null);this['devicesController']=_0x5edee9;this['playersController']=_0x3b05bc;this[a118_0x17e6('0x5')]=this[a118_0x17e6('0x5')][a118_0x17e6('0x6')](this);this[a118_0x17e6('0x7')]=this[a118_0x17e6('0x7')][a118_0x17e6('0x6')](this);this['getStatus']=this[a118_0x17e6('0x8')]['bind'](this);}[a118_0x17e6('0x5')](_0x133d83,_0x452460,_0x87d68f){return this[a118_0x17e6('0x9')][a118_0x17e6('0xa')]({'params':{'uuid':_0x133d83[a118_0x17e6('0xb')]['device_uuid']},'body':{'uuid':_0x133d83[a118_0x17e6('0xb')]['device_uuid'],'network_info':_0x133d83[a118_0x17e6('0xb')][a118_0x17e6('0xc')],'firmware_info':_0x133d83['body'][a118_0x17e6('0xd')]}},null,_0x87d68f,!![])[a118_0x17e6('0xe')](_0x24c237=>{return this['updateOrCreate']({'params':{'device_id':_0x24c237['id'],'player_id':_0x133d83[a118_0x17e6('0xb')][a118_0x17e6('0xf')]},'body':{'device_id':_0x24c237['id'],'player_id':_0x133d83[a118_0x17e6('0xb')][a118_0x17e6('0xf')],'status':_0x133d83[a118_0x17e6('0xb')][a118_0x17e6('0x10')],'playlist':_0x133d83[a118_0x17e6('0xb')]['playlist'],'reported_at':new Date()}},null,_0x87d68f)[a118_0x17e6('0xe')](_0x4e93b3=>{delete _0x24c237['id'];return _0x452460[a118_0x17e6('0x11')]({'success':!![],'data':_0x24c237});});});}[a118_0x17e6('0x7')](_0x21bf48,_0x85fa2a,_0x245d15){return this[a118_0x17e6('0x9')][a118_0x17e6('0xa')]({'params':{'uuid':_0x21bf48['body'][a118_0x17e6('0x12')]},'body':{'uuid':_0x21bf48[a118_0x17e6('0xb')][a118_0x17e6('0x12')]}},null,_0x245d15,!![])['then'](_0x1d92db=>{return this[a118_0x17e6('0xa')]({'params':{'device_id':_0x1d92db['id'],'player_id':_0x21bf48[a118_0x17e6('0xb')][a118_0x17e6('0xf')]},'body':{'device_id':_0x1d92db['id'],'player_id':_0x21bf48[a118_0x17e6('0xb')][a118_0x17e6('0xf')],'playing_item':_0x21bf48[a118_0x17e6('0xb')]['playing_item'],'status':_0x21bf48['body'][a118_0x17e6('0x10')],'reported_at':new Date()}},null,_0x245d15)['then'](_0x8f7879=>{delete _0x1d92db['id'];return _0x85fa2a[a118_0x17e6('0x11')]({'success':!![],'data':_0x8f7879});});});}[a118_0x17e6('0x8')](_0x9b6022,_0x54b6c0,_0x50bdcb){return this[a118_0x17e6('0x13')]['find']({'params':{'$user.uuid$':_0x9b6022['params'][a118_0x17e6('0x14')]}},null,_0x50bdcb,!![],[sequelize_utils_1['default'][a118_0x17e6('0x15')][a118_0x17e6('0x16')],sequelize_utils_1[a118_0x17e6('0x4')][a118_0x17e6('0x15')][a118_0x17e6('0x17')]])[a118_0x17e6('0xe')](_0xee6264=>{console[a118_0x17e6('0x18')](_0xee6264);return _0x54b6c0['json']({'success':!![],'data':_0xee6264});});}}exports[a118_0x17e6('0x4')]=PlayerDevicesController;