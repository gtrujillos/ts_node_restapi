var a57_0x1017=['usersModel','playerDevicesModel','log','__esModule','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','firmware_info','player_id','status','then','json','playing_item','params','user_uuid','models'];(function(_0x2e6b3f,_0x17b152){var _0x3ded98=function(_0x192d62){while(--_0x192d62){_0x2e6b3f['push'](_0x2e6b3f['shift']());}};_0x3ded98(++_0x17b152);}(a57_0x1017,0xab));var a57_0x2fdb=function(_0x408c1e,_0x58e1c4){_0x408c1e=_0x408c1e-0x0;var _0x42a4cf=a57_0x1017[_0x408c1e];return _0x42a4cf;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x51f375){return _0x51f375&&_0x51f375[a57_0x2fdb('0x0')]?_0x51f375:{'default':_0x51f375};};Object['defineProperty'](exports,a57_0x2fdb('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a57_0x2fdb('0x1'));class PlayerDevicesController extends controller_utils_1[a57_0x2fdb('0x2')]{constructor(_0x495e58,_0x3c7820,_0x10a5ec){super(_0x495e58,null);this[a57_0x2fdb('0x3')]=_0x3c7820;this[a57_0x2fdb('0x4')]=_0x10a5ec;this[a57_0x2fdb('0x5')]=this[a57_0x2fdb('0x5')][a57_0x2fdb('0x6')](this);this[a57_0x2fdb('0x7')]=this[a57_0x2fdb('0x7')][a57_0x2fdb('0x6')](this);this[a57_0x2fdb('0x8')]=this[a57_0x2fdb('0x8')][a57_0x2fdb('0x6')](this);}[a57_0x2fdb('0x5')](_0x39b115,_0x4285f6,_0x32f7c8){return this['devicesController'][a57_0x2fdb('0x9')]({'params':{'uuid':_0x39b115[a57_0x2fdb('0xa')][a57_0x2fdb('0xb')]},'body':{'uuid':_0x39b115[a57_0x2fdb('0xa')]['device_uuid'],'network_info':_0x39b115['body']['network_info'],'firmware_info':_0x39b115[a57_0x2fdb('0xa')][a57_0x2fdb('0xc')]}},null,_0x32f7c8,!![])['then'](_0x4c4901=>{return this[a57_0x2fdb('0x9')]({'params':{'device_id':_0x4c4901['id'],'player_id':_0x39b115[a57_0x2fdb('0xa')][a57_0x2fdb('0xd')]},'body':{'device_id':_0x4c4901['id'],'player_id':_0x39b115['body'][a57_0x2fdb('0xd')],'status':_0x39b115['body'][a57_0x2fdb('0xe')],'playlist':_0x39b115[a57_0x2fdb('0xa')]['playlist'],'reported_at':new Date()}},null,_0x32f7c8)[a57_0x2fdb('0xf')](_0x4640fc=>{delete _0x4c4901['id'];return _0x4285f6[a57_0x2fdb('0x10')]({'success':!![],'data':_0x4c4901});});});}[a57_0x2fdb('0x7')](_0x2bcdc5,_0x396ee0,_0x5ca023){return this['devicesController'][a57_0x2fdb('0x9')]({'params':{'uuid':_0x2bcdc5['body'][a57_0x2fdb('0xb')]},'body':{'uuid':_0x2bcdc5[a57_0x2fdb('0xa')]['device_uuid']}},null,_0x5ca023,!![])['then'](_0x3f9825=>{return this[a57_0x2fdb('0x9')]({'params':{'device_id':_0x3f9825['id'],'player_id':_0x2bcdc5[a57_0x2fdb('0xa')][a57_0x2fdb('0xd')]},'body':{'device_id':_0x3f9825['id'],'player_id':_0x2bcdc5[a57_0x2fdb('0xa')][a57_0x2fdb('0xd')],'playing_item':_0x2bcdc5[a57_0x2fdb('0xa')][a57_0x2fdb('0x11')],'status':_0x2bcdc5['body']['status'],'reported_at':new Date()}},null,_0x5ca023)[a57_0x2fdb('0xf')](_0x475187=>{delete _0x3f9825['id'];return _0x396ee0['json']({'success':!![],'data':_0x475187});});});}[a57_0x2fdb('0x8')](_0x459557,_0x3e6f51,_0x155a29){return this['playersController']['find']({'params':{'$user.uuid$':_0x459557[a57_0x2fdb('0x12')][a57_0x2fdb('0x13')]}},null,_0x155a29,!![],[sequelize_utils_1[a57_0x2fdb('0x2')][a57_0x2fdb('0x14')][a57_0x2fdb('0x15')],sequelize_utils_1[a57_0x2fdb('0x2')]['models'][a57_0x2fdb('0x16')]])[a57_0x2fdb('0xf')](_0x98efc=>{console[a57_0x2fdb('0x17')](_0x98efc);return _0x3e6f51[a57_0x2fdb('0x10')]({'success':!![],'data':_0x98efc});});}}exports[a57_0x2fdb('0x2')]=PlayerDevicesController;