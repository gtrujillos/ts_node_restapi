var a57_0x292c=['usersModel','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','register','reportStatus','bind','getStatus','device_uuid','network_info','body','firmware_info','then','updateOrCreate','player_id','json','status','playersController','find','params','models'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a57_0x292c,0x151));var a57_0x1f2e=function(_0x37c511,_0x5c05e5){_0x37c511=_0x37c511-0x0;var _0x3c2f83=a57_0x292c[_0x37c511];return _0x3c2f83;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2cbfa0){return _0x2cbfa0&&_0x2cbfa0[a57_0x1f2e('0x0')]?_0x2cbfa0:{'default':_0x2cbfa0};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x1f2e('0x1')));const sequelize_utils_1=__importDefault(require(a57_0x1f2e('0x2')));const responseUtils=require(a57_0x1f2e('0x3'));class PlayerDevicesController extends controller_utils_1[a57_0x1f2e('0x4')]{constructor(_0x38c35b,_0x327eeb,_0x14d0c6){super(_0x38c35b,null);this[a57_0x1f2e('0x5')]=_0x327eeb;this['playersController']=_0x14d0c6;this[a57_0x1f2e('0x6')]=this[a57_0x1f2e('0x6')]['bind'](this);this[a57_0x1f2e('0x7')]=this[a57_0x1f2e('0x7')][a57_0x1f2e('0x8')](this);this[a57_0x1f2e('0x9')]=this[a57_0x1f2e('0x9')][a57_0x1f2e('0x8')](this);}[a57_0x1f2e('0x6')](_0x3d4da6,_0x3d7653,_0x380b91){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x3d4da6['body'][a57_0x1f2e('0xa')]},'body':{'uuid':_0x3d4da6['body'][a57_0x1f2e('0xa')],'network_info':_0x3d4da6['body'][a57_0x1f2e('0xb')],'firmware_info':_0x3d4da6[a57_0x1f2e('0xc')][a57_0x1f2e('0xd')]}},null,_0x380b91,!![])[a57_0x1f2e('0xe')](_0xb73c27=>{return this[a57_0x1f2e('0xf')]({'params':{'device_id':_0xb73c27['id'],'player_id':_0x3d4da6['body']['player_id']},'body':{'device_id':_0xb73c27['id'],'player_id':_0x3d4da6[a57_0x1f2e('0xc')][a57_0x1f2e('0x10')],'status':_0x3d4da6[a57_0x1f2e('0xc')]['status'],'playlist':_0x3d4da6[a57_0x1f2e('0xc')]['playlist'],'reported_at':new Date()}},null,_0x380b91)[a57_0x1f2e('0xe')](_0x28d34c=>{delete _0xb73c27['id'];return _0x3d7653[a57_0x1f2e('0x11')]({'success':!![],'data':_0xb73c27});});});}[a57_0x1f2e('0x7')](_0x547178,_0x45a8ce,_0x31b166){return this[a57_0x1f2e('0x5')][a57_0x1f2e('0xf')]({'params':{'uuid':_0x547178[a57_0x1f2e('0xc')][a57_0x1f2e('0xa')]},'body':{'uuid':_0x547178[a57_0x1f2e('0xc')][a57_0x1f2e('0xa')]}},null,_0x31b166,!![])[a57_0x1f2e('0xe')](_0x4ef2a4=>{return this[a57_0x1f2e('0xf')]({'params':{'device_id':_0x4ef2a4['id'],'player_id':_0x547178[a57_0x1f2e('0xc')][a57_0x1f2e('0x10')]},'body':{'device_id':_0x4ef2a4['id'],'player_id':_0x547178['body'][a57_0x1f2e('0x10')],'playing_item':_0x547178['body']['playing_item'],'status':_0x547178[a57_0x1f2e('0xc')][a57_0x1f2e('0x12')],'reported_at':new Date()}},null,_0x31b166)[a57_0x1f2e('0xe')](_0x3b88ef=>{delete _0x4ef2a4['id'];return _0x45a8ce[a57_0x1f2e('0x11')]({'success':!![],'data':_0x3b88ef});});});}['getStatus'](_0x593b9b,_0x5aca5b,_0xbd120e){return this[a57_0x1f2e('0x13')][a57_0x1f2e('0x14')]({'params':{'$user.uuid$':_0x593b9b[a57_0x1f2e('0x15')]['user_uuid']}},null,_0xbd120e,!![],[sequelize_utils_1['default'][a57_0x1f2e('0x16')][a57_0x1f2e('0x17')],sequelize_utils_1[a57_0x1f2e('0x4')][a57_0x1f2e('0x16')]['playerDevicesModel']])[a57_0x1f2e('0xe')](_0xb82a33=>{console['log'](_0xb82a33);return _0x5aca5b[a57_0x1f2e('0x11')]({'success':!![],'data':_0xb82a33});});}}exports[a57_0x1f2e('0x4')]=PlayerDevicesController;