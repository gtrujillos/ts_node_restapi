var a66_0x94f2=['getStatus','body','device_uuid','firmware_info','then','updateOrCreate','player_id','status','playlist','playing_item','json','playersController','find','params','user_uuid','default','models','usersModel','log','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','devicesController','register','bind','reportStatus'];(function(_0x2f184b,_0x150adb){var _0x66a54d=function(_0x51fe1d){while(--_0x51fe1d){_0x2f184b['push'](_0x2f184b['shift']());}};_0x66a54d(++_0x150adb);}(a66_0x94f2,0x9a));var a66_0x16e4=function(_0x13cac1,_0x313779){_0x13cac1=_0x13cac1-0x0;var _0x151f3a=a66_0x94f2[_0x13cac1];return _0x151f3a;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5b0c5b){return _0x5b0c5b&&_0x5b0c5b[a66_0x16e4('0x0')]?_0x5b0c5b:{'default':_0x5b0c5b};};Object['defineProperty'](exports,a66_0x16e4('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a66_0x16e4('0x1')));const sequelize_utils_1=__importDefault(require(a66_0x16e4('0x2')));const responseUtils=require(a66_0x16e4('0x3'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x6bda95,_0x17f092,_0x5b781e){super(_0x6bda95,null);this[a66_0x16e4('0x4')]=_0x17f092;this['playersController']=_0x5b781e;this['register']=this[a66_0x16e4('0x5')][a66_0x16e4('0x6')](this);this['reportStatus']=this[a66_0x16e4('0x7')][a66_0x16e4('0x6')](this);this[a66_0x16e4('0x8')]=this[a66_0x16e4('0x8')][a66_0x16e4('0x6')](this);}[a66_0x16e4('0x5')](_0x496e2e,_0x5d7423,_0x1cbcf9){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x496e2e[a66_0x16e4('0x9')]['device_uuid']},'body':{'uuid':_0x496e2e[a66_0x16e4('0x9')][a66_0x16e4('0xa')],'network_info':_0x496e2e[a66_0x16e4('0x9')]['network_info'],'firmware_info':_0x496e2e[a66_0x16e4('0x9')][a66_0x16e4('0xb')]}},null,_0x1cbcf9,!![])[a66_0x16e4('0xc')](_0x623b98=>{return this[a66_0x16e4('0xd')]({'params':{'device_id':_0x623b98['id'],'player_id':_0x496e2e[a66_0x16e4('0x9')][a66_0x16e4('0xe')]},'body':{'device_id':_0x623b98['id'],'player_id':_0x496e2e[a66_0x16e4('0x9')][a66_0x16e4('0xe')],'status':_0x496e2e[a66_0x16e4('0x9')][a66_0x16e4('0xf')],'playlist':_0x496e2e[a66_0x16e4('0x9')][a66_0x16e4('0x10')],'reported_at':new Date()}},null,_0x1cbcf9)[a66_0x16e4('0xc')](_0x25ccc1=>{delete _0x623b98['id'];return _0x5d7423['json']({'success':!![],'data':_0x623b98});});});}['reportStatus'](_0x1d22e1,_0x49e247,_0x15542f){return this[a66_0x16e4('0x4')]['updateOrCreate']({'params':{'uuid':_0x1d22e1['body'][a66_0x16e4('0xa')]},'body':{'uuid':_0x1d22e1[a66_0x16e4('0x9')][a66_0x16e4('0xa')]}},null,_0x15542f,!![])['then'](_0x36ffc5=>{return this[a66_0x16e4('0xd')]({'params':{'device_id':_0x36ffc5['id'],'player_id':_0x1d22e1[a66_0x16e4('0x9')]['player_id']},'body':{'device_id':_0x36ffc5['id'],'player_id':_0x1d22e1[a66_0x16e4('0x9')][a66_0x16e4('0xe')],'playing_item':_0x1d22e1[a66_0x16e4('0x9')][a66_0x16e4('0x11')],'status':_0x1d22e1[a66_0x16e4('0x9')][a66_0x16e4('0xf')],'reported_at':new Date()}},null,_0x15542f)[a66_0x16e4('0xc')](_0x444d10=>{delete _0x36ffc5['id'];return _0x49e247[a66_0x16e4('0x12')]({'success':!![],'data':_0x444d10});});});}['getStatus'](_0x24c5fc,_0x4f923,_0x1a5e5d){return this[a66_0x16e4('0x13')][a66_0x16e4('0x14')]({'params':{'$user.uuid$':_0x24c5fc[a66_0x16e4('0x15')][a66_0x16e4('0x16')]}},null,_0x1a5e5d,!![],[sequelize_utils_1[a66_0x16e4('0x17')][a66_0x16e4('0x18')][a66_0x16e4('0x19')],sequelize_utils_1[a66_0x16e4('0x17')][a66_0x16e4('0x18')]['playerDevicesModel']])[a66_0x16e4('0xc')](_0x465286=>{console[a66_0x16e4('0x1a')](_0x465286);return _0x4f923[a66_0x16e4('0x12')]({'success':!![],'data':_0x465286});});}}exports['default']=PlayerDevicesController;