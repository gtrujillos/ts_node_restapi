var a57_0x1f46=['models','playerDevicesModel','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','devicesController','register','reportStatus','bind','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','playlist','json','playersController','params','user_uuid','default','usersModel'];(function(_0x4b20bd,_0x7096a1){var _0x5d30a0=function(_0x10c90c){while(--_0x10c90c){_0x4b20bd['push'](_0x4b20bd['shift']());}};_0x5d30a0(++_0x7096a1);}(a57_0x1f46,0x1e8));var a57_0x3b7d=function(_0x3fbe08,_0x95c8b2){_0x3fbe08=_0x3fbe08-0x0;var _0x512322=a57_0x1f46[_0x3fbe08];return _0x512322;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x509e66){return _0x509e66&&_0x509e66[a57_0x3b7d('0x0')]?_0x509e66:{'default':_0x509e66};};Object[a57_0x3b7d('0x1')](exports,a57_0x3b7d('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x3b7d('0x2')));const sequelize_utils_1=__importDefault(require(a57_0x3b7d('0x3')));const responseUtils=require(a57_0x3b7d('0x4'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x4167be,_0x42f27c,_0x1cb6aa){super(_0x4167be,null);this[a57_0x3b7d('0x5')]=_0x42f27c;this['playersController']=_0x1cb6aa;this['register']=this[a57_0x3b7d('0x6')]['bind'](this);this[a57_0x3b7d('0x7')]=this[a57_0x3b7d('0x7')][a57_0x3b7d('0x8')](this);this[a57_0x3b7d('0x9')]=this[a57_0x3b7d('0x9')][a57_0x3b7d('0x8')](this);}['register'](_0x59c87e,_0x4746e8,_0x19ad51){return this[a57_0x3b7d('0x5')][a57_0x3b7d('0xa')]({'params':{'uuid':_0x59c87e[a57_0x3b7d('0xb')][a57_0x3b7d('0xc')]},'body':{'uuid':_0x59c87e[a57_0x3b7d('0xb')]['device_uuid'],'network_info':_0x59c87e[a57_0x3b7d('0xb')][a57_0x3b7d('0xd')],'firmware_info':_0x59c87e[a57_0x3b7d('0xb')][a57_0x3b7d('0xe')]}},null,_0x19ad51,!![])[a57_0x3b7d('0xf')](_0x5b09f9=>{return this[a57_0x3b7d('0xa')]({'params':{'device_id':_0x5b09f9['id'],'player_id':_0x59c87e[a57_0x3b7d('0xb')][a57_0x3b7d('0x10')]},'body':{'device_id':_0x5b09f9['id'],'player_id':_0x59c87e[a57_0x3b7d('0xb')][a57_0x3b7d('0x10')],'status':_0x59c87e[a57_0x3b7d('0xb')][a57_0x3b7d('0x11')],'playlist':_0x59c87e[a57_0x3b7d('0xb')][a57_0x3b7d('0x12')],'reported_at':new Date()}},null,_0x19ad51)[a57_0x3b7d('0xf')](_0x3b4fc3=>{delete _0x5b09f9['id'];return _0x4746e8['json']({'success':!![],'data':_0x5b09f9});});});}['reportStatus'](_0x4d12b9,_0x2af409,_0x5a5806){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x4d12b9[a57_0x3b7d('0xb')][a57_0x3b7d('0xc')]},'body':{'uuid':_0x4d12b9[a57_0x3b7d('0xb')]['device_uuid']}},null,_0x5a5806,!![])[a57_0x3b7d('0xf')](_0x2095db=>{return this[a57_0x3b7d('0xa')]({'params':{'device_id':_0x2095db['id'],'player_id':_0x4d12b9[a57_0x3b7d('0xb')]['player_id']},'body':{'device_id':_0x2095db['id'],'player_id':_0x4d12b9[a57_0x3b7d('0xb')][a57_0x3b7d('0x10')],'playing_item':_0x4d12b9[a57_0x3b7d('0xb')]['playing_item'],'status':_0x4d12b9[a57_0x3b7d('0xb')]['status'],'reported_at':new Date()}},null,_0x5a5806)[a57_0x3b7d('0xf')](_0x5e81d1=>{delete _0x2095db['id'];return _0x2af409[a57_0x3b7d('0x13')]({'success':!![],'data':_0x5e81d1});});});}[a57_0x3b7d('0x9')](_0x2532c3,_0x995406,_0x5a2cd6){return this[a57_0x3b7d('0x14')]['find']({'params':{'$user.uuid$':_0x2532c3[a57_0x3b7d('0x15')][a57_0x3b7d('0x16')]}},null,_0x5a2cd6,!![],[sequelize_utils_1[a57_0x3b7d('0x17')]['models'][a57_0x3b7d('0x18')],sequelize_utils_1[a57_0x3b7d('0x17')][a57_0x3b7d('0x19')][a57_0x3b7d('0x1a')]])['then'](_0x1f3c93=>{console['log'](_0x1f3c93);return _0x995406[a57_0x3b7d('0x13')]({'success':!![],'data':_0x1f3c93});});}}exports[a57_0x3b7d('0x17')]=PlayerDevicesController;