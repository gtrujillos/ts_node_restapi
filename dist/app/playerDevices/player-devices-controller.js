var a43_0x2f52=['../../infrastructure/base-controller','default','playersController','bind','reportStatus','getStatus','register','devicesController','updateOrCreate','body','device_uuid','firmware_info','then','playlist','uuid','player_id','playing_item','status','json','params','user_uuid','log','__esModule'];(function(_0x45658b,_0xa6ed42){var _0x51c273=function(_0x5a2c04){while(--_0x5a2c04){_0x45658b['push'](_0x45658b['shift']());}};_0x51c273(++_0xa6ed42);}(a43_0x2f52,0x1cb));var a43_0x5ae2=function(_0x1a5bed,_0x4ea952){_0x1a5bed=_0x1a5bed-0x0;var _0x33f685=a43_0x2f52[_0x1a5bed];return _0x33f685;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x12f839){return _0x12f839&&_0x12f839[a43_0x5ae2('0x0')]?_0x12f839:{'default':_0x12f839};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const base_controller_1=__importDefault(require(a43_0x5ae2('0x1')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends base_controller_1[a43_0x5ae2('0x2')]{constructor(_0x281238,_0x427b32,_0x5d68c8){super(_0x281238,null);this['devicesController']=_0x427b32;this[a43_0x5ae2('0x3')]=_0x5d68c8;this['register']=this['register'][a43_0x5ae2('0x4')](this);this['reportStatus']=this[a43_0x5ae2('0x5')][a43_0x5ae2('0x4')](this);this[a43_0x5ae2('0x6')]=this['getStatus']['bind'](this);}[a43_0x5ae2('0x7')](_0x2655aa,_0x3143b4,_0x1a4fa1){return this[a43_0x5ae2('0x8')][a43_0x5ae2('0x9')]({'params':{'uuid':_0x2655aa['body']['device_uuid']},'body':{'uuid':_0x2655aa[a43_0x5ae2('0xa')][a43_0x5ae2('0xb')],'network_info':_0x2655aa[a43_0x5ae2('0xa')]['network_info'],'firmware_info':_0x2655aa[a43_0x5ae2('0xa')][a43_0x5ae2('0xc')]}},null,_0x1a4fa1,!![],!![])[a43_0x5ae2('0xd')](_0x48ae45=>{return this['updateOrCreate']({'params':{'device_id':_0x48ae45['id'],'player_id':_0x2655aa[a43_0x5ae2('0xa')]['player_id']},'body':{'device_id':_0x48ae45['id'],'player_id':_0x2655aa[a43_0x5ae2('0xa')]['player_id'],'status':_0x2655aa['body']['status'],'playlist':_0x2655aa[a43_0x5ae2('0xa')][a43_0x5ae2('0xe')],'reported_at':new Date()}},null,_0x1a4fa1,![],!![])[a43_0x5ae2('0xd')](_0x4efa09=>{const _0x49bf6a={'uuid':_0x4efa09[a43_0x5ae2('0xf')]};return _0x3143b4['json']({'success':!![],'data':_0x49bf6a});});});}['reportStatus'](_0x5cd3e5,_0x1a4624,_0x3da7fb){return this[a43_0x5ae2('0x8')][a43_0x5ae2('0x9')]({'params':{'uuid':_0x5cd3e5[a43_0x5ae2('0xa')][a43_0x5ae2('0xb')]},'body':{'uuid':_0x5cd3e5[a43_0x5ae2('0xa')][a43_0x5ae2('0xb')]}},null,_0x3da7fb,!![],!![])[a43_0x5ae2('0xd')](_0x4da1f7=>{return this[a43_0x5ae2('0x9')]({'params':{'device_id':_0x4da1f7['id'],'player_id':_0x5cd3e5[a43_0x5ae2('0xa')][a43_0x5ae2('0x10')]},'body':{'device_id':_0x4da1f7['id'],'player_id':_0x5cd3e5[a43_0x5ae2('0xa')][a43_0x5ae2('0x10')],'playing_item':_0x5cd3e5[a43_0x5ae2('0xa')][a43_0x5ae2('0x11')],'status':_0x5cd3e5[a43_0x5ae2('0xa')][a43_0x5ae2('0x12')],'reported_at':new Date()}},null,_0x3da7fb,![],!![])[a43_0x5ae2('0xd')](_0x39a817=>{const _0x3bf92a={'uuid':_0x39a817['uuid']};return _0x1a4624[a43_0x5ae2('0x13')]({'success':!![],'data':_0x3bf92a});});});}['getStatus'](_0x2d3b67,_0x2bec1f,_0x2f87a0){return this[a43_0x5ae2('0x3')]['find']({'params':{'$user.uuid$':_0x2d3b67[a43_0x5ae2('0x14')][a43_0x5ae2('0x15')]}},null,_0x2f87a0)[a43_0x5ae2('0xd')](_0x2b2885=>{console[a43_0x5ae2('0x16')](_0x2b2885);return _0x2bec1f['json']({'success':!![],'data':_0x2b2885});});}}exports[a43_0x5ae2('0x2')]=PlayerDevicesController;