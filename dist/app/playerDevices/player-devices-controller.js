var a118_0x1849=['json','find','user_uuid','default','models','__importDefault','__esModule','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','playersController','register','bind','reportStatus','getStatus','devicesController','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','playlist'];(function(_0x5c343d,_0x1dd157){var _0x1aa819=function(_0x498ab5){while(--_0x498ab5){_0x5c343d['push'](_0x5c343d['shift']());}};_0x1aa819(++_0x1dd157);}(a118_0x1849,0x95));var a118_0x4ac3=function(_0x3aa924,_0x3f722b){_0x3aa924=_0x3aa924-0x0;var _0x514469=a118_0x1849[_0x3aa924];return _0x514469;};'use strict';var __importDefault=this&&this[a118_0x4ac3('0x0')]||function(_0x46c679){return _0x46c679&&_0x46c679[a118_0x4ac3('0x1')]?_0x46c679:{'default':_0x46c679};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a118_0x4ac3('0x2')));const responseUtils=require(a118_0x4ac3('0x3'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x1f5992,_0x1b66d0,_0xf3f27d){super(_0x1f5992,null);this['devicesController']=_0x1b66d0;this[a118_0x4ac3('0x4')]=_0xf3f27d;this[a118_0x4ac3('0x5')]=this['register'][a118_0x4ac3('0x6')](this);this[a118_0x4ac3('0x7')]=this[a118_0x4ac3('0x7')][a118_0x4ac3('0x6')](this);this[a118_0x4ac3('0x8')]=this[a118_0x4ac3('0x8')][a118_0x4ac3('0x6')](this);}[a118_0x4ac3('0x5')](_0x1bb6a6,_0x4f4eb1,_0x24f1ed){return this[a118_0x4ac3('0x9')][a118_0x4ac3('0xa')]({'params':{'uuid':_0x1bb6a6[a118_0x4ac3('0xb')][a118_0x4ac3('0xc')]},'body':{'uuid':_0x1bb6a6['body'][a118_0x4ac3('0xc')],'network_info':_0x1bb6a6[a118_0x4ac3('0xb')][a118_0x4ac3('0xd')],'firmware_info':_0x1bb6a6[a118_0x4ac3('0xb')][a118_0x4ac3('0xe')]}},null,_0x24f1ed,!![])[a118_0x4ac3('0xf')](_0x4259d5=>{return this[a118_0x4ac3('0xa')]({'params':{'device_id':_0x4259d5['id'],'player_id':_0x1bb6a6[a118_0x4ac3('0xb')]['player_id']},'body':{'device_id':_0x4259d5['id'],'player_id':_0x1bb6a6[a118_0x4ac3('0xb')][a118_0x4ac3('0x10')],'status':_0x1bb6a6['body'][a118_0x4ac3('0x11')],'playlist':_0x1bb6a6[a118_0x4ac3('0xb')][a118_0x4ac3('0x12')],'reported_at':new Date()}},null,_0x24f1ed)[a118_0x4ac3('0xf')](_0x262dd6=>{delete _0x4259d5['id'];return _0x4f4eb1[a118_0x4ac3('0x13')]({'success':!![],'data':_0x4259d5});});});}[a118_0x4ac3('0x7')](_0x32e367,_0x18ee6d,_0x3107a7){return this['devicesController'][a118_0x4ac3('0xa')]({'params':{'uuid':_0x32e367['body']['device_uuid']},'body':{'uuid':_0x32e367[a118_0x4ac3('0xb')][a118_0x4ac3('0xc')]}},null,_0x3107a7,!![])['then'](_0x431eb1=>{return this['updateOrCreate']({'params':{'device_id':_0x431eb1['id'],'player_id':_0x32e367[a118_0x4ac3('0xb')][a118_0x4ac3('0x10')]},'body':{'device_id':_0x431eb1['id'],'player_id':_0x32e367[a118_0x4ac3('0xb')][a118_0x4ac3('0x10')],'playing_item':_0x32e367[a118_0x4ac3('0xb')]['playing_item'],'status':_0x32e367[a118_0x4ac3('0xb')][a118_0x4ac3('0x11')],'reported_at':new Date()}},null,_0x3107a7)['then'](_0x401e3e=>{delete _0x431eb1['id'];return _0x18ee6d[a118_0x4ac3('0x13')]({'success':!![],'data':_0x401e3e});});});}[a118_0x4ac3('0x8')](_0x408334,_0x109d46,_0x4d10c1){return this['playersController'][a118_0x4ac3('0x14')]({'params':{'$user.uuid$':_0x408334['params'][a118_0x4ac3('0x15')]}},null,_0x4d10c1,!![],[sequelize_utils_1[a118_0x4ac3('0x16')][a118_0x4ac3('0x17')]['usersModel'],sequelize_utils_1[a118_0x4ac3('0x16')]['models']['playerDevicesModel']])[a118_0x4ac3('0xf')](_0x5a19c1=>{console['log'](_0x5a19c1);return _0x109d46[a118_0x4ac3('0x13')]({'success':!![],'data':_0x5a19c1});});}}exports[a118_0x4ac3('0x16')]=PlayerDevicesController;