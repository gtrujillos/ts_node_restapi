var a118_0x3c72=['player_id','status','json','playing_item','params','user_uuid','models','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then'];(function(_0x33f9e5,_0x39d163){var _0x1a3325=function(_0x15095d){while(--_0x15095d){_0x33f9e5['push'](_0x33f9e5['shift']());}};_0x1a3325(++_0x39d163);}(a118_0x3c72,0x135));var a118_0x21b6=function(_0xc5d059,_0x15cb89){_0xc5d059=_0xc5d059-0x0;var _0x25149c=a118_0x3c72[_0xc5d059];return _0x25149c;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x27a7c4){return _0x27a7c4&&_0x27a7c4[a118_0x21b6('0x0')]?_0x27a7c4:{'default':_0x27a7c4};};Object[a118_0x21b6('0x1')](exports,a118_0x21b6('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a118_0x21b6('0x2'));class PlayerDevicesController extends controller_utils_1[a118_0x21b6('0x3')]{constructor(_0x45b5d3,_0x3ed988,_0x35d226){super(_0x45b5d3,null);this[a118_0x21b6('0x4')]=_0x3ed988;this[a118_0x21b6('0x5')]=_0x35d226;this[a118_0x21b6('0x6')]=this[a118_0x21b6('0x6')][a118_0x21b6('0x7')](this);this[a118_0x21b6('0x8')]=this[a118_0x21b6('0x8')][a118_0x21b6('0x7')](this);this[a118_0x21b6('0x9')]=this[a118_0x21b6('0x9')][a118_0x21b6('0x7')](this);}[a118_0x21b6('0x6')](_0x11e75f,_0x176d28,_0x175314){return this[a118_0x21b6('0x4')][a118_0x21b6('0xa')]({'params':{'uuid':_0x11e75f[a118_0x21b6('0xb')][a118_0x21b6('0xc')]},'body':{'uuid':_0x11e75f['body'][a118_0x21b6('0xc')],'network_info':_0x11e75f[a118_0x21b6('0xb')][a118_0x21b6('0xd')],'firmware_info':_0x11e75f['body'][a118_0x21b6('0xe')]}},null,_0x175314,!![])[a118_0x21b6('0xf')](_0x5edbbc=>{return this[a118_0x21b6('0xa')]({'params':{'device_id':_0x5edbbc['id'],'player_id':_0x11e75f['body'][a118_0x21b6('0x10')]},'body':{'device_id':_0x5edbbc['id'],'player_id':_0x11e75f[a118_0x21b6('0xb')]['player_id'],'status':_0x11e75f['body'][a118_0x21b6('0x11')],'playlist':_0x11e75f[a118_0x21b6('0xb')]['playlist'],'reported_at':new Date()}},null,_0x175314)[a118_0x21b6('0xf')](_0x5163a0=>{delete _0x5edbbc['id'];return _0x176d28[a118_0x21b6('0x12')]({'success':!![],'data':_0x5edbbc});});});}['reportStatus'](_0x5413f2,_0x56d97b,_0x115ef4){return this[a118_0x21b6('0x4')]['updateOrCreate']({'params':{'uuid':_0x5413f2[a118_0x21b6('0xb')]['device_uuid']},'body':{'uuid':_0x5413f2[a118_0x21b6('0xb')][a118_0x21b6('0xc')]}},null,_0x115ef4,!![])[a118_0x21b6('0xf')](_0x29fa40=>{return this[a118_0x21b6('0xa')]({'params':{'device_id':_0x29fa40['id'],'player_id':_0x5413f2[a118_0x21b6('0xb')][a118_0x21b6('0x10')]},'body':{'device_id':_0x29fa40['id'],'player_id':_0x5413f2[a118_0x21b6('0xb')][a118_0x21b6('0x10')],'playing_item':_0x5413f2[a118_0x21b6('0xb')][a118_0x21b6('0x13')],'status':_0x5413f2['body'][a118_0x21b6('0x11')],'reported_at':new Date()}},null,_0x115ef4)['then'](_0x42516f=>{delete _0x29fa40['id'];return _0x56d97b[a118_0x21b6('0x12')]({'success':!![],'data':_0x42516f});});});}[a118_0x21b6('0x9')](_0x2ed91c,_0x103cd1,_0x235f70){return this['playersController']['find']({'params':{'$user.uuid$':_0x2ed91c[a118_0x21b6('0x14')][a118_0x21b6('0x15')]}},null,_0x235f70,!![],[sequelize_utils_1[a118_0x21b6('0x3')][a118_0x21b6('0x16')]['usersModel'],sequelize_utils_1[a118_0x21b6('0x3')][a118_0x21b6('0x16')][a118_0x21b6('0x17')]])[a118_0x21b6('0xf')](_0x1155e5=>{console[a118_0x21b6('0x18')](_0x1155e5);return _0x103cd1[a118_0x21b6('0x12')]({'success':!![],'data':_0x1155e5});});}}exports[a118_0x21b6('0x3')]=PlayerDevicesController;