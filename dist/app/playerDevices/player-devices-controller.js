var a57_0x53f5=['defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','bind','reportStatus','register','device_uuid','body','firmware_info','then','updateOrCreate','player_id','json','playing_item','getStatus','find','user_uuid','models','playerDevicesModel','log','__importDefault','__esModule'];(function(_0x2d48a5,_0x1b1d0c){var _0x29e0d5=function(_0x233831){while(--_0x233831){_0x2d48a5['push'](_0x2d48a5['shift']());}};_0x29e0d5(++_0x1b1d0c);}(a57_0x53f5,0x150));var a57_0x24e2=function(_0x177180,_0x762929){_0x177180=_0x177180-0x0;var _0x383306=a57_0x53f5[_0x177180];return _0x383306;};'use strict';var __importDefault=this&&this[a57_0x24e2('0x0')]||function(_0x3cb999){return _0x3cb999&&_0x3cb999[a57_0x24e2('0x1')]?_0x3cb999:{'default':_0x3cb999};};Object[a57_0x24e2('0x2')](exports,a57_0x24e2('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x24e2('0x3')));const sequelize_utils_1=__importDefault(require(a57_0x24e2('0x4')));const responseUtils=require(a57_0x24e2('0x5'));class PlayerDevicesController extends controller_utils_1[a57_0x24e2('0x6')]{constructor(_0xd3a27,_0x986e2c,_0x535ed6){super(_0xd3a27,null);this[a57_0x24e2('0x7')]=_0x986e2c;this[a57_0x24e2('0x8')]=_0x535ed6;this['register']=this['register'][a57_0x24e2('0x9')](this);this[a57_0x24e2('0xa')]=this[a57_0x24e2('0xa')][a57_0x24e2('0x9')](this);this['getStatus']=this['getStatus']['bind'](this);}[a57_0x24e2('0xb')](_0xf00cac,_0x58a427,_0x114b70){return this[a57_0x24e2('0x7')]['updateOrCreate']({'params':{'uuid':_0xf00cac['body'][a57_0x24e2('0xc')]},'body':{'uuid':_0xf00cac[a57_0x24e2('0xd')][a57_0x24e2('0xc')],'network_info':_0xf00cac[a57_0x24e2('0xd')]['network_info'],'firmware_info':_0xf00cac[a57_0x24e2('0xd')][a57_0x24e2('0xe')]}},null,_0x114b70,!![])[a57_0x24e2('0xf')](_0x4f5660=>{return this[a57_0x24e2('0x10')]({'params':{'device_id':_0x4f5660['id'],'player_id':_0xf00cac[a57_0x24e2('0xd')][a57_0x24e2('0x11')]},'body':{'device_id':_0x4f5660['id'],'player_id':_0xf00cac['body'][a57_0x24e2('0x11')],'status':_0xf00cac[a57_0x24e2('0xd')]['status'],'playlist':_0xf00cac[a57_0x24e2('0xd')]['playlist'],'reported_at':new Date()}},null,_0x114b70)[a57_0x24e2('0xf')](_0x5d88b7=>{delete _0x4f5660['id'];return _0x58a427[a57_0x24e2('0x12')]({'success':!![],'data':_0x4f5660});});});}[a57_0x24e2('0xa')](_0xeca0cc,_0x2051ff,_0x408fb0){return this[a57_0x24e2('0x7')]['updateOrCreate']({'params':{'uuid':_0xeca0cc[a57_0x24e2('0xd')][a57_0x24e2('0xc')]},'body':{'uuid':_0xeca0cc[a57_0x24e2('0xd')][a57_0x24e2('0xc')]}},null,_0x408fb0,!![])[a57_0x24e2('0xf')](_0x31a0b0=>{return this['updateOrCreate']({'params':{'device_id':_0x31a0b0['id'],'player_id':_0xeca0cc[a57_0x24e2('0xd')][a57_0x24e2('0x11')]},'body':{'device_id':_0x31a0b0['id'],'player_id':_0xeca0cc[a57_0x24e2('0xd')]['player_id'],'playing_item':_0xeca0cc[a57_0x24e2('0xd')][a57_0x24e2('0x13')],'status':_0xeca0cc[a57_0x24e2('0xd')]['status'],'reported_at':new Date()}},null,_0x408fb0)[a57_0x24e2('0xf')](_0x167926=>{delete _0x31a0b0['id'];return _0x2051ff[a57_0x24e2('0x12')]({'success':!![],'data':_0x167926});});});}[a57_0x24e2('0x14')](_0x84099b,_0x325734,_0x3f5ad5){return this[a57_0x24e2('0x8')][a57_0x24e2('0x15')]({'params':{'$user.uuid$':_0x84099b['params'][a57_0x24e2('0x16')]}},null,_0x3f5ad5,!![],[sequelize_utils_1[a57_0x24e2('0x6')]['models']['usersModel'],sequelize_utils_1[a57_0x24e2('0x6')][a57_0x24e2('0x17')][a57_0x24e2('0x18')]])[a57_0x24e2('0xf')](_0x2a2029=>{console[a57_0x24e2('0x19')](_0x2a2029);return _0x325734['json']({'success':!![],'data':_0x2a2029});});}}exports[a57_0x24e2('0x6')]=PlayerDevicesController;