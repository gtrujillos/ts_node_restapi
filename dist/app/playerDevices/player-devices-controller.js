var a57_0x5bd8=['playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','firmware_info','then','player_id','json','device_uuid','playing_item','find','models','usersModel','playerDevicesModel','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController'];(function(_0xa5958b,_0x492685){var _0x1ee469=function(_0x285616){while(--_0x285616){_0xa5958b['push'](_0xa5958b['shift']());}};_0x1ee469(++_0x492685);}(a57_0x5bd8,0x188));var a57_0x1be7=function(_0x4bd822,_0x2bd6f7){_0x4bd822=_0x4bd822-0x0;var _0xb4bdb3=a57_0x5bd8[_0x4bd822];return _0xb4bdb3;};'use strict';var __importDefault=this&&this[a57_0x1be7('0x0')]||function(_0x35f073){return _0x35f073&&_0x35f073[a57_0x1be7('0x1')]?_0x35f073:{'default':_0x35f073};};Object[a57_0x1be7('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x1be7('0x3')));const sequelize_utils_1=__importDefault(require(a57_0x1be7('0x4')));const responseUtils=require(a57_0x1be7('0x5'));class PlayerDevicesController extends controller_utils_1[a57_0x1be7('0x6')]{constructor(_0x170bd4,_0x391ea4,_0x27aa56){super(_0x170bd4,null);this[a57_0x1be7('0x7')]=_0x391ea4;this[a57_0x1be7('0x8')]=_0x27aa56;this[a57_0x1be7('0x9')]=this[a57_0x1be7('0x9')][a57_0x1be7('0xa')](this);this[a57_0x1be7('0xb')]=this['reportStatus'][a57_0x1be7('0xa')](this);this[a57_0x1be7('0xc')]=this['getStatus'][a57_0x1be7('0xa')](this);}[a57_0x1be7('0x9')](_0x3fd110,_0x293f1f,_0x30e21a){return this[a57_0x1be7('0x7')][a57_0x1be7('0xd')]({'params':{'uuid':_0x3fd110[a57_0x1be7('0xe')]['device_uuid']},'body':{'uuid':_0x3fd110['body']['device_uuid'],'network_info':_0x3fd110[a57_0x1be7('0xe')]['network_info'],'firmware_info':_0x3fd110[a57_0x1be7('0xe')][a57_0x1be7('0xf')]}},null,_0x30e21a,!![])[a57_0x1be7('0x10')](_0x2b743a=>{return this['updateOrCreate']({'params':{'device_id':_0x2b743a['id'],'player_id':_0x3fd110[a57_0x1be7('0xe')][a57_0x1be7('0x11')]},'body':{'device_id':_0x2b743a['id'],'player_id':_0x3fd110[a57_0x1be7('0xe')][a57_0x1be7('0x11')],'status':_0x3fd110[a57_0x1be7('0xe')]['status'],'playlist':_0x3fd110[a57_0x1be7('0xe')]['playlist'],'reported_at':new Date()}},null,_0x30e21a)[a57_0x1be7('0x10')](_0x28557d=>{delete _0x2b743a['id'];return _0x293f1f[a57_0x1be7('0x12')]({'success':!![],'data':_0x2b743a});});});}[a57_0x1be7('0xb')](_0x3dc77b,_0x29930d,_0x384b41){return this[a57_0x1be7('0x7')][a57_0x1be7('0xd')]({'params':{'uuid':_0x3dc77b[a57_0x1be7('0xe')][a57_0x1be7('0x13')]},'body':{'uuid':_0x3dc77b[a57_0x1be7('0xe')][a57_0x1be7('0x13')]}},null,_0x384b41,!![])[a57_0x1be7('0x10')](_0x232ede=>{return this['updateOrCreate']({'params':{'device_id':_0x232ede['id'],'player_id':_0x3dc77b[a57_0x1be7('0xe')]['player_id']},'body':{'device_id':_0x232ede['id'],'player_id':_0x3dc77b['body'][a57_0x1be7('0x11')],'playing_item':_0x3dc77b[a57_0x1be7('0xe')][a57_0x1be7('0x14')],'status':_0x3dc77b[a57_0x1be7('0xe')]['status'],'reported_at':new Date()}},null,_0x384b41)['then'](_0x40c222=>{delete _0x232ede['id'];return _0x29930d[a57_0x1be7('0x12')]({'success':!![],'data':_0x40c222});});});}['getStatus'](_0x5bf140,_0x3d4910,_0xfd5d1c){return this[a57_0x1be7('0x8')][a57_0x1be7('0x15')]({'params':{'$user.uuid$':_0x5bf140['params']['user_uuid']}},null,_0xfd5d1c,!![],[sequelize_utils_1['default'][a57_0x1be7('0x16')][a57_0x1be7('0x17')],sequelize_utils_1[a57_0x1be7('0x6')][a57_0x1be7('0x16')][a57_0x1be7('0x18')]])[a57_0x1be7('0x10')](_0x3eaa84=>{console['log'](_0x3eaa84);return _0x3d4910[a57_0x1be7('0x12')]({'success':!![],'data':_0x3eaa84});});}}exports[a57_0x1be7('0x6')]=PlayerDevicesController;