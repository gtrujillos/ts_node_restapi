var a118_0x429f=['devicesController','playersController','register','bind','reportStatus','getStatus','body','device_uuid','network_info','player_id','status','then','updateOrCreate','playing_item','json','find','params','user_uuid','usersModel','models','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default'];(function(_0x218855,_0x5fac8b){var _0x34bb0a=function(_0xb9e1ce){while(--_0xb9e1ce){_0x218855['push'](_0x218855['shift']());}};_0x34bb0a(++_0x5fac8b);}(a118_0x429f,0x122));var a118_0x3701=function(_0x3d9f29,_0x378805){_0x3d9f29=_0x3d9f29-0x0;var _0x39711d=a118_0x429f[_0x3d9f29];return _0x39711d;};'use strict';var __importDefault=this&&this[a118_0x3701('0x0')]||function(_0x1992e6){return _0x1992e6&&_0x1992e6[a118_0x3701('0x1')]?_0x1992e6:{'default':_0x1992e6};};Object[a118_0x3701('0x2')](exports,a118_0x3701('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x3701('0x3')));const sequelize_utils_1=__importDefault(require(a118_0x3701('0x4')));const responseUtils=require(a118_0x3701('0x5'));class PlayerDevicesController extends controller_utils_1[a118_0x3701('0x6')]{constructor(_0x5b54d4,_0x405626,_0x13b952){super(_0x5b54d4,null);this[a118_0x3701('0x7')]=_0x405626;this[a118_0x3701('0x8')]=_0x13b952;this[a118_0x3701('0x9')]=this[a118_0x3701('0x9')][a118_0x3701('0xa')](this);this[a118_0x3701('0xb')]=this[a118_0x3701('0xb')]['bind'](this);this['getStatus']=this[a118_0x3701('0xc')][a118_0x3701('0xa')](this);}[a118_0x3701('0x9')](_0x48c06e,_0xe5a40,_0x25a11b){return this[a118_0x3701('0x7')]['updateOrCreate']({'params':{'uuid':_0x48c06e[a118_0x3701('0xd')][a118_0x3701('0xe')]},'body':{'uuid':_0x48c06e[a118_0x3701('0xd')][a118_0x3701('0xe')],'network_info':_0x48c06e[a118_0x3701('0xd')][a118_0x3701('0xf')],'firmware_info':_0x48c06e[a118_0x3701('0xd')]['firmware_info']}},null,_0x25a11b,!![])['then'](_0x4e1473=>{return this['updateOrCreate']({'params':{'device_id':_0x4e1473['id'],'player_id':_0x48c06e[a118_0x3701('0xd')][a118_0x3701('0x10')]},'body':{'device_id':_0x4e1473['id'],'player_id':_0x48c06e[a118_0x3701('0xd')][a118_0x3701('0x10')],'status':_0x48c06e['body'][a118_0x3701('0x11')],'playlist':_0x48c06e[a118_0x3701('0xd')]['playlist'],'reported_at':new Date()}},null,_0x25a11b)[a118_0x3701('0x12')](_0x25fe2f=>{delete _0x4e1473['id'];return _0xe5a40['json']({'success':!![],'data':_0x4e1473});});});}[a118_0x3701('0xb')](_0x23ee06,_0x41d109,_0x4ed3a6){return this[a118_0x3701('0x7')][a118_0x3701('0x13')]({'params':{'uuid':_0x23ee06[a118_0x3701('0xd')]['device_uuid']},'body':{'uuid':_0x23ee06[a118_0x3701('0xd')][a118_0x3701('0xe')]}},null,_0x4ed3a6,!![])[a118_0x3701('0x12')](_0x105323=>{return this[a118_0x3701('0x13')]({'params':{'device_id':_0x105323['id'],'player_id':_0x23ee06['body'][a118_0x3701('0x10')]},'body':{'device_id':_0x105323['id'],'player_id':_0x23ee06[a118_0x3701('0xd')][a118_0x3701('0x10')],'playing_item':_0x23ee06[a118_0x3701('0xd')][a118_0x3701('0x14')],'status':_0x23ee06[a118_0x3701('0xd')][a118_0x3701('0x11')],'reported_at':new Date()}},null,_0x4ed3a6)['then'](_0x3609c2=>{delete _0x105323['id'];return _0x41d109[a118_0x3701('0x15')]({'success':!![],'data':_0x3609c2});});});}[a118_0x3701('0xc')](_0xc52f96,_0x10b93e,_0x12659e){return this['playersController'][a118_0x3701('0x16')]({'params':{'$user.uuid$':_0xc52f96[a118_0x3701('0x17')][a118_0x3701('0x18')]}},null,_0x12659e,!![],[sequelize_utils_1[a118_0x3701('0x6')]['models'][a118_0x3701('0x19')],sequelize_utils_1[a118_0x3701('0x6')][a118_0x3701('0x1a')]['playerDevicesModel']])[a118_0x3701('0x12')](_0x1dd587=>{console['log'](_0x1dd587);return _0x10b93e[a118_0x3701('0x15')]({'success':!![],'data':_0x1dd587});});}}exports[a118_0x3701('0x6')]=PlayerDevicesController;