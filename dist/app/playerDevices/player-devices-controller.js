var a57_0x10e7=['../../infrastructure/sequelize-utils','../../infrastructure/response-utils','devicesController','playersController','register','reportStatus','getStatus','bind','device_uuid','body','network_info','then','updateOrCreate','status','playlist','json','playing_item','find','user_uuid','usersModel','default','models','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils'];(function(_0x61cec5,_0x21c530){var _0x19fac4=function(_0x579cb2){while(--_0x579cb2){_0x61cec5['push'](_0x61cec5['shift']());}};_0x19fac4(++_0x21c530);}(a57_0x10e7,0xdc));var a57_0x1fd7=function(_0x33b72b,_0x494004){_0x33b72b=_0x33b72b-0x0;var _0x2d9e16=a57_0x10e7[_0x33b72b];return _0x2d9e16;};'use strict';var __importDefault=this&&this[a57_0x1fd7('0x0')]||function(_0x3cf088){return _0x3cf088&&_0x3cf088[a57_0x1fd7('0x1')]?_0x3cf088:{'default':_0x3cf088};};Object[a57_0x1fd7('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x1fd7('0x3')));const sequelize_utils_1=__importDefault(require(a57_0x1fd7('0x4')));const responseUtils=require(a57_0x1fd7('0x5'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0xe44c9e,_0x5f129e,_0x2e9868){super(_0xe44c9e,null);this[a57_0x1fd7('0x6')]=_0x5f129e;this[a57_0x1fd7('0x7')]=_0x2e9868;this[a57_0x1fd7('0x8')]=this[a57_0x1fd7('0x8')]['bind'](this);this['reportStatus']=this[a57_0x1fd7('0x9')]['bind'](this);this[a57_0x1fd7('0xa')]=this[a57_0x1fd7('0xa')][a57_0x1fd7('0xb')](this);}[a57_0x1fd7('0x8')](_0x571665,_0x27f596,_0x2ddaf0){return this[a57_0x1fd7('0x6')]['updateOrCreate']({'params':{'uuid':_0x571665['body'][a57_0x1fd7('0xc')]},'body':{'uuid':_0x571665['body']['device_uuid'],'network_info':_0x571665[a57_0x1fd7('0xd')][a57_0x1fd7('0xe')],'firmware_info':_0x571665[a57_0x1fd7('0xd')]['firmware_info']}},null,_0x2ddaf0,!![])[a57_0x1fd7('0xf')](_0x344e2b=>{return this[a57_0x1fd7('0x10')]({'params':{'device_id':_0x344e2b['id'],'player_id':_0x571665[a57_0x1fd7('0xd')]['player_id']},'body':{'device_id':_0x344e2b['id'],'player_id':_0x571665[a57_0x1fd7('0xd')]['player_id'],'status':_0x571665[a57_0x1fd7('0xd')][a57_0x1fd7('0x11')],'playlist':_0x571665[a57_0x1fd7('0xd')][a57_0x1fd7('0x12')],'reported_at':new Date()}},null,_0x2ddaf0)[a57_0x1fd7('0xf')](_0x2d419d=>{delete _0x344e2b['id'];return _0x27f596[a57_0x1fd7('0x13')]({'success':!![],'data':_0x344e2b});});});}[a57_0x1fd7('0x9')](_0x5558ef,_0x304d01,_0x2edba0){return this[a57_0x1fd7('0x6')]['updateOrCreate']({'params':{'uuid':_0x5558ef[a57_0x1fd7('0xd')][a57_0x1fd7('0xc')]},'body':{'uuid':_0x5558ef[a57_0x1fd7('0xd')][a57_0x1fd7('0xc')]}},null,_0x2edba0,!![])[a57_0x1fd7('0xf')](_0x20c5b3=>{return this[a57_0x1fd7('0x10')]({'params':{'device_id':_0x20c5b3['id'],'player_id':_0x5558ef['body']['player_id']},'body':{'device_id':_0x20c5b3['id'],'player_id':_0x5558ef[a57_0x1fd7('0xd')]['player_id'],'playing_item':_0x5558ef['body'][a57_0x1fd7('0x14')],'status':_0x5558ef['body'][a57_0x1fd7('0x11')],'reported_at':new Date()}},null,_0x2edba0)[a57_0x1fd7('0xf')](_0x1f7d31=>{delete _0x20c5b3['id'];return _0x304d01[a57_0x1fd7('0x13')]({'success':!![],'data':_0x1f7d31});});});}[a57_0x1fd7('0xa')](_0x92b1e4,_0x357adf,_0x2c838b){return this[a57_0x1fd7('0x7')][a57_0x1fd7('0x15')]({'params':{'$user.uuid$':_0x92b1e4['params'][a57_0x1fd7('0x16')]}},null,_0x2c838b,!![],[sequelize_utils_1['default']['models'][a57_0x1fd7('0x17')],sequelize_utils_1[a57_0x1fd7('0x18')][a57_0x1fd7('0x19')][a57_0x1fd7('0x1a')]])[a57_0x1fd7('0xf')](_0x3c59a1=>{console[a57_0x1fd7('0x1b')](_0x3c59a1);return _0x357adf[a57_0x1fd7('0x13')]({'success':!![],'data':_0x3c59a1});});}}exports[a57_0x1fd7('0x18')]=PlayerDevicesController;