var a57_0x4453=['reportStatus','updateOrCreate','body','device_uuid','firmware_info','then','player_id','status','playlist','playersController','find','params','user_uuid','usersModel','models','log','json','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','bind'];(function(_0xd63a9f,_0x22b685){var _0x3aecb4=function(_0x53314f){while(--_0x53314f){_0xd63a9f['push'](_0xd63a9f['shift']());}};_0x3aecb4(++_0x22b685);}(a57_0x4453,0x10b));var a57_0x39e1=function(_0x5cd0a5,_0x1d4e0e){_0x5cd0a5=_0x5cd0a5-0x0;var _0x484335=a57_0x4453[_0x5cd0a5];return _0x484335;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1ea7e3){return _0x1ea7e3&&_0x1ea7e3[a57_0x39e1('0x0')]?_0x1ea7e3:{'default':_0x1ea7e3};};Object[a57_0x39e1('0x1')](exports,a57_0x39e1('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x39e1('0x2')));const sequelize_utils_1=__importDefault(require(a57_0x39e1('0x3')));const responseUtils=require(a57_0x39e1('0x4'));class PlayerDevicesController extends controller_utils_1[a57_0x39e1('0x5')]{constructor(_0x1ceb9d,_0x29413e,_0x203e11){super(_0x1ceb9d,null);this[a57_0x39e1('0x6')]=_0x29413e;this['playersController']=_0x203e11;this['register']=this['register'][a57_0x39e1('0x7')](this);this[a57_0x39e1('0x8')]=this[a57_0x39e1('0x8')][a57_0x39e1('0x7')](this);this['getStatus']=this['getStatus'][a57_0x39e1('0x7')](this);}['register'](_0x34e2b9,_0x1bac78,_0x211f37){return this[a57_0x39e1('0x6')][a57_0x39e1('0x9')]({'params':{'uuid':_0x34e2b9[a57_0x39e1('0xa')][a57_0x39e1('0xb')]},'body':{'uuid':_0x34e2b9[a57_0x39e1('0xa')]['device_uuid'],'network_info':_0x34e2b9['body']['network_info'],'firmware_info':_0x34e2b9[a57_0x39e1('0xa')][a57_0x39e1('0xc')]}},null,_0x211f37,!![])[a57_0x39e1('0xd')](_0x34ceba=>{return this['updateOrCreate']({'params':{'device_id':_0x34ceba['id'],'player_id':_0x34e2b9[a57_0x39e1('0xa')][a57_0x39e1('0xe')]},'body':{'device_id':_0x34ceba['id'],'player_id':_0x34e2b9[a57_0x39e1('0xa')]['player_id'],'status':_0x34e2b9[a57_0x39e1('0xa')][a57_0x39e1('0xf')],'playlist':_0x34e2b9[a57_0x39e1('0xa')][a57_0x39e1('0x10')],'reported_at':new Date()}},null,_0x211f37)[a57_0x39e1('0xd')](_0x150079=>{delete _0x34ceba['id'];return _0x1bac78['json']({'success':!![],'data':_0x34ceba});});});}[a57_0x39e1('0x8')](_0x31b6a1,_0x40e189,_0x1b2fd7){return this[a57_0x39e1('0x6')][a57_0x39e1('0x9')]({'params':{'uuid':_0x31b6a1['body'][a57_0x39e1('0xb')]},'body':{'uuid':_0x31b6a1[a57_0x39e1('0xa')]['device_uuid']}},null,_0x1b2fd7,!![])[a57_0x39e1('0xd')](_0x557a76=>{return this[a57_0x39e1('0x9')]({'params':{'device_id':_0x557a76['id'],'player_id':_0x31b6a1[a57_0x39e1('0xa')][a57_0x39e1('0xe')]},'body':{'device_id':_0x557a76['id'],'player_id':_0x31b6a1[a57_0x39e1('0xa')][a57_0x39e1('0xe')],'playing_item':_0x31b6a1['body']['playing_item'],'status':_0x31b6a1['body'][a57_0x39e1('0xf')],'reported_at':new Date()}},null,_0x1b2fd7)[a57_0x39e1('0xd')](_0x57c5ec=>{delete _0x557a76['id'];return _0x40e189['json']({'success':!![],'data':_0x57c5ec});});});}['getStatus'](_0x2c073e,_0x413a9c,_0x39c52c){return this[a57_0x39e1('0x11')][a57_0x39e1('0x12')]({'params':{'$user.uuid$':_0x2c073e[a57_0x39e1('0x13')][a57_0x39e1('0x14')]}},null,_0x39c52c,!![],[sequelize_utils_1['default']['models'][a57_0x39e1('0x15')],sequelize_utils_1[a57_0x39e1('0x5')][a57_0x39e1('0x16')]['playerDevicesModel']])[a57_0x39e1('0xd')](_0x1a8cde=>{console[a57_0x39e1('0x17')](_0x1a8cde);return _0x413a9c[a57_0x39e1('0x18')]({'success':!![],'data':_0x1a8cde});});}}exports[a57_0x39e1('0x5')]=PlayerDevicesController;