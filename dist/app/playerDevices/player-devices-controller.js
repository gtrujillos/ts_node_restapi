var a57_0x21f6=['../../infrastructure/controller-utils','devicesController','playersController','register','bind','reportStatus','getStatus','body','device_uuid','network_info','firmware_info','then','updateOrCreate','player_id','playing_item','find','params','user_uuid','default','models','usersModel','playerDevicesModel','__importDefault','__esModule','defineProperty'];(function(_0xf11270,_0x5c7c18){var _0x1778d8=function(_0x469935){while(--_0x469935){_0xf11270['push'](_0xf11270['shift']());}};_0x1778d8(++_0x5c7c18);}(a57_0x21f6,0x142));var a57_0x1152=function(_0x34b2fc,_0x173893){_0x34b2fc=_0x34b2fc-0x0;var _0x159728=a57_0x21f6[_0x34b2fc];return _0x159728;};'use strict';var __importDefault=this&&this[a57_0x1152('0x0')]||function(_0xdc75c5){return _0xdc75c5&&_0xdc75c5[a57_0x1152('0x1')]?_0xdc75c5:{'default':_0xdc75c5};};Object[a57_0x1152('0x2')](exports,a57_0x1152('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x1152('0x3')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x1571c3,_0x5bd9e7,_0x155f63){super(_0x1571c3,null);this[a57_0x1152('0x4')]=_0x5bd9e7;this[a57_0x1152('0x5')]=_0x155f63;this['register']=this[a57_0x1152('0x6')][a57_0x1152('0x7')](this);this[a57_0x1152('0x8')]=this[a57_0x1152('0x8')][a57_0x1152('0x7')](this);this[a57_0x1152('0x9')]=this[a57_0x1152('0x9')][a57_0x1152('0x7')](this);}[a57_0x1152('0x6')](_0x3a9df1,_0x16209b,_0x55f2a1){return this[a57_0x1152('0x4')]['updateOrCreate']({'params':{'uuid':_0x3a9df1[a57_0x1152('0xa')]['device_uuid']},'body':{'uuid':_0x3a9df1[a57_0x1152('0xa')][a57_0x1152('0xb')],'network_info':_0x3a9df1[a57_0x1152('0xa')][a57_0x1152('0xc')],'firmware_info':_0x3a9df1[a57_0x1152('0xa')][a57_0x1152('0xd')]}},null,_0x55f2a1,!![])[a57_0x1152('0xe')](_0x10924c=>{return this[a57_0x1152('0xf')]({'params':{'device_id':_0x10924c['id'],'player_id':_0x3a9df1[a57_0x1152('0xa')]['player_id']},'body':{'device_id':_0x10924c['id'],'player_id':_0x3a9df1[a57_0x1152('0xa')][a57_0x1152('0x10')],'status':_0x3a9df1[a57_0x1152('0xa')]['status'],'playlist':_0x3a9df1[a57_0x1152('0xa')]['playlist'],'reported_at':new Date()}},null,_0x55f2a1)[a57_0x1152('0xe')](_0x36a679=>{delete _0x10924c['id'];return _0x16209b['json']({'success':!![],'data':_0x10924c});});});}[a57_0x1152('0x8')](_0x74240e,_0x16666b,_0x4a29bb){return this[a57_0x1152('0x4')]['updateOrCreate']({'params':{'uuid':_0x74240e[a57_0x1152('0xa')][a57_0x1152('0xb')]},'body':{'uuid':_0x74240e[a57_0x1152('0xa')][a57_0x1152('0xb')]}},null,_0x4a29bb,!![])['then'](_0x41f61c=>{return this[a57_0x1152('0xf')]({'params':{'device_id':_0x41f61c['id'],'player_id':_0x74240e['body'][a57_0x1152('0x10')]},'body':{'device_id':_0x41f61c['id'],'player_id':_0x74240e['body'][a57_0x1152('0x10')],'playing_item':_0x74240e['body'][a57_0x1152('0x11')],'status':_0x74240e[a57_0x1152('0xa')]['status'],'reported_at':new Date()}},null,_0x4a29bb)[a57_0x1152('0xe')](_0x2e84cd=>{delete _0x41f61c['id'];return _0x16666b['json']({'success':!![],'data':_0x2e84cd});});});}[a57_0x1152('0x9')](_0x482969,_0x359dee,_0x5b8f3d){return this[a57_0x1152('0x5')][a57_0x1152('0x12')]({'params':{'$user.uuid$':_0x482969[a57_0x1152('0x13')][a57_0x1152('0x14')]}},null,_0x5b8f3d,!![],[sequelize_utils_1[a57_0x1152('0x15')][a57_0x1152('0x16')][a57_0x1152('0x17')],sequelize_utils_1[a57_0x1152('0x15')][a57_0x1152('0x16')][a57_0x1152('0x18')]])[a57_0x1152('0xe')](_0x274765=>{console['log'](_0x274765);return _0x359dee['json']({'success':!![],'data':_0x274765});});}}exports[a57_0x1152('0x15')]=PlayerDevicesController;