var a88_0x1b35=['bind','reportStatus','getStatus','body','device_uuid','network_info','updateOrCreate','player_id','status','uuid','then','playing_item','json','find','user_uuid','log','__importDefault','__esModule','../../infrastructure/response-utils','default','devicesController','playersController','register'];(function(_0x438aa6,_0x4d29cb){var _0xbc7267=function(_0x1e4bea){while(--_0x1e4bea){_0x438aa6['push'](_0x438aa6['shift']());}};_0xbc7267(++_0x4d29cb);}(a88_0x1b35,0x9a));var a88_0x2e1c=function(_0x29d6b0,_0x83b34f){_0x29d6b0=_0x29d6b0-0x0;var _0x17f547=a88_0x1b35[_0x29d6b0];return _0x17f547;};'use strict';var __importDefault=this&&this[a88_0x2e1c('0x0')]||function(_0xb1f417){return _0xb1f417&&_0xb1f417['__esModule']?_0xb1f417:{'default':_0xb1f417};};Object['defineProperty'](exports,a88_0x2e1c('0x1'),{'value':!![]});const base_controller_1=__importDefault(require('../../infrastructure/base-controller'));const responseUtils=require(a88_0x2e1c('0x2'));class PlayerDevicesController extends base_controller_1[a88_0x2e1c('0x3')]{constructor(_0x3f7b26,_0x2d0c95,_0x3a331d){super(_0x3f7b26,null);this[a88_0x2e1c('0x4')]=_0x2d0c95;this[a88_0x2e1c('0x5')]=_0x3a331d;this[a88_0x2e1c('0x6')]=this[a88_0x2e1c('0x6')][a88_0x2e1c('0x7')](this);this[a88_0x2e1c('0x8')]=this[a88_0x2e1c('0x8')][a88_0x2e1c('0x7')](this);this[a88_0x2e1c('0x9')]=this[a88_0x2e1c('0x9')][a88_0x2e1c('0x7')](this);}[a88_0x2e1c('0x6')](_0x1a54df,_0x2f54b0,_0x6b5983){return this[a88_0x2e1c('0x4')]['updateOrCreate']({'params':{'uuid':_0x1a54df[a88_0x2e1c('0xa')][a88_0x2e1c('0xb')]},'body':{'uuid':_0x1a54df[a88_0x2e1c('0xa')][a88_0x2e1c('0xb')],'network_info':_0x1a54df[a88_0x2e1c('0xa')][a88_0x2e1c('0xc')],'firmware_info':_0x1a54df['body']['firmware_info']}},null,_0x6b5983,!![],!![])['then'](_0x326218=>{return this[a88_0x2e1c('0xd')]({'params':{'device_id':_0x326218['id'],'player_id':_0x1a54df[a88_0x2e1c('0xa')]['player_id']},'body':{'device_id':_0x326218['id'],'player_id':_0x1a54df[a88_0x2e1c('0xa')][a88_0x2e1c('0xe')],'status':_0x1a54df['body'][a88_0x2e1c('0xf')],'playlist':_0x1a54df[a88_0x2e1c('0xa')]['playlist'],'reported_at':new Date()}},null,_0x6b5983,![],!![])['then'](_0x4bd593=>{const _0x2c6e0f={'uuid':_0x4bd593[a88_0x2e1c('0x10')]};return _0x2f54b0['json']({'success':!![],'data':_0x2c6e0f});});});}[a88_0x2e1c('0x8')](_0x1179ee,_0x29187b,_0xe85232){return this[a88_0x2e1c('0x4')][a88_0x2e1c('0xd')]({'params':{'uuid':_0x1179ee[a88_0x2e1c('0xa')][a88_0x2e1c('0xb')]},'body':{'uuid':_0x1179ee[a88_0x2e1c('0xa')]['device_uuid']}},null,_0xe85232,!![],!![])[a88_0x2e1c('0x11')](_0x3ad575=>{return this[a88_0x2e1c('0xd')]({'params':{'device_id':_0x3ad575['id'],'player_id':_0x1179ee[a88_0x2e1c('0xa')][a88_0x2e1c('0xe')]},'body':{'device_id':_0x3ad575['id'],'player_id':_0x1179ee[a88_0x2e1c('0xa')][a88_0x2e1c('0xe')],'playing_item':_0x1179ee['body'][a88_0x2e1c('0x12')],'status':_0x1179ee[a88_0x2e1c('0xa')]['status'],'reported_at':new Date()}},null,_0xe85232,![],!![])[a88_0x2e1c('0x11')](_0x2ef0e5=>{const _0x34ba48={'uuid':_0x2ef0e5[a88_0x2e1c('0x10')]};return _0x29187b[a88_0x2e1c('0x13')]({'success':!![],'data':_0x34ba48});});});}['getStatus'](_0x224834,_0x5281a2,_0x1b37e4){return this['playersController'][a88_0x2e1c('0x14')]({'params':{'$user.uuid$':_0x224834['params'][a88_0x2e1c('0x15')]}},null,_0x1b37e4)[a88_0x2e1c('0x11')](_0x5fab24=>{console[a88_0x2e1c('0x16')](_0x5fab24);return _0x5281a2[a88_0x2e1c('0x13')]({'success':!![],'data':_0x5fab24});});}}exports['default']=PlayerDevicesController;