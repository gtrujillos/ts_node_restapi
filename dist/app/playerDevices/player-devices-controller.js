var a118_0x491e=['defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','playersController','register','bind','reportStatus','getStatus','devicesController','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','uuid','json','find','params','models','usersModel','playerDevicesModel','__importDefault','__esModule'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a118_0x491e,0xbb));var a118_0x3db3=function(_0x4028ac,_0x54b8a0){_0x4028ac=_0x4028ac-0x0;var _0x23cd04=a118_0x491e[_0x4028ac];return _0x23cd04;};'use strict';var __importDefault=this&&this[a118_0x3db3('0x0')]||function(_0x4e6383){return _0x4e6383&&_0x4e6383[a118_0x3db3('0x1')]?_0x4e6383:{'default':_0x4e6383};};Object[a118_0x3db3('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a118_0x3db3('0x3')));const responseUtils=require(a118_0x3db3('0x4'));class PlayerDevicesController extends controller_utils_1[a118_0x3db3('0x5')]{constructor(_0x19ad8b,_0x92315e,_0x40b46c){super(_0x19ad8b,null);this['devicesController']=_0x92315e;this[a118_0x3db3('0x6')]=_0x40b46c;this[a118_0x3db3('0x7')]=this[a118_0x3db3('0x7')][a118_0x3db3('0x8')](this);this['reportStatus']=this[a118_0x3db3('0x9')][a118_0x3db3('0x8')](this);this[a118_0x3db3('0xa')]=this['getStatus']['bind'](this);}['register'](_0xabde27,_0x508d9c,_0x2abf9c){return this[a118_0x3db3('0xb')][a118_0x3db3('0xc')]({'params':{'uuid':_0xabde27[a118_0x3db3('0xd')][a118_0x3db3('0xe')]},'body':{'uuid':_0xabde27['body'][a118_0x3db3('0xe')],'network_info':_0xabde27[a118_0x3db3('0xd')][a118_0x3db3('0xf')],'firmware_info':_0xabde27[a118_0x3db3('0xd')][a118_0x3db3('0x10')]}},null,_0x2abf9c,!![],!![])[a118_0x3db3('0x11')](_0x2f2db4=>{return this[a118_0x3db3('0xc')]({'params':{'device_id':_0x2f2db4['id'],'player_id':_0xabde27[a118_0x3db3('0xd')]['player_id']},'body':{'device_id':_0x2f2db4['id'],'player_id':_0xabde27[a118_0x3db3('0xd')][a118_0x3db3('0x12')],'status':_0xabde27['body'][a118_0x3db3('0x13')],'playlist':_0xabde27['body']['playlist'],'reported_at':new Date()}},null,_0x2abf9c,![],!![])['then'](_0x366a8e=>{const _0x193127={'uuid':_0x366a8e[a118_0x3db3('0x14')]};return _0x508d9c[a118_0x3db3('0x15')]({'success':!![],'data':_0x193127});});});}['reportStatus'](_0xd364db,_0x32fe54,_0xed94c2){return this[a118_0x3db3('0xb')][a118_0x3db3('0xc')]({'params':{'uuid':_0xd364db[a118_0x3db3('0xd')]['device_uuid']},'body':{'uuid':_0xd364db[a118_0x3db3('0xd')][a118_0x3db3('0xe')]}},null,_0xed94c2,!![],!![])[a118_0x3db3('0x11')](_0x19ad0c=>{return this[a118_0x3db3('0xc')]({'params':{'device_id':_0x19ad0c['id'],'player_id':_0xd364db[a118_0x3db3('0xd')][a118_0x3db3('0x12')]},'body':{'device_id':_0x19ad0c['id'],'player_id':_0xd364db['body'][a118_0x3db3('0x12')],'playing_item':_0xd364db[a118_0x3db3('0xd')]['playing_item'],'status':_0xd364db[a118_0x3db3('0xd')][a118_0x3db3('0x13')],'reported_at':new Date()}},null,_0xed94c2,![],!![])['then'](_0x22177a=>{const _0x35d29b={'uuid':_0x22177a['uuid']};return _0x32fe54['json']({'success':!![],'data':_0x35d29b});});});}[a118_0x3db3('0xa')](_0xad1088,_0x183138,_0x1f2ace){return this['playersController'][a118_0x3db3('0x16')]({'params':{'$user.uuid$':_0xad1088[a118_0x3db3('0x17')]['user_uuid']}},null,_0x1f2ace,!![],[sequelize_utils_1[a118_0x3db3('0x5')][a118_0x3db3('0x18')][a118_0x3db3('0x19')],sequelize_utils_1[a118_0x3db3('0x5')][a118_0x3db3('0x18')][a118_0x3db3('0x1a')]])[a118_0x3db3('0x11')](_0xa8fedf=>{console['log'](_0xa8fedf);return _0x183138[a118_0x3db3('0x15')]({'success':!![],'data':_0xa8fedf});});}}exports[a118_0x3db3('0x5')]=PlayerDevicesController;