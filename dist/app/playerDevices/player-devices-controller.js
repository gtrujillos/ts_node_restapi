var a118_0x29d7=['usersModel','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','device_uuid','body','firmware_info','status','playlist','then','json','player_id','find','params','models'];(function(_0x1aea3a,_0x4437c7){var _0xb3b3ea=function(_0x23faff){while(--_0x23faff){_0x1aea3a['push'](_0x1aea3a['shift']());}};_0xb3b3ea(++_0x4437c7);}(a118_0x29d7,0xb9));var a118_0x438e=function(_0x3dd311,_0x4c3e9a){_0x3dd311=_0x3dd311-0x0;var _0x4db2af=a118_0x29d7[_0x3dd311];return _0x4db2af;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0xe0afc5){return _0xe0afc5&&_0xe0afc5[a118_0x438e('0x0')]?_0xe0afc5:{'default':_0xe0afc5};};Object[a118_0x438e('0x1')](exports,a118_0x438e('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x438e('0x2')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a118_0x438e('0x3'));class PlayerDevicesController extends controller_utils_1[a118_0x438e('0x4')]{constructor(_0x14a5fc,_0x30cfed,_0x390a70){super(_0x14a5fc,null);this[a118_0x438e('0x5')]=_0x30cfed;this[a118_0x438e('0x6')]=_0x390a70;this[a118_0x438e('0x7')]=this['register'][a118_0x438e('0x8')](this);this[a118_0x438e('0x9')]=this[a118_0x438e('0x9')]['bind'](this);this[a118_0x438e('0xa')]=this['getStatus'][a118_0x438e('0x8')](this);}[a118_0x438e('0x7')](_0x2f492f,_0xb9893,_0x2df2fe){return this[a118_0x438e('0x5')][a118_0x438e('0xb')]({'params':{'uuid':_0x2f492f['body'][a118_0x438e('0xc')]},'body':{'uuid':_0x2f492f[a118_0x438e('0xd')]['device_uuid'],'network_info':_0x2f492f[a118_0x438e('0xd')]['network_info'],'firmware_info':_0x2f492f[a118_0x438e('0xd')][a118_0x438e('0xe')]}},null,_0x2df2fe,!![])['then'](_0x5f2fa5=>{return this[a118_0x438e('0xb')]({'params':{'device_id':_0x5f2fa5['id'],'player_id':_0x2f492f[a118_0x438e('0xd')]['player_id']},'body':{'device_id':_0x5f2fa5['id'],'player_id':_0x2f492f[a118_0x438e('0xd')]['player_id'],'status':_0x2f492f['body'][a118_0x438e('0xf')],'playlist':_0x2f492f['body'][a118_0x438e('0x10')],'reported_at':new Date()}},null,_0x2df2fe)[a118_0x438e('0x11')](_0x1ee495=>{delete _0x5f2fa5['id'];return _0xb9893[a118_0x438e('0x12')]({'success':!![],'data':_0x5f2fa5});});});}[a118_0x438e('0x9')](_0x500282,_0x320345,_0x5ee8ab){return this['devicesController'][a118_0x438e('0xb')]({'params':{'uuid':_0x500282['body'][a118_0x438e('0xc')]},'body':{'uuid':_0x500282[a118_0x438e('0xd')][a118_0x438e('0xc')]}},null,_0x5ee8ab,!![])[a118_0x438e('0x11')](_0x1598b5=>{return this[a118_0x438e('0xb')]({'params':{'device_id':_0x1598b5['id'],'player_id':_0x500282[a118_0x438e('0xd')][a118_0x438e('0x13')]},'body':{'device_id':_0x1598b5['id'],'player_id':_0x500282[a118_0x438e('0xd')][a118_0x438e('0x13')],'playing_item':_0x500282[a118_0x438e('0xd')]['playing_item'],'status':_0x500282[a118_0x438e('0xd')][a118_0x438e('0xf')],'reported_at':new Date()}},null,_0x5ee8ab)[a118_0x438e('0x11')](_0x499fad=>{delete _0x1598b5['id'];return _0x320345['json']({'success':!![],'data':_0x499fad});});});}['getStatus'](_0xafe817,_0x336aac,_0x1e0fd0){return this['playersController'][a118_0x438e('0x14')]({'params':{'$user.uuid$':_0xafe817[a118_0x438e('0x15')]['user_uuid']}},null,_0x1e0fd0,!![],[sequelize_utils_1[a118_0x438e('0x4')][a118_0x438e('0x16')][a118_0x438e('0x17')],sequelize_utils_1[a118_0x438e('0x4')][a118_0x438e('0x16')][a118_0x438e('0x18')]])[a118_0x438e('0x11')](_0x1e0c16=>{console[a118_0x438e('0x19')](_0x1e0c16);return _0x336aac['json']({'success':!![],'data':_0x1e0c16});});}}exports['default']=PlayerDevicesController;