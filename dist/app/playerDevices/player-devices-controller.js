var a57_0x1137=['reportStatus','getStatus','bind','device_uuid','body','network_info','firmware_info','then','updateOrCreate','player_id','status','json','find','params','models','usersModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register'];(function(_0x5016e4,_0x20087b){var _0x57bd0c=function(_0x1bc5b8){while(--_0x1bc5b8){_0x5016e4['push'](_0x5016e4['shift']());}};_0x57bd0c(++_0x20087b);}(a57_0x1137,0x12f));var a57_0xc79a=function(_0x27b468,_0x14ccef){_0x27b468=_0x27b468-0x0;var _0x50e657=a57_0x1137[_0x27b468];return _0x50e657;};'use strict';var __importDefault=this&&this[a57_0xc79a('0x0')]||function(_0x467fc9){return _0x467fc9&&_0x467fc9[a57_0xc79a('0x1')]?_0x467fc9:{'default':_0x467fc9};};Object[a57_0xc79a('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a57_0xc79a('0x3')));const responseUtils=require(a57_0xc79a('0x4'));class PlayerDevicesController extends controller_utils_1[a57_0xc79a('0x5')]{constructor(_0x437780,_0x5af6a7,_0xb5044b){super(_0x437780,null);this[a57_0xc79a('0x6')]=_0x5af6a7;this[a57_0xc79a('0x7')]=_0xb5044b;this['register']=this[a57_0xc79a('0x8')]['bind'](this);this[a57_0xc79a('0x9')]=this[a57_0xc79a('0x9')]['bind'](this);this['getStatus']=this[a57_0xc79a('0xa')][a57_0xc79a('0xb')](this);}[a57_0xc79a('0x8')](_0x3ed188,_0x283e0f,_0x562d9a){return this[a57_0xc79a('0x6')]['updateOrCreate']({'params':{'uuid':_0x3ed188['body']['device_uuid']},'body':{'uuid':_0x3ed188['body'][a57_0xc79a('0xc')],'network_info':_0x3ed188[a57_0xc79a('0xd')][a57_0xc79a('0xe')],'firmware_info':_0x3ed188[a57_0xc79a('0xd')][a57_0xc79a('0xf')]}},null,_0x562d9a,!![])[a57_0xc79a('0x10')](_0x572c13=>{return this[a57_0xc79a('0x11')]({'params':{'device_id':_0x572c13['id'],'player_id':_0x3ed188[a57_0xc79a('0xd')]['player_id']},'body':{'device_id':_0x572c13['id'],'player_id':_0x3ed188[a57_0xc79a('0xd')][a57_0xc79a('0x12')],'status':_0x3ed188[a57_0xc79a('0xd')][a57_0xc79a('0x13')],'playlist':_0x3ed188[a57_0xc79a('0xd')]['playlist'],'reported_at':new Date()}},null,_0x562d9a)[a57_0xc79a('0x10')](_0x58260a=>{delete _0x572c13['id'];return _0x283e0f[a57_0xc79a('0x14')]({'success':!![],'data':_0x572c13});});});}['reportStatus'](_0x18a369,_0x3de3a3,_0x653f99){return this[a57_0xc79a('0x6')][a57_0xc79a('0x11')]({'params':{'uuid':_0x18a369[a57_0xc79a('0xd')][a57_0xc79a('0xc')]},'body':{'uuid':_0x18a369[a57_0xc79a('0xd')][a57_0xc79a('0xc')]}},null,_0x653f99,!![])[a57_0xc79a('0x10')](_0x1140d3=>{return this[a57_0xc79a('0x11')]({'params':{'device_id':_0x1140d3['id'],'player_id':_0x18a369[a57_0xc79a('0xd')][a57_0xc79a('0x12')]},'body':{'device_id':_0x1140d3['id'],'player_id':_0x18a369[a57_0xc79a('0xd')][a57_0xc79a('0x12')],'playing_item':_0x18a369[a57_0xc79a('0xd')]['playing_item'],'status':_0x18a369[a57_0xc79a('0xd')][a57_0xc79a('0x13')],'reported_at':new Date()}},null,_0x653f99)[a57_0xc79a('0x10')](_0x21d1df=>{delete _0x1140d3['id'];return _0x3de3a3['json']({'success':!![],'data':_0x21d1df});});});}[a57_0xc79a('0xa')](_0xb4c920,_0x308db0,_0x29cd68){return this[a57_0xc79a('0x7')][a57_0xc79a('0x15')]({'params':{'$user.uuid$':_0xb4c920[a57_0xc79a('0x16')]['user_uuid']}},null,_0x29cd68,!![],[sequelize_utils_1['default'][a57_0xc79a('0x17')][a57_0xc79a('0x18')],sequelize_utils_1['default'][a57_0xc79a('0x17')]['playerDevicesModel']])['then'](_0x586ace=>{console[a57_0xc79a('0x19')](_0x586ace);return _0x308db0['json']({'success':!![],'data':_0x586ace});});}}exports[a57_0xc79a('0x5')]=PlayerDevicesController;