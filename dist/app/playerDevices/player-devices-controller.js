var a57_0x1e8d=['player_id','json','playing_item','find','params','usersModel','playerDevicesModel','log','__importDefault','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then'];(function(_0x430e67,_0x3fce7d){var _0x3ed58d=function(_0x20ec0c){while(--_0x20ec0c){_0x430e67['push'](_0x430e67['shift']());}};_0x3ed58d(++_0x3fce7d);}(a57_0x1e8d,0x102));var a57_0x5f07=function(_0xd4bc50,_0x202be4){_0xd4bc50=_0xd4bc50-0x0;var _0x30a16b=a57_0x1e8d[_0xd4bc50];return _0x30a16b;};'use strict';var __importDefault=this&&this[a57_0x5f07('0x0')]||function(_0x36e2b8){return _0x36e2b8&&_0x36e2b8['__esModule']?_0x36e2b8:{'default':_0x36e2b8};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x5f07('0x1')));const sequelize_utils_1=__importDefault(require(a57_0x5f07('0x2')));const responseUtils=require(a57_0x5f07('0x3'));class PlayerDevicesController extends controller_utils_1[a57_0x5f07('0x4')]{constructor(_0x2a10f3,_0xf70fcb,_0x1d3d69){super(_0x2a10f3,null);this[a57_0x5f07('0x5')]=_0xf70fcb;this[a57_0x5f07('0x6')]=_0x1d3d69;this[a57_0x5f07('0x7')]=this[a57_0x5f07('0x7')][a57_0x5f07('0x8')](this);this[a57_0x5f07('0x9')]=this[a57_0x5f07('0x9')][a57_0x5f07('0x8')](this);this[a57_0x5f07('0xa')]=this['getStatus']['bind'](this);}['register'](_0x5a6372,_0x4368ce,_0x592321){return this['devicesController'][a57_0x5f07('0xb')]({'params':{'uuid':_0x5a6372[a57_0x5f07('0xc')][a57_0x5f07('0xd')]},'body':{'uuid':_0x5a6372['body'][a57_0x5f07('0xd')],'network_info':_0x5a6372[a57_0x5f07('0xc')][a57_0x5f07('0xe')],'firmware_info':_0x5a6372[a57_0x5f07('0xc')][a57_0x5f07('0xf')]}},null,_0x592321,!![])[a57_0x5f07('0x10')](_0x2ef136=>{return this['updateOrCreate']({'params':{'device_id':_0x2ef136['id'],'player_id':_0x5a6372[a57_0x5f07('0xc')][a57_0x5f07('0x11')]},'body':{'device_id':_0x2ef136['id'],'player_id':_0x5a6372['body']['player_id'],'status':_0x5a6372['body']['status'],'playlist':_0x5a6372['body']['playlist'],'reported_at':new Date()}},null,_0x592321)[a57_0x5f07('0x10')](_0x23ee7b=>{delete _0x2ef136['id'];return _0x4368ce[a57_0x5f07('0x12')]({'success':!![],'data':_0x2ef136});});});}[a57_0x5f07('0x9')](_0x552885,_0x285968,_0x16d046){return this[a57_0x5f07('0x5')]['updateOrCreate']({'params':{'uuid':_0x552885[a57_0x5f07('0xc')][a57_0x5f07('0xd')]},'body':{'uuid':_0x552885['body']['device_uuid']}},null,_0x16d046,!![])[a57_0x5f07('0x10')](_0x4c1697=>{return this[a57_0x5f07('0xb')]({'params':{'device_id':_0x4c1697['id'],'player_id':_0x552885[a57_0x5f07('0xc')]['player_id']},'body':{'device_id':_0x4c1697['id'],'player_id':_0x552885['body'][a57_0x5f07('0x11')],'playing_item':_0x552885['body'][a57_0x5f07('0x13')],'status':_0x552885[a57_0x5f07('0xc')]['status'],'reported_at':new Date()}},null,_0x16d046)['then'](_0x130338=>{delete _0x4c1697['id'];return _0x285968[a57_0x5f07('0x12')]({'success':!![],'data':_0x130338});});});}[a57_0x5f07('0xa')](_0x2ce9e4,_0x38cb9b,_0x1bb9aa){return this[a57_0x5f07('0x6')][a57_0x5f07('0x14')]({'params':{'$user.uuid$':_0x2ce9e4[a57_0x5f07('0x15')]['user_uuid']}},null,_0x1bb9aa,!![],[sequelize_utils_1[a57_0x5f07('0x4')]['models'][a57_0x5f07('0x16')],sequelize_utils_1[a57_0x5f07('0x4')]['models'][a57_0x5f07('0x17')]])[a57_0x5f07('0x10')](_0x35217c=>{console[a57_0x5f07('0x18')](_0x35217c);return _0x38cb9b[a57_0x5f07('0x12')]({'success':!![],'data':_0x35217c});});}}exports[a57_0x5f07('0x4')]=PlayerDevicesController;