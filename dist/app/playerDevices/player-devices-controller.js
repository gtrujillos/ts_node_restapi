var a57_0x3db8=['player_id','status','playlist','json','device_uuid','find','params','models','log','__importDefault','defineProperty','__esModule','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','playersController','register','bind','reportStatus','getStatus','devicesController','updateOrCreate','body','network_info','then'];(function(_0x43b075,_0x4441d8){var _0x159513=function(_0x424ee4){while(--_0x424ee4){_0x43b075['push'](_0x43b075['shift']());}};_0x159513(++_0x4441d8);}(a57_0x3db8,0x1e4));var a57_0x3348=function(_0x510871,_0x2a9b3b){_0x510871=_0x510871-0x0;var _0x3cc382=a57_0x3db8[_0x510871];return _0x3cc382;};'use strict';var __importDefault=this&&this[a57_0x3348('0x0')]||function(_0x2a57b8){return _0x2a57b8&&_0x2a57b8['__esModule']?_0x2a57b8:{'default':_0x2a57b8};};Object[a57_0x3348('0x1')](exports,a57_0x3348('0x2'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a57_0x3348('0x3')));const responseUtils=require(a57_0x3348('0x4'));class PlayerDevicesController extends controller_utils_1[a57_0x3348('0x5')]{constructor(_0x5cc68e,_0xb7c74d,_0x2ae459){super(_0x5cc68e,null);this['devicesController']=_0xb7c74d;this[a57_0x3348('0x6')]=_0x2ae459;this[a57_0x3348('0x7')]=this[a57_0x3348('0x7')][a57_0x3348('0x8')](this);this[a57_0x3348('0x9')]=this[a57_0x3348('0x9')][a57_0x3348('0x8')](this);this[a57_0x3348('0xa')]=this[a57_0x3348('0xa')]['bind'](this);}[a57_0x3348('0x7')](_0x4d7be3,_0x4136d1,_0x1d4fbd){return this[a57_0x3348('0xb')][a57_0x3348('0xc')]({'params':{'uuid':_0x4d7be3[a57_0x3348('0xd')]['device_uuid']},'body':{'uuid':_0x4d7be3['body']['device_uuid'],'network_info':_0x4d7be3[a57_0x3348('0xd')][a57_0x3348('0xe')],'firmware_info':_0x4d7be3[a57_0x3348('0xd')]['firmware_info']}},null,_0x1d4fbd,!![])[a57_0x3348('0xf')](_0x461d59=>{return this[a57_0x3348('0xc')]({'params':{'device_id':_0x461d59['id'],'player_id':_0x4d7be3[a57_0x3348('0xd')]['player_id']},'body':{'device_id':_0x461d59['id'],'player_id':_0x4d7be3[a57_0x3348('0xd')][a57_0x3348('0x10')],'status':_0x4d7be3['body'][a57_0x3348('0x11')],'playlist':_0x4d7be3['body'][a57_0x3348('0x12')],'reported_at':new Date()}},null,_0x1d4fbd)['then'](_0x4a6571=>{delete _0x461d59['id'];return _0x4136d1[a57_0x3348('0x13')]({'success':!![],'data':_0x461d59});});});}[a57_0x3348('0x9')](_0x5665ae,_0x3980a7,_0x1ccdb5){return this['devicesController'][a57_0x3348('0xc')]({'params':{'uuid':_0x5665ae[a57_0x3348('0xd')]['device_uuid']},'body':{'uuid':_0x5665ae[a57_0x3348('0xd')][a57_0x3348('0x14')]}},null,_0x1ccdb5,!![])[a57_0x3348('0xf')](_0x3cc11d=>{return this[a57_0x3348('0xc')]({'params':{'device_id':_0x3cc11d['id'],'player_id':_0x5665ae[a57_0x3348('0xd')]['player_id']},'body':{'device_id':_0x3cc11d['id'],'player_id':_0x5665ae[a57_0x3348('0xd')]['player_id'],'playing_item':_0x5665ae['body']['playing_item'],'status':_0x5665ae['body'][a57_0x3348('0x11')],'reported_at':new Date()}},null,_0x1ccdb5)['then'](_0x9508ee=>{delete _0x3cc11d['id'];return _0x3980a7[a57_0x3348('0x13')]({'success':!![],'data':_0x9508ee});});});}[a57_0x3348('0xa')](_0x8d8897,_0x5e9c42,_0x12d568){return this[a57_0x3348('0x6')][a57_0x3348('0x15')]({'params':{'$user.uuid$':_0x8d8897[a57_0x3348('0x16')]['user_uuid']}},null,_0x12d568,!![],[sequelize_utils_1[a57_0x3348('0x5')][a57_0x3348('0x17')]['usersModel'],sequelize_utils_1['default']['models']['playerDevicesModel']])[a57_0x3348('0xf')](_0x182985=>{console[a57_0x3348('0x18')](_0x182985);return _0x5e9c42[a57_0x3348('0x13')]({'success':!![],'data':_0x182985});});}}exports[a57_0x3348('0x5')]=PlayerDevicesController;