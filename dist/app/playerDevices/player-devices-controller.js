var a63_0x4e1a=['status','playlist','playing_item','json','playersController','find','params','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','register','bind','reportStatus','getStatus','updateOrCreate','device_uuid','body','network_info','firmware_info','then','player_id'];(function(_0x4bd822,_0x2bd6f7){var _0xb4bdb3=function(_0x1d68f6){while(--_0x1d68f6){_0x4bd822['push'](_0x4bd822['shift']());}};_0xb4bdb3(++_0x2bd6f7);}(a63_0x4e1a,0x7f));var a63_0x3338=function(_0x19b85c,_0x47485f){_0x19b85c=_0x19b85c-0x0;var _0x12d7d7=a63_0x4e1a[_0x19b85c];return _0x12d7d7;};'use strict';var __importDefault=this&&this[a63_0x3338('0x0')]||function(_0x5b5e33){return _0x5b5e33&&_0x5b5e33[a63_0x3338('0x1')]?_0x5b5e33:{'default':_0x5b5e33};};Object['defineProperty'](exports,a63_0x3338('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a63_0x3338('0x2')));const sequelize_utils_1=__importDefault(require(a63_0x3338('0x3')));const responseUtils=require(a63_0x3338('0x4'));class PlayerDevicesController extends controller_utils_1[a63_0x3338('0x5')]{constructor(_0x1b5d20,_0x5440c3,_0x138284){super(_0x1b5d20,null);this[a63_0x3338('0x6')]=_0x5440c3;this['playersController']=_0x138284;this[a63_0x3338('0x7')]=this[a63_0x3338('0x7')][a63_0x3338('0x8')](this);this['reportStatus']=this[a63_0x3338('0x9')][a63_0x3338('0x8')](this);this['getStatus']=this[a63_0x3338('0xa')]['bind'](this);}[a63_0x3338('0x7')](_0x54ae20,_0x1bfe77,_0x341aaf){return this[a63_0x3338('0x6')][a63_0x3338('0xb')]({'params':{'uuid':_0x54ae20['body'][a63_0x3338('0xc')]},'body':{'uuid':_0x54ae20[a63_0x3338('0xd')]['device_uuid'],'network_info':_0x54ae20['body'][a63_0x3338('0xe')],'firmware_info':_0x54ae20[a63_0x3338('0xd')][a63_0x3338('0xf')]}},null,_0x341aaf,!![])[a63_0x3338('0x10')](_0x4d5dd1=>{return this['updateOrCreate']({'params':{'device_id':_0x4d5dd1['id'],'player_id':_0x54ae20[a63_0x3338('0xd')][a63_0x3338('0x11')]},'body':{'device_id':_0x4d5dd1['id'],'player_id':_0x54ae20[a63_0x3338('0xd')][a63_0x3338('0x11')],'status':_0x54ae20[a63_0x3338('0xd')][a63_0x3338('0x12')],'playlist':_0x54ae20[a63_0x3338('0xd')][a63_0x3338('0x13')],'reported_at':new Date()}},null,_0x341aaf)[a63_0x3338('0x10')](_0x2a7db2=>{delete _0x4d5dd1['id'];return _0x1bfe77['json']({'success':!![],'data':_0x4d5dd1});});});}[a63_0x3338('0x9')](_0x54c716,_0xb001c0,_0x1011a2){return this[a63_0x3338('0x6')][a63_0x3338('0xb')]({'params':{'uuid':_0x54c716['body'][a63_0x3338('0xc')]},'body':{'uuid':_0x54c716[a63_0x3338('0xd')][a63_0x3338('0xc')]}},null,_0x1011a2,!![])['then'](_0x4ade7f=>{return this[a63_0x3338('0xb')]({'params':{'device_id':_0x4ade7f['id'],'player_id':_0x54c716['body'][a63_0x3338('0x11')]},'body':{'device_id':_0x4ade7f['id'],'player_id':_0x54c716[a63_0x3338('0xd')][a63_0x3338('0x11')],'playing_item':_0x54c716[a63_0x3338('0xd')][a63_0x3338('0x14')],'status':_0x54c716['body'][a63_0x3338('0x12')],'reported_at':new Date()}},null,_0x1011a2)[a63_0x3338('0x10')](_0x3f3180=>{delete _0x4ade7f['id'];return _0xb001c0[a63_0x3338('0x15')]({'success':!![],'data':_0x3f3180});});});}[a63_0x3338('0xa')](_0x11a3a8,_0x2852b9,_0x3a3043){return this[a63_0x3338('0x16')][a63_0x3338('0x17')]({'params':{'$user.uuid$':_0x11a3a8[a63_0x3338('0x18')]['user_uuid']}},null,_0x3a3043,!![],[sequelize_utils_1[a63_0x3338('0x5')][a63_0x3338('0x19')][a63_0x3338('0x1a')],sequelize_utils_1[a63_0x3338('0x5')]['models'][a63_0x3338('0x1b')]])[a63_0x3338('0x10')](_0x3581b0=>{console[a63_0x3338('0x1c')](_0x3581b0);return _0x2852b9[a63_0x3338('0x15')]({'success':!![],'data':_0x3581b0});});}}exports[a63_0x3338('0x5')]=PlayerDevicesController;