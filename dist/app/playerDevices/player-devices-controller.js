var a97_0x1420=['uuid','json','playing_item','params','user_uuid','__importDefault','__esModule','defineProperty','../../infrastructure/base-controller','../../infrastructure/response-utils','playersController','register','bind','reportStatus','getStatus','devicesController','body','device_uuid','firmware_info','then','updateOrCreate','player_id','status','playlist'];(function(_0x3db6ec,_0x894f77){var _0x409ac1=function(_0x4fac3c){while(--_0x4fac3c){_0x3db6ec['push'](_0x3db6ec['shift']());}};_0x409ac1(++_0x894f77);}(a97_0x1420,0x185));var a97_0x5b65=function(_0x413b5a,_0x23b707){_0x413b5a=_0x413b5a-0x0;var _0x5c7aea=a97_0x1420[_0x413b5a];return _0x5c7aea;};'use strict';var __importDefault=this&&this[a97_0x5b65('0x0')]||function(_0x4156c5){return _0x4156c5&&_0x4156c5[a97_0x5b65('0x1')]?_0x4156c5:{'default':_0x4156c5};};Object[a97_0x5b65('0x2')](exports,a97_0x5b65('0x1'),{'value':!![]});const base_controller_1=__importDefault(require(a97_0x5b65('0x3')));const responseUtils=require(a97_0x5b65('0x4'));class PlayerDevicesController extends base_controller_1['default']{constructor(_0x5545b9,_0x261ef4,_0xc2de80){super(_0x5545b9,null);this['devicesController']=_0x261ef4;this[a97_0x5b65('0x5')]=_0xc2de80;this[a97_0x5b65('0x6')]=this[a97_0x5b65('0x6')][a97_0x5b65('0x7')](this);this[a97_0x5b65('0x8')]=this['reportStatus']['bind'](this);this[a97_0x5b65('0x9')]=this['getStatus'][a97_0x5b65('0x7')](this);}[a97_0x5b65('0x6')](_0x54e305,_0x451a5e,_0x3bce89){return this[a97_0x5b65('0xa')]['updateOrCreate']({'params':{'uuid':_0x54e305[a97_0x5b65('0xb')][a97_0x5b65('0xc')]},'body':{'uuid':_0x54e305[a97_0x5b65('0xb')][a97_0x5b65('0xc')],'network_info':_0x54e305[a97_0x5b65('0xb')]['network_info'],'firmware_info':_0x54e305[a97_0x5b65('0xb')][a97_0x5b65('0xd')]}},null,_0x3bce89,!![],!![])[a97_0x5b65('0xe')](_0xcba917=>{return this[a97_0x5b65('0xf')]({'params':{'device_id':_0xcba917['id'],'player_id':_0x54e305[a97_0x5b65('0xb')][a97_0x5b65('0x10')]},'body':{'device_id':_0xcba917['id'],'player_id':_0x54e305[a97_0x5b65('0xb')]['player_id'],'status':_0x54e305[a97_0x5b65('0xb')][a97_0x5b65('0x11')],'playlist':_0x54e305[a97_0x5b65('0xb')][a97_0x5b65('0x12')],'reported_at':new Date()}},null,_0x3bce89,![],!![])['then'](_0x4dc1d0=>{const _0x2cdd0b={'uuid':_0x4dc1d0[a97_0x5b65('0x13')]};return _0x451a5e[a97_0x5b65('0x14')]({'success':!![],'data':_0x2cdd0b});});});}[a97_0x5b65('0x8')](_0x40394d,_0x1c1eac,_0x309324){return this[a97_0x5b65('0xa')]['updateOrCreate']({'params':{'uuid':_0x40394d['body'][a97_0x5b65('0xc')]},'body':{'uuid':_0x40394d[a97_0x5b65('0xb')][a97_0x5b65('0xc')]}},null,_0x309324,!![],!![])[a97_0x5b65('0xe')](_0x34d08=>{return this[a97_0x5b65('0xf')]({'params':{'device_id':_0x34d08['id'],'player_id':_0x40394d[a97_0x5b65('0xb')][a97_0x5b65('0x10')]},'body':{'device_id':_0x34d08['id'],'player_id':_0x40394d['body']['player_id'],'playing_item':_0x40394d['body'][a97_0x5b65('0x15')],'status':_0x40394d[a97_0x5b65('0xb')][a97_0x5b65('0x11')],'reported_at':new Date()}},null,_0x309324,![],!![])[a97_0x5b65('0xe')](_0x2f85ee=>{const _0x2bb79b={'uuid':_0x2f85ee['uuid']};return _0x1c1eac[a97_0x5b65('0x14')]({'success':!![],'data':_0x2bb79b});});});}[a97_0x5b65('0x9')](_0x3f8246,_0x2688a8,_0x1a3ab5){return this[a97_0x5b65('0x5')]['find']({'params':{'$user.uuid$':_0x3f8246[a97_0x5b65('0x16')][a97_0x5b65('0x17')]}},null,_0x1a3ab5)[a97_0x5b65('0xe')](_0x29dc3e=>{console['log'](_0x29dc3e);return _0x2688a8['json']({'success':!![],'data':_0x29dc3e});});}}exports['default']=PlayerDevicesController;