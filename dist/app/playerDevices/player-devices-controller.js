var a118_0xeea8=['then','updateOrCreate','player_id','status','playlist','uuid','json','playing_item','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','playersController','register','bind','reportStatus','getStatus','devicesController','device_uuid','network_info','body'];(function(_0x37c9fe,_0x4e44ca){var _0x2cbde4=function(_0x40e4aa){while(--_0x40e4aa){_0x37c9fe['push'](_0x37c9fe['shift']());}};_0x2cbde4(++_0x4e44ca);}(a118_0xeea8,0x68));var a118_0x59a6=function(_0x3ee1d1,_0x22518a){_0x3ee1d1=_0x3ee1d1-0x0;var _0x5d961c=a118_0xeea8[_0x3ee1d1];return _0x5d961c;};'use strict';var __importDefault=this&&this[a118_0x59a6('0x0')]||function(_0x5a2562){return _0x5a2562&&_0x5a2562[a118_0x59a6('0x1')]?_0x5a2562:{'default':_0x5a2562};};Object[a118_0x59a6('0x2')](exports,a118_0x59a6('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x59a6('0x3')));const sequelize_utils_1=__importDefault(require(a118_0x59a6('0x4')));const responseUtils=require(a118_0x59a6('0x5'));class PlayerDevicesController extends controller_utils_1[a118_0x59a6('0x6')]{constructor(_0x7d21d5,_0x4e932a,_0x4e686c){super(_0x7d21d5,null);this['devicesController']=_0x4e932a;this[a118_0x59a6('0x7')]=_0x4e686c;this[a118_0x59a6('0x8')]=this[a118_0x59a6('0x8')][a118_0x59a6('0x9')](this);this[a118_0x59a6('0xa')]=this[a118_0x59a6('0xa')][a118_0x59a6('0x9')](this);this[a118_0x59a6('0xb')]=this[a118_0x59a6('0xb')]['bind'](this);}[a118_0x59a6('0x8')](_0x334089,_0x2d1324,_0x11564d){return this[a118_0x59a6('0xc')]['updateOrCreate']({'params':{'uuid':_0x334089['body'][a118_0x59a6('0xd')]},'body':{'uuid':_0x334089['body'][a118_0x59a6('0xd')],'network_info':_0x334089['body'][a118_0x59a6('0xe')],'firmware_info':_0x334089[a118_0x59a6('0xf')]['firmware_info']}},null,_0x11564d,!![],!![])[a118_0x59a6('0x10')](_0x4cd4a0=>{return this[a118_0x59a6('0x11')]({'params':{'device_id':_0x4cd4a0['id'],'player_id':_0x334089[a118_0x59a6('0xf')][a118_0x59a6('0x12')]},'body':{'device_id':_0x4cd4a0['id'],'player_id':_0x334089['body'][a118_0x59a6('0x12')],'status':_0x334089['body'][a118_0x59a6('0x13')],'playlist':_0x334089['body'][a118_0x59a6('0x14')],'reported_at':new Date()}},null,_0x11564d,![],!![])[a118_0x59a6('0x10')](_0x4ff0a8=>{const _0x43eb57={'uuid':_0x4ff0a8[a118_0x59a6('0x15')]};return _0x2d1324[a118_0x59a6('0x16')]({'success':!![],'data':_0x43eb57});});});}[a118_0x59a6('0xa')](_0x31dd9c,_0x523541,_0x32d97d){return this[a118_0x59a6('0xc')][a118_0x59a6('0x11')]({'params':{'uuid':_0x31dd9c['body'][a118_0x59a6('0xd')]},'body':{'uuid':_0x31dd9c[a118_0x59a6('0xf')]['device_uuid']}},null,_0x32d97d,!![],!![])['then'](_0x25ea75=>{return this[a118_0x59a6('0x11')]({'params':{'device_id':_0x25ea75['id'],'player_id':_0x31dd9c[a118_0x59a6('0xf')]['player_id']},'body':{'device_id':_0x25ea75['id'],'player_id':_0x31dd9c[a118_0x59a6('0xf')][a118_0x59a6('0x12')],'playing_item':_0x31dd9c['body'][a118_0x59a6('0x17')],'status':_0x31dd9c[a118_0x59a6('0xf')][a118_0x59a6('0x13')],'reported_at':new Date()}},null,_0x32d97d,![],!![])[a118_0x59a6('0x10')](_0x552f1a=>{const _0x116cdb={'uuid':_0x552f1a[a118_0x59a6('0x15')]};return _0x523541[a118_0x59a6('0x16')]({'success':!![],'data':_0x116cdb});});});}[a118_0x59a6('0xb')](_0x41c63,_0x344ad5,_0xbec27d){return this[a118_0x59a6('0x7')]['find']({'params':{'$user.uuid$':_0x41c63[a118_0x59a6('0x18')][a118_0x59a6('0x19')]}},null,_0xbec27d,!![],[sequelize_utils_1[a118_0x59a6('0x6')][a118_0x59a6('0x1a')][a118_0x59a6('0x1b')],sequelize_utils_1['default'][a118_0x59a6('0x1a')][a118_0x59a6('0x1c')]])[a118_0x59a6('0x10')](_0x2d8bd8=>{console[a118_0x59a6('0x1d')](_0x2d8bd8);return _0x344ad5[a118_0x59a6('0x16')]({'success':!![],'data':_0x2d8bd8});});}}exports[a118_0x59a6('0x6')]=PlayerDevicesController;