var a118_0x2a3f=['getStatus','body','device_uuid','network_info','then','updateOrCreate','player_id','status','playlist','json','playing_item','find','params','models','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus'];(function(_0x1d2076,_0x2a7e5a){var _0x6ffefc=function(_0x3ddd21){while(--_0x3ddd21){_0x1d2076['push'](_0x1d2076['shift']());}};_0x6ffefc(++_0x2a7e5a);}(a118_0x2a3f,0x1a5));var a118_0x194b=function(_0x32b501,_0x4f32ce){_0x32b501=_0x32b501-0x0;var _0x483c33=a118_0x2a3f[_0x32b501];return _0x483c33;};'use strict';var __importDefault=this&&this[a118_0x194b('0x0')]||function(_0xc098c0){return _0xc098c0&&_0xc098c0[a118_0x194b('0x1')]?_0xc098c0:{'default':_0xc098c0};};Object[a118_0x194b('0x2')](exports,a118_0x194b('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x194b('0x3')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a118_0x194b('0x4'));class PlayerDevicesController extends controller_utils_1[a118_0x194b('0x5')]{constructor(_0x3cd3d8,_0x584c96,_0x2ec8d6){super(_0x3cd3d8,null);this[a118_0x194b('0x6')]=_0x584c96;this[a118_0x194b('0x7')]=_0x2ec8d6;this[a118_0x194b('0x8')]=this[a118_0x194b('0x8')][a118_0x194b('0x9')](this);this[a118_0x194b('0xa')]=this[a118_0x194b('0xa')]['bind'](this);this['getStatus']=this[a118_0x194b('0xb')][a118_0x194b('0x9')](this);}[a118_0x194b('0x8')](_0x36604d,_0x366c94,_0x1e671f){return this[a118_0x194b('0x6')]['updateOrCreate']({'params':{'uuid':_0x36604d[a118_0x194b('0xc')][a118_0x194b('0xd')]},'body':{'uuid':_0x36604d[a118_0x194b('0xc')][a118_0x194b('0xd')],'network_info':_0x36604d[a118_0x194b('0xc')][a118_0x194b('0xe')],'firmware_info':_0x36604d[a118_0x194b('0xc')]['firmware_info']}},null,_0x1e671f,!![])[a118_0x194b('0xf')](_0x41ea96=>{return this[a118_0x194b('0x10')]({'params':{'device_id':_0x41ea96['id'],'player_id':_0x36604d[a118_0x194b('0xc')][a118_0x194b('0x11')]},'body':{'device_id':_0x41ea96['id'],'player_id':_0x36604d[a118_0x194b('0xc')][a118_0x194b('0x11')],'status':_0x36604d[a118_0x194b('0xc')][a118_0x194b('0x12')],'playlist':_0x36604d['body'][a118_0x194b('0x13')],'reported_at':new Date()}},null,_0x1e671f)['then'](_0x3994a9=>{delete _0x41ea96['id'];return _0x366c94[a118_0x194b('0x14')]({'success':!![],'data':_0x41ea96});});});}[a118_0x194b('0xa')](_0x52c5e9,_0x28993c,_0x215904){return this['devicesController'][a118_0x194b('0x10')]({'params':{'uuid':_0x52c5e9['body']['device_uuid']},'body':{'uuid':_0x52c5e9['body'][a118_0x194b('0xd')]}},null,_0x215904,!![])[a118_0x194b('0xf')](_0x1451ac=>{return this[a118_0x194b('0x10')]({'params':{'device_id':_0x1451ac['id'],'player_id':_0x52c5e9[a118_0x194b('0xc')]['player_id']},'body':{'device_id':_0x1451ac['id'],'player_id':_0x52c5e9[a118_0x194b('0xc')][a118_0x194b('0x11')],'playing_item':_0x52c5e9[a118_0x194b('0xc')][a118_0x194b('0x15')],'status':_0x52c5e9['body']['status'],'reported_at':new Date()}},null,_0x215904)[a118_0x194b('0xf')](_0x5aea9e=>{delete _0x1451ac['id'];return _0x28993c[a118_0x194b('0x14')]({'success':!![],'data':_0x5aea9e});});});}[a118_0x194b('0xb')](_0x1d7af1,_0x4e094c,_0x1d82fc){return this['playersController'][a118_0x194b('0x16')]({'params':{'$user.uuid$':_0x1d7af1[a118_0x194b('0x17')]['user_uuid']}},null,_0x1d82fc,!![],[sequelize_utils_1[a118_0x194b('0x5')][a118_0x194b('0x18')]['usersModel'],sequelize_utils_1[a118_0x194b('0x5')]['models'][a118_0x194b('0x19')]])[a118_0x194b('0xf')](_0x56661f=>{console[a118_0x194b('0x1a')](_0x56661f);return _0x4e094c[a118_0x194b('0x14')]({'success':!![],'data':_0x56661f});});}}exports[a118_0x194b('0x5')]=PlayerDevicesController;