var a57_0x314e=['device_uuid','network_info','then','updateOrCreate','player_id','status','playlist','json','playing_item','find','params','user_uuid','models','usersModel','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/response-utils','default','devicesController','register','bind','reportStatus','getStatus','body'];(function(_0x26088f,_0xa10e15){var _0x232a10=function(_0x233a0b){while(--_0x233a0b){_0x26088f['push'](_0x26088f['shift']());}};_0x232a10(++_0xa10e15);}(a57_0x314e,0x1c0));var a57_0xb708=function(_0x328ac7,_0x263424){_0x328ac7=_0x328ac7-0x0;var _0x5858b8=a57_0x314e[_0x328ac7];return _0x5858b8;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3ebae6){return _0x3ebae6&&_0x3ebae6[a57_0xb708('0x0')]?_0x3ebae6:{'default':_0x3ebae6};};Object[a57_0xb708('0x1')](exports,a57_0xb708('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0xb708('0x2')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a57_0xb708('0x3'));class PlayerDevicesController extends controller_utils_1[a57_0xb708('0x4')]{constructor(_0x2c4df0,_0x4548da,_0x1a5aca){super(_0x2c4df0,null);this[a57_0xb708('0x5')]=_0x4548da;this['playersController']=_0x1a5aca;this[a57_0xb708('0x6')]=this['register'][a57_0xb708('0x7')](this);this['reportStatus']=this[a57_0xb708('0x8')]['bind'](this);this[a57_0xb708('0x9')]=this[a57_0xb708('0x9')][a57_0xb708('0x7')](this);}['register'](_0x53ed64,_0x333fa4,_0x372bde){return this[a57_0xb708('0x5')]['updateOrCreate']({'params':{'uuid':_0x53ed64[a57_0xb708('0xa')][a57_0xb708('0xb')]},'body':{'uuid':_0x53ed64[a57_0xb708('0xa')][a57_0xb708('0xb')],'network_info':_0x53ed64[a57_0xb708('0xa')][a57_0xb708('0xc')],'firmware_info':_0x53ed64[a57_0xb708('0xa')]['firmware_info']}},null,_0x372bde,!![])[a57_0xb708('0xd')](_0x1eef0a=>{return this[a57_0xb708('0xe')]({'params':{'device_id':_0x1eef0a['id'],'player_id':_0x53ed64[a57_0xb708('0xa')][a57_0xb708('0xf')]},'body':{'device_id':_0x1eef0a['id'],'player_id':_0x53ed64[a57_0xb708('0xa')][a57_0xb708('0xf')],'status':_0x53ed64[a57_0xb708('0xa')][a57_0xb708('0x10')],'playlist':_0x53ed64['body'][a57_0xb708('0x11')],'reported_at':new Date()}},null,_0x372bde)[a57_0xb708('0xd')](_0x50d7d2=>{delete _0x1eef0a['id'];return _0x333fa4[a57_0xb708('0x12')]({'success':!![],'data':_0x1eef0a});});});}['reportStatus'](_0x4c6011,_0x2889ed,_0xd304f5){return this[a57_0xb708('0x5')][a57_0xb708('0xe')]({'params':{'uuid':_0x4c6011[a57_0xb708('0xa')]['device_uuid']},'body':{'uuid':_0x4c6011['body'][a57_0xb708('0xb')]}},null,_0xd304f5,!![])[a57_0xb708('0xd')](_0x27f999=>{return this[a57_0xb708('0xe')]({'params':{'device_id':_0x27f999['id'],'player_id':_0x4c6011[a57_0xb708('0xa')][a57_0xb708('0xf')]},'body':{'device_id':_0x27f999['id'],'player_id':_0x4c6011[a57_0xb708('0xa')][a57_0xb708('0xf')],'playing_item':_0x4c6011[a57_0xb708('0xa')][a57_0xb708('0x13')],'reported_at':new Date()}},null,_0xd304f5)[a57_0xb708('0xd')](_0x14f4fe=>{delete _0x27f999['id'];return _0x2889ed[a57_0xb708('0x12')]({'success':!![],'data':_0x14f4fe});});});}[a57_0xb708('0x9')](_0x9776c3,_0x864287,_0x3a7b8b){return this['playersController'][a57_0xb708('0x14')]({'params':{'$user.uuid$':_0x9776c3[a57_0xb708('0x15')][a57_0xb708('0x16')]}},null,_0x3a7b8b,!![],[sequelize_utils_1['default'][a57_0xb708('0x17')][a57_0xb708('0x18')],sequelize_utils_1[a57_0xb708('0x4')][a57_0xb708('0x17')][a57_0xb708('0x19')]])[a57_0xb708('0xd')](_0x28bf43=>{console[a57_0xb708('0x1a')](_0x28bf43);return _0x864287['json']({'success':!![],'data':_0x28bf43});});}}exports['default']=PlayerDevicesController;