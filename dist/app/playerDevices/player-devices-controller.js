var a118_0x36d6=['player_id','status','playlist','json','find','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','reportStatus','bind','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then'];(function(_0xf11134,_0x5ee581){var _0x38a8=function(_0x1d2c04){while(--_0x1d2c04){_0xf11134['push'](_0xf11134['shift']());}};_0x38a8(++_0x5ee581);}(a118_0x36d6,0x1af));var a118_0x22f6=function(_0x250e97,_0x1965ff){_0x250e97=_0x250e97-0x0;var _0x1211af=a118_0x36d6[_0x250e97];return _0x1211af;};'use strict';var __importDefault=this&&this[a118_0x22f6('0x0')]||function(_0x55b506){return _0x55b506&&_0x55b506[a118_0x22f6('0x1')]?_0x55b506:{'default':_0x55b506};};Object[a118_0x22f6('0x2')](exports,a118_0x22f6('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a118_0x22f6('0x3')));const sequelize_utils_1=__importDefault(require(a118_0x22f6('0x4')));const responseUtils=require(a118_0x22f6('0x5'));class PlayerDevicesController extends controller_utils_1[a118_0x22f6('0x6')]{constructor(_0x269aa3,_0x5a1b28,_0x1634b8){super(_0x269aa3,null);this[a118_0x22f6('0x7')]=_0x5a1b28;this[a118_0x22f6('0x8')]=_0x1634b8;this[a118_0x22f6('0x9')]=this[a118_0x22f6('0x9')]['bind'](this);this[a118_0x22f6('0xa')]=this[a118_0x22f6('0xa')][a118_0x22f6('0xb')](this);this[a118_0x22f6('0xc')]=this[a118_0x22f6('0xc')][a118_0x22f6('0xb')](this);}[a118_0x22f6('0x9')](_0x161372,_0x52b253,_0x5efad2){return this[a118_0x22f6('0x7')][a118_0x22f6('0xd')]({'params':{'uuid':_0x161372[a118_0x22f6('0xe')][a118_0x22f6('0xf')]},'body':{'uuid':_0x161372['body']['device_uuid'],'network_info':_0x161372[a118_0x22f6('0xe')][a118_0x22f6('0x10')],'firmware_info':_0x161372[a118_0x22f6('0xe')][a118_0x22f6('0x11')]}},null,_0x5efad2,!![])[a118_0x22f6('0x12')](_0x515262=>{return this[a118_0x22f6('0xd')]({'params':{'device_id':_0x515262['id'],'player_id':_0x161372[a118_0x22f6('0xe')][a118_0x22f6('0x13')]},'body':{'device_id':_0x515262['id'],'player_id':_0x161372[a118_0x22f6('0xe')][a118_0x22f6('0x13')],'status':_0x161372[a118_0x22f6('0xe')][a118_0x22f6('0x14')],'playlist':_0x161372[a118_0x22f6('0xe')][a118_0x22f6('0x15')],'reported_at':new Date()}},null,_0x5efad2)[a118_0x22f6('0x12')](_0x1b8786=>{delete _0x515262['id'];return _0x52b253['json']({'success':!![],'data':_0x515262});});});}[a118_0x22f6('0xa')](_0x5e7653,_0x439d75,_0x5d85f4){return this[a118_0x22f6('0x7')][a118_0x22f6('0xd')]({'params':{'uuid':_0x5e7653[a118_0x22f6('0xe')][a118_0x22f6('0xf')]},'body':{'uuid':_0x5e7653[a118_0x22f6('0xe')][a118_0x22f6('0xf')]}},null,_0x5d85f4,!![])['then'](_0x48cc53=>{return this[a118_0x22f6('0xd')]({'params':{'device_id':_0x48cc53['id'],'player_id':_0x5e7653[a118_0x22f6('0xe')][a118_0x22f6('0x13')]},'body':{'device_id':_0x48cc53['id'],'player_id':_0x5e7653[a118_0x22f6('0xe')]['player_id'],'playing_item':_0x5e7653[a118_0x22f6('0xe')]['playing_item'],'status':_0x5e7653[a118_0x22f6('0xe')][a118_0x22f6('0x14')],'reported_at':new Date()}},null,_0x5d85f4)[a118_0x22f6('0x12')](_0x154942=>{delete _0x48cc53['id'];return _0x439d75[a118_0x22f6('0x16')]({'success':!![],'data':_0x154942});});});}['getStatus'](_0x3ddfac,_0x599b75,_0x1e8dd4){return this[a118_0x22f6('0x8')][a118_0x22f6('0x17')]({'params':{'$user.uuid$':_0x3ddfac[a118_0x22f6('0x18')][a118_0x22f6('0x19')]}},null,_0x1e8dd4,!![],[sequelize_utils_1['default'][a118_0x22f6('0x1a')][a118_0x22f6('0x1b')],sequelize_utils_1[a118_0x22f6('0x6')][a118_0x22f6('0x1a')][a118_0x22f6('0x1c')]])[a118_0x22f6('0x12')](_0xc8174b=>{console[a118_0x22f6('0x1d')](_0xc8174b);return _0x599b75[a118_0x22f6('0x16')]({'success':!![],'data':_0xc8174b});});}}exports['default']=PlayerDevicesController;