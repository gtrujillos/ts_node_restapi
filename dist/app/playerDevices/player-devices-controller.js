var a57_0x258c=['body','device_uuid','firmware_info','player_id','then','playing_item','json','getStatus','playersController','find','params','user_uuid','usersModel','models','log','__esModule','../../infrastructure/controller-utils','../../infrastructure/response-utils','default','devicesController','register','bind','reportStatus','updateOrCreate'];(function(_0x703bcf,_0x3843b2){var _0x2fd739=function(_0x17dbaa){while(--_0x17dbaa){_0x703bcf['push'](_0x703bcf['shift']());}};_0x2fd739(++_0x3843b2);}(a57_0x258c,0xff));var a57_0x4f2d=function(_0x2194b0,_0x15a1dc){_0x2194b0=_0x2194b0-0x0;var _0x529a0b=a57_0x258c[_0x2194b0];return _0x529a0b;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x17a418){return _0x17a418&&_0x17a418['__esModule']?_0x17a418:{'default':_0x17a418};};Object['defineProperty'](exports,a57_0x4f2d('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x4f2d('0x1')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a57_0x4f2d('0x2'));class PlayerDevicesController extends controller_utils_1[a57_0x4f2d('0x3')]{constructor(_0x218975,_0x1096ce,_0x4d2b6d){super(_0x218975,null);this[a57_0x4f2d('0x4')]=_0x1096ce;this['playersController']=_0x4d2b6d;this[a57_0x4f2d('0x5')]=this[a57_0x4f2d('0x5')][a57_0x4f2d('0x6')](this);this['reportStatus']=this[a57_0x4f2d('0x7')][a57_0x4f2d('0x6')](this);this['getStatus']=this['getStatus'][a57_0x4f2d('0x6')](this);}[a57_0x4f2d('0x5')](_0x349afe,_0x5d8834,_0x574458){return this[a57_0x4f2d('0x4')][a57_0x4f2d('0x8')]({'params':{'uuid':_0x349afe[a57_0x4f2d('0x9')][a57_0x4f2d('0xa')]},'body':{'uuid':_0x349afe[a57_0x4f2d('0x9')][a57_0x4f2d('0xa')],'network_info':_0x349afe[a57_0x4f2d('0x9')]['network_info'],'firmware_info':_0x349afe[a57_0x4f2d('0x9')][a57_0x4f2d('0xb')]}},null,_0x574458,!![])['then'](_0x5ac472=>{return this[a57_0x4f2d('0x8')]({'params':{'device_id':_0x5ac472['id'],'player_id':_0x349afe[a57_0x4f2d('0x9')][a57_0x4f2d('0xc')]},'body':{'device_id':_0x5ac472['id'],'player_id':_0x349afe['body']['player_id'],'status':_0x349afe['body']['status'],'playlist':_0x349afe['body']['playlist'],'reported_at':new Date()}},null,_0x574458)['then'](_0xd7f1fb=>{delete _0x5ac472['id'];return _0x5d8834['json']({'success':!![],'data':_0x5ac472});});});}[a57_0x4f2d('0x7')](_0x1758be,_0x5d565e,_0x427d2e){return this[a57_0x4f2d('0x4')][a57_0x4f2d('0x8')]({'params':{'uuid':_0x1758be[a57_0x4f2d('0x9')][a57_0x4f2d('0xa')]},'body':{'uuid':_0x1758be[a57_0x4f2d('0x9')]['device_uuid']}},null,_0x427d2e,!![])[a57_0x4f2d('0xd')](_0x3fe3bf=>{return this[a57_0x4f2d('0x8')]({'params':{'device_id':_0x3fe3bf['id'],'player_id':_0x1758be[a57_0x4f2d('0x9')][a57_0x4f2d('0xc')]},'body':{'device_id':_0x3fe3bf['id'],'player_id':_0x1758be[a57_0x4f2d('0x9')][a57_0x4f2d('0xc')],'playing_item':_0x1758be['body'][a57_0x4f2d('0xe')],'status':_0x1758be[a57_0x4f2d('0x9')]['status'],'reported_at':new Date()}},null,_0x427d2e)[a57_0x4f2d('0xd')](_0x390f16=>{delete _0x3fe3bf['id'];return _0x5d565e[a57_0x4f2d('0xf')]({'success':!![],'data':_0x390f16});});});}[a57_0x4f2d('0x10')](_0x1bf6c3,_0x2c32d5,_0xf178d0){return this[a57_0x4f2d('0x11')][a57_0x4f2d('0x12')]({'params':{'$user.uuid$':_0x1bf6c3[a57_0x4f2d('0x13')][a57_0x4f2d('0x14')]}},null,_0xf178d0,!![],[sequelize_utils_1[a57_0x4f2d('0x3')]['models'][a57_0x4f2d('0x15')],sequelize_utils_1['default'][a57_0x4f2d('0x16')]['playerDevicesModel']])[a57_0x4f2d('0xd')](_0x385130=>{console[a57_0x4f2d('0x17')](_0x385130);return _0x2c32d5[a57_0x4f2d('0xf')]({'success':!![],'data':_0x385130});});}}exports[a57_0x4f2d('0x3')]=PlayerDevicesController;