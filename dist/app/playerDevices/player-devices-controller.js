var a57_0x514f=['devicesController','playersController','register','reportStatus','bind','getStatus','body','device_uuid','network_info','firmware_info','then','updateOrCreate','player_id','status','json','playing_item','find','params','user_uuid','models','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default'];(function(_0x521811,_0x43153e){var _0x17fa1e=function(_0x2c7b6c){while(--_0x2c7b6c){_0x521811['push'](_0x521811['shift']());}};_0x17fa1e(++_0x43153e);}(a57_0x514f,0x6d));var a57_0x41cd=function(_0x34e205,_0x5c3330){_0x34e205=_0x34e205-0x0;var _0x9c754b=a57_0x514f[_0x34e205];return _0x9c754b;};'use strict';var __importDefault=this&&this[a57_0x41cd('0x0')]||function(_0x2823e0){return _0x2823e0&&_0x2823e0[a57_0x41cd('0x1')]?_0x2823e0:{'default':_0x2823e0};};Object[a57_0x41cd('0x2')](exports,a57_0x41cd('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a57_0x41cd('0x3')));const sequelize_utils_1=__importDefault(require(a57_0x41cd('0x4')));const responseUtils=require(a57_0x41cd('0x5'));class PlayerDevicesController extends controller_utils_1[a57_0x41cd('0x6')]{constructor(_0x141fdd,_0x2963b4,_0x4f6690){super(_0x141fdd,null);this[a57_0x41cd('0x7')]=_0x2963b4;this[a57_0x41cd('0x8')]=_0x4f6690;this[a57_0x41cd('0x9')]=this['register']['bind'](this);this['reportStatus']=this[a57_0x41cd('0xa')][a57_0x41cd('0xb')](this);this[a57_0x41cd('0xc')]=this['getStatus'][a57_0x41cd('0xb')](this);}['register'](_0x11eb0b,_0x9d4d8b,_0x4e6a8e){return this[a57_0x41cd('0x7')]['updateOrCreate']({'params':{'uuid':_0x11eb0b[a57_0x41cd('0xd')]['device_uuid']},'body':{'uuid':_0x11eb0b[a57_0x41cd('0xd')][a57_0x41cd('0xe')],'network_info':_0x11eb0b['body'][a57_0x41cd('0xf')],'firmware_info':_0x11eb0b[a57_0x41cd('0xd')][a57_0x41cd('0x10')]}},null,_0x4e6a8e,!![])[a57_0x41cd('0x11')](_0x5c3512=>{return this[a57_0x41cd('0x12')]({'params':{'device_id':_0x5c3512['id'],'player_id':_0x11eb0b[a57_0x41cd('0xd')]['player_id']},'body':{'device_id':_0x5c3512['id'],'player_id':_0x11eb0b[a57_0x41cd('0xd')][a57_0x41cd('0x13')],'status':_0x11eb0b['body'][a57_0x41cd('0x14')],'playlist':_0x11eb0b[a57_0x41cd('0xd')]['playlist'],'reported_at':new Date()}},null,_0x4e6a8e)[a57_0x41cd('0x11')](_0x1f9c6f=>{delete _0x5c3512['id'];return _0x9d4d8b[a57_0x41cd('0x15')]({'success':!![],'data':_0x5c3512});});});}['reportStatus'](_0x48f466,_0x5e7117,_0x240783){return this[a57_0x41cd('0x7')][a57_0x41cd('0x12')]({'params':{'uuid':_0x48f466[a57_0x41cd('0xd')][a57_0x41cd('0xe')]},'body':{'uuid':_0x48f466[a57_0x41cd('0xd')][a57_0x41cd('0xe')]}},null,_0x240783,!![])[a57_0x41cd('0x11')](_0x1adedc=>{return this[a57_0x41cd('0x12')]({'params':{'device_id':_0x1adedc['id'],'player_id':_0x48f466[a57_0x41cd('0xd')][a57_0x41cd('0x13')]},'body':{'device_id':_0x1adedc['id'],'player_id':_0x48f466[a57_0x41cd('0xd')][a57_0x41cd('0x13')],'playing_item':_0x48f466[a57_0x41cd('0xd')][a57_0x41cd('0x16')],'status':_0x48f466[a57_0x41cd('0xd')][a57_0x41cd('0x14')],'reported_at':new Date()}},null,_0x240783)['then'](_0x4d5cf8=>{delete _0x1adedc['id'];return _0x5e7117[a57_0x41cd('0x15')]({'success':!![],'data':_0x4d5cf8});});});}[a57_0x41cd('0xc')](_0xdc3427,_0x3a3f11,_0x981a6f){return this[a57_0x41cd('0x8')][a57_0x41cd('0x17')]({'params':{'$user.uuid$':_0xdc3427[a57_0x41cd('0x18')][a57_0x41cd('0x19')]}},null,_0x981a6f,!![],[sequelize_utils_1[a57_0x41cd('0x6')][a57_0x41cd('0x1a')]['usersModel'],sequelize_utils_1[a57_0x41cd('0x6')][a57_0x41cd('0x1a')][a57_0x41cd('0x1b')]])[a57_0x41cd('0x11')](_0x5d6613=>{console[a57_0x41cd('0x1c')](_0x5d6613);return _0x3a3f11['json']({'success':!![],'data':_0x5d6613});});}}exports[a57_0x41cd('0x6')]=PlayerDevicesController;