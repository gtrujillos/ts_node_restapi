var a118_0x1c96=['register','bind','reportStatus','getStatus','body','device_uuid','then','updateOrCreate','player_id','status','playlist','json','playing_item','find','params','user_uuid','models','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/sequelize-utils','default','devicesController','playersController'];(function(_0x5e4c2a,_0x27135b){var _0x1434b2=function(_0x1e56c0){while(--_0x1e56c0){_0x5e4c2a['push'](_0x5e4c2a['shift']());}};_0x1434b2(++_0x27135b);}(a118_0x1c96,0x1bc));var a118_0x4722=function(_0x4b5d15,_0x1cac4e){_0x4b5d15=_0x4b5d15-0x0;var _0x29617e=a118_0x1c96[_0x4b5d15];return _0x29617e;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x326880){return _0x326880&&_0x326880[a118_0x4722('0x0')]?_0x326880:{'default':_0x326880};};Object[a118_0x4722('0x1')](exports,a118_0x4722('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a118_0x4722('0x2')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1[a118_0x4722('0x3')]{constructor(_0x51bf0d,_0x512e2b,_0x1181c1){super(_0x51bf0d,null);this[a118_0x4722('0x4')]=_0x512e2b;this[a118_0x4722('0x5')]=_0x1181c1;this[a118_0x4722('0x6')]=this[a118_0x4722('0x6')][a118_0x4722('0x7')](this);this['reportStatus']=this[a118_0x4722('0x8')][a118_0x4722('0x7')](this);this[a118_0x4722('0x9')]=this[a118_0x4722('0x9')][a118_0x4722('0x7')](this);}[a118_0x4722('0x6')](_0x35a1f4,_0x1a9d73,_0x464ab2){return this[a118_0x4722('0x4')]['updateOrCreate']({'params':{'uuid':_0x35a1f4[a118_0x4722('0xa')][a118_0x4722('0xb')]},'body':{'uuid':_0x35a1f4[a118_0x4722('0xa')]['device_uuid'],'network_info':_0x35a1f4[a118_0x4722('0xa')]['network_info'],'firmware_info':_0x35a1f4[a118_0x4722('0xa')]['firmware_info']}},null,_0x464ab2,!![])[a118_0x4722('0xc')](_0x3fcf85=>{return this[a118_0x4722('0xd')]({'params':{'device_id':_0x3fcf85['id'],'player_id':_0x35a1f4['body']['player_id']},'body':{'device_id':_0x3fcf85['id'],'player_id':_0x35a1f4[a118_0x4722('0xa')][a118_0x4722('0xe')],'status':_0x35a1f4[a118_0x4722('0xa')][a118_0x4722('0xf')],'playlist':_0x35a1f4[a118_0x4722('0xa')][a118_0x4722('0x10')],'reported_at':new Date()}},null,_0x464ab2)[a118_0x4722('0xc')](_0x220e84=>{delete _0x3fcf85['id'];return _0x1a9d73[a118_0x4722('0x11')]({'success':!![],'data':_0x3fcf85});});});}[a118_0x4722('0x8')](_0x4f6d2a,_0xe7ea50,_0xa3c79b){return this[a118_0x4722('0x4')][a118_0x4722('0xd')]({'params':{'uuid':_0x4f6d2a[a118_0x4722('0xa')][a118_0x4722('0xb')]},'body':{'uuid':_0x4f6d2a[a118_0x4722('0xa')][a118_0x4722('0xb')]}},null,_0xa3c79b,!![])[a118_0x4722('0xc')](_0xc9c5a4=>{return this['updateOrCreate']({'params':{'device_id':_0xc9c5a4['id'],'player_id':_0x4f6d2a[a118_0x4722('0xa')][a118_0x4722('0xe')]},'body':{'device_id':_0xc9c5a4['id'],'player_id':_0x4f6d2a['body']['player_id'],'playing_item':_0x4f6d2a[a118_0x4722('0xa')][a118_0x4722('0x12')],'status':_0x4f6d2a['body'][a118_0x4722('0xf')],'reported_at':new Date()}},null,_0xa3c79b)[a118_0x4722('0xc')](_0x3661a7=>{delete _0xc9c5a4['id'];return _0xe7ea50[a118_0x4722('0x11')]({'success':!![],'data':_0x3661a7});});});}[a118_0x4722('0x9')](_0x2d7d70,_0x3dfadd,_0x3a6b68){return this[a118_0x4722('0x5')][a118_0x4722('0x13')]({'params':{'$user.uuid$':_0x2d7d70[a118_0x4722('0x14')][a118_0x4722('0x15')]}},null,_0x3a6b68,!![],[sequelize_utils_1[a118_0x4722('0x3')][a118_0x4722('0x16')]['usersModel'],sequelize_utils_1[a118_0x4722('0x3')]['models'][a118_0x4722('0x17')]])[a118_0x4722('0xc')](_0x394421=>{console[a118_0x4722('0x18')](_0x394421);return _0x3dfadd[a118_0x4722('0x11')]({'success':!![],'data':_0x394421});});}}exports[a118_0x4722('0x3')]=PlayerDevicesController;