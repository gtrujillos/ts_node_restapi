var a57_0x1165=['firmware_info','then','player_id','status','playlist','devicesController','playing_item','json','find','params','user_uuid','models','playerDevicesModel','__importDefault','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info'];(function(_0x5d054e,_0x3fef0b){var _0x47cc03=function(_0x3da827){while(--_0x3da827){_0x5d054e['push'](_0x5d054e['shift']());}};_0x47cc03(++_0x3fef0b);}(a57_0x1165,0x125));var a57_0xe4de=function(_0x43fb78,_0x29074d){_0x43fb78=_0x43fb78-0x0;var _0x42ba42=a57_0x1165[_0x43fb78];return _0x42ba42;};'use strict';var __importDefault=this&&this[a57_0xe4de('0x0')]||function(_0x100ff2){return _0x100ff2&&_0x100ff2[a57_0xe4de('0x1')]?_0x100ff2:{'default':_0x100ff2};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a57_0xe4de('0x2')));const sequelize_utils_1=__importDefault(require(a57_0xe4de('0x3')));const responseUtils=require(a57_0xe4de('0x4'));class PlayerDevicesController extends controller_utils_1[a57_0xe4de('0x5')]{constructor(_0x36752b,_0x14f57d,_0x573bb6){super(_0x36752b,null);this['devicesController']=_0x14f57d;this[a57_0xe4de('0x6')]=_0x573bb6;this[a57_0xe4de('0x7')]=this[a57_0xe4de('0x7')][a57_0xe4de('0x8')](this);this[a57_0xe4de('0x9')]=this[a57_0xe4de('0x9')][a57_0xe4de('0x8')](this);this[a57_0xe4de('0xa')]=this['getStatus'][a57_0xe4de('0x8')](this);}[a57_0xe4de('0x7')](_0x37810f,_0x45bcd5,_0x10525f){return this['devicesController'][a57_0xe4de('0xb')]({'params':{'uuid':_0x37810f[a57_0xe4de('0xc')][a57_0xe4de('0xd')]},'body':{'uuid':_0x37810f[a57_0xe4de('0xc')]['device_uuid'],'network_info':_0x37810f[a57_0xe4de('0xc')][a57_0xe4de('0xe')],'firmware_info':_0x37810f[a57_0xe4de('0xc')][a57_0xe4de('0xf')]}},null,_0x10525f,!![])[a57_0xe4de('0x10')](_0x9849b6=>{return this[a57_0xe4de('0xb')]({'params':{'device_id':_0x9849b6['id'],'player_id':_0x37810f[a57_0xe4de('0xc')][a57_0xe4de('0x11')]},'body':{'device_id':_0x9849b6['id'],'player_id':_0x37810f['body']['player_id'],'status':_0x37810f[a57_0xe4de('0xc')][a57_0xe4de('0x12')],'playlist':_0x37810f['body'][a57_0xe4de('0x13')],'reported_at':new Date()}},null,_0x10525f)[a57_0xe4de('0x10')](_0x42df39=>{delete _0x9849b6['id'];return _0x45bcd5['json']({'success':!![],'data':_0x9849b6});});});}['reportStatus'](_0x35eff4,_0x3e7455,_0x4861b8){return this[a57_0xe4de('0x14')]['updateOrCreate']({'params':{'uuid':_0x35eff4['body'][a57_0xe4de('0xd')]},'body':{'uuid':_0x35eff4[a57_0xe4de('0xc')][a57_0xe4de('0xd')]}},null,_0x4861b8,!![])['then'](_0x3aa010=>{return this['updateOrCreate']({'params':{'device_id':_0x3aa010['id'],'player_id':_0x35eff4[a57_0xe4de('0xc')]['player_id']},'body':{'device_id':_0x3aa010['id'],'player_id':_0x35eff4[a57_0xe4de('0xc')][a57_0xe4de('0x11')],'playing_item':_0x35eff4[a57_0xe4de('0xc')][a57_0xe4de('0x15')],'status':_0x35eff4[a57_0xe4de('0xc')][a57_0xe4de('0x12')],'reported_at':new Date()}},null,_0x4861b8)[a57_0xe4de('0x10')](_0x2df15d=>{delete _0x3aa010['id'];return _0x3e7455[a57_0xe4de('0x16')]({'success':!![],'data':_0x2df15d});});});}[a57_0xe4de('0xa')](_0x5c9473,_0x6d1549,_0x55d421){return this[a57_0xe4de('0x6')][a57_0xe4de('0x17')]({'params':{'$user.uuid$':_0x5c9473[a57_0xe4de('0x18')][a57_0xe4de('0x19')]}},null,_0x55d421,!![],[sequelize_utils_1[a57_0xe4de('0x5')][a57_0xe4de('0x1a')]['usersModel'],sequelize_utils_1[a57_0xe4de('0x5')][a57_0xe4de('0x1a')][a57_0xe4de('0x1b')]])['then'](_0x311286=>{console['log'](_0x311286);return _0x6d1549['json']({'success':!![],'data':_0x311286});});}}exports[a57_0xe4de('0x5')]=PlayerDevicesController;