var a11_0x12fe=['successResponse','catch','stack','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','string-format','model','login','bind','createAccount','findOne','body','username','uuid','first_name','last_name','password','errorResponse','usernameNotFoundError','validPassword','toJSON','secret','options','token','passwordNotMatchError','usernameTakenError','email','generateHash','create','then','dataValues','status','updated_at','created_at','sign'];(function(_0xbfc76c,_0x28e1f9){var _0x246aeb=function(_0x29c56e){while(--_0x29c56e){_0xbfc76c['push'](_0xbfc76c['shift']());}};_0x246aeb(++_0x28e1f9);}(a11_0x12fe,0x9f));var a11_0x19b2=function(_0x487dae,_0x1525a0){_0x487dae=_0x487dae-0x0;var _0x39b730=a11_0x12fe[_0x487dae];return _0x39b730;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const jwt=require(a11_0x19b2('0x0'));const i18n=require(a11_0x19b2('0x1'));const configJwt=require(a11_0x19b2('0x2'));const authUtils=require(a11_0x19b2('0x3'));const responseUtils=require(a11_0x19b2('0x4'));const LocaleStrings=require(a11_0x19b2('0x5'));const format=require(a11_0x19b2('0x6'));class AuthenticationController{constructor(_0x1e5d13){this[a11_0x19b2('0x7')]=_0x1e5d13;this[a11_0x19b2('0x8')]=this[a11_0x19b2('0x8')][a11_0x19b2('0x9')](this);this[a11_0x19b2('0xa')]=this[a11_0x19b2('0xa')]['bind'](this);}[a11_0x19b2('0x8')](_0x43249e,_0x485977,_0x243fe8){this['model'][a11_0x19b2('0xb')]({'where':{'username':_0x43249e[a11_0x19b2('0xc')][a11_0x19b2('0xd')]},'attributes':[a11_0x19b2('0xe'),a11_0x19b2('0xf'),a11_0x19b2('0x10'),'email',a11_0x19b2('0xd'),a11_0x19b2('0x11')]})['then'](_0x150a7d=>{if(!_0x150a7d){return responseUtils[a11_0x19b2('0x12')](_0x485977,format(LocaleStrings[a11_0x19b2('0x13')],_0x43249e[a11_0x19b2('0xc')][a11_0x19b2('0xd')]),0x193);}if(authUtils[a11_0x19b2('0x14')](_0x43249e[a11_0x19b2('0xc')][a11_0x19b2('0x11')],_0x150a7d['password'])){_0x150a7d=_0x150a7d[a11_0x19b2('0x15')]();const _0x88f7fa={'uuid':_0x150a7d[a11_0x19b2('0xe')]};const _0x2f9607=jwt['sign'](_0x88f7fa,configJwt[a11_0x19b2('0x16')],configJwt[a11_0x19b2('0x17')]);delete _0x150a7d[a11_0x19b2('0x11')];_0x150a7d[a11_0x19b2('0x18')]=_0x2f9607;return responseUtils['successResponse'](_0x485977,_0x150a7d,0xc8);}else{return responseUtils['errorResponse'](_0x485977,format(LocaleStrings[a11_0x19b2('0x19')]),0x193);}})['catch'](_0x4f39b9=>{return responseUtils[a11_0x19b2('0x12')](_0x485977,_0x4f39b9['stack'],0x1f4);});}['createAccount'](_0xf972aa,_0x586e5a,_0x5aa59c){this[a11_0x19b2('0x7')][a11_0x19b2('0xb')]({'where':{'username':_0xf972aa[a11_0x19b2('0xc')][a11_0x19b2('0xd')]}})['then'](_0x487fec=>{if(_0x487fec){return responseUtils[a11_0x19b2('0x12')](_0x586e5a,format(LocaleStrings[a11_0x19b2('0x1a')],_0xf972aa[a11_0x19b2('0xc')]['username']),0x193);}else{_0xf972aa[a11_0x19b2('0xc')][a11_0x19b2('0x1b')]=_0xf972aa[a11_0x19b2('0xc')]['username'];const _0x217a3e={'first_name':_0xf972aa['body'][a11_0x19b2('0xf')],'last_name':_0xf972aa[a11_0x19b2('0xc')][a11_0x19b2('0x10')],'email':_0xf972aa[a11_0x19b2('0xc')]['email'],'username':_0xf972aa[a11_0x19b2('0xc')][a11_0x19b2('0xd')],'password':authUtils[a11_0x19b2('0x1c')](_0xf972aa[a11_0x19b2('0xc')][a11_0x19b2('0x11')])};this[a11_0x19b2('0x7')][a11_0x19b2('0x1d')](_0x217a3e)[a11_0x19b2('0x1e')](function(_0x1c643e,_0x27b248){delete _0x1c643e[a11_0x19b2('0x1f')]['id'];delete _0x1c643e[a11_0x19b2('0x1f')][a11_0x19b2('0x20')];delete _0x1c643e[a11_0x19b2('0x1f')]['password'];delete _0x1c643e[a11_0x19b2('0x1f')][a11_0x19b2('0x21')];delete _0x1c643e['dataValues'][a11_0x19b2('0x22')];const _0x3fd886={'uuid':_0x1c643e[a11_0x19b2('0xe')]};const _0x13ebcb=jwt[a11_0x19b2('0x23')](_0x3fd886,configJwt['secret'],configJwt[a11_0x19b2('0x17')]);_0x1c643e[a11_0x19b2('0x1f')][a11_0x19b2('0x18')]=_0x13ebcb;return responseUtils[a11_0x19b2('0x24')](_0x586e5a,_0x1c643e,0xc8);})[a11_0x19b2('0x25')](_0x31df93=>{return responseUtils['errorResponse'](_0x586e5a,_0x31df93[a11_0x19b2('0x26')],0x1f4);});}})[a11_0x19b2('0x25')](_0x1629f4=>{return responseUtils[a11_0x19b2('0x12')](_0x586e5a,_0x1629f4[a11_0x19b2('0x26')],0x1f4);});}}exports['default']=AuthenticationController;