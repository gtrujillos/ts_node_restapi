var a11_0x15ed=['username','uuid','first_name','last_name','email','password','then','errorResponse','usernameNotFoundError','body','sign','options','token','successResponse','passwordNotMatchError','catch','stack','usernameTakenError','generateHash','dataValues','status','updated_at','secret','defineProperty','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','string-format','login','bind','createAccount','model','findOne'];(function(_0x10e80b,_0x5b8a18){var _0x429f41=function(_0x19e148){while(--_0x19e148){_0x10e80b['push'](_0x10e80b['shift']());}};_0x429f41(++_0x5b8a18);}(a11_0x15ed,0x13f));var a11_0x2e0f=function(_0xd0098,_0x276e4d){_0xd0098=_0xd0098-0x0;var _0x10649f=a11_0x15ed[_0xd0098];return _0x10649f;};'use strict';Object[a11_0x2e0f('0x0')](exports,a11_0x2e0f('0x1'),{'value':!![]});const jwt=require(a11_0x2e0f('0x2'));const i18n=require(a11_0x2e0f('0x3'));const configJwt=require(a11_0x2e0f('0x4'));const authUtils=require(a11_0x2e0f('0x5'));const responseUtils=require(a11_0x2e0f('0x6'));const LocaleStrings=require(a11_0x2e0f('0x7'));const format=require(a11_0x2e0f('0x8'));class AuthenticationController{constructor(_0x4df4d7){this['model']=_0x4df4d7;this[a11_0x2e0f('0x9')]=this['login'][a11_0x2e0f('0xa')](this);this[a11_0x2e0f('0xb')]=this[a11_0x2e0f('0xb')][a11_0x2e0f('0xa')](this);}[a11_0x2e0f('0x9')](_0x5db5b1,_0x36995a,_0x32899d){this[a11_0x2e0f('0xc')][a11_0x2e0f('0xd')]({'where':{'username':_0x5db5b1['body'][a11_0x2e0f('0xe')]},'attributes':[a11_0x2e0f('0xf'),a11_0x2e0f('0x10'),a11_0x2e0f('0x11'),a11_0x2e0f('0x12'),a11_0x2e0f('0xe'),a11_0x2e0f('0x13')]})[a11_0x2e0f('0x14')](_0x50e1fc=>{if(!_0x50e1fc){return responseUtils[a11_0x2e0f('0x15')](_0x36995a,format(LocaleStrings[a11_0x2e0f('0x16')],_0x5db5b1[a11_0x2e0f('0x17')][a11_0x2e0f('0xe')]),0x193);}if(authUtils['validPassword'](_0x5db5b1['body']['password'],_0x50e1fc['password'])){_0x50e1fc=_0x50e1fc['toJSON']();const _0x49a279={'uuid':_0x50e1fc[a11_0x2e0f('0xf')]};const _0xfb09e3=jwt[a11_0x2e0f('0x18')](_0x49a279,configJwt['secret'],configJwt[a11_0x2e0f('0x19')]);delete _0x50e1fc['password'];_0x50e1fc[a11_0x2e0f('0x1a')]=_0xfb09e3;return responseUtils[a11_0x2e0f('0x1b')](_0x36995a,_0x50e1fc,0xc8);}else{return responseUtils[a11_0x2e0f('0x15')](_0x36995a,format(LocaleStrings[a11_0x2e0f('0x1c')]),0x193);}})[a11_0x2e0f('0x1d')](_0x22c846=>{return responseUtils[a11_0x2e0f('0x15')](_0x36995a,_0x22c846[a11_0x2e0f('0x1e')],0x1f4);});}[a11_0x2e0f('0xb')](_0x1425fe,_0x4b9eb9,_0x1a6872){this[a11_0x2e0f('0xc')][a11_0x2e0f('0xd')]({'where':{'username':_0x1425fe[a11_0x2e0f('0x17')][a11_0x2e0f('0xe')]}})[a11_0x2e0f('0x14')](_0x5f3666=>{if(_0x5f3666){return responseUtils[a11_0x2e0f('0x15')](_0x4b9eb9,format(LocaleStrings[a11_0x2e0f('0x1f')],_0x1425fe['body'][a11_0x2e0f('0xe')]),0x193);}else{_0x1425fe[a11_0x2e0f('0x17')][a11_0x2e0f('0x12')]=_0x1425fe['body'][a11_0x2e0f('0xe')];const _0x1dfabe={'first_name':_0x1425fe[a11_0x2e0f('0x17')][a11_0x2e0f('0x10')],'last_name':_0x1425fe['body'][a11_0x2e0f('0x11')],'email':_0x1425fe[a11_0x2e0f('0x17')][a11_0x2e0f('0x12')],'username':_0x1425fe[a11_0x2e0f('0x17')]['username'],'password':authUtils[a11_0x2e0f('0x20')](_0x1425fe[a11_0x2e0f('0x17')][a11_0x2e0f('0x13')])};this[a11_0x2e0f('0xc')]['create'](_0x1dfabe)['then'](function(_0x1c4a1b,_0x19cd10){delete _0x1c4a1b[a11_0x2e0f('0x21')]['id'];delete _0x1c4a1b['dataValues'][a11_0x2e0f('0x22')];delete _0x1c4a1b[a11_0x2e0f('0x21')]['password'];delete _0x1c4a1b[a11_0x2e0f('0x21')][a11_0x2e0f('0x23')];delete _0x1c4a1b['dataValues']['created_at'];const _0x6f7bd4={'uuid':_0x1c4a1b[a11_0x2e0f('0xf')]};const _0x4b5dd9=jwt[a11_0x2e0f('0x18')](_0x6f7bd4,configJwt[a11_0x2e0f('0x24')],configJwt[a11_0x2e0f('0x19')]);_0x1c4a1b[a11_0x2e0f('0x21')][a11_0x2e0f('0x1a')]=_0x4b5dd9;return responseUtils[a11_0x2e0f('0x1b')](_0x4b9eb9,_0x1c4a1b,0xc8);})['catch'](_0x30c194=>{return responseUtils[a11_0x2e0f('0x15')](_0x4b9eb9,_0x30c194['stack'],0x1f4);});}})[a11_0x2e0f('0x1d')](_0x29f0ce=>{return responseUtils[a11_0x2e0f('0x15')](_0x4b9eb9,_0x29f0ce[a11_0x2e0f('0x1e')],0x1f4);});}}exports['default']=AuthenticationController;