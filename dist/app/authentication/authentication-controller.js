var a11_0x4dd2=['last_name','email','password','then','errorResponse','validPassword','toJSON','sign','secret','options','token','successResponse','passwordNotMatchError','catch','findOne','usernameTakenError','generateHash','create','dataValues','status','created_at','stack','default','defineProperty','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','string-format','model','login','bind','createAccount','body','username','uuid','first_name'];(function(_0x3f399f,_0x57fb01){var _0x1dbc57=function(_0x5b42f8){while(--_0x5b42f8){_0x3f399f['push'](_0x3f399f['shift']());}};_0x1dbc57(++_0x57fb01);}(a11_0x4dd2,0xfb));var a11_0x1203=function(_0x1bedd3,_0x119bb3){_0x1bedd3=_0x1bedd3-0x0;var _0x23f794=a11_0x4dd2[_0x1bedd3];return _0x23f794;};'use strict';Object[a11_0x1203('0x0')](exports,'__esModule',{'value':!![]});const jwt=require('jsonwebtoken');const i18n=require(a11_0x1203('0x1'));const configJwt=require(a11_0x1203('0x2'));const authUtils=require(a11_0x1203('0x3'));const responseUtils=require(a11_0x1203('0x4'));const LocaleStrings=require(a11_0x1203('0x5'));const format=require(a11_0x1203('0x6'));class AuthenticationController{constructor(_0x57f489){this[a11_0x1203('0x7')]=_0x57f489;this[a11_0x1203('0x8')]=this[a11_0x1203('0x8')][a11_0x1203('0x9')](this);this[a11_0x1203('0xa')]=this[a11_0x1203('0xa')]['bind'](this);}[a11_0x1203('0x8')](_0x383313,_0x2e1a51,_0x4aeb80){this[a11_0x1203('0x7')]['findOne']({'where':{'username':_0x383313[a11_0x1203('0xb')][a11_0x1203('0xc')]},'attributes':[a11_0x1203('0xd'),a11_0x1203('0xe'),a11_0x1203('0xf'),a11_0x1203('0x10'),'username',a11_0x1203('0x11')]})[a11_0x1203('0x12')](_0x4d7e14=>{if(!_0x4d7e14){return responseUtils[a11_0x1203('0x13')](_0x2e1a51,format(LocaleStrings['usernameNotFoundError'],_0x383313[a11_0x1203('0xb')][a11_0x1203('0xc')]),0x193);}if(authUtils[a11_0x1203('0x14')](_0x383313[a11_0x1203('0xb')]['password'],_0x4d7e14['password'])){_0x4d7e14=_0x4d7e14[a11_0x1203('0x15')]();const _0x4fa42a={'uuid':_0x4d7e14[a11_0x1203('0xd')]};const _0xada1eb=jwt[a11_0x1203('0x16')](_0x4fa42a,configJwt[a11_0x1203('0x17')],configJwt[a11_0x1203('0x18')]);delete _0x4d7e14[a11_0x1203('0x11')];_0x4d7e14[a11_0x1203('0x19')]=_0xada1eb;return responseUtils[a11_0x1203('0x1a')](_0x2e1a51,_0x4d7e14,0xc8);}else{return responseUtils['errorResponse'](_0x2e1a51,format(LocaleStrings[a11_0x1203('0x1b')]),0x193);}})[a11_0x1203('0x1c')](_0x4b120b=>{return responseUtils['errorResponse'](_0x2e1a51,_0x4b120b['stack'],0x1f4);});}['createAccount'](_0x700440,_0x20805d,_0x1adb9f){this[a11_0x1203('0x7')][a11_0x1203('0x1d')]({'where':{'username':_0x700440[a11_0x1203('0xb')]['username']}})[a11_0x1203('0x12')](_0x235e51=>{if(_0x235e51){return responseUtils[a11_0x1203('0x13')](_0x20805d,format(LocaleStrings[a11_0x1203('0x1e')],_0x700440[a11_0x1203('0xb')][a11_0x1203('0xc')]),0x193);}else{_0x700440[a11_0x1203('0xb')][a11_0x1203('0x10')]=_0x700440[a11_0x1203('0xb')][a11_0x1203('0xc')];const _0x2c50c2={'first_name':_0x700440[a11_0x1203('0xb')][a11_0x1203('0xe')],'last_name':_0x700440[a11_0x1203('0xb')]['last_name'],'email':_0x700440[a11_0x1203('0xb')]['email'],'username':_0x700440['body'][a11_0x1203('0xc')],'password':authUtils[a11_0x1203('0x1f')](_0x700440[a11_0x1203('0xb')]['password'])};this['model'][a11_0x1203('0x20')](_0x2c50c2)[a11_0x1203('0x12')](function(_0x2021e5,_0x171e65){delete _0x2021e5[a11_0x1203('0x21')]['id'];delete _0x2021e5[a11_0x1203('0x21')][a11_0x1203('0x22')];delete _0x2021e5[a11_0x1203('0x21')][a11_0x1203('0x11')];delete _0x2021e5[a11_0x1203('0x21')]['updated_at'];delete _0x2021e5[a11_0x1203('0x21')][a11_0x1203('0x23')];const _0x1afc37={'uuid':_0x2021e5[a11_0x1203('0xd')]};const _0x29cb5c=jwt[a11_0x1203('0x16')](_0x1afc37,configJwt['secret'],configJwt[a11_0x1203('0x18')]);_0x2021e5[a11_0x1203('0x21')][a11_0x1203('0x19')]=_0x29cb5c;return responseUtils[a11_0x1203('0x1a')](_0x20805d,_0x2021e5,0xc8);})[a11_0x1203('0x1c')](_0x181e15=>{return responseUtils[a11_0x1203('0x13')](_0x20805d,_0x181e15['stack'],0x1f4);});}})['catch'](_0x5a5e1c=>{return responseUtils[a11_0x1203('0x13')](_0x20805d,_0x5a5e1c[a11_0x1203('0x24')],0x1f4);});}}exports[a11_0x1203('0x25')]=AuthenticationController;