var a11_0x2bbc=['body','username','uuid','first_name','last_name','email','usernameNotFoundError','validPassword','password','toJSON','sign','secret','options','token','successResponse','errorResponse','passwordNotMatchError','stack','then','usernameTakenError','generateHash','create','dataValues','status','updated_at','created_at','catch','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','string-format','model','bind','createAccount','login','findOne'];(function(_0x3d12df,_0x80d7b9){var _0x4ec54e=function(_0x2c2e92){while(--_0x2c2e92){_0x3d12df['push'](_0x3d12df['shift']());}};_0x4ec54e(++_0x80d7b9);}(a11_0x2bbc,0x90));var a11_0x2b30=function(_0xb43937,_0x55059e){_0xb43937=_0xb43937-0x0;var _0x253680=a11_0x2bbc[_0xb43937];return _0x253680;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const jwt=require(a11_0x2b30('0x0'));const i18n=require(a11_0x2b30('0x1'));const configJwt=require(a11_0x2b30('0x2'));const authUtils=require(a11_0x2b30('0x3'));const responseUtils=require(a11_0x2b30('0x4'));const LocaleStrings=require(a11_0x2b30('0x5'));const format=require(a11_0x2b30('0x6'));class AuthenticationController{constructor(_0x59ecdf){this[a11_0x2b30('0x7')]=_0x59ecdf;this['login']=this['login'][a11_0x2b30('0x8')](this);this[a11_0x2b30('0x9')]=this[a11_0x2b30('0x9')]['bind'](this);}[a11_0x2b30('0xa')](_0x3e6916,_0x5acb7d,_0x12ec59){this[a11_0x2b30('0x7')][a11_0x2b30('0xb')]({'where':{'username':_0x3e6916[a11_0x2b30('0xc')][a11_0x2b30('0xd')]},'attributes':[a11_0x2b30('0xe'),a11_0x2b30('0xf'),a11_0x2b30('0x10'),a11_0x2b30('0x11'),'username','password']})['then'](_0x20a775=>{if(!_0x20a775){return responseUtils['errorResponse'](_0x5acb7d,format(LocaleStrings[a11_0x2b30('0x12')],_0x3e6916['body']['username']),0x193);}if(authUtils[a11_0x2b30('0x13')](_0x3e6916[a11_0x2b30('0xc')]['password'],_0x20a775[a11_0x2b30('0x14')])){_0x20a775=_0x20a775[a11_0x2b30('0x15')]();const _0x257f00={'uuid':_0x20a775[a11_0x2b30('0xe')]};const _0x56dc46=jwt[a11_0x2b30('0x16')](_0x257f00,configJwt[a11_0x2b30('0x17')],configJwt[a11_0x2b30('0x18')]);delete _0x20a775[a11_0x2b30('0x14')];_0x20a775[a11_0x2b30('0x19')]=_0x56dc46;return responseUtils[a11_0x2b30('0x1a')](_0x5acb7d,_0x20a775,0xc8);}else{return responseUtils[a11_0x2b30('0x1b')](_0x5acb7d,format(LocaleStrings[a11_0x2b30('0x1c')]),0x193);}})['catch'](_0xba70b=>{return responseUtils[a11_0x2b30('0x1b')](_0x5acb7d,_0xba70b[a11_0x2b30('0x1d')],0x1f4);});}[a11_0x2b30('0x9')](_0x3ca414,_0x2763d4,_0x428248){this[a11_0x2b30('0x7')]['findOne']({'where':{'username':_0x3ca414[a11_0x2b30('0xc')][a11_0x2b30('0xd')]}})[a11_0x2b30('0x1e')](_0x20cc33=>{if(_0x20cc33){return responseUtils[a11_0x2b30('0x1b')](_0x2763d4,format(LocaleStrings[a11_0x2b30('0x1f')],_0x3ca414[a11_0x2b30('0xc')][a11_0x2b30('0xd')]),0x193);}else{_0x3ca414[a11_0x2b30('0xc')]['email']=_0x3ca414[a11_0x2b30('0xc')][a11_0x2b30('0xd')];const _0x2b61cb={'first_name':_0x3ca414[a11_0x2b30('0xc')][a11_0x2b30('0xf')],'last_name':_0x3ca414['body']['last_name'],'email':_0x3ca414[a11_0x2b30('0xc')][a11_0x2b30('0x11')],'username':_0x3ca414[a11_0x2b30('0xc')]['username'],'password':authUtils[a11_0x2b30('0x20')](_0x3ca414[a11_0x2b30('0xc')][a11_0x2b30('0x14')])};this[a11_0x2b30('0x7')][a11_0x2b30('0x21')](_0x2b61cb)[a11_0x2b30('0x1e')](function(_0x59653c,_0x403780){delete _0x59653c[a11_0x2b30('0x22')]['id'];delete _0x59653c[a11_0x2b30('0x22')][a11_0x2b30('0x23')];delete _0x59653c['dataValues'][a11_0x2b30('0x14')];delete _0x59653c[a11_0x2b30('0x22')][a11_0x2b30('0x24')];delete _0x59653c[a11_0x2b30('0x22')][a11_0x2b30('0x25')];const _0x36fa68={'uuid':_0x59653c[a11_0x2b30('0xe')]};const _0x222d59=jwt[a11_0x2b30('0x16')](_0x36fa68,configJwt[a11_0x2b30('0x17')],configJwt[a11_0x2b30('0x18')]);_0x59653c[a11_0x2b30('0x22')]['token']=_0x222d59;return responseUtils[a11_0x2b30('0x1a')](_0x2763d4,_0x59653c,0xc8);})[a11_0x2b30('0x26')](_0x33247a=>{return responseUtils[a11_0x2b30('0x1b')](_0x2763d4,_0x33247a[a11_0x2b30('0x1d')],0x1f4);});}})[a11_0x2b30('0x26')](_0x5a671d=>{return responseUtils[a11_0x2b30('0x1b')](_0x2763d4,_0x5a671d[a11_0x2b30('0x1d')],0x1f4);});}}exports['default']=AuthenticationController;