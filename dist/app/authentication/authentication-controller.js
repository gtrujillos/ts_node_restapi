var a11_0x1dbb=['jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../resources/locale-strings','string-format','model','login','bind','createAccount','findOne','username','uuid','last_name','email','password','then','errorResponse','usernameNotFoundError','body','validPassword','toJSON','sign','secret','options','successResponse','passwordNotMatchError','catch','stack','usernameTakenError','first_name','generateHash','dataValues','status','updated_at','created_at','token','default','defineProperty','__esModule'];(function(_0x3e856c,_0x4f2364){var _0x243d53=function(_0x2cf887){while(--_0x2cf887){_0x3e856c['push'](_0x3e856c['shift']());}};_0x243d53(++_0x4f2364);}(a11_0x1dbb,0x1b6));var a11_0xc451=function(_0x41b5ff,_0xff9ae8){_0x41b5ff=_0x41b5ff-0x0;var _0x3e8ff1=a11_0x1dbb[_0x41b5ff];return _0x3e8ff1;};'use strict';Object[a11_0xc451('0x0')](exports,a11_0xc451('0x1'),{'value':!![]});const jwt=require(a11_0xc451('0x2'));const i18n=require(a11_0xc451('0x3'));const configJwt=require(a11_0xc451('0x4'));const authUtils=require(a11_0xc451('0x5'));const responseUtils=require('../../infrastructure/response-utils');const LocaleStrings=require(a11_0xc451('0x6'));const format=require(a11_0xc451('0x7'));class AuthenticationController{constructor(_0x5391c0){this[a11_0xc451('0x8')]=_0x5391c0;this[a11_0xc451('0x9')]=this['login'][a11_0xc451('0xa')](this);this[a11_0xc451('0xb')]=this[a11_0xc451('0xb')]['bind'](this);}[a11_0xc451('0x9')](_0x17ae36,_0x4ff426,_0x5ce7a7){this[a11_0xc451('0x8')][a11_0xc451('0xc')]({'where':{'username':_0x17ae36['body'][a11_0xc451('0xd')]},'attributes':[a11_0xc451('0xe'),'first_name',a11_0xc451('0xf'),a11_0xc451('0x10'),'username',a11_0xc451('0x11')]})[a11_0xc451('0x12')](_0x4aff3c=>{if(!_0x4aff3c){return responseUtils[a11_0xc451('0x13')](_0x4ff426,format(LocaleStrings[a11_0xc451('0x14')],_0x17ae36[a11_0xc451('0x15')][a11_0xc451('0xd')]),0x193);}if(authUtils[a11_0xc451('0x16')](_0x17ae36[a11_0xc451('0x15')][a11_0xc451('0x11')],_0x4aff3c[a11_0xc451('0x11')])){_0x4aff3c=_0x4aff3c[a11_0xc451('0x17')]();const _0x502219={'uuid':_0x4aff3c['uuid']};const _0x560844=jwt[a11_0xc451('0x18')](_0x502219,configJwt[a11_0xc451('0x19')],configJwt[a11_0xc451('0x1a')]);delete _0x4aff3c['password'];_0x4aff3c['token']=_0x560844;return responseUtils[a11_0xc451('0x1b')](_0x4ff426,_0x4aff3c,0xc8);}else{return responseUtils['errorResponse'](_0x4ff426,format(LocaleStrings[a11_0xc451('0x1c')]),0x193);}})[a11_0xc451('0x1d')](_0x359779=>{return responseUtils[a11_0xc451('0x13')](_0x4ff426,_0x359779[a11_0xc451('0x1e')],0x1f4);});}[a11_0xc451('0xb')](_0x27996f,_0x2b4323,_0x32f01c){this[a11_0xc451('0x8')][a11_0xc451('0xc')]({'where':{'username':_0x27996f[a11_0xc451('0x15')][a11_0xc451('0xd')]}})[a11_0xc451('0x12')](_0x461ed5=>{if(_0x461ed5){return responseUtils[a11_0xc451('0x13')](_0x2b4323,format(LocaleStrings[a11_0xc451('0x1f')],_0x27996f['body'][a11_0xc451('0xd')]),0x193);}else{_0x27996f['body'][a11_0xc451('0x10')]=_0x27996f['body']['username'];const _0x4629bf={'first_name':_0x27996f[a11_0xc451('0x15')][a11_0xc451('0x20')],'last_name':_0x27996f[a11_0xc451('0x15')][a11_0xc451('0xf')],'email':_0x27996f[a11_0xc451('0x15')]['email'],'username':_0x27996f['body'][a11_0xc451('0xd')],'password':authUtils[a11_0xc451('0x21')](_0x27996f[a11_0xc451('0x15')][a11_0xc451('0x11')])};this[a11_0xc451('0x8')]['create'](_0x4629bf)[a11_0xc451('0x12')](function(_0x462665,_0x3024b0){delete _0x462665[a11_0xc451('0x22')]['id'];delete _0x462665['dataValues'][a11_0xc451('0x23')];delete _0x462665[a11_0xc451('0x22')][a11_0xc451('0x11')];delete _0x462665[a11_0xc451('0x22')][a11_0xc451('0x24')];delete _0x462665[a11_0xc451('0x22')][a11_0xc451('0x25')];const _0x23b0e6={'uuid':_0x462665[a11_0xc451('0xe')]};const _0x7dea93=jwt[a11_0xc451('0x18')](_0x23b0e6,configJwt[a11_0xc451('0x19')],configJwt['options']);_0x462665[a11_0xc451('0x22')][a11_0xc451('0x26')]=_0x7dea93;return responseUtils[a11_0xc451('0x1b')](_0x2b4323,_0x462665,0xc8);})['catch'](_0x50dc02=>{return responseUtils[a11_0xc451('0x13')](_0x2b4323,_0x50dc02[a11_0xc451('0x1e')],0x1f4);});}})['catch'](_0x2bd1e6=>{return responseUtils['errorResponse'](_0x2b4323,_0x2bd1e6[a11_0xc451('0x1e')],0x1f4);});}}exports[a11_0xc451('0x27')]=AuthenticationController;