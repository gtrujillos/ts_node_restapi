var a11_0xd6f2=['last_name','email','username','password','then','errorResponse','usernameNotFoundError','validPassword','options','token','passwordNotMatchError','stack','findOne','usernameTakenError','dataValues','status','created_at','secret','successResponse','catch','default','defineProperty','__esModule','jsonwebtoken','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','string-format','model','login','bind','createAccount','body','uuid','first_name'];(function(_0x31a25a,_0x1f6a59){var _0x7fd29b=function(_0x721b81){while(--_0x721b81){_0x31a25a['push'](_0x31a25a['shift']());}};_0x7fd29b(++_0x1f6a59);}(a11_0xd6f2,0x111));var a11_0x5849=function(_0x1bedd3,_0x119bb3){_0x1bedd3=_0x1bedd3-0x0;var _0x23f794=a11_0xd6f2[_0x1bedd3];return _0x23f794;};'use strict';Object[a11_0x5849('0x0')](exports,a11_0x5849('0x1'),{'value':!![]});const jwt=require(a11_0x5849('0x2'));const i18n=require('i18n');const configJwt=require(a11_0x5849('0x3'));const authUtils=require(a11_0x5849('0x4'));const responseUtils=require(a11_0x5849('0x5'));const LocaleStrings=require(a11_0x5849('0x6'));const format=require(a11_0x5849('0x7'));class AuthenticationController{constructor(_0x27a4bc){this[a11_0x5849('0x8')]=_0x27a4bc;this[a11_0x5849('0x9')]=this[a11_0x5849('0x9')][a11_0x5849('0xa')](this);this['createAccount']=this[a11_0x5849('0xb')][a11_0x5849('0xa')](this);}[a11_0x5849('0x9')](_0xb14b12,_0x34e6c9,_0x5f15f5){this['model']['findOne']({'where':{'username':_0xb14b12[a11_0x5849('0xc')]['username']},'attributes':[a11_0x5849('0xd'),a11_0x5849('0xe'),a11_0x5849('0xf'),a11_0x5849('0x10'),a11_0x5849('0x11'),a11_0x5849('0x12')]})[a11_0x5849('0x13')](_0x3e7064=>{if(!_0x3e7064){return responseUtils[a11_0x5849('0x14')](_0x34e6c9,format(LocaleStrings[a11_0x5849('0x15')],_0xb14b12[a11_0x5849('0xc')]['username']),0x193);}if(authUtils[a11_0x5849('0x16')](_0xb14b12[a11_0x5849('0xc')]['password'],_0x3e7064[a11_0x5849('0x12')])){_0x3e7064=_0x3e7064['toJSON']();const _0x84d389={'uuid':_0x3e7064[a11_0x5849('0xd')]};const _0x3f7690=jwt['sign'](_0x84d389,configJwt['secret'],configJwt[a11_0x5849('0x17')]);delete _0x3e7064[a11_0x5849('0x12')];_0x3e7064[a11_0x5849('0x18')]=_0x3f7690;return responseUtils['successResponse'](_0x34e6c9,_0x3e7064,0xc8);}else{return responseUtils[a11_0x5849('0x14')](_0x34e6c9,format(LocaleStrings[a11_0x5849('0x19')]),0x193);}})['catch'](_0x46a255=>{return responseUtils[a11_0x5849('0x14')](_0x34e6c9,_0x46a255[a11_0x5849('0x1a')],0x1f4);});}['createAccount'](_0x3878cf,_0x7cf26b,_0x558994){this['model'][a11_0x5849('0x1b')]({'where':{'username':_0x3878cf[a11_0x5849('0xc')]['username']}})[a11_0x5849('0x13')](_0x3bccfa=>{if(_0x3bccfa){return responseUtils[a11_0x5849('0x14')](_0x7cf26b,format(LocaleStrings[a11_0x5849('0x1c')],_0x3878cf[a11_0x5849('0xc')][a11_0x5849('0x11')]),0x193);}else{_0x3878cf[a11_0x5849('0xc')][a11_0x5849('0x10')]=_0x3878cf[a11_0x5849('0xc')][a11_0x5849('0x11')];const _0x636e68={'first_name':_0x3878cf[a11_0x5849('0xc')][a11_0x5849('0xe')],'last_name':_0x3878cf[a11_0x5849('0xc')]['last_name'],'email':_0x3878cf[a11_0x5849('0xc')][a11_0x5849('0x10')],'username':_0x3878cf[a11_0x5849('0xc')][a11_0x5849('0x11')],'password':authUtils['generateHash'](_0x3878cf[a11_0x5849('0xc')][a11_0x5849('0x12')])};this[a11_0x5849('0x8')]['create'](_0x636e68)[a11_0x5849('0x13')](function(_0x28e4ab,_0x35543c){delete _0x28e4ab['dataValues']['id'];delete _0x28e4ab[a11_0x5849('0x1d')][a11_0x5849('0x1e')];delete _0x28e4ab[a11_0x5849('0x1d')][a11_0x5849('0x12')];delete _0x28e4ab['dataValues']['updated_at'];delete _0x28e4ab[a11_0x5849('0x1d')][a11_0x5849('0x1f')];const _0x317428={'uuid':_0x28e4ab[a11_0x5849('0xd')]};const _0x5bf286=jwt['sign'](_0x317428,configJwt[a11_0x5849('0x20')],configJwt[a11_0x5849('0x17')]);_0x28e4ab[a11_0x5849('0x1d')][a11_0x5849('0x18')]=_0x5bf286;return responseUtils[a11_0x5849('0x21')](_0x7cf26b,_0x28e4ab,0xc8);})['catch'](_0x50b2a9=>{return responseUtils['errorResponse'](_0x7cf26b,_0x50b2a9[a11_0x5849('0x1a')],0x1f4);});}})[a11_0x5849('0x22')](_0x18f866=>{return responseUtils[a11_0x5849('0x14')](_0x7cf26b,_0x18f866[a11_0x5849('0x1a')],0x1f4);});}}exports[a11_0x5849('0x23')]=AuthenticationController;