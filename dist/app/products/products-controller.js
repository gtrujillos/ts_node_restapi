var a109_0x305b=['bind','getImagesTotal','log','errorResponse','authentication\x20failed','getInstance','filesController','saveFile','then','encryptId','data','fields','product_id','fileResult\x20req.body','body','save','file_id','successResponse','catch','stack','params','decryptId','req.params','public','shared','orderBy','updated_at','attributes','filesModel','title','name','is_private','find','DESC','productFilesController','__importDefault','__esModule','../../infrastructure/base-controller','../shared/models/crudOptions','../models','../../infrastructure/sequelize-utils','default','saveImage','getImages'];(function(_0x5af27f,_0x92fab3){var _0x28dd62=function(_0x5a4ff9){while(--_0x5a4ff9){_0x5af27f['push'](_0x5af27f['shift']());}};_0x28dd62(++_0x92fab3);}(a109_0x305b,0x1db));var a109_0x2a46=function(_0x1d4910,_0x162bff){_0x1d4910=_0x1d4910-0x0;var _0x1a653b=a109_0x305b[_0x1d4910];return _0x1a653b;};'use strict';var __importDefault=this&&this[a109_0x2a46('0x0')]||function(_0x160f7c){return _0x160f7c&&_0x160f7c[a109_0x2a46('0x1')]?_0x160f7c:{'default':_0x160f7c};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const base_controller_1=__importDefault(require(a109_0x2a46('0x2')));const crudOptions_1=__importDefault(require(a109_0x2a46('0x3')));const models_1=__importDefault(require(a109_0x2a46('0x4')));const controllers_1=__importDefault(require('../controllers'));const sequelize_utils_1=__importDefault(require(a109_0x2a46('0x5')));const fsExtra=require('fs-extra');const formidable=require('formidable');const responseUtils=require('../../infrastructure/response-utils');class ProductsController extends base_controller_1[a109_0x2a46('0x6')]{constructor(_0x1413ae){super(_0x1413ae,null);this[a109_0x2a46('0x7')]=this[a109_0x2a46('0x7')]['bind'](this);this[a109_0x2a46('0x8')]=this[a109_0x2a46('0x8')][a109_0x2a46('0x9')](this);this[a109_0x2a46('0xa')]=this['getImagesTotal'][a109_0x2a46('0x9')](this);}[a109_0x2a46('0x7')](_0x561b7f,_0x4b5d4f,_0x3ec1d4){console[a109_0x2a46('0xb')](a109_0x2a46('0x7'));if(!_0x561b7f['user']){return responseUtils[a109_0x2a46('0xc')](_0x561b7f,_0x4b5d4f,a109_0x2a46('0xd'),0x191);}controllers_1[a109_0x2a46('0x6')][a109_0x2a46('0xe')]()[a109_0x2a46('0xf')][a109_0x2a46('0x10')](_0x561b7f,null,null)[a109_0x2a46('0x11')](_0x3ece70=>{_0x561b7f['body']={'file_id':sequelize_utils_1[a109_0x2a46('0x6')][a109_0x2a46('0x12')](_0x3ece70[a109_0x2a46('0x13')]['id']),'product_id':_0x3ece70[a109_0x2a46('0x14')][a109_0x2a46('0x15')]};console['log'](a109_0x2a46('0x16'),_0x561b7f[a109_0x2a46('0x17')]);controllers_1['default'][a109_0x2a46('0xe')]()['productFilesController'][a109_0x2a46('0x18')](_0x561b7f,null,null)[a109_0x2a46('0x11')](_0x225fea=>{const _0xde60c5={'file_id':sequelize_utils_1[a109_0x2a46('0x6')][a109_0x2a46('0x12')](_0x225fea[a109_0x2a46('0x19')])};responseUtils[a109_0x2a46('0x1a')](_0x561b7f,_0x4b5d4f,_0xde60c5,0xc8);})[a109_0x2a46('0x1b')](_0x10d570=>{return responseUtils[a109_0x2a46('0xc')](_0x561b7f,_0x4b5d4f,_0x10d570[a109_0x2a46('0x1c')],0x1f4);});},_0x17c971=>{return responseUtils['errorResponse'](_0x561b7f,_0x4b5d4f,_0x17c971,0x1f4);});}[a109_0x2a46('0x8')](_0x6cea6,_0x6d0747,_0x25cca7){_0x6cea6[a109_0x2a46('0x1d')]=sequelize_utils_1[a109_0x2a46('0x6')][a109_0x2a46('0x1e')](_0x6cea6['params']);console[a109_0x2a46('0xb')](a109_0x2a46('0x1f'),_0x6cea6['params']);const _0x35fbc4=new crudOptions_1[(a109_0x2a46('0x6'))]();_0x35fbc4[a109_0x2a46('0x20')]=!![];_0x35fbc4[a109_0x2a46('0x21')]=!![];_0x35fbc4[a109_0x2a46('0x22')]=[[a109_0x2a46('0x23'),'DESC']];_0x35fbc4[a109_0x2a46('0x24')]=['id',a109_0x2a46('0x19')];_0x35fbc4['include']=[{'model':models_1['default']['getInstance']()[a109_0x2a46('0x25')],'attributes':[a109_0x2a46('0x26'),a109_0x2a46('0x27'),'type',a109_0x2a46('0x28')]}];return controllers_1[a109_0x2a46('0x6')][a109_0x2a46('0xe')]()['productFilesController'][a109_0x2a46('0x29')](_0x6cea6,_0x6d0747,_0x25cca7,_0x35fbc4);}[a109_0x2a46('0xa')](_0x240307,_0x48115d,_0x1d2dac){_0x240307[a109_0x2a46('0x1d')]=sequelize_utils_1[a109_0x2a46('0x6')][a109_0x2a46('0x1e')](_0x240307[a109_0x2a46('0x1d')]);console[a109_0x2a46('0xb')](a109_0x2a46('0x1f'),_0x240307['params']);const _0x32d611=new crudOptions_1[(a109_0x2a46('0x6'))]();_0x32d611[a109_0x2a46('0x20')]=!![];_0x32d611['shared']=!![];_0x32d611['orderBy']=[[a109_0x2a46('0x23'),a109_0x2a46('0x2a')]];_0x32d611[a109_0x2a46('0x24')]=['id',a109_0x2a46('0x19')];_0x32d611['include']=[{'model':models_1[a109_0x2a46('0x6')][a109_0x2a46('0xe')]()[a109_0x2a46('0x25')],'attributes':[a109_0x2a46('0x26'),a109_0x2a46('0x27'),'type',a109_0x2a46('0x28')]}];return controllers_1['default']['getInstance']()[a109_0x2a46('0x2b')]['count'](_0x240307,_0x48115d,_0x1d2dac,_0x32d611);}}exports[a109_0x2a46('0x6')]=ProductsController;