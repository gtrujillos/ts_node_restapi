var a109_0x15b9=['count','__importDefault','defineProperty','../../infrastructure/base-controller','../shared/models/crudOptions','../controllers','../../infrastructure/sequelize-utils','fs-extra','formidable','../../infrastructure/response-utils','saveImage','bind','getImagesTotal','log','user','errorResponse','authentication\x20failed','default','getInstance','filesController','saveFile','body','encryptId','data','fields','fileResult\x20req.body','save','then','file_id','successResponse','catch','stack','getImages','params','req.params','public','updated_at','DESC','attributes','include','title','name','type','is_private','productFilesController','decryptId','shared'];(function(_0x3874ca,_0x48024c){var _0x468677=function(_0x41019c){while(--_0x41019c){_0x3874ca['push'](_0x3874ca['shift']());}};_0x468677(++_0x48024c);}(a109_0x15b9,0xec));var a109_0x5b27=function(_0x1fd579,_0x3b60c7){_0x1fd579=_0x1fd579-0x0;var _0x433aa8=a109_0x15b9[_0x1fd579];return _0x433aa8;};'use strict';var __importDefault=this&&this[a109_0x5b27('0x0')]||function(_0x3c53d2){return _0x3c53d2&&_0x3c53d2['__esModule']?_0x3c53d2:{'default':_0x3c53d2};};Object[a109_0x5b27('0x1')](exports,'__esModule',{'value':!![]});const base_controller_1=__importDefault(require(a109_0x5b27('0x2')));const crudOptions_1=__importDefault(require(a109_0x5b27('0x3')));const models_1=__importDefault(require('../models'));const controllers_1=__importDefault(require(a109_0x5b27('0x4')));const sequelize_utils_1=__importDefault(require(a109_0x5b27('0x5')));const fsExtra=require(a109_0x5b27('0x6'));const formidable=require(a109_0x5b27('0x7'));const responseUtils=require(a109_0x5b27('0x8'));class ProductsController extends base_controller_1['default']{constructor(_0x1dbbb7){super(_0x1dbbb7,null);this[a109_0x5b27('0x9')]=this[a109_0x5b27('0x9')][a109_0x5b27('0xa')](this);this['getImages']=this['getImages'][a109_0x5b27('0xa')](this);this[a109_0x5b27('0xb')]=this[a109_0x5b27('0xb')][a109_0x5b27('0xa')](this);}[a109_0x5b27('0x9')](_0x3730e4,_0xe0ea84,_0x3c8138){console[a109_0x5b27('0xc')](a109_0x5b27('0x9'));if(!_0x3730e4[a109_0x5b27('0xd')]){return responseUtils[a109_0x5b27('0xe')](_0x3730e4,_0xe0ea84,a109_0x5b27('0xf'),0x191);}controllers_1[a109_0x5b27('0x10')][a109_0x5b27('0x11')]()[a109_0x5b27('0x12')][a109_0x5b27('0x13')](_0x3730e4,null,null)['then'](_0x54eb68=>{_0x3730e4[a109_0x5b27('0x14')]={'file_id':sequelize_utils_1[a109_0x5b27('0x10')][a109_0x5b27('0x15')](_0x54eb68[a109_0x5b27('0x16')]['id']),'product_id':_0x54eb68[a109_0x5b27('0x17')]['product_id']};console[a109_0x5b27('0xc')](a109_0x5b27('0x18'),_0x3730e4[a109_0x5b27('0x14')]);controllers_1[a109_0x5b27('0x10')][a109_0x5b27('0x11')]()['productFilesController'][a109_0x5b27('0x19')](_0x3730e4,null,null)[a109_0x5b27('0x1a')](_0x3681ab=>{const _0x25e84f={'file_id':sequelize_utils_1[a109_0x5b27('0x10')][a109_0x5b27('0x15')](_0x3681ab[a109_0x5b27('0x1b')])};responseUtils[a109_0x5b27('0x1c')](_0x3730e4,_0xe0ea84,_0x25e84f,0xc8);})[a109_0x5b27('0x1d')](_0x190b09=>{return responseUtils['errorResponse'](_0x3730e4,_0xe0ea84,_0x190b09[a109_0x5b27('0x1e')],0x1f4);});},_0x442464=>{return responseUtils[a109_0x5b27('0xe')](_0x3730e4,_0xe0ea84,_0x442464,0x1f4);});}[a109_0x5b27('0x1f')](_0x3da993,_0x184106,_0x39df76){_0x3da993['params']=sequelize_utils_1[a109_0x5b27('0x10')]['decryptId'](_0x3da993[a109_0x5b27('0x20')]);console['log'](a109_0x5b27('0x21'),_0x3da993[a109_0x5b27('0x20')]);const _0x3e25a0=new crudOptions_1[(a109_0x5b27('0x10'))]();_0x3e25a0[a109_0x5b27('0x22')]=!![];_0x3e25a0['shared']=!![];_0x3e25a0['orderBy']=[[a109_0x5b27('0x23'),a109_0x5b27('0x24')]];_0x3e25a0[a109_0x5b27('0x25')]=['id',a109_0x5b27('0x1b')];_0x3e25a0[a109_0x5b27('0x26')]=[{'model':models_1[a109_0x5b27('0x10')][a109_0x5b27('0x11')]()['filesModel'],'attributes':[a109_0x5b27('0x27'),a109_0x5b27('0x28'),a109_0x5b27('0x29'),a109_0x5b27('0x2a')]}];return controllers_1['default'][a109_0x5b27('0x11')]()[a109_0x5b27('0x2b')]['find'](_0x3da993,_0x184106,_0x39df76,_0x3e25a0);}['getImagesTotal'](_0x5d771c,_0x4bd649,_0x3d608f){_0x5d771c[a109_0x5b27('0x20')]=sequelize_utils_1[a109_0x5b27('0x10')][a109_0x5b27('0x2c')](_0x5d771c[a109_0x5b27('0x20')]);console['log']('req.params',_0x5d771c[a109_0x5b27('0x20')]);const _0x22e1b2=new crudOptions_1[(a109_0x5b27('0x10'))]();_0x22e1b2[a109_0x5b27('0x22')]=!![];_0x22e1b2[a109_0x5b27('0x2d')]=!![];_0x22e1b2['orderBy']=[[a109_0x5b27('0x23'),a109_0x5b27('0x24')]];_0x22e1b2[a109_0x5b27('0x25')]=['id',a109_0x5b27('0x1b')];_0x22e1b2[a109_0x5b27('0x26')]=[{'model':models_1[a109_0x5b27('0x10')]['getInstance']()['filesModel'],'attributes':[a109_0x5b27('0x27'),'name','type',a109_0x5b27('0x2a')]}];return controllers_1[a109_0x5b27('0x10')][a109_0x5b27('0x11')]()[a109_0x5b27('0x2b')][a109_0x5b27('0x2e')](_0x5d771c,_0x4bd649,_0x3d608f,_0x22e1b2);}}exports[a109_0x5b27('0x10')]=ProductsController;