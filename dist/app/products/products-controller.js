var a118_0x5134=['productFilesController','save','file_id','successResponse','catch','stack','params','decryptId','shared','orderBy','updated_at','DESC','attributes','filesModel','title','name','type','req.params','include','is_private','count','public','find','activityProductsController','__importDefault','__esModule','defineProperty','../../infrastructure/base-controller','../shared/models/crudOptions','../models','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','bind','getImages','getImagesTotal','getActivities','getActivitiesTotal','saveImage','log','user','errorResponse','getInstance','saveFile','then','saveImage\x20fileResult:','body','encryptId','data','fields','product_id'];(function(_0x42e145,_0x178a10){var _0x2abb92=function(_0x59826d){while(--_0x59826d){_0x42e145['push'](_0x42e145['shift']());}};_0x2abb92(++_0x178a10);}(a118_0x5134,0x117));var a118_0x3e87=function(_0x44a7e5,_0xc6406){_0x44a7e5=_0x44a7e5-0x0;var _0x5e3c4a=a118_0x5134[_0x44a7e5];return _0x5e3c4a;};'use strict';var __importDefault=this&&this[a118_0x3e87('0x0')]||function(_0xb01e35){return _0xb01e35&&_0xb01e35[a118_0x3e87('0x1')]?_0xb01e35:{'default':_0xb01e35};};Object[a118_0x3e87('0x2')](exports,'__esModule',{'value':!![]});const base_controller_1=__importDefault(require(a118_0x3e87('0x3')));const crudOptions_1=__importDefault(require(a118_0x3e87('0x4')));const models_1=__importDefault(require(a118_0x3e87('0x5')));const controllers_1=__importDefault(require('../controllers'));const sequelize_utils_1=__importDefault(require(a118_0x3e87('0x6')));const fsExtra=require('fs-extra');const formidable=require('formidable');const responseUtils=require(a118_0x3e87('0x7'));class ProductsController extends base_controller_1[a118_0x3e87('0x8')]{constructor(_0x5431bd){super(_0x5431bd,null);this['saveImage']=this['saveImage'][a118_0x3e87('0x9')](this);this[a118_0x3e87('0xa')]=this['getImages']['bind'](this);this[a118_0x3e87('0xb')]=this[a118_0x3e87('0xb')][a118_0x3e87('0x9')](this);this[a118_0x3e87('0xc')]=this[a118_0x3e87('0xc')][a118_0x3e87('0x9')](this);this[a118_0x3e87('0xd')]=this[a118_0x3e87('0xd')][a118_0x3e87('0x9')](this);}[a118_0x3e87('0xe')](_0x4ca649,_0x42d387,_0x4a0b2d){console[a118_0x3e87('0xf')]('saveImage');if(!_0x4ca649[a118_0x3e87('0x10')]){return responseUtils[a118_0x3e87('0x11')](_0x4ca649,_0x42d387,'authentication\x20failed',0x191);}controllers_1['default'][a118_0x3e87('0x12')]()['filesController'][a118_0x3e87('0x13')](_0x4ca649,null,null)[a118_0x3e87('0x14')](_0x1145a8=>{console[a118_0x3e87('0xf')](a118_0x3e87('0x15'),_0x1145a8);_0x4ca649[a118_0x3e87('0x16')]={'file_id':sequelize_utils_1['default'][a118_0x3e87('0x17')](_0x1145a8[a118_0x3e87('0x18')]['id']),'product_id':_0x1145a8[a118_0x3e87('0x19')][a118_0x3e87('0x1a')]};console[a118_0x3e87('0xf')]('fileResult\x20req.body',_0x4ca649[a118_0x3e87('0x16')]);controllers_1['default'][a118_0x3e87('0x12')]()[a118_0x3e87('0x1b')][a118_0x3e87('0x1c')](_0x4ca649,null,null)['then'](_0xcb211=>{const _0x2ddebf={'file_id':sequelize_utils_1[a118_0x3e87('0x8')][a118_0x3e87('0x17')](_0xcb211[a118_0x3e87('0x1d')])};responseUtils[a118_0x3e87('0x1e')](_0x4ca649,_0x42d387,_0x2ddebf,0xc8);})[a118_0x3e87('0x1f')](_0x40662c=>{return responseUtils['errorResponse'](_0x4ca649,_0x42d387,_0x40662c[a118_0x3e87('0x20')],0x1f4);});},_0x30095a=>{return responseUtils[a118_0x3e87('0x11')](_0x4ca649,_0x42d387,_0x30095a,0x1f4);});}['getImages'](_0x1419db,_0x145312,_0x48ec0f){_0x1419db[a118_0x3e87('0x21')]=sequelize_utils_1['default'][a118_0x3e87('0x22')](_0x1419db[a118_0x3e87('0x21')]);const _0x4af39b=new crudOptions_1[(a118_0x3e87('0x8'))]();_0x4af39b['public']=!![];_0x4af39b[a118_0x3e87('0x23')]=!![];_0x4af39b[a118_0x3e87('0x24')]=[[a118_0x3e87('0x25'),a118_0x3e87('0x26')]];_0x4af39b[a118_0x3e87('0x27')]=[a118_0x3e87('0x1d')];_0x4af39b['include']=[{'model':models_1['default'][a118_0x3e87('0x12')]()[a118_0x3e87('0x28')],'attributes':[a118_0x3e87('0x29'),a118_0x3e87('0x2a'),a118_0x3e87('0x2b'),'is_private']}];return controllers_1['default']['getInstance']()[a118_0x3e87('0x1b')]['find'](_0x1419db,_0x145312,_0x48ec0f,_0x4af39b);}[a118_0x3e87('0xb')](_0x356aec,_0x584c60,_0x5380a6){_0x356aec[a118_0x3e87('0x21')]=sequelize_utils_1[a118_0x3e87('0x8')][a118_0x3e87('0x22')](_0x356aec['params']);console[a118_0x3e87('0xf')](a118_0x3e87('0x2c'),_0x356aec[a118_0x3e87('0x21')]);const _0x2cc227=new crudOptions_1[(a118_0x3e87('0x8'))]();_0x2cc227['public']=!![];_0x2cc227[a118_0x3e87('0x23')]=!![];_0x2cc227[a118_0x3e87('0x24')]=[['updated_at','DESC']];_0x2cc227[a118_0x3e87('0x27')]=['id',a118_0x3e87('0x1d')];_0x2cc227[a118_0x3e87('0x2d')]=[{'model':models_1[a118_0x3e87('0x8')][a118_0x3e87('0x12')]()[a118_0x3e87('0x28')],'attributes':[a118_0x3e87('0x29'),a118_0x3e87('0x2a'),a118_0x3e87('0x2b'),a118_0x3e87('0x2e')]}];return controllers_1[a118_0x3e87('0x8')][a118_0x3e87('0x12')]()[a118_0x3e87('0x1b')][a118_0x3e87('0x2f')](_0x356aec,_0x584c60,_0x5380a6,_0x2cc227);}['getActivities'](_0x67d356,_0xcb7c6a,_0x5cce93){_0x67d356['params']=sequelize_utils_1[a118_0x3e87('0x8')][a118_0x3e87('0x22')](_0x67d356[a118_0x3e87('0x21')]);const _0x46feb8=new crudOptions_1['default']();_0x46feb8[a118_0x3e87('0x30')]=!![];_0x46feb8[a118_0x3e87('0x23')]=!![];_0x46feb8[a118_0x3e87('0x24')]=[['updated_at',a118_0x3e87('0x26')]];_0x46feb8['attributes']=['activity_id'];_0x46feb8[a118_0x3e87('0x2d')]=[{'model':models_1['default'][a118_0x3e87('0x12')]()['activitiesModel']}];return controllers_1['default']['getInstance']()['activityProductsController'][a118_0x3e87('0x31')](_0x67d356,_0xcb7c6a,_0x5cce93,_0x46feb8);}[a118_0x3e87('0xd')](_0x3a8a22,_0x23e692,_0x1c465f){_0x3a8a22[a118_0x3e87('0x21')]=sequelize_utils_1['default']['decryptId'](_0x3a8a22[a118_0x3e87('0x21')]);console[a118_0x3e87('0xf')]('getActivitiesTotal\x20req.params',_0x3a8a22[a118_0x3e87('0x21')]);const _0x51efdd=new crudOptions_1[(a118_0x3e87('0x8'))]();_0x51efdd[a118_0x3e87('0x30')]=!![];_0x51efdd['shared']=!![];return controllers_1[a118_0x3e87('0x8')]['getInstance']()[a118_0x3e87('0x32')][a118_0x3e87('0x2f')](_0x3a8a22,_0x23e692,_0x1c465f,_0x51efdd);}}exports[a118_0x3e87('0x8')]=ProductsController;