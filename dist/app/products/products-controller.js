var a109_0x2b84=['catch','stack','params','decryptId','req.params','public','orderBy','DESC','attributes','file_id','include','title','name','is_private','find','shared','updated_at','filesModel','productFilesController','count','__importDefault','__esModule','defineProperty','../../infrastructure/base-controller','../shared/models/crudOptions','../models','../controllers','../../infrastructure/sequelize-utils','formidable','../../infrastructure/response-utils','bind','getImages','getImagesTotal','saveImage','log','user','errorResponse','authentication\x20failed','default','getInstance','filesController','saveFile','then','body','encryptId','data','product_id','fileResult\x20req.body','save','successResponse'];(function(_0x9b9d65,_0x4f74a2){var _0x1c910d=function(_0x5da562){while(--_0x5da562){_0x9b9d65['push'](_0x9b9d65['shift']());}};_0x1c910d(++_0x4f74a2);}(a109_0x2b84,0x1d6));var a109_0x2abe=function(_0x569093,_0x58fcdd){_0x569093=_0x569093-0x0;var _0xc251c9=a109_0x2b84[_0x569093];return _0xc251c9;};'use strict';var __importDefault=this&&this[a109_0x2abe('0x0')]||function(_0xe17d59){return _0xe17d59&&_0xe17d59[a109_0x2abe('0x1')]?_0xe17d59:{'default':_0xe17d59};};Object[a109_0x2abe('0x2')](exports,a109_0x2abe('0x1'),{'value':!![]});const base_controller_1=__importDefault(require(a109_0x2abe('0x3')));const crudOptions_1=__importDefault(require(a109_0x2abe('0x4')));const models_1=__importDefault(require(a109_0x2abe('0x5')));const controllers_1=__importDefault(require(a109_0x2abe('0x6')));const sequelize_utils_1=__importDefault(require(a109_0x2abe('0x7')));const fsExtra=require('fs-extra');const formidable=require(a109_0x2abe('0x8'));const responseUtils=require(a109_0x2abe('0x9'));class ProductsController extends base_controller_1['default']{constructor(_0x21839c){super(_0x21839c,null);this['saveImage']=this['saveImage'][a109_0x2abe('0xa')](this);this[a109_0x2abe('0xb')]=this['getImages'][a109_0x2abe('0xa')](this);this[a109_0x2abe('0xc')]=this[a109_0x2abe('0xc')][a109_0x2abe('0xa')](this);}[a109_0x2abe('0xd')](_0xe72680,_0x2e5497,_0x336b6d){console[a109_0x2abe('0xe')]('saveImage');if(!_0xe72680[a109_0x2abe('0xf')]){return responseUtils[a109_0x2abe('0x10')](_0xe72680,_0x2e5497,a109_0x2abe('0x11'),0x191);}controllers_1[a109_0x2abe('0x12')][a109_0x2abe('0x13')]()[a109_0x2abe('0x14')][a109_0x2abe('0x15')](_0xe72680,null,null)[a109_0x2abe('0x16')](_0x73f911=>{_0xe72680[a109_0x2abe('0x17')]={'file_id':sequelize_utils_1['default'][a109_0x2abe('0x18')](_0x73f911[a109_0x2abe('0x19')]['id']),'product_id':_0x73f911['fields'][a109_0x2abe('0x1a')]};console[a109_0x2abe('0xe')](a109_0x2abe('0x1b'),_0xe72680[a109_0x2abe('0x17')]);controllers_1[a109_0x2abe('0x12')][a109_0x2abe('0x13')]()['productFilesController'][a109_0x2abe('0x1c')](_0xe72680,null,null)[a109_0x2abe('0x16')](_0x4ad3fc=>{const _0x33ffac={'file_id':sequelize_utils_1[a109_0x2abe('0x12')][a109_0x2abe('0x18')](_0x4ad3fc['file_id'])};responseUtils[a109_0x2abe('0x1d')](_0xe72680,_0x2e5497,_0x33ffac,0xc8);})[a109_0x2abe('0x1e')](_0x1ed3e5=>{return responseUtils[a109_0x2abe('0x10')](_0xe72680,_0x2e5497,_0x1ed3e5[a109_0x2abe('0x1f')],0x1f4);});},_0x261b7e=>{return responseUtils[a109_0x2abe('0x10')](_0xe72680,_0x2e5497,_0x261b7e,0x1f4);});}[a109_0x2abe('0xb')](_0xe61a32,_0x4bff1c,_0x908962){_0xe61a32[a109_0x2abe('0x20')]=sequelize_utils_1[a109_0x2abe('0x12')][a109_0x2abe('0x21')](_0xe61a32['params']);console[a109_0x2abe('0xe')](a109_0x2abe('0x22'),_0xe61a32['params']);const _0x187e57=new crudOptions_1[(a109_0x2abe('0x12'))]();_0x187e57[a109_0x2abe('0x23')]=!![];_0x187e57['shared']=!![];_0x187e57[a109_0x2abe('0x24')]=[['updated_at',a109_0x2abe('0x25')]];_0x187e57[a109_0x2abe('0x26')]=['id',a109_0x2abe('0x27')];_0x187e57[a109_0x2abe('0x28')]=[{'model':models_1[a109_0x2abe('0x12')][a109_0x2abe('0x13')]()['filesModel'],'attributes':[a109_0x2abe('0x29'),a109_0x2abe('0x2a'),'type',a109_0x2abe('0x2b')]}];return controllers_1['default']['getInstance']()['productFilesController'][a109_0x2abe('0x2c')](_0xe61a32,_0x4bff1c,_0x908962,_0x187e57);}['getImagesTotal'](_0x6dc7b5,_0x55d3ac,_0x20d0be){_0x6dc7b5[a109_0x2abe('0x20')]=sequelize_utils_1[a109_0x2abe('0x12')][a109_0x2abe('0x21')](_0x6dc7b5[a109_0x2abe('0x20')]);console[a109_0x2abe('0xe')](a109_0x2abe('0x22'),_0x6dc7b5[a109_0x2abe('0x20')]);const _0x47cbce=new crudOptions_1[(a109_0x2abe('0x12'))]();_0x47cbce['public']=!![];_0x47cbce[a109_0x2abe('0x2d')]=!![];_0x47cbce[a109_0x2abe('0x24')]=[[a109_0x2abe('0x2e'),a109_0x2abe('0x25')]];_0x47cbce[a109_0x2abe('0x26')]=['id',a109_0x2abe('0x27')];_0x47cbce[a109_0x2abe('0x28')]=[{'model':models_1['default'][a109_0x2abe('0x13')]()[a109_0x2abe('0x2f')],'attributes':['title',a109_0x2abe('0x2a'),'type',a109_0x2abe('0x2b')]}];return controllers_1[a109_0x2abe('0x12')][a109_0x2abe('0x13')]()[a109_0x2abe('0x30')][a109_0x2abe('0x31')](_0x6dc7b5,_0x55d3ac,_0x20d0be,_0x47cbce);}}exports['default']=ProductsController;