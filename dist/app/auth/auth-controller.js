var a9_0x2478=['usernameTakenError','generateHash','create','successResponse','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../resources/locale-strings','model','login','bind','createAccount','findOne','body','username','last_name','email','password','then','errorResponse','usernameNotFoundError','toJSON','secret','passwordNotMatchError','catch','stack'];(function(_0x3cf5ef,_0x3ead4d){var _0xc33d7f=function(_0xdb1291){while(--_0xdb1291){_0x3cf5ef['push'](_0x3cf5ef['shift']());}};_0xc33d7f(++_0x3ead4d);}(a9_0x2478,0xe4));var a9_0x43cf=function(_0x1c6df9,_0x278e57){_0x1c6df9=_0x1c6df9-0x0;var _0x514ad5=a9_0x2478[_0x1c6df9];return _0x514ad5;};'use strict';Object['defineProperty'](exports,a9_0x43cf('0x0'),{'value':!![]});const jwt=require(a9_0x43cf('0x1'));const i18n=require(a9_0x43cf('0x2'));const configJwt=require(a9_0x43cf('0x3'));const authUtils=require(a9_0x43cf('0x4'));const responseUtils=require('../../infrastructure/response-utils');const LocaleStrings=require(a9_0x43cf('0x5'));class AuthConstroller{constructor(_0x1bb3ab){this[a9_0x43cf('0x6')]=_0x1bb3ab;this[a9_0x43cf('0x7')]=this[a9_0x43cf('0x7')][a9_0x43cf('0x8')](this);this['createAccount']=this[a9_0x43cf('0x9')]['bind'](this);}[a9_0x43cf('0x7')](_0x59f9b6,_0x3d135c,_0x233dc1){this[a9_0x43cf('0x6')][a9_0x43cf('0xa')]({'where':{'username':_0x59f9b6[a9_0x43cf('0xb')][a9_0x43cf('0xc')]},'attributes':['id','first_name',a9_0x43cf('0xd'),a9_0x43cf('0xe'),a9_0x43cf('0xc'),a9_0x43cf('0xf')]})[a9_0x43cf('0x10')](_0x7b1c44=>{if(!_0x7b1c44){return responseUtils[a9_0x43cf('0x11')](_0x3d135c,LocaleStrings[a9_0x43cf('0x12')],0x193);}if(authUtils['validPassword'](_0x59f9b6[a9_0x43cf('0xb')][a9_0x43cf('0xf')],_0x7b1c44[a9_0x43cf('0xf')])){_0x7b1c44=_0x7b1c44[a9_0x43cf('0x13')]();const _0x3ec47b={'id':_0x7b1c44['id']};const _0x496e8b=jwt['sign'](_0x3ec47b,configJwt[a9_0x43cf('0x14')]);delete _0x7b1c44[a9_0x43cf('0xf')];_0x7b1c44['token']=_0x496e8b;return responseUtils['successResponse'](_0x3d135c,_0x7b1c44,0xc8);}else{return responseUtils['errorResponse'](_0x3d135c,_0x3d135c['__'](LocaleStrings[a9_0x43cf('0x15')]),0x193);}})[a9_0x43cf('0x16')](_0x4fcfe9=>{return responseUtils[a9_0x43cf('0x11')](_0x3d135c,_0x4fcfe9[a9_0x43cf('0x17')],0x1f4);});}['createAccount'](_0x2fcd89,_0x16af4f,_0x59cd84){this[a9_0x43cf('0x6')][a9_0x43cf('0xa')]({'where':{'username':_0x2fcd89['body'][a9_0x43cf('0xc')]}})[a9_0x43cf('0x10')](function(_0x420ad5){if(_0x420ad5){return responseUtils['errorResponse'](_0x16af4f,_0x16af4f['__'](LocaleStrings[a9_0x43cf('0x18')],_0x2fcd89[a9_0x43cf('0xb')][a9_0x43cf('0xc')]),0x193);}else{_0x2fcd89['body'][a9_0x43cf('0xe')]=_0x2fcd89[a9_0x43cf('0xb')][a9_0x43cf('0xc')];const _0xc529b8={'username':_0x2fcd89[a9_0x43cf('0xb')][a9_0x43cf('0xc')],'password':authUtils[a9_0x43cf('0x19')](_0x2fcd89['body']['password'])};this[a9_0x43cf('0x6')][a9_0x43cf('0x1a')](_0xc529b8)[a9_0x43cf('0x10')](function(_0xa3ab81,_0x2d1dd8){return responseUtils[a9_0x43cf('0x1b')](_0x16af4f,_0xa3ab81,0xc8);})[a9_0x43cf('0x16')](_0x60826a=>{return responseUtils[a9_0x43cf('0x11')](_0x16af4f,_0x60826a[a9_0x43cf('0x17')],0x1f4);});}})[a9_0x43cf('0x16')](_0x5432a0=>{return responseUtils[a9_0x43cf('0x11')](_0x16af4f,_0x5432a0[a9_0x43cf('0x17')],0x1f4);});}}exports['default']=AuthConstroller;