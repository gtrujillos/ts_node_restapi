var a9_0x42d8=['../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','createAccount','bind','body','username','first_name','last_name','password','errorResponse','toJSON','sign','secret','token','successResponse','passwordNotMatchError','catch','stack','findOne','then','usernameTakenError','email','create','default','defineProperty','__esModule','i18n','../../config/jwt.js'];(function(_0x2fbeca,_0x302170){var _0x1ae02f=function(_0x1066ee){while(--_0x1066ee){_0x2fbeca['push'](_0x2fbeca['shift']());}};_0x1ae02f(++_0x302170);}(a9_0x42d8,0x18f));var a9_0x4c9e=function(_0x41903e,_0x3556ee){_0x41903e=_0x41903e-0x0;var _0x484d9a=a9_0x42d8[_0x41903e];return _0x484d9a;};'use strict';Object[a9_0x4c9e('0x0')](exports,a9_0x4c9e('0x1'),{'value':!![]});const jwt=require('jsonwebtoken');const i18n=require(a9_0x4c9e('0x2'));const configJwt=require(a9_0x4c9e('0x3'));const authUtils=require(a9_0x4c9e('0x4'));const responseUtils=require(a9_0x4c9e('0x5'));const LocaleStrings=require(a9_0x4c9e('0x6'));class AuthConstroller{constructor(_0x5f4693){this[a9_0x4c9e('0x7')]=_0x5f4693;this[a9_0x4c9e('0x8')]=this[a9_0x4c9e('0x8')]['bind'](this);this[a9_0x4c9e('0x9')]=this[a9_0x4c9e('0x9')][a9_0x4c9e('0xa')](this);}[a9_0x4c9e('0x8')](_0x535e00,_0x15bf45,_0x427cc3){this[a9_0x4c9e('0x7')]['findOne']({'where':{'username':_0x535e00[a9_0x4c9e('0xb')][a9_0x4c9e('0xc')]},'attributes':['id',a9_0x4c9e('0xd'),a9_0x4c9e('0xe'),'email',a9_0x4c9e('0xc'),a9_0x4c9e('0xf')]})['then'](_0x33391c=>{if(!_0x33391c){return responseUtils[a9_0x4c9e('0x10')](_0x15bf45,LocaleStrings['usernameNotFoundError'],0x193);}if(authUtils['validPassword'](_0x535e00[a9_0x4c9e('0xb')][a9_0x4c9e('0xf')],_0x33391c['password'])){_0x33391c=_0x33391c[a9_0x4c9e('0x11')]();const _0x379b8a={'id':_0x33391c['id']};const _0x44fca7=jwt[a9_0x4c9e('0x12')](_0x379b8a,configJwt[a9_0x4c9e('0x13')]);delete _0x33391c[a9_0x4c9e('0xf')];_0x33391c[a9_0x4c9e('0x14')]=_0x44fca7;return responseUtils[a9_0x4c9e('0x15')](_0x15bf45,_0x33391c,0xc8);}else{return responseUtils[a9_0x4c9e('0x10')](_0x15bf45,_0x15bf45['__'](LocaleStrings[a9_0x4c9e('0x16')]),0x193);}})[a9_0x4c9e('0x17')](_0x4f2abf=>{return responseUtils[a9_0x4c9e('0x10')](_0x15bf45,_0x4f2abf[a9_0x4c9e('0x18')],0x1f4);});}[a9_0x4c9e('0x9')](_0x2f6584,_0x3ddd12,_0x41bd42){this[a9_0x4c9e('0x7')][a9_0x4c9e('0x19')]({'where':{'username':_0x2f6584[a9_0x4c9e('0xb')]['username']}})[a9_0x4c9e('0x1a')](function(_0x36f162){if(_0x36f162){return responseUtils[a9_0x4c9e('0x10')](_0x3ddd12,_0x3ddd12['__'](LocaleStrings[a9_0x4c9e('0x1b')],_0x2f6584[a9_0x4c9e('0xb')][a9_0x4c9e('0xc')]),0x193);}else{_0x2f6584['body'][a9_0x4c9e('0x1c')]=_0x2f6584[a9_0x4c9e('0xb')][a9_0x4c9e('0xc')];const _0x229dbb={'username':_0x2f6584['body'][a9_0x4c9e('0xc')],'password':authUtils['generateHash'](_0x2f6584[a9_0x4c9e('0xb')][a9_0x4c9e('0xf')])};this[a9_0x4c9e('0x7')][a9_0x4c9e('0x1d')](_0x229dbb)[a9_0x4c9e('0x1a')](function(_0xbf885f,_0x455f1b){return responseUtils[a9_0x4c9e('0x15')](_0x3ddd12,_0xbf885f,0xc8);})[a9_0x4c9e('0x17')](_0xd3866a=>{return responseUtils[a9_0x4c9e('0x10')](_0x3ddd12,_0xd3866a['stack'],0x1f4);});}})[a9_0x4c9e('0x17')](_0x33cfb5=>{return responseUtils[a9_0x4c9e('0x10')](_0x3ddd12,_0x33cfb5[a9_0x4c9e('0x18')],0x1f4);});}}exports[a9_0x4c9e('0x1e')]=AuthConstroller;