var a28_0x26f4=['then','errorResponse','usernameNotFoundError','validPassword','secret','token','successResponse','passwordNotMatchError','catch','stack','model','usernameTakenError','generateHash','create','default','defineProperty','jsonwebtoken','i18n','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','login','bind','createAccount','findOne','body','username','first_name','last_name','email','password'];(function(_0x2c4f21,_0x502568){var _0x107e82=function(_0x531155){while(--_0x531155){_0x2c4f21['push'](_0x2c4f21['shift']());}};_0x107e82(++_0x502568);}(a28_0x26f4,0x1c1));var a28_0x2ae3=function(_0x120796,_0x376e7b){_0x120796=_0x120796-0x0;var _0x314dc1=a28_0x26f4[_0x120796];return _0x314dc1;};'use strict';Object[a28_0x2ae3('0x0')](exports,'__esModule',{'value':!![]});const jwt=require(a28_0x2ae3('0x1'));const i18n=require(a28_0x2ae3('0x2'));const configJwt=require('../../config/jwt.js');const authUtils=require(a28_0x2ae3('0x3'));const responseUtils=require(a28_0x2ae3('0x4'));const LocaleStrings=require(a28_0x2ae3('0x5'));class AuthConstroller{constructor(_0x5e0c9d){this['model']=_0x5e0c9d;this[a28_0x2ae3('0x6')]=this[a28_0x2ae3('0x6')][a28_0x2ae3('0x7')](this);this['createAccount']=this[a28_0x2ae3('0x8')][a28_0x2ae3('0x7')](this);}[a28_0x2ae3('0x6')](_0x428ae7,_0x5c263e,_0x2aa368){this['model'][a28_0x2ae3('0x9')]({'where':{'username':_0x428ae7[a28_0x2ae3('0xa')][a28_0x2ae3('0xb')]},'attributes':['id',a28_0x2ae3('0xc'),a28_0x2ae3('0xd'),a28_0x2ae3('0xe'),a28_0x2ae3('0xb'),a28_0x2ae3('0xf')]})[a28_0x2ae3('0x10')](_0x5df117=>{if(!_0x5df117){return responseUtils[a28_0x2ae3('0x11')](_0x5c263e,LocaleStrings[a28_0x2ae3('0x12')],0x193);}if(authUtils[a28_0x2ae3('0x13')](_0x428ae7['body'][a28_0x2ae3('0xf')],_0x5df117['password'])){_0x5df117=_0x5df117['toJSON']();const _0x27eab0={'id':_0x5df117['id']};const _0x5e4911=jwt['sign'](_0x27eab0,configJwt[a28_0x2ae3('0x14')]);delete _0x5df117[a28_0x2ae3('0xf')];_0x5df117[a28_0x2ae3('0x15')]=_0x5e4911;return responseUtils[a28_0x2ae3('0x16')](_0x5c263e,_0x5df117,0xc8);}else{return responseUtils[a28_0x2ae3('0x11')](_0x5c263e,_0x5c263e['__'](LocaleStrings[a28_0x2ae3('0x17')]),0x193);}})[a28_0x2ae3('0x18')](_0x59d3f9=>{return responseUtils[a28_0x2ae3('0x11')](_0x5c263e,_0x59d3f9[a28_0x2ae3('0x19')],0x1f4);});}['createAccount'](_0x4c295a,_0x4c0445,_0x2fd135){this[a28_0x2ae3('0x1a')][a28_0x2ae3('0x9')]({'where':{'username':_0x4c295a[a28_0x2ae3('0xa')][a28_0x2ae3('0xb')]}})[a28_0x2ae3('0x10')](function(_0x412806){if(_0x412806){return responseUtils[a28_0x2ae3('0x11')](_0x4c0445,_0x4c0445['__'](LocaleStrings[a28_0x2ae3('0x1b')],_0x4c295a[a28_0x2ae3('0xa')][a28_0x2ae3('0xb')]),0x193);}else{_0x4c295a[a28_0x2ae3('0xa')][a28_0x2ae3('0xe')]=_0x4c295a[a28_0x2ae3('0xa')][a28_0x2ae3('0xb')];const _0x30d949={'username':_0x4c295a[a28_0x2ae3('0xa')][a28_0x2ae3('0xb')],'password':authUtils[a28_0x2ae3('0x1c')](_0x4c295a[a28_0x2ae3('0xa')]['password'])};this[a28_0x2ae3('0x1a')][a28_0x2ae3('0x1d')](_0x30d949)[a28_0x2ae3('0x10')](function(_0x13ba44,_0xe65912){return responseUtils[a28_0x2ae3('0x16')](_0x4c0445,_0x13ba44,0xc8);})[a28_0x2ae3('0x18')](_0x57d398=>{return responseUtils['errorResponse'](_0x4c0445,_0x57d398['stack'],0x1f4);});}})[a28_0x2ae3('0x18')](_0x51c9c9=>{return responseUtils[a28_0x2ae3('0x11')](_0x4c0445,_0x51c9c9[a28_0x2ae3('0x19')],0x1f4);});}}exports[a28_0x2ae3('0x1e')]=AuthConstroller;