var a9_0x13bf=['generateHash','default','defineProperty','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','bind','createAccount','findOne','body','username','last_name','email','then','usernameNotFoundError','validPassword','toJSON','sign','secret','token','successResponse','errorResponse','catch','stack'];(function(_0x4debee,_0x29bd21){var _0x14eeb5=function(_0x1f1554){while(--_0x1f1554){_0x4debee['push'](_0x4debee['shift']());}};_0x14eeb5(++_0x29bd21);}(a9_0x13bf,0xcd));var a9_0x3271=function(_0x2adafd,_0x21511d){_0x2adafd=_0x2adafd-0x0;var _0x472803=a9_0x13bf[_0x2adafd];return _0x472803;};'use strict';Object[a9_0x3271('0x0')](exports,'__esModule',{'value':!![]});const jwt=require(a9_0x3271('0x1'));const i18n=require(a9_0x3271('0x2'));const configJwt=require(a9_0x3271('0x3'));const authUtils=require(a9_0x3271('0x4'));const responseUtils=require(a9_0x3271('0x5'));const LocaleStrings=require(a9_0x3271('0x6'));class AuthConstroller{constructor(_0x4557ca){this[a9_0x3271('0x7')]=_0x4557ca;this[a9_0x3271('0x8')]=this[a9_0x3271('0x8')][a9_0x3271('0x9')](this);this[a9_0x3271('0xa')]=this[a9_0x3271('0xa')]['bind'](this);}[a9_0x3271('0x8')](_0x36f128,_0x28b5d3,_0x18fb95){this[a9_0x3271('0x7')][a9_0x3271('0xb')]({'where':{'username':_0x36f128[a9_0x3271('0xc')][a9_0x3271('0xd')]},'attributes':['id','first_name',a9_0x3271('0xe'),a9_0x3271('0xf'),'username','password']})[a9_0x3271('0x10')](_0x2bb736=>{if(!_0x2bb736){return responseUtils['errorResponse'](_0x28b5d3,LocaleStrings[a9_0x3271('0x11')],0x193);}if(authUtils[a9_0x3271('0x12')](_0x36f128[a9_0x3271('0xc')]['password'],_0x2bb736['password'])){_0x2bb736=_0x2bb736[a9_0x3271('0x13')]();const _0xdc5417={'id':_0x2bb736['id']};const _0x7a06a5=jwt[a9_0x3271('0x14')](_0xdc5417,configJwt[a9_0x3271('0x15')]);delete _0x2bb736['password'];_0x2bb736[a9_0x3271('0x16')]=_0x7a06a5;return responseUtils[a9_0x3271('0x17')](_0x28b5d3,_0x2bb736,0xc8);}else{return responseUtils[a9_0x3271('0x18')](_0x28b5d3,_0x28b5d3['__'](LocaleStrings['passwordNotMatchError']),0x193);}})[a9_0x3271('0x19')](_0x352064=>{return responseUtils['errorResponse'](_0x28b5d3,_0x352064[a9_0x3271('0x1a')],0x1f4);});}[a9_0x3271('0xa')](_0xc8adad,_0x19ca33,_0x4c3604){this[a9_0x3271('0x7')][a9_0x3271('0xb')]({'where':{'username':_0xc8adad['body']['username']}})[a9_0x3271('0x10')](function(_0x579aa8){if(_0x579aa8){return responseUtils[a9_0x3271('0x18')](_0x19ca33,_0x19ca33['__'](LocaleStrings['usernameTakenError'],_0xc8adad[a9_0x3271('0xc')]['username']),0x193);}else{_0xc8adad[a9_0x3271('0xc')]['email']=_0xc8adad[a9_0x3271('0xc')][a9_0x3271('0xd')];const _0x197869={'username':_0xc8adad[a9_0x3271('0xc')][a9_0x3271('0xd')],'password':authUtils[a9_0x3271('0x1b')](_0xc8adad['body']['password'])};this[a9_0x3271('0x7')]['create'](_0x197869)['then'](function(_0x506580,_0x5755db){return responseUtils[a9_0x3271('0x17')](_0x19ca33,_0x506580,0xc8);})[a9_0x3271('0x19')](_0x26c44a=>{return responseUtils[a9_0x3271('0x18')](_0x19ca33,_0x26c44a['stack'],0x1f4);});}})['catch'](_0x2097d6=>{return responseUtils[a9_0x3271('0x18')](_0x19ca33,_0x2097d6[a9_0x3271('0x1a')],0x1f4);});}}exports[a9_0x3271('0x1c')]=AuthConstroller;