var a9_0x4261=['body','username','first_name','last_name','email','password','then','errorResponse','usernameNotFoundError','validPassword','sign','secret','token','successResponse','stack','usernameTakenError','generateHash','catch','default','defineProperty','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','createAccount','bind','findOne'];(function(_0x468295,_0x46f9bb){var _0x2fdac1=function(_0x5c975f){while(--_0x5c975f){_0x468295['push'](_0x468295['shift']());}};_0x2fdac1(++_0x46f9bb);}(a9_0x4261,0x1d3));var a9_0x5ca0=function(_0x49fed5,_0x43b55d){_0x49fed5=_0x49fed5-0x0;var _0x55efce=a9_0x4261[_0x49fed5];return _0x55efce;};'use strict';Object[a9_0x5ca0('0x0')](exports,a9_0x5ca0('0x1'),{'value':!![]});const jwt=require(a9_0x5ca0('0x2'));const i18n=require(a9_0x5ca0('0x3'));const configJwt=require(a9_0x5ca0('0x4'));const authUtils=require(a9_0x5ca0('0x5'));const responseUtils=require(a9_0x5ca0('0x6'));const LocaleStrings=require(a9_0x5ca0('0x7'));class AuthConstroller{constructor(_0x1e70e5){this[a9_0x5ca0('0x8')]=_0x1e70e5;this[a9_0x5ca0('0x9')]=this[a9_0x5ca0('0x9')]['bind'](this);this['createAccount']=this[a9_0x5ca0('0xa')][a9_0x5ca0('0xb')](this);}[a9_0x5ca0('0x9')](_0x499921,_0x127cad,_0x2c23cc){this['model'][a9_0x5ca0('0xc')]({'where':{'username':_0x499921[a9_0x5ca0('0xd')][a9_0x5ca0('0xe')]},'attributes':['id',a9_0x5ca0('0xf'),a9_0x5ca0('0x10'),a9_0x5ca0('0x11'),a9_0x5ca0('0xe'),a9_0x5ca0('0x12')]})[a9_0x5ca0('0x13')](_0x434f10=>{if(!_0x434f10){return responseUtils[a9_0x5ca0('0x14')](_0x127cad,LocaleStrings[a9_0x5ca0('0x15')],0x193);}if(authUtils[a9_0x5ca0('0x16')](_0x499921['body'][a9_0x5ca0('0x12')],_0x434f10[a9_0x5ca0('0x12')])){_0x434f10=_0x434f10['toJSON']();const _0x1c5a5f={'id':_0x434f10['id']};const _0x1e46ee=jwt[a9_0x5ca0('0x17')](_0x1c5a5f,configJwt[a9_0x5ca0('0x18')]);delete _0x434f10[a9_0x5ca0('0x12')];_0x434f10[a9_0x5ca0('0x19')]=_0x1e46ee;return responseUtils[a9_0x5ca0('0x1a')](_0x127cad,_0x434f10,0xc8);}else{return responseUtils[a9_0x5ca0('0x14')](_0x127cad,_0x127cad['__'](LocaleStrings['passwordNotMatchError']),0x193);}})['catch'](_0x2ba4d0=>{return responseUtils['errorResponse'](_0x127cad,_0x2ba4d0[a9_0x5ca0('0x1b')],0x1f4);});}[a9_0x5ca0('0xa')](_0x553174,_0x5b6e32,_0x4c61fb){this[a9_0x5ca0('0x8')]['findOne']({'where':{'username':_0x553174[a9_0x5ca0('0xd')][a9_0x5ca0('0xe')]}})[a9_0x5ca0('0x13')](function(_0x5f5c3a){if(_0x5f5c3a){return responseUtils['errorResponse'](_0x5b6e32,_0x5b6e32['__'](LocaleStrings[a9_0x5ca0('0x1c')],_0x553174[a9_0x5ca0('0xd')][a9_0x5ca0('0xe')]),0x193);}else{_0x553174[a9_0x5ca0('0xd')][a9_0x5ca0('0x11')]=_0x553174['body'][a9_0x5ca0('0xe')];const _0x442d55={'username':_0x553174[a9_0x5ca0('0xd')][a9_0x5ca0('0xe')],'password':authUtils[a9_0x5ca0('0x1d')](_0x553174[a9_0x5ca0('0xd')][a9_0x5ca0('0x12')])};this[a9_0x5ca0('0x8')]['create'](_0x442d55)[a9_0x5ca0('0x13')](function(_0x4a598,_0x5c8566){return responseUtils[a9_0x5ca0('0x1a')](_0x5b6e32,_0x4a598,0xc8);})[a9_0x5ca0('0x1e')](_0x34b9de=>{return responseUtils[a9_0x5ca0('0x14')](_0x5b6e32,_0x34b9de[a9_0x5ca0('0x1b')],0x1f4);});}})[a9_0x5ca0('0x1e')](_0x35baee=>{return responseUtils['errorResponse'](_0x5b6e32,_0x35baee[a9_0x5ca0('0x1b')],0x1f4);});}}exports[a9_0x5ca0('0x1f')]=AuthConstroller;