var a9_0x3e02=['username','password','validPassword','toJSON','sign','secret','token','errorResponse','passwordNotMatchError','catch','stack','generateHash','then','successResponse','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','createAccount','bind','findOne','body','first_name','last_name','email'];(function(_0x5acba0,_0x5b9075){var _0x1d9f31=function(_0x56b553){while(--_0x56b553){_0x5acba0['push'](_0x5acba0['shift']());}};_0x1d9f31(++_0x5b9075);}(a9_0x3e02,0x86));var a9_0x4a56=function(_0x3e2f39,_0xac4134){_0x3e2f39=_0x3e2f39-0x0;var _0x486cbc=a9_0x3e02[_0x3e2f39];return _0x486cbc;};'use strict';Object['defineProperty'](exports,a9_0x4a56('0x0'),{'value':!![]});const jwt=require(a9_0x4a56('0x1'));const i18n=require(a9_0x4a56('0x2'));const configJwt=require(a9_0x4a56('0x3'));const authUtils=require(a9_0x4a56('0x4'));const responseUtils=require(a9_0x4a56('0x5'));const LocaleStrings=require(a9_0x4a56('0x6'));class AuthConstroller{constructor(_0x1ec199){this[a9_0x4a56('0x7')]=_0x1ec199;this[a9_0x4a56('0x8')]=this[a9_0x4a56('0x8')]['bind'](this);this[a9_0x4a56('0x9')]=this[a9_0x4a56('0x9')][a9_0x4a56('0xa')](this);}[a9_0x4a56('0x8')](_0x22e619,_0xf224c3,_0x4fcc0d){this[a9_0x4a56('0x7')][a9_0x4a56('0xb')]({'where':{'username':_0x22e619[a9_0x4a56('0xc')]['username']},'attributes':['id',a9_0x4a56('0xd'),a9_0x4a56('0xe'),a9_0x4a56('0xf'),a9_0x4a56('0x10'),a9_0x4a56('0x11')]})['then'](_0x2cde79=>{if(!_0x2cde79){return responseUtils['errorResponse'](_0xf224c3,LocaleStrings['usernameNotFoundError'],0x193);}if(authUtils[a9_0x4a56('0x12')](_0x22e619[a9_0x4a56('0xc')][a9_0x4a56('0x11')],_0x2cde79[a9_0x4a56('0x11')])){_0x2cde79=_0x2cde79[a9_0x4a56('0x13')]();const _0x36fbd2={'id':_0x2cde79['id']};const _0x6883e0=jwt[a9_0x4a56('0x14')](_0x36fbd2,configJwt[a9_0x4a56('0x15')]);delete _0x2cde79[a9_0x4a56('0x11')];_0x2cde79[a9_0x4a56('0x16')]=_0x6883e0;return responseUtils['successResponse'](_0xf224c3,_0x2cde79,0xc8);}else{return responseUtils[a9_0x4a56('0x17')](_0xf224c3,_0xf224c3['__'](LocaleStrings[a9_0x4a56('0x18')]),0x193);}})[a9_0x4a56('0x19')](_0x1b7020=>{return responseUtils[a9_0x4a56('0x17')](_0xf224c3,_0x1b7020[a9_0x4a56('0x1a')],0x1f4);});}[a9_0x4a56('0x9')](_0x22e126,_0x4b9fff,_0x15ffc1){this[a9_0x4a56('0x7')][a9_0x4a56('0xb')]({'where':{'username':_0x22e126[a9_0x4a56('0xc')][a9_0x4a56('0x10')]}})['then'](function(_0x33ad40){if(_0x33ad40){return responseUtils[a9_0x4a56('0x17')](_0x4b9fff,_0x4b9fff['__'](LocaleStrings['usernameTakenError'],_0x22e126[a9_0x4a56('0xc')][a9_0x4a56('0x10')]),0x193);}else{_0x22e126[a9_0x4a56('0xc')][a9_0x4a56('0xf')]=_0x22e126['body'][a9_0x4a56('0x10')];const _0x5287fc={'username':_0x22e126[a9_0x4a56('0xc')][a9_0x4a56('0x10')],'password':authUtils[a9_0x4a56('0x1b')](_0x22e126[a9_0x4a56('0xc')][a9_0x4a56('0x11')])};this[a9_0x4a56('0x7')]['create'](_0x5287fc)[a9_0x4a56('0x1c')](function(_0x54d0f2,_0x193a71){return responseUtils[a9_0x4a56('0x1d')](_0x4b9fff,_0x54d0f2,0xc8);})[a9_0x4a56('0x19')](_0x2c5e47=>{return responseUtils['errorResponse'](_0x4b9fff,_0x2c5e47[a9_0x4a56('0x1a')],0x1f4);});}})[a9_0x4a56('0x19')](_0x634d62=>{return responseUtils[a9_0x4a56('0x17')](_0x4b9fff,_0x634d62['stack'],0x1f4);});}}exports['default']=AuthConstroller;