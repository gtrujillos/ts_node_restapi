var a37_0x3439=['default','__esModule','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','model','createAccount','bind','login','findOne','body','username','first_name','email','password','then','errorResponse','usernameNotFoundError','validPassword','toJSON','secret','token','successResponse','passwordNotMatchError','catch','stack','usernameTakenError','create'];(function(_0x5cf32b,_0x57b26d){var _0x413c70=function(_0x9ff1f0){while(--_0x9ff1f0){_0x5cf32b['push'](_0x5cf32b['shift']());}};_0x413c70(++_0x57b26d);}(a37_0x3439,0x17a));var a37_0xae33=function(_0x1d3fde,_0x375322){_0x1d3fde=_0x1d3fde-0x0;var _0x5e0cc3=a37_0x3439[_0x1d3fde];return _0x5e0cc3;};'use strict';Object['defineProperty'](exports,a37_0xae33('0x0'),{'value':!![]});const jwt=require('jsonwebtoken');const i18n=require(a37_0xae33('0x1'));const configJwt=require(a37_0xae33('0x2'));const authUtils=require(a37_0xae33('0x3'));const responseUtils=require(a37_0xae33('0x4'));const LocaleStrings=require('../../resources/locale-strings');class AuthConstroller{constructor(_0x10c2f9){this[a37_0xae33('0x5')]=_0x10c2f9;this['login']=this['login']['bind'](this);this[a37_0xae33('0x6')]=this['createAccount'][a37_0xae33('0x7')](this);}[a37_0xae33('0x8')](_0x59bff3,_0x19e93a,_0x257e19){this[a37_0xae33('0x5')][a37_0xae33('0x9')]({'where':{'username':_0x59bff3[a37_0xae33('0xa')][a37_0xae33('0xb')]},'attributes':['id',a37_0xae33('0xc'),'last_name',a37_0xae33('0xd'),a37_0xae33('0xb'),a37_0xae33('0xe')]})[a37_0xae33('0xf')](_0x3fec2c=>{if(!_0x3fec2c){return responseUtils[a37_0xae33('0x10')](_0x19e93a,LocaleStrings[a37_0xae33('0x11')],0x193);}if(authUtils[a37_0xae33('0x12')](_0x59bff3['body'][a37_0xae33('0xe')],_0x3fec2c['password'])){_0x3fec2c=_0x3fec2c[a37_0xae33('0x13')]();const _0x19663e={'id':_0x3fec2c['id']};const _0x5e4a0a=jwt['sign'](_0x19663e,configJwt[a37_0xae33('0x14')]);delete _0x3fec2c[a37_0xae33('0xe')];_0x3fec2c[a37_0xae33('0x15')]=_0x5e4a0a;return responseUtils[a37_0xae33('0x16')](_0x19e93a,_0x3fec2c,0xc8);}else{return responseUtils[a37_0xae33('0x10')](_0x19e93a,_0x19e93a['__'](LocaleStrings[a37_0xae33('0x17')]),0x193);}})[a37_0xae33('0x18')](_0x26ff9a=>{return responseUtils[a37_0xae33('0x10')](_0x19e93a,_0x26ff9a[a37_0xae33('0x19')],0x1f4);});}[a37_0xae33('0x6')](_0x29b8ac,_0x48d6bb,_0x58b633){this[a37_0xae33('0x5')][a37_0xae33('0x9')]({'where':{'username':_0x29b8ac['body'][a37_0xae33('0xb')]}})[a37_0xae33('0xf')](function(_0x5b1be7){if(_0x5b1be7){return responseUtils[a37_0xae33('0x10')](_0x48d6bb,_0x48d6bb['__'](LocaleStrings[a37_0xae33('0x1a')],_0x29b8ac[a37_0xae33('0xa')][a37_0xae33('0xb')]),0x193);}else{_0x29b8ac['body'][a37_0xae33('0xd')]=_0x29b8ac[a37_0xae33('0xa')][a37_0xae33('0xb')];const _0x55e223={'username':_0x29b8ac[a37_0xae33('0xa')][a37_0xae33('0xb')],'password':authUtils['generateHash'](_0x29b8ac['body'][a37_0xae33('0xe')])};this[a37_0xae33('0x5')][a37_0xae33('0x1b')](_0x55e223)['then'](function(_0x4f6f30,_0x248558){return responseUtils['successResponse'](_0x48d6bb,_0x4f6f30,0xc8);})[a37_0xae33('0x18')](_0x1eecec=>{return responseUtils[a37_0xae33('0x10')](_0x48d6bb,_0x1eecec[a37_0xae33('0x19')],0x1f4);});}})[a37_0xae33('0x18')](_0x3a1bdc=>{return responseUtils[a37_0xae33('0x10')](_0x48d6bb,_0x3a1bdc[a37_0xae33('0x19')],0x1f4);});}}exports[a37_0xae33('0x1c')]=AuthConstroller;