var a9_0x40b6=['bind','body','username','first_name','email','errorResponse','usernameNotFoundError','validPassword','password','toJSON','sign','secret','successResponse','passwordNotMatchError','catch','stack','findOne','then','usernameTakenError','generateHash','create','defineProperty','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','createAccount'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a9_0x40b6,0x19b));var a9_0x532f=function(_0x271bd3,_0x10d0ad){_0x271bd3=_0x271bd3-0x0;var _0x323725=a9_0x40b6[_0x271bd3];return _0x323725;};'use strict';Object[a9_0x532f('0x0')](exports,'__esModule',{'value':!![]});const jwt=require('jsonwebtoken');const i18n=require(a9_0x532f('0x1'));const configJwt=require(a9_0x532f('0x2'));const authUtils=require(a9_0x532f('0x3'));const responseUtils=require(a9_0x532f('0x4'));const LocaleStrings=require(a9_0x532f('0x5'));class AuthConstroller{constructor(_0x5bf004){this[a9_0x532f('0x6')]=_0x5bf004;this[a9_0x532f('0x7')]=this[a9_0x532f('0x7')]['bind'](this);this['createAccount']=this[a9_0x532f('0x8')][a9_0x532f('0x9')](this);}[a9_0x532f('0x7')](_0x50ecd0,_0x4ab34c,_0x5da4f4){this[a9_0x532f('0x6')]['findOne']({'where':{'username':_0x50ecd0[a9_0x532f('0xa')][a9_0x532f('0xb')]},'attributes':['id',a9_0x532f('0xc'),'last_name',a9_0x532f('0xd'),a9_0x532f('0xb'),'password']})['then'](_0x4d164c=>{if(!_0x4d164c){return responseUtils[a9_0x532f('0xe')](_0x4ab34c,LocaleStrings[a9_0x532f('0xf')],0x193);}if(authUtils[a9_0x532f('0x10')](_0x50ecd0['body'][a9_0x532f('0x11')],_0x4d164c[a9_0x532f('0x11')])){_0x4d164c=_0x4d164c[a9_0x532f('0x12')]();const _0x147e30={'id':_0x4d164c['id']};const _0x16d211=jwt[a9_0x532f('0x13')](_0x147e30,configJwt[a9_0x532f('0x14')]);delete _0x4d164c[a9_0x532f('0x11')];_0x4d164c['token']=_0x16d211;return responseUtils[a9_0x532f('0x15')](_0x4ab34c,_0x4d164c,0xc8);}else{return responseUtils[a9_0x532f('0xe')](_0x4ab34c,_0x4ab34c['__'](LocaleStrings[a9_0x532f('0x16')]),0x193);}})[a9_0x532f('0x17')](_0xdce6e1=>{return responseUtils['errorResponse'](_0x4ab34c,_0xdce6e1[a9_0x532f('0x18')],0x1f4);});}['createAccount'](_0x4536be,_0x83b2e,_0x44720f){this[a9_0x532f('0x6')][a9_0x532f('0x19')]({'where':{'username':_0x4536be[a9_0x532f('0xa')][a9_0x532f('0xb')]}})[a9_0x532f('0x1a')](function(_0x2a7d8e){if(_0x2a7d8e){return responseUtils[a9_0x532f('0xe')](_0x83b2e,_0x83b2e['__'](LocaleStrings[a9_0x532f('0x1b')],_0x4536be[a9_0x532f('0xa')][a9_0x532f('0xb')]),0x193);}else{_0x4536be[a9_0x532f('0xa')][a9_0x532f('0xd')]=_0x4536be[a9_0x532f('0xa')][a9_0x532f('0xb')];const _0x54b9bf={'username':_0x4536be['body'][a9_0x532f('0xb')],'password':authUtils[a9_0x532f('0x1c')](_0x4536be[a9_0x532f('0xa')][a9_0x532f('0x11')])};this[a9_0x532f('0x6')][a9_0x532f('0x1d')](_0x54b9bf)[a9_0x532f('0x1a')](function(_0x28f56c,_0x293b80){return responseUtils[a9_0x532f('0x15')](_0x83b2e,_0x28f56c,0xc8);})['catch'](_0x4157fa=>{return responseUtils[a9_0x532f('0xe')](_0x83b2e,_0x4157fa[a9_0x532f('0x18')],0x1f4);});}})[a9_0x532f('0x17')](_0x34ba77=>{return responseUtils['errorResponse'](_0x83b2e,_0x34ba77[a9_0x532f('0x18')],0x1f4);});}}exports['default']=AuthConstroller;