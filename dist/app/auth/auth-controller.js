var a9_0x3b64=['passwordNotMatchError','catch','usernameTakenError','generateHash','create','stack','default','defineProperty','__esModule','jsonwebtoken','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','bind','createAccount','findOne','body','username','last_name','email','then','errorResponse','usernameNotFoundError','validPassword','password','sign','secret','token','successResponse'];(function(_0x407252,_0x530eba){var _0x730cb4=function(_0x1e163a){while(--_0x1e163a){_0x407252['push'](_0x407252['shift']());}};_0x730cb4(++_0x530eba);}(a9_0x3b64,0x107));var a9_0x5f35=function(_0x41db73,_0x3142fb){_0x41db73=_0x41db73-0x0;var _0x571d79=a9_0x3b64[_0x41db73];return _0x571d79;};'use strict';Object[a9_0x5f35('0x0')](exports,a9_0x5f35('0x1'),{'value':!![]});const jwt=require(a9_0x5f35('0x2'));const i18n=require('i18n');const configJwt=require(a9_0x5f35('0x3'));const authUtils=require(a9_0x5f35('0x4'));const responseUtils=require(a9_0x5f35('0x5'));const LocaleStrings=require(a9_0x5f35('0x6'));class AuthConstroller{constructor(_0xa65058){this[a9_0x5f35('0x7')]=_0xa65058;this['login']=this[a9_0x5f35('0x8')][a9_0x5f35('0x9')](this);this[a9_0x5f35('0xa')]=this[a9_0x5f35('0xa')][a9_0x5f35('0x9')](this);}[a9_0x5f35('0x8')](_0x4bbd32,_0x5def0f,_0x30bd37){this[a9_0x5f35('0x7')][a9_0x5f35('0xb')]({'where':{'username':_0x4bbd32[a9_0x5f35('0xc')][a9_0x5f35('0xd')]},'attributes':['id','first_name',a9_0x5f35('0xe'),a9_0x5f35('0xf'),a9_0x5f35('0xd'),'password']})[a9_0x5f35('0x10')](_0x1f4553=>{if(!_0x1f4553){return responseUtils[a9_0x5f35('0x11')](_0x5def0f,LocaleStrings[a9_0x5f35('0x12')],0x193);}if(authUtils[a9_0x5f35('0x13')](_0x4bbd32[a9_0x5f35('0xc')][a9_0x5f35('0x14')],_0x1f4553[a9_0x5f35('0x14')])){_0x1f4553=_0x1f4553['toJSON']();const _0xa215cb={'id':_0x1f4553['id']};const _0x2a800e=jwt[a9_0x5f35('0x15')](_0xa215cb,configJwt[a9_0x5f35('0x16')]);delete _0x1f4553[a9_0x5f35('0x14')];_0x1f4553[a9_0x5f35('0x17')]=_0x2a800e;return responseUtils[a9_0x5f35('0x18')](_0x5def0f,_0x1f4553,0xc8);}else{return responseUtils['errorResponse'](_0x5def0f,_0x5def0f['__'](LocaleStrings[a9_0x5f35('0x19')]),0x193);}})[a9_0x5f35('0x1a')](_0x1a8256=>{return responseUtils[a9_0x5f35('0x11')](_0x5def0f,_0x1a8256['stack'],0x1f4);});}[a9_0x5f35('0xa')](_0x2c6dd8,_0x2db365,_0x250c2d){this[a9_0x5f35('0x7')][a9_0x5f35('0xb')]({'where':{'username':_0x2c6dd8[a9_0x5f35('0xc')][a9_0x5f35('0xd')]}})[a9_0x5f35('0x10')](function(_0x21494a){if(_0x21494a){return responseUtils[a9_0x5f35('0x11')](_0x2db365,_0x2db365['__'](LocaleStrings[a9_0x5f35('0x1b')],_0x2c6dd8[a9_0x5f35('0xc')][a9_0x5f35('0xd')]),0x193);}else{_0x2c6dd8[a9_0x5f35('0xc')][a9_0x5f35('0xf')]=_0x2c6dd8[a9_0x5f35('0xc')][a9_0x5f35('0xd')];const _0x59c0c4={'username':_0x2c6dd8[a9_0x5f35('0xc')][a9_0x5f35('0xd')],'password':authUtils[a9_0x5f35('0x1c')](_0x2c6dd8['body'][a9_0x5f35('0x14')])};this[a9_0x5f35('0x7')][a9_0x5f35('0x1d')](_0x59c0c4)[a9_0x5f35('0x10')](function(_0x36caef,_0x399284){return responseUtils[a9_0x5f35('0x18')](_0x2db365,_0x36caef,0xc8);})[a9_0x5f35('0x1a')](_0x29de83=>{return responseUtils['errorResponse'](_0x2db365,_0x29de83['stack'],0x1f4);});}})[a9_0x5f35('0x1a')](_0x30a1ab=>{return responseUtils[a9_0x5f35('0x11')](_0x2db365,_0x30a1ab[a9_0x5f35('0x1e')],0x1f4);});}}exports[a9_0x5f35('0x1f')]=AuthConstroller;