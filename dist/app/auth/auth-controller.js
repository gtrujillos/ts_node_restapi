var a9_0x21a1=['secret','token','successResponse','passwordNotMatchError','catch','stack','findOne','usernameTakenError','generateHash','default','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','model','login','bind','createAccount','body','username','first_name','last_name','password','then','errorResponse','usernameNotFoundError','validPassword','toJSON','sign'];(function(_0x13406c,_0x408c84){var _0x22e560=function(_0x5e9a50){while(--_0x5e9a50){_0x13406c['push'](_0x13406c['shift']());}};_0x22e560(++_0x408c84);}(a9_0x21a1,0xdc));var a9_0x4755=function(_0x181993,_0x434f09){_0x181993=_0x181993-0x0;var _0x442e8f=a9_0x21a1[_0x181993];return _0x442e8f;};'use strict';Object['defineProperty'](exports,a9_0x4755('0x0'),{'value':!![]});const jwt=require(a9_0x4755('0x1'));const i18n=require(a9_0x4755('0x2'));const configJwt=require(a9_0x4755('0x3'));const authUtils=require(a9_0x4755('0x4'));const responseUtils=require('../../infrastructure/response-utils');const LocaleStrings=require('../../resources/locale-strings');class AuthConstroller{constructor(_0x2f7284){this[a9_0x4755('0x5')]=_0x2f7284;this[a9_0x4755('0x6')]=this[a9_0x4755('0x6')][a9_0x4755('0x7')](this);this['createAccount']=this[a9_0x4755('0x8')]['bind'](this);}[a9_0x4755('0x6')](_0x39d434,_0x5df1b2,_0x9ae922){this[a9_0x4755('0x5')]['findOne']({'where':{'username':_0x39d434[a9_0x4755('0x9')][a9_0x4755('0xa')]},'attributes':['id',a9_0x4755('0xb'),a9_0x4755('0xc'),'email',a9_0x4755('0xa'),a9_0x4755('0xd')]})[a9_0x4755('0xe')](_0x26535e=>{if(!_0x26535e){return responseUtils[a9_0x4755('0xf')](_0x5df1b2,LocaleStrings[a9_0x4755('0x10')],0x193);}if(authUtils[a9_0x4755('0x11')](_0x39d434[a9_0x4755('0x9')][a9_0x4755('0xd')],_0x26535e[a9_0x4755('0xd')])){_0x26535e=_0x26535e[a9_0x4755('0x12')]();const _0x4c02c1={'id':_0x26535e['id']};const _0x3ae2dd=jwt[a9_0x4755('0x13')](_0x4c02c1,configJwt[a9_0x4755('0x14')]);delete _0x26535e[a9_0x4755('0xd')];_0x26535e[a9_0x4755('0x15')]=_0x3ae2dd;return responseUtils[a9_0x4755('0x16')](_0x5df1b2,_0x26535e,0xc8);}else{return responseUtils[a9_0x4755('0xf')](_0x5df1b2,_0x5df1b2['__'](LocaleStrings[a9_0x4755('0x17')]),0x193);}})[a9_0x4755('0x18')](_0x4e39ec=>{return responseUtils['errorResponse'](_0x5df1b2,_0x4e39ec[a9_0x4755('0x19')],0x1f4);});}[a9_0x4755('0x8')](_0x1682f3,_0x4a7526,_0x1b33c7){this[a9_0x4755('0x5')][a9_0x4755('0x1a')]({'where':{'username':_0x1682f3[a9_0x4755('0x9')][a9_0x4755('0xa')]}})[a9_0x4755('0xe')](function(_0x5c7017){if(_0x5c7017){return responseUtils[a9_0x4755('0xf')](_0x4a7526,_0x4a7526['__'](LocaleStrings[a9_0x4755('0x1b')],_0x1682f3['body'][a9_0x4755('0xa')]),0x193);}else{_0x1682f3['body']['email']=_0x1682f3['body'][a9_0x4755('0xa')];const _0x5bb2c5={'username':_0x1682f3[a9_0x4755('0x9')][a9_0x4755('0xa')],'password':authUtils[a9_0x4755('0x1c')](_0x1682f3[a9_0x4755('0x9')][a9_0x4755('0xd')])};this['model']['create'](_0x5bb2c5)[a9_0x4755('0xe')](function(_0x3bee96,_0x13d0e4){return responseUtils[a9_0x4755('0x16')](_0x4a7526,_0x3bee96,0xc8);})[a9_0x4755('0x18')](_0xd2bb18=>{return responseUtils[a9_0x4755('0xf')](_0x4a7526,_0xd2bb18[a9_0x4755('0x19')],0x1f4);});}})['catch'](_0x38ad0a=>{return responseUtils[a9_0x4755('0xf')](_0x4a7526,_0x38ad0a[a9_0x4755('0x19')],0x1f4);});}}exports[a9_0x4755('0x1d')]=AuthConstroller;