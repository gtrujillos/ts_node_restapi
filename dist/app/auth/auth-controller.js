var a9_0x5449=['usernameTakenError','generateHash','create','default','defineProperty','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','createAccount','bind','findOne','body','username','first_name','last_name','email','password','errorResponse','usernameNotFoundError','validPassword','toJSON','sign','secret','token','successResponse','passwordNotMatchError','catch','stack','then'];(function(_0x2519f8,_0x5be3ad){var _0x50ebc4=function(_0x50e74f){while(--_0x50e74f){_0x2519f8['push'](_0x2519f8['shift']());}};_0x50ebc4(++_0x5be3ad);}(a9_0x5449,0x17a));var a9_0x30e6=function(_0x477d71,_0x327f13){_0x477d71=_0x477d71-0x0;var _0x9c58a2=a9_0x5449[_0x477d71];return _0x9c58a2;};'use strict';Object[a9_0x30e6('0x0')](exports,'__esModule',{'value':!![]});const jwt=require(a9_0x30e6('0x1'));const i18n=require(a9_0x30e6('0x2'));const configJwt=require(a9_0x30e6('0x3'));const authUtils=require(a9_0x30e6('0x4'));const responseUtils=require(a9_0x30e6('0x5'));const LocaleStrings=require(a9_0x30e6('0x6'));class AuthConstroller{constructor(_0x194bf3){this[a9_0x30e6('0x7')]=_0x194bf3;this[a9_0x30e6('0x8')]=this[a9_0x30e6('0x8')]['bind'](this);this[a9_0x30e6('0x9')]=this[a9_0x30e6('0x9')][a9_0x30e6('0xa')](this);}['login'](_0xa7e82c,_0x12e3a2,_0x51aa16){this[a9_0x30e6('0x7')][a9_0x30e6('0xb')]({'where':{'username':_0xa7e82c[a9_0x30e6('0xc')][a9_0x30e6('0xd')]},'attributes':['id',a9_0x30e6('0xe'),a9_0x30e6('0xf'),a9_0x30e6('0x10'),a9_0x30e6('0xd'),a9_0x30e6('0x11')]})['then'](_0x4a22cc=>{if(!_0x4a22cc){return responseUtils[a9_0x30e6('0x12')](_0x12e3a2,LocaleStrings[a9_0x30e6('0x13')],0x193);}if(authUtils[a9_0x30e6('0x14')](_0xa7e82c[a9_0x30e6('0xc')][a9_0x30e6('0x11')],_0x4a22cc['password'])){_0x4a22cc=_0x4a22cc[a9_0x30e6('0x15')]();const _0x2f0425={'id':_0x4a22cc['id']};const _0x4bc269=jwt[a9_0x30e6('0x16')](_0x2f0425,configJwt[a9_0x30e6('0x17')]);delete _0x4a22cc[a9_0x30e6('0x11')];_0x4a22cc[a9_0x30e6('0x18')]=_0x4bc269;return responseUtils[a9_0x30e6('0x19')](_0x12e3a2,_0x4a22cc,0xc8);}else{return responseUtils[a9_0x30e6('0x12')](_0x12e3a2,_0x12e3a2['__'](LocaleStrings[a9_0x30e6('0x1a')]),0x193);}})[a9_0x30e6('0x1b')](_0x558ec5=>{return responseUtils[a9_0x30e6('0x12')](_0x12e3a2,_0x558ec5[a9_0x30e6('0x1c')],0x1f4);});}[a9_0x30e6('0x9')](_0x428151,_0x8590e2,_0x1c29fc){this['model'][a9_0x30e6('0xb')]({'where':{'username':_0x428151['body'][a9_0x30e6('0xd')]}})[a9_0x30e6('0x1d')](function(_0xd9a805){if(_0xd9a805){return responseUtils[a9_0x30e6('0x12')](_0x8590e2,_0x8590e2['__'](LocaleStrings[a9_0x30e6('0x1e')],_0x428151['body']['username']),0x193);}else{_0x428151['body'][a9_0x30e6('0x10')]=_0x428151[a9_0x30e6('0xc')][a9_0x30e6('0xd')];const _0x41acf3={'username':_0x428151['body'][a9_0x30e6('0xd')],'password':authUtils[a9_0x30e6('0x1f')](_0x428151[a9_0x30e6('0xc')][a9_0x30e6('0x11')])};this[a9_0x30e6('0x7')][a9_0x30e6('0x20')](_0x41acf3)[a9_0x30e6('0x1d')](function(_0x22b3b8,_0x3d3615){return responseUtils[a9_0x30e6('0x19')](_0x8590e2,_0x22b3b8,0xc8);})[a9_0x30e6('0x1b')](_0x183cc9=>{return responseUtils[a9_0x30e6('0x12')](_0x8590e2,_0x183cc9[a9_0x30e6('0x1c')],0x1f4);});}})[a9_0x30e6('0x1b')](_0x3b0614=>{return responseUtils[a9_0x30e6('0x12')](_0x8590e2,_0x3b0614['stack'],0x1f4);});}}exports[a9_0x30e6('0x21')]=AuthConstroller;