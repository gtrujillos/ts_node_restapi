var a9_0x8bb9=['username','errorResponse','usernameNotFoundError','validPassword','password','toJSON','sign','token','successResponse','passwordNotMatchError','catch','stack','then','usernameTakenError','email','generateHash','create','default','defineProperty','__esModule','jsonwebtoken','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','bind','createAccount','login','findOne','body','first_name','last_name'];(function(_0x5a1d57,_0xd865a2){var _0x2432cb=function(_0x4fee27){while(--_0x4fee27){_0x5a1d57['push'](_0x5a1d57['shift']());}};_0x2432cb(++_0xd865a2);}(a9_0x8bb9,0x75));var a9_0x148b=function(_0x26a6a6,_0x57e37c){_0x26a6a6=_0x26a6a6-0x0;var _0x3bcbc9=a9_0x8bb9[_0x26a6a6];return _0x3bcbc9;};'use strict';Object[a9_0x148b('0x0')](exports,a9_0x148b('0x1'),{'value':!![]});const jwt=require(a9_0x148b('0x2'));const i18n=require('i18n');const configJwt=require(a9_0x148b('0x3'));const authUtils=require(a9_0x148b('0x4'));const responseUtils=require(a9_0x148b('0x5'));const LocaleStrings=require(a9_0x148b('0x6'));class AuthConstroller{constructor(_0x1bbd63){this[a9_0x148b('0x7')]=_0x1bbd63;this['login']=this['login'][a9_0x148b('0x8')](this);this[a9_0x148b('0x9')]=this['createAccount']['bind'](this);}[a9_0x148b('0xa')](_0x1c4169,_0x2fc5d4,_0x23a207){this[a9_0x148b('0x7')][a9_0x148b('0xb')]({'where':{'username':_0x1c4169[a9_0x148b('0xc')]['username']},'attributes':['id',a9_0x148b('0xd'),a9_0x148b('0xe'),'email',a9_0x148b('0xf'),'password']})['then'](_0x6de518=>{if(!_0x6de518){return responseUtils[a9_0x148b('0x10')](_0x2fc5d4,LocaleStrings[a9_0x148b('0x11')],0x193);}if(authUtils[a9_0x148b('0x12')](_0x1c4169[a9_0x148b('0xc')][a9_0x148b('0x13')],_0x6de518[a9_0x148b('0x13')])){_0x6de518=_0x6de518[a9_0x148b('0x14')]();const _0x50ef45={'id':_0x6de518['id']};const _0x448c9a=jwt[a9_0x148b('0x15')](_0x50ef45,configJwt['secret']);delete _0x6de518[a9_0x148b('0x13')];_0x6de518[a9_0x148b('0x16')]=_0x448c9a;return responseUtils[a9_0x148b('0x17')](_0x2fc5d4,_0x6de518,0xc8);}else{return responseUtils[a9_0x148b('0x10')](_0x2fc5d4,_0x2fc5d4['__'](LocaleStrings[a9_0x148b('0x18')]),0x193);}})[a9_0x148b('0x19')](_0x58ecd9=>{return responseUtils['errorResponse'](_0x2fc5d4,_0x58ecd9[a9_0x148b('0x1a')],0x1f4);});}[a9_0x148b('0x9')](_0x4664f3,_0x3c6f23,_0x244261){this[a9_0x148b('0x7')]['findOne']({'where':{'username':_0x4664f3[a9_0x148b('0xc')][a9_0x148b('0xf')]}})[a9_0x148b('0x1b')](function(_0x52a6ea){if(_0x52a6ea){return responseUtils[a9_0x148b('0x10')](_0x3c6f23,_0x3c6f23['__'](LocaleStrings[a9_0x148b('0x1c')],_0x4664f3[a9_0x148b('0xc')]['username']),0x193);}else{_0x4664f3['body'][a9_0x148b('0x1d')]=_0x4664f3[a9_0x148b('0xc')][a9_0x148b('0xf')];const _0x2f37a1={'username':_0x4664f3[a9_0x148b('0xc')][a9_0x148b('0xf')],'password':authUtils[a9_0x148b('0x1e')](_0x4664f3[a9_0x148b('0xc')][a9_0x148b('0x13')])};this[a9_0x148b('0x7')][a9_0x148b('0x1f')](_0x2f37a1)[a9_0x148b('0x1b')](function(_0x56b17c,_0x2c97ad){return responseUtils['successResponse'](_0x3c6f23,_0x56b17c,0xc8);})[a9_0x148b('0x19')](_0x160b76=>{return responseUtils['errorResponse'](_0x3c6f23,_0x160b76[a9_0x148b('0x1a')],0x1f4);});}})['catch'](_0x42d4ea=>{return responseUtils['errorResponse'](_0x3c6f23,_0x42d4ea[a9_0x148b('0x1a')],0x1f4);});}}exports[a9_0x148b('0x20')]=AuthConstroller;