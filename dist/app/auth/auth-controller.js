var a9_0x4d49=['then','errorResponse','usernameNotFoundError','toJSON','sign','secret','token','successResponse','passwordNotMatchError','stack','findOne','usernameTakenError','create','catch','default','defineProperty','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../resources/locale-strings','model','login','bind','createAccount','body','username','email','password'];(function(_0x2699a9,_0x501e82){var _0x5b6c40=function(_0xa3de42){while(--_0xa3de42){_0x2699a9['push'](_0x2699a9['shift']());}};_0x5b6c40(++_0x501e82);}(a9_0x4d49,0xda));var a9_0x5968=function(_0x26911f,_0x42ef24){_0x26911f=_0x26911f-0x0;var _0x3703e8=a9_0x4d49[_0x26911f];return _0x3703e8;};'use strict';Object[a9_0x5968('0x0')](exports,'__esModule',{'value':!![]});const jwt=require(a9_0x5968('0x1'));const i18n=require(a9_0x5968('0x2'));const configJwt=require(a9_0x5968('0x3'));const authUtils=require(a9_0x5968('0x4'));const responseUtils=require('../../infrastructure/response-utils');const LocaleStrings=require(a9_0x5968('0x5'));class AuthConstroller{constructor(_0x9a8287){this[a9_0x5968('0x6')]=_0x9a8287;this[a9_0x5968('0x7')]=this[a9_0x5968('0x7')][a9_0x5968('0x8')](this);this[a9_0x5968('0x9')]=this[a9_0x5968('0x9')][a9_0x5968('0x8')](this);}[a9_0x5968('0x7')](_0x3a07a3,_0x2ae5bb,_0x1d29e9){this['model']['findOne']({'where':{'username':_0x3a07a3[a9_0x5968('0xa')][a9_0x5968('0xb')]},'attributes':['id','first_name','last_name',a9_0x5968('0xc'),'username',a9_0x5968('0xd')]})[a9_0x5968('0xe')](_0x1a8b8f=>{if(!_0x1a8b8f){return responseUtils[a9_0x5968('0xf')](_0x2ae5bb,LocaleStrings[a9_0x5968('0x10')],0x193);}if(authUtils['validPassword'](_0x3a07a3[a9_0x5968('0xa')][a9_0x5968('0xd')],_0x1a8b8f[a9_0x5968('0xd')])){_0x1a8b8f=_0x1a8b8f[a9_0x5968('0x11')]();const _0x1234ad={'id':_0x1a8b8f['id']};const _0x4730e6=jwt[a9_0x5968('0x12')](_0x1234ad,configJwt[a9_0x5968('0x13')]);delete _0x1a8b8f[a9_0x5968('0xd')];_0x1a8b8f[a9_0x5968('0x14')]=_0x4730e6;return responseUtils[a9_0x5968('0x15')](_0x2ae5bb,_0x1a8b8f,0xc8);}else{return responseUtils[a9_0x5968('0xf')](_0x2ae5bb,_0x2ae5bb['__'](LocaleStrings[a9_0x5968('0x16')]),0x193);}})['catch'](_0x1665c5=>{return responseUtils['errorResponse'](_0x2ae5bb,_0x1665c5[a9_0x5968('0x17')],0x1f4);});}[a9_0x5968('0x9')](_0x20f259,_0x2a9386,_0x28ce5d){this[a9_0x5968('0x6')][a9_0x5968('0x18')]({'where':{'username':_0x20f259[a9_0x5968('0xa')][a9_0x5968('0xb')]}})[a9_0x5968('0xe')](function(_0x28a337){if(_0x28a337){return responseUtils[a9_0x5968('0xf')](_0x2a9386,_0x2a9386['__'](LocaleStrings[a9_0x5968('0x19')],_0x20f259[a9_0x5968('0xa')][a9_0x5968('0xb')]),0x193);}else{_0x20f259[a9_0x5968('0xa')][a9_0x5968('0xc')]=_0x20f259[a9_0x5968('0xa')]['username'];const _0x26c45c={'username':_0x20f259[a9_0x5968('0xa')][a9_0x5968('0xb')],'password':authUtils['generateHash'](_0x20f259['body']['password'])};this['model'][a9_0x5968('0x1a')](_0x26c45c)[a9_0x5968('0xe')](function(_0x226f29,_0x37ad8f){return responseUtils[a9_0x5968('0x15')](_0x2a9386,_0x226f29,0xc8);})[a9_0x5968('0x1b')](_0x12bab4=>{return responseUtils[a9_0x5968('0xf')](_0x2a9386,_0x12bab4[a9_0x5968('0x17')],0x1f4);});}})[a9_0x5968('0x1b')](_0x4feb3a=>{return responseUtils[a9_0x5968('0xf')](_0x2a9386,_0x4feb3a['stack'],0x1f4);});}}exports[a9_0x5968('0x1c')]=AuthConstroller;