var a9_0x43ba=['password','then','errorResponse','usernameNotFoundError','validPassword','toJSON','sign','secret','token','successResponse','passwordNotMatchError','stack','findOne','email','create','catch','default','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','bind','body','username','first_name'];(function(_0x765e80,_0x7866a9){var _0xefa048=function(_0x4c7c0c){while(--_0x4c7c0c){_0x765e80['push'](_0x765e80['shift']());}};_0xefa048(++_0x7866a9);}(a9_0x43ba,0x6b));var a9_0x2de0=function(_0x229bb0,_0x4fdf34){_0x229bb0=_0x229bb0-0x0;var _0x3d3e67=a9_0x43ba[_0x229bb0];return _0x3d3e67;};'use strict';Object['defineProperty'](exports,a9_0x2de0('0x0'),{'value':!![]});const jwt=require(a9_0x2de0('0x1'));const i18n=require(a9_0x2de0('0x2'));const configJwt=require(a9_0x2de0('0x3'));const authUtils=require(a9_0x2de0('0x4'));const responseUtils=require(a9_0x2de0('0x5'));const LocaleStrings=require(a9_0x2de0('0x6'));class AuthConstroller{constructor(_0x50c41c){this[a9_0x2de0('0x7')]=_0x50c41c;this[a9_0x2de0('0x8')]=this[a9_0x2de0('0x8')][a9_0x2de0('0x9')](this);this['createAccount']=this['createAccount'][a9_0x2de0('0x9')](this);}[a9_0x2de0('0x8')](_0x37fb1d,_0x5ec286,_0x43cb3c){this[a9_0x2de0('0x7')]['findOne']({'where':{'username':_0x37fb1d[a9_0x2de0('0xa')][a9_0x2de0('0xb')]},'attributes':['id',a9_0x2de0('0xc'),'last_name','email',a9_0x2de0('0xb'),a9_0x2de0('0xd')]})[a9_0x2de0('0xe')](_0x1868ad=>{if(!_0x1868ad){return responseUtils[a9_0x2de0('0xf')](_0x5ec286,LocaleStrings[a9_0x2de0('0x10')],0x193);}if(authUtils[a9_0x2de0('0x11')](_0x37fb1d[a9_0x2de0('0xa')][a9_0x2de0('0xd')],_0x1868ad['password'])){_0x1868ad=_0x1868ad[a9_0x2de0('0x12')]();const _0x57ece0={'id':_0x1868ad['id']};const _0x49c033=jwt[a9_0x2de0('0x13')](_0x57ece0,configJwt[a9_0x2de0('0x14')]);delete _0x1868ad[a9_0x2de0('0xd')];_0x1868ad[a9_0x2de0('0x15')]=_0x49c033;return responseUtils[a9_0x2de0('0x16')](_0x5ec286,_0x1868ad,0xc8);}else{return responseUtils['errorResponse'](_0x5ec286,_0x5ec286['__'](LocaleStrings[a9_0x2de0('0x17')]),0x193);}})['catch'](_0x2a3359=>{return responseUtils['errorResponse'](_0x5ec286,_0x2a3359[a9_0x2de0('0x18')],0x1f4);});}['createAccount'](_0x27c58d,_0x3b9fc5,_0x38787a){this[a9_0x2de0('0x7')][a9_0x2de0('0x19')]({'where':{'username':_0x27c58d[a9_0x2de0('0xa')][a9_0x2de0('0xb')]}})[a9_0x2de0('0xe')](function(_0x7c82d8){if(_0x7c82d8){return responseUtils[a9_0x2de0('0xf')](_0x3b9fc5,_0x3b9fc5['__'](LocaleStrings['usernameTakenError'],_0x27c58d[a9_0x2de0('0xa')][a9_0x2de0('0xb')]),0x193);}else{_0x27c58d[a9_0x2de0('0xa')][a9_0x2de0('0x1a')]=_0x27c58d['body'][a9_0x2de0('0xb')];const _0x27e674={'username':_0x27c58d['body'][a9_0x2de0('0xb')],'password':authUtils['generateHash'](_0x27c58d[a9_0x2de0('0xa')]['password'])};this[a9_0x2de0('0x7')][a9_0x2de0('0x1b')](_0x27e674)['then'](function(_0x4f55bc,_0x156780){return responseUtils[a9_0x2de0('0x16')](_0x3b9fc5,_0x4f55bc,0xc8);})[a9_0x2de0('0x1c')](_0x1472e5=>{return responseUtils[a9_0x2de0('0xf')](_0x3b9fc5,_0x1472e5[a9_0x2de0('0x18')],0x1f4);});}})[a9_0x2de0('0x1c')](_0x36ad0a=>{return responseUtils['errorResponse'](_0x3b9fc5,_0x36ad0a[a9_0x2de0('0x18')],0x1f4);});}}exports[a9_0x2de0('0x1d')]=AuthConstroller;