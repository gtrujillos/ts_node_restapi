var a9_0x29c3=['login','bind','createAccount','findOne','body','username','last_name','email','errorResponse','usernameNotFoundError','validPassword','password','toJSON','sign','secret','token','successResponse','catch','then','usernameTakenError','generateHash','create','stack','default','defineProperty','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../resources/locale-strings','model'];(function(_0x20713c,_0x4fedce){var _0x3c827d=function(_0x392f67){while(--_0x392f67){_0x20713c['push'](_0x20713c['shift']());}};_0x3c827d(++_0x4fedce);}(a9_0x29c3,0x1ca));var a9_0x3490=function(_0x2c7825,_0x1bfe28){_0x2c7825=_0x2c7825-0x0;var _0x1c4685=a9_0x29c3[_0x2c7825];return _0x1c4685;};'use strict';Object[a9_0x3490('0x0')](exports,a9_0x3490('0x1'),{'value':!![]});const jwt=require(a9_0x3490('0x2'));const i18n=require(a9_0x3490('0x3'));const configJwt=require(a9_0x3490('0x4'));const authUtils=require('../../infrastructure/auth-utils');const responseUtils=require('../../infrastructure/response-utils');const LocaleStrings=require(a9_0x3490('0x5'));class AuthConstroller{constructor(_0x1ed9ca){this[a9_0x3490('0x6')]=_0x1ed9ca;this[a9_0x3490('0x7')]=this[a9_0x3490('0x7')][a9_0x3490('0x8')](this);this[a9_0x3490('0x9')]=this[a9_0x3490('0x9')][a9_0x3490('0x8')](this);}['login'](_0x2d4456,_0x340973,_0x5b5474){this[a9_0x3490('0x6')][a9_0x3490('0xa')]({'where':{'username':_0x2d4456[a9_0x3490('0xb')][a9_0x3490('0xc')]},'attributes':['id','first_name',a9_0x3490('0xd'),a9_0x3490('0xe'),'username','password']})['then'](_0x8730ca=>{if(!_0x8730ca){return responseUtils[a9_0x3490('0xf')](_0x340973,LocaleStrings[a9_0x3490('0x10')],0x193);}if(authUtils[a9_0x3490('0x11')](_0x2d4456[a9_0x3490('0xb')][a9_0x3490('0x12')],_0x8730ca[a9_0x3490('0x12')])){_0x8730ca=_0x8730ca[a9_0x3490('0x13')]();const _0x5cd571={'id':_0x8730ca['id']};const _0x398f78=jwt[a9_0x3490('0x14')](_0x5cd571,configJwt[a9_0x3490('0x15')]);delete _0x8730ca[a9_0x3490('0x12')];_0x8730ca[a9_0x3490('0x16')]=_0x398f78;return responseUtils[a9_0x3490('0x17')](_0x340973,_0x8730ca,0xc8);}else{return responseUtils[a9_0x3490('0xf')](_0x340973,_0x340973['__'](LocaleStrings['passwordNotMatchError']),0x193);}})[a9_0x3490('0x18')](_0x614988=>{return responseUtils[a9_0x3490('0xf')](_0x340973,_0x614988['stack'],0x1f4);});}[a9_0x3490('0x9')](_0x25b0f7,_0x383ff3,_0x292806){this[a9_0x3490('0x6')][a9_0x3490('0xa')]({'where':{'username':_0x25b0f7['body'][a9_0x3490('0xc')]}})[a9_0x3490('0x19')](function(_0x2d7e96){if(_0x2d7e96){return responseUtils[a9_0x3490('0xf')](_0x383ff3,_0x383ff3['__'](LocaleStrings[a9_0x3490('0x1a')],_0x25b0f7[a9_0x3490('0xb')][a9_0x3490('0xc')]),0x193);}else{_0x25b0f7[a9_0x3490('0xb')]['email']=_0x25b0f7[a9_0x3490('0xb')][a9_0x3490('0xc')];const _0x2dbb41={'username':_0x25b0f7[a9_0x3490('0xb')]['username'],'password':authUtils[a9_0x3490('0x1b')](_0x25b0f7[a9_0x3490('0xb')][a9_0x3490('0x12')])};this[a9_0x3490('0x6')][a9_0x3490('0x1c')](_0x2dbb41)[a9_0x3490('0x19')](function(_0x1c439f,_0x374767){return responseUtils[a9_0x3490('0x17')](_0x383ff3,_0x1c439f,0xc8);})[a9_0x3490('0x18')](_0x4265c6=>{return responseUtils['errorResponse'](_0x383ff3,_0x4265c6[a9_0x3490('0x1d')],0x1f4);});}})['catch'](_0x44aa9c=>{return responseUtils[a9_0x3490('0xf')](_0x383ff3,_0x44aa9c[a9_0x3490('0x1d')],0x1f4);});}}exports[a9_0x3490('0x1e')]=AuthConstroller;