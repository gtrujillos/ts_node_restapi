var a28_0x1ed9=['createAccount','bind','findOne','username','last_name','email','then','errorResponse','usernameNotFoundError','body','password','toJSON','secret','token','catch','stack','usernameTakenError','generateHash','successResponse','default','defineProperty','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a28_0x1ed9,0x8c));var a28_0x234a=function(_0x3b4d08,_0x4c3071){_0x3b4d08=_0x3b4d08-0x0;var _0x396ae2=a28_0x1ed9[_0x3b4d08];return _0x396ae2;};'use strict';Object[a28_0x234a('0x0')](exports,a28_0x234a('0x1'),{'value':!![]});const jwt=require(a28_0x234a('0x2'));const i18n=require(a28_0x234a('0x3'));const configJwt=require(a28_0x234a('0x4'));const authUtils=require(a28_0x234a('0x5'));const responseUtils=require(a28_0x234a('0x6'));const LocaleStrings=require(a28_0x234a('0x7'));class AuthConstroller{constructor(_0x425d63){this[a28_0x234a('0x8')]=_0x425d63;this[a28_0x234a('0x9')]=this[a28_0x234a('0x9')]['bind'](this);this[a28_0x234a('0xa')]=this[a28_0x234a('0xa')][a28_0x234a('0xb')](this);}[a28_0x234a('0x9')](_0x39a220,_0x4d725f,_0x2d8b2d){this[a28_0x234a('0x8')][a28_0x234a('0xc')]({'where':{'username':_0x39a220['body'][a28_0x234a('0xd')]},'attributes':['id','first_name',a28_0x234a('0xe'),a28_0x234a('0xf'),a28_0x234a('0xd'),'password']})[a28_0x234a('0x10')](_0x3f38ef=>{if(!_0x3f38ef){return responseUtils[a28_0x234a('0x11')](_0x4d725f,LocaleStrings[a28_0x234a('0x12')],0x193);}if(authUtils['validPassword'](_0x39a220[a28_0x234a('0x13')][a28_0x234a('0x14')],_0x3f38ef[a28_0x234a('0x14')])){_0x3f38ef=_0x3f38ef[a28_0x234a('0x15')]();const _0x39099a={'id':_0x3f38ef['id']};const _0x97a227=jwt['sign'](_0x39099a,configJwt[a28_0x234a('0x16')]);delete _0x3f38ef[a28_0x234a('0x14')];_0x3f38ef[a28_0x234a('0x17')]=_0x97a227;return responseUtils['successResponse'](_0x4d725f,_0x3f38ef,0xc8);}else{return responseUtils[a28_0x234a('0x11')](_0x4d725f,_0x4d725f['__'](LocaleStrings['passwordNotMatchError']),0x193);}})[a28_0x234a('0x18')](_0x1cd126=>{return responseUtils[a28_0x234a('0x11')](_0x4d725f,_0x1cd126[a28_0x234a('0x19')],0x1f4);});}['createAccount'](_0x258d9f,_0x280664,_0x37d24b){this[a28_0x234a('0x8')][a28_0x234a('0xc')]({'where':{'username':_0x258d9f['body']['username']}})[a28_0x234a('0x10')](function(_0x279c9c){if(_0x279c9c){return responseUtils[a28_0x234a('0x11')](_0x280664,_0x280664['__'](LocaleStrings[a28_0x234a('0x1a')],_0x258d9f[a28_0x234a('0x13')][a28_0x234a('0xd')]),0x193);}else{_0x258d9f[a28_0x234a('0x13')]['email']=_0x258d9f[a28_0x234a('0x13')][a28_0x234a('0xd')];const _0x21970b={'username':_0x258d9f['body'][a28_0x234a('0xd')],'password':authUtils[a28_0x234a('0x1b')](_0x258d9f[a28_0x234a('0x13')]['password'])};this[a28_0x234a('0x8')]['create'](_0x21970b)['then'](function(_0x22d8f3,_0x4dd378){return responseUtils[a28_0x234a('0x1c')](_0x280664,_0x22d8f3,0xc8);})['catch'](_0x67417f=>{return responseUtils[a28_0x234a('0x11')](_0x280664,_0x67417f[a28_0x234a('0x19')],0x1f4);});}})[a28_0x234a('0x18')](_0x4f9666=>{return responseUtils[a28_0x234a('0x11')](_0x280664,_0x4f9666[a28_0x234a('0x19')],0x1f4);});}}exports[a28_0x234a('0x1d')]=AuthConstroller;