var a9_0x1e3d=['stack','default','defineProperty','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','bind','createAccount','findOne','username','first_name','email','password','then','usernameNotFoundError','validPassword','body','toJSON','sign','token','successResponse','errorResponse','passwordNotMatchError','catch','generateHash'];(function(_0x3186ae,_0x45c37d){var _0x5958e0=function(_0x54294){while(--_0x54294){_0x3186ae['push'](_0x3186ae['shift']());}};_0x5958e0(++_0x45c37d);}(a9_0x1e3d,0x188));var a9_0x407d=function(_0x1952f2,_0xdc4bb5){_0x1952f2=_0x1952f2-0x0;var _0x1e4c20=a9_0x1e3d[_0x1952f2];return _0x1e4c20;};'use strict';Object[a9_0x407d('0x0')](exports,'__esModule',{'value':!![]});const jwt=require(a9_0x407d('0x1'));const i18n=require(a9_0x407d('0x2'));const configJwt=require(a9_0x407d('0x3'));const authUtils=require(a9_0x407d('0x4'));const responseUtils=require(a9_0x407d('0x5'));const LocaleStrings=require(a9_0x407d('0x6'));class AuthConstroller{constructor(_0xc144fe){this[a9_0x407d('0x7')]=_0xc144fe;this[a9_0x407d('0x8')]=this[a9_0x407d('0x8')][a9_0x407d('0x9')](this);this['createAccount']=this[a9_0x407d('0xa')][a9_0x407d('0x9')](this);}[a9_0x407d('0x8')](_0x45112d,_0x59f319,_0x44502b){this[a9_0x407d('0x7')][a9_0x407d('0xb')]({'where':{'username':_0x45112d['body'][a9_0x407d('0xc')]},'attributes':['id',a9_0x407d('0xd'),'last_name',a9_0x407d('0xe'),a9_0x407d('0xc'),a9_0x407d('0xf')]})[a9_0x407d('0x10')](_0x3bc80d=>{if(!_0x3bc80d){return responseUtils['errorResponse'](_0x59f319,LocaleStrings[a9_0x407d('0x11')],0x193);}if(authUtils[a9_0x407d('0x12')](_0x45112d[a9_0x407d('0x13')]['password'],_0x3bc80d[a9_0x407d('0xf')])){_0x3bc80d=_0x3bc80d[a9_0x407d('0x14')]();const _0xc7ef8f={'id':_0x3bc80d['id']};const _0x46c83c=jwt[a9_0x407d('0x15')](_0xc7ef8f,configJwt['secret']);delete _0x3bc80d[a9_0x407d('0xf')];_0x3bc80d[a9_0x407d('0x16')]=_0x46c83c;return responseUtils[a9_0x407d('0x17')](_0x59f319,_0x3bc80d,0xc8);}else{return responseUtils[a9_0x407d('0x18')](_0x59f319,_0x59f319['__'](LocaleStrings[a9_0x407d('0x19')]),0x193);}})[a9_0x407d('0x1a')](_0x1b2dc5=>{return responseUtils['errorResponse'](_0x59f319,_0x1b2dc5['stack'],0x1f4);});}[a9_0x407d('0xa')](_0x238179,_0x180f5a,_0x5518ab){this[a9_0x407d('0x7')][a9_0x407d('0xb')]({'where':{'username':_0x238179[a9_0x407d('0x13')][a9_0x407d('0xc')]}})['then'](function(_0x3db950){if(_0x3db950){return responseUtils[a9_0x407d('0x18')](_0x180f5a,_0x180f5a['__'](LocaleStrings['usernameTakenError'],_0x238179['body']['username']),0x193);}else{_0x238179[a9_0x407d('0x13')]['email']=_0x238179[a9_0x407d('0x13')]['username'];const _0x3530ae={'username':_0x238179['body'][a9_0x407d('0xc')],'password':authUtils[a9_0x407d('0x1b')](_0x238179[a9_0x407d('0x13')]['password'])};this[a9_0x407d('0x7')]['create'](_0x3530ae)['then'](function(_0x523b4b,_0x2ffd45){return responseUtils[a9_0x407d('0x17')](_0x180f5a,_0x523b4b,0xc8);})[a9_0x407d('0x1a')](_0x3de77b=>{return responseUtils[a9_0x407d('0x18')](_0x180f5a,_0x3de77b['stack'],0x1f4);});}})[a9_0x407d('0x1a')](_0x56c21e=>{return responseUtils[a9_0x407d('0x18')](_0x180f5a,_0x56c21e[a9_0x407d('0x1c')],0x1f4);});}}exports[a9_0x407d('0x1d')]=AuthConstroller;