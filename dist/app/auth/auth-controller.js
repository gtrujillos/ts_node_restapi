var a9_0xd0f2=['../../infrastructure/response-utils','../../resources/locale-strings','model','login','bind','createAccount','findOne','username','first_name','last_name','email','password','then','errorResponse','validPassword','body','toJSON','sign','token','successResponse','passwordNotMatchError','stack','usernameTakenError','generateHash','create','catch','default','defineProperty','__esModule','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils'];(function(_0x4fe2d0,_0x45619d){var _0x15edd1=function(_0x33bb34){while(--_0x33bb34){_0x4fe2d0['push'](_0x4fe2d0['shift']());}};_0x15edd1(++_0x45619d);}(a9_0xd0f2,0x102));var a9_0x2044=function(_0x4ac21b,_0x3ba2e9){_0x4ac21b=_0x4ac21b-0x0;var _0x536c2b=a9_0xd0f2[_0x4ac21b];return _0x536c2b;};'use strict';Object[a9_0x2044('0x0')](exports,a9_0x2044('0x1'),{'value':!![]});const jwt=require(a9_0x2044('0x2'));const i18n=require(a9_0x2044('0x3'));const configJwt=require(a9_0x2044('0x4'));const authUtils=require(a9_0x2044('0x5'));const responseUtils=require(a9_0x2044('0x6'));const LocaleStrings=require(a9_0x2044('0x7'));class AuthConstroller{constructor(_0x52e1e2){this[a9_0x2044('0x8')]=_0x52e1e2;this[a9_0x2044('0x9')]=this['login'][a9_0x2044('0xa')](this);this[a9_0x2044('0xb')]=this[a9_0x2044('0xb')][a9_0x2044('0xa')](this);}['login'](_0x1b5b2f,_0x5a4fa2,_0x4dcc51){this[a9_0x2044('0x8')][a9_0x2044('0xc')]({'where':{'username':_0x1b5b2f['body'][a9_0x2044('0xd')]},'attributes':['id',a9_0x2044('0xe'),a9_0x2044('0xf'),a9_0x2044('0x10'),a9_0x2044('0xd'),a9_0x2044('0x11')]})[a9_0x2044('0x12')](_0x613c32=>{if(!_0x613c32){return responseUtils[a9_0x2044('0x13')](_0x5a4fa2,LocaleStrings['usernameNotFoundError'],0x193);}if(authUtils[a9_0x2044('0x14')](_0x1b5b2f[a9_0x2044('0x15')][a9_0x2044('0x11')],_0x613c32['password'])){_0x613c32=_0x613c32[a9_0x2044('0x16')]();const _0x3d75c8={'id':_0x613c32['id']};const _0xbdbacd=jwt[a9_0x2044('0x17')](_0x3d75c8,configJwt['secret']);delete _0x613c32[a9_0x2044('0x11')];_0x613c32[a9_0x2044('0x18')]=_0xbdbacd;return responseUtils[a9_0x2044('0x19')](_0x5a4fa2,_0x613c32,0xc8);}else{return responseUtils['errorResponse'](_0x5a4fa2,_0x5a4fa2['__'](LocaleStrings[a9_0x2044('0x1a')]),0x193);}})['catch'](_0x597a51=>{return responseUtils[a9_0x2044('0x13')](_0x5a4fa2,_0x597a51[a9_0x2044('0x1b')],0x1f4);});}[a9_0x2044('0xb')](_0x3aa3d3,_0x188e7a,_0x558923){this['model']['findOne']({'where':{'username':_0x3aa3d3['body'][a9_0x2044('0xd')]}})[a9_0x2044('0x12')](function(_0x1019f6){if(_0x1019f6){return responseUtils[a9_0x2044('0x13')](_0x188e7a,_0x188e7a['__'](LocaleStrings[a9_0x2044('0x1c')],_0x3aa3d3['body']['username']),0x193);}else{_0x3aa3d3[a9_0x2044('0x15')]['email']=_0x3aa3d3[a9_0x2044('0x15')][a9_0x2044('0xd')];const _0x40f07c={'username':_0x3aa3d3[a9_0x2044('0x15')]['username'],'password':authUtils[a9_0x2044('0x1d')](_0x3aa3d3[a9_0x2044('0x15')]['password'])};this[a9_0x2044('0x8')][a9_0x2044('0x1e')](_0x40f07c)['then'](function(_0x2e1bdb,_0x5680d8){return responseUtils[a9_0x2044('0x19')](_0x188e7a,_0x2e1bdb,0xc8);})[a9_0x2044('0x1f')](_0x214efb=>{return responseUtils[a9_0x2044('0x13')](_0x188e7a,_0x214efb[a9_0x2044('0x1b')],0x1f4);});}})['catch'](_0xd11247=>{return responseUtils['errorResponse'](_0x188e7a,_0xd11247[a9_0x2044('0x1b')],0x1f4);});}}exports[a9_0x2044('0x20')]=AuthConstroller;