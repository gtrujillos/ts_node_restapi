var a9_0x54f3=['last_name','email','password','errorResponse','toJSON','sign','secret','successResponse','passwordNotMatchError','catch','stack','usernameTakenError','generateHash','create','then','default','jsonwebtoken','i18n','../../config/jwt.js','../../infrastructure/auth-utils','../../infrastructure/response-utils','../../resources/locale-strings','model','login','bind','createAccount','findOne','body','username','first_name'];(function(_0x309302,_0x3bbe2b){var _0x53a8f3=function(_0x500bcb){while(--_0x500bcb){_0x309302['push'](_0x309302['shift']());}};_0x53a8f3(++_0x3bbe2b);}(a9_0x54f3,0x15a));var a9_0x4e4b=function(_0xbc26c9,_0x25f19c){_0xbc26c9=_0xbc26c9-0x0;var _0x3b8a31=a9_0x54f3[_0xbc26c9];return _0x3b8a31;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const jwt=require(a9_0x4e4b('0x0'));const i18n=require(a9_0x4e4b('0x1'));const configJwt=require(a9_0x4e4b('0x2'));const authUtils=require(a9_0x4e4b('0x3'));const responseUtils=require(a9_0x4e4b('0x4'));const LocaleStrings=require(a9_0x4e4b('0x5'));class AuthConstroller{constructor(_0x2c6a6c){this[a9_0x4e4b('0x6')]=_0x2c6a6c;this['login']=this[a9_0x4e4b('0x7')][a9_0x4e4b('0x8')](this);this[a9_0x4e4b('0x9')]=this[a9_0x4e4b('0x9')]['bind'](this);}[a9_0x4e4b('0x7')](_0x277cdb,_0x2183b5,_0x4145af){this[a9_0x4e4b('0x6')][a9_0x4e4b('0xa')]({'where':{'username':_0x277cdb[a9_0x4e4b('0xb')][a9_0x4e4b('0xc')]},'attributes':['id',a9_0x4e4b('0xd'),a9_0x4e4b('0xe'),a9_0x4e4b('0xf'),a9_0x4e4b('0xc'),a9_0x4e4b('0x10')]})['then'](_0x2c6a97=>{if(!_0x2c6a97){return responseUtils[a9_0x4e4b('0x11')](_0x2183b5,LocaleStrings['usernameNotFoundError'],0x193);}if(authUtils['validPassword'](_0x277cdb[a9_0x4e4b('0xb')][a9_0x4e4b('0x10')],_0x2c6a97[a9_0x4e4b('0x10')])){_0x2c6a97=_0x2c6a97[a9_0x4e4b('0x12')]();const _0x98da32={'id':_0x2c6a97['id']};const _0x308840=jwt[a9_0x4e4b('0x13')](_0x98da32,configJwt[a9_0x4e4b('0x14')]);delete _0x2c6a97['password'];_0x2c6a97['token']=_0x308840;return responseUtils[a9_0x4e4b('0x15')](_0x2183b5,_0x2c6a97,0xc8);}else{return responseUtils['errorResponse'](_0x2183b5,_0x2183b5['__'](LocaleStrings[a9_0x4e4b('0x16')]),0x193);}})[a9_0x4e4b('0x17')](_0x4557b7=>{return responseUtils[a9_0x4e4b('0x11')](_0x2183b5,_0x4557b7[a9_0x4e4b('0x18')],0x1f4);});}[a9_0x4e4b('0x9')](_0x2b141f,_0x4e50ff,_0x4c37d0){this['model'][a9_0x4e4b('0xa')]({'where':{'username':_0x2b141f[a9_0x4e4b('0xb')][a9_0x4e4b('0xc')]}})['then'](function(_0x1f081e){if(_0x1f081e){return responseUtils[a9_0x4e4b('0x11')](_0x4e50ff,_0x4e50ff['__'](LocaleStrings[a9_0x4e4b('0x19')],_0x2b141f[a9_0x4e4b('0xb')][a9_0x4e4b('0xc')]),0x193);}else{_0x2b141f[a9_0x4e4b('0xb')][a9_0x4e4b('0xf')]=_0x2b141f[a9_0x4e4b('0xb')][a9_0x4e4b('0xc')];const _0x3672ac={'username':_0x2b141f[a9_0x4e4b('0xb')]['username'],'password':authUtils[a9_0x4e4b('0x1a')](_0x2b141f[a9_0x4e4b('0xb')][a9_0x4e4b('0x10')])};this[a9_0x4e4b('0x6')][a9_0x4e4b('0x1b')](_0x3672ac)[a9_0x4e4b('0x1c')](function(_0x266a0c,_0x54a34e){return responseUtils['successResponse'](_0x4e50ff,_0x266a0c,0xc8);})[a9_0x4e4b('0x17')](_0x4b5f66=>{return responseUtils[a9_0x4e4b('0x11')](_0x4e50ff,_0x4b5f66[a9_0x4e4b('0x18')],0x1f4);});}})['catch'](_0x173192=>{return responseUtils['errorResponse'](_0x4e50ff,_0x173192[a9_0x4e4b('0x18')],0x1f4);});}}exports[a9_0x4e4b('0x1d')]=AuthConstroller;