var a28_0x3d6b=['../../infrastructure/auth-utils','../../resources/locale-strings','model','login','bind','createAccount','findOne','body','username','first_name','email','password','then','usernameNotFoundError','validPassword','toJSON','sign','token','successResponse','catch','errorResponse','stack','usernameTakenError','generateHash','create','default','__esModule','jsonwebtoken','../../config/jwt.js'];(function(_0x4efdfa,_0x702a17){var _0x5b0fb1=function(_0x10cc43){while(--_0x10cc43){_0x4efdfa['push'](_0x4efdfa['shift']());}};_0x5b0fb1(++_0x702a17);}(a28_0x3d6b,0x1ea));var a28_0x4d7b=function(_0x4b8c20,_0x1d0c22){_0x4b8c20=_0x4b8c20-0x0;var _0x3c1b61=a28_0x3d6b[_0x4b8c20];return _0x3c1b61;};'use strict';Object['defineProperty'](exports,a28_0x4d7b('0x0'),{'value':!![]});const jwt=require(a28_0x4d7b('0x1'));const i18n=require('i18n');const configJwt=require(a28_0x4d7b('0x2'));const authUtils=require(a28_0x4d7b('0x3'));const responseUtils=require('../../infrastructure/response-utils');const LocaleStrings=require(a28_0x4d7b('0x4'));class AuthConstroller{constructor(_0x1d4e42){this[a28_0x4d7b('0x5')]=_0x1d4e42;this[a28_0x4d7b('0x6')]=this[a28_0x4d7b('0x6')][a28_0x4d7b('0x7')](this);this[a28_0x4d7b('0x8')]=this[a28_0x4d7b('0x8')]['bind'](this);}[a28_0x4d7b('0x6')](_0xb7b7db,_0x50ddfa,_0x9aabd3){this[a28_0x4d7b('0x5')][a28_0x4d7b('0x9')]({'where':{'username':_0xb7b7db[a28_0x4d7b('0xa')][a28_0x4d7b('0xb')]},'attributes':['id',a28_0x4d7b('0xc'),'last_name',a28_0x4d7b('0xd'),'username',a28_0x4d7b('0xe')]})[a28_0x4d7b('0xf')](_0x58e3e5=>{if(!_0x58e3e5){return responseUtils['errorResponse'](_0x50ddfa,LocaleStrings[a28_0x4d7b('0x10')],0x193);}if(authUtils[a28_0x4d7b('0x11')](_0xb7b7db['body'][a28_0x4d7b('0xe')],_0x58e3e5[a28_0x4d7b('0xe')])){_0x58e3e5=_0x58e3e5[a28_0x4d7b('0x12')]();const _0x33ef0d={'id':_0x58e3e5['id']};const _0x58546c=jwt[a28_0x4d7b('0x13')](_0x33ef0d,configJwt['secret']);delete _0x58e3e5[a28_0x4d7b('0xe')];_0x58e3e5[a28_0x4d7b('0x14')]=_0x58546c;return responseUtils[a28_0x4d7b('0x15')](_0x50ddfa,_0x58e3e5,0xc8);}else{return responseUtils['errorResponse'](_0x50ddfa,_0x50ddfa['__'](LocaleStrings['passwordNotMatchError']),0x193);}})[a28_0x4d7b('0x16')](_0xcf5d99=>{return responseUtils[a28_0x4d7b('0x17')](_0x50ddfa,_0xcf5d99[a28_0x4d7b('0x18')],0x1f4);});}[a28_0x4d7b('0x8')](_0x1cc1bf,_0x4948af,_0x820ae3){this[a28_0x4d7b('0x5')][a28_0x4d7b('0x9')]({'where':{'username':_0x1cc1bf[a28_0x4d7b('0xa')]['username']}})[a28_0x4d7b('0xf')](function(_0x1849e8){if(_0x1849e8){return responseUtils[a28_0x4d7b('0x17')](_0x4948af,_0x4948af['__'](LocaleStrings[a28_0x4d7b('0x19')],_0x1cc1bf[a28_0x4d7b('0xa')][a28_0x4d7b('0xb')]),0x193);}else{_0x1cc1bf[a28_0x4d7b('0xa')][a28_0x4d7b('0xd')]=_0x1cc1bf[a28_0x4d7b('0xa')][a28_0x4d7b('0xb')];const _0x32f416={'username':_0x1cc1bf[a28_0x4d7b('0xa')][a28_0x4d7b('0xb')],'password':authUtils[a28_0x4d7b('0x1a')](_0x1cc1bf[a28_0x4d7b('0xa')][a28_0x4d7b('0xe')])};this[a28_0x4d7b('0x5')][a28_0x4d7b('0x1b')](_0x32f416)[a28_0x4d7b('0xf')](function(_0x54bb5c,_0x101b6d){return responseUtils[a28_0x4d7b('0x15')](_0x4948af,_0x54bb5c,0xc8);})[a28_0x4d7b('0x16')](_0x4c30af=>{return responseUtils[a28_0x4d7b('0x17')](_0x4948af,_0x4c30af[a28_0x4d7b('0x18')],0x1f4);});}})[a28_0x4d7b('0x16')](_0x3d45a8=>{return responseUtils[a28_0x4d7b('0x17')](_0x4948af,_0x3d45a8[a28_0x4d7b('0x18')],0x1f4);});}}exports[a28_0x4d7b('0x1c')]=AuthConstroller;