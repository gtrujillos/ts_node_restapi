var a9_0x37c2=['__esModule','i18n','../../infrastructure/auth-utils','../../infrastructure/response-utils','model','login','findOne','username','first_name','last_name','email','password','errorResponse','usernameNotFoundError','validPassword','body','toJSON','sign','secret','successResponse','passwordNotMatchError','catch','stack','createAccount','usernameTakenError','generateHash','create','default','defineProperty'];(function(_0x530e13,_0x1f01d7){var _0x5cf6ce=function(_0x4d7132){while(--_0x4d7132){_0x530e13['push'](_0x530e13['shift']());}};_0x5cf6ce(++_0x1f01d7);}(a9_0x37c2,0x1ec));var a9_0x12de=function(_0x1361ea,_0x262220){_0x1361ea=_0x1361ea-0x0;var _0x45fce2=a9_0x37c2[_0x1361ea];return _0x45fce2;};'use strict';Object[a9_0x12de('0x0')](exports,a9_0x12de('0x1'),{'value':!![]});const jwt=require('jsonwebtoken');const i18n=require(a9_0x12de('0x2'));const configJwt=require('../../config/jwt.js');const authUtils=require(a9_0x12de('0x3'));const responseUtils=require(a9_0x12de('0x4'));const LocaleStrings=require('../../resources/locale-strings');class AuthConstroller{constructor(_0x3c5a6f){this[a9_0x12de('0x5')]=_0x3c5a6f;this['login']=this[a9_0x12de('0x6')]['bind'](this);this['createAccount']=this['createAccount']['bind'](this);}[a9_0x12de('0x6')](_0x4f3bbc,_0x2a2620,_0x16dc61){this[a9_0x12de('0x5')][a9_0x12de('0x7')]({'where':{'username':_0x4f3bbc['body'][a9_0x12de('0x8')]},'attributes':['id',a9_0x12de('0x9'),a9_0x12de('0xa'),a9_0x12de('0xb'),a9_0x12de('0x8'),a9_0x12de('0xc')]})['then'](_0x169f0a=>{if(!_0x169f0a){return responseUtils[a9_0x12de('0xd')](_0x2a2620,LocaleStrings[a9_0x12de('0xe')],0x193);}if(authUtils[a9_0x12de('0xf')](_0x4f3bbc[a9_0x12de('0x10')]['password'],_0x169f0a[a9_0x12de('0xc')])){_0x169f0a=_0x169f0a[a9_0x12de('0x11')]();const _0x4a5755={'id':_0x169f0a['id']};const _0x98529a=jwt[a9_0x12de('0x12')](_0x4a5755,configJwt[a9_0x12de('0x13')]);delete _0x169f0a[a9_0x12de('0xc')];_0x169f0a['token']=_0x98529a;return responseUtils[a9_0x12de('0x14')](_0x2a2620,_0x169f0a,0xc8);}else{return responseUtils[a9_0x12de('0xd')](_0x2a2620,_0x2a2620['__'](LocaleStrings[a9_0x12de('0x15')]),0x193);}})[a9_0x12de('0x16')](_0x31d80f=>{return responseUtils[a9_0x12de('0xd')](_0x2a2620,_0x31d80f[a9_0x12de('0x17')],0x1f4);});}[a9_0x12de('0x18')](_0x36e647,_0x2e3929,_0xf0d6f5){this[a9_0x12de('0x5')]['findOne']({'where':{'username':_0x36e647['body'][a9_0x12de('0x8')]}})['then'](function(_0x5a8e6f){if(_0x5a8e6f){return responseUtils[a9_0x12de('0xd')](_0x2e3929,_0x2e3929['__'](LocaleStrings[a9_0x12de('0x19')],_0x36e647[a9_0x12de('0x10')][a9_0x12de('0x8')]),0x193);}else{_0x36e647[a9_0x12de('0x10')]['email']=_0x36e647[a9_0x12de('0x10')][a9_0x12de('0x8')];const _0x54c327={'username':_0x36e647[a9_0x12de('0x10')][a9_0x12de('0x8')],'password':authUtils[a9_0x12de('0x1a')](_0x36e647[a9_0x12de('0x10')][a9_0x12de('0xc')])};this['model'][a9_0x12de('0x1b')](_0x54c327)['then'](function(_0x5bee3e,_0x11e29c){return responseUtils['successResponse'](_0x2e3929,_0x5bee3e,0xc8);})[a9_0x12de('0x16')](_0x324b64=>{return responseUtils[a9_0x12de('0xd')](_0x2e3929,_0x324b64[a9_0x12de('0x17')],0x1f4);});}})[a9_0x12de('0x16')](_0x211ed6=>{return responseUtils[a9_0x12de('0xd')](_0x2e3929,_0x211ed6['stack'],0x1f4);});}}exports[a9_0x12de('0x1c')]=AuthConstroller;