var a165_0x1f01=['../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','register','bind','reportStatus','getStatus','devicesController','device_uuid','body','network_info','firmware_info','then','updateOrCreate','player_id','status','playlist','json','playing_item','playersController','find','params','usersModel','log','__importDefault','defineProperty'];(function(_0x4f8457,_0x1f8643){var _0x46be45=function(_0x2fa748){while(--_0x2fa748){_0x4f8457['push'](_0x4f8457['shift']());}};_0x46be45(++_0x1f8643);}(a165_0x1f01,0x178));var a165_0x5d90=function(_0x2c05ff,_0x345f74){_0x2c05ff=_0x2c05ff-0x0;var _0x5ac313=a165_0x1f01[_0x2c05ff];return _0x5ac313;};'use strict';var __importDefault=this&&this[a165_0x5d90('0x0')]||function(_0x3259ce){return _0x3259ce&&_0x3259ce['__esModule']?_0x3259ce:{'default':_0x3259ce};};Object[a165_0x5d90('0x1')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x5d90('0x2')));const sequelize_utils_1=__importDefault(require(a165_0x5d90('0x3')));const responseUtils=require(a165_0x5d90('0x4'));class PlayerDevicesController extends controller_utils_1[a165_0x5d90('0x5')]{constructor(_0x484bb9,_0x3f0ad1,_0x578c83){super(_0x484bb9,null);this['devicesController']=_0x3f0ad1;this['playersController']=_0x578c83;this[a165_0x5d90('0x6')]=this['register'][a165_0x5d90('0x7')](this);this['reportStatus']=this[a165_0x5d90('0x8')][a165_0x5d90('0x7')](this);this[a165_0x5d90('0x9')]=this[a165_0x5d90('0x9')][a165_0x5d90('0x7')](this);}[a165_0x5d90('0x6')](_0x123ed2,_0x213269,_0x540865){return this[a165_0x5d90('0xa')]['updateOrCreate']({'params':{'uuid':_0x123ed2['body'][a165_0x5d90('0xb')]},'body':{'uuid':_0x123ed2[a165_0x5d90('0xc')][a165_0x5d90('0xb')],'network_info':_0x123ed2[a165_0x5d90('0xc')][a165_0x5d90('0xd')],'firmware_info':_0x123ed2[a165_0x5d90('0xc')][a165_0x5d90('0xe')]}},null,_0x540865,!![])[a165_0x5d90('0xf')](_0x3dc928=>{return this[a165_0x5d90('0x10')]({'params':{'device_id':_0x3dc928['id'],'player_id':_0x123ed2[a165_0x5d90('0xc')][a165_0x5d90('0x11')]},'body':{'device_id':_0x3dc928['id'],'player_id':_0x123ed2['body'][a165_0x5d90('0x11')],'status':_0x123ed2[a165_0x5d90('0xc')][a165_0x5d90('0x12')],'playlist':_0x123ed2[a165_0x5d90('0xc')][a165_0x5d90('0x13')],'reported_at':new Date()}},null,_0x540865)[a165_0x5d90('0xf')](_0x367a67=>{delete _0x3dc928['id'];return _0x213269[a165_0x5d90('0x14')]({'success':!![],'data':_0x3dc928});});});}[a165_0x5d90('0x8')](_0x8d1373,_0x4ca196,_0x56cb12){return this['devicesController'][a165_0x5d90('0x10')]({'params':{'uuid':_0x8d1373['body'][a165_0x5d90('0xb')]},'body':{'uuid':_0x8d1373[a165_0x5d90('0xc')]['device_uuid']}},null,_0x56cb12,!![])[a165_0x5d90('0xf')](_0x5b5628=>{return this[a165_0x5d90('0x10')]({'params':{'device_id':_0x5b5628['id'],'player_id':_0x8d1373[a165_0x5d90('0xc')][a165_0x5d90('0x11')]},'body':{'device_id':_0x5b5628['id'],'player_id':_0x8d1373[a165_0x5d90('0xc')]['player_id'],'playing_item':_0x8d1373[a165_0x5d90('0xc')][a165_0x5d90('0x15')],'status':_0x8d1373[a165_0x5d90('0xc')][a165_0x5d90('0x12')],'reported_at':new Date()}},null,_0x56cb12)[a165_0x5d90('0xf')](_0x17a25b=>{delete _0x5b5628['id'];return _0x4ca196[a165_0x5d90('0x14')]({'success':!![],'data':_0x17a25b});});});}[a165_0x5d90('0x9')](_0x46dd38,_0x15ba65,_0x3915e3){return this[a165_0x5d90('0x16')][a165_0x5d90('0x17')]({'params':{'$user.uuid$':_0x46dd38[a165_0x5d90('0x18')]['user_uuid']}},null,_0x3915e3,!![],[sequelize_utils_1[a165_0x5d90('0x5')]['models'][a165_0x5d90('0x19')],sequelize_utils_1['default']['models']['playerDevicesModel']])['then'](_0x476185=>{console[a165_0x5d90('0x1a')](_0x476185);return _0x15ba65[a165_0x5d90('0x14')]({'success':!![],'data':_0x476185});});}}exports[a165_0x5d90('0x5')]=PlayerDevicesController;