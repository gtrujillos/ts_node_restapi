var a165_0x491d=['firmware_info','then','player_id','json','playing_item','params','user_uuid','usersModel','models','playerDevicesModel','log','__importDefault','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info'];(function(_0x24f3a8,_0x2cecb2){var _0x33ea6a=function(_0x485ce1){while(--_0x485ce1){_0x24f3a8['push'](_0x24f3a8['shift']());}};_0x33ea6a(++_0x2cecb2);}(a165_0x491d,0x1bb));var a165_0x37f3=function(_0x4f75ad,_0x3ec6cf){_0x4f75ad=_0x4f75ad-0x0;var _0x56e49e=a165_0x491d[_0x4f75ad];return _0x56e49e;};'use strict';var __importDefault=this&&this[a165_0x37f3('0x0')]||function(_0x1d3120){return _0x1d3120&&_0x1d3120[a165_0x37f3('0x1')]?_0x1d3120:{'default':_0x1d3120};};Object['defineProperty'](exports,a165_0x37f3('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x37f3('0x2')));const sequelize_utils_1=__importDefault(require(a165_0x37f3('0x3')));const responseUtils=require(a165_0x37f3('0x4'));class PlayerDevicesController extends controller_utils_1[a165_0x37f3('0x5')]{constructor(_0x5e6ee7,_0x303612,_0x3ef1b1){super(_0x5e6ee7,null);this[a165_0x37f3('0x6')]=_0x303612;this[a165_0x37f3('0x7')]=_0x3ef1b1;this[a165_0x37f3('0x8')]=this[a165_0x37f3('0x8')][a165_0x37f3('0x9')](this);this[a165_0x37f3('0xa')]=this[a165_0x37f3('0xa')][a165_0x37f3('0x9')](this);this[a165_0x37f3('0xb')]=this[a165_0x37f3('0xb')][a165_0x37f3('0x9')](this);}[a165_0x37f3('0x8')](_0x4fb2d5,_0x5e3a84,_0x31f0a2){return this['devicesController'][a165_0x37f3('0xc')]({'params':{'uuid':_0x4fb2d5[a165_0x37f3('0xd')][a165_0x37f3('0xe')]},'body':{'uuid':_0x4fb2d5[a165_0x37f3('0xd')][a165_0x37f3('0xe')],'network_info':_0x4fb2d5['body'][a165_0x37f3('0xf')],'firmware_info':_0x4fb2d5[a165_0x37f3('0xd')][a165_0x37f3('0x10')]}},null,_0x31f0a2,!![])[a165_0x37f3('0x11')](_0x46eec4=>{return this[a165_0x37f3('0xc')]({'params':{'device_id':_0x46eec4['id'],'player_id':_0x4fb2d5[a165_0x37f3('0xd')][a165_0x37f3('0x12')]},'body':{'device_id':_0x46eec4['id'],'player_id':_0x4fb2d5[a165_0x37f3('0xd')][a165_0x37f3('0x12')],'status':_0x4fb2d5[a165_0x37f3('0xd')]['status'],'playlist':_0x4fb2d5[a165_0x37f3('0xd')]['playlist'],'reported_at':new Date()}},null,_0x31f0a2)['then'](_0x4777e0=>{delete _0x46eec4['id'];return _0x5e3a84[a165_0x37f3('0x13')]({'success':!![],'data':_0x46eec4});});});}[a165_0x37f3('0xa')](_0x386c19,_0x4e93c,_0x4a3321){return this[a165_0x37f3('0x6')][a165_0x37f3('0xc')]({'params':{'uuid':_0x386c19[a165_0x37f3('0xd')][a165_0x37f3('0xe')]},'body':{'uuid':_0x386c19[a165_0x37f3('0xd')][a165_0x37f3('0xe')]}},null,_0x4a3321,!![])[a165_0x37f3('0x11')](_0x4eef94=>{return this[a165_0x37f3('0xc')]({'params':{'device_id':_0x4eef94['id'],'player_id':_0x386c19[a165_0x37f3('0xd')]['player_id']},'body':{'device_id':_0x4eef94['id'],'player_id':_0x386c19[a165_0x37f3('0xd')][a165_0x37f3('0x12')],'playing_item':_0x386c19[a165_0x37f3('0xd')][a165_0x37f3('0x14')],'status':_0x386c19[a165_0x37f3('0xd')]['status'],'reported_at':new Date()}},null,_0x4a3321)['then'](_0x15204e=>{delete _0x4eef94['id'];return _0x4e93c[a165_0x37f3('0x13')]({'success':!![],'data':_0x15204e});});});}[a165_0x37f3('0xb')](_0x4ee581,_0x427b68,_0xe0ad22){return this[a165_0x37f3('0x7')]['find']({'params':{'$user.uuid$':_0x4ee581[a165_0x37f3('0x15')][a165_0x37f3('0x16')]}},null,_0xe0ad22,!![],[sequelize_utils_1['default']['models'][a165_0x37f3('0x17')],sequelize_utils_1[a165_0x37f3('0x5')][a165_0x37f3('0x18')][a165_0x37f3('0x19')]])['then'](_0x2a2c50=>{console[a165_0x37f3('0x1a')](_0x2a2c50);return _0x427b68['json']({'success':!![],'data':_0x2a2c50});});}}exports[a165_0x37f3('0x5')]=PlayerDevicesController;