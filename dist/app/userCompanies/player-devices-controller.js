var a165_0x4fcc=['params','user_uuid','default','models','usersModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','devicesController','register','reportStatus','bind','getStatus','updateOrCreate','device_uuid','body','network_info','firmware_info','player_id','status','playlist','then','playing_item','json','find'];(function(_0x43f66c,_0x3d72ac){var _0x322e7d=function(_0x512ba6){while(--_0x512ba6){_0x43f66c['push'](_0x43f66c['shift']());}};_0x322e7d(++_0x3d72ac);}(a165_0x4fcc,0xe6));var a165_0x27d9=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a165_0x4fcc[_0x2d8f05];return _0x4d74cb;};'use strict';var __importDefault=this&&this[a165_0x27d9('0x0')]||function(_0x4c30a4){return _0x4c30a4&&_0x4c30a4[a165_0x27d9('0x1')]?_0x4c30a4:{'default':_0x4c30a4};};Object[a165_0x27d9('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a165_0x27d9('0x3')));const responseUtils=require(a165_0x27d9('0x4'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x3bfa12,_0x4f6348,_0xe27ec4){super(_0x3bfa12,null);this[a165_0x27d9('0x5')]=_0x4f6348;this['playersController']=_0xe27ec4;this['register']=this[a165_0x27d9('0x6')]['bind'](this);this[a165_0x27d9('0x7')]=this[a165_0x27d9('0x7')][a165_0x27d9('0x8')](this);this['getStatus']=this[a165_0x27d9('0x9')]['bind'](this);}['register'](_0x3dcc23,_0x19d1f8,_0x2897c3){return this[a165_0x27d9('0x5')][a165_0x27d9('0xa')]({'params':{'uuid':_0x3dcc23['body']['device_uuid']},'body':{'uuid':_0x3dcc23['body'][a165_0x27d9('0xb')],'network_info':_0x3dcc23[a165_0x27d9('0xc')][a165_0x27d9('0xd')],'firmware_info':_0x3dcc23[a165_0x27d9('0xc')][a165_0x27d9('0xe')]}},null,_0x2897c3,!![])['then'](_0x545747=>{return this[a165_0x27d9('0xa')]({'params':{'device_id':_0x545747['id'],'player_id':_0x3dcc23[a165_0x27d9('0xc')][a165_0x27d9('0xf')]},'body':{'device_id':_0x545747['id'],'player_id':_0x3dcc23[a165_0x27d9('0xc')]['player_id'],'status':_0x3dcc23[a165_0x27d9('0xc')][a165_0x27d9('0x10')],'playlist':_0x3dcc23[a165_0x27d9('0xc')][a165_0x27d9('0x11')],'reported_at':new Date()}},null,_0x2897c3)[a165_0x27d9('0x12')](_0x28fb55=>{delete _0x545747['id'];return _0x19d1f8['json']({'success':!![],'data':_0x545747});});});}['reportStatus'](_0x117e70,_0x1f93dd,_0xc051c8){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x117e70['body'][a165_0x27d9('0xb')]},'body':{'uuid':_0x117e70[a165_0x27d9('0xc')]['device_uuid']}},null,_0xc051c8,!![])[a165_0x27d9('0x12')](_0x1b3da9=>{return this[a165_0x27d9('0xa')]({'params':{'device_id':_0x1b3da9['id'],'player_id':_0x117e70['body']['player_id']},'body':{'device_id':_0x1b3da9['id'],'player_id':_0x117e70[a165_0x27d9('0xc')][a165_0x27d9('0xf')],'playing_item':_0x117e70[a165_0x27d9('0xc')][a165_0x27d9('0x13')],'status':_0x117e70[a165_0x27d9('0xc')]['status'],'reported_at':new Date()}},null,_0xc051c8)[a165_0x27d9('0x12')](_0x328235=>{delete _0x1b3da9['id'];return _0x1f93dd[a165_0x27d9('0x14')]({'success':!![],'data':_0x328235});});});}[a165_0x27d9('0x9')](_0x2a548c,_0x5b4497,_0x4e0455){return this['playersController'][a165_0x27d9('0x15')]({'params':{'$user.uuid$':_0x2a548c[a165_0x27d9('0x16')][a165_0x27d9('0x17')]}},null,_0x4e0455,!![],[sequelize_utils_1[a165_0x27d9('0x18')][a165_0x27d9('0x19')][a165_0x27d9('0x1a')],sequelize_utils_1[a165_0x27d9('0x18')][a165_0x27d9('0x19')]['playerDevicesModel']])[a165_0x27d9('0x12')](_0x230aa3=>{console[a165_0x27d9('0x1b')](_0x230aa3);return _0x5b4497[a165_0x27d9('0x14')]({'success':!![],'data':_0x230aa3});});}}exports[a165_0x27d9('0x18')]=PlayerDevicesController;