var a165_0x1d69=['playerDevicesModel','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','network_info','firmware_info','then','player_id','status','json','device_uuid','playing_item','find','params','user_uuid','models','usersModel'];(function(_0x4c8ba6,_0x4a2cb9){var _0x2caa51=function(_0x496147){while(--_0x496147){_0x4c8ba6['push'](_0x4c8ba6['shift']());}};_0x2caa51(++_0x4a2cb9);}(a165_0x1d69,0x1dd));var a165_0x522b=function(_0x52fccb,_0x58c596){_0x52fccb=_0x52fccb-0x0;var _0xda0055=a165_0x1d69[_0x52fccb];return _0xda0055;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x489d5a){return _0x489d5a&&_0x489d5a[a165_0x522b('0x0')]?_0x489d5a:{'default':_0x489d5a};};Object[a165_0x522b('0x1')](exports,a165_0x522b('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x522b('0x2')));const sequelize_utils_1=__importDefault(require(a165_0x522b('0x3')));const responseUtils=require(a165_0x522b('0x4'));class PlayerDevicesController extends controller_utils_1[a165_0x522b('0x5')]{constructor(_0x4929da,_0x4c0330,_0xa7f4a9){super(_0x4929da,null);this[a165_0x522b('0x6')]=_0x4c0330;this[a165_0x522b('0x7')]=_0xa7f4a9;this[a165_0x522b('0x8')]=this['register'][a165_0x522b('0x9')](this);this['reportStatus']=this[a165_0x522b('0xa')]['bind'](this);this[a165_0x522b('0xb')]=this[a165_0x522b('0xb')][a165_0x522b('0x9')](this);}['register'](_0x1f9f12,_0x198d08,_0xd3b455){return this[a165_0x522b('0x6')][a165_0x522b('0xc')]({'params':{'uuid':_0x1f9f12[a165_0x522b('0xd')]['device_uuid']},'body':{'uuid':_0x1f9f12[a165_0x522b('0xd')]['device_uuid'],'network_info':_0x1f9f12[a165_0x522b('0xd')][a165_0x522b('0xe')],'firmware_info':_0x1f9f12[a165_0x522b('0xd')][a165_0x522b('0xf')]}},null,_0xd3b455,!![])[a165_0x522b('0x10')](_0x3e8e26=>{return this['updateOrCreate']({'params':{'device_id':_0x3e8e26['id'],'player_id':_0x1f9f12[a165_0x522b('0xd')][a165_0x522b('0x11')]},'body':{'device_id':_0x3e8e26['id'],'player_id':_0x1f9f12[a165_0x522b('0xd')][a165_0x522b('0x11')],'status':_0x1f9f12['body'][a165_0x522b('0x12')],'playlist':_0x1f9f12['body']['playlist'],'reported_at':new Date()}},null,_0xd3b455)[a165_0x522b('0x10')](_0x152620=>{delete _0x3e8e26['id'];return _0x198d08[a165_0x522b('0x13')]({'success':!![],'data':_0x3e8e26});});});}[a165_0x522b('0xa')](_0x389feb,_0x141932,_0x759841){return this[a165_0x522b('0x6')][a165_0x522b('0xc')]({'params':{'uuid':_0x389feb['body'][a165_0x522b('0x14')]},'body':{'uuid':_0x389feb[a165_0x522b('0xd')]['device_uuid']}},null,_0x759841,!![])[a165_0x522b('0x10')](_0x29ee9d=>{return this['updateOrCreate']({'params':{'device_id':_0x29ee9d['id'],'player_id':_0x389feb['body'][a165_0x522b('0x11')]},'body':{'device_id':_0x29ee9d['id'],'player_id':_0x389feb[a165_0x522b('0xd')][a165_0x522b('0x11')],'playing_item':_0x389feb[a165_0x522b('0xd')][a165_0x522b('0x15')],'status':_0x389feb['body'][a165_0x522b('0x12')],'reported_at':new Date()}},null,_0x759841)[a165_0x522b('0x10')](_0x2777ca=>{delete _0x29ee9d['id'];return _0x141932['json']({'success':!![],'data':_0x2777ca});});});}[a165_0x522b('0xb')](_0x1739ba,_0x4899a3,_0x2c4ea4){return this['playersController'][a165_0x522b('0x16')]({'params':{'$user.uuid$':_0x1739ba[a165_0x522b('0x17')][a165_0x522b('0x18')]}},null,_0x2c4ea4,!![],[sequelize_utils_1[a165_0x522b('0x5')][a165_0x522b('0x19')][a165_0x522b('0x1a')],sequelize_utils_1[a165_0x522b('0x5')]['models'][a165_0x522b('0x1b')]])[a165_0x522b('0x10')](_0x4a934f=>{console['log'](_0x4a934f);return _0x4899a3[a165_0x522b('0x13')]({'success':!![],'data':_0x4a934f});});}}exports['default']=PlayerDevicesController;