var a165_0x3130=['playlist','json','player_id','playing_item','playersController','find','params','models','usersModel','default','__importDefault','__esModule','defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','register','reportStatus','bind','getStatus','devicesController','updateOrCreate','device_uuid','network_info','body','firmware_info','then','status'];(function(_0x349e83,_0x560c8b){var _0x5a5c1e=function(_0x1fa259){while(--_0x1fa259){_0x349e83['push'](_0x349e83['shift']());}};_0x5a5c1e(++_0x560c8b);}(a165_0x3130,0x19f));var a165_0x57d6=function(_0x17526e,_0x2e388c){_0x17526e=_0x17526e-0x0;var _0x47c46a=a165_0x3130[_0x17526e];return _0x47c46a;};'use strict';var __importDefault=this&&this[a165_0x57d6('0x0')]||function(_0x2b5178){return _0x2b5178&&_0x2b5178[a165_0x57d6('0x1')]?_0x2b5178:{'default':_0x2b5178};};Object[a165_0x57d6('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a165_0x57d6('0x3')));const responseUtils=require(a165_0x57d6('0x4'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x59760b,_0x6e2026,_0x42cc43){super(_0x59760b,null);this['devicesController']=_0x6e2026;this['playersController']=_0x42cc43;this[a165_0x57d6('0x5')]=this[a165_0x57d6('0x5')]['bind'](this);this[a165_0x57d6('0x6')]=this[a165_0x57d6('0x6')][a165_0x57d6('0x7')](this);this[a165_0x57d6('0x8')]=this['getStatus']['bind'](this);}['register'](_0x27045c,_0x2cdbf9,_0x231b88){return this[a165_0x57d6('0x9')][a165_0x57d6('0xa')]({'params':{'uuid':_0x27045c['body'][a165_0x57d6('0xb')]},'body':{'uuid':_0x27045c['body'][a165_0x57d6('0xb')],'network_info':_0x27045c['body'][a165_0x57d6('0xc')],'firmware_info':_0x27045c[a165_0x57d6('0xd')][a165_0x57d6('0xe')]}},null,_0x231b88,!![])[a165_0x57d6('0xf')](_0x2d700b=>{return this[a165_0x57d6('0xa')]({'params':{'device_id':_0x2d700b['id'],'player_id':_0x27045c['body']['player_id']},'body':{'device_id':_0x2d700b['id'],'player_id':_0x27045c['body']['player_id'],'status':_0x27045c['body'][a165_0x57d6('0x10')],'playlist':_0x27045c['body'][a165_0x57d6('0x11')],'reported_at':new Date()}},null,_0x231b88)[a165_0x57d6('0xf')](_0x4710aa=>{delete _0x2d700b['id'];return _0x2cdbf9[a165_0x57d6('0x12')]({'success':!![],'data':_0x2d700b});});});}[a165_0x57d6('0x6')](_0x3a2f72,_0x173371,_0x3c4056){return this[a165_0x57d6('0x9')][a165_0x57d6('0xa')]({'params':{'uuid':_0x3a2f72['body']['device_uuid']},'body':{'uuid':_0x3a2f72[a165_0x57d6('0xd')]['device_uuid']}},null,_0x3c4056,!![])[a165_0x57d6('0xf')](_0xac1b46=>{return this[a165_0x57d6('0xa')]({'params':{'device_id':_0xac1b46['id'],'player_id':_0x3a2f72[a165_0x57d6('0xd')][a165_0x57d6('0x13')]},'body':{'device_id':_0xac1b46['id'],'player_id':_0x3a2f72['body']['player_id'],'playing_item':_0x3a2f72[a165_0x57d6('0xd')][a165_0x57d6('0x14')],'status':_0x3a2f72[a165_0x57d6('0xd')]['status'],'reported_at':new Date()}},null,_0x3c4056)['then'](_0x478f45=>{delete _0xac1b46['id'];return _0x173371[a165_0x57d6('0x12')]({'success':!![],'data':_0x478f45});});});}['getStatus'](_0x3544e1,_0x19ee09,_0x2398b1){return this[a165_0x57d6('0x15')][a165_0x57d6('0x16')]({'params':{'$user.uuid$':_0x3544e1[a165_0x57d6('0x17')]['user_uuid']}},null,_0x2398b1,!![],[sequelize_utils_1['default'][a165_0x57d6('0x18')][a165_0x57d6('0x19')],sequelize_utils_1[a165_0x57d6('0x1a')][a165_0x57d6('0x18')]['playerDevicesModel']])[a165_0x57d6('0xf')](_0x4e7953=>{console['log'](_0x4e7953);return _0x19ee09[a165_0x57d6('0x12')]({'success':!![],'data':_0x4e7953});});}}exports[a165_0x57d6('0x1a')]=PlayerDevicesController;