var a165_0x3603=['bind','reportStatus','getStatus','body','device_uuid','network_info','then','updateOrCreate','player_id','status','json','playing_item','find','user_uuid','default','models','usersModel','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','devicesController','playersController','register'];(function(_0x173d3e,_0x4120ae){var _0x5158c5=function(_0x1833b5){while(--_0x1833b5){_0x173d3e['push'](_0x173d3e['shift']());}};_0x5158c5(++_0x4120ae);}(a165_0x3603,0x157));var a165_0x3e61=function(_0x42016f,_0x268b0e){_0x42016f=_0x42016f-0x0;var _0x23bc2a=a165_0x3603[_0x42016f];return _0x23bc2a;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x32f488){return _0x32f488&&_0x32f488[a165_0x3e61('0x0')]?_0x32f488:{'default':_0x32f488};};Object[a165_0x3e61('0x1')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x3e61('0x2')));const sequelize_utils_1=__importDefault(require(a165_0x3e61('0x3')));const responseUtils=require(a165_0x3e61('0x4'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x3311d5,_0x5c50df,_0x147e36){super(_0x3311d5,null);this[a165_0x3e61('0x5')]=_0x5c50df;this[a165_0x3e61('0x6')]=_0x147e36;this['register']=this[a165_0x3e61('0x7')][a165_0x3e61('0x8')](this);this[a165_0x3e61('0x9')]=this[a165_0x3e61('0x9')][a165_0x3e61('0x8')](this);this['getStatus']=this[a165_0x3e61('0xa')]['bind'](this);}[a165_0x3e61('0x7')](_0x17c603,_0x440696,_0x2e6773){return this[a165_0x3e61('0x5')]['updateOrCreate']({'params':{'uuid':_0x17c603[a165_0x3e61('0xb')]['device_uuid']},'body':{'uuid':_0x17c603['body'][a165_0x3e61('0xc')],'network_info':_0x17c603[a165_0x3e61('0xb')][a165_0x3e61('0xd')],'firmware_info':_0x17c603[a165_0x3e61('0xb')]['firmware_info']}},null,_0x2e6773,!![])[a165_0x3e61('0xe')](_0x50afa9=>{return this[a165_0x3e61('0xf')]({'params':{'device_id':_0x50afa9['id'],'player_id':_0x17c603['body'][a165_0x3e61('0x10')]},'body':{'device_id':_0x50afa9['id'],'player_id':_0x17c603[a165_0x3e61('0xb')][a165_0x3e61('0x10')],'status':_0x17c603[a165_0x3e61('0xb')][a165_0x3e61('0x11')],'playlist':_0x17c603[a165_0x3e61('0xb')]['playlist'],'reported_at':new Date()}},null,_0x2e6773)[a165_0x3e61('0xe')](_0x2fa491=>{delete _0x50afa9['id'];return _0x440696[a165_0x3e61('0x12')]({'success':!![],'data':_0x50afa9});});});}[a165_0x3e61('0x9')](_0x289d3f,_0x22ec8a,_0xbd37f6){return this[a165_0x3e61('0x5')][a165_0x3e61('0xf')]({'params':{'uuid':_0x289d3f[a165_0x3e61('0xb')][a165_0x3e61('0xc')]},'body':{'uuid':_0x289d3f[a165_0x3e61('0xb')][a165_0x3e61('0xc')]}},null,_0xbd37f6,!![])[a165_0x3e61('0xe')](_0x469f1a=>{return this[a165_0x3e61('0xf')]({'params':{'device_id':_0x469f1a['id'],'player_id':_0x289d3f[a165_0x3e61('0xb')][a165_0x3e61('0x10')]},'body':{'device_id':_0x469f1a['id'],'player_id':_0x289d3f[a165_0x3e61('0xb')]['player_id'],'playing_item':_0x289d3f[a165_0x3e61('0xb')][a165_0x3e61('0x13')],'status':_0x289d3f[a165_0x3e61('0xb')][a165_0x3e61('0x11')],'reported_at':new Date()}},null,_0xbd37f6)[a165_0x3e61('0xe')](_0x3b1c8f=>{delete _0x469f1a['id'];return _0x22ec8a[a165_0x3e61('0x12')]({'success':!![],'data':_0x3b1c8f});});});}[a165_0x3e61('0xa')](_0x47bb58,_0x2cdd5f,_0x57b830){return this['playersController'][a165_0x3e61('0x14')]({'params':{'$user.uuid$':_0x47bb58['params'][a165_0x3e61('0x15')]}},null,_0x57b830,!![],[sequelize_utils_1[a165_0x3e61('0x16')][a165_0x3e61('0x17')][a165_0x3e61('0x18')],sequelize_utils_1[a165_0x3e61('0x16')]['models'][a165_0x3e61('0x19')]])['then'](_0x5df66e=>{console[a165_0x3e61('0x1a')](_0x5df66e);return _0x2cdd5f[a165_0x3e61('0x12')]({'success':!![],'data':_0x5df66e});});}}exports[a165_0x3e61('0x16')]=PlayerDevicesController;