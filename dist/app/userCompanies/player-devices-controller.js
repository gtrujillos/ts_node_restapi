var a165_0x1ec7=['models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty','devicesController','playersController','register','bind','reportStatus','getStatus','body','device_uuid','network_info','firmware_info','then','updateOrCreate','player_id','status','playlist','playing_item','json','find','params','user_uuid','default'];(function(_0x53ef83,_0x5151df){var _0x175ab5=function(_0x57a0f6){while(--_0x57a0f6){_0x53ef83['push'](_0x53ef83['shift']());}};_0x175ab5(++_0x5151df);}(a165_0x1ec7,0x1c4));var a165_0x1938=function(_0x1b9ddd,_0x3432d2){_0x1b9ddd=_0x1b9ddd-0x0;var _0x1af502=a165_0x1ec7[_0x1b9ddd];return _0x1af502;};'use strict';var __importDefault=this&&this[a165_0x1938('0x0')]||function(_0xf12423){return _0xf12423&&_0xf12423[a165_0x1938('0x1')]?_0xf12423:{'default':_0xf12423};};Object[a165_0x1938('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x4f4525,_0x546888,_0x3bfe2b){super(_0x4f4525,null);this[a165_0x1938('0x3')]=_0x546888;this[a165_0x1938('0x4')]=_0x3bfe2b;this['register']=this[a165_0x1938('0x5')][a165_0x1938('0x6')](this);this['reportStatus']=this[a165_0x1938('0x7')][a165_0x1938('0x6')](this);this[a165_0x1938('0x8')]=this[a165_0x1938('0x8')]['bind'](this);}[a165_0x1938('0x5')](_0xac3d41,_0x367550,_0x5bfcdd){return this[a165_0x1938('0x3')]['updateOrCreate']({'params':{'uuid':_0xac3d41[a165_0x1938('0x9')]['device_uuid']},'body':{'uuid':_0xac3d41[a165_0x1938('0x9')][a165_0x1938('0xa')],'network_info':_0xac3d41[a165_0x1938('0x9')][a165_0x1938('0xb')],'firmware_info':_0xac3d41['body'][a165_0x1938('0xc')]}},null,_0x5bfcdd,!![])[a165_0x1938('0xd')](_0x8b0419=>{return this[a165_0x1938('0xe')]({'params':{'device_id':_0x8b0419['id'],'player_id':_0xac3d41[a165_0x1938('0x9')][a165_0x1938('0xf')]},'body':{'device_id':_0x8b0419['id'],'player_id':_0xac3d41[a165_0x1938('0x9')][a165_0x1938('0xf')],'status':_0xac3d41[a165_0x1938('0x9')][a165_0x1938('0x10')],'playlist':_0xac3d41[a165_0x1938('0x9')][a165_0x1938('0x11')],'reported_at':new Date()}},null,_0x5bfcdd)[a165_0x1938('0xd')](_0x1b2c34=>{delete _0x8b0419['id'];return _0x367550['json']({'success':!![],'data':_0x8b0419});});});}['reportStatus'](_0x1a5656,_0x2deede,_0x36dde5){return this[a165_0x1938('0x3')][a165_0x1938('0xe')]({'params':{'uuid':_0x1a5656[a165_0x1938('0x9')][a165_0x1938('0xa')]},'body':{'uuid':_0x1a5656['body']['device_uuid']}},null,_0x36dde5,!![])['then'](_0x23dac6=>{return this[a165_0x1938('0xe')]({'params':{'device_id':_0x23dac6['id'],'player_id':_0x1a5656[a165_0x1938('0x9')]['player_id']},'body':{'device_id':_0x23dac6['id'],'player_id':_0x1a5656[a165_0x1938('0x9')][a165_0x1938('0xf')],'playing_item':_0x1a5656[a165_0x1938('0x9')][a165_0x1938('0x12')],'status':_0x1a5656['body']['status'],'reported_at':new Date()}},null,_0x36dde5)['then'](_0x281ac8=>{delete _0x23dac6['id'];return _0x2deede[a165_0x1938('0x13')]({'success':!![],'data':_0x281ac8});});});}[a165_0x1938('0x8')](_0xe0a56f,_0x483d0b,_0x4734bf){return this[a165_0x1938('0x4')][a165_0x1938('0x14')]({'params':{'$user.uuid$':_0xe0a56f[a165_0x1938('0x15')][a165_0x1938('0x16')]}},null,_0x4734bf,!![],[sequelize_utils_1[a165_0x1938('0x17')][a165_0x1938('0x18')][a165_0x1938('0x19')],sequelize_utils_1[a165_0x1938('0x17')]['models'][a165_0x1938('0x1a')]])[a165_0x1938('0xd')](_0x31f567=>{console[a165_0x1938('0x1b')](_0x31f567);return _0x483d0b['json']({'success':!![],'data':_0x31f567});});}}exports[a165_0x1938('0x17')]=PlayerDevicesController;