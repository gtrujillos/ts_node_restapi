var a165_0x2433=['find','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','playersController','register','bind','reportStatus','getStatus','body','device_uuid','network_info','firmware_info','then','updateOrCreate','player_id','status','playlist','json','devicesController','playing_item'];(function(_0x340a64,_0x9d0c78){var _0x27040a=function(_0xb9f136){while(--_0xb9f136){_0x340a64['push'](_0x340a64['shift']());}};_0x27040a(++_0x9d0c78);}(a165_0x2433,0xd9));var a165_0x14a6=function(_0x3e2676,_0x53a8fb){_0x3e2676=_0x3e2676-0x0;var _0x14b4ad=a165_0x2433[_0x3e2676];return _0x14b4ad;};'use strict';var __importDefault=this&&this[a165_0x14a6('0x0')]||function(_0x45d1f5){return _0x45d1f5&&_0x45d1f5['__esModule']?_0x45d1f5:{'default':_0x45d1f5};};Object['defineProperty'](exports,a165_0x14a6('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x14a6('0x2')));const sequelize_utils_1=__importDefault(require(a165_0x14a6('0x3')));const responseUtils=require(a165_0x14a6('0x4'));class PlayerDevicesController extends controller_utils_1[a165_0x14a6('0x5')]{constructor(_0x511025,_0x16fccd,_0x15267b){super(_0x511025,null);this['devicesController']=_0x16fccd;this[a165_0x14a6('0x6')]=_0x15267b;this[a165_0x14a6('0x7')]=this[a165_0x14a6('0x7')][a165_0x14a6('0x8')](this);this[a165_0x14a6('0x9')]=this[a165_0x14a6('0x9')]['bind'](this);this['getStatus']=this[a165_0x14a6('0xa')][a165_0x14a6('0x8')](this);}['register'](_0xe05c20,_0x40c4f2,_0x4802dd){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0xe05c20[a165_0x14a6('0xb')][a165_0x14a6('0xc')]},'body':{'uuid':_0xe05c20['body'][a165_0x14a6('0xc')],'network_info':_0xe05c20[a165_0x14a6('0xb')][a165_0x14a6('0xd')],'firmware_info':_0xe05c20[a165_0x14a6('0xb')][a165_0x14a6('0xe')]}},null,_0x4802dd,!![])[a165_0x14a6('0xf')](_0x3028c5=>{return this[a165_0x14a6('0x10')]({'params':{'device_id':_0x3028c5['id'],'player_id':_0xe05c20['body'][a165_0x14a6('0x11')]},'body':{'device_id':_0x3028c5['id'],'player_id':_0xe05c20[a165_0x14a6('0xb')][a165_0x14a6('0x11')],'status':_0xe05c20[a165_0x14a6('0xb')][a165_0x14a6('0x12')],'playlist':_0xe05c20[a165_0x14a6('0xb')][a165_0x14a6('0x13')],'reported_at':new Date()}},null,_0x4802dd)[a165_0x14a6('0xf')](_0x17d6ea=>{delete _0x3028c5['id'];return _0x40c4f2[a165_0x14a6('0x14')]({'success':!![],'data':_0x3028c5});});});}['reportStatus'](_0xb477ce,_0x3e759b,_0x51dc1c){return this[a165_0x14a6('0x15')]['updateOrCreate']({'params':{'uuid':_0xb477ce[a165_0x14a6('0xb')][a165_0x14a6('0xc')]},'body':{'uuid':_0xb477ce[a165_0x14a6('0xb')][a165_0x14a6('0xc')]}},null,_0x51dc1c,!![])['then'](_0x147937=>{return this['updateOrCreate']({'params':{'device_id':_0x147937['id'],'player_id':_0xb477ce[a165_0x14a6('0xb')][a165_0x14a6('0x11')]},'body':{'device_id':_0x147937['id'],'player_id':_0xb477ce[a165_0x14a6('0xb')][a165_0x14a6('0x11')],'playing_item':_0xb477ce[a165_0x14a6('0xb')][a165_0x14a6('0x16')],'status':_0xb477ce['body'][a165_0x14a6('0x12')],'reported_at':new Date()}},null,_0x51dc1c)[a165_0x14a6('0xf')](_0x4dafc2=>{delete _0x147937['id'];return _0x3e759b[a165_0x14a6('0x14')]({'success':!![],'data':_0x4dafc2});});});}[a165_0x14a6('0xa')](_0x1c4780,_0x463298,_0x5db2de){return this[a165_0x14a6('0x6')][a165_0x14a6('0x17')]({'params':{'$user.uuid$':_0x1c4780[a165_0x14a6('0x18')][a165_0x14a6('0x19')]}},null,_0x5db2de,!![],[sequelize_utils_1[a165_0x14a6('0x5')][a165_0x14a6('0x1a')][a165_0x14a6('0x1b')],sequelize_utils_1['default']['models'][a165_0x14a6('0x1c')]])['then'](_0x2068c0=>{console[a165_0x14a6('0x1d')](_0x2068c0);return _0x463298[a165_0x14a6('0x14')]({'success':!![],'data':_0x2068c0});});}}exports[a165_0x14a6('0x5')]=PlayerDevicesController;