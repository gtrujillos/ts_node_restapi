var a165_0x402f=['register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','playlist','json','playing_item','status','find','user_uuid','models','usersModel','__importDefault','defineProperty','../../infrastructure/sequelize-utils','default','devicesController','playersController'];(function(_0x1fd82a,_0x423a3a){var _0x584ed9=function(_0x3a6a6b){while(--_0x3a6a6b){_0x1fd82a['push'](_0x1fd82a['shift']());}};_0x584ed9(++_0x423a3a);}(a165_0x402f,0xf4));var a165_0x4e68=function(_0xb012bd,_0x354560){_0xb012bd=_0xb012bd-0x0;var _0x4d24f1=a165_0x402f[_0xb012bd];return _0x4d24f1;};'use strict';var __importDefault=this&&this[a165_0x4e68('0x0')]||function(_0x1ff68d){return _0x1ff68d&&_0x1ff68d['__esModule']?_0x1ff68d:{'default':_0x1ff68d};};Object[a165_0x4e68('0x1')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a165_0x4e68('0x2')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1[a165_0x4e68('0x3')]{constructor(_0x49b0c7,_0x55bc23,_0x124231){super(_0x49b0c7,null);this[a165_0x4e68('0x4')]=_0x55bc23;this[a165_0x4e68('0x5')]=_0x124231;this[a165_0x4e68('0x6')]=this[a165_0x4e68('0x6')][a165_0x4e68('0x7')](this);this[a165_0x4e68('0x8')]=this[a165_0x4e68('0x8')][a165_0x4e68('0x7')](this);this[a165_0x4e68('0x9')]=this[a165_0x4e68('0x9')]['bind'](this);}[a165_0x4e68('0x6')](_0x124e91,_0x33b1fe,_0x2afebf){return this[a165_0x4e68('0x4')][a165_0x4e68('0xa')]({'params':{'uuid':_0x124e91[a165_0x4e68('0xb')]['device_uuid']},'body':{'uuid':_0x124e91[a165_0x4e68('0xb')][a165_0x4e68('0xc')],'network_info':_0x124e91[a165_0x4e68('0xb')][a165_0x4e68('0xd')],'firmware_info':_0x124e91[a165_0x4e68('0xb')][a165_0x4e68('0xe')]}},null,_0x2afebf,!![])[a165_0x4e68('0xf')](_0x47a6a4=>{return this['updateOrCreate']({'params':{'device_id':_0x47a6a4['id'],'player_id':_0x124e91['body'][a165_0x4e68('0x10')]},'body':{'device_id':_0x47a6a4['id'],'player_id':_0x124e91[a165_0x4e68('0xb')]['player_id'],'status':_0x124e91[a165_0x4e68('0xb')]['status'],'playlist':_0x124e91['body'][a165_0x4e68('0x11')],'reported_at':new Date()}},null,_0x2afebf)['then'](_0x4607dd=>{delete _0x47a6a4['id'];return _0x33b1fe[a165_0x4e68('0x12')]({'success':!![],'data':_0x47a6a4});});});}[a165_0x4e68('0x8')](_0x2e390e,_0x4649ab,_0x5b2f32){return this[a165_0x4e68('0x4')][a165_0x4e68('0xa')]({'params':{'uuid':_0x2e390e[a165_0x4e68('0xb')]['device_uuid']},'body':{'uuid':_0x2e390e['body'][a165_0x4e68('0xc')]}},null,_0x5b2f32,!![])[a165_0x4e68('0xf')](_0x3d1c5a=>{return this['updateOrCreate']({'params':{'device_id':_0x3d1c5a['id'],'player_id':_0x2e390e['body'][a165_0x4e68('0x10')]},'body':{'device_id':_0x3d1c5a['id'],'player_id':_0x2e390e[a165_0x4e68('0xb')][a165_0x4e68('0x10')],'playing_item':_0x2e390e[a165_0x4e68('0xb')][a165_0x4e68('0x13')],'status':_0x2e390e[a165_0x4e68('0xb')][a165_0x4e68('0x14')],'reported_at':new Date()}},null,_0x5b2f32)['then'](_0x1cc94a=>{delete _0x3d1c5a['id'];return _0x4649ab[a165_0x4e68('0x12')]({'success':!![],'data':_0x1cc94a});});});}[a165_0x4e68('0x9')](_0x1950f3,_0x1a5781,_0x36dade){return this[a165_0x4e68('0x5')][a165_0x4e68('0x15')]({'params':{'$user.uuid$':_0x1950f3['params'][a165_0x4e68('0x16')]}},null,_0x36dade,!![],[sequelize_utils_1['default'][a165_0x4e68('0x17')][a165_0x4e68('0x18')],sequelize_utils_1[a165_0x4e68('0x3')]['models']['playerDevicesModel']])['then'](_0xb9e5d1=>{console['log'](_0xb9e5d1);return _0x1a5781['json']({'success':!![],'data':_0xb9e5d1});});}}exports[a165_0x4e68('0x3')]=PlayerDevicesController;