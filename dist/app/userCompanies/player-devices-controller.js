var a165_0x4702=['user_uuid','default','models','usersModel','playerDevicesModel','__importDefault','defineProperty','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','player_id','status','playlist','then','json','devicesController','playing_item','find','params'];(function(_0x137f51,_0x206277){var _0x320672=function(_0x377686){while(--_0x377686){_0x137f51['push'](_0x137f51['shift']());}};_0x320672(++_0x206277);}(a165_0x4702,0x131));var a165_0x2328=function(_0x508e6c,_0x1225ce){_0x508e6c=_0x508e6c-0x0;var _0x5022aa=a165_0x4702[_0x508e6c];return _0x5022aa;};'use strict';var __importDefault=this&&this[a165_0x2328('0x0')]||function(_0xc81c2e){return _0xc81c2e&&_0xc81c2e['__esModule']?_0xc81c2e:{'default':_0xc81c2e};};Object[a165_0x2328('0x1')](exports,a165_0x2328('0x2'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x2328('0x3')));const sequelize_utils_1=__importDefault(require(a165_0x2328('0x4')));const responseUtils=require(a165_0x2328('0x5'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x5d10be,_0x2263ff,_0x49157f){super(_0x5d10be,null);this['devicesController']=_0x2263ff;this[a165_0x2328('0x6')]=_0x49157f;this[a165_0x2328('0x7')]=this[a165_0x2328('0x7')][a165_0x2328('0x8')](this);this['reportStatus']=this[a165_0x2328('0x9')][a165_0x2328('0x8')](this);this[a165_0x2328('0xa')]=this['getStatus'][a165_0x2328('0x8')](this);}[a165_0x2328('0x7')](_0x4977d6,_0x142352,_0x3bba9e){return this['devicesController'][a165_0x2328('0xb')]({'params':{'uuid':_0x4977d6[a165_0x2328('0xc')][a165_0x2328('0xd')]},'body':{'uuid':_0x4977d6['body'][a165_0x2328('0xd')],'network_info':_0x4977d6[a165_0x2328('0xc')][a165_0x2328('0xe')],'firmware_info':_0x4977d6[a165_0x2328('0xc')][a165_0x2328('0xf')]}},null,_0x3bba9e,!![])['then'](_0x306e65=>{return this['updateOrCreate']({'params':{'device_id':_0x306e65['id'],'player_id':_0x4977d6[a165_0x2328('0xc')][a165_0x2328('0x10')]},'body':{'device_id':_0x306e65['id'],'player_id':_0x4977d6[a165_0x2328('0xc')][a165_0x2328('0x10')],'status':_0x4977d6[a165_0x2328('0xc')][a165_0x2328('0x11')],'playlist':_0x4977d6[a165_0x2328('0xc')][a165_0x2328('0x12')],'reported_at':new Date()}},null,_0x3bba9e)[a165_0x2328('0x13')](_0x3c3828=>{delete _0x306e65['id'];return _0x142352[a165_0x2328('0x14')]({'success':!![],'data':_0x306e65});});});}[a165_0x2328('0x9')](_0xdb40b5,_0x10c768,_0x31587e){return this[a165_0x2328('0x15')]['updateOrCreate']({'params':{'uuid':_0xdb40b5['body'][a165_0x2328('0xd')]},'body':{'uuid':_0xdb40b5['body'][a165_0x2328('0xd')]}},null,_0x31587e,!![])[a165_0x2328('0x13')](_0x246b43=>{return this[a165_0x2328('0xb')]({'params':{'device_id':_0x246b43['id'],'player_id':_0xdb40b5['body'][a165_0x2328('0x10')]},'body':{'device_id':_0x246b43['id'],'player_id':_0xdb40b5[a165_0x2328('0xc')][a165_0x2328('0x10')],'playing_item':_0xdb40b5[a165_0x2328('0xc')][a165_0x2328('0x16')],'status':_0xdb40b5['body'][a165_0x2328('0x11')],'reported_at':new Date()}},null,_0x31587e)['then'](_0x362f18=>{delete _0x246b43['id'];return _0x10c768['json']({'success':!![],'data':_0x362f18});});});}['getStatus'](_0x225652,_0x1f5331,_0x4c2a4f){return this[a165_0x2328('0x6')][a165_0x2328('0x17')]({'params':{'$user.uuid$':_0x225652[a165_0x2328('0x18')][a165_0x2328('0x19')]}},null,_0x4c2a4f,!![],[sequelize_utils_1[a165_0x2328('0x1a')][a165_0x2328('0x1b')][a165_0x2328('0x1c')],sequelize_utils_1['default'][a165_0x2328('0x1b')][a165_0x2328('0x1d')]])[a165_0x2328('0x13')](_0x2ff25c=>{console['log'](_0x2ff25c);return _0x1f5331['json']({'success':!![],'data':_0x2ff25c});});}}exports[a165_0x2328('0x1a')]=PlayerDevicesController;