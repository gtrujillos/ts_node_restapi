var a165_0x5e7d=['__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','register','bind','getStatus','updateOrCreate','body','device_uuid','network_info','player_id','status','playlist','json','then','playing_item','params','user_uuid','models','playerDevicesModel','log','__importDefault'];(function(_0x3058e0,_0xe854a){var _0xefcfde=function(_0x2172ee){while(--_0x2172ee){_0x3058e0['push'](_0x3058e0['shift']());}};_0xefcfde(++_0xe854a);}(a165_0x5e7d,0x144));var a165_0x5bbe=function(_0x62d30d,_0x36af01){_0x62d30d=_0x62d30d-0x0;var _0x1308d5=a165_0x5e7d[_0x62d30d];return _0x1308d5;};'use strict';var __importDefault=this&&this[a165_0x5bbe('0x0')]||function(_0x463979){return _0x463979&&_0x463979[a165_0x5bbe('0x1')]?_0x463979:{'default':_0x463979};};Object['defineProperty'](exports,a165_0x5bbe('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x5bbe('0x2')));const sequelize_utils_1=__importDefault(require(a165_0x5bbe('0x3')));const responseUtils=require(a165_0x5bbe('0x4'));class PlayerDevicesController extends controller_utils_1[a165_0x5bbe('0x5')]{constructor(_0x26ea44,_0x11d07b,_0x160b20){super(_0x26ea44,null);this[a165_0x5bbe('0x6')]=_0x11d07b;this['playersController']=_0x160b20;this[a165_0x5bbe('0x7')]=this[a165_0x5bbe('0x7')][a165_0x5bbe('0x8')](this);this['reportStatus']=this['reportStatus']['bind'](this);this[a165_0x5bbe('0x9')]=this[a165_0x5bbe('0x9')][a165_0x5bbe('0x8')](this);}[a165_0x5bbe('0x7')](_0x41c8a1,_0x2cc043,_0x5f50b3){return this[a165_0x5bbe('0x6')][a165_0x5bbe('0xa')]({'params':{'uuid':_0x41c8a1[a165_0x5bbe('0xb')][a165_0x5bbe('0xc')]},'body':{'uuid':_0x41c8a1[a165_0x5bbe('0xb')][a165_0x5bbe('0xc')],'network_info':_0x41c8a1['body'][a165_0x5bbe('0xd')],'firmware_info':_0x41c8a1[a165_0x5bbe('0xb')]['firmware_info']}},null,_0x5f50b3,!![])['then'](_0x2f09e7=>{return this[a165_0x5bbe('0xa')]({'params':{'device_id':_0x2f09e7['id'],'player_id':_0x41c8a1[a165_0x5bbe('0xb')][a165_0x5bbe('0xe')]},'body':{'device_id':_0x2f09e7['id'],'player_id':_0x41c8a1['body']['player_id'],'status':_0x41c8a1[a165_0x5bbe('0xb')][a165_0x5bbe('0xf')],'playlist':_0x41c8a1[a165_0x5bbe('0xb')][a165_0x5bbe('0x10')],'reported_at':new Date()}},null,_0x5f50b3)['then'](_0x19d3c5=>{delete _0x2f09e7['id'];return _0x2cc043[a165_0x5bbe('0x11')]({'success':!![],'data':_0x2f09e7});});});}['reportStatus'](_0x4f103e,_0x1425d3,_0x577446){return this[a165_0x5bbe('0x6')][a165_0x5bbe('0xa')]({'params':{'uuid':_0x4f103e[a165_0x5bbe('0xb')]['device_uuid']},'body':{'uuid':_0x4f103e[a165_0x5bbe('0xb')][a165_0x5bbe('0xc')]}},null,_0x577446,!![])[a165_0x5bbe('0x12')](_0x1b2924=>{return this[a165_0x5bbe('0xa')]({'params':{'device_id':_0x1b2924['id'],'player_id':_0x4f103e[a165_0x5bbe('0xb')][a165_0x5bbe('0xe')]},'body':{'device_id':_0x1b2924['id'],'player_id':_0x4f103e[a165_0x5bbe('0xb')]['player_id'],'playing_item':_0x4f103e['body'][a165_0x5bbe('0x13')],'status':_0x4f103e[a165_0x5bbe('0xb')][a165_0x5bbe('0xf')],'reported_at':new Date()}},null,_0x577446)[a165_0x5bbe('0x12')](_0x32b304=>{delete _0x1b2924['id'];return _0x1425d3[a165_0x5bbe('0x11')]({'success':!![],'data':_0x32b304});});});}['getStatus'](_0x511551,_0x6b6d0e,_0x52aec0){return this['playersController']['find']({'params':{'$user.uuid$':_0x511551[a165_0x5bbe('0x14')][a165_0x5bbe('0x15')]}},null,_0x52aec0,!![],[sequelize_utils_1[a165_0x5bbe('0x5')][a165_0x5bbe('0x16')]['usersModel'],sequelize_utils_1[a165_0x5bbe('0x5')][a165_0x5bbe('0x16')][a165_0x5bbe('0x17')]])[a165_0x5bbe('0x12')](_0x201571=>{console[a165_0x5bbe('0x18')](_0x201571);return _0x6b6d0e[a165_0x5bbe('0x11')]({'success':!![],'data':_0x201571});});}}exports[a165_0x5bbe('0x5')]=PlayerDevicesController;