var a107_0x549f=['status','params','default','models','usersModel','playerDevicesModel','log','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','devicesController','playersController','register','reportStatus','getStatus','updateOrCreate','device_uuid','body','network_info','then','player_id','playlist','json','playing_item'];(function(_0x4b7e8f,_0x3bb0dc){var _0x4e521d=function(_0x22535a){while(--_0x22535a){_0x4b7e8f['push'](_0x4b7e8f['shift']());}};_0x4e521d(++_0x3bb0dc);}(a107_0x549f,0x6b));var a107_0x5cce=function(_0x5e0dcd,_0x441f00){_0x5e0dcd=_0x5e0dcd-0x0;var _0x31bf6c=a107_0x549f[_0x5e0dcd];return _0x31bf6c;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x30ac8c){return _0x30ac8c&&_0x30ac8c[a107_0x5cce('0x0')]?_0x30ac8c:{'default':_0x30ac8c};};Object[a107_0x5cce('0x1')](exports,a107_0x5cce('0x0'),{'value':!![]});const controller_utils_1=__importDefault(require(a107_0x5cce('0x2')));const sequelize_utils_1=__importDefault(require(a107_0x5cce('0x3')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x2a4934,_0x8cd391,_0x22faa7){super(_0x2a4934,null);this[a107_0x5cce('0x4')]=_0x8cd391;this[a107_0x5cce('0x5')]=_0x22faa7;this[a107_0x5cce('0x6')]=this['register']['bind'](this);this['reportStatus']=this[a107_0x5cce('0x7')]['bind'](this);this[a107_0x5cce('0x8')]=this[a107_0x5cce('0x8')]['bind'](this);}[a107_0x5cce('0x6')](_0x2badd9,_0x49ab83,_0x40abdf){return this[a107_0x5cce('0x4')][a107_0x5cce('0x9')]({'params':{'uuid':_0x2badd9['body'][a107_0x5cce('0xa')]},'body':{'uuid':_0x2badd9['body']['device_uuid'],'network_info':_0x2badd9[a107_0x5cce('0xb')][a107_0x5cce('0xc')],'firmware_info':_0x2badd9[a107_0x5cce('0xb')]['firmware_info']}},null,_0x40abdf,!![])[a107_0x5cce('0xd')](_0x1ceb2d=>{return this['updateOrCreate']({'params':{'device_id':_0x1ceb2d['id'],'player_id':_0x2badd9['body'][a107_0x5cce('0xe')]},'body':{'device_id':_0x1ceb2d['id'],'player_id':_0x2badd9[a107_0x5cce('0xb')][a107_0x5cce('0xe')],'status':_0x2badd9[a107_0x5cce('0xb')]['status'],'playlist':_0x2badd9[a107_0x5cce('0xb')][a107_0x5cce('0xf')],'reported_at':new Date()}},null,_0x40abdf)[a107_0x5cce('0xd')](_0x45256a=>{delete _0x1ceb2d['id'];return _0x49ab83[a107_0x5cce('0x10')]({'success':!![],'data':_0x1ceb2d});});});}[a107_0x5cce('0x7')](_0x7186f0,_0x26495a,_0x26a843){return this[a107_0x5cce('0x4')][a107_0x5cce('0x9')]({'params':{'uuid':_0x7186f0[a107_0x5cce('0xb')][a107_0x5cce('0xa')]},'body':{'uuid':_0x7186f0[a107_0x5cce('0xb')][a107_0x5cce('0xa')]}},null,_0x26a843,!![])[a107_0x5cce('0xd')](_0x55b696=>{return this['updateOrCreate']({'params':{'device_id':_0x55b696['id'],'player_id':_0x7186f0[a107_0x5cce('0xb')][a107_0x5cce('0xe')]},'body':{'device_id':_0x55b696['id'],'player_id':_0x7186f0[a107_0x5cce('0xb')][a107_0x5cce('0xe')],'playing_item':_0x7186f0[a107_0x5cce('0xb')][a107_0x5cce('0x11')],'status':_0x7186f0[a107_0x5cce('0xb')][a107_0x5cce('0x12')],'reported_at':new Date()}},null,_0x26a843)[a107_0x5cce('0xd')](_0x2fb816=>{delete _0x55b696['id'];return _0x26495a[a107_0x5cce('0x10')]({'success':!![],'data':_0x2fb816});});});}['getStatus'](_0x54b7ed,_0x5c3ee9,_0x2accd7){return this['playersController']['find']({'params':{'$user.uuid$':_0x54b7ed[a107_0x5cce('0x13')]['user_uuid']}},null,_0x2accd7,!![],[sequelize_utils_1[a107_0x5cce('0x14')][a107_0x5cce('0x15')][a107_0x5cce('0x16')],sequelize_utils_1[a107_0x5cce('0x14')][a107_0x5cce('0x15')][a107_0x5cce('0x17')]])['then'](_0x173300=>{console[a107_0x5cce('0x18')](_0x173300);return _0x5c3ee9[a107_0x5cce('0x10')]({'success':!![],'data':_0x173300});});}}exports[a107_0x5cce('0x14')]=PlayerDevicesController;