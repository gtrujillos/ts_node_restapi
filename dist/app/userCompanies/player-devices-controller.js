var a165_0x2689=['find','params','user_uuid','default','models','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','playlist','devicesController','json'];(function(_0x1ba628,_0x461aed){var _0x2dbefd=function(_0x564229){while(--_0x564229){_0x1ba628['push'](_0x1ba628['shift']());}};_0x2dbefd(++_0x461aed);}(a165_0x2689,0x98));var a165_0x16e3=function(_0x1444f3,_0x172df2){_0x1444f3=_0x1444f3-0x0;var _0xe48a99=a165_0x2689[_0x1444f3];return _0xe48a99;};'use strict';var __importDefault=this&&this[a165_0x16e3('0x0')]||function(_0x2a4ff1){return _0x2a4ff1&&_0x2a4ff1[a165_0x16e3('0x1')]?_0x2a4ff1:{'default':_0x2a4ff1};};Object[a165_0x16e3('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x16e3('0x3')));const sequelize_utils_1=__importDefault(require(a165_0x16e3('0x4')));const responseUtils=require(a165_0x16e3('0x5'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x3b516f,_0x9b0ee4,_0x4947bf){super(_0x3b516f,null);this['devicesController']=_0x9b0ee4;this[a165_0x16e3('0x6')]=_0x4947bf;this['register']=this[a165_0x16e3('0x7')][a165_0x16e3('0x8')](this);this[a165_0x16e3('0x9')]=this[a165_0x16e3('0x9')][a165_0x16e3('0x8')](this);this[a165_0x16e3('0xa')]=this[a165_0x16e3('0xa')][a165_0x16e3('0x8')](this);}[a165_0x16e3('0x7')](_0x14fd14,_0x379bce,_0xcb838a){return this['devicesController'][a165_0x16e3('0xb')]({'params':{'uuid':_0x14fd14[a165_0x16e3('0xc')]['device_uuid']},'body':{'uuid':_0x14fd14[a165_0x16e3('0xc')][a165_0x16e3('0xd')],'network_info':_0x14fd14[a165_0x16e3('0xc')][a165_0x16e3('0xe')],'firmware_info':_0x14fd14[a165_0x16e3('0xc')][a165_0x16e3('0xf')]}},null,_0xcb838a,!![])[a165_0x16e3('0x10')](_0x85fe2a=>{return this[a165_0x16e3('0xb')]({'params':{'device_id':_0x85fe2a['id'],'player_id':_0x14fd14['body'][a165_0x16e3('0x11')]},'body':{'device_id':_0x85fe2a['id'],'player_id':_0x14fd14[a165_0x16e3('0xc')][a165_0x16e3('0x11')],'status':_0x14fd14[a165_0x16e3('0xc')][a165_0x16e3('0x12')],'playlist':_0x14fd14[a165_0x16e3('0xc')][a165_0x16e3('0x13')],'reported_at':new Date()}},null,_0xcb838a)[a165_0x16e3('0x10')](_0x15822b=>{delete _0x85fe2a['id'];return _0x379bce['json']({'success':!![],'data':_0x85fe2a});});});}[a165_0x16e3('0x9')](_0x45feaf,_0x2ae0d9,_0x46ad28){return this[a165_0x16e3('0x14')]['updateOrCreate']({'params':{'uuid':_0x45feaf[a165_0x16e3('0xc')][a165_0x16e3('0xd')]},'body':{'uuid':_0x45feaf[a165_0x16e3('0xc')][a165_0x16e3('0xd')]}},null,_0x46ad28,!![])[a165_0x16e3('0x10')](_0x2e1e37=>{return this[a165_0x16e3('0xb')]({'params':{'device_id':_0x2e1e37['id'],'player_id':_0x45feaf[a165_0x16e3('0xc')][a165_0x16e3('0x11')]},'body':{'device_id':_0x2e1e37['id'],'player_id':_0x45feaf[a165_0x16e3('0xc')][a165_0x16e3('0x11')],'playing_item':_0x45feaf[a165_0x16e3('0xc')]['playing_item'],'status':_0x45feaf[a165_0x16e3('0xc')][a165_0x16e3('0x12')],'reported_at':new Date()}},null,_0x46ad28)['then'](_0x425cb1=>{delete _0x2e1e37['id'];return _0x2ae0d9[a165_0x16e3('0x15')]({'success':!![],'data':_0x425cb1});});});}[a165_0x16e3('0xa')](_0x53c6c2,_0x2dc53f,_0x1dbc66){return this['playersController'][a165_0x16e3('0x16')]({'params':{'$user.uuid$':_0x53c6c2[a165_0x16e3('0x17')][a165_0x16e3('0x18')]}},null,_0x1dbc66,!![],[sequelize_utils_1[a165_0x16e3('0x19')][a165_0x16e3('0x1a')]['usersModel'],sequelize_utils_1[a165_0x16e3('0x19')][a165_0x16e3('0x1a')][a165_0x16e3('0x1b')]])['then'](_0x51ff0b=>{console[a165_0x16e3('0x1c')](_0x51ff0b);return _0x2dc53f[a165_0x16e3('0x15')]({'success':!![],'data':_0x51ff0b});});}}exports[a165_0x16e3('0x19')]=PlayerDevicesController;