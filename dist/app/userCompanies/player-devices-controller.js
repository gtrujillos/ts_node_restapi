var a165_0x1621=['__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','devicesController','register','reportStatus','bind','getStatus','updateOrCreate','device_uuid','body','firmware_info','player_id','status','then','json','find','user_uuid','default','models','usersModel','log','__importDefault'];(function(_0x25f6e2,_0x4998f0){var _0x1862ca=function(_0x373a3d){while(--_0x373a3d){_0x25f6e2['push'](_0x25f6e2['shift']());}};_0x1862ca(++_0x4998f0);}(a165_0x1621,0x144));var a165_0x3aad=function(_0x364726,_0x26b445){_0x364726=_0x364726-0x0;var _0x34249c=a165_0x1621[_0x364726];return _0x34249c;};'use strict';var __importDefault=this&&this[a165_0x3aad('0x0')]||function(_0x29589b){return _0x29589b&&_0x29589b[a165_0x3aad('0x1')]?_0x29589b:{'default':_0x29589b};};Object[a165_0x3aad('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x3aad('0x3')));const sequelize_utils_1=__importDefault(require(a165_0x3aad('0x4')));const responseUtils=require(a165_0x3aad('0x5'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x31b6b6,_0x4e966c,_0x3c542d){super(_0x31b6b6,null);this[a165_0x3aad('0x6')]=_0x4e966c;this['playersController']=_0x3c542d;this[a165_0x3aad('0x7')]=this[a165_0x3aad('0x7')]['bind'](this);this[a165_0x3aad('0x8')]=this[a165_0x3aad('0x8')][a165_0x3aad('0x9')](this);this[a165_0x3aad('0xa')]=this[a165_0x3aad('0xa')][a165_0x3aad('0x9')](this);}['register'](_0xcd9b39,_0x45ee7f,_0x5377d4){return this[a165_0x3aad('0x6')][a165_0x3aad('0xb')]({'params':{'uuid':_0xcd9b39['body'][a165_0x3aad('0xc')]},'body':{'uuid':_0xcd9b39[a165_0x3aad('0xd')]['device_uuid'],'network_info':_0xcd9b39[a165_0x3aad('0xd')]['network_info'],'firmware_info':_0xcd9b39[a165_0x3aad('0xd')][a165_0x3aad('0xe')]}},null,_0x5377d4,!![])['then'](_0x429aaa=>{return this['updateOrCreate']({'params':{'device_id':_0x429aaa['id'],'player_id':_0xcd9b39[a165_0x3aad('0xd')][a165_0x3aad('0xf')]},'body':{'device_id':_0x429aaa['id'],'player_id':_0xcd9b39[a165_0x3aad('0xd')]['player_id'],'status':_0xcd9b39[a165_0x3aad('0xd')][a165_0x3aad('0x10')],'playlist':_0xcd9b39[a165_0x3aad('0xd')]['playlist'],'reported_at':new Date()}},null,_0x5377d4)[a165_0x3aad('0x11')](_0x2755ba=>{delete _0x429aaa['id'];return _0x45ee7f[a165_0x3aad('0x12')]({'success':!![],'data':_0x429aaa});});});}['reportStatus'](_0xe5f57e,_0x3ab628,_0x237e19){return this[a165_0x3aad('0x6')]['updateOrCreate']({'params':{'uuid':_0xe5f57e[a165_0x3aad('0xd')][a165_0x3aad('0xc')]},'body':{'uuid':_0xe5f57e[a165_0x3aad('0xd')][a165_0x3aad('0xc')]}},null,_0x237e19,!![])[a165_0x3aad('0x11')](_0xe86ae3=>{return this[a165_0x3aad('0xb')]({'params':{'device_id':_0xe86ae3['id'],'player_id':_0xe5f57e[a165_0x3aad('0xd')]['player_id']},'body':{'device_id':_0xe86ae3['id'],'player_id':_0xe5f57e[a165_0x3aad('0xd')][a165_0x3aad('0xf')],'playing_item':_0xe5f57e[a165_0x3aad('0xd')]['playing_item'],'status':_0xe5f57e[a165_0x3aad('0xd')][a165_0x3aad('0x10')],'reported_at':new Date()}},null,_0x237e19)[a165_0x3aad('0x11')](_0x4d569d=>{delete _0xe86ae3['id'];return _0x3ab628[a165_0x3aad('0x12')]({'success':!![],'data':_0x4d569d});});});}['getStatus'](_0x3f9859,_0x2564f1,_0xee6580){return this['playersController'][a165_0x3aad('0x13')]({'params':{'$user.uuid$':_0x3f9859['params'][a165_0x3aad('0x14')]}},null,_0xee6580,!![],[sequelize_utils_1[a165_0x3aad('0x15')][a165_0x3aad('0x16')][a165_0x3aad('0x17')],sequelize_utils_1[a165_0x3aad('0x15')][a165_0x3aad('0x16')]['playerDevicesModel']])['then'](_0x2c21f4=>{console[a165_0x3aad('0x18')](_0x2c21f4);return _0x2564f1[a165_0x3aad('0x12')]({'success':!![],'data':_0x2c21f4});});}}exports['default']=PlayerDevicesController;