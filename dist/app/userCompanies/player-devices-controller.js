var a165_0xe462=['default','models','usersModel','playerDevicesModel','__importDefault','defineProperty','__esModule','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','playersController','register','bind','reportStatus','getStatus','devicesController','updateOrCreate','body','device_uuid','firmware_info','then','player_id','status','json','playing_item','user_uuid'];(function(_0x58e5e1,_0x59c9f5){var _0x1832db=function(_0x311c16){while(--_0x311c16){_0x58e5e1['push'](_0x58e5e1['shift']());}};_0x1832db(++_0x59c9f5);}(a165_0xe462,0xee));var a165_0x11e2=function(_0x501343,_0x49f7d1){_0x501343=_0x501343-0x0;var _0x481c3a=a165_0xe462[_0x501343];return _0x481c3a;};'use strict';var __importDefault=this&&this[a165_0x11e2('0x0')]||function(_0x335b2b){return _0x335b2b&&_0x335b2b['__esModule']?_0x335b2b:{'default':_0x335b2b};};Object[a165_0x11e2('0x1')](exports,a165_0x11e2('0x2'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x11e2('0x3')));const sequelize_utils_1=__importDefault(require(a165_0x11e2('0x4')));const responseUtils=require(a165_0x11e2('0x5'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x4aa023,_0x2e7bd2,_0x43440c){super(_0x4aa023,null);this['devicesController']=_0x2e7bd2;this[a165_0x11e2('0x6')]=_0x43440c;this[a165_0x11e2('0x7')]=this[a165_0x11e2('0x7')][a165_0x11e2('0x8')](this);this['reportStatus']=this[a165_0x11e2('0x9')][a165_0x11e2('0x8')](this);this[a165_0x11e2('0xa')]=this[a165_0x11e2('0xa')][a165_0x11e2('0x8')](this);}['register'](_0x108510,_0x4980dc,_0x5ef19d){return this[a165_0x11e2('0xb')][a165_0x11e2('0xc')]({'params':{'uuid':_0x108510[a165_0x11e2('0xd')][a165_0x11e2('0xe')]},'body':{'uuid':_0x108510[a165_0x11e2('0xd')]['device_uuid'],'network_info':_0x108510['body']['network_info'],'firmware_info':_0x108510[a165_0x11e2('0xd')][a165_0x11e2('0xf')]}},null,_0x5ef19d,!![])[a165_0x11e2('0x10')](_0x2a5526=>{return this['updateOrCreate']({'params':{'device_id':_0x2a5526['id'],'player_id':_0x108510[a165_0x11e2('0xd')][a165_0x11e2('0x11')]},'body':{'device_id':_0x2a5526['id'],'player_id':_0x108510[a165_0x11e2('0xd')][a165_0x11e2('0x11')],'status':_0x108510[a165_0x11e2('0xd')][a165_0x11e2('0x12')],'playlist':_0x108510['body']['playlist'],'reported_at':new Date()}},null,_0x5ef19d)[a165_0x11e2('0x10')](_0x49cfb7=>{delete _0x2a5526['id'];return _0x4980dc[a165_0x11e2('0x13')]({'success':!![],'data':_0x2a5526});});});}[a165_0x11e2('0x9')](_0x56d3ae,_0x4f0257,_0x385761){return this[a165_0x11e2('0xb')]['updateOrCreate']({'params':{'uuid':_0x56d3ae[a165_0x11e2('0xd')][a165_0x11e2('0xe')]},'body':{'uuid':_0x56d3ae[a165_0x11e2('0xd')][a165_0x11e2('0xe')]}},null,_0x385761,!![])[a165_0x11e2('0x10')](_0x3f8245=>{return this['updateOrCreate']({'params':{'device_id':_0x3f8245['id'],'player_id':_0x56d3ae[a165_0x11e2('0xd')]['player_id']},'body':{'device_id':_0x3f8245['id'],'player_id':_0x56d3ae[a165_0x11e2('0xd')][a165_0x11e2('0x11')],'playing_item':_0x56d3ae[a165_0x11e2('0xd')][a165_0x11e2('0x14')],'status':_0x56d3ae[a165_0x11e2('0xd')][a165_0x11e2('0x12')],'reported_at':new Date()}},null,_0x385761)[a165_0x11e2('0x10')](_0x5ef9cc=>{delete _0x3f8245['id'];return _0x4f0257['json']({'success':!![],'data':_0x5ef9cc});});});}['getStatus'](_0xf5b359,_0x428e6e,_0x40e30c){return this[a165_0x11e2('0x6')]['find']({'params':{'$user.uuid$':_0xf5b359['params'][a165_0x11e2('0x15')]}},null,_0x40e30c,!![],[sequelize_utils_1[a165_0x11e2('0x16')][a165_0x11e2('0x17')][a165_0x11e2('0x18')],sequelize_utils_1['default']['models'][a165_0x11e2('0x19')]])['then'](_0x271ff3=>{console['log'](_0x271ff3);return _0x428e6e['json']({'success':!![],'data':_0x271ff3});});}}exports[a165_0x11e2('0x16')]=PlayerDevicesController;