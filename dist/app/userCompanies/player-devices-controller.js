var a107_0x35cd=['reportStatus','bind','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','json','playing_item','find','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','defineProperty','__esModule','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','register'];(function(_0x55f8de,_0x139fe7){var _0x288846=function(_0x7f56c4){while(--_0x7f56c4){_0x55f8de['push'](_0x55f8de['shift']());}};_0x288846(++_0x139fe7);}(a107_0x35cd,0x19c));var a107_0x1df9=function(_0x34a0ab,_0x3d7a89){_0x34a0ab=_0x34a0ab-0x0;var _0x17de58=a107_0x35cd[_0x34a0ab];return _0x17de58;};'use strict';var __importDefault=this&&this[a107_0x1df9('0x0')]||function(_0x147551){return _0x147551&&_0x147551['__esModule']?_0x147551:{'default':_0x147551};};Object[a107_0x1df9('0x1')](exports,a107_0x1df9('0x2'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a107_0x1df9('0x3')));const responseUtils=require(a107_0x1df9('0x4'));class PlayerDevicesController extends controller_utils_1[a107_0x1df9('0x5')]{constructor(_0x1dd659,_0x3ee0d4,_0x222e4b){super(_0x1dd659,null);this[a107_0x1df9('0x6')]=_0x3ee0d4;this['playersController']=_0x222e4b;this[a107_0x1df9('0x7')]=this[a107_0x1df9('0x7')]['bind'](this);this[a107_0x1df9('0x8')]=this[a107_0x1df9('0x8')][a107_0x1df9('0x9')](this);this[a107_0x1df9('0xa')]=this[a107_0x1df9('0xa')][a107_0x1df9('0x9')](this);}[a107_0x1df9('0x7')](_0x33594a,_0x3f3a91,_0xb0374a){return this[a107_0x1df9('0x6')][a107_0x1df9('0xb')]({'params':{'uuid':_0x33594a[a107_0x1df9('0xc')][a107_0x1df9('0xd')]},'body':{'uuid':_0x33594a[a107_0x1df9('0xc')][a107_0x1df9('0xd')],'network_info':_0x33594a['body'][a107_0x1df9('0xe')],'firmware_info':_0x33594a[a107_0x1df9('0xc')][a107_0x1df9('0xf')]}},null,_0xb0374a,!![])[a107_0x1df9('0x10')](_0x42d127=>{return this['updateOrCreate']({'params':{'device_id':_0x42d127['id'],'player_id':_0x33594a[a107_0x1df9('0xc')][a107_0x1df9('0x11')]},'body':{'device_id':_0x42d127['id'],'player_id':_0x33594a['body'][a107_0x1df9('0x11')],'status':_0x33594a[a107_0x1df9('0xc')][a107_0x1df9('0x12')],'playlist':_0x33594a[a107_0x1df9('0xc')]['playlist'],'reported_at':new Date()}},null,_0xb0374a)[a107_0x1df9('0x10')](_0x36fae9=>{delete _0x42d127['id'];return _0x3f3a91[a107_0x1df9('0x13')]({'success':!![],'data':_0x42d127});});});}[a107_0x1df9('0x8')](_0x3e47f4,_0x16d4bf,_0x50fcd0){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x3e47f4[a107_0x1df9('0xc')][a107_0x1df9('0xd')]},'body':{'uuid':_0x3e47f4[a107_0x1df9('0xc')][a107_0x1df9('0xd')]}},null,_0x50fcd0,!![])[a107_0x1df9('0x10')](_0x4f77a9=>{return this[a107_0x1df9('0xb')]({'params':{'device_id':_0x4f77a9['id'],'player_id':_0x3e47f4[a107_0x1df9('0xc')][a107_0x1df9('0x11')]},'body':{'device_id':_0x4f77a9['id'],'player_id':_0x3e47f4[a107_0x1df9('0xc')]['player_id'],'playing_item':_0x3e47f4[a107_0x1df9('0xc')][a107_0x1df9('0x14')],'status':_0x3e47f4[a107_0x1df9('0xc')]['status'],'reported_at':new Date()}},null,_0x50fcd0)[a107_0x1df9('0x10')](_0x1555b4=>{delete _0x4f77a9['id'];return _0x16d4bf[a107_0x1df9('0x13')]({'success':!![],'data':_0x1555b4});});});}[a107_0x1df9('0xa')](_0x34fa5d,_0xff525b,_0x157e83){return this['playersController'][a107_0x1df9('0x15')]({'params':{'$user.uuid$':_0x34fa5d[a107_0x1df9('0x16')][a107_0x1df9('0x17')]}},null,_0x157e83,!![],[sequelize_utils_1['default'][a107_0x1df9('0x18')][a107_0x1df9('0x19')],sequelize_utils_1[a107_0x1df9('0x5')][a107_0x1df9('0x18')][a107_0x1df9('0x1a')]])[a107_0x1df9('0x10')](_0x21f432=>{console[a107_0x1df9('0x1b')](_0x21f432);return _0xff525b[a107_0x1df9('0x13')]({'success':!![],'data':_0x21f432});});}}exports[a107_0x1df9('0x5')]=PlayerDevicesController;