var a165_0x5ddf=['playersController','register','reportStatus','bind','getStatus','device_uuid','body','network_info','firmware_info','updateOrCreate','player_id','status','playlist','then','json','playing_item','find','user_uuid','default','models','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','devicesController'];(function(_0x344f48,_0x31a60c){var _0x15bca7=function(_0x4b7bc3){while(--_0x4b7bc3){_0x344f48['push'](_0x344f48['shift']());}};_0x15bca7(++_0x31a60c);}(a165_0x5ddf,0xa2));var a165_0xaee3=function(_0x440507,_0x4f12db){_0x440507=_0x440507-0x0;var _0x5b2297=a165_0x5ddf[_0x440507];return _0x5b2297;};'use strict';var __importDefault=this&&this[a165_0xaee3('0x0')]||function(_0x561ec4){return _0x561ec4&&_0x561ec4[a165_0xaee3('0x1')]?_0x561ec4:{'default':_0x561ec4};};Object[a165_0xaee3('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require(a165_0xaee3('0x3')));const sequelize_utils_1=__importDefault(require(a165_0xaee3('0x4')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x53b538,_0xf8f5b2,_0x1ed191){super(_0x53b538,null);this[a165_0xaee3('0x5')]=_0xf8f5b2;this[a165_0xaee3('0x6')]=_0x1ed191;this[a165_0xaee3('0x7')]=this[a165_0xaee3('0x7')]['bind'](this);this[a165_0xaee3('0x8')]=this[a165_0xaee3('0x8')][a165_0xaee3('0x9')](this);this[a165_0xaee3('0xa')]=this[a165_0xaee3('0xa')][a165_0xaee3('0x9')](this);}[a165_0xaee3('0x7')](_0x54451f,_0x5c04bb,_0x4c2c43){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x54451f['body'][a165_0xaee3('0xb')]},'body':{'uuid':_0x54451f[a165_0xaee3('0xc')][a165_0xaee3('0xb')],'network_info':_0x54451f[a165_0xaee3('0xc')][a165_0xaee3('0xd')],'firmware_info':_0x54451f[a165_0xaee3('0xc')][a165_0xaee3('0xe')]}},null,_0x4c2c43,!![])['then'](_0x5945f0=>{return this[a165_0xaee3('0xf')]({'params':{'device_id':_0x5945f0['id'],'player_id':_0x54451f[a165_0xaee3('0xc')][a165_0xaee3('0x10')]},'body':{'device_id':_0x5945f0['id'],'player_id':_0x54451f[a165_0xaee3('0xc')][a165_0xaee3('0x10')],'status':_0x54451f['body'][a165_0xaee3('0x11')],'playlist':_0x54451f[a165_0xaee3('0xc')][a165_0xaee3('0x12')],'reported_at':new Date()}},null,_0x4c2c43)[a165_0xaee3('0x13')](_0x50545b=>{delete _0x5945f0['id'];return _0x5c04bb[a165_0xaee3('0x14')]({'success':!![],'data':_0x5945f0});});});}[a165_0xaee3('0x8')](_0x5e4e03,_0x1cb0f7,_0x50511a){return this[a165_0xaee3('0x5')]['updateOrCreate']({'params':{'uuid':_0x5e4e03[a165_0xaee3('0xc')]['device_uuid']},'body':{'uuid':_0x5e4e03['body']['device_uuid']}},null,_0x50511a,!![])[a165_0xaee3('0x13')](_0x53bb15=>{return this[a165_0xaee3('0xf')]({'params':{'device_id':_0x53bb15['id'],'player_id':_0x5e4e03[a165_0xaee3('0xc')][a165_0xaee3('0x10')]},'body':{'device_id':_0x53bb15['id'],'player_id':_0x5e4e03[a165_0xaee3('0xc')]['player_id'],'playing_item':_0x5e4e03[a165_0xaee3('0xc')][a165_0xaee3('0x15')],'status':_0x5e4e03['body'][a165_0xaee3('0x11')],'reported_at':new Date()}},null,_0x50511a)['then'](_0x1689c7=>{delete _0x53bb15['id'];return _0x1cb0f7[a165_0xaee3('0x14')]({'success':!![],'data':_0x1689c7});});});}[a165_0xaee3('0xa')](_0x43f1d5,_0x249522,_0x4f2edb){return this['playersController'][a165_0xaee3('0x16')]({'params':{'$user.uuid$':_0x43f1d5['params'][a165_0xaee3('0x17')]}},null,_0x4f2edb,!![],[sequelize_utils_1[a165_0xaee3('0x18')]['models']['usersModel'],sequelize_utils_1[a165_0xaee3('0x18')][a165_0xaee3('0x19')][a165_0xaee3('0x1a')]])[a165_0xaee3('0x13')](_0x4b9c60=>{console[a165_0xaee3('0x1b')](_0x4b9c60);return _0x249522[a165_0xaee3('0x14')]({'success':!![],'data':_0x4b9c60});});}}exports[a165_0xaee3('0x18')]=PlayerDevicesController;