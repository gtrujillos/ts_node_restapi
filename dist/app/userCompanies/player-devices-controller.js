var a221_0x5dc3=['network_info','firmware_info','then','player_id','status','playlist','json','playing_item','find','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','device_uuid','body'];(function(_0x52b4fb,_0x22d3a3){var _0x2c7bbb=function(_0x2354e9){while(--_0x2354e9){_0x52b4fb['push'](_0x52b4fb['shift']());}};_0x2c7bbb(++_0x22d3a3);}(a221_0x5dc3,0x8b));var a221_0x5e9f=function(_0x208c99,_0x297704){_0x208c99=_0x208c99-0x0;var _0xfb741d=a221_0x5dc3[_0x208c99];return _0xfb741d;};'use strict';var __importDefault=this&&this[a221_0x5e9f('0x0')]||function(_0x7575c6){return _0x7575c6&&_0x7575c6[a221_0x5e9f('0x1')]?_0x7575c6:{'default':_0x7575c6};};Object[a221_0x5e9f('0x2')](exports,a221_0x5e9f('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a221_0x5e9f('0x3')));const sequelize_utils_1=__importDefault(require(a221_0x5e9f('0x4')));const responseUtils=require(a221_0x5e9f('0x5'));class PlayerDevicesController extends controller_utils_1[a221_0x5e9f('0x6')]{constructor(_0x4d1353,_0x57b177,_0x3f41e6){super(_0x4d1353,null);this[a221_0x5e9f('0x7')]=_0x57b177;this[a221_0x5e9f('0x8')]=_0x3f41e6;this[a221_0x5e9f('0x9')]=this['register'][a221_0x5e9f('0xa')](this);this[a221_0x5e9f('0xb')]=this[a221_0x5e9f('0xb')][a221_0x5e9f('0xa')](this);this[a221_0x5e9f('0xc')]=this['getStatus'][a221_0x5e9f('0xa')](this);}[a221_0x5e9f('0x9')](_0x3d7587,_0x2be82d,_0x3fc8e2){return this['devicesController'][a221_0x5e9f('0xd')]({'params':{'uuid':_0x3d7587['body'][a221_0x5e9f('0xe')]},'body':{'uuid':_0x3d7587[a221_0x5e9f('0xf')][a221_0x5e9f('0xe')],'network_info':_0x3d7587[a221_0x5e9f('0xf')][a221_0x5e9f('0x10')],'firmware_info':_0x3d7587['body'][a221_0x5e9f('0x11')]}},null,_0x3fc8e2,!![])[a221_0x5e9f('0x12')](_0x16a82b=>{return this[a221_0x5e9f('0xd')]({'params':{'device_id':_0x16a82b['id'],'player_id':_0x3d7587['body']['player_id']},'body':{'device_id':_0x16a82b['id'],'player_id':_0x3d7587['body'][a221_0x5e9f('0x13')],'status':_0x3d7587[a221_0x5e9f('0xf')][a221_0x5e9f('0x14')],'playlist':_0x3d7587[a221_0x5e9f('0xf')][a221_0x5e9f('0x15')],'reported_at':new Date()}},null,_0x3fc8e2)[a221_0x5e9f('0x12')](_0x244f4c=>{delete _0x16a82b['id'];return _0x2be82d[a221_0x5e9f('0x16')]({'success':!![],'data':_0x16a82b});});});}[a221_0x5e9f('0xb')](_0x6d5531,_0x106f71,_0x45f972){return this[a221_0x5e9f('0x7')][a221_0x5e9f('0xd')]({'params':{'uuid':_0x6d5531[a221_0x5e9f('0xf')][a221_0x5e9f('0xe')]},'body':{'uuid':_0x6d5531[a221_0x5e9f('0xf')][a221_0x5e9f('0xe')]}},null,_0x45f972,!![])[a221_0x5e9f('0x12')](_0x3f94a4=>{return this[a221_0x5e9f('0xd')]({'params':{'device_id':_0x3f94a4['id'],'player_id':_0x6d5531[a221_0x5e9f('0xf')][a221_0x5e9f('0x13')]},'body':{'device_id':_0x3f94a4['id'],'player_id':_0x6d5531[a221_0x5e9f('0xf')][a221_0x5e9f('0x13')],'playing_item':_0x6d5531[a221_0x5e9f('0xf')][a221_0x5e9f('0x17')],'status':_0x6d5531[a221_0x5e9f('0xf')][a221_0x5e9f('0x14')],'reported_at':new Date()}},null,_0x45f972)[a221_0x5e9f('0x12')](_0x16c17b=>{delete _0x3f94a4['id'];return _0x106f71[a221_0x5e9f('0x16')]({'success':!![],'data':_0x16c17b});});});}['getStatus'](_0x31a18f,_0x4ec511,_0x508dba){return this[a221_0x5e9f('0x8')][a221_0x5e9f('0x18')]({'params':{'$user.uuid$':_0x31a18f[a221_0x5e9f('0x19')][a221_0x5e9f('0x1a')]}},null,_0x508dba,!![],[sequelize_utils_1[a221_0x5e9f('0x6')][a221_0x5e9f('0x1b')][a221_0x5e9f('0x1c')],sequelize_utils_1[a221_0x5e9f('0x6')]['models'][a221_0x5e9f('0x1d')]])[a221_0x5e9f('0x12')](_0x3d1cf2=>{console[a221_0x5e9f('0x1e')](_0x3d1cf2);return _0x4ec511['json']({'success':!![],'data':_0x3d1cf2});});}}exports[a221_0x5e9f('0x6')]=PlayerDevicesController;