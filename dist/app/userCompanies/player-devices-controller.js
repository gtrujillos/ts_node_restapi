var a165_0x11a6=['../../infrastructure/sequelize-utils','default','devicesController','playersController','register','reportStatus','bind','getStatus','updateOrCreate','body','device_uuid','firmware_info','then','status','playlist','json','player_id','find','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/controller-utils'];(function(_0x5c602e,_0x4e166c){var _0x570a31=function(_0x5c1c0a){while(--_0x5c1c0a){_0x5c602e['push'](_0x5c602e['shift']());}};_0x570a31(++_0x4e166c);}(a165_0x11a6,0x130));var a165_0xd519=function(_0x1bedd3,_0x119bb3){_0x1bedd3=_0x1bedd3-0x0;var _0x23f794=a165_0x11a6[_0x1bedd3];return _0x23f794;};'use strict';var __importDefault=this&&this[a165_0xd519('0x0')]||function(_0x460ac2){return _0x460ac2&&_0x460ac2[a165_0xd519('0x1')]?_0x460ac2:{'default':_0x460ac2};};Object[a165_0xd519('0x2')](exports,a165_0xd519('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0xd519('0x3')));const sequelize_utils_1=__importDefault(require(a165_0xd519('0x4')));const responseUtils=require('../../infrastructure/response-utils');class PlayerDevicesController extends controller_utils_1[a165_0xd519('0x5')]{constructor(_0x2f4a0f,_0xf8d6f3,_0x439f87){super(_0x2f4a0f,null);this[a165_0xd519('0x6')]=_0xf8d6f3;this[a165_0xd519('0x7')]=_0x439f87;this[a165_0xd519('0x8')]=this['register']['bind'](this);this[a165_0xd519('0x9')]=this[a165_0xd519('0x9')][a165_0xd519('0xa')](this);this[a165_0xd519('0xb')]=this['getStatus'][a165_0xd519('0xa')](this);}[a165_0xd519('0x8')](_0x8d6b5f,_0x236b68,_0x21495c){return this[a165_0xd519('0x6')][a165_0xd519('0xc')]({'params':{'uuid':_0x8d6b5f[a165_0xd519('0xd')][a165_0xd519('0xe')]},'body':{'uuid':_0x8d6b5f[a165_0xd519('0xd')][a165_0xd519('0xe')],'network_info':_0x8d6b5f[a165_0xd519('0xd')]['network_info'],'firmware_info':_0x8d6b5f['body'][a165_0xd519('0xf')]}},null,_0x21495c,!![])[a165_0xd519('0x10')](_0x15dade=>{return this['updateOrCreate']({'params':{'device_id':_0x15dade['id'],'player_id':_0x8d6b5f['body']['player_id']},'body':{'device_id':_0x15dade['id'],'player_id':_0x8d6b5f[a165_0xd519('0xd')]['player_id'],'status':_0x8d6b5f[a165_0xd519('0xd')][a165_0xd519('0x11')],'playlist':_0x8d6b5f[a165_0xd519('0xd')][a165_0xd519('0x12')],'reported_at':new Date()}},null,_0x21495c)['then'](_0x3cb773=>{delete _0x15dade['id'];return _0x236b68[a165_0xd519('0x13')]({'success':!![],'data':_0x15dade});});});}[a165_0xd519('0x9')](_0x297234,_0x116be5,_0x316824){return this[a165_0xd519('0x6')][a165_0xd519('0xc')]({'params':{'uuid':_0x297234[a165_0xd519('0xd')][a165_0xd519('0xe')]},'body':{'uuid':_0x297234[a165_0xd519('0xd')][a165_0xd519('0xe')]}},null,_0x316824,!![])['then'](_0x44999b=>{return this[a165_0xd519('0xc')]({'params':{'device_id':_0x44999b['id'],'player_id':_0x297234[a165_0xd519('0xd')][a165_0xd519('0x14')]},'body':{'device_id':_0x44999b['id'],'player_id':_0x297234['body']['player_id'],'playing_item':_0x297234[a165_0xd519('0xd')]['playing_item'],'status':_0x297234[a165_0xd519('0xd')][a165_0xd519('0x11')],'reported_at':new Date()}},null,_0x316824)[a165_0xd519('0x10')](_0x25cdb6=>{delete _0x44999b['id'];return _0x116be5['json']({'success':!![],'data':_0x25cdb6});});});}[a165_0xd519('0xb')](_0x347fc4,_0xe41924,_0x4fa688){return this[a165_0xd519('0x7')][a165_0xd519('0x15')]({'params':{'$user.uuid$':_0x347fc4[a165_0xd519('0x16')][a165_0xd519('0x17')]}},null,_0x4fa688,!![],[sequelize_utils_1[a165_0xd519('0x5')][a165_0xd519('0x18')][a165_0xd519('0x19')],sequelize_utils_1['default'][a165_0xd519('0x18')][a165_0xd519('0x1a')]])[a165_0xd519('0x10')](_0x47fda1=>{console[a165_0xd519('0x1b')](_0x47fda1);return _0xe41924['json']({'success':!![],'data':_0x47fda1});});}}exports[a165_0xd519('0x5')]=PlayerDevicesController;