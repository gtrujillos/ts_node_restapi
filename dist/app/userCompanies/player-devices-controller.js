var a165_0x29ae=['usersModel','playerDevicesModel','log','__esModule','../../infrastructure/response-utils','default','devicesController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','json','playing_item','params','user_uuid','models'];(function(_0x51d31c,_0x40f03b){var _0x3a9f31=function(_0x35fffd){while(--_0x35fffd){_0x51d31c['push'](_0x51d31c['shift']());}};_0x3a9f31(++_0x40f03b);}(a165_0x29ae,0x153));var a165_0x3bbb=function(_0x5bda77,_0x5bb355){_0x5bda77=_0x5bda77-0x0;var _0x2cb9ee=a165_0x29ae[_0x5bda77];return _0x2cb9ee;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x30abcc){return _0x30abcc&&_0x30abcc[a165_0x3bbb('0x0')]?_0x30abcc:{'default':_0x30abcc};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a165_0x3bbb('0x1'));class PlayerDevicesController extends controller_utils_1[a165_0x3bbb('0x2')]{constructor(_0x418129,_0x424133,_0x1a38c8){super(_0x418129,null);this[a165_0x3bbb('0x3')]=_0x424133;this['playersController']=_0x1a38c8;this['register']=this[a165_0x3bbb('0x4')][a165_0x3bbb('0x5')](this);this[a165_0x3bbb('0x6')]=this[a165_0x3bbb('0x6')][a165_0x3bbb('0x5')](this);this[a165_0x3bbb('0x7')]=this[a165_0x3bbb('0x7')][a165_0x3bbb('0x5')](this);}[a165_0x3bbb('0x4')](_0x466a60,_0x3c881a,_0x51b81d){return this[a165_0x3bbb('0x3')][a165_0x3bbb('0x8')]({'params':{'uuid':_0x466a60[a165_0x3bbb('0x9')][a165_0x3bbb('0xa')]},'body':{'uuid':_0x466a60[a165_0x3bbb('0x9')][a165_0x3bbb('0xa')],'network_info':_0x466a60[a165_0x3bbb('0x9')][a165_0x3bbb('0xb')],'firmware_info':_0x466a60['body'][a165_0x3bbb('0xc')]}},null,_0x51b81d,!![])[a165_0x3bbb('0xd')](_0x5d3b28=>{return this[a165_0x3bbb('0x8')]({'params':{'device_id':_0x5d3b28['id'],'player_id':_0x466a60[a165_0x3bbb('0x9')]['player_id']},'body':{'device_id':_0x5d3b28['id'],'player_id':_0x466a60['body'][a165_0x3bbb('0xe')],'status':_0x466a60['body'][a165_0x3bbb('0xf')],'playlist':_0x466a60[a165_0x3bbb('0x9')]['playlist'],'reported_at':new Date()}},null,_0x51b81d)['then'](_0x37088d=>{delete _0x5d3b28['id'];return _0x3c881a[a165_0x3bbb('0x10')]({'success':!![],'data':_0x5d3b28});});});}[a165_0x3bbb('0x6')](_0xa1c7ea,_0x2e08f8,_0x3f64ba){return this[a165_0x3bbb('0x3')][a165_0x3bbb('0x8')]({'params':{'uuid':_0xa1c7ea['body']['device_uuid']},'body':{'uuid':_0xa1c7ea['body'][a165_0x3bbb('0xa')]}},null,_0x3f64ba,!![])[a165_0x3bbb('0xd')](_0x49d447=>{return this[a165_0x3bbb('0x8')]({'params':{'device_id':_0x49d447['id'],'player_id':_0xa1c7ea[a165_0x3bbb('0x9')][a165_0x3bbb('0xe')]},'body':{'device_id':_0x49d447['id'],'player_id':_0xa1c7ea['body'][a165_0x3bbb('0xe')],'playing_item':_0xa1c7ea[a165_0x3bbb('0x9')][a165_0x3bbb('0x11')],'status':_0xa1c7ea['body']['status'],'reported_at':new Date()}},null,_0x3f64ba)[a165_0x3bbb('0xd')](_0x4f4a9e=>{delete _0x49d447['id'];return _0x2e08f8[a165_0x3bbb('0x10')]({'success':!![],'data':_0x4f4a9e});});});}[a165_0x3bbb('0x7')](_0x2884c9,_0x353962,_0x38ca9e){return this['playersController']['find']({'params':{'$user.uuid$':_0x2884c9[a165_0x3bbb('0x12')][a165_0x3bbb('0x13')]}},null,_0x38ca9e,!![],[sequelize_utils_1[a165_0x3bbb('0x2')][a165_0x3bbb('0x14')][a165_0x3bbb('0x15')],sequelize_utils_1[a165_0x3bbb('0x2')][a165_0x3bbb('0x14')][a165_0x3bbb('0x16')]])[a165_0x3bbb('0xd')](_0x1b86bb=>{console[a165_0x3bbb('0x17')](_0x1b86bb);return _0x353962[a165_0x3bbb('0x10')]({'success':!![],'data':_0x1b86bb});});}}exports['default']=PlayerDevicesController;