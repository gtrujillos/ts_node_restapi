var a165_0x5778=['player_id','status','playlist','then','json','playing_item','find','default','models','usersModel','playerDevicesModel','__importDefault','__esModule','defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','devicesController','playersController','register','reportStatus','bind','getStatus','body','device_uuid','network_info','updateOrCreate'];(function(_0x3ffa65,_0xc40cea){var _0x20aaa0=function(_0x19c7dd){while(--_0x19c7dd){_0x3ffa65['push'](_0x3ffa65['shift']());}};_0x20aaa0(++_0xc40cea);}(a165_0x5778,0x15d));var a165_0x250b=function(_0x46db33,_0x5a68f2){_0x46db33=_0x46db33-0x0;var _0x47b737=a165_0x5778[_0x46db33];return _0x47b737;};'use strict';var __importDefault=this&&this[a165_0x250b('0x0')]||function(_0x20708b){return _0x20708b&&_0x20708b[a165_0x250b('0x1')]?_0x20708b:{'default':_0x20708b};};Object[a165_0x250b('0x2')](exports,'__esModule',{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a165_0x250b('0x3')));const responseUtils=require(a165_0x250b('0x4'));class PlayerDevicesController extends controller_utils_1['default']{constructor(_0x456f64,_0x3cc23c,_0x132233){super(_0x456f64,null);this[a165_0x250b('0x5')]=_0x3cc23c;this[a165_0x250b('0x6')]=_0x132233;this['register']=this[a165_0x250b('0x7')]['bind'](this);this[a165_0x250b('0x8')]=this[a165_0x250b('0x8')][a165_0x250b('0x9')](this);this['getStatus']=this[a165_0x250b('0xa')]['bind'](this);}['register'](_0x1c48b5,_0x1cc8e7,_0x5b84f5){return this[a165_0x250b('0x5')]['updateOrCreate']({'params':{'uuid':_0x1c48b5[a165_0x250b('0xb')][a165_0x250b('0xc')]},'body':{'uuid':_0x1c48b5[a165_0x250b('0xb')]['device_uuid'],'network_info':_0x1c48b5[a165_0x250b('0xb')][a165_0x250b('0xd')],'firmware_info':_0x1c48b5[a165_0x250b('0xb')]['firmware_info']}},null,_0x5b84f5,!![])['then'](_0x3291d3=>{return this[a165_0x250b('0xe')]({'params':{'device_id':_0x3291d3['id'],'player_id':_0x1c48b5['body']['player_id']},'body':{'device_id':_0x3291d3['id'],'player_id':_0x1c48b5[a165_0x250b('0xb')][a165_0x250b('0xf')],'status':_0x1c48b5[a165_0x250b('0xb')][a165_0x250b('0x10')],'playlist':_0x1c48b5[a165_0x250b('0xb')][a165_0x250b('0x11')],'reported_at':new Date()}},null,_0x5b84f5)[a165_0x250b('0x12')](_0x328047=>{delete _0x3291d3['id'];return _0x1cc8e7[a165_0x250b('0x13')]({'success':!![],'data':_0x3291d3});});});}[a165_0x250b('0x8')](_0x2a0624,_0x1c7615,_0x447738){return this[a165_0x250b('0x5')]['updateOrCreate']({'params':{'uuid':_0x2a0624['body']['device_uuid']},'body':{'uuid':_0x2a0624[a165_0x250b('0xb')]['device_uuid']}},null,_0x447738,!![])[a165_0x250b('0x12')](_0x308355=>{return this[a165_0x250b('0xe')]({'params':{'device_id':_0x308355['id'],'player_id':_0x2a0624[a165_0x250b('0xb')][a165_0x250b('0xf')]},'body':{'device_id':_0x308355['id'],'player_id':_0x2a0624[a165_0x250b('0xb')][a165_0x250b('0xf')],'playing_item':_0x2a0624[a165_0x250b('0xb')][a165_0x250b('0x14')],'status':_0x2a0624[a165_0x250b('0xb')][a165_0x250b('0x10')],'reported_at':new Date()}},null,_0x447738)[a165_0x250b('0x12')](_0x25ab08=>{delete _0x308355['id'];return _0x1c7615[a165_0x250b('0x13')]({'success':!![],'data':_0x25ab08});});});}[a165_0x250b('0xa')](_0x2a22bf,_0x21c071,_0x3dcc52){return this[a165_0x250b('0x6')][a165_0x250b('0x15')]({'params':{'$user.uuid$':_0x2a22bf['params']['user_uuid']}},null,_0x3dcc52,!![],[sequelize_utils_1[a165_0x250b('0x16')][a165_0x250b('0x17')][a165_0x250b('0x18')],sequelize_utils_1[a165_0x250b('0x16')]['models'][a165_0x250b('0x19')]])[a165_0x250b('0x12')](_0x5e3c2d=>{console['log'](_0x5e3c2d);return _0x21c071['json']({'success':!![],'data':_0x5e3c2d});});}}exports['default']=PlayerDevicesController;