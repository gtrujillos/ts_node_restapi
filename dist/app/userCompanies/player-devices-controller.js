var a165_0xaaa1=['player_id','status','playlist','json','playing_item','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','reportStatus','bind','getStatus','updateOrCreate','body','device_uuid','network_info','then'];(function(_0x42aa4b,_0x3a8157){var _0x5611cb=function(_0xc4b19f){while(--_0xc4b19f){_0x42aa4b['push'](_0x42aa4b['shift']());}};_0x5611cb(++_0x3a8157);}(a165_0xaaa1,0x1ba));var a165_0x3ee2=function(_0x1ca04c,_0x4f7565){_0x1ca04c=_0x1ca04c-0x0;var _0x1725f2=a165_0xaaa1[_0x1ca04c];return _0x1725f2;};'use strict';var __importDefault=this&&this[a165_0x3ee2('0x0')]||function(_0x4bb819){return _0x4bb819&&_0x4bb819[a165_0x3ee2('0x1')]?_0x4bb819:{'default':_0x4bb819};};Object[a165_0x3ee2('0x2')](exports,a165_0x3ee2('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a165_0x3ee2('0x3')));const responseUtils=require(a165_0x3ee2('0x4'));class PlayerDevicesController extends controller_utils_1[a165_0x3ee2('0x5')]{constructor(_0x28eace,_0x477071,_0x334c3d){super(_0x28eace,null);this[a165_0x3ee2('0x6')]=_0x477071;this[a165_0x3ee2('0x7')]=_0x334c3d;this[a165_0x3ee2('0x8')]=this[a165_0x3ee2('0x8')]['bind'](this);this[a165_0x3ee2('0x9')]=this['reportStatus'][a165_0x3ee2('0xa')](this);this[a165_0x3ee2('0xb')]=this[a165_0x3ee2('0xb')][a165_0x3ee2('0xa')](this);}[a165_0x3ee2('0x8')](_0x59f54e,_0x526f3b,_0x5abd38){return this[a165_0x3ee2('0x6')][a165_0x3ee2('0xc')]({'params':{'uuid':_0x59f54e[a165_0x3ee2('0xd')][a165_0x3ee2('0xe')]},'body':{'uuid':_0x59f54e[a165_0x3ee2('0xd')]['device_uuid'],'network_info':_0x59f54e[a165_0x3ee2('0xd')][a165_0x3ee2('0xf')],'firmware_info':_0x59f54e[a165_0x3ee2('0xd')]['firmware_info']}},null,_0x5abd38,!![])[a165_0x3ee2('0x10')](_0x4c78f7=>{return this[a165_0x3ee2('0xc')]({'params':{'device_id':_0x4c78f7['id'],'player_id':_0x59f54e['body'][a165_0x3ee2('0x11')]},'body':{'device_id':_0x4c78f7['id'],'player_id':_0x59f54e[a165_0x3ee2('0xd')][a165_0x3ee2('0x11')],'status':_0x59f54e[a165_0x3ee2('0xd')][a165_0x3ee2('0x12')],'playlist':_0x59f54e[a165_0x3ee2('0xd')][a165_0x3ee2('0x13')],'reported_at':new Date()}},null,_0x5abd38)['then'](_0x4d9dec=>{delete _0x4c78f7['id'];return _0x526f3b[a165_0x3ee2('0x14')]({'success':!![],'data':_0x4c78f7});});});}[a165_0x3ee2('0x9')](_0x5ab97d,_0x12a856,_0x26e1e7){return this[a165_0x3ee2('0x6')][a165_0x3ee2('0xc')]({'params':{'uuid':_0x5ab97d[a165_0x3ee2('0xd')][a165_0x3ee2('0xe')]},'body':{'uuid':_0x5ab97d[a165_0x3ee2('0xd')][a165_0x3ee2('0xe')]}},null,_0x26e1e7,!![])[a165_0x3ee2('0x10')](_0x4c58e7=>{return this[a165_0x3ee2('0xc')]({'params':{'device_id':_0x4c58e7['id'],'player_id':_0x5ab97d[a165_0x3ee2('0xd')][a165_0x3ee2('0x11')]},'body':{'device_id':_0x4c58e7['id'],'player_id':_0x5ab97d[a165_0x3ee2('0xd')][a165_0x3ee2('0x11')],'playing_item':_0x5ab97d[a165_0x3ee2('0xd')][a165_0x3ee2('0x15')],'status':_0x5ab97d[a165_0x3ee2('0xd')]['status'],'reported_at':new Date()}},null,_0x26e1e7)[a165_0x3ee2('0x10')](_0x4f7003=>{delete _0x4c58e7['id'];return _0x12a856[a165_0x3ee2('0x14')]({'success':!![],'data':_0x4f7003});});});}['getStatus'](_0x243baa,_0x1677dd,_0x514dae){return this[a165_0x3ee2('0x7')]['find']({'params':{'$user.uuid$':_0x243baa['params'][a165_0x3ee2('0x16')]}},null,_0x514dae,!![],[sequelize_utils_1[a165_0x3ee2('0x5')][a165_0x3ee2('0x17')][a165_0x3ee2('0x18')],sequelize_utils_1[a165_0x3ee2('0x5')]['models'][a165_0x3ee2('0x19')]])[a165_0x3ee2('0x10')](_0x352808=>{console[a165_0x3ee2('0x1a')](_0x352808);return _0x1677dd['json']({'success':!![],'data':_0x352808});});}}exports['default']=PlayerDevicesController;