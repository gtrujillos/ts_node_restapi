var a165_0x3283=['../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','body','device_uuid','firmware_info','then','updateOrCreate','player_id','playing_item','json','params','user_uuid','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty'];(function(_0x203de8,_0x453d76){var _0x42ed7d=function(_0x128b52){while(--_0x128b52){_0x203de8['push'](_0x203de8['shift']());}};_0x42ed7d(++_0x453d76);}(a165_0x3283,0x7a));var a165_0x5adf=function(_0x2ffdad,_0x22b9b9){_0x2ffdad=_0x2ffdad-0x0;var _0x1b910b=a165_0x3283[_0x2ffdad];return _0x1b910b;};'use strict';var __importDefault=this&&this[a165_0x5adf('0x0')]||function(_0x2c6c50){return _0x2c6c50&&_0x2c6c50[a165_0x5adf('0x1')]?_0x2c6c50:{'default':_0x2c6c50};};Object[a165_0x5adf('0x2')](exports,a165_0x5adf('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const responseUtils=require(a165_0x5adf('0x3'));class PlayerDevicesController extends controller_utils_1[a165_0x5adf('0x4')]{constructor(_0x5aeebf,_0x3c1490,_0x444e07){super(_0x5aeebf,null);this[a165_0x5adf('0x5')]=_0x3c1490;this[a165_0x5adf('0x6')]=_0x444e07;this[a165_0x5adf('0x7')]=this['register'][a165_0x5adf('0x8')](this);this[a165_0x5adf('0x9')]=this[a165_0x5adf('0x9')][a165_0x5adf('0x8')](this);this[a165_0x5adf('0xa')]=this[a165_0x5adf('0xa')][a165_0x5adf('0x8')](this);}[a165_0x5adf('0x7')](_0x5a46cc,_0x436523,_0x10f078){return this['devicesController']['updateOrCreate']({'params':{'uuid':_0x5a46cc[a165_0x5adf('0xb')][a165_0x5adf('0xc')]},'body':{'uuid':_0x5a46cc[a165_0x5adf('0xb')][a165_0x5adf('0xc')],'network_info':_0x5a46cc[a165_0x5adf('0xb')]['network_info'],'firmware_info':_0x5a46cc[a165_0x5adf('0xb')][a165_0x5adf('0xd')]}},null,_0x10f078,!![])[a165_0x5adf('0xe')](_0x5338f=>{return this[a165_0x5adf('0xf')]({'params':{'device_id':_0x5338f['id'],'player_id':_0x5a46cc[a165_0x5adf('0xb')]['player_id']},'body':{'device_id':_0x5338f['id'],'player_id':_0x5a46cc['body'][a165_0x5adf('0x10')],'status':_0x5a46cc['body']['status'],'playlist':_0x5a46cc['body']['playlist'],'reported_at':new Date()}},null,_0x10f078)['then'](_0x17bde5=>{delete _0x5338f['id'];return _0x436523['json']({'success':!![],'data':_0x5338f});});});}[a165_0x5adf('0x9')](_0x18a804,_0x15f3ae,_0x20a4c6){return this[a165_0x5adf('0x5')][a165_0x5adf('0xf')]({'params':{'uuid':_0x18a804[a165_0x5adf('0xb')][a165_0x5adf('0xc')]},'body':{'uuid':_0x18a804[a165_0x5adf('0xb')]['device_uuid']}},null,_0x20a4c6,!![])[a165_0x5adf('0xe')](_0x1cb426=>{return this[a165_0x5adf('0xf')]({'params':{'device_id':_0x1cb426['id'],'player_id':_0x18a804['body'][a165_0x5adf('0x10')]},'body':{'device_id':_0x1cb426['id'],'player_id':_0x18a804['body'][a165_0x5adf('0x10')],'playing_item':_0x18a804['body'][a165_0x5adf('0x11')],'status':_0x18a804[a165_0x5adf('0xb')]['status'],'reported_at':new Date()}},null,_0x20a4c6)[a165_0x5adf('0xe')](_0x5e491a=>{delete _0x1cb426['id'];return _0x15f3ae[a165_0x5adf('0x12')]({'success':!![],'data':_0x5e491a});});});}[a165_0x5adf('0xa')](_0x158a31,_0x3b8cae,_0x26ee42){return this[a165_0x5adf('0x6')]['find']({'params':{'$user.uuid$':_0x158a31[a165_0x5adf('0x13')][a165_0x5adf('0x14')]}},null,_0x26ee42,!![],[sequelize_utils_1[a165_0x5adf('0x4')][a165_0x5adf('0x15')][a165_0x5adf('0x16')],sequelize_utils_1[a165_0x5adf('0x4')][a165_0x5adf('0x15')][a165_0x5adf('0x17')]])[a165_0x5adf('0xe')](_0x51d779=>{console[a165_0x5adf('0x18')](_0x51d779);return _0x3b8cae[a165_0x5adf('0x12')]({'success':!![],'data':_0x51d779});});}}exports[a165_0x5adf('0x4')]=PlayerDevicesController;