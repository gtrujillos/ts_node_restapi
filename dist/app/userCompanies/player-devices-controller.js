var a165_0x191f=['../../infrastructure/controller-utils','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','body','device_uuid','network_info','firmware_info','then','player_id','status','json','find','params','models','usersModel','playerDevicesModel','log','__importDefault','__esModule','defineProperty'];(function(_0x12923d,_0xe9f4a4){var _0x5f0c5a=function(_0x27cfb6){while(--_0x27cfb6){_0x12923d['push'](_0x12923d['shift']());}};_0x5f0c5a(++_0xe9f4a4);}(a165_0x191f,0xc1));var a165_0x54d4=function(_0xcb537,_0xa73494){_0xcb537=_0xcb537-0x0;var _0xc33c11=a165_0x191f[_0xcb537];return _0xc33c11;};'use strict';var __importDefault=this&&this[a165_0x54d4('0x0')]||function(_0x4d851d){return _0x4d851d&&_0x4d851d[a165_0x54d4('0x1')]?_0x4d851d:{'default':_0x4d851d};};Object[a165_0x54d4('0x2')](exports,a165_0x54d4('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require(a165_0x54d4('0x3')));const sequelize_utils_1=__importDefault(require(a165_0x54d4('0x4')));const responseUtils=require(a165_0x54d4('0x5'));class PlayerDevicesController extends controller_utils_1[a165_0x54d4('0x6')]{constructor(_0x49819a,_0x3fecfc,_0x1fcf2e){super(_0x49819a,null);this[a165_0x54d4('0x7')]=_0x3fecfc;this[a165_0x54d4('0x8')]=_0x1fcf2e;this[a165_0x54d4('0x9')]=this['register'][a165_0x54d4('0xa')](this);this[a165_0x54d4('0xb')]=this['reportStatus'][a165_0x54d4('0xa')](this);this[a165_0x54d4('0xc')]=this[a165_0x54d4('0xc')]['bind'](this);}[a165_0x54d4('0x9')](_0x134652,_0x397f0f,_0x40c0b3){return this[a165_0x54d4('0x7')][a165_0x54d4('0xd')]({'params':{'uuid':_0x134652[a165_0x54d4('0xe')][a165_0x54d4('0xf')]},'body':{'uuid':_0x134652[a165_0x54d4('0xe')][a165_0x54d4('0xf')],'network_info':_0x134652[a165_0x54d4('0xe')][a165_0x54d4('0x10')],'firmware_info':_0x134652[a165_0x54d4('0xe')][a165_0x54d4('0x11')]}},null,_0x40c0b3,!![])[a165_0x54d4('0x12')](_0xe516eb=>{return this[a165_0x54d4('0xd')]({'params':{'device_id':_0xe516eb['id'],'player_id':_0x134652[a165_0x54d4('0xe')][a165_0x54d4('0x13')]},'body':{'device_id':_0xe516eb['id'],'player_id':_0x134652[a165_0x54d4('0xe')]['player_id'],'status':_0x134652['body'][a165_0x54d4('0x14')],'playlist':_0x134652[a165_0x54d4('0xe')]['playlist'],'reported_at':new Date()}},null,_0x40c0b3)['then'](_0x16093f=>{delete _0xe516eb['id'];return _0x397f0f[a165_0x54d4('0x15')]({'success':!![],'data':_0xe516eb});});});}[a165_0x54d4('0xb')](_0xbdc234,_0x2ebddf,_0x18f935){return this[a165_0x54d4('0x7')][a165_0x54d4('0xd')]({'params':{'uuid':_0xbdc234[a165_0x54d4('0xe')][a165_0x54d4('0xf')]},'body':{'uuid':_0xbdc234[a165_0x54d4('0xe')]['device_uuid']}},null,_0x18f935,!![])[a165_0x54d4('0x12')](_0x3a3528=>{return this['updateOrCreate']({'params':{'device_id':_0x3a3528['id'],'player_id':_0xbdc234[a165_0x54d4('0xe')][a165_0x54d4('0x13')]},'body':{'device_id':_0x3a3528['id'],'player_id':_0xbdc234[a165_0x54d4('0xe')][a165_0x54d4('0x13')],'playing_item':_0xbdc234[a165_0x54d4('0xe')]['playing_item'],'status':_0xbdc234[a165_0x54d4('0xe')][a165_0x54d4('0x14')],'reported_at':new Date()}},null,_0x18f935)[a165_0x54d4('0x12')](_0x382689=>{delete _0x3a3528['id'];return _0x2ebddf[a165_0x54d4('0x15')]({'success':!![],'data':_0x382689});});});}[a165_0x54d4('0xc')](_0x21a6ca,_0x595452,_0x1a3345){return this[a165_0x54d4('0x8')][a165_0x54d4('0x16')]({'params':{'$user.uuid$':_0x21a6ca[a165_0x54d4('0x17')]['user_uuid']}},null,_0x1a3345,!![],[sequelize_utils_1[a165_0x54d4('0x6')][a165_0x54d4('0x18')][a165_0x54d4('0x19')],sequelize_utils_1[a165_0x54d4('0x6')]['models'][a165_0x54d4('0x1a')]])[a165_0x54d4('0x12')](_0x20ae2c=>{console[a165_0x54d4('0x1b')](_0x20ae2c);return _0x595452['json']({'success':!![],'data':_0x20ae2c});});}}exports[a165_0x54d4('0x6')]=PlayerDevicesController;