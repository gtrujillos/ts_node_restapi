var a165_0x14dd=['params','user_uuid','models','playerDevicesModel','__importDefault','__esModule','defineProperty','../../infrastructure/sequelize-utils','../../infrastructure/response-utils','default','devicesController','playersController','register','bind','reportStatus','getStatus','updateOrCreate','device_uuid','body','network_info','firmware_info','player_id','status','playlist','then','json','find'];(function(_0x783cf1,_0x5d0683){var _0x5bb458=function(_0x48bdcf){while(--_0x48bdcf){_0x783cf1['push'](_0x783cf1['shift']());}};_0x5bb458(++_0x5d0683);}(a165_0x14dd,0xf7));var a165_0x307c=function(_0x2095bd,_0x3e2d48){_0x2095bd=_0x2095bd-0x0;var _0xb37315=a165_0x14dd[_0x2095bd];return _0xb37315;};'use strict';var __importDefault=this&&this[a165_0x307c('0x0')]||function(_0xcc6f39){return _0xcc6f39&&_0xcc6f39[a165_0x307c('0x1')]?_0xcc6f39:{'default':_0xcc6f39};};Object[a165_0x307c('0x2')](exports,a165_0x307c('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require(a165_0x307c('0x3')));const responseUtils=require(a165_0x307c('0x4'));class PlayerDevicesController extends controller_utils_1[a165_0x307c('0x5')]{constructor(_0x3e199e,_0x25e7c2,_0x4ea6ba){super(_0x3e199e,null);this[a165_0x307c('0x6')]=_0x25e7c2;this[a165_0x307c('0x7')]=_0x4ea6ba;this[a165_0x307c('0x8')]=this[a165_0x307c('0x8')][a165_0x307c('0x9')](this);this[a165_0x307c('0xa')]=this[a165_0x307c('0xa')][a165_0x307c('0x9')](this);this[a165_0x307c('0xb')]=this[a165_0x307c('0xb')][a165_0x307c('0x9')](this);}['register'](_0x217d65,_0x5cad87,_0x455743){return this[a165_0x307c('0x6')][a165_0x307c('0xc')]({'params':{'uuid':_0x217d65['body'][a165_0x307c('0xd')]},'body':{'uuid':_0x217d65[a165_0x307c('0xe')][a165_0x307c('0xd')],'network_info':_0x217d65['body'][a165_0x307c('0xf')],'firmware_info':_0x217d65[a165_0x307c('0xe')][a165_0x307c('0x10')]}},null,_0x455743,!![])['then'](_0x10b85f=>{return this[a165_0x307c('0xc')]({'params':{'device_id':_0x10b85f['id'],'player_id':_0x217d65['body'][a165_0x307c('0x11')]},'body':{'device_id':_0x10b85f['id'],'player_id':_0x217d65[a165_0x307c('0xe')][a165_0x307c('0x11')],'status':_0x217d65[a165_0x307c('0xe')][a165_0x307c('0x12')],'playlist':_0x217d65[a165_0x307c('0xe')][a165_0x307c('0x13')],'reported_at':new Date()}},null,_0x455743)[a165_0x307c('0x14')](_0x109014=>{delete _0x10b85f['id'];return _0x5cad87[a165_0x307c('0x15')]({'success':!![],'data':_0x10b85f});});});}[a165_0x307c('0xa')](_0x294181,_0x2ef632,_0x3637b1){return this['devicesController'][a165_0x307c('0xc')]({'params':{'uuid':_0x294181[a165_0x307c('0xe')][a165_0x307c('0xd')]},'body':{'uuid':_0x294181['body'][a165_0x307c('0xd')]}},null,_0x3637b1,!![])['then'](_0x41bf18=>{return this[a165_0x307c('0xc')]({'params':{'device_id':_0x41bf18['id'],'player_id':_0x294181[a165_0x307c('0xe')][a165_0x307c('0x11')]},'body':{'device_id':_0x41bf18['id'],'player_id':_0x294181[a165_0x307c('0xe')]['player_id'],'playing_item':_0x294181[a165_0x307c('0xe')]['playing_item'],'status':_0x294181[a165_0x307c('0xe')][a165_0x307c('0x12')],'reported_at':new Date()}},null,_0x3637b1)[a165_0x307c('0x14')](_0x25b6c3=>{delete _0x41bf18['id'];return _0x2ef632[a165_0x307c('0x15')]({'success':!![],'data':_0x25b6c3});});});}[a165_0x307c('0xb')](_0x21a73c,_0x3e06cb,_0x23fa42){return this[a165_0x307c('0x7')][a165_0x307c('0x16')]({'params':{'$user.uuid$':_0x21a73c[a165_0x307c('0x17')][a165_0x307c('0x18')]}},null,_0x23fa42,!![],[sequelize_utils_1[a165_0x307c('0x5')][a165_0x307c('0x19')]['usersModel'],sequelize_utils_1[a165_0x307c('0x5')][a165_0x307c('0x19')][a165_0x307c('0x1a')]])[a165_0x307c('0x14')](_0x2704ca=>{console['log'](_0x2704ca);return _0x3e06cb[a165_0x307c('0x15')]({'success':!![],'data':_0x2704ca});});}}exports[a165_0x307c('0x5')]=PlayerDevicesController;