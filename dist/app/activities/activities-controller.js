var a0_0x2805=['attributes','title','name','is_private','find','getImagesTotal','filesModel','type','count','saveTimeLog\x20req.body','started_at','ended_at','description','timeLogsController','timeLogResult\x20req.body:\x20','activityTimeLogsController','dataValues','catch','stack','decryptId','include','timeLogsModel','orderBy','__importDefault','__esModule','defineProperty','../../infrastructure/base-controller','../shared/models/crudOptions','../models','../controllers','../../infrastructure/sequelize-utils','fs-extra','../../infrastructure/response-utils','default','saveImage','getImages','bind','saveTimeLog','getTimeLogs','getTimeLogsTotal','log','user','errorResponse','authentication\x20failed','getInstance','saveFile','then','body','encryptId','fields','activity_id','req.body','activityFilesController','save','file_id','successResponse','params','req.params','public','shared','updated_at','DESC'];(function(_0x10847c,_0x1dd0b5){var _0x345568=function(_0x4c5a6a){while(--_0x4c5a6a){_0x10847c['push'](_0x10847c['shift']());}};_0x345568(++_0x1dd0b5);}(a0_0x2805,0x93));var a0_0x445b=function(_0x3c64cf,_0x1a98ad){_0x3c64cf=_0x3c64cf-0x0;var _0x373ddd=a0_0x2805[_0x3c64cf];return _0x373ddd;};'use strict';var __importDefault=this&&this[a0_0x445b('0x0')]||function(_0x3a7c30){return _0x3a7c30&&_0x3a7c30[a0_0x445b('0x1')]?_0x3a7c30:{'default':_0x3a7c30};};Object[a0_0x445b('0x2')](exports,a0_0x445b('0x1'),{'value':!![]});const base_controller_1=__importDefault(require(a0_0x445b('0x3')));const crudOptions_1=__importDefault(require(a0_0x445b('0x4')));const models_1=__importDefault(require(a0_0x445b('0x5')));const controllers_1=__importDefault(require(a0_0x445b('0x6')));const sequelize_utils_1=__importDefault(require(a0_0x445b('0x7')));const fsExtra=require(a0_0x445b('0x8'));const formidable=require('formidable');const responseUtils=require(a0_0x445b('0x9'));class ActivitiesController extends base_controller_1[a0_0x445b('0xa')]{constructor(_0x11083f){super(_0x11083f,null);this[a0_0x445b('0xb')]=this[a0_0x445b('0xb')]['bind'](this);this[a0_0x445b('0xc')]=this[a0_0x445b('0xc')][a0_0x445b('0xd')](this);this['getImagesTotal']=this['getImagesTotal']['bind'](this);this[a0_0x445b('0xe')]=this['saveTimeLog']['bind'](this);this['getTimeLogs']=this[a0_0x445b('0xf')][a0_0x445b('0xd')](this);this[a0_0x445b('0x10')]=this[a0_0x445b('0x10')]['bind'](this);}['saveImage'](_0x33d468,_0x389cfb,_0x58ea61){console[a0_0x445b('0x11')](a0_0x445b('0xb'));if(!_0x33d468[a0_0x445b('0x12')]){return responseUtils[a0_0x445b('0x13')](_0x33d468,_0x389cfb,a0_0x445b('0x14'),0x191);}controllers_1[a0_0x445b('0xa')][a0_0x445b('0x15')]()['filesController'][a0_0x445b('0x16')](_0x33d468,null,null)[a0_0x445b('0x17')](_0x2e8332=>{_0x33d468[a0_0x445b('0x18')]={'file_id':sequelize_utils_1[a0_0x445b('0xa')][a0_0x445b('0x19')](_0x2e8332['data']['id']),'activity_id':_0x2e8332[a0_0x445b('0x1a')][a0_0x445b('0x1b')]};console[a0_0x445b('0x11')](a0_0x445b('0x1c'),_0x33d468[a0_0x445b('0x18')]);controllers_1[a0_0x445b('0xa')]['getInstance']()[a0_0x445b('0x1d')][a0_0x445b('0x1e')](_0x33d468,null,null)[a0_0x445b('0x17')](_0x1840d3=>{const _0x284b6f={'file_id':sequelize_utils_1[a0_0x445b('0xa')]['encryptId'](_0x1840d3[a0_0x445b('0x1f')])};responseUtils[a0_0x445b('0x20')](_0x33d468,_0x389cfb,_0x284b6f,0xc8);})['catch'](_0x3cf378=>{return responseUtils[a0_0x445b('0x13')](_0x33d468,_0x389cfb,_0x3cf378['stack'],0x1f4);});},_0x28cf9f=>{return responseUtils[a0_0x445b('0x13')](_0x33d468,_0x389cfb,_0x28cf9f,0x1f4);});}['getImages'](_0x1c0044,_0x33a162,_0x30f0fc){_0x1c0044['params']=sequelize_utils_1[a0_0x445b('0xa')]['decryptId'](_0x1c0044[a0_0x445b('0x21')]);console[a0_0x445b('0x11')](a0_0x445b('0x22'),_0x1c0044['params']);const _0x4cbf25=new crudOptions_1[(a0_0x445b('0xa'))]();_0x4cbf25[a0_0x445b('0x23')]=!![];_0x4cbf25[a0_0x445b('0x24')]=!![];_0x4cbf25['orderBy']=[[a0_0x445b('0x25'),a0_0x445b('0x26')]];_0x4cbf25[a0_0x445b('0x27')]=['id','file_id'];_0x4cbf25['include']=[{'model':models_1[a0_0x445b('0xa')][a0_0x445b('0x15')]()['filesModel'],'attributes':[a0_0x445b('0x28'),a0_0x445b('0x29'),'type',a0_0x445b('0x2a')]}];return controllers_1[a0_0x445b('0xa')][a0_0x445b('0x15')]()[a0_0x445b('0x1d')][a0_0x445b('0x2b')](_0x1c0044,_0x33a162,_0x30f0fc,_0x4cbf25);}[a0_0x445b('0x2c')](_0x417596,_0x3630dd,_0x21dcd5){_0x417596[a0_0x445b('0x21')]=sequelize_utils_1[a0_0x445b('0xa')]['decryptId'](_0x417596[a0_0x445b('0x21')]);console[a0_0x445b('0x11')](a0_0x445b('0x22'),_0x417596[a0_0x445b('0x21')]);const _0x5e48cc=new crudOptions_1[(a0_0x445b('0xa'))]();_0x5e48cc['public']=!![];_0x5e48cc[a0_0x445b('0x24')]=!![];_0x5e48cc['orderBy']=[[a0_0x445b('0x25'),a0_0x445b('0x26')]];_0x5e48cc[a0_0x445b('0x27')]=['id',a0_0x445b('0x1f')];_0x5e48cc['include']=[{'model':models_1[a0_0x445b('0xa')][a0_0x445b('0x15')]()[a0_0x445b('0x2d')],'attributes':['title',a0_0x445b('0x29'),a0_0x445b('0x2e'),a0_0x445b('0x2a')]}];return controllers_1['default']['getInstance']()[a0_0x445b('0x1d')][a0_0x445b('0x2f')](_0x417596,_0x3630dd,_0x21dcd5,_0x5e48cc);}[a0_0x445b('0xe')](_0x118c0a,_0x2c27f7,_0x382bb0){console[a0_0x445b('0x11')](a0_0x445b('0x30'),_0x118c0a['body']);if(!_0x118c0a[a0_0x445b('0x12')]){return responseUtils['errorResponse'](_0x118c0a,_0x2c27f7,a0_0x445b('0x14'),0x191);}const _0x40af54=_0x118c0a['body'][a0_0x445b('0x1b')];_0x118c0a['body']={'started_at':_0x118c0a['body'][a0_0x445b('0x31')],'ended_at':_0x118c0a['body'][a0_0x445b('0x32')],'description':_0x118c0a[a0_0x445b('0x18')][a0_0x445b('0x33')],'is_private':_0x118c0a['body'][a0_0x445b('0x2a')]};controllers_1[a0_0x445b('0xa')][a0_0x445b('0x15')]()[a0_0x445b('0x34')][a0_0x445b('0x1e')](_0x118c0a,null,null)[a0_0x445b('0x17')](_0x5025ab=>{_0x118c0a[a0_0x445b('0x18')]={'time_log_id':sequelize_utils_1['default']['encryptId'](_0x5025ab['dataValues']['id']),'activity_id':_0x40af54};console['log'](a0_0x445b('0x35'),_0x118c0a[a0_0x445b('0x18')]);controllers_1[a0_0x445b('0xa')]['getInstance']()[a0_0x445b('0x36')][a0_0x445b('0x1e')](_0x118c0a,null,null)['then'](_0xf964e1=>{console['log']('activityTimeLogResult:\x20',_0xf964e1[a0_0x445b('0x37')]);responseUtils['successResponse'](_0x118c0a,_0x2c27f7,_0xf964e1,0xc8);})[a0_0x445b('0x38')](_0x185f5b=>{return responseUtils[a0_0x445b('0x13')](_0x118c0a,_0x2c27f7,_0x185f5b[a0_0x445b('0x39')],0x1f4);});})[a0_0x445b('0x38')](_0x128100=>{return responseUtils['errorResponse'](_0x118c0a,_0x2c27f7,_0x128100['stack'],0x1f4);});}['getTimeLogs'](_0x1d8fe8,_0x5506cd,_0xedcc43){_0x1d8fe8[a0_0x445b('0x21')]=sequelize_utils_1[a0_0x445b('0xa')][a0_0x445b('0x3a')](_0x1d8fe8[a0_0x445b('0x21')]);console[a0_0x445b('0x11')](a0_0x445b('0x22'),_0x1d8fe8[a0_0x445b('0x21')]);const _0x909761=new crudOptions_1[(a0_0x445b('0xa'))]();_0x909761[a0_0x445b('0x23')]=!![];_0x909761['shared']=!![];_0x909761['orderBy']=[[a0_0x445b('0x25'),a0_0x445b('0x26')]];_0x909761[a0_0x445b('0x3b')]=[{'model':models_1['default']['getInstance']()[a0_0x445b('0x3c')]}];return controllers_1['default'][a0_0x445b('0x15')]()[a0_0x445b('0x36')][a0_0x445b('0x2b')](_0x1d8fe8,_0x5506cd,_0xedcc43,_0x909761);}['getTimeLogsTotal'](_0x373a27,_0x5589c7,_0x426589){_0x373a27[a0_0x445b('0x21')]=sequelize_utils_1[a0_0x445b('0xa')][a0_0x445b('0x3a')](_0x373a27['params']);console[a0_0x445b('0x11')](a0_0x445b('0x22'),_0x373a27[a0_0x445b('0x21')]);const _0x454838=new crudOptions_1[(a0_0x445b('0xa'))]();_0x454838[a0_0x445b('0x23')]=!![];_0x454838[a0_0x445b('0x24')]=!![];_0x454838[a0_0x445b('0x3d')]=[[a0_0x445b('0x25'),a0_0x445b('0x26')]];_0x454838[a0_0x445b('0x3b')]=[{'model':models_1[a0_0x445b('0xa')][a0_0x445b('0x15')]()[a0_0x445b('0x3c')]}];return controllers_1[a0_0x445b('0xa')]['getInstance']()[a0_0x445b('0x36')][a0_0x445b('0x2f')](_0x373a27,_0x5589c7,_0x426589,_0x454838);}}exports[a0_0x445b('0xa')]=ActivitiesController;