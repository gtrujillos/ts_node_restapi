var a0_0x6aca=['../controllers','../../infrastructure/sequelize-utils','fs-extra','formidable','default','saveImage','getImages','getImagesTotal','bind','user','errorResponse','getInstance','saveFile','body','data','log','req.body','activityFilesController','then','encryptId','successResponse','catch','stack','decryptId','params','public','shared','orderBy','updated_at','DESC','attributes','include','filesModel','is_private','find','req.params','file_id','title','name','type','count','saveTimeLog','authentication\x20failed','activity_id','started_at','ended_at','description','timeLogsController','save','dataValues','timeLogResult\x20req.body:\x20','activityTimeLogsController','getTimeLogs','timeLogsModel','getTimeLogsTotal','__importDefault','__esModule','defineProperty','../../infrastructure/base-controller','../shared/models/crudOptions'];(function(_0x7da199,_0x3daecb){var _0x1b7629=function(_0x31ef49){while(--_0x31ef49){_0x7da199['push'](_0x7da199['shift']());}};_0x1b7629(++_0x3daecb);}(a0_0x6aca,0x163));var a0_0x24f7=function(_0x4e639c,_0x528f79){_0x4e639c=_0x4e639c-0x0;var _0x18dc55=a0_0x6aca[_0x4e639c];return _0x18dc55;};'use strict';var __importDefault=this&&this[a0_0x24f7('0x0')]||function(_0x470cc8){return _0x470cc8&&_0x470cc8[a0_0x24f7('0x1')]?_0x470cc8:{'default':_0x470cc8};};Object[a0_0x24f7('0x2')](exports,a0_0x24f7('0x1'),{'value':!![]});const base_controller_1=__importDefault(require(a0_0x24f7('0x3')));const crudOptions_1=__importDefault(require(a0_0x24f7('0x4')));const models_1=__importDefault(require('../models'));const controllers_1=__importDefault(require(a0_0x24f7('0x5')));const sequelize_utils_1=__importDefault(require(a0_0x24f7('0x6')));const fsExtra=require(a0_0x24f7('0x7'));const formidable=require(a0_0x24f7('0x8'));const responseUtils=require('../../infrastructure/response-utils');class ActivitiesController extends base_controller_1[a0_0x24f7('0x9')]{constructor(_0x10483a){super(_0x10483a,null);this[a0_0x24f7('0xa')]=this['saveImage']['bind'](this);this[a0_0x24f7('0xb')]=this[a0_0x24f7('0xb')]['bind'](this);this['getImagesTotal']=this[a0_0x24f7('0xc')]['bind'](this);this['saveTimeLog']=this['saveTimeLog']['bind'](this);this['getTimeLogs']=this['getTimeLogs'][a0_0x24f7('0xd')](this);this['getTimeLogsTotal']=this['getTimeLogsTotal']['bind'](this);}[a0_0x24f7('0xa')](_0x3e5e6e,_0x217e4a,_0x855e48){console['log'](a0_0x24f7('0xa'));if(!_0x3e5e6e[a0_0x24f7('0xe')]){return responseUtils[a0_0x24f7('0xf')](_0x3e5e6e,_0x217e4a,'authentication\x20failed',0x191);}controllers_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()['filesController'][a0_0x24f7('0x11')](_0x3e5e6e,null,null)['then'](_0x5adf48=>{_0x3e5e6e[a0_0x24f7('0x12')]={'file_id':sequelize_utils_1[a0_0x24f7('0x9')]['encryptId'](_0x5adf48[a0_0x24f7('0x13')]['id']),'activity_id':_0x5adf48['fields']['activity_id']};console[a0_0x24f7('0x14')](a0_0x24f7('0x15'),_0x3e5e6e[a0_0x24f7('0x12')]);controllers_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()[a0_0x24f7('0x16')]['save'](_0x3e5e6e,null,null)[a0_0x24f7('0x17')](_0x576177=>{const _0x8242cc={'file_id':sequelize_utils_1[a0_0x24f7('0x9')][a0_0x24f7('0x18')](_0x576177['file_id'])};responseUtils[a0_0x24f7('0x19')](_0x3e5e6e,_0x217e4a,_0x8242cc,0xc8);})[a0_0x24f7('0x1a')](_0xb2ab96=>{return responseUtils[a0_0x24f7('0xf')](_0x3e5e6e,_0x217e4a,_0xb2ab96[a0_0x24f7('0x1b')],0x1f4);});},_0xfb63c6=>{return responseUtils[a0_0x24f7('0xf')](_0x3e5e6e,_0x217e4a,_0xfb63c6,0x1f4);});}[a0_0x24f7('0xb')](_0x8b9ce5,_0x124371,_0x1fef19){_0x8b9ce5['params']=sequelize_utils_1[a0_0x24f7('0x9')][a0_0x24f7('0x1c')](_0x8b9ce5[a0_0x24f7('0x1d')]);console['log']('req.params',_0x8b9ce5[a0_0x24f7('0x1d')]);const _0x1c4eee=new crudOptions_1[(a0_0x24f7('0x9'))]();_0x1c4eee[a0_0x24f7('0x1e')]=!![];_0x1c4eee[a0_0x24f7('0x1f')]=!![];_0x1c4eee[a0_0x24f7('0x20')]=[[a0_0x24f7('0x21'),a0_0x24f7('0x22')]];_0x1c4eee[a0_0x24f7('0x23')]=['id','file_id'];_0x1c4eee[a0_0x24f7('0x24')]=[{'model':models_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()[a0_0x24f7('0x25')],'attributes':['title','name','type',a0_0x24f7('0x26')]}];return controllers_1[a0_0x24f7('0x9')]['getInstance']()[a0_0x24f7('0x16')][a0_0x24f7('0x27')](_0x8b9ce5,_0x124371,_0x1fef19,_0x1c4eee);}[a0_0x24f7('0xc')](_0x588118,_0x11c66c,_0x49d13e){_0x588118['params']=sequelize_utils_1[a0_0x24f7('0x9')]['decryptId'](_0x588118[a0_0x24f7('0x1d')]);console[a0_0x24f7('0x14')](a0_0x24f7('0x28'),_0x588118[a0_0x24f7('0x1d')]);const _0x17c238=new crudOptions_1['default']();_0x17c238[a0_0x24f7('0x1e')]=!![];_0x17c238[a0_0x24f7('0x1f')]=!![];_0x17c238[a0_0x24f7('0x20')]=[[a0_0x24f7('0x21'),'DESC']];_0x17c238[a0_0x24f7('0x23')]=['id',a0_0x24f7('0x29')];_0x17c238[a0_0x24f7('0x24')]=[{'model':models_1[a0_0x24f7('0x9')]['getInstance']()['filesModel'],'attributes':[a0_0x24f7('0x2a'),a0_0x24f7('0x2b'),a0_0x24f7('0x2c'),a0_0x24f7('0x26')]}];return controllers_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()[a0_0x24f7('0x16')][a0_0x24f7('0x2d')](_0x588118,_0x11c66c,_0x49d13e,_0x17c238);}[a0_0x24f7('0x2e')](_0x4d1682,_0x149c60,_0x5cda3d){console[a0_0x24f7('0x14')]('saveTimeLog\x20req.body',_0x4d1682['body']);if(!_0x4d1682[a0_0x24f7('0xe')]){return responseUtils[a0_0x24f7('0xf')](_0x4d1682,_0x149c60,a0_0x24f7('0x2f'),0x191);}const _0x22f55d=_0x4d1682['body'][a0_0x24f7('0x30')];_0x4d1682['body']={'started_at':_0x4d1682[a0_0x24f7('0x12')][a0_0x24f7('0x31')],'ended_at':_0x4d1682[a0_0x24f7('0x12')][a0_0x24f7('0x32')],'description':_0x4d1682[a0_0x24f7('0x12')][a0_0x24f7('0x33')],'is_private':_0x4d1682['body'][a0_0x24f7('0x26')]};controllers_1['default'][a0_0x24f7('0x10')]()[a0_0x24f7('0x34')][a0_0x24f7('0x35')](_0x4d1682,null,null)['then'](_0x9f9a60=>{_0x4d1682['body']={'time_log_id':sequelize_utils_1['default'][a0_0x24f7('0x18')](_0x9f9a60[a0_0x24f7('0x36')]['id']),'activity_id':_0x22f55d};console[a0_0x24f7('0x14')](a0_0x24f7('0x37'),_0x4d1682[a0_0x24f7('0x12')]);controllers_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()[a0_0x24f7('0x38')][a0_0x24f7('0x35')](_0x4d1682,null,null)[a0_0x24f7('0x17')](_0x3d798a=>{console[a0_0x24f7('0x14')]('activityTimeLogResult:\x20',_0x3d798a['dataValues']);responseUtils[a0_0x24f7('0x19')](_0x4d1682,_0x149c60,_0x3d798a,0xc8);})['catch'](_0x4b0766=>{return responseUtils[a0_0x24f7('0xf')](_0x4d1682,_0x149c60,_0x4b0766[a0_0x24f7('0x1b')],0x1f4);});})[a0_0x24f7('0x1a')](_0x28732a=>{return responseUtils['errorResponse'](_0x4d1682,_0x149c60,_0x28732a['stack'],0x1f4);});}[a0_0x24f7('0x39')](_0x4890a4,_0x44f84e,_0xd8d177){_0x4890a4[a0_0x24f7('0x1d')]=sequelize_utils_1[a0_0x24f7('0x9')][a0_0x24f7('0x1c')](_0x4890a4[a0_0x24f7('0x1d')]);console[a0_0x24f7('0x14')](a0_0x24f7('0x28'),_0x4890a4[a0_0x24f7('0x1d')]);const _0x47890a=new crudOptions_1[(a0_0x24f7('0x9'))]();_0x47890a[a0_0x24f7('0x1e')]=!![];_0x47890a[a0_0x24f7('0x1f')]=!![];_0x47890a['orderBy']=[['updated_at',a0_0x24f7('0x22')]];_0x47890a['include']=[{'model':models_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()[a0_0x24f7('0x3a')]}];return controllers_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()[a0_0x24f7('0x38')]['find'](_0x4890a4,_0x44f84e,_0xd8d177,_0x47890a);}[a0_0x24f7('0x3b')](_0x1506ad,_0x38f67c,_0x5d76d2){_0x1506ad[a0_0x24f7('0x1d')]=sequelize_utils_1[a0_0x24f7('0x9')][a0_0x24f7('0x1c')](_0x1506ad[a0_0x24f7('0x1d')]);console[a0_0x24f7('0x14')]('req.params',_0x1506ad['params']);const _0x2abba2=new crudOptions_1[(a0_0x24f7('0x9'))]();_0x2abba2[a0_0x24f7('0x1e')]=!![];_0x2abba2[a0_0x24f7('0x1f')]=!![];_0x2abba2[a0_0x24f7('0x20')]=[['updated_at','DESC']];_0x2abba2[a0_0x24f7('0x24')]=[{'model':models_1[a0_0x24f7('0x9')]['getInstance']()[a0_0x24f7('0x3a')]}];return controllers_1[a0_0x24f7('0x9')][a0_0x24f7('0x10')]()[a0_0x24f7('0x38')][a0_0x24f7('0x2d')](_0x1506ad,_0x38f67c,_0x5d76d2,_0x2abba2);}}exports[a0_0x24f7('0x9')]=ActivitiesController;