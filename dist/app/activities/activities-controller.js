var a0_0x1b1a=['fs-extra','formidable','../../infrastructure/response-utils','default','saveImage','bind','getImages','getImagesTotal','getTimeLogs','getTimeLogsTotal','log','user','errorResponse','authentication\x20failed','getInstance','filesController','saveFile','then','body','req.body','activityFilesController','save','encryptId','file_id','catch','stack','params','req.params','updated_at','DESC','attributes','filesModel','title','name','type','is_private','find','decryptId','shared','orderBy','include','count','saveTimeLog','activity_id','ended_at','timeLogsController','dataValues','timeLogResult\x20req.body:\x20','activityTimeLogsController','activityTimeLogResult:\x20','public','timeLogsModel','__importDefault','defineProperty','__esModule','../../infrastructure/base-controller','../controllers'];(function(_0x33d882,_0x1e95d4){var _0x1e3f31=function(_0x20282c){while(--_0x20282c){_0x33d882['push'](_0x33d882['shift']());}};_0x1e3f31(++_0x1e95d4);}(a0_0x1b1a,0xa6));var a0_0x259d=function(_0x41d6d3,_0x509296){_0x41d6d3=_0x41d6d3-0x0;var _0x2c5eba=a0_0x1b1a[_0x41d6d3];return _0x2c5eba;};'use strict';var __importDefault=this&&this[a0_0x259d('0x0')]||function(_0x472483){return _0x472483&&_0x472483['__esModule']?_0x472483:{'default':_0x472483};};Object[a0_0x259d('0x1')](exports,a0_0x259d('0x2'),{'value':!![]});const base_controller_1=__importDefault(require(a0_0x259d('0x3')));const crudOptions_1=__importDefault(require('../shared/models/crudOptions'));const models_1=__importDefault(require('../models'));const controllers_1=__importDefault(require(a0_0x259d('0x4')));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const fsExtra=require(a0_0x259d('0x5'));const formidable=require(a0_0x259d('0x6'));const responseUtils=require(a0_0x259d('0x7'));class ActivitiesController extends base_controller_1[a0_0x259d('0x8')]{constructor(_0x28df13){super(_0x28df13,null);this['saveImage']=this[a0_0x259d('0x9')][a0_0x259d('0xa')](this);this[a0_0x259d('0xb')]=this[a0_0x259d('0xb')][a0_0x259d('0xa')](this);this[a0_0x259d('0xc')]=this[a0_0x259d('0xc')][a0_0x259d('0xa')](this);this['saveTimeLog']=this['saveTimeLog'][a0_0x259d('0xa')](this);this[a0_0x259d('0xd')]=this[a0_0x259d('0xd')][a0_0x259d('0xa')](this);this[a0_0x259d('0xe')]=this[a0_0x259d('0xe')][a0_0x259d('0xa')](this);}['saveImage'](_0x3a64c6,_0x22a613,_0x175343){console[a0_0x259d('0xf')](a0_0x259d('0x9'));if(!_0x3a64c6[a0_0x259d('0x10')]){return responseUtils[a0_0x259d('0x11')](_0x3a64c6,_0x22a613,a0_0x259d('0x12'),0x191);}controllers_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()[a0_0x259d('0x14')][a0_0x259d('0x15')](_0x3a64c6,null,null)[a0_0x259d('0x16')](_0x142714=>{_0x3a64c6[a0_0x259d('0x17')]={'file_id':sequelize_utils_1[a0_0x259d('0x8')]['encryptId'](_0x142714['data']['id']),'activity_id':_0x142714['fields']['activity_id']};console['log'](a0_0x259d('0x18'),_0x3a64c6[a0_0x259d('0x17')]);controllers_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()[a0_0x259d('0x19')][a0_0x259d('0x1a')](_0x3a64c6,null,null)[a0_0x259d('0x16')](_0x1bb9bb=>{const _0x4fc169={'file_id':sequelize_utils_1[a0_0x259d('0x8')][a0_0x259d('0x1b')](_0x1bb9bb[a0_0x259d('0x1c')])};responseUtils['successResponse'](_0x3a64c6,_0x22a613,_0x4fc169,0xc8);})[a0_0x259d('0x1d')](_0x4260a6=>{return responseUtils[a0_0x259d('0x11')](_0x3a64c6,_0x22a613,_0x4260a6[a0_0x259d('0x1e')],0x1f4);});},_0x112af3=>{return responseUtils[a0_0x259d('0x11')](_0x3a64c6,_0x22a613,_0x112af3,0x1f4);});}[a0_0x259d('0xb')](_0x1c411d,_0x4d3f16,_0x37da75){_0x1c411d[a0_0x259d('0x1f')]=sequelize_utils_1[a0_0x259d('0x8')]['decryptId'](_0x1c411d[a0_0x259d('0x1f')]);console[a0_0x259d('0xf')](a0_0x259d('0x20'),_0x1c411d[a0_0x259d('0x1f')]);const _0x255694=new crudOptions_1[(a0_0x259d('0x8'))]();_0x255694['public']=!![];_0x255694['shared']=!![];_0x255694['orderBy']=[[a0_0x259d('0x21'),a0_0x259d('0x22')]];_0x255694[a0_0x259d('0x23')]=['id',a0_0x259d('0x1c')];_0x255694['include']=[{'model':models_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()[a0_0x259d('0x24')],'attributes':[a0_0x259d('0x25'),a0_0x259d('0x26'),a0_0x259d('0x27'),a0_0x259d('0x28')]}];return controllers_1[a0_0x259d('0x8')]['getInstance']()[a0_0x259d('0x19')][a0_0x259d('0x29')](_0x1c411d,_0x4d3f16,_0x37da75,_0x255694);}[a0_0x259d('0xc')](_0x1bf42a,_0x4ab43a,_0xf18e37){_0x1bf42a[a0_0x259d('0x1f')]=sequelize_utils_1[a0_0x259d('0x8')][a0_0x259d('0x2a')](_0x1bf42a[a0_0x259d('0x1f')]);console[a0_0x259d('0xf')](a0_0x259d('0x20'),_0x1bf42a['params']);const _0x344097=new crudOptions_1['default']();_0x344097['public']=!![];_0x344097[a0_0x259d('0x2b')]=!![];_0x344097[a0_0x259d('0x2c')]=[['updated_at',a0_0x259d('0x22')]];_0x344097['attributes']=['id',a0_0x259d('0x1c')];_0x344097[a0_0x259d('0x2d')]=[{'model':models_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()['filesModel'],'attributes':[a0_0x259d('0x25'),a0_0x259d('0x26'),a0_0x259d('0x27'),'is_private']}];return controllers_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()[a0_0x259d('0x19')][a0_0x259d('0x2e')](_0x1bf42a,_0x4ab43a,_0xf18e37,_0x344097);}[a0_0x259d('0x2f')](_0x369377,_0x10d46e,_0x3c6277){console[a0_0x259d('0xf')]('saveTimeLog\x20req.body',_0x369377[a0_0x259d('0x17')]);if(!_0x369377[a0_0x259d('0x10')]){return responseUtils[a0_0x259d('0x11')](_0x369377,_0x10d46e,a0_0x259d('0x12'),0x191);}const _0x608cd9=_0x369377['body'][a0_0x259d('0x30')];_0x369377[a0_0x259d('0x17')]={'started_at':_0x369377[a0_0x259d('0x17')]['started_at'],'ended_at':_0x369377[a0_0x259d('0x17')][a0_0x259d('0x31')],'description':_0x369377[a0_0x259d('0x17')]['description'],'is_private':_0x369377[a0_0x259d('0x17')][a0_0x259d('0x28')]};controllers_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()[a0_0x259d('0x32')]['save'](_0x369377,null,null)[a0_0x259d('0x16')](_0x26fdec=>{_0x369377[a0_0x259d('0x17')]={'time_log_id':sequelize_utils_1[a0_0x259d('0x8')][a0_0x259d('0x1b')](_0x26fdec[a0_0x259d('0x33')]['id']),'activity_id':_0x608cd9};console[a0_0x259d('0xf')](a0_0x259d('0x34'),_0x369377[a0_0x259d('0x17')]);controllers_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()[a0_0x259d('0x35')][a0_0x259d('0x1a')](_0x369377,null,null)[a0_0x259d('0x16')](_0x170154=>{console[a0_0x259d('0xf')](a0_0x259d('0x36'),_0x170154[a0_0x259d('0x33')]);responseUtils['successResponse'](_0x369377,_0x10d46e,_0x170154,0xc8);})[a0_0x259d('0x1d')](_0x50707a=>{return responseUtils['errorResponse'](_0x369377,_0x10d46e,_0x50707a[a0_0x259d('0x1e')],0x1f4);});})[a0_0x259d('0x1d')](_0x20bca5=>{return responseUtils['errorResponse'](_0x369377,_0x10d46e,_0x20bca5[a0_0x259d('0x1e')],0x1f4);});}[a0_0x259d('0xd')](_0x578475,_0x25a579,_0x2bf4f6){_0x578475['params']=sequelize_utils_1[a0_0x259d('0x8')][a0_0x259d('0x2a')](_0x578475[a0_0x259d('0x1f')]);console['log'](a0_0x259d('0x20'),_0x578475[a0_0x259d('0x1f')]);const _0x5aeb88=new crudOptions_1[(a0_0x259d('0x8'))]();_0x5aeb88[a0_0x259d('0x37')]=!![];_0x5aeb88[a0_0x259d('0x2b')]=!![];_0x5aeb88['orderBy']=[[a0_0x259d('0x21'),'DESC']];_0x5aeb88[a0_0x259d('0x2d')]=[{'model':models_1[a0_0x259d('0x8')]['getInstance']()[a0_0x259d('0x38')]}];return controllers_1[a0_0x259d('0x8')][a0_0x259d('0x13')]()[a0_0x259d('0x35')][a0_0x259d('0x29')](_0x578475,_0x25a579,_0x2bf4f6,_0x5aeb88);}['getTimeLogsTotal'](_0x5849f9,_0xf61ca4,_0x20925b){_0x5849f9[a0_0x259d('0x1f')]=sequelize_utils_1[a0_0x259d('0x8')][a0_0x259d('0x2a')](_0x5849f9[a0_0x259d('0x1f')]);console[a0_0x259d('0xf')](a0_0x259d('0x20'),_0x5849f9[a0_0x259d('0x1f')]);const _0x16aa9f=new crudOptions_1['default']();_0x16aa9f[a0_0x259d('0x37')]=!![];_0x16aa9f[a0_0x259d('0x2b')]=!![];_0x16aa9f[a0_0x259d('0x2c')]=[[a0_0x259d('0x21'),a0_0x259d('0x22')]];_0x16aa9f[a0_0x259d('0x2d')]=[{'model':models_1[a0_0x259d('0x8')]['getInstance']()['timeLogsModel']}];return controllers_1[a0_0x259d('0x8')]['getInstance']()['activityTimeLogsController'][a0_0x259d('0x2e')](_0x5849f9,_0xf61ca4,_0x20925b,_0x16aa9f);}}exports[a0_0x259d('0x8')]=ActivitiesController;