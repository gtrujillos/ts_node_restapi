var a0_0x6128=['authentication\x20failed','default','filesController','saveFile','then','body','encryptId','data','fields','activity_id','req.body','getInstance','save','file_id','successResponse','catch','params','decryptId','public','shared','updated_at','DESC','attributes','include','filesModel','title','name','type','is_private','find','req.params','orderBy','saveTimeLog','saveTimeLog\x20req.body','user','started_at','ended_at','description','dataValues','timeLogResult\x20req.body:\x20','activityTimeLogsController','activityTimeLogResult:\x20','stack','timeLogsModel','count','__importDefault','__esModule','defineProperty','../../infrastructure/base-controller','../models','../controllers','../../infrastructure/sequelize-utils','fs-extra','formidable','saveImage','getImages','bind','getImagesTotal','getTimeLogs','getTimeLogsTotal','log','errorResponse'];(function(_0xfcd2e7,_0x58a2a4){var _0x441d2b=function(_0x3e203d){while(--_0x3e203d){_0xfcd2e7['push'](_0xfcd2e7['shift']());}};_0x441d2b(++_0x58a2a4);}(a0_0x6128,0xa9));var a0_0x2b80=function(_0x427c6f,_0x517e3f){_0x427c6f=_0x427c6f-0x0;var _0x533658=a0_0x6128[_0x427c6f];return _0x533658;};'use strict';var __importDefault=this&&this[a0_0x2b80('0x0')]||function(_0x4def95){return _0x4def95&&_0x4def95[a0_0x2b80('0x1')]?_0x4def95:{'default':_0x4def95};};Object[a0_0x2b80('0x2')](exports,a0_0x2b80('0x1'),{'value':!![]});const base_controller_1=__importDefault(require(a0_0x2b80('0x3')));const crudOptions_1=__importDefault(require('../shared/models/crudOptions'));const models_1=__importDefault(require(a0_0x2b80('0x4')));const controllers_1=__importDefault(require(a0_0x2b80('0x5')));const sequelize_utils_1=__importDefault(require(a0_0x2b80('0x6')));const fsExtra=require(a0_0x2b80('0x7'));const formidable=require(a0_0x2b80('0x8'));const responseUtils=require('../../infrastructure/response-utils');class ActivitiesController extends base_controller_1['default']{constructor(_0x33d158){super(_0x33d158,null);this[a0_0x2b80('0x9')]=this[a0_0x2b80('0x9')]['bind'](this);this['getImages']=this[a0_0x2b80('0xa')][a0_0x2b80('0xb')](this);this[a0_0x2b80('0xc')]=this[a0_0x2b80('0xc')][a0_0x2b80('0xb')](this);this['saveTimeLog']=this['saveTimeLog'][a0_0x2b80('0xb')](this);this[a0_0x2b80('0xd')]=this[a0_0x2b80('0xd')][a0_0x2b80('0xb')](this);this[a0_0x2b80('0xe')]=this[a0_0x2b80('0xe')]['bind'](this);}[a0_0x2b80('0x9')](_0x2ffade,_0xf327d8,_0x377cc0){console[a0_0x2b80('0xf')](a0_0x2b80('0x9'));if(!_0x2ffade['user']){return responseUtils[a0_0x2b80('0x10')](_0x2ffade,_0xf327d8,a0_0x2b80('0x11'),0x191);}controllers_1[a0_0x2b80('0x12')]['getInstance']()[a0_0x2b80('0x13')][a0_0x2b80('0x14')](_0x2ffade,null,null)[a0_0x2b80('0x15')](_0x41d660=>{_0x2ffade[a0_0x2b80('0x16')]={'file_id':sequelize_utils_1['default'][a0_0x2b80('0x17')](_0x41d660[a0_0x2b80('0x18')]['id']),'activity_id':_0x41d660[a0_0x2b80('0x19')][a0_0x2b80('0x1a')]};console['log'](a0_0x2b80('0x1b'),_0x2ffade[a0_0x2b80('0x16')]);controllers_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()['activityFilesController'][a0_0x2b80('0x1d')](_0x2ffade,null,null)[a0_0x2b80('0x15')](_0x26b80f=>{const _0x53722f={'file_id':sequelize_utils_1[a0_0x2b80('0x12')][a0_0x2b80('0x17')](_0x26b80f[a0_0x2b80('0x1e')])};responseUtils[a0_0x2b80('0x1f')](_0x2ffade,_0xf327d8,_0x53722f,0xc8);})[a0_0x2b80('0x20')](_0x59f987=>{return responseUtils['errorResponse'](_0x2ffade,_0xf327d8,_0x59f987['stack'],0x1f4);});},_0x4b8bad=>{return responseUtils['errorResponse'](_0x2ffade,_0xf327d8,_0x4b8bad,0x1f4);});}[a0_0x2b80('0xa')](_0x4a1e7a,_0x337ea1,_0x259bec){_0x4a1e7a[a0_0x2b80('0x21')]=sequelize_utils_1[a0_0x2b80('0x12')][a0_0x2b80('0x22')](_0x4a1e7a['params']);console[a0_0x2b80('0xf')]('req.params',_0x4a1e7a['params']);const _0x421d0f=new crudOptions_1[(a0_0x2b80('0x12'))]();_0x421d0f[a0_0x2b80('0x23')]=!![];_0x421d0f[a0_0x2b80('0x24')]=!![];_0x421d0f['orderBy']=[[a0_0x2b80('0x25'),a0_0x2b80('0x26')]];_0x421d0f[a0_0x2b80('0x27')]=['id',a0_0x2b80('0x1e')];_0x421d0f[a0_0x2b80('0x28')]=[{'model':models_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()[a0_0x2b80('0x29')],'attributes':[a0_0x2b80('0x2a'),a0_0x2b80('0x2b'),a0_0x2b80('0x2c'),a0_0x2b80('0x2d')]}];return controllers_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()['activityFilesController'][a0_0x2b80('0x2e')](_0x4a1e7a,_0x337ea1,_0x259bec,_0x421d0f);}['getImagesTotal'](_0x4342c5,_0x4b10c1,_0x3fd008){_0x4342c5['params']=sequelize_utils_1['default'][a0_0x2b80('0x22')](_0x4342c5['params']);console['log'](a0_0x2b80('0x2f'),_0x4342c5[a0_0x2b80('0x21')]);const _0x575468=new crudOptions_1['default']();_0x575468[a0_0x2b80('0x23')]=!![];_0x575468['shared']=!![];_0x575468[a0_0x2b80('0x30')]=[[a0_0x2b80('0x25'),'DESC']];_0x575468[a0_0x2b80('0x27')]=['id',a0_0x2b80('0x1e')];_0x575468[a0_0x2b80('0x28')]=[{'model':models_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()[a0_0x2b80('0x29')],'attributes':[a0_0x2b80('0x2a'),'name',a0_0x2b80('0x2c'),a0_0x2b80('0x2d')]}];return controllers_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()['activityFilesController']['count'](_0x4342c5,_0x4b10c1,_0x3fd008,_0x575468);}[a0_0x2b80('0x31')](_0x55a7de,_0x37c450,_0x4ce16e){console[a0_0x2b80('0xf')](a0_0x2b80('0x32'),_0x55a7de[a0_0x2b80('0x16')]);if(!_0x55a7de[a0_0x2b80('0x33')]){return responseUtils[a0_0x2b80('0x10')](_0x55a7de,_0x37c450,a0_0x2b80('0x11'),0x191);}const _0x254ae9=_0x55a7de[a0_0x2b80('0x16')]['activity_id'];_0x55a7de[a0_0x2b80('0x16')]={'started_at':_0x55a7de['body'][a0_0x2b80('0x34')],'ended_at':_0x55a7de[a0_0x2b80('0x16')][a0_0x2b80('0x35')],'description':_0x55a7de[a0_0x2b80('0x16')][a0_0x2b80('0x36')],'is_private':_0x55a7de[a0_0x2b80('0x16')][a0_0x2b80('0x2d')]};controllers_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()['timeLogsController'][a0_0x2b80('0x1d')](_0x55a7de,null,null)[a0_0x2b80('0x15')](_0x456bf8=>{_0x55a7de[a0_0x2b80('0x16')]={'time_log_id':sequelize_utils_1['default']['encryptId'](_0x456bf8[a0_0x2b80('0x37')]['id']),'activity_id':_0x254ae9};console[a0_0x2b80('0xf')](a0_0x2b80('0x38'),_0x55a7de[a0_0x2b80('0x16')]);controllers_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()[a0_0x2b80('0x39')][a0_0x2b80('0x1d')](_0x55a7de,null,null)[a0_0x2b80('0x15')](_0x2e2e49=>{console['log'](a0_0x2b80('0x3a'),_0x2e2e49[a0_0x2b80('0x37')]);responseUtils[a0_0x2b80('0x1f')](_0x55a7de,_0x37c450,_0x2e2e49,0xc8);})[a0_0x2b80('0x20')](_0x17cd38=>{return responseUtils[a0_0x2b80('0x10')](_0x55a7de,_0x37c450,_0x17cd38[a0_0x2b80('0x3b')],0x1f4);});})['catch'](_0x1e6cb1=>{return responseUtils[a0_0x2b80('0x10')](_0x55a7de,_0x37c450,_0x1e6cb1[a0_0x2b80('0x3b')],0x1f4);});}[a0_0x2b80('0xd')](_0x1af8b0,_0x20b090,_0x28ffed){_0x1af8b0['params']=sequelize_utils_1[a0_0x2b80('0x12')]['decryptId'](_0x1af8b0[a0_0x2b80('0x21')]);console['log'](a0_0x2b80('0x2f'),_0x1af8b0['params']);const _0x3fcb43=new crudOptions_1[(a0_0x2b80('0x12'))]();_0x3fcb43[a0_0x2b80('0x23')]=!![];_0x3fcb43[a0_0x2b80('0x24')]=!![];_0x3fcb43['orderBy']=[[a0_0x2b80('0x25'),a0_0x2b80('0x26')]];_0x3fcb43[a0_0x2b80('0x28')]=[{'model':models_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()['timeLogsModel']}];return controllers_1[a0_0x2b80('0x12')]['getInstance']()[a0_0x2b80('0x39')][a0_0x2b80('0x2e')](_0x1af8b0,_0x20b090,_0x28ffed,_0x3fcb43);}[a0_0x2b80('0xe')](_0x2ae1d2,_0x2cd3ee,_0x21b27d){_0x2ae1d2[a0_0x2b80('0x21')]=sequelize_utils_1[a0_0x2b80('0x12')][a0_0x2b80('0x22')](_0x2ae1d2['params']);console[a0_0x2b80('0xf')]('req.params',_0x2ae1d2[a0_0x2b80('0x21')]);const _0x27ed47=new crudOptions_1['default']();_0x27ed47[a0_0x2b80('0x23')]=!![];_0x27ed47['shared']=!![];_0x27ed47[a0_0x2b80('0x30')]=[['updated_at',a0_0x2b80('0x26')]];_0x27ed47[a0_0x2b80('0x28')]=[{'model':models_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()[a0_0x2b80('0x3c')]}];return controllers_1[a0_0x2b80('0x12')][a0_0x2b80('0x1c')]()[a0_0x2b80('0x39')][a0_0x2b80('0x3d')](_0x2ae1d2,_0x2cd3ee,_0x21b27d,_0x27ed47);}}exports[a0_0x2b80('0x12')]=ActivitiesController;