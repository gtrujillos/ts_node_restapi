var a271_0x5608=['moment','sequelize','fs-extra','getByUser','bind','getByVehicle','default','decryptId','params','start_date','toDate','end_date','gte','ASC','then','forEach','env','models','usersModel','name','user_id','.jpg','existsSync','base64Sync','json','__importDefault','__esModule'];(function(_0x2caf2f,_0x25396e){var _0x193f22=function(_0x3a1543){while(--_0x3a1543){_0x2caf2f['push'](_0x2caf2f['shift']());}};_0x193f22(++_0x25396e);}(a271_0x5608,0x193));var a271_0x2058=function(_0x5bcfec,_0x49e59c){_0x5bcfec=_0x5bcfec-0x0;var _0x325c34=a271_0x5608[_0x5bcfec];return _0x325c34;};'use strict';var __importDefault=this&&this[a271_0x2058('0x0')]||function(_0x512816){return _0x512816&&_0x512816['__esModule']?_0x512816:{'default':_0x512816};};Object['defineProperty'](exports,a271_0x2058('0x1'),{'value':!![]});const controller_utils_1=__importDefault(require('../../infrastructure/controller-utils'));const sequelize_utils_1=__importDefault(require('../../infrastructure/sequelize-utils'));const moment=require(a271_0x2058('0x2'));const sequelize_1=require(a271_0x2058('0x3'));const fsExtra=require(a271_0x2058('0x4'));const base64Img=require('base64-img');class UsersRelationshipsController extends controller_utils_1['default']{constructor(_0x251a1b){super(_0x251a1b,null);this['getByUser']=this[a271_0x2058('0x5')][a271_0x2058('0x6')](this);this[a271_0x2058('0x7')]=this[a271_0x2058('0x7')][a271_0x2058('0x6')](this);}['getByVehicle'](_0x32f412,_0xd8b849,_0xeeee23){_0x32f412['params']['vehicle_id']=sequelize_utils_1[a271_0x2058('0x8')][a271_0x2058('0x9')](_0x32f412[a271_0x2058('0xa')]['vehicle_id']);_0x32f412['params'][a271_0x2058('0xb')]={[sequelize_1['Op']['lte']]:moment()[a271_0x2058('0xc')]()};_0x32f412[a271_0x2058('0xa')][a271_0x2058('0xd')]={[sequelize_1['Op'][a271_0x2058('0xe')]]:moment()[a271_0x2058('0xc')]()};return this['find'](_0x32f412,null,_0xeeee23,![],null,[[a271_0x2058('0xb'),a271_0x2058('0xf')]],!![])[a271_0x2058('0x10')](_0xc39eda=>{if(_0xc39eda){_0xc39eda[a271_0x2058('0x11')](_0x1c4eaa=>{const _0x28d96a=process[a271_0x2058('0x12')]['IMAGE_FILES_FOLDER']+'images/'+sequelize_utils_1['default'][a271_0x2058('0x13')][a271_0x2058('0x14')][a271_0x2058('0x15')]+'_'+_0x1c4eaa[a271_0x2058('0x16')]+a271_0x2058('0x17');let _0x3e78fc=null;if(fsExtra[a271_0x2058('0x18')](_0x28d96a)){_0x3e78fc=base64Img[a271_0x2058('0x19')](_0x28d96a);_0x1c4eaa['image_data']=_0x3e78fc;}});}return _0xd8b849[a271_0x2058('0x1a')]({'success':!![],'data':_0xc39eda});});}['getByUser'](_0x309a84,_0x38ac1d,_0x5c7a79){_0x309a84[a271_0x2058('0xa')]['user_id']=sequelize_utils_1[a271_0x2058('0x8')][a271_0x2058('0x9')](_0x309a84[a271_0x2058('0xa')][a271_0x2058('0x16')]);return this['find'](_0x309a84,_0x38ac1d,_0x5c7a79,![],null,null,!![]);}}exports[a271_0x2058('0x8')]=UsersRelationshipsController;