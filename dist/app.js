var a87_0x852b=['set','views','join','../views','view\x20engine','pug','use','urlencoded','initialize','SAMEORIGIN','xssProtection','locals','user','public','./config/sequelize','./app/models','./app/routes','./infrastructure/sequelize-utils','models','./config/passport','usersModel','setSequelize','updatedAt','deletedAt','created_at','updated_at','revision','revision_change','document_id','revision_id','user_id','sequelize-paper-trail','init','defineModels','/api/syncftp','get','/api/downloadFtp','/api/processFtp','/api/getPassCounting/:direction','/api/getPassCountingByDay/:direction','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__esModule','__importStar','hasOwnProperty','call','defineProperty','express','compression','body-parser','./util/logger','dotenv','express-flash','path','passport','express-validator','default','.env','debug','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env.example','port','env','PORT'];(function(_0xc4921d,_0xf35321){var _0x2db0b4=function(_0x54e68b){while(--_0x54e68b){_0xc4921d['push'](_0xc4921d['shift']());}};_0x2db0b4(++_0xf35321);}(a87_0x852b,0xaf));var a87_0x4d8a=function(_0xf34179,_0x5b6b9b){_0xf34179=_0xf34179-0x0;var _0x554d0e=a87_0x852b[_0xf34179];return _0x554d0e;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0xbcbe53){return _0xbcbe53&&_0xbcbe53[a87_0x4d8a('0x0')]?_0xbcbe53:{'default':_0xbcbe53};};var __importStar=this&&this[a87_0x4d8a('0x1')]||function(_0x1cac24){if(_0x1cac24&&_0x1cac24[a87_0x4d8a('0x0')])return _0x1cac24;var _0x8f3ce={};if(_0x1cac24!=null)for(var _0x4c2eec in _0x1cac24)if(Object[a87_0x4d8a('0x2')][a87_0x4d8a('0x3')](_0x1cac24,_0x4c2eec))_0x8f3ce[_0x4c2eec]=_0x1cac24[_0x4c2eec];_0x8f3ce['default']=_0x1cac24;return _0x8f3ce;};Object[a87_0x4d8a('0x4')](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require(a87_0x4d8a('0x5')));const compression_1=__importDefault(require(a87_0x4d8a('0x6')));const body_parser_1=__importDefault(require(a87_0x4d8a('0x7')));const logger_1=__importDefault(require(a87_0x4d8a('0x8')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require(a87_0x4d8a('0x9')));const express_flash_1=__importDefault(require(a87_0x4d8a('0xa')));const path_1=__importDefault(require(a87_0x4d8a('0xb')));const passport_1=__importDefault(require(a87_0x4d8a('0xc')));const express_validator_1=__importDefault(require(a87_0x4d8a('0xd')));const fs_1=__importDefault(require('fs'));if(fs_1[a87_0x4d8a('0xe')]['existsSync'](a87_0x4d8a('0xf'))){logger_1[a87_0x4d8a('0xe')][a87_0x4d8a('0x10')]('Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a87_0x4d8a('0xe')]['config']({'path':a87_0x4d8a('0xf')});}else{logger_1[a87_0x4d8a('0xe')]['debug'](a87_0x4d8a('0x11'));dotenv_1[a87_0x4d8a('0xe')][a87_0x4d8a('0x12')]({'path':a87_0x4d8a('0x13')});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a87_0x4d8a('0xe')]();app['set'](a87_0x4d8a('0x14'),process[a87_0x4d8a('0x15')][a87_0x4d8a('0x16')]||0xbb8);app[a87_0x4d8a('0x17')](a87_0x4d8a('0x18'),path_1[a87_0x4d8a('0xe')][a87_0x4d8a('0x19')](__dirname,a87_0x4d8a('0x1a')));app[a87_0x4d8a('0x17')](a87_0x4d8a('0x1b'),a87_0x4d8a('0x1c'));app['use'](compression_1['default']());app[a87_0x4d8a('0x1d')](body_parser_1['default']['json']());app[a87_0x4d8a('0x1d')](body_parser_1[a87_0x4d8a('0xe')][a87_0x4d8a('0x1e')]({'extended':!![]}));app[a87_0x4d8a('0x1d')](express_validator_1[a87_0x4d8a('0xe')]());app[a87_0x4d8a('0x1d')](passport_1[a87_0x4d8a('0xe')][a87_0x4d8a('0x1f')]());app[a87_0x4d8a('0x1d')](passport_1['default']['session']());app[a87_0x4d8a('0x1d')](express_flash_1[a87_0x4d8a('0xe')]());app['use'](lusca_1[a87_0x4d8a('0xe')]['xframe'](a87_0x4d8a('0x20')));app[a87_0x4d8a('0x1d')](lusca_1['default'][a87_0x4d8a('0x21')](!![]));app[a87_0x4d8a('0x1d')]((_0x2c0df1,_0x43128f,_0x423490)=>{_0x43128f[a87_0x4d8a('0x22')]['user']=_0x2c0df1[a87_0x4d8a('0x23')];_0x423490();});app[a87_0x4d8a('0x1d')]((_0x528e26,_0x10b1f7,_0x2e93d2)=>{_0x2e93d2();});app[a87_0x4d8a('0x1d')](express_1[a87_0x4d8a('0xe')]['static'](path_1['default'][a87_0x4d8a('0x19')](__dirname,a87_0x4d8a('0x24')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a87_0x4d8a('0x25')));const models_1=__importDefault(require(a87_0x4d8a('0x26')));const routes_1=__importDefault(require(a87_0x4d8a('0x27')));const sequelize_utils_1=__importDefault(require(a87_0x4d8a('0x28')));const models=new models_1[(a87_0x4d8a('0xe'))](sequelize_1[a87_0x4d8a('0xe')]);sequelize_utils_1[a87_0x4d8a('0xe')][a87_0x4d8a('0x29')]=models;routes_1[a87_0x4d8a('0xe')](app,passport_1['default'],models);require(a87_0x4d8a('0x2a'))(passport_1['default'],models[a87_0x4d8a('0x2b')]);sequelize_utils_1[a87_0x4d8a('0xe')]['instance']=sequelize_1[a87_0x4d8a('0xe')];apiController[a87_0x4d8a('0x2c')](sequelize_1['default']);const options={'exclude':['id','createdAt',a87_0x4d8a('0x2d'),a87_0x4d8a('0x2e'),a87_0x4d8a('0x2f'),a87_0x4d8a('0x30'),'deleted_at'],'userModel':'users','revisionAttribute':a87_0x4d8a('0x31'),'revisionModel':'revision','revisionChangeModel':a87_0x4d8a('0x32'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a87_0x4d8a('0x33'),'revisionId':a87_0x4d8a('0x34')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':'current_user_request','continuationKey':a87_0x4d8a('0x35')};const PaperTrail=require(a87_0x4d8a('0x36'))[a87_0x4d8a('0x37')](sequelize_1[a87_0x4d8a('0xe')],options);PaperTrail[a87_0x4d8a('0x38')]({});app['get'](a87_0x4d8a('0x39'),apiController['syncFtp']);app[a87_0x4d8a('0x3a')](a87_0x4d8a('0x3b'),apiController['downloadFtp']);app[a87_0x4d8a('0x3a')](a87_0x4d8a('0x3c'),apiController['processFtp']);app[a87_0x4d8a('0x3a')](a87_0x4d8a('0x3d'),apiController['getPassCounting']);app[a87_0x4d8a('0x3a')](a87_0x4d8a('0x3e'),apiController[a87_0x4d8a('0x3f')]);app['get'](a87_0x4d8a('0x40'),apiController[a87_0x4d8a('0x41')]);exports[a87_0x4d8a('0xe')]=app;