var a88_0x39d9=['default','express','body-parser','lusca','dotenv','express-flash','passport','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','set','port','env','PORT','views','../views','view\x20engine','pug','use','urlencoded','session','xframe','SAMEORIGIN','locals','user','static','join','./config/sequelize','./app/models','./app/routes','./infrastructure/sequelize-utils','./app/controllers','models','controllers','usersModel','updatedAt','created_at','updated_at','deleted_at','users','revision','document_id','revision_id','current_user_request','sequelize-paper-trail','init','defineModels','/api/syncftp','syncFtp','/api/downloadFtp','downloadFtp','get','/api/processFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','getPassCountingByDay','getPassCountingByHour','__importDefault','__importStar','__esModule'];(function(_0x5c94ee,_0x5306b9){var _0x39cabd=function(_0x6643e4){while(--_0x6643e4){_0x5c94ee['push'](_0x5c94ee['shift']());}};_0x39cabd(++_0x5306b9);}(a88_0x39d9,0xc3));var a88_0x1ffa=function(_0x384741,_0x2cacc9){_0x384741=_0x384741-0x0;var _0x28b071=a88_0x39d9[_0x384741];return _0x28b071;};'use strict';var __importDefault=this&&this[a88_0x1ffa('0x0')]||function(_0x21f07f){return _0x21f07f&&_0x21f07f['__esModule']?_0x21f07f:{'default':_0x21f07f};};var __importStar=this&&this[a88_0x1ffa('0x1')]||function(_0x2d93a1){if(_0x2d93a1&&_0x2d93a1[a88_0x1ffa('0x2')])return _0x2d93a1;var _0x713220={};if(_0x2d93a1!=null)for(var _0x30d239 in _0x2d93a1)if(Object['hasOwnProperty']['call'](_0x2d93a1,_0x30d239))_0x713220[_0x30d239]=_0x2d93a1[_0x30d239];_0x713220[a88_0x1ffa('0x3')]=_0x2d93a1;return _0x713220;};Object['defineProperty'](exports,a88_0x1ffa('0x2'),{'value':!![]});const express_1=__importDefault(require(a88_0x1ffa('0x4')));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a88_0x1ffa('0x5')));const logger_1=__importDefault(require('./util/logger'));const lusca_1=__importDefault(require(a88_0x1ffa('0x6')));const dotenv_1=__importDefault(require(a88_0x1ffa('0x7')));const express_flash_1=__importDefault(require(a88_0x1ffa('0x8')));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require(a88_0x1ffa('0x9')));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));if(fs_1[a88_0x1ffa('0x3')][a88_0x1ffa('0xa')](a88_0x1ffa('0xb'))){logger_1[a88_0x1ffa('0x3')][a88_0x1ffa('0xc')](a88_0x1ffa('0xd'));dotenv_1['default'][a88_0x1ffa('0xe')]({'path':a88_0x1ffa('0xb')});}else{logger_1[a88_0x1ffa('0x3')][a88_0x1ffa('0xc')](a88_0x1ffa('0xf'));dotenv_1[a88_0x1ffa('0x3')][a88_0x1ffa('0xe')]({'path':a88_0x1ffa('0x10')});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a88_0x1ffa('0x3')]();app[a88_0x1ffa('0x11')](a88_0x1ffa('0x12'),process[a88_0x1ffa('0x13')][a88_0x1ffa('0x14')]||0xbb8);app[a88_0x1ffa('0x11')](a88_0x1ffa('0x15'),path_1[a88_0x1ffa('0x3')]['join'](__dirname,a88_0x1ffa('0x16')));app[a88_0x1ffa('0x11')](a88_0x1ffa('0x17'),a88_0x1ffa('0x18'));app[a88_0x1ffa('0x19')](compression_1['default']());app[a88_0x1ffa('0x19')](body_parser_1['default']['json']());app[a88_0x1ffa('0x19')](body_parser_1[a88_0x1ffa('0x3')][a88_0x1ffa('0x1a')]({'extended':!![]}));app['use'](express_validator_1[a88_0x1ffa('0x3')]());app['use'](passport_1[a88_0x1ffa('0x3')]['initialize']());app[a88_0x1ffa('0x19')](passport_1[a88_0x1ffa('0x3')][a88_0x1ffa('0x1b')]());app[a88_0x1ffa('0x19')](express_flash_1['default']());app[a88_0x1ffa('0x19')](lusca_1[a88_0x1ffa('0x3')][a88_0x1ffa('0x1c')](a88_0x1ffa('0x1d')));app['use'](lusca_1[a88_0x1ffa('0x3')]['xssProtection'](!![]));app[a88_0x1ffa('0x19')]((_0x2825c6,_0x112934,_0x166bd1)=>{_0x112934[a88_0x1ffa('0x1e')][a88_0x1ffa('0x1f')]=_0x2825c6['user'];_0x166bd1();});app[a88_0x1ffa('0x19')]((_0x5f0297,_0x3ad78f,_0x3d7257)=>{_0x3d7257();});app['use'](express_1['default'][a88_0x1ffa('0x20')](path_1[a88_0x1ffa('0x3')][a88_0x1ffa('0x21')](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a88_0x1ffa('0x22')));const models_1=__importDefault(require(a88_0x1ffa('0x23')));const routes_1=__importDefault(require(a88_0x1ffa('0x24')));const sequelize_utils_1=__importDefault(require(a88_0x1ffa('0x25')));const controllers_1=__importDefault(require(a88_0x1ffa('0x26')));const models=new models_1[(a88_0x1ffa('0x3'))](sequelize_1[a88_0x1ffa('0x3')]);const controllers=new controllers_1[(a88_0x1ffa('0x3'))](models);sequelize_utils_1[a88_0x1ffa('0x3')][a88_0x1ffa('0x27')]=models;sequelize_utils_1[a88_0x1ffa('0x3')][a88_0x1ffa('0x28')]=controllers;routes_1[a88_0x1ffa('0x3')](app,passport_1[a88_0x1ffa('0x3')],models,controllers);require('./config/passport')(passport_1['default'],models[a88_0x1ffa('0x29')]);sequelize_utils_1['default']['instance']=sequelize_1['default'];apiController['setSequelize'](sequelize_1[a88_0x1ffa('0x3')]);const options={'exclude':['id','createdAt',a88_0x1ffa('0x2a'),'deletedAt',a88_0x1ffa('0x2b'),a88_0x1ffa('0x2c'),a88_0x1ffa('0x2d')],'userModel':a88_0x1ffa('0x2e'),'revisionAttribute':a88_0x1ffa('0x2f'),'revisionModel':'revision','revisionChangeModel':'revision_change','enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a88_0x1ffa('0x30'),'revisionId':a88_0x1ffa('0x31')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a88_0x1ffa('0x32'),'continuationKey':'user_id'};const PaperTrail=require(a88_0x1ffa('0x33'))[a88_0x1ffa('0x34')](sequelize_1[a88_0x1ffa('0x3')],options);PaperTrail[a88_0x1ffa('0x35')]({});app['get'](a88_0x1ffa('0x36'),apiController[a88_0x1ffa('0x37')]);app['get'](a88_0x1ffa('0x38'),apiController[a88_0x1ffa('0x39')]);app[a88_0x1ffa('0x3a')](a88_0x1ffa('0x3b'),apiController[a88_0x1ffa('0x3c')]);app['get'](a88_0x1ffa('0x3d'),apiController[a88_0x1ffa('0x3e')]);app[a88_0x1ffa('0x3a')](a88_0x1ffa('0x3f'),apiController[a88_0x1ffa('0x40')]);app[a88_0x1ffa('0x3a')]('/api/getPassCountingByHour/:direction',apiController[a88_0x1ffa('0x41')]);exports[a88_0x1ffa('0x3')]=app;