var a104_0x3c4d=['/api/syncftp','/api/downloadFtp','downloadFtp','get','/api/processFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','/api/getPassCountingByHour/:direction','getPassCountingByHour','enable','trust\x20proxy','__importDefault','__esModule','hasOwnProperty','defineProperty','express','compression','body-parser','./util/logger','lusca','dotenv','express-flash','path','passport','express-validator','cors','express-slow-down','default','existsSync','.env','debug','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','./controllers/api','set','views','join','../views','view\x20engine','pug','use','json','10mb','env','DEV_MODE','initialize','session','SAMEORIGIN','xssProtection','user','static','./config/sequelize','./app/routes','./app/controllers','./config/passport','usersModel','setSequelize'];(function(_0x183a9f,_0x5bb4d0){var _0x3c552a=function(_0x2ad4e2){while(--_0x2ad4e2){_0x183a9f['push'](_0x183a9f['shift']());}};_0x3c552a(++_0x5bb4d0);}(a104_0x3c4d,0x16f));var a104_0x1b09=function(_0x46092c,_0x298520){_0x46092c=_0x46092c-0x0;var _0x34bd77=a104_0x3c4d[_0x46092c];return _0x34bd77;};'use strict';var __importDefault=this&&this[a104_0x1b09('0x0')]||function(_0x4256b9){return _0x4256b9&&_0x4256b9['__esModule']?_0x4256b9:{'default':_0x4256b9};};var __importStar=this&&this['__importStar']||function(_0x2ae915){if(_0x2ae915&&_0x2ae915[a104_0x1b09('0x1')])return _0x2ae915;var _0x24f287={};if(_0x2ae915!=null)for(var _0x3c167d in _0x2ae915)if(Object[a104_0x1b09('0x2')]['call'](_0x2ae915,_0x3c167d))_0x24f287[_0x3c167d]=_0x2ae915[_0x3c167d];_0x24f287['default']=_0x2ae915;return _0x24f287;};Object[a104_0x1b09('0x3')](exports,a104_0x1b09('0x1'),{'value':!![]});const express_1=__importDefault(require(a104_0x1b09('0x4')));const compression_1=__importDefault(require(a104_0x1b09('0x5')));const body_parser_1=__importDefault(require(a104_0x1b09('0x6')));const logger_1=__importDefault(require(a104_0x1b09('0x7')));const lusca_1=__importDefault(require(a104_0x1b09('0x8')));const dotenv_1=__importDefault(require(a104_0x1b09('0x9')));const express_flash_1=__importDefault(require(a104_0x1b09('0xa')));const path_1=__importDefault(require(a104_0x1b09('0xb')));const passport_1=__importDefault(require(a104_0x1b09('0xc')));const express_validator_1=__importDefault(require(a104_0x1b09('0xd')));const fs_1=__importDefault(require('fs'));const cors=require(a104_0x1b09('0xe'));const rateLimit=require('express-rate-limit');const slowDown=require(a104_0x1b09('0xf'));if(fs_1[a104_0x1b09('0x10')][a104_0x1b09('0x11')](a104_0x1b09('0x12'))){logger_1['default'][a104_0x1b09('0x13')]('Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a104_0x1b09('0x10')][a104_0x1b09('0x14')]({'path':a104_0x1b09('0x12')});}else{logger_1['default'][a104_0x1b09('0x13')](a104_0x1b09('0x15'));dotenv_1['default'][a104_0x1b09('0x14')]({'path':'.env.example'});}const apiController=__importStar(require(a104_0x1b09('0x16')));const app=express_1[a104_0x1b09('0x10')]();app[a104_0x1b09('0x17')]('port',process['env']['PORT']||0xbb8);app[a104_0x1b09('0x17')](a104_0x1b09('0x18'),path_1['default'][a104_0x1b09('0x19')](__dirname,a104_0x1b09('0x1a')));app[a104_0x1b09('0x17')](a104_0x1b09('0x1b'),a104_0x1b09('0x1c'));app[a104_0x1b09('0x1d')](compression_1[a104_0x1b09('0x10')]());app[a104_0x1b09('0x1d')](body_parser_1[a104_0x1b09('0x10')][a104_0x1b09('0x1e')]({'limit':a104_0x1b09('0x1f')}));app[a104_0x1b09('0x1d')](body_parser_1[a104_0x1b09('0x10')]['urlencoded']({'limit':a104_0x1b09('0x1f'),'extended':!![]}));if(process[a104_0x1b09('0x20')][a104_0x1b09('0x21')]){app['use'](cors());app[a104_0x1b09('0x1d')](cors({'origin':!![]}));app['options']('*',cors());}else{app['use'](cors());}app[a104_0x1b09('0x1d')](express_validator_1[a104_0x1b09('0x10')]());app[a104_0x1b09('0x1d')](passport_1[a104_0x1b09('0x10')][a104_0x1b09('0x22')]());app[a104_0x1b09('0x1d')](passport_1[a104_0x1b09('0x10')][a104_0x1b09('0x23')]());app[a104_0x1b09('0x1d')](express_flash_1[a104_0x1b09('0x10')]());app['use'](lusca_1[a104_0x1b09('0x10')]['xframe'](a104_0x1b09('0x24')));app[a104_0x1b09('0x1d')](lusca_1[a104_0x1b09('0x10')][a104_0x1b09('0x25')](!![]));app['use']((_0x116b5e,_0x5ae186,_0x50f6ba)=>{_0x5ae186['locals']['user']=_0x116b5e[a104_0x1b09('0x26')];_0x50f6ba();});app[a104_0x1b09('0x1d')]((_0x5bed3e,_0x2bb0d4,_0xb4590d)=>{_0xb4590d();});app[a104_0x1b09('0x1d')](express_1[a104_0x1b09('0x10')][a104_0x1b09('0x27')](path_1[a104_0x1b09('0x10')][a104_0x1b09('0x19')](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a104_0x1b09('0x28')));const models_1=__importDefault(require('./app/models'));const routes_1=__importDefault(require(a104_0x1b09('0x29')));const controllers_1=__importDefault(require(a104_0x1b09('0x2a')));const models=new models_1['default'](sequelize_1[a104_0x1b09('0x10')]);const controllers=new controllers_1['default'](models);routes_1['default'](app,passport_1[a104_0x1b09('0x10')],models,controllers);require(a104_0x1b09('0x2b'))(passport_1[a104_0x1b09('0x10')],models[a104_0x1b09('0x2c')]);apiController[a104_0x1b09('0x2d')](sequelize_1[a104_0x1b09('0x10')]);app['get'](a104_0x1b09('0x2e'),apiController['syncFtp']);app['get'](a104_0x1b09('0x2f'),apiController[a104_0x1b09('0x30')]);app[a104_0x1b09('0x31')](a104_0x1b09('0x32'),apiController[a104_0x1b09('0x33')]);app[a104_0x1b09('0x31')](a104_0x1b09('0x34'),apiController[a104_0x1b09('0x35')]);app[a104_0x1b09('0x31')](a104_0x1b09('0x36'),apiController['getPassCountingByDay']);app[a104_0x1b09('0x31')](a104_0x1b09('0x37'),apiController[a104_0x1b09('0x38')]);const limiter=rateLimit({'windowMs':0x2*0x3c*0x3e8,'max':0x64});app['use'](limiter);app[a104_0x1b09('0x39')](a104_0x1b09('0x3a'));const speedLimiter=slowDown({'windowMs':0x2*0x3c*0x3e8,'delayAfter':0x64,'delayMs':0x1f4});app['use'](speedLimiter);exports[a104_0x1b09('0x10')]=app;