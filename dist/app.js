var a81_0x2dba=['syncFtp','/api/downloadFtp','downloadFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','call','default','defineProperty','express','body-parser','./util/logger','lusca','dotenv','path','express-validator','existsSync','.env','config','.env.example','./controllers/api','port','env','PORT','set','views','join','../views','view\x20engine','pug','use','json','urlencoded','initialize','session','xframe','SAMEORIGIN','locals','user','static','public','./app/models','./app/routes','models','instance','setSequelize','createdAt','updatedAt','created_at','deleted_at','users','revision','revision_change','document_id','revision_id','current_user_request','user_id','sequelize-paper-trail','init','defineModels','get','/api/syncftp'];(function(_0x8c9b60,_0x3f1b58){var _0x3bc008=function(_0x29a652){while(--_0x29a652){_0x8c9b60['push'](_0x8c9b60['shift']());}};_0x3bc008(++_0x3f1b58);}(a81_0x2dba,0x116));var a81_0x3f30=function(_0x4bb12e,_0x3341c0){_0x4bb12e=_0x4bb12e-0x0;var _0x1fb107=a81_0x2dba[_0x4bb12e];return _0x1fb107;};'use strict';var __importDefault=this&&this[a81_0x3f30('0x0')]||function(_0x125631){return _0x125631&&_0x125631['__esModule']?_0x125631:{'default':_0x125631};};var __importStar=this&&this['__importStar']||function(_0x5ca989){if(_0x5ca989&&_0x5ca989['__esModule'])return _0x5ca989;var _0x578f3a={};if(_0x5ca989!=null)for(var _0x197586 in _0x5ca989)if(Object['hasOwnProperty'][a81_0x3f30('0x1')](_0x5ca989,_0x197586))_0x578f3a[_0x197586]=_0x5ca989[_0x197586];_0x578f3a[a81_0x3f30('0x2')]=_0x5ca989;return _0x578f3a;};Object[a81_0x3f30('0x3')](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require(a81_0x3f30('0x4')));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a81_0x3f30('0x5')));const logger_1=__importDefault(require(a81_0x3f30('0x6')));const lusca_1=__importDefault(require(a81_0x3f30('0x7')));const dotenv_1=__importDefault(require(a81_0x3f30('0x8')));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require(a81_0x3f30('0x9')));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require(a81_0x3f30('0xa')));const fs_1=__importDefault(require('fs'));if(fs_1[a81_0x3f30('0x2')][a81_0x3f30('0xb')](a81_0x3f30('0xc'))){logger_1[a81_0x3f30('0x2')]['debug']('Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1['default'][a81_0x3f30('0xd')]({'path':a81_0x3f30('0xc')});}else{logger_1[a81_0x3f30('0x2')]['debug']('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1['default']['config']({'path':a81_0x3f30('0xe')});}const apiController=__importStar(require(a81_0x3f30('0xf')));const app=express_1[a81_0x3f30('0x2')]();app['set'](a81_0x3f30('0x10'),process[a81_0x3f30('0x11')][a81_0x3f30('0x12')]||0xbb8);app[a81_0x3f30('0x13')](a81_0x3f30('0x14'),path_1[a81_0x3f30('0x2')][a81_0x3f30('0x15')](__dirname,a81_0x3f30('0x16')));app[a81_0x3f30('0x13')](a81_0x3f30('0x17'),a81_0x3f30('0x18'));app[a81_0x3f30('0x19')](compression_1[a81_0x3f30('0x2')]());app[a81_0x3f30('0x19')](body_parser_1[a81_0x3f30('0x2')][a81_0x3f30('0x1a')]());app['use'](body_parser_1[a81_0x3f30('0x2')][a81_0x3f30('0x1b')]({'extended':!![]}));app['use'](express_validator_1[a81_0x3f30('0x2')]());app['use'](passport_1[a81_0x3f30('0x2')][a81_0x3f30('0x1c')]());app['use'](passport_1[a81_0x3f30('0x2')][a81_0x3f30('0x1d')]());app['use'](express_flash_1[a81_0x3f30('0x2')]());app[a81_0x3f30('0x19')](lusca_1['default'][a81_0x3f30('0x1e')](a81_0x3f30('0x1f')));app['use'](lusca_1[a81_0x3f30('0x2')]['xssProtection'](!![]));app[a81_0x3f30('0x19')]((_0x5b3b71,_0x55ee91,_0x316191)=>{_0x55ee91[a81_0x3f30('0x20')]['user']=_0x5b3b71[a81_0x3f30('0x21')];_0x316191();});app[a81_0x3f30('0x19')]((_0x2ab060,_0x3fe038,_0x5acc84)=>{_0x5acc84();});app[a81_0x3f30('0x19')](express_1[a81_0x3f30('0x2')][a81_0x3f30('0x22')](path_1[a81_0x3f30('0x2')][a81_0x3f30('0x15')](__dirname,a81_0x3f30('0x23')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require('./config/sequelize'));const models_1=__importDefault(require(a81_0x3f30('0x24')));const routes_1=__importDefault(require(a81_0x3f30('0x25')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const models=new models_1[(a81_0x3f30('0x2'))](sequelize_1['default']);sequelize_utils_1['default'][a81_0x3f30('0x26')]=models;routes_1[a81_0x3f30('0x2')](app,passport_1['default'],models);require('./config/passport')(passport_1[a81_0x3f30('0x2')],models['usersModel']);sequelize_utils_1[a81_0x3f30('0x2')][a81_0x3f30('0x27')]=sequelize_1['default'];apiController[a81_0x3f30('0x28')](sequelize_1['default']);const options={'exclude':['id',a81_0x3f30('0x29'),a81_0x3f30('0x2a'),'deletedAt',a81_0x3f30('0x2b'),'updated_at',a81_0x3f30('0x2c')],'userModel':a81_0x3f30('0x2d'),'revisionAttribute':a81_0x3f30('0x2e'),'revisionModel':a81_0x3f30('0x2e'),'revisionChangeModel':a81_0x3f30('0x2f'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a81_0x3f30('0x30'),'revisionId':a81_0x3f30('0x31')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a81_0x3f30('0x32'),'continuationKey':a81_0x3f30('0x33')};const PaperTrail=require(a81_0x3f30('0x34'))[a81_0x3f30('0x35')](sequelize_1[a81_0x3f30('0x2')],options);PaperTrail[a81_0x3f30('0x36')]({});app[a81_0x3f30('0x37')](a81_0x3f30('0x38'),apiController[a81_0x3f30('0x39')]);app[a81_0x3f30('0x37')](a81_0x3f30('0x3a'),apiController[a81_0x3f30('0x3b')]);app['get']('/api/processFtp',apiController[a81_0x3f30('0x3c')]);app[a81_0x3f30('0x37')](a81_0x3f30('0x3d'),apiController[a81_0x3f30('0x3e')]);app[a81_0x3f30('0x37')](a81_0x3f30('0x3f'),apiController[a81_0x3f30('0x40')]);app[a81_0x3f30('0x37')](a81_0x3f30('0x41'),apiController[a81_0x3f30('0x42')]);exports['default']=app;