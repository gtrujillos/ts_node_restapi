var a135_0x4a67=['downloadFtp','/api/processFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','/api/getPassCountingByHour/:direction','__importDefault','__esModule','__importStar','hasOwnProperty','call','default','express','compression','body-parser','lusca','dotenv','path','passport','express-validator','cors','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','./controllers/api','set','env','PORT','use','json','urlencoded','initialize','session','xframe','SAMEORIGIN','xssProtection','locals','user','static','join','public','./config/sequelize','./app/models','./app/routes','./app/controllers','models','controllers','./config/passport','usersModel','setSequelize','createdAt','deletedAt','created_at','updated_at','deleted_at','revision','revision_id','sequelize-paper-trail','init','defineModels','get','syncFtp'];(function(_0x3718f1,_0x537582){var _0x3a3046=function(_0xf79bd4){while(--_0xf79bd4){_0x3718f1['push'](_0x3718f1['shift']());}};_0x3a3046(++_0x537582);}(a135_0x4a67,0x10f));var a135_0x314c=function(_0x41b5ff,_0xff9ae8){_0x41b5ff=_0x41b5ff-0x0;var _0x3e8ff1=a135_0x4a67[_0x41b5ff];return _0x3e8ff1;};'use strict';var __importDefault=this&&this[a135_0x314c('0x0')]||function(_0x1585fb){return _0x1585fb&&_0x1585fb[a135_0x314c('0x1')]?_0x1585fb:{'default':_0x1585fb};};var __importStar=this&&this[a135_0x314c('0x2')]||function(_0x31b2ec){if(_0x31b2ec&&_0x31b2ec[a135_0x314c('0x1')])return _0x31b2ec;var _0x3535e2={};if(_0x31b2ec!=null)for(var _0x56914a in _0x31b2ec)if(Object[a135_0x314c('0x3')][a135_0x314c('0x4')](_0x31b2ec,_0x56914a))_0x3535e2[_0x56914a]=_0x31b2ec[_0x56914a];_0x3535e2[a135_0x314c('0x5')]=_0x31b2ec;return _0x3535e2;};Object['defineProperty'](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require(a135_0x314c('0x6')));const compression_1=__importDefault(require(a135_0x314c('0x7')));const body_parser_1=__importDefault(require(a135_0x314c('0x8')));const logger_1=__importDefault(require('./util/logger'));const lusca_1=__importDefault(require(a135_0x314c('0x9')));const dotenv_1=__importDefault(require(a135_0x314c('0xa')));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require(a135_0x314c('0xb')));const passport_1=__importDefault(require(a135_0x314c('0xc')));const express_validator_1=__importDefault(require(a135_0x314c('0xd')));const fs_1=__importDefault(require('fs'));const cors=require(a135_0x314c('0xe'));if(fs_1[a135_0x314c('0x5')][a135_0x314c('0xf')](a135_0x314c('0x10'))){logger_1[a135_0x314c('0x5')][a135_0x314c('0x11')](a135_0x314c('0x12'));dotenv_1[a135_0x314c('0x5')]['config']({'path':'.env'});}else{logger_1[a135_0x314c('0x5')]['debug'](a135_0x314c('0x13'));dotenv_1[a135_0x314c('0x5')][a135_0x314c('0x14')]({'path':'.env.example'});}const apiController=__importStar(require(a135_0x314c('0x15')));const app=express_1['default']();app[a135_0x314c('0x16')]('port',process[a135_0x314c('0x17')][a135_0x314c('0x18')]||0xbb8);app['set']('views',path_1['default']['join'](__dirname,'../views'));app[a135_0x314c('0x16')]('view\x20engine','pug');app[a135_0x314c('0x19')](compression_1[a135_0x314c('0x5')]());app[a135_0x314c('0x19')](body_parser_1[a135_0x314c('0x5')][a135_0x314c('0x1a')]());app[a135_0x314c('0x19')](body_parser_1[a135_0x314c('0x5')][a135_0x314c('0x1b')]({'extended':!![]}));app[a135_0x314c('0x19')](express_validator_1[a135_0x314c('0x5')]());app['use'](passport_1[a135_0x314c('0x5')][a135_0x314c('0x1c')]());app['use'](passport_1[a135_0x314c('0x5')][a135_0x314c('0x1d')]());app['use'](express_flash_1[a135_0x314c('0x5')]());app['use'](lusca_1[a135_0x314c('0x5')][a135_0x314c('0x1e')](a135_0x314c('0x1f')));app[a135_0x314c('0x19')](lusca_1[a135_0x314c('0x5')][a135_0x314c('0x20')](!![]));app['use']((_0x13d3f7,_0x50822b,_0x5ac866)=>{_0x50822b[a135_0x314c('0x21')]['user']=_0x13d3f7[a135_0x314c('0x22')];_0x5ac866();});app[a135_0x314c('0x19')]((_0x5d4c4e,_0x3ee25b,_0x5e29cd)=>{_0x5e29cd();});app['use'](express_1[a135_0x314c('0x5')][a135_0x314c('0x23')](path_1[a135_0x314c('0x5')][a135_0x314c('0x24')](__dirname,a135_0x314c('0x25')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a135_0x314c('0x26')));const models_1=__importDefault(require(a135_0x314c('0x27')));const routes_1=__importDefault(require(a135_0x314c('0x28')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const controllers_1=__importDefault(require(a135_0x314c('0x29')));const models=new models_1[(a135_0x314c('0x5'))](sequelize_1[a135_0x314c('0x5')]);const controllers=new controllers_1['default'](models);sequelize_utils_1[a135_0x314c('0x5')][a135_0x314c('0x2a')]=models;sequelize_utils_1['default'][a135_0x314c('0x2b')]=controllers;routes_1[a135_0x314c('0x5')](app,passport_1[a135_0x314c('0x5')],models,controllers);require(a135_0x314c('0x2c'))(passport_1[a135_0x314c('0x5')],models[a135_0x314c('0x2d')]);sequelize_utils_1[a135_0x314c('0x5')]['instance']=sequelize_1[a135_0x314c('0x5')];apiController[a135_0x314c('0x2e')](sequelize_1[a135_0x314c('0x5')]);const options={'exclude':['id',a135_0x314c('0x2f'),'updatedAt',a135_0x314c('0x30'),a135_0x314c('0x31'),a135_0x314c('0x32'),a135_0x314c('0x33')],'userModel':'users','revisionAttribute':a135_0x314c('0x34'),'revisionModel':a135_0x314c('0x34'),'revisionChangeModel':'revision_change','enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':'document_id','revisionId':a135_0x314c('0x35')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':'current_user_request','continuationKey':'user_id'};const PaperTrail=require(a135_0x314c('0x36'))[a135_0x314c('0x37')](sequelize_1[a135_0x314c('0x5')],options);PaperTrail[a135_0x314c('0x38')]({});app[a135_0x314c('0x39')]('/api/syncftp',apiController[a135_0x314c('0x3a')]);app[a135_0x314c('0x39')]('/api/downloadFtp',apiController[a135_0x314c('0x3b')]);app[a135_0x314c('0x39')](a135_0x314c('0x3c'),apiController[a135_0x314c('0x3d')]);app[a135_0x314c('0x39')](a135_0x314c('0x3e'),apiController[a135_0x314c('0x3f')]);app[a135_0x314c('0x39')](a135_0x314c('0x40'),apiController['getPassCountingByDay']);app[a135_0x314c('0x39')](a135_0x314c('0x41'),apiController['getPassCountingByHour']);exports['default']=app;