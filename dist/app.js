var a176_0x12db=['initialize','SAMEORIGIN','xssProtection','locals','user','static','join','./app/routes','./app/controllers','./config/passport','usersModel','setSequelize','get','/api/syncftp','/api/downloadFtp','downloadFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByHour/:direction','enable','__importDefault','call','default','express','compression','./util/logger','lusca','dotenv','express-flash','path','passport','express-validator','cors','express-rate-limit','express-slow-down','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env.example','set','port','env','PORT','pug','json','10mb','use','urlencoded','DEV_MODE','options'];(function(_0x1aeaa5,_0x2048d9){var _0x4f29ed=function(_0x281fd3){while(--_0x281fd3){_0x1aeaa5['push'](_0x1aeaa5['shift']());}};_0x4f29ed(++_0x2048d9);}(a176_0x12db,0x18f));var a176_0x5401=function(_0x326c72,_0x5c6572){_0x326c72=_0x326c72-0x0;var _0x137c1d=a176_0x12db[_0x326c72];return _0x137c1d;};'use strict';var __importDefault=this&&this[a176_0x5401('0x0')]||function(_0x46ef05){return _0x46ef05&&_0x46ef05['__esModule']?_0x46ef05:{'default':_0x46ef05};};var __importStar=this&&this['__importStar']||function(_0x386167){if(_0x386167&&_0x386167['__esModule'])return _0x386167;var _0x554a7d={};if(_0x386167!=null)for(var _0x5724a8 in _0x386167)if(Object['hasOwnProperty'][a176_0x5401('0x1')](_0x386167,_0x5724a8))_0x554a7d[_0x5724a8]=_0x386167[_0x5724a8];_0x554a7d[a176_0x5401('0x2')]=_0x386167;return _0x554a7d;};Object['defineProperty'](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require(a176_0x5401('0x3')));const compression_1=__importDefault(require(a176_0x5401('0x4')));const body_parser_1=__importDefault(require('body-parser'));const logger_1=__importDefault(require(a176_0x5401('0x5')));const lusca_1=__importDefault(require(a176_0x5401('0x6')));const dotenv_1=__importDefault(require(a176_0x5401('0x7')));const express_flash_1=__importDefault(require(a176_0x5401('0x8')));const path_1=__importDefault(require(a176_0x5401('0x9')));const passport_1=__importDefault(require(a176_0x5401('0xa')));const express_validator_1=__importDefault(require(a176_0x5401('0xb')));const fs_1=__importDefault(require('fs'));const cors=require(a176_0x5401('0xc'));const rateLimit=require(a176_0x5401('0xd'));const slowDown=require(a176_0x5401('0xe'));if(fs_1[a176_0x5401('0x2')][a176_0x5401('0xf')](a176_0x5401('0x10'))){logger_1['default'][a176_0x5401('0x11')](a176_0x5401('0x12'));dotenv_1[a176_0x5401('0x2')]['config']({'path':'.env'});}else{logger_1[a176_0x5401('0x2')]['debug'](a176_0x5401('0x13'));dotenv_1[a176_0x5401('0x2')][a176_0x5401('0x14')]({'path':a176_0x5401('0x15')});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a176_0x5401('0x2')]();app[a176_0x5401('0x16')](a176_0x5401('0x17'),process[a176_0x5401('0x18')][a176_0x5401('0x19')]||0xbb8);app[a176_0x5401('0x16')]('views',path_1['default']['join'](__dirname,'../views'));app['set']('view\x20engine',a176_0x5401('0x1a'));app['use'](compression_1['default']());app['use'](body_parser_1[a176_0x5401('0x2')][a176_0x5401('0x1b')]({'limit':a176_0x5401('0x1c')}));app[a176_0x5401('0x1d')](body_parser_1[a176_0x5401('0x2')][a176_0x5401('0x1e')]({'limit':'10mb','extended':!![]}));if(process[a176_0x5401('0x18')][a176_0x5401('0x1f')]){app[a176_0x5401('0x1d')](cors());app[a176_0x5401('0x1d')](cors({'origin':!![]}));app[a176_0x5401('0x20')]('*',cors());}else{app[a176_0x5401('0x1d')](cors());}app['use'](express_validator_1[a176_0x5401('0x2')]());app[a176_0x5401('0x1d')](passport_1[a176_0x5401('0x2')][a176_0x5401('0x21')]());app[a176_0x5401('0x1d')](passport_1['default']['session']());app['use'](express_flash_1[a176_0x5401('0x2')]());app[a176_0x5401('0x1d')](lusca_1[a176_0x5401('0x2')]['xframe'](a176_0x5401('0x22')));app[a176_0x5401('0x1d')](lusca_1[a176_0x5401('0x2')][a176_0x5401('0x23')](!![]));app[a176_0x5401('0x1d')]((_0x5f25a8,_0x371eeb,_0x459c84)=>{_0x371eeb[a176_0x5401('0x24')][a176_0x5401('0x25')]=_0x5f25a8['user'];_0x459c84();});app[a176_0x5401('0x1d')]((_0x5168f2,_0x5ea4f8,_0x582ec8)=>{_0x582ec8();});app[a176_0x5401('0x1d')](express_1[a176_0x5401('0x2')][a176_0x5401('0x26')](path_1[a176_0x5401('0x2')][a176_0x5401('0x27')](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require('./config/sequelize'));const models_1=__importDefault(require('./app/models'));const routes_1=__importDefault(require(a176_0x5401('0x28')));const controllers_1=__importDefault(require(a176_0x5401('0x29')));const models=new models_1[(a176_0x5401('0x2'))](sequelize_1[a176_0x5401('0x2')]);const controllers=new controllers_1[(a176_0x5401('0x2'))](models);routes_1['default'](app,passport_1[a176_0x5401('0x2')],models,controllers);require(a176_0x5401('0x2a'))(passport_1[a176_0x5401('0x2')],models[a176_0x5401('0x2b')]);apiController[a176_0x5401('0x2c')](sequelize_1['default']);app[a176_0x5401('0x2d')](a176_0x5401('0x2e'),apiController['syncFtp']);app[a176_0x5401('0x2d')](a176_0x5401('0x2f'),apiController[a176_0x5401('0x30')]);app[a176_0x5401('0x2d')]('/api/processFtp',apiController[a176_0x5401('0x31')]);app[a176_0x5401('0x2d')](a176_0x5401('0x32'),apiController[a176_0x5401('0x33')]);app[a176_0x5401('0x2d')]('/api/getPassCountingByDay/:direction',apiController['getPassCountingByDay']);app[a176_0x5401('0x2d')](a176_0x5401('0x34'),apiController['getPassCountingByHour']);const limiter=rateLimit({'windowMs':0x2*0x3c*0x3e8,'max':0x64});app[a176_0x5401('0x1d')](limiter);app[a176_0x5401('0x35')]('trust\x20proxy');const speedLimiter=slowDown({'windowMs':0x2*0x3c*0x3e8,'delayAfter':0x64,'delayMs':0x1f4});app[a176_0x5401('0x1d')](speedLimiter);exports['default']=app;