var a176_0x1acd=['join','../views','set','view\x20engine','pug','use','json','10mb','urlencoded','DEV_MODE','options','xframe','SAMEORIGIN','xssProtection','user','static','public','./config/sequelize','./app/models','./app/routes','./app/controllers','usersModel','setSequelize','get','/api/syncftp','syncFtp','/api/processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','enable','trust\x20proxy','__esModule','hasOwnProperty','call','default','defineProperty','express','./util/logger','dotenv','express-flash','path','passport','express-validator','cors','express-rate-limit','express-slow-down','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','./controllers/api','port','env','PORT','views'];(function(_0x83958c,_0xc60544){var _0x45802b=function(_0x510b72){while(--_0x510b72){_0x83958c['push'](_0x83958c['shift']());}};_0x45802b(++_0xc60544);}(a176_0x1acd,0x1d5));var a176_0x27de=function(_0x321cb1,_0xaa1021){_0x321cb1=_0x321cb1-0x0;var _0x2e055e=a176_0x1acd[_0x321cb1];return _0x2e055e;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x40956d){return _0x40956d&&_0x40956d[a176_0x27de('0x0')]?_0x40956d:{'default':_0x40956d};};var __importStar=this&&this['__importStar']||function(_0x2eaafd){if(_0x2eaafd&&_0x2eaafd[a176_0x27de('0x0')])return _0x2eaafd;var _0x38c167={};if(_0x2eaafd!=null)for(var _0x1c9ae7 in _0x2eaafd)if(Object[a176_0x27de('0x1')][a176_0x27de('0x2')](_0x2eaafd,_0x1c9ae7))_0x38c167[_0x1c9ae7]=_0x2eaafd[_0x1c9ae7];_0x38c167[a176_0x27de('0x3')]=_0x2eaafd;return _0x38c167;};Object[a176_0x27de('0x4')](exports,a176_0x27de('0x0'),{'value':!![]});const express_1=__importDefault(require(a176_0x27de('0x5')));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require('body-parser'));const logger_1=__importDefault(require(a176_0x27de('0x6')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require(a176_0x27de('0x7')));const express_flash_1=__importDefault(require(a176_0x27de('0x8')));const path_1=__importDefault(require(a176_0x27de('0x9')));const passport_1=__importDefault(require(a176_0x27de('0xa')));const express_validator_1=__importDefault(require(a176_0x27de('0xb')));const fs_1=__importDefault(require('fs'));const cors=require(a176_0x27de('0xc'));const rateLimit=require(a176_0x27de('0xd'));const slowDown=require(a176_0x27de('0xe'));if(fs_1[a176_0x27de('0x3')][a176_0x27de('0xf')](a176_0x27de('0x10'))){logger_1[a176_0x27de('0x3')][a176_0x27de('0x11')](a176_0x27de('0x12'));dotenv_1[a176_0x27de('0x3')][a176_0x27de('0x13')]({'path':a176_0x27de('0x10')});}else{logger_1['default'][a176_0x27de('0x11')](a176_0x27de('0x14'));dotenv_1[a176_0x27de('0x3')][a176_0x27de('0x13')]({'path':a176_0x27de('0x15')});}const apiController=__importStar(require(a176_0x27de('0x16')));const app=express_1[a176_0x27de('0x3')]();app['set'](a176_0x27de('0x17'),process[a176_0x27de('0x18')][a176_0x27de('0x19')]||0xbb8);app['set'](a176_0x27de('0x1a'),path_1[a176_0x27de('0x3')][a176_0x27de('0x1b')](__dirname,a176_0x27de('0x1c')));app[a176_0x27de('0x1d')](a176_0x27de('0x1e'),a176_0x27de('0x1f'));app[a176_0x27de('0x20')](compression_1[a176_0x27de('0x3')]());app[a176_0x27de('0x20')](body_parser_1['default'][a176_0x27de('0x21')]({'limit':a176_0x27de('0x22')}));app['use'](body_parser_1[a176_0x27de('0x3')][a176_0x27de('0x23')]({'limit':a176_0x27de('0x22'),'extended':!![]}));if(process['env'][a176_0x27de('0x24')]){app[a176_0x27de('0x20')](cors());app[a176_0x27de('0x20')](cors({'origin':!![]}));app[a176_0x27de('0x25')]('*',cors());}else{app['use'](cors());}app[a176_0x27de('0x20')](express_validator_1[a176_0x27de('0x3')]());app[a176_0x27de('0x20')](passport_1[a176_0x27de('0x3')]['initialize']());app['use'](passport_1['default']['session']());app[a176_0x27de('0x20')](express_flash_1[a176_0x27de('0x3')]());app[a176_0x27de('0x20')](lusca_1[a176_0x27de('0x3')][a176_0x27de('0x26')](a176_0x27de('0x27')));app[a176_0x27de('0x20')](lusca_1['default'][a176_0x27de('0x28')](!![]));app[a176_0x27de('0x20')]((_0x1de654,_0x1cfb3e,_0x3ad74e)=>{_0x1cfb3e['locals'][a176_0x27de('0x29')]=_0x1de654[a176_0x27de('0x29')];_0x3ad74e();});app['use']((_0x5a2dc6,_0x50745a,_0x598b99)=>{_0x598b99();});app['use'](express_1[a176_0x27de('0x3')][a176_0x27de('0x2a')](path_1[a176_0x27de('0x3')][a176_0x27de('0x1b')](__dirname,a176_0x27de('0x2b')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a176_0x27de('0x2c')));const models_1=__importDefault(require(a176_0x27de('0x2d')));const routes_1=__importDefault(require(a176_0x27de('0x2e')));const controllers_1=__importDefault(require(a176_0x27de('0x2f')));const models=new models_1[(a176_0x27de('0x3'))](sequelize_1[a176_0x27de('0x3')]);const controllers=new controllers_1[(a176_0x27de('0x3'))](models);routes_1[a176_0x27de('0x3')](app,passport_1[a176_0x27de('0x3')],models,controllers);require('./config/passport')(passport_1[a176_0x27de('0x3')],models[a176_0x27de('0x30')]);apiController[a176_0x27de('0x31')](sequelize_1[a176_0x27de('0x3')]);app[a176_0x27de('0x32')](a176_0x27de('0x33'),apiController[a176_0x27de('0x34')]);app[a176_0x27de('0x32')]('/api/downloadFtp',apiController['downloadFtp']);app[a176_0x27de('0x32')](a176_0x27de('0x35'),apiController['processFtp']);app[a176_0x27de('0x32')](a176_0x27de('0x36'),apiController[a176_0x27de('0x37')]);app[a176_0x27de('0x32')](a176_0x27de('0x38'),apiController[a176_0x27de('0x39')]);app[a176_0x27de('0x32')](a176_0x27de('0x3a'),apiController[a176_0x27de('0x3b')]);const limiter=rateLimit({'windowMs':0x2*0x3c*0x3e8,'max':0x64});app[a176_0x27de('0x20')](limiter);app[a176_0x27de('0x3c')](a176_0x27de('0x3d'));const speedLimiter=slowDown({'windowMs':0x2*0x3c*0x3e8,'delayAfter':0x64,'delayMs':0x1f4});app['use'](speedLimiter);exports[a176_0x27de('0x3')]=app;