var a194_0x4ca4=['initialize','SAMEORIGIN','xssProtection','locals','user','static','./config/sequelize','./app/models','./app/routes','./infrastructure/sequelize-utils','./app/controllers','models','controllers','./config/passport','usersModel','setSequelize','updatedAt','deletedAt','created_at','updated_at','deleted_at','revision','revision_change','revision_id','user_id','sequelize-paper-trail','init','defineModels','get','/api/syncftp','downloadFtp','/api/processFtp','processFtp','/api/getPassCounting/:direction','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__importStar','__esModule','hasOwnProperty','call','body-parser','./util/logger','lusca','dotenv','passport','express-validator','cors','default','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env','.env.example','./controllers/api','set','port','PORT','views','join','../views','view\x20engine','use','10mb','options'];(function(_0x465f88,_0x172e41){var _0x53efcd=function(_0x28e4cf){while(--_0x28e4cf){_0x465f88['push'](_0x465f88['shift']());}};_0x53efcd(++_0x172e41);}(a194_0x4ca4,0xeb));var a194_0x3ac4=function(_0x45f027,_0x260284){_0x45f027=_0x45f027-0x0;var _0x2c99c0=a194_0x4ca4[_0x45f027];return _0x2c99c0;};'use strict';var __importDefault=this&&this[a194_0x3ac4('0x0')]||function(_0x1266c4){return _0x1266c4&&_0x1266c4['__esModule']?_0x1266c4:{'default':_0x1266c4};};var __importStar=this&&this[a194_0x3ac4('0x1')]||function(_0x1ae925){if(_0x1ae925&&_0x1ae925[a194_0x3ac4('0x2')])return _0x1ae925;var _0x389cdd={};if(_0x1ae925!=null)for(var _0x452d74 in _0x1ae925)if(Object[a194_0x3ac4('0x3')][a194_0x3ac4('0x4')](_0x1ae925,_0x452d74))_0x389cdd[_0x452d74]=_0x1ae925[_0x452d74];_0x389cdd['default']=_0x1ae925;return _0x389cdd;};Object['defineProperty'](exports,a194_0x3ac4('0x2'),{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a194_0x3ac4('0x5')));const logger_1=__importDefault(require(a194_0x3ac4('0x6')));const lusca_1=__importDefault(require(a194_0x3ac4('0x7')));const dotenv_1=__importDefault(require(a194_0x3ac4('0x8')));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require(a194_0x3ac4('0x9')));const express_validator_1=__importDefault(require(a194_0x3ac4('0xa')));const fs_1=__importDefault(require('fs'));const cors=require(a194_0x3ac4('0xb'));if(fs_1[a194_0x3ac4('0xc')]['existsSync']('.env')){logger_1[a194_0x3ac4('0xc')][a194_0x3ac4('0xd')](a194_0x3ac4('0xe'));dotenv_1[a194_0x3ac4('0xc')][a194_0x3ac4('0xf')]({'path':a194_0x3ac4('0x10')});}else{logger_1['default'][a194_0x3ac4('0xd')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a194_0x3ac4('0xc')][a194_0x3ac4('0xf')]({'path':a194_0x3ac4('0x11')});}const apiController=__importStar(require(a194_0x3ac4('0x12')));const app=express_1[a194_0x3ac4('0xc')]();app[a194_0x3ac4('0x13')](a194_0x3ac4('0x14'),process['env'][a194_0x3ac4('0x15')]||0xbb8);app[a194_0x3ac4('0x13')](a194_0x3ac4('0x16'),path_1[a194_0x3ac4('0xc')][a194_0x3ac4('0x17')](__dirname,a194_0x3ac4('0x18')));app[a194_0x3ac4('0x13')](a194_0x3ac4('0x19'),'pug');app[a194_0x3ac4('0x1a')](compression_1[a194_0x3ac4('0xc')]());app[a194_0x3ac4('0x1a')](body_parser_1[a194_0x3ac4('0xc')]['json']({'limit':a194_0x3ac4('0x1b')}));app['use'](body_parser_1[a194_0x3ac4('0xc')]['urlencoded']({'limit':a194_0x3ac4('0x1b'),'extended':!![]}));app[a194_0x3ac4('0x1a')](cors());app[a194_0x3ac4('0x1a')](cors({'origin':!![]}));app[a194_0x3ac4('0x1c')]('*',cors());app[a194_0x3ac4('0x1a')](express_validator_1[a194_0x3ac4('0xc')]());app[a194_0x3ac4('0x1a')](passport_1[a194_0x3ac4('0xc')][a194_0x3ac4('0x1d')]());app['use'](passport_1[a194_0x3ac4('0xc')]['session']());app[a194_0x3ac4('0x1a')](express_flash_1['default']());app[a194_0x3ac4('0x1a')](lusca_1[a194_0x3ac4('0xc')]['xframe'](a194_0x3ac4('0x1e')));app[a194_0x3ac4('0x1a')](lusca_1[a194_0x3ac4('0xc')][a194_0x3ac4('0x1f')](!![]));app[a194_0x3ac4('0x1a')]((_0x111911,_0x310f3d,_0x3e0efa)=>{_0x310f3d[a194_0x3ac4('0x20')][a194_0x3ac4('0x21')]=_0x111911[a194_0x3ac4('0x21')];_0x3e0efa();});app[a194_0x3ac4('0x1a')]((_0x111d72,_0x19189f,_0x19d164)=>{_0x19d164();});app['use'](express_1['default'][a194_0x3ac4('0x22')](path_1[a194_0x3ac4('0xc')]['join'](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a194_0x3ac4('0x23')));const models_1=__importDefault(require(a194_0x3ac4('0x24')));const routes_1=__importDefault(require(a194_0x3ac4('0x25')));const sequelize_utils_1=__importDefault(require(a194_0x3ac4('0x26')));const controllers_1=__importDefault(require(a194_0x3ac4('0x27')));const models=new models_1[(a194_0x3ac4('0xc'))](sequelize_1[a194_0x3ac4('0xc')]);const controllers=new controllers_1[(a194_0x3ac4('0xc'))](models);sequelize_utils_1['default'][a194_0x3ac4('0x28')]=models;sequelize_utils_1[a194_0x3ac4('0xc')][a194_0x3ac4('0x29')]=controllers;routes_1[a194_0x3ac4('0xc')](app,passport_1[a194_0x3ac4('0xc')],models,controllers);require(a194_0x3ac4('0x2a'))(passport_1[a194_0x3ac4('0xc')],models[a194_0x3ac4('0x2b')]);sequelize_utils_1['default']['instance']=sequelize_1[a194_0x3ac4('0xc')];apiController[a194_0x3ac4('0x2c')](sequelize_1[a194_0x3ac4('0xc')]);const options={'exclude':['id','createdAt',a194_0x3ac4('0x2d'),a194_0x3ac4('0x2e'),a194_0x3ac4('0x2f'),a194_0x3ac4('0x30'),a194_0x3ac4('0x31')],'userModel':'users','revisionAttribute':'revision','revisionModel':a194_0x3ac4('0x32'),'revisionChangeModel':a194_0x3ac4('0x33'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':'document_id','revisionId':a194_0x3ac4('0x34')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':'current_user_request','continuationKey':a194_0x3ac4('0x35')};const PaperTrail=require(a194_0x3ac4('0x36'))[a194_0x3ac4('0x37')](sequelize_1[a194_0x3ac4('0xc')],options);PaperTrail[a194_0x3ac4('0x38')]({});app[a194_0x3ac4('0x39')](a194_0x3ac4('0x3a'),apiController['syncFtp']);app[a194_0x3ac4('0x39')]('/api/downloadFtp',apiController[a194_0x3ac4('0x3b')]);app[a194_0x3ac4('0x39')](a194_0x3ac4('0x3c'),apiController[a194_0x3ac4('0x3d')]);app['get'](a194_0x3ac4('0x3e'),apiController['getPassCounting']);app[a194_0x3ac4('0x39')]('/api/getPassCountingByDay/:direction',apiController[a194_0x3ac4('0x3f')]);app[a194_0x3ac4('0x39')](a194_0x3ac4('0x40'),apiController[a194_0x3ac4('0x41')]);exports[a194_0x3ac4('0xc')]=app;