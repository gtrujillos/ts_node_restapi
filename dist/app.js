var a87_0x250a=['get','syncFtp','downloadFtp','/api/processFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','__importStar','hasOwnProperty','call','default','defineProperty','body-parser','lusca','dotenv','express-flash','passport','express-validator','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','set','port','env','PORT','join','view\x20engine','pug','use','urlencoded','initialize','session','xframe','SAMEORIGIN','xssProtection','locals','user','public','./app/models','./infrastructure/sequelize-utils','models','usersModel','createdAt','updatedAt','deletedAt','created_at','updated_at','deleted_at','users','revision','revision_change','document_id','revision_id','current_user_request','user_id','sequelize-paper-trail','defineModels'];(function(_0x57bf22,_0x13f0f6){var _0x4180c5=function(_0x1e17c6){while(--_0x1e17c6){_0x57bf22['push'](_0x57bf22['shift']());}};_0x4180c5(++_0x13f0f6);}(a87_0x250a,0x10e));var a87_0x12f0=function(_0x8c5406,_0x4588b0){_0x8c5406=_0x8c5406-0x0;var _0x2541b4=a87_0x250a[_0x8c5406];return _0x2541b4;};'use strict';var __importDefault=this&&this[a87_0x12f0('0x0')]||function(_0x15bf1b){return _0x15bf1b&&_0x15bf1b[a87_0x12f0('0x1')]?_0x15bf1b:{'default':_0x15bf1b};};var __importStar=this&&this[a87_0x12f0('0x2')]||function(_0x4aad62){if(_0x4aad62&&_0x4aad62[a87_0x12f0('0x1')])return _0x4aad62;var _0x35ddbf={};if(_0x4aad62!=null)for(var _0x5b72ac in _0x4aad62)if(Object[a87_0x12f0('0x3')][a87_0x12f0('0x4')](_0x4aad62,_0x5b72ac))_0x35ddbf[_0x5b72ac]=_0x4aad62[_0x5b72ac];_0x35ddbf[a87_0x12f0('0x5')]=_0x4aad62;return _0x35ddbf;};Object[a87_0x12f0('0x6')](exports,a87_0x12f0('0x1'),{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a87_0x12f0('0x7')));const logger_1=__importDefault(require('./util/logger'));const lusca_1=__importDefault(require(a87_0x12f0('0x8')));const dotenv_1=__importDefault(require(a87_0x12f0('0x9')));const express_flash_1=__importDefault(require(a87_0x12f0('0xa')));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require(a87_0x12f0('0xb')));const express_validator_1=__importDefault(require(a87_0x12f0('0xc')));const fs_1=__importDefault(require('fs'));if(fs_1[a87_0x12f0('0x5')]['existsSync'](a87_0x12f0('0xd'))){logger_1[a87_0x12f0('0x5')][a87_0x12f0('0xe')](a87_0x12f0('0xf'));dotenv_1[a87_0x12f0('0x5')][a87_0x12f0('0x10')]({'path':a87_0x12f0('0xd')});}else{logger_1[a87_0x12f0('0x5')][a87_0x12f0('0xe')](a87_0x12f0('0x11'));dotenv_1[a87_0x12f0('0x5')][a87_0x12f0('0x10')]({'path':a87_0x12f0('0x12')});}const apiController=__importStar(require('./controllers/api'));const app=express_1['default']();app[a87_0x12f0('0x13')](a87_0x12f0('0x14'),process[a87_0x12f0('0x15')][a87_0x12f0('0x16')]||0xbb8);app['set']('views',path_1[a87_0x12f0('0x5')][a87_0x12f0('0x17')](__dirname,'../views'));app['set'](a87_0x12f0('0x18'),a87_0x12f0('0x19'));app['use'](compression_1['default']());app['use'](body_parser_1[a87_0x12f0('0x5')]['json']());app[a87_0x12f0('0x1a')](body_parser_1[a87_0x12f0('0x5')][a87_0x12f0('0x1b')]({'extended':!![]}));app['use'](express_validator_1['default']());app['use'](passport_1[a87_0x12f0('0x5')][a87_0x12f0('0x1c')]());app[a87_0x12f0('0x1a')](passport_1[a87_0x12f0('0x5')][a87_0x12f0('0x1d')]());app[a87_0x12f0('0x1a')](express_flash_1['default']());app[a87_0x12f0('0x1a')](lusca_1[a87_0x12f0('0x5')][a87_0x12f0('0x1e')](a87_0x12f0('0x1f')));app[a87_0x12f0('0x1a')](lusca_1['default'][a87_0x12f0('0x20')](!![]));app[a87_0x12f0('0x1a')]((_0x2b696e,_0x18cbba,_0x777a4c)=>{_0x18cbba[a87_0x12f0('0x21')][a87_0x12f0('0x22')]=_0x2b696e[a87_0x12f0('0x22')];_0x777a4c();});app['use']((_0x5b77df,_0x47725a,_0x160084)=>{_0x160084();});app['use'](express_1[a87_0x12f0('0x5')]['static'](path_1['default'][a87_0x12f0('0x17')](__dirname,a87_0x12f0('0x23')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require('./config/sequelize'));const models_1=__importDefault(require(a87_0x12f0('0x24')));const routes_1=__importDefault(require('./app/routes'));const sequelize_utils_1=__importDefault(require(a87_0x12f0('0x25')));const models=new models_1['default'](sequelize_1[a87_0x12f0('0x5')]);sequelize_utils_1['default'][a87_0x12f0('0x26')]=models;routes_1[a87_0x12f0('0x5')](app,passport_1[a87_0x12f0('0x5')],models);require('./config/passport')(passport_1[a87_0x12f0('0x5')],models[a87_0x12f0('0x27')]);sequelize_utils_1[a87_0x12f0('0x5')]['instance']=sequelize_1[a87_0x12f0('0x5')];apiController['setSequelize'](sequelize_1[a87_0x12f0('0x5')]);const options={'exclude':['id',a87_0x12f0('0x28'),a87_0x12f0('0x29'),a87_0x12f0('0x2a'),a87_0x12f0('0x2b'),a87_0x12f0('0x2c'),a87_0x12f0('0x2d')],'userModel':a87_0x12f0('0x2e'),'revisionAttribute':'revision','revisionModel':a87_0x12f0('0x2f'),'revisionChangeModel':a87_0x12f0('0x30'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a87_0x12f0('0x31'),'revisionId':a87_0x12f0('0x32')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a87_0x12f0('0x33'),'continuationKey':a87_0x12f0('0x34')};const PaperTrail=require(a87_0x12f0('0x35'))['init'](sequelize_1[a87_0x12f0('0x5')],options);PaperTrail[a87_0x12f0('0x36')]({});app[a87_0x12f0('0x37')]('/api/syncftp',apiController[a87_0x12f0('0x38')]);app[a87_0x12f0('0x37')]('/api/downloadFtp',apiController[a87_0x12f0('0x39')]);app[a87_0x12f0('0x37')](a87_0x12f0('0x3a'),apiController[a87_0x12f0('0x3b')]);app[a87_0x12f0('0x37')](a87_0x12f0('0x3c'),apiController[a87_0x12f0('0x3d')]);app['get']('/api/getPassCountingByDay/:direction',apiController[a87_0x12f0('0x3e')]);app[a87_0x12f0('0x37')](a87_0x12f0('0x3f'),apiController[a87_0x12f0('0x40')]);exports[a87_0x12f0('0x5')]=app;