var a88_0x33dc=['env','PORT','set','views','join','../views','use','json','initialize','xframe','xssProtection','locals','user','static','./config/sequelize','./app/models','./app/routes','./app/controllers','controllers','./config/passport','usersModel','instance','setSequelize','createdAt','updatedAt','deletedAt','created_at','deleted_at','users','revision','revision_change','revision_id','current_user_request','user_id','sequelize-paper-trail','defineModels','get','/api/syncftp','/api/downloadFtp','downloadFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','__importStar','call','default','defineProperty','express','compression','body-parser','lusca','express-flash','passport','cors','existsSync','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','port'];(function(_0x73fc3a,_0x3a0886){var _0x20fc70=function(_0x587c83){while(--_0x587c83){_0x73fc3a['push'](_0x73fc3a['shift']());}};_0x20fc70(++_0x3a0886);}(a88_0x33dc,0x177));var a88_0x1df3=function(_0x31c6e6,_0x580760){_0x31c6e6=_0x31c6e6-0x0;var _0x5c1fa5=a88_0x33dc[_0x31c6e6];return _0x5c1fa5;};'use strict';var __importDefault=this&&this[a88_0x1df3('0x0')]||function(_0x596f52){return _0x596f52&&_0x596f52[a88_0x1df3('0x1')]?_0x596f52:{'default':_0x596f52};};var __importStar=this&&this[a88_0x1df3('0x2')]||function(_0x5c0f53){if(_0x5c0f53&&_0x5c0f53['__esModule'])return _0x5c0f53;var _0xe32e72={};if(_0x5c0f53!=null)for(var _0x4a6a8e in _0x5c0f53)if(Object['hasOwnProperty'][a88_0x1df3('0x3')](_0x5c0f53,_0x4a6a8e))_0xe32e72[_0x4a6a8e]=_0x5c0f53[_0x4a6a8e];_0xe32e72[a88_0x1df3('0x4')]=_0x5c0f53;return _0xe32e72;};Object[a88_0x1df3('0x5')](exports,a88_0x1df3('0x1'),{'value':!![]});const express_1=__importDefault(require(a88_0x1df3('0x6')));const compression_1=__importDefault(require(a88_0x1df3('0x7')));const body_parser_1=__importDefault(require(a88_0x1df3('0x8')));const logger_1=__importDefault(require('./util/logger'));const lusca_1=__importDefault(require(a88_0x1df3('0x9')));const dotenv_1=__importDefault(require('dotenv'));const express_flash_1=__importDefault(require(a88_0x1df3('0xa')));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require(a88_0x1df3('0xb')));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));const cors=require(a88_0x1df3('0xc'));if(fs_1['default'][a88_0x1df3('0xd')]('.env')){logger_1[a88_0x1df3('0x4')][a88_0x1df3('0xe')](a88_0x1df3('0xf'));dotenv_1[a88_0x1df3('0x4')][a88_0x1df3('0x10')]({'path':a88_0x1df3('0x11')});}else{logger_1[a88_0x1df3('0x4')][a88_0x1df3('0xe')](a88_0x1df3('0x12'));dotenv_1[a88_0x1df3('0x4')][a88_0x1df3('0x10')]({'path':a88_0x1df3('0x13')});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a88_0x1df3('0x4')]();app['set'](a88_0x1df3('0x14'),process[a88_0x1df3('0x15')][a88_0x1df3('0x16')]||0xbb8);app[a88_0x1df3('0x17')](a88_0x1df3('0x18'),path_1[a88_0x1df3('0x4')][a88_0x1df3('0x19')](__dirname,a88_0x1df3('0x1a')));app['set']('view\x20engine','pug');app[a88_0x1df3('0x1b')](compression_1[a88_0x1df3('0x4')]());app[a88_0x1df3('0x1b')](body_parser_1[a88_0x1df3('0x4')][a88_0x1df3('0x1c')]());app[a88_0x1df3('0x1b')](cors());app[a88_0x1df3('0x1b')](body_parser_1['default']['urlencoded']({'extended':!![]}));app[a88_0x1df3('0x1b')](express_validator_1[a88_0x1df3('0x4')]());app[a88_0x1df3('0x1b')](passport_1['default'][a88_0x1df3('0x1d')]());app[a88_0x1df3('0x1b')](passport_1[a88_0x1df3('0x4')]['session']());app[a88_0x1df3('0x1b')](express_flash_1[a88_0x1df3('0x4')]());app['use'](lusca_1[a88_0x1df3('0x4')][a88_0x1df3('0x1e')]('SAMEORIGIN'));app[a88_0x1df3('0x1b')](lusca_1[a88_0x1df3('0x4')][a88_0x1df3('0x1f')](!![]));app[a88_0x1df3('0x1b')]((_0x5f3eec,_0x26444a,_0x1da4a5)=>{_0x26444a[a88_0x1df3('0x20')][a88_0x1df3('0x21')]=_0x5f3eec[a88_0x1df3('0x21')];_0x1da4a5();});app[a88_0x1df3('0x1b')]((_0x4b9fc9,_0x3b90d5,_0x2d72ba)=>{_0x2d72ba();});app[a88_0x1df3('0x1b')](express_1[a88_0x1df3('0x4')][a88_0x1df3('0x22')](path_1[a88_0x1df3('0x4')][a88_0x1df3('0x19')](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a88_0x1df3('0x23')));const models_1=__importDefault(require(a88_0x1df3('0x24')));const routes_1=__importDefault(require(a88_0x1df3('0x25')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const controllers_1=__importDefault(require(a88_0x1df3('0x26')));const models=new models_1[(a88_0x1df3('0x4'))](sequelize_1[a88_0x1df3('0x4')]);const controllers=new controllers_1['default'](models);sequelize_utils_1[a88_0x1df3('0x4')]['models']=models;sequelize_utils_1[a88_0x1df3('0x4')][a88_0x1df3('0x27')]=controllers;routes_1[a88_0x1df3('0x4')](app,passport_1[a88_0x1df3('0x4')],models,controllers);require(a88_0x1df3('0x28'))(passport_1[a88_0x1df3('0x4')],models[a88_0x1df3('0x29')]);sequelize_utils_1[a88_0x1df3('0x4')][a88_0x1df3('0x2a')]=sequelize_1[a88_0x1df3('0x4')];apiController[a88_0x1df3('0x2b')](sequelize_1[a88_0x1df3('0x4')]);const options={'exclude':['id',a88_0x1df3('0x2c'),a88_0x1df3('0x2d'),a88_0x1df3('0x2e'),a88_0x1df3('0x2f'),'updated_at',a88_0x1df3('0x30')],'userModel':a88_0x1df3('0x31'),'revisionAttribute':a88_0x1df3('0x32'),'revisionModel':a88_0x1df3('0x32'),'revisionChangeModel':a88_0x1df3('0x33'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':'document_id','revisionId':a88_0x1df3('0x34')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a88_0x1df3('0x35'),'continuationKey':a88_0x1df3('0x36')};const PaperTrail=require(a88_0x1df3('0x37'))['init'](sequelize_1[a88_0x1df3('0x4')],options);PaperTrail[a88_0x1df3('0x38')]({});app[a88_0x1df3('0x39')](a88_0x1df3('0x3a'),apiController['syncFtp']);app['get'](a88_0x1df3('0x3b'),apiController[a88_0x1df3('0x3c')]);app[a88_0x1df3('0x39')]('/api/processFtp',apiController['processFtp']);app[a88_0x1df3('0x39')](a88_0x1df3('0x3d'),apiController[a88_0x1df3('0x3e')]);app[a88_0x1df3('0x39')](a88_0x1df3('0x3f'),apiController['getPassCountingByDay']);app[a88_0x1df3('0x39')](a88_0x1df3('0x40'),apiController[a88_0x1df3('0x41')]);exports[a88_0x1df3('0x4')]=app;