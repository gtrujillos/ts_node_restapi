var a176_0x4603=['setSequelize','get','/api/syncftp','/api/downloadFtp','downloadFtp','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','enable','trust\x20proxy','__importDefault','__esModule','__importStar','hasOwnProperty','call','default','defineProperty','express','compression','body-parser','./util/logger','lusca','dotenv','path','express-validator','cors','express-rate-limit','express-slow-down','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','./controllers/api','set','port','env','PORT','views','join','../views','view\x20engine','pug','use','json','10mb','DEV_MODE','options','initialize','session','xframe','SAMEORIGIN','xssProtection','locals','user','static','public','./app/models','./app/routes','./config/passport','usersModel'];(function(_0x417957,_0xe42fb0){var _0x2cd791=function(_0x205338){while(--_0x205338){_0x417957['push'](_0x417957['shift']());}};_0x2cd791(++_0xe42fb0);}(a176_0x4603,0x17e));var a176_0x2f2e=function(_0x2699a9,_0x501e82){_0x2699a9=_0x2699a9-0x0;var _0x5b6c40=a176_0x4603[_0x2699a9];return _0x5b6c40;};'use strict';var __importDefault=this&&this[a176_0x2f2e('0x0')]||function(_0x2fc558){return _0x2fc558&&_0x2fc558[a176_0x2f2e('0x1')]?_0x2fc558:{'default':_0x2fc558};};var __importStar=this&&this[a176_0x2f2e('0x2')]||function(_0x23a73d){if(_0x23a73d&&_0x23a73d[a176_0x2f2e('0x1')])return _0x23a73d;var _0x3e1743={};if(_0x23a73d!=null)for(var _0x5ea941 in _0x23a73d)if(Object[a176_0x2f2e('0x3')][a176_0x2f2e('0x4')](_0x23a73d,_0x5ea941))_0x3e1743[_0x5ea941]=_0x23a73d[_0x5ea941];_0x3e1743[a176_0x2f2e('0x5')]=_0x23a73d;return _0x3e1743;};Object[a176_0x2f2e('0x6')](exports,a176_0x2f2e('0x1'),{'value':!![]});const express_1=__importDefault(require(a176_0x2f2e('0x7')));const compression_1=__importDefault(require(a176_0x2f2e('0x8')));const body_parser_1=__importDefault(require(a176_0x2f2e('0x9')));const logger_1=__importDefault(require(a176_0x2f2e('0xa')));const lusca_1=__importDefault(require(a176_0x2f2e('0xb')));const dotenv_1=__importDefault(require(a176_0x2f2e('0xc')));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require(a176_0x2f2e('0xd')));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require(a176_0x2f2e('0xe')));const fs_1=__importDefault(require('fs'));const cors=require(a176_0x2f2e('0xf'));const rateLimit=require(a176_0x2f2e('0x10'));const slowDown=require(a176_0x2f2e('0x11'));if(fs_1[a176_0x2f2e('0x5')]['existsSync'](a176_0x2f2e('0x12'))){logger_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x13')](a176_0x2f2e('0x14'));dotenv_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x15')]({'path':a176_0x2f2e('0x12')});}else{logger_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x13')](a176_0x2f2e('0x16'));dotenv_1['default'][a176_0x2f2e('0x15')]({'path':a176_0x2f2e('0x17')});}const apiController=__importStar(require(a176_0x2f2e('0x18')));const app=express_1['default']();app[a176_0x2f2e('0x19')](a176_0x2f2e('0x1a'),process[a176_0x2f2e('0x1b')][a176_0x2f2e('0x1c')]||0xbb8);app[a176_0x2f2e('0x19')](a176_0x2f2e('0x1d'),path_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x1e')](__dirname,a176_0x2f2e('0x1f')));app['set'](a176_0x2f2e('0x20'),a176_0x2f2e('0x21'));app[a176_0x2f2e('0x22')](compression_1[a176_0x2f2e('0x5')]());app[a176_0x2f2e('0x22')](body_parser_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x23')]({'limit':a176_0x2f2e('0x24')}));app['use'](body_parser_1[a176_0x2f2e('0x5')]['urlencoded']({'limit':a176_0x2f2e('0x24'),'extended':!![]}));if(process[a176_0x2f2e('0x1b')][a176_0x2f2e('0x25')]){app[a176_0x2f2e('0x22')](cors());app['use'](cors({'origin':!![]}));app[a176_0x2f2e('0x26')]('*',cors());}else{app[a176_0x2f2e('0x22')](cors());}app[a176_0x2f2e('0x22')](express_validator_1[a176_0x2f2e('0x5')]());app[a176_0x2f2e('0x22')](passport_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x27')]());app[a176_0x2f2e('0x22')](passport_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x28')]());app[a176_0x2f2e('0x22')](express_flash_1[a176_0x2f2e('0x5')]());app['use'](lusca_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x29')](a176_0x2f2e('0x2a')));app[a176_0x2f2e('0x22')](lusca_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x2b')](!![]));app[a176_0x2f2e('0x22')]((_0x4376f7,_0xf67cde,_0x38190c)=>{_0xf67cde[a176_0x2f2e('0x2c')][a176_0x2f2e('0x2d')]=_0x4376f7[a176_0x2f2e('0x2d')];_0x38190c();});app[a176_0x2f2e('0x22')]((_0xe490f8,_0x35f9da,_0x141ef4)=>{_0x141ef4();});app[a176_0x2f2e('0x22')](express_1[a176_0x2f2e('0x5')][a176_0x2f2e('0x2e')](path_1['default'][a176_0x2f2e('0x1e')](__dirname,a176_0x2f2e('0x2f')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require('./config/sequelize'));const models_1=__importDefault(require(a176_0x2f2e('0x30')));const routes_1=__importDefault(require(a176_0x2f2e('0x31')));const controllers_1=__importDefault(require('./app/controllers'));const models=new models_1[(a176_0x2f2e('0x5'))](sequelize_1[a176_0x2f2e('0x5')]);const controllers=new controllers_1[(a176_0x2f2e('0x5'))](models);routes_1[a176_0x2f2e('0x5')](app,passport_1[a176_0x2f2e('0x5')],models,controllers);require(a176_0x2f2e('0x32'))(passport_1[a176_0x2f2e('0x5')],models[a176_0x2f2e('0x33')]);apiController[a176_0x2f2e('0x34')](sequelize_1[a176_0x2f2e('0x5')]);app[a176_0x2f2e('0x35')](a176_0x2f2e('0x36'),apiController['syncFtp']);app[a176_0x2f2e('0x35')](a176_0x2f2e('0x37'),apiController[a176_0x2f2e('0x38')]);app[a176_0x2f2e('0x35')]('/api/processFtp',apiController['processFtp']);app[a176_0x2f2e('0x35')]('/api/getPassCounting/:direction',apiController['getPassCounting']);app[a176_0x2f2e('0x35')]('/api/getPassCountingByDay/:direction',apiController[a176_0x2f2e('0x39')]);app['get'](a176_0x2f2e('0x3a'),apiController[a176_0x2f2e('0x3b')]);const limiter=rateLimit({'windowMs':0x2*0x3c*0x3e8,'max':0x64});app['use'](limiter);app[a176_0x2f2e('0x3c')](a176_0x2f2e('0x3d'));const speedLimiter=slowDown({'windowMs':0x2*0x3c*0x3e8,'delayAfter':0x64,'delayMs':0x1f4});app[a176_0x2f2e('0x22')](speedLimiter);exports[a176_0x2f2e('0x5')]=app;