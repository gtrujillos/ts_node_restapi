var a194_0x2a3b=['existsSync','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','set','port','views','join','../views','view\x20engine','pug','use','json','10mb','urlencoded','initialize','session','xframe','xssProtection','locals','user','static','public','./app/models','./app/routes','./app/controllers','models','controllers','usersModel','createdAt','updatedAt','deletedAt','created_at','deleted_at','users','revision','revision_change','document_id','revision_id','current_user_request','user_id','sequelize-paper-trail','init','defineModels','get','/api/syncftp','syncFtp','/api/downloadFtp','downloadFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','__importStar','hasOwnProperty','call','defineProperty','express','body-parser','./util/logger','dotenv','express-flash','passport','express-validator','default'];(function(_0x4b4683,_0x258b7f){var _0x413dbf=function(_0x158ceb){while(--_0x158ceb){_0x4b4683['push'](_0x4b4683['shift']());}};_0x413dbf(++_0x258b7f);}(a194_0x2a3b,0x190));var a194_0x1393=function(_0x48ddeb,_0x4f02d0){_0x48ddeb=_0x48ddeb-0x0;var _0x3a87ca=a194_0x2a3b[_0x48ddeb];return _0x3a87ca;};'use strict';var __importDefault=this&&this[a194_0x1393('0x0')]||function(_0x9b51bb){return _0x9b51bb&&_0x9b51bb[a194_0x1393('0x1')]?_0x9b51bb:{'default':_0x9b51bb};};var __importStar=this&&this[a194_0x1393('0x2')]||function(_0xe15591){if(_0xe15591&&_0xe15591[a194_0x1393('0x1')])return _0xe15591;var _0x23b745={};if(_0xe15591!=null)for(var _0x1d8bd9 in _0xe15591)if(Object[a194_0x1393('0x3')][a194_0x1393('0x4')](_0xe15591,_0x1d8bd9))_0x23b745[_0x1d8bd9]=_0xe15591[_0x1d8bd9];_0x23b745['default']=_0xe15591;return _0x23b745;};Object[a194_0x1393('0x5')](exports,a194_0x1393('0x1'),{'value':!![]});const express_1=__importDefault(require(a194_0x1393('0x6')));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a194_0x1393('0x7')));const logger_1=__importDefault(require(a194_0x1393('0x8')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require(a194_0x1393('0x9')));const express_flash_1=__importDefault(require(a194_0x1393('0xa')));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require(a194_0x1393('0xb')));const express_validator_1=__importDefault(require(a194_0x1393('0xc')));const fs_1=__importDefault(require('fs'));const cors=require('cors');if(fs_1[a194_0x1393('0xd')][a194_0x1393('0xe')]('.env')){logger_1[a194_0x1393('0xd')][a194_0x1393('0xf')](a194_0x1393('0x10'));dotenv_1[a194_0x1393('0xd')][a194_0x1393('0x11')]({'path':'.env'});}else{logger_1[a194_0x1393('0xd')][a194_0x1393('0xf')](a194_0x1393('0x12'));dotenv_1['default'][a194_0x1393('0x11')]({'path':'.env.example'});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a194_0x1393('0xd')]();app[a194_0x1393('0x13')](a194_0x1393('0x14'),process['env']['PORT']||0xbb8);app['set'](a194_0x1393('0x15'),path_1[a194_0x1393('0xd')][a194_0x1393('0x16')](__dirname,a194_0x1393('0x17')));app[a194_0x1393('0x13')](a194_0x1393('0x18'),a194_0x1393('0x19'));app['use'](compression_1[a194_0x1393('0xd')]());app[a194_0x1393('0x1a')](body_parser_1[a194_0x1393('0xd')][a194_0x1393('0x1b')]({'limit':a194_0x1393('0x1c')}));app[a194_0x1393('0x1a')](body_parser_1[a194_0x1393('0xd')][a194_0x1393('0x1d')]({'limit':'10mb','extended':!![]}));app[a194_0x1393('0x1a')](cors());app['use'](express_validator_1[a194_0x1393('0xd')]());app[a194_0x1393('0x1a')](passport_1[a194_0x1393('0xd')][a194_0x1393('0x1e')]());app[a194_0x1393('0x1a')](passport_1[a194_0x1393('0xd')][a194_0x1393('0x1f')]());app[a194_0x1393('0x1a')](express_flash_1['default']());app[a194_0x1393('0x1a')](lusca_1[a194_0x1393('0xd')][a194_0x1393('0x20')]('SAMEORIGIN'));app[a194_0x1393('0x1a')](lusca_1['default'][a194_0x1393('0x21')](!![]));app[a194_0x1393('0x1a')]((_0xc368a0,_0x443941,_0x5797fc)=>{_0x443941[a194_0x1393('0x22')][a194_0x1393('0x23')]=_0xc368a0[a194_0x1393('0x23')];_0x5797fc();});app[a194_0x1393('0x1a')]((_0x3efad3,_0x49e887,_0x127672)=>{_0x127672();});app[a194_0x1393('0x1a')](express_1['default'][a194_0x1393('0x24')](path_1[a194_0x1393('0xd')][a194_0x1393('0x16')](__dirname,a194_0x1393('0x25')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require('./config/sequelize'));const models_1=__importDefault(require(a194_0x1393('0x26')));const routes_1=__importDefault(require(a194_0x1393('0x27')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const controllers_1=__importDefault(require(a194_0x1393('0x28')));const models=new models_1[(a194_0x1393('0xd'))](sequelize_1['default']);const controllers=new controllers_1[(a194_0x1393('0xd'))](models);sequelize_utils_1[a194_0x1393('0xd')][a194_0x1393('0x29')]=models;sequelize_utils_1[a194_0x1393('0xd')][a194_0x1393('0x2a')]=controllers;routes_1[a194_0x1393('0xd')](app,passport_1[a194_0x1393('0xd')],models,controllers);require('./config/passport')(passport_1[a194_0x1393('0xd')],models[a194_0x1393('0x2b')]);sequelize_utils_1['default']['instance']=sequelize_1[a194_0x1393('0xd')];apiController['setSequelize'](sequelize_1[a194_0x1393('0xd')]);const options={'exclude':['id',a194_0x1393('0x2c'),a194_0x1393('0x2d'),a194_0x1393('0x2e'),a194_0x1393('0x2f'),'updated_at',a194_0x1393('0x30')],'userModel':a194_0x1393('0x31'),'revisionAttribute':a194_0x1393('0x32'),'revisionModel':a194_0x1393('0x32'),'revisionChangeModel':a194_0x1393('0x33'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a194_0x1393('0x34'),'revisionId':a194_0x1393('0x35')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a194_0x1393('0x36'),'continuationKey':a194_0x1393('0x37')};const PaperTrail=require(a194_0x1393('0x38'))[a194_0x1393('0x39')](sequelize_1[a194_0x1393('0xd')],options);PaperTrail[a194_0x1393('0x3a')]({});app[a194_0x1393('0x3b')](a194_0x1393('0x3c'),apiController[a194_0x1393('0x3d')]);app[a194_0x1393('0x3b')](a194_0x1393('0x3e'),apiController[a194_0x1393('0x3f')]);app[a194_0x1393('0x3b')]('/api/processFtp',apiController[a194_0x1393('0x40')]);app['get'](a194_0x1393('0x41'),apiController[a194_0x1393('0x42')]);app[a194_0x1393('0x3b')]('/api/getPassCountingByDay/:direction',apiController['getPassCountingByDay']);app['get'](a194_0x1393('0x43'),apiController[a194_0x1393('0x44')]);exports[a194_0x1393('0xd')]=app;