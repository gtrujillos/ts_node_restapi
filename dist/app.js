var a194_0x369d=['PORT','join','pug','use','urlencoded','options','initialize','session','SAMEORIGIN','xssProtection','locals','user','static','public','./config/sequelize','./app/models','./app/routes','./infrastructure/sequelize-utils','./app/controllers','controllers','./config/passport','usersModel','instance','setSequelize','createdAt','updatedAt','deletedAt','created_at','users','revision','revision_change','user_id','sequelize-paper-trail','init','defineModels','get','/api/syncftp','/api/downloadFtp','downloadFtp','/api/processFtp','processFtp','getPassCounting','/api/getPassCountingByDay/:direction','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','hasOwnProperty','call','defineProperty','body-parser','./util/logger','express-validator','cors','existsSync','.env','default','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','set'];(function(_0x43db30,_0x5a7878){var _0x34eae4=function(_0x3b7fd5){while(--_0x3b7fd5){_0x43db30['push'](_0x43db30['shift']());}};_0x34eae4(++_0x5a7878);}(a194_0x369d,0x121));var a194_0x26ba=function(_0xa85671,_0x2b81be){_0xa85671=_0xa85671-0x0;var _0x9ae6ae=a194_0x369d[_0xa85671];return _0x9ae6ae;};'use strict';var __importDefault=this&&this[a194_0x26ba('0x0')]||function(_0x187831){return _0x187831&&_0x187831['__esModule']?_0x187831:{'default':_0x187831};};var __importStar=this&&this['__importStar']||function(_0x1d6ed3){if(_0x1d6ed3&&_0x1d6ed3[a194_0x26ba('0x1')])return _0x1d6ed3;var _0x97de1b={};if(_0x1d6ed3!=null)for(var _0x4454f5 in _0x1d6ed3)if(Object[a194_0x26ba('0x2')][a194_0x26ba('0x3')](_0x1d6ed3,_0x4454f5))_0x97de1b[_0x4454f5]=_0x1d6ed3[_0x4454f5];_0x97de1b['default']=_0x1d6ed3;return _0x97de1b;};Object[a194_0x26ba('0x4')](exports,a194_0x26ba('0x1'),{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a194_0x26ba('0x5')));const logger_1=__importDefault(require(a194_0x26ba('0x6')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require('dotenv'));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require(a194_0x26ba('0x7')));const fs_1=__importDefault(require('fs'));const cors=require(a194_0x26ba('0x8'));if(fs_1['default'][a194_0x26ba('0x9')](a194_0x26ba('0xa'))){logger_1[a194_0x26ba('0xb')][a194_0x26ba('0xc')](a194_0x26ba('0xd'));dotenv_1[a194_0x26ba('0xb')]['config']({'path':a194_0x26ba('0xa')});}else{logger_1[a194_0x26ba('0xb')]['debug']('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a194_0x26ba('0xb')]['config']({'path':a194_0x26ba('0xe')});}const apiController=__importStar(require('./controllers/api'));const app=express_1['default']();app[a194_0x26ba('0xf')]('port',process['env'][a194_0x26ba('0x10')]||0xbb8);app[a194_0x26ba('0xf')]('views',path_1[a194_0x26ba('0xb')][a194_0x26ba('0x11')](__dirname,'../views'));app['set']('view\x20engine',a194_0x26ba('0x12'));app[a194_0x26ba('0x13')](compression_1[a194_0x26ba('0xb')]());app[a194_0x26ba('0x13')](body_parser_1['default']['json']({'limit':'10mb'}));app[a194_0x26ba('0x13')](body_parser_1[a194_0x26ba('0xb')][a194_0x26ba('0x14')]({'limit':'10mb','extended':!![]}));app['use'](cors());app[a194_0x26ba('0x15')]('*',cors());app[a194_0x26ba('0x13')](express_validator_1[a194_0x26ba('0xb')]());app['use'](passport_1['default'][a194_0x26ba('0x16')]());app['use'](passport_1[a194_0x26ba('0xb')][a194_0x26ba('0x17')]());app[a194_0x26ba('0x13')](express_flash_1['default']());app[a194_0x26ba('0x13')](lusca_1[a194_0x26ba('0xb')]['xframe'](a194_0x26ba('0x18')));app[a194_0x26ba('0x13')](lusca_1[a194_0x26ba('0xb')][a194_0x26ba('0x19')](!![]));app[a194_0x26ba('0x13')]((_0x1cccb3,_0x16dc6f,_0x96d616)=>{_0x16dc6f[a194_0x26ba('0x1a')]['user']=_0x1cccb3[a194_0x26ba('0x1b')];_0x96d616();});app[a194_0x26ba('0x13')]((_0x2f1b7f,_0x45037d,_0x4ea835)=>{_0x4ea835();});app['use'](express_1[a194_0x26ba('0xb')][a194_0x26ba('0x1c')](path_1[a194_0x26ba('0xb')][a194_0x26ba('0x11')](__dirname,a194_0x26ba('0x1d')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a194_0x26ba('0x1e')));const models_1=__importDefault(require(a194_0x26ba('0x1f')));const routes_1=__importDefault(require(a194_0x26ba('0x20')));const sequelize_utils_1=__importDefault(require(a194_0x26ba('0x21')));const controllers_1=__importDefault(require(a194_0x26ba('0x22')));const models=new models_1['default'](sequelize_1[a194_0x26ba('0xb')]);const controllers=new controllers_1[(a194_0x26ba('0xb'))](models);sequelize_utils_1[a194_0x26ba('0xb')]['models']=models;sequelize_utils_1[a194_0x26ba('0xb')][a194_0x26ba('0x23')]=controllers;routes_1[a194_0x26ba('0xb')](app,passport_1['default'],models,controllers);require(a194_0x26ba('0x24'))(passport_1['default'],models[a194_0x26ba('0x25')]);sequelize_utils_1[a194_0x26ba('0xb')][a194_0x26ba('0x26')]=sequelize_1[a194_0x26ba('0xb')];apiController[a194_0x26ba('0x27')](sequelize_1[a194_0x26ba('0xb')]);const options={'exclude':['id',a194_0x26ba('0x28'),a194_0x26ba('0x29'),a194_0x26ba('0x2a'),a194_0x26ba('0x2b'),'updated_at','deleted_at'],'userModel':a194_0x26ba('0x2c'),'revisionAttribute':a194_0x26ba('0x2d'),'revisionModel':a194_0x26ba('0x2d'),'revisionChangeModel':a194_0x26ba('0x2e'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':'document_id','revisionId':'revision_id'},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':'current_user_request','continuationKey':a194_0x26ba('0x2f')};const PaperTrail=require(a194_0x26ba('0x30'))[a194_0x26ba('0x31')](sequelize_1['default'],options);PaperTrail[a194_0x26ba('0x32')]({});app[a194_0x26ba('0x33')](a194_0x26ba('0x34'),apiController['syncFtp']);app[a194_0x26ba('0x33')](a194_0x26ba('0x35'),apiController[a194_0x26ba('0x36')]);app['get'](a194_0x26ba('0x37'),apiController[a194_0x26ba('0x38')]);app[a194_0x26ba('0x33')]('/api/getPassCounting/:direction',apiController[a194_0x26ba('0x39')]);app[a194_0x26ba('0x33')](a194_0x26ba('0x3a'),apiController['getPassCountingByDay']);app[a194_0x26ba('0x33')](a194_0x26ba('0x3b'),apiController[a194_0x26ba('0x3c')]);exports[a194_0x26ba('0xb')]=app;