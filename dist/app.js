var a88_0x4708=['port','PORT','views','join','view\x20engine','pug','use','json','urlencoded','initialize','session','xframe','SAMEORIGIN','xssProtection','locals','user','static','./config/sequelize','./app/models','./app/routes','./infrastructure/sequelize-utils','./app/controllers','models','controllers','instance','setSequelize','createdAt','deletedAt','created_at','updated_at','deleted_at','users','revision','revision_change','document_id','revision_id','current_user_request','user_id','sequelize-paper-trail','init','get','syncFtp','/api/downloadFtp','processFtp','/api/getPassCounting/:direction','getPassCountingByDay','__importDefault','__importStar','__esModule','hasOwnProperty','default','defineProperty','compression','body-parser','lusca','dotenv','path','passport','express-validator','cors','existsSync','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','./controllers/api','set'];(function(_0x49942f,_0x14f866){var _0x162867=function(_0x5c9718){while(--_0x5c9718){_0x49942f['push'](_0x49942f['shift']());}};_0x162867(++_0x14f866);}(a88_0x4708,0xb2));var a88_0x7ad8=function(_0x29c1c9,_0x4805db){_0x29c1c9=_0x29c1c9-0x0;var _0x2f9c39=a88_0x4708[_0x29c1c9];return _0x2f9c39;};'use strict';var __importDefault=this&&this[a88_0x7ad8('0x0')]||function(_0x4f4848){return _0x4f4848&&_0x4f4848['__esModule']?_0x4f4848:{'default':_0x4f4848};};var __importStar=this&&this[a88_0x7ad8('0x1')]||function(_0x5bf97b){if(_0x5bf97b&&_0x5bf97b[a88_0x7ad8('0x2')])return _0x5bf97b;var _0x5b31a5={};if(_0x5bf97b!=null)for(var _0x32c3e2 in _0x5bf97b)if(Object[a88_0x7ad8('0x3')]['call'](_0x5bf97b,_0x32c3e2))_0x5b31a5[_0x32c3e2]=_0x5bf97b[_0x32c3e2];_0x5b31a5[a88_0x7ad8('0x4')]=_0x5bf97b;return _0x5b31a5;};Object[a88_0x7ad8('0x5')](exports,a88_0x7ad8('0x2'),{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require(a88_0x7ad8('0x6')));const body_parser_1=__importDefault(require(a88_0x7ad8('0x7')));const logger_1=__importDefault(require('./util/logger'));const lusca_1=__importDefault(require(a88_0x7ad8('0x8')));const dotenv_1=__importDefault(require(a88_0x7ad8('0x9')));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require(a88_0x7ad8('0xa')));const passport_1=__importDefault(require(a88_0x7ad8('0xb')));const express_validator_1=__importDefault(require(a88_0x7ad8('0xc')));const fs_1=__importDefault(require('fs'));const cors=require(a88_0x7ad8('0xd'));if(fs_1[a88_0x7ad8('0x4')][a88_0x7ad8('0xe')]('.env')){logger_1[a88_0x7ad8('0x4')][a88_0x7ad8('0xf')](a88_0x7ad8('0x10'));dotenv_1['default'][a88_0x7ad8('0x11')]({'path':'.env'});}else{logger_1[a88_0x7ad8('0x4')][a88_0x7ad8('0xf')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x11')]({'path':'.env.example'});}const apiController=__importStar(require(a88_0x7ad8('0x12')));const app=express_1[a88_0x7ad8('0x4')]();app[a88_0x7ad8('0x13')](a88_0x7ad8('0x14'),process['env'][a88_0x7ad8('0x15')]||0xbb8);app['set'](a88_0x7ad8('0x16'),path_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x17')](__dirname,'../views'));app[a88_0x7ad8('0x13')](a88_0x7ad8('0x18'),a88_0x7ad8('0x19'));app[a88_0x7ad8('0x1a')](compression_1[a88_0x7ad8('0x4')]());app[a88_0x7ad8('0x1a')](body_parser_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x1b')]());app[a88_0x7ad8('0x1a')](cors());app[a88_0x7ad8('0x1a')](body_parser_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x1c')]({'extended':!![]}));app[a88_0x7ad8('0x1a')](express_validator_1[a88_0x7ad8('0x4')]());app['use'](passport_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x1d')]());app['use'](passport_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x1e')]());app[a88_0x7ad8('0x1a')](express_flash_1[a88_0x7ad8('0x4')]());app[a88_0x7ad8('0x1a')](lusca_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x1f')](a88_0x7ad8('0x20')));app[a88_0x7ad8('0x1a')](lusca_1['default'][a88_0x7ad8('0x21')](!![]));app[a88_0x7ad8('0x1a')]((_0x135560,_0x278af7,_0x4aa72c)=>{_0x278af7[a88_0x7ad8('0x22')]['user']=_0x135560[a88_0x7ad8('0x23')];_0x4aa72c();});app[a88_0x7ad8('0x1a')]((_0x1277cb,_0x4597a9,_0x54fde5)=>{_0x54fde5();});app[a88_0x7ad8('0x1a')](express_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x24')](path_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x17')](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a88_0x7ad8('0x25')));const models_1=__importDefault(require(a88_0x7ad8('0x26')));const routes_1=__importDefault(require(a88_0x7ad8('0x27')));const sequelize_utils_1=__importDefault(require(a88_0x7ad8('0x28')));const controllers_1=__importDefault(require(a88_0x7ad8('0x29')));const models=new models_1[(a88_0x7ad8('0x4'))](sequelize_1[a88_0x7ad8('0x4')]);const controllers=new controllers_1['default'](models);sequelize_utils_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x2a')]=models;sequelize_utils_1['default'][a88_0x7ad8('0x2b')]=controllers;routes_1[a88_0x7ad8('0x4')](app,passport_1[a88_0x7ad8('0x4')],models,controllers);require('./config/passport')(passport_1['default'],models['usersModel']);sequelize_utils_1[a88_0x7ad8('0x4')][a88_0x7ad8('0x2c')]=sequelize_1['default'];apiController[a88_0x7ad8('0x2d')](sequelize_1[a88_0x7ad8('0x4')]);const options={'exclude':['id',a88_0x7ad8('0x2e'),'updatedAt',a88_0x7ad8('0x2f'),a88_0x7ad8('0x30'),a88_0x7ad8('0x31'),a88_0x7ad8('0x32')],'userModel':a88_0x7ad8('0x33'),'revisionAttribute':'revision','revisionModel':a88_0x7ad8('0x34'),'revisionChangeModel':a88_0x7ad8('0x35'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a88_0x7ad8('0x36'),'revisionId':a88_0x7ad8('0x37')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a88_0x7ad8('0x38'),'continuationKey':a88_0x7ad8('0x39')};const PaperTrail=require(a88_0x7ad8('0x3a'))[a88_0x7ad8('0x3b')](sequelize_1[a88_0x7ad8('0x4')],options);PaperTrail['defineModels']({});app[a88_0x7ad8('0x3c')]('/api/syncftp',apiController[a88_0x7ad8('0x3d')]);app[a88_0x7ad8('0x3c')](a88_0x7ad8('0x3e'),apiController['downloadFtp']);app[a88_0x7ad8('0x3c')]('/api/processFtp',apiController[a88_0x7ad8('0x3f')]);app[a88_0x7ad8('0x3c')](a88_0x7ad8('0x40'),apiController['getPassCounting']);app[a88_0x7ad8('0x3c')]('/api/getPassCountingByDay/:direction',apiController[a88_0x7ad8('0x41')]);app[a88_0x7ad8('0x3c')]('/api/getPassCountingByHour/:direction',apiController['getPassCountingByHour']);exports[a88_0x7ad8('0x4')]=app;