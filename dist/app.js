var a135_0x264c=['processFtp','/api/getPassCounting/:direction','getPassCounting','getPassCountingByDay','/api/getPassCountingByHour/:direction','__esModule','__importStar','call','default','defineProperty','compression','body-parser','./util/logger','lusca','dotenv','express-flash','path','passport','express-validator','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env.example','./controllers/api','set','port','env','PORT','views','join','../views','view\x20engine','pug','use','options','urlencoded','initialize','session','SAMEORIGIN','xssProtection','locals','user','static','public','./config/sequelize','./app/routes','./infrastructure/sequelize-utils','./app/controllers','./config/passport','usersModel','instance','setSequelize','createdAt','updatedAt','deletedAt','created_at','updated_at','users','revision','revision_change','document_id','revision_id','sequelize-paper-trail','init','get','/api/syncftp','syncFtp','/api/downloadFtp','downloadFtp','/api/processFtp'];(function(_0x3eaca3,_0x130bf4){var _0x38efec=function(_0x2543ab){while(--_0x2543ab){_0x3eaca3['push'](_0x3eaca3['shift']());}};_0x38efec(++_0x130bf4);}(a135_0x264c,0xda));var a135_0x1c9d=function(_0x3dfd80,_0x228c4d){_0x3dfd80=_0x3dfd80-0x0;var _0x5da649=a135_0x264c[_0x3dfd80];return _0x5da649;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4c9c7d){return _0x4c9c7d&&_0x4c9c7d[a135_0x1c9d('0x0')]?_0x4c9c7d:{'default':_0x4c9c7d};};var __importStar=this&&this[a135_0x1c9d('0x1')]||function(_0x172c6b){if(_0x172c6b&&_0x172c6b['__esModule'])return _0x172c6b;var _0x14e3bc={};if(_0x172c6b!=null)for(var _0x1da0d4 in _0x172c6b)if(Object['hasOwnProperty'][a135_0x1c9d('0x2')](_0x172c6b,_0x1da0d4))_0x14e3bc[_0x1da0d4]=_0x172c6b[_0x1da0d4];_0x14e3bc[a135_0x1c9d('0x3')]=_0x172c6b;return _0x14e3bc;};Object[a135_0x1c9d('0x4')](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require(a135_0x1c9d('0x5')));const body_parser_1=__importDefault(require(a135_0x1c9d('0x6')));const logger_1=__importDefault(require(a135_0x1c9d('0x7')));const lusca_1=__importDefault(require(a135_0x1c9d('0x8')));const dotenv_1=__importDefault(require(a135_0x1c9d('0x9')));const express_flash_1=__importDefault(require(a135_0x1c9d('0xa')));const path_1=__importDefault(require(a135_0x1c9d('0xb')));const passport_1=__importDefault(require(a135_0x1c9d('0xc')));const express_validator_1=__importDefault(require(a135_0x1c9d('0xd')));const fs_1=__importDefault(require('fs'));const cors=require('cors');if(fs_1[a135_0x1c9d('0x3')]['existsSync'](a135_0x1c9d('0xe'))){logger_1[a135_0x1c9d('0x3')][a135_0x1c9d('0xf')](a135_0x1c9d('0x10'));dotenv_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x11')]({'path':'.env'});}else{logger_1[a135_0x1c9d('0x3')][a135_0x1c9d('0xf')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x11')]({'path':a135_0x1c9d('0x12')});}const apiController=__importStar(require(a135_0x1c9d('0x13')));const app=express_1['default']();app[a135_0x1c9d('0x14')](a135_0x1c9d('0x15'),process[a135_0x1c9d('0x16')][a135_0x1c9d('0x17')]||0xbb8);app[a135_0x1c9d('0x14')](a135_0x1c9d('0x18'),path_1['default'][a135_0x1c9d('0x19')](__dirname,a135_0x1c9d('0x1a')));app[a135_0x1c9d('0x14')](a135_0x1c9d('0x1b'),a135_0x1c9d('0x1c'));app[a135_0x1c9d('0x1d')](compression_1[a135_0x1c9d('0x3')]());app[a135_0x1c9d('0x1d')](body_parser_1[a135_0x1c9d('0x3')]['json']());app[a135_0x1c9d('0x1d')](cors());app[a135_0x1c9d('0x1d')](cors({'origin':!![]}));app[a135_0x1c9d('0x1e')]('*',cors());app[a135_0x1c9d('0x1d')](body_parser_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x1f')]({'extended':!![]}));app[a135_0x1c9d('0x1d')](express_validator_1[a135_0x1c9d('0x3')]());app[a135_0x1c9d('0x1d')](passport_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x20')]());app['use'](passport_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x21')]());app[a135_0x1c9d('0x1d')](express_flash_1[a135_0x1c9d('0x3')]());app[a135_0x1c9d('0x1d')](lusca_1[a135_0x1c9d('0x3')]['xframe'](a135_0x1c9d('0x22')));app[a135_0x1c9d('0x1d')](lusca_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x23')](!![]));app[a135_0x1c9d('0x1d')]((_0x224b54,_0x328f21,_0x40fd98)=>{_0x328f21[a135_0x1c9d('0x24')][a135_0x1c9d('0x25')]=_0x224b54['user'];_0x40fd98();});app['use']((_0x14110c,_0x459e2e,_0xaf87e7)=>{_0xaf87e7();});app[a135_0x1c9d('0x1d')](express_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x26')](path_1['default']['join'](__dirname,a135_0x1c9d('0x27')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a135_0x1c9d('0x28')));const models_1=__importDefault(require('./app/models'));const routes_1=__importDefault(require(a135_0x1c9d('0x29')));const sequelize_utils_1=__importDefault(require(a135_0x1c9d('0x2a')));const controllers_1=__importDefault(require(a135_0x1c9d('0x2b')));const models=new models_1[(a135_0x1c9d('0x3'))](sequelize_1[a135_0x1c9d('0x3')]);const controllers=new controllers_1[(a135_0x1c9d('0x3'))](models);sequelize_utils_1[a135_0x1c9d('0x3')]['models']=models;sequelize_utils_1[a135_0x1c9d('0x3')]['controllers']=controllers;routes_1[a135_0x1c9d('0x3')](app,passport_1['default'],models,controllers);require(a135_0x1c9d('0x2c'))(passport_1[a135_0x1c9d('0x3')],models[a135_0x1c9d('0x2d')]);sequelize_utils_1[a135_0x1c9d('0x3')][a135_0x1c9d('0x2e')]=sequelize_1['default'];apiController[a135_0x1c9d('0x2f')](sequelize_1['default']);const options={'exclude':['id',a135_0x1c9d('0x30'),a135_0x1c9d('0x31'),a135_0x1c9d('0x32'),a135_0x1c9d('0x33'),a135_0x1c9d('0x34'),'deleted_at'],'userModel':a135_0x1c9d('0x35'),'revisionAttribute':a135_0x1c9d('0x36'),'revisionModel':a135_0x1c9d('0x36'),'revisionChangeModel':a135_0x1c9d('0x37'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a135_0x1c9d('0x38'),'revisionId':a135_0x1c9d('0x39')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':'current_user_request','continuationKey':'user_id'};const PaperTrail=require(a135_0x1c9d('0x3a'))[a135_0x1c9d('0x3b')](sequelize_1[a135_0x1c9d('0x3')],options);PaperTrail['defineModels']({});app[a135_0x1c9d('0x3c')](a135_0x1c9d('0x3d'),apiController[a135_0x1c9d('0x3e')]);app[a135_0x1c9d('0x3c')](a135_0x1c9d('0x3f'),apiController[a135_0x1c9d('0x40')]);app[a135_0x1c9d('0x3c')](a135_0x1c9d('0x41'),apiController[a135_0x1c9d('0x42')]);app[a135_0x1c9d('0x3c')](a135_0x1c9d('0x43'),apiController[a135_0x1c9d('0x44')]);app[a135_0x1c9d('0x3c')]('/api/getPassCountingByDay/:direction',apiController[a135_0x1c9d('0x45')]);app[a135_0x1c9d('0x3c')](a135_0x1c9d('0x46'),apiController['getPassCountingByHour']);exports['default']=app;