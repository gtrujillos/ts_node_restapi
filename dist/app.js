var a194_0x3486=['updated_at','deleted_at','users','revision','revision_change','document_id','revision_id','current_user_request','init','defineModels','/api/syncftp','syncFtp','get','/api/downloadFtp','processFtp','/api/getPassCountingByDay/:direction','getPassCountingByDay','getPassCountingByHour','__importDefault','__esModule','__importStar','hasOwnProperty','call','default','defineProperty','express','compression','body-parser','./util/logger','dotenv','path','passport','express-validator','cors','existsSync','.env','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','debug','.env.example','PORT','set','views','../views','view\x20engine','pug','use','json','urlencoded','10mb','options','initialize','session','xframe','SAMEORIGIN','xssProtection','locals','user','static','join','public','./config/sequelize','./app/routes','./infrastructure/sequelize-utils','models','controllers','./config/passport','usersModel','instance','setSequelize','createdAt','updatedAt','deletedAt','created_at'];(function(_0x3c8334,_0x4e5f27){var _0x293ede=function(_0x56fb4c){while(--_0x56fb4c){_0x3c8334['push'](_0x3c8334['shift']());}};_0x293ede(++_0x4e5f27);}(a194_0x3486,0x184));var a194_0x15d9=function(_0x29b37b,_0x50f9db){_0x29b37b=_0x29b37b-0x0;var _0x1d1bbb=a194_0x3486[_0x29b37b];return _0x1d1bbb;};'use strict';var __importDefault=this&&this[a194_0x15d9('0x0')]||function(_0x204c0f){return _0x204c0f&&_0x204c0f[a194_0x15d9('0x1')]?_0x204c0f:{'default':_0x204c0f};};var __importStar=this&&this[a194_0x15d9('0x2')]||function(_0x510a5a){if(_0x510a5a&&_0x510a5a[a194_0x15d9('0x1')])return _0x510a5a;var _0x42d252={};if(_0x510a5a!=null)for(var _0x3bdb3c in _0x510a5a)if(Object[a194_0x15d9('0x3')][a194_0x15d9('0x4')](_0x510a5a,_0x3bdb3c))_0x42d252[_0x3bdb3c]=_0x510a5a[_0x3bdb3c];_0x42d252[a194_0x15d9('0x5')]=_0x510a5a;return _0x42d252;};Object[a194_0x15d9('0x6')](exports,a194_0x15d9('0x1'),{'value':!![]});const express_1=__importDefault(require(a194_0x15d9('0x7')));const compression_1=__importDefault(require(a194_0x15d9('0x8')));const body_parser_1=__importDefault(require(a194_0x15d9('0x9')));const logger_1=__importDefault(require(a194_0x15d9('0xa')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require(a194_0x15d9('0xb')));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require(a194_0x15d9('0xc')));const passport_1=__importDefault(require(a194_0x15d9('0xd')));const express_validator_1=__importDefault(require(a194_0x15d9('0xe')));const fs_1=__importDefault(require('fs'));const cors=require(a194_0x15d9('0xf'));if(fs_1['default'][a194_0x15d9('0x10')](a194_0x15d9('0x11'))){logger_1[a194_0x15d9('0x5')]['debug'](a194_0x15d9('0x12'));dotenv_1[a194_0x15d9('0x5')][a194_0x15d9('0x13')]({'path':a194_0x15d9('0x11')});}else{logger_1[a194_0x15d9('0x5')][a194_0x15d9('0x14')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a194_0x15d9('0x5')]['config']({'path':a194_0x15d9('0x15')});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a194_0x15d9('0x5')]();app['set']('port',process['env'][a194_0x15d9('0x16')]||0xbb8);app[a194_0x15d9('0x17')](a194_0x15d9('0x18'),path_1['default']['join'](__dirname,a194_0x15d9('0x19')));app[a194_0x15d9('0x17')](a194_0x15d9('0x1a'),a194_0x15d9('0x1b'));app['use'](compression_1['default']());app[a194_0x15d9('0x1c')](body_parser_1['default'][a194_0x15d9('0x1d')]({'limit':'10mb'}));app[a194_0x15d9('0x1c')](body_parser_1[a194_0x15d9('0x5')][a194_0x15d9('0x1e')]({'limit':a194_0x15d9('0x1f'),'extended':!![]}));app[a194_0x15d9('0x20')]('*',cors());app['use'](express_validator_1[a194_0x15d9('0x5')]());app['use'](passport_1['default'][a194_0x15d9('0x21')]());app[a194_0x15d9('0x1c')](passport_1[a194_0x15d9('0x5')][a194_0x15d9('0x22')]());app[a194_0x15d9('0x1c')](express_flash_1[a194_0x15d9('0x5')]());app[a194_0x15d9('0x1c')](lusca_1[a194_0x15d9('0x5')][a194_0x15d9('0x23')](a194_0x15d9('0x24')));app['use'](lusca_1[a194_0x15d9('0x5')][a194_0x15d9('0x25')](!![]));app[a194_0x15d9('0x1c')]((_0x52b5cf,_0x59b98a,_0x2a99c3)=>{_0x59b98a[a194_0x15d9('0x26')][a194_0x15d9('0x27')]=_0x52b5cf['user'];_0x2a99c3();});app[a194_0x15d9('0x1c')]((_0x3cf118,_0x30dc80,_0x50a5d7)=>{_0x50a5d7();});app['use'](express_1[a194_0x15d9('0x5')][a194_0x15d9('0x28')](path_1[a194_0x15d9('0x5')][a194_0x15d9('0x29')](__dirname,a194_0x15d9('0x2a')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a194_0x15d9('0x2b')));const models_1=__importDefault(require('./app/models'));const routes_1=__importDefault(require(a194_0x15d9('0x2c')));const sequelize_utils_1=__importDefault(require(a194_0x15d9('0x2d')));const controllers_1=__importDefault(require('./app/controllers'));const models=new models_1[(a194_0x15d9('0x5'))](sequelize_1[a194_0x15d9('0x5')]);const controllers=new controllers_1[(a194_0x15d9('0x5'))](models);sequelize_utils_1['default'][a194_0x15d9('0x2e')]=models;sequelize_utils_1[a194_0x15d9('0x5')][a194_0x15d9('0x2f')]=controllers;routes_1['default'](app,passport_1[a194_0x15d9('0x5')],models,controllers);require(a194_0x15d9('0x30'))(passport_1['default'],models[a194_0x15d9('0x31')]);sequelize_utils_1[a194_0x15d9('0x5')][a194_0x15d9('0x32')]=sequelize_1['default'];apiController[a194_0x15d9('0x33')](sequelize_1[a194_0x15d9('0x5')]);const options={'exclude':['id',a194_0x15d9('0x34'),a194_0x15d9('0x35'),a194_0x15d9('0x36'),a194_0x15d9('0x37'),a194_0x15d9('0x38'),a194_0x15d9('0x39')],'userModel':a194_0x15d9('0x3a'),'revisionAttribute':'revision','revisionModel':a194_0x15d9('0x3b'),'revisionChangeModel':a194_0x15d9('0x3c'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a194_0x15d9('0x3d'),'revisionId':a194_0x15d9('0x3e')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a194_0x15d9('0x3f'),'continuationKey':'user_id'};const PaperTrail=require('sequelize-paper-trail')[a194_0x15d9('0x40')](sequelize_1[a194_0x15d9('0x5')],options);PaperTrail[a194_0x15d9('0x41')]({});app['get'](a194_0x15d9('0x42'),apiController[a194_0x15d9('0x43')]);app[a194_0x15d9('0x44')](a194_0x15d9('0x45'),apiController['downloadFtp']);app[a194_0x15d9('0x44')]('/api/processFtp',apiController[a194_0x15d9('0x46')]);app[a194_0x15d9('0x44')]('/api/getPassCounting/:direction',apiController['getPassCounting']);app[a194_0x15d9('0x44')](a194_0x15d9('0x47'),apiController[a194_0x15d9('0x48')]);app[a194_0x15d9('0x44')]('/api/getPassCountingByHour/:direction',apiController[a194_0x15d9('0x49')]);exports['default']=app;