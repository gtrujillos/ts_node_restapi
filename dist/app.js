var a84_0x57a3=['pug','use','json','urlencoded','initialize','xframe','SAMEORIGIN','xssProtection','locals','user','static','public','./config/sequelize','./app/models','./app/routes','./infrastructure/sequelize-utils','models','./config/passport','usersModel','instance','setSequelize','deletedAt','created_at','updated_at','deleted_at','users','revision','revision_change','revision_id','current_user_request','user_id','init','defineModels','/api/syncftp','syncFtp','get','/api/downloadFtp','downloadFtp','/api/processFtp','processFtp','/api/getPassCounting/:direction','/api/getPassCountingByDay/:direction','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','hasOwnProperty','call','default','express','compression','body-parser','./util/logger','dotenv','express-flash','path','existsSync','.env','debug','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','set','port','env','PORT','views','join','../views','view\x20engine'];(function(_0x3f6451,_0xee39b0){var _0x11a781=function(_0x2e0c1c){while(--_0x2e0c1c){_0x3f6451['push'](_0x3f6451['shift']());}};_0x11a781(++_0xee39b0);}(a84_0x57a3,0xb7));var a84_0x19aa=function(_0x488e2c,_0x5bcb73){_0x488e2c=_0x488e2c-0x0;var _0xe2c7a4=a84_0x57a3[_0x488e2c];return _0xe2c7a4;};'use strict';var __importDefault=this&&this[a84_0x19aa('0x0')]||function(_0x2880e1){return _0x2880e1&&_0x2880e1['__esModule']?_0x2880e1:{'default':_0x2880e1};};var __importStar=this&&this['__importStar']||function(_0x380deb){if(_0x380deb&&_0x380deb[a84_0x19aa('0x1')])return _0x380deb;var _0x4d952e={};if(_0x380deb!=null)for(var _0x442f8d in _0x380deb)if(Object[a84_0x19aa('0x2')][a84_0x19aa('0x3')](_0x380deb,_0x442f8d))_0x4d952e[_0x442f8d]=_0x380deb[_0x442f8d];_0x4d952e[a84_0x19aa('0x4')]=_0x380deb;return _0x4d952e;};Object['defineProperty'](exports,a84_0x19aa('0x1'),{'value':!![]});const express_1=__importDefault(require(a84_0x19aa('0x5')));const compression_1=__importDefault(require(a84_0x19aa('0x6')));const body_parser_1=__importDefault(require(a84_0x19aa('0x7')));const logger_1=__importDefault(require(a84_0x19aa('0x8')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require(a84_0x19aa('0x9')));const express_flash_1=__importDefault(require(a84_0x19aa('0xa')));const path_1=__importDefault(require(a84_0x19aa('0xb')));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));if(fs_1[a84_0x19aa('0x4')][a84_0x19aa('0xc')](a84_0x19aa('0xd'))){logger_1[a84_0x19aa('0x4')][a84_0x19aa('0xe')]('Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1['default']['config']({'path':'.env'});}else{logger_1[a84_0x19aa('0x4')][a84_0x19aa('0xe')](a84_0x19aa('0xf'));dotenv_1[a84_0x19aa('0x4')]['config']({'path':'.env.example'});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a84_0x19aa('0x4')]();app[a84_0x19aa('0x10')](a84_0x19aa('0x11'),process[a84_0x19aa('0x12')][a84_0x19aa('0x13')]||0xbb8);app['set'](a84_0x19aa('0x14'),path_1[a84_0x19aa('0x4')][a84_0x19aa('0x15')](__dirname,a84_0x19aa('0x16')));app['set'](a84_0x19aa('0x17'),a84_0x19aa('0x18'));app[a84_0x19aa('0x19')](compression_1[a84_0x19aa('0x4')]());app[a84_0x19aa('0x19')](body_parser_1['default'][a84_0x19aa('0x1a')]());app[a84_0x19aa('0x19')](body_parser_1[a84_0x19aa('0x4')][a84_0x19aa('0x1b')]({'extended':!![]}));app[a84_0x19aa('0x19')](express_validator_1[a84_0x19aa('0x4')]());app[a84_0x19aa('0x19')](passport_1['default'][a84_0x19aa('0x1c')]());app[a84_0x19aa('0x19')](passport_1['default']['session']());app[a84_0x19aa('0x19')](express_flash_1[a84_0x19aa('0x4')]());app[a84_0x19aa('0x19')](lusca_1[a84_0x19aa('0x4')][a84_0x19aa('0x1d')](a84_0x19aa('0x1e')));app[a84_0x19aa('0x19')](lusca_1[a84_0x19aa('0x4')][a84_0x19aa('0x1f')](!![]));app[a84_0x19aa('0x19')]((_0x4f169e,_0x170391,_0x5945ce)=>{_0x170391[a84_0x19aa('0x20')][a84_0x19aa('0x21')]=_0x4f169e[a84_0x19aa('0x21')];_0x5945ce();});app[a84_0x19aa('0x19')]((_0x46c9ca,_0x5233c5,_0x47e337)=>{_0x47e337();});app[a84_0x19aa('0x19')](express_1[a84_0x19aa('0x4')][a84_0x19aa('0x22')](path_1['default'][a84_0x19aa('0x15')](__dirname,a84_0x19aa('0x23')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a84_0x19aa('0x24')));const models_1=__importDefault(require(a84_0x19aa('0x25')));const routes_1=__importDefault(require(a84_0x19aa('0x26')));const sequelize_utils_1=__importDefault(require(a84_0x19aa('0x27')));const models=new models_1[(a84_0x19aa('0x4'))](sequelize_1[a84_0x19aa('0x4')]);sequelize_utils_1[a84_0x19aa('0x4')][a84_0x19aa('0x28')]=models;routes_1[a84_0x19aa('0x4')](app,passport_1[a84_0x19aa('0x4')],models);require(a84_0x19aa('0x29'))(passport_1[a84_0x19aa('0x4')],models[a84_0x19aa('0x2a')]);sequelize_utils_1['default'][a84_0x19aa('0x2b')]=sequelize_1['default'];apiController[a84_0x19aa('0x2c')](sequelize_1[a84_0x19aa('0x4')]);const options={'exclude':['id','createdAt','updatedAt',a84_0x19aa('0x2d'),a84_0x19aa('0x2e'),a84_0x19aa('0x2f'),a84_0x19aa('0x30')],'userModel':a84_0x19aa('0x31'),'revisionAttribute':'revision','revisionModel':a84_0x19aa('0x32'),'revisionChangeModel':a84_0x19aa('0x33'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':'document_id','revisionId':a84_0x19aa('0x34')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a84_0x19aa('0x35'),'continuationKey':a84_0x19aa('0x36')};const PaperTrail=require('sequelize-paper-trail')[a84_0x19aa('0x37')](sequelize_1[a84_0x19aa('0x4')],options);PaperTrail[a84_0x19aa('0x38')]({});app['get'](a84_0x19aa('0x39'),apiController[a84_0x19aa('0x3a')]);app[a84_0x19aa('0x3b')](a84_0x19aa('0x3c'),apiController[a84_0x19aa('0x3d')]);app[a84_0x19aa('0x3b')](a84_0x19aa('0x3e'),apiController[a84_0x19aa('0x3f')]);app[a84_0x19aa('0x3b')](a84_0x19aa('0x40'),apiController['getPassCounting']);app[a84_0x19aa('0x3b')](a84_0x19aa('0x41'),apiController[a84_0x19aa('0x42')]);app[a84_0x19aa('0x3b')](a84_0x19aa('0x43'),apiController[a84_0x19aa('0x44')]);exports['default']=app;