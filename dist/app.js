var a194_0x209e=['./app/controllers','controllers','./config/passport','usersModel','instance','createdAt','deletedAt','created_at','updated_at','users','revision','revision_change','document_id','user_id','defineModels','get','/api/syncftp','syncFtp','/api/downloadFtp','downloadFtp','getPassCounting','/api/getPassCountingByDay/:direction','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','hasOwnProperty','call','compression','body-parser','./util/logger','lusca','express-flash','express-validator','cors','default','existsSync','.env','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','debug','.env.example','./controllers/api','set','port','env','PORT','join','../views','pug','use','urlencoded','DEV_MODE','options','initialize','session','SAMEORIGIN','xssProtection','locals','user','public','./config/sequelize','./infrastructure/sequelize-utils'];(function(_0x2b84d3,_0x5f2ce3){var _0x334acd=function(_0x567074){while(--_0x567074){_0x2b84d3['push'](_0x2b84d3['shift']());}};_0x334acd(++_0x5f2ce3);}(a194_0x209e,0xd5));var a194_0x4305=function(_0x1d7e2a,_0x418f98){_0x1d7e2a=_0x1d7e2a-0x0;var _0x54cd73=a194_0x209e[_0x1d7e2a];return _0x54cd73;};'use strict';var __importDefault=this&&this[a194_0x4305('0x0')]||function(_0x11d8d3){return _0x11d8d3&&_0x11d8d3[a194_0x4305('0x1')]?_0x11d8d3:{'default':_0x11d8d3};};var __importStar=this&&this['__importStar']||function(_0x466283){if(_0x466283&&_0x466283[a194_0x4305('0x1')])return _0x466283;var _0x384dbe={};if(_0x466283!=null)for(var _0x32e833 in _0x466283)if(Object[a194_0x4305('0x2')][a194_0x4305('0x3')](_0x466283,_0x32e833))_0x384dbe[_0x32e833]=_0x466283[_0x32e833];_0x384dbe['default']=_0x466283;return _0x384dbe;};Object['defineProperty'](exports,a194_0x4305('0x1'),{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require(a194_0x4305('0x4')));const body_parser_1=__importDefault(require(a194_0x4305('0x5')));const logger_1=__importDefault(require(a194_0x4305('0x6')));const lusca_1=__importDefault(require(a194_0x4305('0x7')));const dotenv_1=__importDefault(require('dotenv'));const express_flash_1=__importDefault(require(a194_0x4305('0x8')));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require(a194_0x4305('0x9')));const fs_1=__importDefault(require('fs'));const cors=require(a194_0x4305('0xa'));if(fs_1[a194_0x4305('0xb')][a194_0x4305('0xc')](a194_0x4305('0xd'))){logger_1['default']['debug'](a194_0x4305('0xe'));dotenv_1[a194_0x4305('0xb')][a194_0x4305('0xf')]({'path':a194_0x4305('0xd')});}else{logger_1[a194_0x4305('0xb')][a194_0x4305('0x10')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1['default'][a194_0x4305('0xf')]({'path':a194_0x4305('0x11')});}const apiController=__importStar(require(a194_0x4305('0x12')));const app=express_1[a194_0x4305('0xb')]();app[a194_0x4305('0x13')](a194_0x4305('0x14'),process[a194_0x4305('0x15')][a194_0x4305('0x16')]||0xbb8);app[a194_0x4305('0x13')]('views',path_1[a194_0x4305('0xb')][a194_0x4305('0x17')](__dirname,a194_0x4305('0x18')));app[a194_0x4305('0x13')]('view\x20engine',a194_0x4305('0x19'));app['use'](compression_1[a194_0x4305('0xb')]());app[a194_0x4305('0x1a')](body_parser_1['default']['json']({'limit':'10mb'}));app[a194_0x4305('0x1a')](body_parser_1[a194_0x4305('0xb')][a194_0x4305('0x1b')]({'limit':'10mb','extended':!![]}));if(process[a194_0x4305('0x15')][a194_0x4305('0x1c')]){app['use'](cors());app['use'](cors({'origin':!![]}));app[a194_0x4305('0x1d')]('*',cors());}else{app[a194_0x4305('0x1a')](cors());}app[a194_0x4305('0x1a')](express_validator_1[a194_0x4305('0xb')]());app[a194_0x4305('0x1a')](passport_1[a194_0x4305('0xb')][a194_0x4305('0x1e')]());app[a194_0x4305('0x1a')](passport_1[a194_0x4305('0xb')][a194_0x4305('0x1f')]());app['use'](express_flash_1[a194_0x4305('0xb')]());app[a194_0x4305('0x1a')](lusca_1[a194_0x4305('0xb')]['xframe'](a194_0x4305('0x20')));app[a194_0x4305('0x1a')](lusca_1[a194_0x4305('0xb')][a194_0x4305('0x21')](!![]));app['use']((_0x2f021f,_0x379e6c,_0x4fea83)=>{_0x379e6c[a194_0x4305('0x22')][a194_0x4305('0x23')]=_0x2f021f[a194_0x4305('0x23')];_0x4fea83();});app[a194_0x4305('0x1a')]((_0x385dcd,_0x30bee2,_0x184f82)=>{_0x184f82();});app[a194_0x4305('0x1a')](express_1['default']['static'](path_1[a194_0x4305('0xb')]['join'](__dirname,a194_0x4305('0x24')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a194_0x4305('0x25')));const models_1=__importDefault(require('./app/models'));const routes_1=__importDefault(require('./app/routes'));const sequelize_utils_1=__importDefault(require(a194_0x4305('0x26')));const controllers_1=__importDefault(require(a194_0x4305('0x27')));const models=new models_1[(a194_0x4305('0xb'))](sequelize_1[a194_0x4305('0xb')]);const controllers=new controllers_1[(a194_0x4305('0xb'))](models);sequelize_utils_1['default']['models']=models;sequelize_utils_1[a194_0x4305('0xb')][a194_0x4305('0x28')]=controllers;routes_1[a194_0x4305('0xb')](app,passport_1['default'],models,controllers);require(a194_0x4305('0x29'))(passport_1[a194_0x4305('0xb')],models[a194_0x4305('0x2a')]);sequelize_utils_1[a194_0x4305('0xb')][a194_0x4305('0x2b')]=sequelize_1[a194_0x4305('0xb')];apiController['setSequelize'](sequelize_1['default']);const options={'exclude':['id',a194_0x4305('0x2c'),'updatedAt',a194_0x4305('0x2d'),a194_0x4305('0x2e'),a194_0x4305('0x2f'),'deleted_at'],'userModel':a194_0x4305('0x30'),'revisionAttribute':a194_0x4305('0x31'),'revisionModel':a194_0x4305('0x31'),'revisionChangeModel':a194_0x4305('0x32'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a194_0x4305('0x33'),'revisionId':'revision_id'},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':'current_user_request','continuationKey':a194_0x4305('0x34')};const PaperTrail=require('sequelize-paper-trail')['init'](sequelize_1[a194_0x4305('0xb')],options);PaperTrail[a194_0x4305('0x35')]({});app[a194_0x4305('0x36')](a194_0x4305('0x37'),apiController[a194_0x4305('0x38')]);app['get'](a194_0x4305('0x39'),apiController[a194_0x4305('0x3a')]);app[a194_0x4305('0x36')]('/api/processFtp',apiController['processFtp']);app['get']('/api/getPassCounting/:direction',apiController[a194_0x4305('0x3b')]);app[a194_0x4305('0x36')](a194_0x4305('0x3c'),apiController['getPassCountingByDay']);app['get'](a194_0x4305('0x3d'),apiController[a194_0x4305('0x3e')]);exports[a194_0x4305('0xb')]=app;