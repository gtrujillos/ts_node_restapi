var a84_0x4792=['env','views','join','../views','pug','use','json','urlencoded','initialize','session','SAMEORIGIN','xssProtection','user','static','public','./config/sequelize','./infrastructure/sequelize-utils','./config/passport','usersModel','instance','setSequelize','createdAt','updatedAt','created_at','users','revision','revision_change','document_id','revision_id','current_user_request','user_id','init','defineModels','get','/api/downloadFtp','downloadFtp','/api/processFtp','getPassCounting','/api/getPassCountingByDay/:direction','getPassCountingByDay','getPassCountingByHour','__importDefault','__esModule','__importStar','hasOwnProperty','call','default','express','compression','body-parser','./util/logger','dotenv','express-flash','express-validator','existsSync','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','./controllers/api','set'];(function(_0x491c01,_0x28015c){var _0x1ebff3=function(_0x3562af){while(--_0x3562af){_0x491c01['push'](_0x491c01['shift']());}};_0x1ebff3(++_0x28015c);}(a84_0x4792,0x1a3));var a84_0x5a68=function(_0x1f90db,_0x30c70b){_0x1f90db=_0x1f90db-0x0;var _0x448f0f=a84_0x4792[_0x1f90db];return _0x448f0f;};'use strict';var __importDefault=this&&this[a84_0x5a68('0x0')]||function(_0x478dcd){return _0x478dcd&&_0x478dcd[a84_0x5a68('0x1')]?_0x478dcd:{'default':_0x478dcd};};var __importStar=this&&this[a84_0x5a68('0x2')]||function(_0xcebc7e){if(_0xcebc7e&&_0xcebc7e[a84_0x5a68('0x1')])return _0xcebc7e;var _0x21cdf2={};if(_0xcebc7e!=null)for(var _0x149387 in _0xcebc7e)if(Object[a84_0x5a68('0x3')][a84_0x5a68('0x4')](_0xcebc7e,_0x149387))_0x21cdf2[_0x149387]=_0xcebc7e[_0x149387];_0x21cdf2[a84_0x5a68('0x5')]=_0xcebc7e;return _0x21cdf2;};Object['defineProperty'](exports,a84_0x5a68('0x1'),{'value':!![]});const express_1=__importDefault(require(a84_0x5a68('0x6')));const compression_1=__importDefault(require(a84_0x5a68('0x7')));const body_parser_1=__importDefault(require(a84_0x5a68('0x8')));const logger_1=__importDefault(require(a84_0x5a68('0x9')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require(a84_0x5a68('0xa')));const express_flash_1=__importDefault(require(a84_0x5a68('0xb')));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require(a84_0x5a68('0xc')));const fs_1=__importDefault(require('fs'));if(fs_1[a84_0x5a68('0x5')][a84_0x5a68('0xd')]('.env')){logger_1[a84_0x5a68('0x5')][a84_0x5a68('0xe')](a84_0x5a68('0xf'));dotenv_1[a84_0x5a68('0x5')][a84_0x5a68('0x10')]({'path':a84_0x5a68('0x11')});}else{logger_1[a84_0x5a68('0x5')][a84_0x5a68('0xe')](a84_0x5a68('0x12'));dotenv_1[a84_0x5a68('0x5')][a84_0x5a68('0x10')]({'path':a84_0x5a68('0x13')});}const apiController=__importStar(require(a84_0x5a68('0x14')));const app=express_1[a84_0x5a68('0x5')]();app[a84_0x5a68('0x15')]('port',process[a84_0x5a68('0x16')]['PORT']||0xbb8);app[a84_0x5a68('0x15')](a84_0x5a68('0x17'),path_1['default'][a84_0x5a68('0x18')](__dirname,a84_0x5a68('0x19')));app['set']('view\x20engine',a84_0x5a68('0x1a'));app[a84_0x5a68('0x1b')](compression_1[a84_0x5a68('0x5')]());app['use'](body_parser_1['default'][a84_0x5a68('0x1c')]());app[a84_0x5a68('0x1b')](body_parser_1[a84_0x5a68('0x5')][a84_0x5a68('0x1d')]({'extended':!![]}));app['use'](express_validator_1[a84_0x5a68('0x5')]());app[a84_0x5a68('0x1b')](passport_1['default'][a84_0x5a68('0x1e')]());app[a84_0x5a68('0x1b')](passport_1['default'][a84_0x5a68('0x1f')]());app[a84_0x5a68('0x1b')](express_flash_1[a84_0x5a68('0x5')]());app[a84_0x5a68('0x1b')](lusca_1['default']['xframe'](a84_0x5a68('0x20')));app['use'](lusca_1[a84_0x5a68('0x5')][a84_0x5a68('0x21')](!![]));app['use']((_0x3e1389,_0x56b484,_0x26c9f6)=>{_0x56b484['locals']['user']=_0x3e1389[a84_0x5a68('0x22')];_0x26c9f6();});app[a84_0x5a68('0x1b')]((_0x520217,_0x2dbdf0,_0x411712)=>{_0x411712();});app[a84_0x5a68('0x1b')](express_1[a84_0x5a68('0x5')][a84_0x5a68('0x23')](path_1[a84_0x5a68('0x5')][a84_0x5a68('0x18')](__dirname,a84_0x5a68('0x24')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a84_0x5a68('0x25')));const models_1=__importDefault(require('./app/models'));const routes_1=__importDefault(require('./app/routes'));const sequelize_utils_1=__importDefault(require(a84_0x5a68('0x26')));const models=new models_1[(a84_0x5a68('0x5'))](sequelize_1[a84_0x5a68('0x5')]);sequelize_utils_1['default']['models']=models;routes_1[a84_0x5a68('0x5')](app,passport_1[a84_0x5a68('0x5')],models);require(a84_0x5a68('0x27'))(passport_1['default'],models[a84_0x5a68('0x28')]);sequelize_utils_1[a84_0x5a68('0x5')][a84_0x5a68('0x29')]=sequelize_1['default'];apiController[a84_0x5a68('0x2a')](sequelize_1[a84_0x5a68('0x5')]);const options={'exclude':['id',a84_0x5a68('0x2b'),a84_0x5a68('0x2c'),'deletedAt',a84_0x5a68('0x2d'),'updated_at','deleted_at'],'userModel':a84_0x5a68('0x2e'),'revisionAttribute':'revision','revisionModel':a84_0x5a68('0x2f'),'revisionChangeModel':a84_0x5a68('0x30'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a84_0x5a68('0x31'),'revisionId':a84_0x5a68('0x32')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a84_0x5a68('0x33'),'continuationKey':a84_0x5a68('0x34')};const PaperTrail=require('sequelize-paper-trail')[a84_0x5a68('0x35')](sequelize_1[a84_0x5a68('0x5')],options);PaperTrail[a84_0x5a68('0x36')]({});app['get']('/api/syncftp',apiController['syncFtp']);app[a84_0x5a68('0x37')](a84_0x5a68('0x38'),apiController[a84_0x5a68('0x39')]);app[a84_0x5a68('0x37')](a84_0x5a68('0x3a'),apiController['processFtp']);app[a84_0x5a68('0x37')]('/api/getPassCounting/:direction',apiController[a84_0x5a68('0x3b')]);app['get'](a84_0x5a68('0x3c'),apiController[a84_0x5a68('0x3d')]);app[a84_0x5a68('0x37')]('/api/getPassCountingByHour/:direction',apiController[a84_0x5a68('0x3e')]);exports[a84_0x5a68('0x5')]=app;