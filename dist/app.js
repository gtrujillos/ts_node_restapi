var a176_0x3624=['/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByHour/:direction','enable','trust\x20proxy','__importDefault','__esModule','hasOwnProperty','call','defineProperty','body-parser','./util/logger','lusca','dotenv','express-flash','path','passport','express-validator','cors','express-slow-down','existsSync','.env','default','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','set','port','env','views','../views','view\x20engine','pug','use','json','10mb','urlencoded','DEV_MODE','initialize','SAMEORIGIN','xssProtection','user','static','public','./config/sequelize','./app/models','./app/controllers','./config/passport','setSequelize','/api/syncftp','syncFtp','downloadFtp','get','/api/processFtp','processFtp'];(function(_0x4f6a61,_0x571cf9){var _0x2adf70=function(_0x36e717){while(--_0x36e717){_0x4f6a61['push'](_0x4f6a61['shift']());}};_0x2adf70(++_0x571cf9);}(a176_0x3624,0xaa));var a176_0x37b2=function(_0x2f3e31,_0x3a89c9){_0x2f3e31=_0x2f3e31-0x0;var _0x2c6db2=a176_0x3624[_0x2f3e31];return _0x2c6db2;};'use strict';var __importDefault=this&&this[a176_0x37b2('0x0')]||function(_0x3b4a73){return _0x3b4a73&&_0x3b4a73['__esModule']?_0x3b4a73:{'default':_0x3b4a73};};var __importStar=this&&this['__importStar']||function(_0xc9e805){if(_0xc9e805&&_0xc9e805[a176_0x37b2('0x1')])return _0xc9e805;var _0x537c9b={};if(_0xc9e805!=null)for(var _0xb87d26 in _0xc9e805)if(Object[a176_0x37b2('0x2')][a176_0x37b2('0x3')](_0xc9e805,_0xb87d26))_0x537c9b[_0xb87d26]=_0xc9e805[_0xb87d26];_0x537c9b['default']=_0xc9e805;return _0x537c9b;};Object[a176_0x37b2('0x4')](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a176_0x37b2('0x5')));const logger_1=__importDefault(require(a176_0x37b2('0x6')));const lusca_1=__importDefault(require(a176_0x37b2('0x7')));const dotenv_1=__importDefault(require(a176_0x37b2('0x8')));const express_flash_1=__importDefault(require(a176_0x37b2('0x9')));const path_1=__importDefault(require(a176_0x37b2('0xa')));const passport_1=__importDefault(require(a176_0x37b2('0xb')));const express_validator_1=__importDefault(require(a176_0x37b2('0xc')));const fs_1=__importDefault(require('fs'));const cors=require(a176_0x37b2('0xd'));const rateLimit=require('express-rate-limit');const slowDown=require(a176_0x37b2('0xe'));if(fs_1['default'][a176_0x37b2('0xf')](a176_0x37b2('0x10'))){logger_1[a176_0x37b2('0x11')][a176_0x37b2('0x12')](a176_0x37b2('0x13'));dotenv_1[a176_0x37b2('0x11')][a176_0x37b2('0x14')]({'path':a176_0x37b2('0x10')});}else{logger_1[a176_0x37b2('0x11')][a176_0x37b2('0x12')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a176_0x37b2('0x11')][a176_0x37b2('0x14')]({'path':'.env.example'});}const apiController=__importStar(require('./controllers/api'));const app=express_1[a176_0x37b2('0x11')]();app[a176_0x37b2('0x15')](a176_0x37b2('0x16'),process[a176_0x37b2('0x17')]['PORT']||0xbb8);app[a176_0x37b2('0x15')](a176_0x37b2('0x18'),path_1[a176_0x37b2('0x11')]['join'](__dirname,a176_0x37b2('0x19')));app[a176_0x37b2('0x15')](a176_0x37b2('0x1a'),a176_0x37b2('0x1b'));app[a176_0x37b2('0x1c')](compression_1[a176_0x37b2('0x11')]());app['use'](body_parser_1['default'][a176_0x37b2('0x1d')]({'limit':a176_0x37b2('0x1e')}));app['use'](body_parser_1[a176_0x37b2('0x11')][a176_0x37b2('0x1f')]({'limit':a176_0x37b2('0x1e'),'extended':!![]}));if(process[a176_0x37b2('0x17')][a176_0x37b2('0x20')]){app[a176_0x37b2('0x1c')](cors());app[a176_0x37b2('0x1c')](cors({'origin':!![]}));app['options']('*',cors());}else{app['use'](cors());}app[a176_0x37b2('0x1c')](express_validator_1['default']());app[a176_0x37b2('0x1c')](passport_1[a176_0x37b2('0x11')][a176_0x37b2('0x21')]());app[a176_0x37b2('0x1c')](passport_1['default']['session']());app[a176_0x37b2('0x1c')](express_flash_1[a176_0x37b2('0x11')]());app[a176_0x37b2('0x1c')](lusca_1[a176_0x37b2('0x11')]['xframe'](a176_0x37b2('0x22')));app['use'](lusca_1['default'][a176_0x37b2('0x23')](!![]));app[a176_0x37b2('0x1c')]((_0x5711eb,_0x3ac1b3,_0x454e45)=>{_0x3ac1b3['locals'][a176_0x37b2('0x24')]=_0x5711eb['user'];_0x454e45();});app['use']((_0x23e772,_0x21f72d,_0x55320f)=>{_0x55320f();});app['use'](express_1[a176_0x37b2('0x11')][a176_0x37b2('0x25')](path_1['default']['join'](__dirname,a176_0x37b2('0x26')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a176_0x37b2('0x27')));const models_1=__importDefault(require(a176_0x37b2('0x28')));const routes_1=__importDefault(require('./app/routes'));const controllers_1=__importDefault(require(a176_0x37b2('0x29')));const models=new models_1[(a176_0x37b2('0x11'))](sequelize_1['default']);const controllers=new controllers_1[(a176_0x37b2('0x11'))](models);routes_1[a176_0x37b2('0x11')](app,passport_1[a176_0x37b2('0x11')],models,controllers);require(a176_0x37b2('0x2a'))(passport_1[a176_0x37b2('0x11')],models['usersModel']);apiController[a176_0x37b2('0x2b')](sequelize_1[a176_0x37b2('0x11')]);app['get'](a176_0x37b2('0x2c'),apiController[a176_0x37b2('0x2d')]);app['get']('/api/downloadFtp',apiController[a176_0x37b2('0x2e')]);app[a176_0x37b2('0x2f')](a176_0x37b2('0x30'),apiController[a176_0x37b2('0x31')]);app[a176_0x37b2('0x2f')](a176_0x37b2('0x32'),apiController[a176_0x37b2('0x33')]);app[a176_0x37b2('0x2f')]('/api/getPassCountingByDay/:direction',apiController['getPassCountingByDay']);app['get'](a176_0x37b2('0x34'),apiController['getPassCountingByHour']);const limiter=rateLimit({'windowMs':0x2*0x3c*0x3e8,'max':0x64});app['use'](limiter);app[a176_0x37b2('0x35')](a176_0x37b2('0x36'));const speedLimiter=slowDown({'windowMs':0x2*0x3c*0x3e8,'delayAfter':0x64,'delayMs':0x1f4});app[a176_0x37b2('0x1c')](speedLimiter);exports[a176_0x37b2('0x11')]=app;