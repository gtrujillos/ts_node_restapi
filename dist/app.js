var a88_0x27b1=['instance','setSequelize','createdAt','updatedAt','deletedAt','updated_at','deleted_at','revision','document_id','revision_id','current_user_request','user_id','sequelize-paper-trail','defineModels','get','/api/syncftp','syncFtp','/api/downloadFtp','downloadFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','__importStar','defineProperty','express','compression','body-parser','./util/logger','lusca','dotenv','express-flash','path','passport','existsSync','.env','default','debug','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','./controllers/api','port','env','views','join','../views','view\x20engine','pug','use','urlencoded','initialize','session','xframe','xssProtection','user','static','public','./config/sequelize','./app/models','./app/routes','./app/controllers','models','controllers','./config/passport'];(function(_0x2a5e02,_0x40dbbb){var _0x27ad68=function(_0x359003){while(--_0x359003){_0x2a5e02['push'](_0x2a5e02['shift']());}};_0x27ad68(++_0x40dbbb);}(a88_0x27b1,0xe8));var a88_0x2c7c=function(_0x323ec6,_0x3781ab){_0x323ec6=_0x323ec6-0x0;var _0x297716=a88_0x27b1[_0x323ec6];return _0x297716;};'use strict';var __importDefault=this&&this[a88_0x2c7c('0x0')]||function(_0x1f62af){return _0x1f62af&&_0x1f62af[a88_0x2c7c('0x1')]?_0x1f62af:{'default':_0x1f62af};};var __importStar=this&&this[a88_0x2c7c('0x2')]||function(_0x227a95){if(_0x227a95&&_0x227a95[a88_0x2c7c('0x1')])return _0x227a95;var _0x485f1={};if(_0x227a95!=null)for(var _0x1f6c88 in _0x227a95)if(Object['hasOwnProperty']['call'](_0x227a95,_0x1f6c88))_0x485f1[_0x1f6c88]=_0x227a95[_0x1f6c88];_0x485f1['default']=_0x227a95;return _0x485f1;};Object[a88_0x2c7c('0x3')](exports,a88_0x2c7c('0x1'),{'value':!![]});const express_1=__importDefault(require(a88_0x2c7c('0x4')));const compression_1=__importDefault(require(a88_0x2c7c('0x5')));const body_parser_1=__importDefault(require(a88_0x2c7c('0x6')));const logger_1=__importDefault(require(a88_0x2c7c('0x7')));const lusca_1=__importDefault(require(a88_0x2c7c('0x8')));const dotenv_1=__importDefault(require(a88_0x2c7c('0x9')));const express_flash_1=__importDefault(require(a88_0x2c7c('0xa')));const path_1=__importDefault(require(a88_0x2c7c('0xb')));const passport_1=__importDefault(require(a88_0x2c7c('0xc')));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));if(fs_1['default'][a88_0x2c7c('0xd')](a88_0x2c7c('0xe'))){logger_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x10')]('Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x11')]({'path':'.env'});}else{logger_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x10')](a88_0x2c7c('0x12'));dotenv_1['default']['config']({'path':a88_0x2c7c('0x13')});}const apiController=__importStar(require(a88_0x2c7c('0x14')));const app=express_1['default']();app['set'](a88_0x2c7c('0x15'),process[a88_0x2c7c('0x16')]['PORT']||0xbb8);app['set'](a88_0x2c7c('0x17'),path_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x18')](__dirname,a88_0x2c7c('0x19')));app['set'](a88_0x2c7c('0x1a'),a88_0x2c7c('0x1b'));app['use'](compression_1[a88_0x2c7c('0xf')]());app[a88_0x2c7c('0x1c')](body_parser_1[a88_0x2c7c('0xf')]['json']());app['use'](body_parser_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x1d')]({'extended':!![]}));app[a88_0x2c7c('0x1c')](express_validator_1[a88_0x2c7c('0xf')]());app[a88_0x2c7c('0x1c')](passport_1['default'][a88_0x2c7c('0x1e')]());app['use'](passport_1['default'][a88_0x2c7c('0x1f')]());app[a88_0x2c7c('0x1c')](express_flash_1['default']());app['use'](lusca_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x20')]('SAMEORIGIN'));app['use'](lusca_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x21')](!![]));app[a88_0x2c7c('0x1c')]((_0x4b10a2,_0x57b3cf,_0x160403)=>{_0x57b3cf['locals'][a88_0x2c7c('0x22')]=_0x4b10a2[a88_0x2c7c('0x22')];_0x160403();});app[a88_0x2c7c('0x1c')]((_0x5295a2,_0x4a593b,_0x55af74)=>{_0x55af74();});app[a88_0x2c7c('0x1c')](express_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x23')](path_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x18')](__dirname,a88_0x2c7c('0x24')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a88_0x2c7c('0x25')));const models_1=__importDefault(require(a88_0x2c7c('0x26')));const routes_1=__importDefault(require(a88_0x2c7c('0x27')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const controllers_1=__importDefault(require(a88_0x2c7c('0x28')));const models=new models_1['default'](sequelize_1[a88_0x2c7c('0xf')]);const controllers=new controllers_1[(a88_0x2c7c('0xf'))](models);sequelize_utils_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x29')]=models;sequelize_utils_1['default'][a88_0x2c7c('0x2a')]=controllers;routes_1[a88_0x2c7c('0xf')](app,passport_1[a88_0x2c7c('0xf')],models,controllers);require(a88_0x2c7c('0x2b'))(passport_1[a88_0x2c7c('0xf')],models['usersModel']);sequelize_utils_1[a88_0x2c7c('0xf')][a88_0x2c7c('0x2c')]=sequelize_1[a88_0x2c7c('0xf')];apiController[a88_0x2c7c('0x2d')](sequelize_1[a88_0x2c7c('0xf')]);const options={'exclude':['id',a88_0x2c7c('0x2e'),a88_0x2c7c('0x2f'),a88_0x2c7c('0x30'),'created_at',a88_0x2c7c('0x31'),a88_0x2c7c('0x32')],'userModel':'users','revisionAttribute':a88_0x2c7c('0x33'),'revisionModel':a88_0x2c7c('0x33'),'revisionChangeModel':'revision_change','enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a88_0x2c7c('0x34'),'revisionId':a88_0x2c7c('0x35')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a88_0x2c7c('0x36'),'continuationKey':a88_0x2c7c('0x37')};const PaperTrail=require(a88_0x2c7c('0x38'))['init'](sequelize_1[a88_0x2c7c('0xf')],options);PaperTrail[a88_0x2c7c('0x39')]({});app[a88_0x2c7c('0x3a')](a88_0x2c7c('0x3b'),apiController[a88_0x2c7c('0x3c')]);app[a88_0x2c7c('0x3a')](a88_0x2c7c('0x3d'),apiController[a88_0x2c7c('0x3e')]);app[a88_0x2c7c('0x3a')]('/api/processFtp',apiController['processFtp']);app[a88_0x2c7c('0x3a')](a88_0x2c7c('0x3f'),apiController[a88_0x2c7c('0x40')]);app[a88_0x2c7c('0x3a')](a88_0x2c7c('0x41'),apiController[a88_0x2c7c('0x42')]);app[a88_0x2c7c('0x3a')](a88_0x2c7c('0x43'),apiController[a88_0x2c7c('0x44')]);exports['default']=app;