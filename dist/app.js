var a88_0x9823=['init','defineModels','get','/api/syncftp','syncFtp','/api/downloadFtp','downloadFtp','/api/processFtp','getPassCounting','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','__importStar','call','default','defineProperty','body-parser','./util/logger','lusca','cors','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','./controllers/api','set','port','env','views','join','view\x20engine','use','urlencoded','SAMEORIGIN','user','static','./app/models','./app/routes','./infrastructure/sequelize-utils','./app/controllers','models','controllers','./config/passport','usersModel','instance','setSequelize','createdAt','updatedAt','deletedAt','created_at','updated_at','deleted_at','users','revision','revision_change','document_id','current_user_request','user_id','sequelize-paper-trail'];(function(_0xda7556,_0x2c44be){var _0x2b1116=function(_0x27a57c){while(--_0x27a57c){_0xda7556['push'](_0xda7556['shift']());}};_0x2b1116(++_0x2c44be);}(a88_0x9823,0xcc));var a88_0x3211=function(_0x31183b,_0x2fd526){_0x31183b=_0x31183b-0x0;var _0x2e47d8=a88_0x9823[_0x31183b];return _0x2e47d8;};'use strict';var __importDefault=this&&this[a88_0x3211('0x0')]||function(_0x9d0ff0){return _0x9d0ff0&&_0x9d0ff0[a88_0x3211('0x1')]?_0x9d0ff0:{'default':_0x9d0ff0};};var __importStar=this&&this[a88_0x3211('0x2')]||function(_0x199bb4){if(_0x199bb4&&_0x199bb4[a88_0x3211('0x1')])return _0x199bb4;var _0xef4d50={};if(_0x199bb4!=null)for(var _0x75baea in _0x199bb4)if(Object['hasOwnProperty'][a88_0x3211('0x3')](_0x199bb4,_0x75baea))_0xef4d50[_0x75baea]=_0x199bb4[_0x75baea];_0xef4d50[a88_0x3211('0x4')]=_0x199bb4;return _0xef4d50;};Object[a88_0x3211('0x5')](exports,a88_0x3211('0x1'),{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require(a88_0x3211('0x6')));const logger_1=__importDefault(require(a88_0x3211('0x7')));const lusca_1=__importDefault(require(a88_0x3211('0x8')));const dotenv_1=__importDefault(require('dotenv'));const express_flash_1=__importDefault(require('express-flash'));const path_1=__importDefault(require('path'));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));const cors=require(a88_0x3211('0x9'));if(fs_1['default'][a88_0x3211('0xa')](a88_0x3211('0xb'))){logger_1['default'][a88_0x3211('0xc')](a88_0x3211('0xd'));dotenv_1[a88_0x3211('0x4')][a88_0x3211('0xe')]({'path':a88_0x3211('0xb')});}else{logger_1['default']['debug'](a88_0x3211('0xf'));dotenv_1['default']['config']({'path':a88_0x3211('0x10')});}const apiController=__importStar(require(a88_0x3211('0x11')));const app=express_1[a88_0x3211('0x4')]();app[a88_0x3211('0x12')](a88_0x3211('0x13'),process[a88_0x3211('0x14')]['PORT']||0xbb8);app[a88_0x3211('0x12')](a88_0x3211('0x15'),path_1[a88_0x3211('0x4')][a88_0x3211('0x16')](__dirname,'../views'));app[a88_0x3211('0x12')](a88_0x3211('0x17'),'pug');app[a88_0x3211('0x18')](compression_1[a88_0x3211('0x4')]());app['use'](body_parser_1[a88_0x3211('0x4')]['json']());app['use'](cors());app[a88_0x3211('0x18')](body_parser_1[a88_0x3211('0x4')][a88_0x3211('0x19')]({'extended':!![]}));app['use'](express_validator_1['default']());app[a88_0x3211('0x18')](passport_1[a88_0x3211('0x4')]['initialize']());app[a88_0x3211('0x18')](passport_1['default']['session']());app[a88_0x3211('0x18')](express_flash_1['default']());app[a88_0x3211('0x18')](lusca_1[a88_0x3211('0x4')]['xframe'](a88_0x3211('0x1a')));app['use'](lusca_1[a88_0x3211('0x4')]['xssProtection'](!![]));app[a88_0x3211('0x18')]((_0x3b1f25,_0x543214,_0x37af22)=>{_0x543214['locals']['user']=_0x3b1f25[a88_0x3211('0x1b')];_0x37af22();});app[a88_0x3211('0x18')]((_0x348066,_0x33bf4b,_0x452459)=>{_0x452459();});app[a88_0x3211('0x18')](express_1[a88_0x3211('0x4')][a88_0x3211('0x1c')](path_1[a88_0x3211('0x4')][a88_0x3211('0x16')](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require('./config/sequelize'));const models_1=__importDefault(require(a88_0x3211('0x1d')));const routes_1=__importDefault(require(a88_0x3211('0x1e')));const sequelize_utils_1=__importDefault(require(a88_0x3211('0x1f')));const controllers_1=__importDefault(require(a88_0x3211('0x20')));const models=new models_1[(a88_0x3211('0x4'))](sequelize_1[a88_0x3211('0x4')]);const controllers=new controllers_1[(a88_0x3211('0x4'))](models);sequelize_utils_1[a88_0x3211('0x4')][a88_0x3211('0x21')]=models;sequelize_utils_1['default'][a88_0x3211('0x22')]=controllers;routes_1['default'](app,passport_1['default'],models,controllers);require(a88_0x3211('0x23'))(passport_1[a88_0x3211('0x4')],models[a88_0x3211('0x24')]);sequelize_utils_1[a88_0x3211('0x4')][a88_0x3211('0x25')]=sequelize_1[a88_0x3211('0x4')];apiController[a88_0x3211('0x26')](sequelize_1[a88_0x3211('0x4')]);const options={'exclude':['id',a88_0x3211('0x27'),a88_0x3211('0x28'),a88_0x3211('0x29'),a88_0x3211('0x2a'),a88_0x3211('0x2b'),a88_0x3211('0x2c')],'userModel':a88_0x3211('0x2d'),'revisionAttribute':'revision','revisionModel':a88_0x3211('0x2e'),'revisionChangeModel':a88_0x3211('0x2f'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a88_0x3211('0x30'),'revisionId':'revision_id'},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a88_0x3211('0x31'),'continuationKey':a88_0x3211('0x32')};const PaperTrail=require(a88_0x3211('0x33'))[a88_0x3211('0x34')](sequelize_1[a88_0x3211('0x4')],options);PaperTrail[a88_0x3211('0x35')]({});app[a88_0x3211('0x36')](a88_0x3211('0x37'),apiController[a88_0x3211('0x38')]);app[a88_0x3211('0x36')](a88_0x3211('0x39'),apiController[a88_0x3211('0x3a')]);app[a88_0x3211('0x36')](a88_0x3211('0x3b'),apiController['processFtp']);app['get']('/api/getPassCounting/:direction',apiController[a88_0x3211('0x3c')]);app[a88_0x3211('0x36')]('/api/getPassCountingByDay/:direction',apiController[a88_0x3211('0x3d')]);app[a88_0x3211('0x36')](a88_0x3211('0x3e'),apiController[a88_0x3211('0x3f')]);exports[a88_0x3211('0x4')]=app;