var a84_0x4830=['join','view\x20engine','pug','use','json','initialize','session','SAMEORIGIN','locals','user','static','./config/sequelize','./app/models','./app/routes','./infrastructure/sequelize-utils','./config/passport','usersModel','instance','createdAt','updatedAt','deletedAt','created_at','updated_at','deleted_at','users','revision','revision_change','document_id','revision_id','sequelize-paper-trail','init','get','/api/downloadFtp','downloadFtp','processFtp','getPassCounting','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','__importDefault','__esModule','__importStar','hasOwnProperty','call','defineProperty','./util/logger','express-flash','path','passport','express-validator','default','existsSync','.env','debug','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','./controllers/api','set','port','env','PORT'];(function(_0x2c6fab,_0x3e4273){var _0x52078e=function(_0x8b9a4a){while(--_0x8b9a4a){_0x2c6fab['push'](_0x2c6fab['shift']());}};_0x52078e(++_0x3e4273);}(a84_0x4830,0x15d));var a84_0xbbf7=function(_0x24031b,_0x477afa){_0x24031b=_0x24031b-0x0;var _0x1a645a=a84_0x4830[_0x24031b];return _0x1a645a;};'use strict';var __importDefault=this&&this[a84_0xbbf7('0x0')]||function(_0xdbf34e){return _0xdbf34e&&_0xdbf34e[a84_0xbbf7('0x1')]?_0xdbf34e:{'default':_0xdbf34e};};var __importStar=this&&this[a84_0xbbf7('0x2')]||function(_0x752567){if(_0x752567&&_0x752567['__esModule'])return _0x752567;var _0x304ed4={};if(_0x752567!=null)for(var _0x3be3f8 in _0x752567)if(Object[a84_0xbbf7('0x3')][a84_0xbbf7('0x4')](_0x752567,_0x3be3f8))_0x304ed4[_0x3be3f8]=_0x752567[_0x3be3f8];_0x304ed4['default']=_0x752567;return _0x304ed4;};Object[a84_0xbbf7('0x5')](exports,a84_0xbbf7('0x1'),{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require('compression'));const body_parser_1=__importDefault(require('body-parser'));const logger_1=__importDefault(require(a84_0xbbf7('0x6')));const lusca_1=__importDefault(require('lusca'));const dotenv_1=__importDefault(require('dotenv'));const express_flash_1=__importDefault(require(a84_0xbbf7('0x7')));const path_1=__importDefault(require(a84_0xbbf7('0x8')));const passport_1=__importDefault(require(a84_0xbbf7('0x9')));const express_validator_1=__importDefault(require(a84_0xbbf7('0xa')));const fs_1=__importDefault(require('fs'));if(fs_1[a84_0xbbf7('0xb')][a84_0xbbf7('0xc')](a84_0xbbf7('0xd'))){logger_1[a84_0xbbf7('0xb')][a84_0xbbf7('0xe')]('Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a84_0xbbf7('0xb')][a84_0xbbf7('0xf')]({'path':a84_0xbbf7('0xd')});}else{logger_1['default'][a84_0xbbf7('0xe')](a84_0xbbf7('0x10'));dotenv_1[a84_0xbbf7('0xb')][a84_0xbbf7('0xf')]({'path':a84_0xbbf7('0x11')});}const apiController=__importStar(require(a84_0xbbf7('0x12')));const app=express_1['default']();app[a84_0xbbf7('0x13')](a84_0xbbf7('0x14'),process[a84_0xbbf7('0x15')][a84_0xbbf7('0x16')]||0xbb8);app[a84_0xbbf7('0x13')]('views',path_1[a84_0xbbf7('0xb')][a84_0xbbf7('0x17')](__dirname,'../views'));app[a84_0xbbf7('0x13')](a84_0xbbf7('0x18'),a84_0xbbf7('0x19'));app[a84_0xbbf7('0x1a')](compression_1['default']());app[a84_0xbbf7('0x1a')](body_parser_1[a84_0xbbf7('0xb')][a84_0xbbf7('0x1b')]());app[a84_0xbbf7('0x1a')](body_parser_1['default']['urlencoded']({'extended':!![]}));app[a84_0xbbf7('0x1a')](express_validator_1[a84_0xbbf7('0xb')]());app[a84_0xbbf7('0x1a')](passport_1[a84_0xbbf7('0xb')][a84_0xbbf7('0x1c')]());app[a84_0xbbf7('0x1a')](passport_1[a84_0xbbf7('0xb')][a84_0xbbf7('0x1d')]());app['use'](express_flash_1[a84_0xbbf7('0xb')]());app['use'](lusca_1[a84_0xbbf7('0xb')]['xframe'](a84_0xbbf7('0x1e')));app[a84_0xbbf7('0x1a')](lusca_1[a84_0xbbf7('0xb')]['xssProtection'](!![]));app[a84_0xbbf7('0x1a')]((_0x3ce390,_0x234a7b,_0x4a0a1f)=>{_0x234a7b[a84_0xbbf7('0x1f')][a84_0xbbf7('0x20')]=_0x3ce390[a84_0xbbf7('0x20')];_0x4a0a1f();});app[a84_0xbbf7('0x1a')]((_0x49201c,_0x10bdbb,_0x2c6450)=>{_0x2c6450();});app['use'](express_1[a84_0xbbf7('0xb')][a84_0xbbf7('0x21')](path_1[a84_0xbbf7('0xb')][a84_0xbbf7('0x17')](__dirname,'public'),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a84_0xbbf7('0x22')));const models_1=__importDefault(require(a84_0xbbf7('0x23')));const routes_1=__importDefault(require(a84_0xbbf7('0x24')));const sequelize_utils_1=__importDefault(require(a84_0xbbf7('0x25')));const models=new models_1['default'](sequelize_1[a84_0xbbf7('0xb')]);sequelize_utils_1[a84_0xbbf7('0xb')]['models']=models;routes_1[a84_0xbbf7('0xb')](app,passport_1[a84_0xbbf7('0xb')],models);require(a84_0xbbf7('0x26'))(passport_1[a84_0xbbf7('0xb')],models[a84_0xbbf7('0x27')]);sequelize_utils_1[a84_0xbbf7('0xb')][a84_0xbbf7('0x28')]=sequelize_1[a84_0xbbf7('0xb')];apiController['setSequelize'](sequelize_1[a84_0xbbf7('0xb')]);const options={'exclude':['id',a84_0xbbf7('0x29'),a84_0xbbf7('0x2a'),a84_0xbbf7('0x2b'),a84_0xbbf7('0x2c'),a84_0xbbf7('0x2d'),a84_0xbbf7('0x2e')],'userModel':a84_0xbbf7('0x2f'),'revisionAttribute':a84_0xbbf7('0x30'),'revisionModel':a84_0xbbf7('0x30'),'revisionChangeModel':a84_0xbbf7('0x31'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a84_0xbbf7('0x32'),'revisionId':a84_0xbbf7('0x33')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':'current_user_request','continuationKey':'user_id'};const PaperTrail=require(a84_0xbbf7('0x34'))[a84_0xbbf7('0x35')](sequelize_1[a84_0xbbf7('0xb')],options);PaperTrail['defineModels']({});app[a84_0xbbf7('0x36')]('/api/syncftp',apiController['syncFtp']);app[a84_0xbbf7('0x36')](a84_0xbbf7('0x37'),apiController[a84_0xbbf7('0x38')]);app[a84_0xbbf7('0x36')]('/api/processFtp',apiController[a84_0xbbf7('0x39')]);app[a84_0xbbf7('0x36')]('/api/getPassCounting/:direction',apiController[a84_0xbbf7('0x3a')]);app[a84_0xbbf7('0x36')]('/api/getPassCountingByDay/:direction',apiController[a84_0xbbf7('0x3b')]);app[a84_0xbbf7('0x36')](a84_0xbbf7('0x3c'),apiController[a84_0xbbf7('0x3d')]);exports[a84_0xbbf7('0xb')]=app;