var a87_0x3fb5=['pug','use','json','urlencoded','initialize','xframe','SAMEORIGIN','xssProtection','user','static','public','./config/sequelize','./app/models','./app/routes','models','./config/passport','usersModel','instance','setSequelize','updatedAt','deletedAt','created_at','updated_at','deleted_at','users','revision','revision_change','document_id','revision_id','current_user_request','init','defineModels','get','/api/syncftp','syncFtp','/api/downloadFtp','/api/processFtp','/api/getPassCounting/:direction','getPassCounting','/api/getPassCountingByDay/:direction','getPassCountingByDay','/api/getPassCountingByHour/:direction','__importDefault','__esModule','__importStar','hasOwnProperty','call','default','express','compression','body-parser','lusca','dotenv','express-flash','path','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','.env.example','./controllers/api','set','env','views','join','view\x20engine'];(function(_0x17a345,_0x1c1c4b){var _0x5f49a9=function(_0x15c23f){while(--_0x15c23f){_0x17a345['push'](_0x17a345['shift']());}};_0x5f49a9(++_0x1c1c4b);}(a87_0x3fb5,0xb2));var a87_0x146b=function(_0x30d49e,_0x5bd11a){_0x30d49e=_0x30d49e-0x0;var _0x251c0f=a87_0x3fb5[_0x30d49e];return _0x251c0f;};'use strict';var __importDefault=this&&this[a87_0x146b('0x0')]||function(_0x48bd7f){return _0x48bd7f&&_0x48bd7f[a87_0x146b('0x1')]?_0x48bd7f:{'default':_0x48bd7f};};var __importStar=this&&this[a87_0x146b('0x2')]||function(_0x2bf884){if(_0x2bf884&&_0x2bf884[a87_0x146b('0x1')])return _0x2bf884;var _0x433469={};if(_0x2bf884!=null)for(var _0x4f6753 in _0x2bf884)if(Object[a87_0x146b('0x3')][a87_0x146b('0x4')](_0x2bf884,_0x4f6753))_0x433469[_0x4f6753]=_0x2bf884[_0x4f6753];_0x433469[a87_0x146b('0x5')]=_0x2bf884;return _0x433469;};Object['defineProperty'](exports,a87_0x146b('0x1'),{'value':!![]});const express_1=__importDefault(require(a87_0x146b('0x6')));const compression_1=__importDefault(require(a87_0x146b('0x7')));const body_parser_1=__importDefault(require(a87_0x146b('0x8')));const logger_1=__importDefault(require('./util/logger'));const lusca_1=__importDefault(require(a87_0x146b('0x9')));const dotenv_1=__importDefault(require(a87_0x146b('0xa')));const express_flash_1=__importDefault(require(a87_0x146b('0xb')));const path_1=__importDefault(require(a87_0x146b('0xc')));const passport_1=__importDefault(require('passport'));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));if(fs_1['default'][a87_0x146b('0xd')](a87_0x146b('0xe'))){logger_1['default'][a87_0x146b('0xf')](a87_0x146b('0x10'));dotenv_1[a87_0x146b('0x5')][a87_0x146b('0x11')]({'path':a87_0x146b('0xe')});}else{logger_1['default']['debug'](a87_0x146b('0x12'));dotenv_1[a87_0x146b('0x5')]['config']({'path':a87_0x146b('0x13')});}const apiController=__importStar(require(a87_0x146b('0x14')));const app=express_1[a87_0x146b('0x5')]();app[a87_0x146b('0x15')]('port',process[a87_0x146b('0x16')]['PORT']||0xbb8);app[a87_0x146b('0x15')](a87_0x146b('0x17'),path_1[a87_0x146b('0x5')][a87_0x146b('0x18')](__dirname,'../views'));app[a87_0x146b('0x15')](a87_0x146b('0x19'),a87_0x146b('0x1a'));app[a87_0x146b('0x1b')](compression_1[a87_0x146b('0x5')]());app[a87_0x146b('0x1b')](body_parser_1[a87_0x146b('0x5')][a87_0x146b('0x1c')]());app[a87_0x146b('0x1b')](body_parser_1[a87_0x146b('0x5')][a87_0x146b('0x1d')]({'extended':!![]}));app[a87_0x146b('0x1b')](express_validator_1['default']());app[a87_0x146b('0x1b')](passport_1[a87_0x146b('0x5')][a87_0x146b('0x1e')]());app[a87_0x146b('0x1b')](passport_1['default']['session']());app[a87_0x146b('0x1b')](express_flash_1['default']());app[a87_0x146b('0x1b')](lusca_1[a87_0x146b('0x5')][a87_0x146b('0x1f')](a87_0x146b('0x20')));app[a87_0x146b('0x1b')](lusca_1[a87_0x146b('0x5')][a87_0x146b('0x21')](!![]));app[a87_0x146b('0x1b')]((_0x57cfad,_0x16c33c,_0x7f0e4)=>{_0x16c33c['locals'][a87_0x146b('0x22')]=_0x57cfad['user'];_0x7f0e4();});app[a87_0x146b('0x1b')]((_0x330d32,_0x8bd25c,_0x5bba15)=>{_0x5bba15();});app[a87_0x146b('0x1b')](express_1[a87_0x146b('0x5')][a87_0x146b('0x23')](path_1[a87_0x146b('0x5')]['join'](__dirname,a87_0x146b('0x24')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a87_0x146b('0x25')));const models_1=__importDefault(require(a87_0x146b('0x26')));const routes_1=__importDefault(require(a87_0x146b('0x27')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const models=new models_1['default'](sequelize_1['default']);sequelize_utils_1['default'][a87_0x146b('0x28')]=models;routes_1[a87_0x146b('0x5')](app,passport_1[a87_0x146b('0x5')],models);require(a87_0x146b('0x29'))(passport_1[a87_0x146b('0x5')],models[a87_0x146b('0x2a')]);sequelize_utils_1[a87_0x146b('0x5')][a87_0x146b('0x2b')]=sequelize_1['default'];apiController[a87_0x146b('0x2c')](sequelize_1[a87_0x146b('0x5')]);const options={'exclude':['id','createdAt',a87_0x146b('0x2d'),a87_0x146b('0x2e'),a87_0x146b('0x2f'),a87_0x146b('0x30'),a87_0x146b('0x31')],'userModel':a87_0x146b('0x32'),'revisionAttribute':a87_0x146b('0x33'),'revisionModel':a87_0x146b('0x33'),'revisionChangeModel':a87_0x146b('0x34'),'enableRevisionChangeModel':!![],'UUID':![],'underscored':!![],'underscoredAttributes':!![],'defaultAttributes':{'documentId':a87_0x146b('0x35'),'revisionId':a87_0x146b('0x36')},'enableCompression':![],'enableMigration':![],'enableStrictDiff':!![],'continuationNamespace':a87_0x146b('0x37'),'continuationKey':'user_id'};const PaperTrail=require('sequelize-paper-trail')[a87_0x146b('0x38')](sequelize_1[a87_0x146b('0x5')],options);PaperTrail[a87_0x146b('0x39')]({});app[a87_0x146b('0x3a')](a87_0x146b('0x3b'),apiController[a87_0x146b('0x3c')]);app[a87_0x146b('0x3a')](a87_0x146b('0x3d'),apiController['downloadFtp']);app[a87_0x146b('0x3a')](a87_0x146b('0x3e'),apiController['processFtp']);app[a87_0x146b('0x3a')](a87_0x146b('0x3f'),apiController[a87_0x146b('0x40')]);app[a87_0x146b('0x3a')](a87_0x146b('0x41'),apiController[a87_0x146b('0x42')]);app[a87_0x146b('0x3a')](a87_0x146b('0x43'),apiController['getPassCountingByHour']);exports['default']=app;