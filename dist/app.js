var a176_0x40d7=['port','env','PORT','set','join','../views','view\x20engine','pug','use','json','10mb','DEV_MODE','options','session','SAMEORIGIN','user','public','./config/sequelize','./config/passport','usersModel','get','/api/syncftp','syncFtp','downloadFtp','/api/processFtp','processFtp','/api/getPassCounting/:direction','getPassCounting','getPassCountingByDay','/api/getPassCountingByHour/:direction','getPassCountingByHour','enable','trust\x20proxy','__importDefault','__esModule','hasOwnProperty','call','defineProperty','express','compression','body-parser','./util/logger','lusca','dotenv','express-flash','path','passport','cors','express-rate-limit','express-slow-down','default','existsSync','.env','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','debug','.env.example','./controllers/api'];(function(_0xf34179,_0x5b6b9b){var _0x554d0e=function(_0x5cae06){while(--_0x5cae06){_0xf34179['push'](_0xf34179['shift']());}};_0x554d0e(++_0x5b6b9b);}(a176_0x40d7,0x109));var a176_0x1366=function(_0x39aa7f,_0x32c1e6){_0x39aa7f=_0x39aa7f-0x0;var _0xa115d4=a176_0x40d7[_0x39aa7f];return _0xa115d4;};'use strict';var __importDefault=this&&this[a176_0x1366('0x0')]||function(_0x33c5cf){return _0x33c5cf&&_0x33c5cf[a176_0x1366('0x1')]?_0x33c5cf:{'default':_0x33c5cf};};var __importStar=this&&this['__importStar']||function(_0x3b1a3f){if(_0x3b1a3f&&_0x3b1a3f[a176_0x1366('0x1')])return _0x3b1a3f;var _0x2eb231={};if(_0x3b1a3f!=null)for(var _0x3dbe45 in _0x3b1a3f)if(Object[a176_0x1366('0x2')][a176_0x1366('0x3')](_0x3b1a3f,_0x3dbe45))_0x2eb231[_0x3dbe45]=_0x3b1a3f[_0x3dbe45];_0x2eb231['default']=_0x3b1a3f;return _0x2eb231;};Object[a176_0x1366('0x4')](exports,a176_0x1366('0x1'),{'value':!![]});const express_1=__importDefault(require(a176_0x1366('0x5')));const compression_1=__importDefault(require(a176_0x1366('0x6')));const body_parser_1=__importDefault(require(a176_0x1366('0x7')));const logger_1=__importDefault(require(a176_0x1366('0x8')));const lusca_1=__importDefault(require(a176_0x1366('0x9')));const dotenv_1=__importDefault(require(a176_0x1366('0xa')));const express_flash_1=__importDefault(require(a176_0x1366('0xb')));const path_1=__importDefault(require(a176_0x1366('0xc')));const passport_1=__importDefault(require(a176_0x1366('0xd')));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));const cors=require(a176_0x1366('0xe'));const rateLimit=require(a176_0x1366('0xf'));const slowDown=require(a176_0x1366('0x10'));if(fs_1[a176_0x1366('0x11')][a176_0x1366('0x12')](a176_0x1366('0x13'))){logger_1[a176_0x1366('0x11')]['debug'](a176_0x1366('0x14'));dotenv_1[a176_0x1366('0x11')][a176_0x1366('0x15')]({'path':a176_0x1366('0x13')});}else{logger_1[a176_0x1366('0x11')][a176_0x1366('0x16')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a176_0x1366('0x11')]['config']({'path':a176_0x1366('0x17')});}const apiController=__importStar(require(a176_0x1366('0x18')));const app=express_1[a176_0x1366('0x11')]();app['set'](a176_0x1366('0x19'),process[a176_0x1366('0x1a')][a176_0x1366('0x1b')]||0xbb8);app[a176_0x1366('0x1c')]('views',path_1[a176_0x1366('0x11')][a176_0x1366('0x1d')](__dirname,a176_0x1366('0x1e')));app[a176_0x1366('0x1c')](a176_0x1366('0x1f'),a176_0x1366('0x20'));app[a176_0x1366('0x21')](compression_1['default']());app[a176_0x1366('0x21')](body_parser_1[a176_0x1366('0x11')][a176_0x1366('0x22')]({'limit':'10mb'}));app[a176_0x1366('0x21')](body_parser_1[a176_0x1366('0x11')]['urlencoded']({'limit':a176_0x1366('0x23'),'extended':!![]}));if(process[a176_0x1366('0x1a')][a176_0x1366('0x24')]){app[a176_0x1366('0x21')](cors());app['use'](cors({'origin':!![]}));app[a176_0x1366('0x25')]('*',cors());}else{app[a176_0x1366('0x21')](cors());}app[a176_0x1366('0x21')](express_validator_1['default']());app[a176_0x1366('0x21')](passport_1[a176_0x1366('0x11')]['initialize']());app['use'](passport_1[a176_0x1366('0x11')][a176_0x1366('0x26')]());app[a176_0x1366('0x21')](express_flash_1[a176_0x1366('0x11')]());app[a176_0x1366('0x21')](lusca_1['default']['xframe'](a176_0x1366('0x27')));app[a176_0x1366('0x21')](lusca_1[a176_0x1366('0x11')]['xssProtection'](!![]));app[a176_0x1366('0x21')]((_0xa61d35,_0x5d196f,_0x3e62c6)=>{_0x5d196f['locals']['user']=_0xa61d35[a176_0x1366('0x28')];_0x3e62c6();});app[a176_0x1366('0x21')]((_0x2c834c,_0x50f2ef,_0x5a7dee)=>{_0x5a7dee();});app[a176_0x1366('0x21')](express_1['default']['static'](path_1[a176_0x1366('0x11')][a176_0x1366('0x1d')](__dirname,a176_0x1366('0x29')),{'maxAge':0x758fac300}));const sequelize_1=__importDefault(require(a176_0x1366('0x2a')));const models_1=__importDefault(require('./app/models'));const routes_1=__importDefault(require('./app/routes'));const controllers_1=__importDefault(require('./app/controllers'));const models=new models_1[(a176_0x1366('0x11'))](sequelize_1[a176_0x1366('0x11')]);const controllers=new controllers_1['default'](models);routes_1[a176_0x1366('0x11')](app,passport_1[a176_0x1366('0x11')],models,controllers);require(a176_0x1366('0x2b'))(passport_1[a176_0x1366('0x11')],models[a176_0x1366('0x2c')]);apiController['setSequelize'](sequelize_1[a176_0x1366('0x11')]);app[a176_0x1366('0x2d')](a176_0x1366('0x2e'),apiController[a176_0x1366('0x2f')]);app[a176_0x1366('0x2d')]('/api/downloadFtp',apiController[a176_0x1366('0x30')]);app[a176_0x1366('0x2d')](a176_0x1366('0x31'),apiController[a176_0x1366('0x32')]);app[a176_0x1366('0x2d')](a176_0x1366('0x33'),apiController[a176_0x1366('0x34')]);app[a176_0x1366('0x2d')]('/api/getPassCountingByDay/:direction',apiController[a176_0x1366('0x35')]);app[a176_0x1366('0x2d')](a176_0x1366('0x36'),apiController[a176_0x1366('0x37')]);const limiter=rateLimit({'windowMs':0x2*0x3c*0x3e8,'max':0x64});app[a176_0x1366('0x21')](limiter);app[a176_0x1366('0x38')](a176_0x1366('0x39'));const speedLimiter=slowDown({'windowMs':0x2*0x3c*0x3e8,'delayAfter':0x64,'delayMs':0x1f4});app[a176_0x1366('0x21')](speedLimiter);exports[a176_0x1366('0x11')]=app;