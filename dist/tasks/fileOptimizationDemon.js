var a222_0x323b=['exploreDir','bind','env','readdir','forEach','split','slice','join','existsSync','.mp4','createImageVideo','log','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','stderr','stderr:\x20','close','default','defineProperty','__esModule','spawn','fs-extra','is-image','videoConverting','start'];(function(_0xb03444,_0x1d7852){var _0x53bff7=function(_0xbb5874){while(--_0xbb5874){_0xb03444['push'](_0xb03444['shift']());}};_0x53bff7(++_0x1d7852);}(a222_0x323b,0x1cd));var a222_0x1691=function(_0x8d0114,_0x746c35){_0x8d0114=_0x8d0114-0x0;var _0x237b15=a222_0x323b[_0x8d0114];return _0x237b15;};'use strict';Object[a222_0x1691('0x0')](exports,a222_0x1691('0x1'),{'value':!![]});const fs=require('fs');const spawn=require('child_process')[a222_0x1691('0x2')];const fsExtra=require(a222_0x1691('0x3'));const isImage=require(a222_0x1691('0x4'));class FileOptimizationTask{constructor(){this[a222_0x1691('0x5')]=![];}[a222_0x1691('0x6')](){const _0x1039ed=setInterval(function(){this[a222_0x1691('0x7')]();}[a222_0x1691('0x8')](this),0x1388);}[a222_0x1691('0x7')](){const _0x43e664=process[a222_0x1691('0x9')]['IMAGE_FILES_FOLDER'];console['log']('exploreDir:\x20'+_0x43e664);fs[a222_0x1691('0xa')](_0x43e664,(_0x5b9b89,_0x43bca1)=>{if(_0x43bca1!=null){_0x43bca1[a222_0x1691('0xb')](_0x8196ed=>{const _0x577834=0x14;const _0x5e15e6=_0x8196ed[a222_0x1691('0xc')]('.')[a222_0x1691('0xd')](0x0,-0x1)[a222_0x1691('0xe')]('.');if(isImage(_0x8196ed)&&!this['videoConverting']&&!fsExtra[a222_0x1691('0xf')](_0x43e664+_0x5e15e6+a222_0x1691('0x10'))){this['videoConverting']=!![];this[a222_0x1691('0x11')](_0x43e664,_0x8196ed,_0x577834);}});}});}[a222_0x1691('0x11')](_0x3b027f,_0x1f4800,_0x28ff7f=0x1e){const _0x1cac62=_0x3b027f+''+_0x1f4800;console[a222_0x1691('0x12')](_0x1cac62);console[a222_0x1691('0x12')](_0x1f4800);const _0x48fa16=_0x1f4800[a222_0x1691('0xc')]('.')['slice'](0x0,-0x1)[a222_0x1691('0xe')]('.');const _0xc574a3=a222_0x1691('0x13');const _0x92cdd8=['-y','-r',a222_0x1691('0x14'),a222_0x1691('0x15'),'1',a222_0x1691('0x16'),a222_0x1691('0x17'),'-i',_0x1cac62,'-t',String(_0x28ff7f),a222_0x1691('0x18'),a222_0x1691('0x19'),a222_0x1691('0x1a'),a222_0x1691('0x1b'),'-r','25',a222_0x1691('0x1c'),a222_0x1691('0x1d'),_0x3b027f+_0x48fa16+'.mp4'];const _0x23eb7b=spawn(_0xc574a3,_0x92cdd8);_0x23eb7b[a222_0x1691('0x1e')]['on'](a222_0x1691('0x1f'),function(_0xe2e167){console[a222_0x1691('0x12')]('Converting\x20'+_0x1cac62);});_0x23eb7b[a222_0x1691('0x20')]['on'](a222_0x1691('0x1f'),function(_0x2fd0fc){console[a222_0x1691('0x12')](a222_0x1691('0x21')+_0x2fd0fc);}[a222_0x1691('0x8')](this));_0x23eb7b['on'](a222_0x1691('0x22'),function(){console[a222_0x1691('0x12')]('finished\x20mp4\x20convert');this[a222_0x1691('0x5')]=![];}[a222_0x1691('0x8')](this));}}exports[a222_0x1691('0x23')]=FileOptimizationTask;