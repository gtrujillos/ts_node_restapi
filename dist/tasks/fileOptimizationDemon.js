var a111_0x323b=['exploreDir','bind','env','readdir','forEach','split','slice','join','existsSync','.mp4','createImageVideo','log','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','stderr','stderr:\x20','close','default','defineProperty','__esModule','spawn','fs-extra','is-image','videoConverting','start'];(function(_0x1239d3,_0x22b11f){var _0x4f051a=function(_0x3a0f9e){while(--_0x3a0f9e){_0x1239d3['push'](_0x1239d3['shift']());}};_0x4f051a(++_0x22b11f);}(a111_0x323b,0x1cd));var a111_0x1691=function(_0x183914,_0x3a80b3){_0x183914=_0x183914-0x0;var _0x1aa5cd=a111_0x323b[_0x183914];return _0x1aa5cd;};'use strict';Object[a111_0x1691('0x0')](exports,a111_0x1691('0x1'),{'value':!![]});const fs=require('fs');const spawn=require('child_process')[a111_0x1691('0x2')];const fsExtra=require(a111_0x1691('0x3'));const isImage=require(a111_0x1691('0x4'));class FileOptimizationTask{constructor(){this[a111_0x1691('0x5')]=![];}[a111_0x1691('0x6')](){const _0x1039ed=setInterval(function(){this[a111_0x1691('0x7')]();}[a111_0x1691('0x8')](this),0x1388);}[a111_0x1691('0x7')](){const _0x43e664=process[a111_0x1691('0x9')]['IMAGE_FILES_FOLDER'];console['log']('exploreDir:\x20'+_0x43e664);fs[a111_0x1691('0xa')](_0x43e664,(_0x5b9b89,_0x43bca1)=>{if(_0x43bca1!=null){_0x43bca1[a111_0x1691('0xb')](_0x8196ed=>{const _0x577834=0x14;const _0x5e15e6=_0x8196ed[a111_0x1691('0xc')]('.')[a111_0x1691('0xd')](0x0,-0x1)[a111_0x1691('0xe')]('.');if(isImage(_0x8196ed)&&!this['videoConverting']&&!fsExtra[a111_0x1691('0xf')](_0x43e664+_0x5e15e6+a111_0x1691('0x10'))){this['videoConverting']=!![];this[a111_0x1691('0x11')](_0x43e664,_0x8196ed,_0x577834);}});}});}[a111_0x1691('0x11')](_0x3b027f,_0x1f4800,_0x28ff7f=0x1e){const _0x1cac62=_0x3b027f+''+_0x1f4800;console[a111_0x1691('0x12')](_0x1cac62);console[a111_0x1691('0x12')](_0x1f4800);const _0x48fa16=_0x1f4800[a111_0x1691('0xc')]('.')['slice'](0x0,-0x1)[a111_0x1691('0xe')]('.');const _0xc574a3=a111_0x1691('0x13');const _0x92cdd8=['-y','-r',a111_0x1691('0x14'),a111_0x1691('0x15'),'1',a111_0x1691('0x16'),a111_0x1691('0x17'),'-i',_0x1cac62,'-t',String(_0x28ff7f),a111_0x1691('0x18'),a111_0x1691('0x19'),a111_0x1691('0x1a'),a111_0x1691('0x1b'),'-r','25',a111_0x1691('0x1c'),a111_0x1691('0x1d'),_0x3b027f+_0x48fa16+'.mp4'];const _0x23eb7b=spawn(_0xc574a3,_0x92cdd8);_0x23eb7b[a111_0x1691('0x1e')]['on'](a111_0x1691('0x1f'),function(_0xe2e167){console[a111_0x1691('0x12')]('Converting\x20'+_0x1cac62);});_0x23eb7b[a111_0x1691('0x20')]['on'](a111_0x1691('0x1f'),function(_0x2fd0fc){console[a111_0x1691('0x12')](a111_0x1691('0x21')+_0x2fd0fc);}[a111_0x1691('0x8')](this));_0x23eb7b['on'](a111_0x1691('0x22'),function(){console[a111_0x1691('0x12')]('finished\x20mp4\x20convert');this[a111_0x1691('0x5')]=![];}[a111_0x1691('0x8')](this));}}exports[a111_0x1691('0x23')]=FileOptimizationTask;