var a118_0x462b=['stdout','data','Converting\x20','stderr','stderr:\x20','bind','close','finished\x20mp4\x20convert','defineProperty','__esModule','child_process','fs-extra','exploreDir','env','IMAGE_FILES_FOLDER','log','exploreDir:\x20','readdir','forEach','slice','join','videoConverting','existsSync','.mp4','createImageVideo','split','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','scale=1920:1080'];(function(_0x55efba,_0x18be2a){var _0x5ed985=function(_0x40f184){while(--_0x40f184){_0x55efba['push'](_0x55efba['shift']());}};_0x5ed985(++_0x18be2a);}(a118_0x462b,0x128));var a118_0x4691=function(_0x56c957,_0x2f6bde){_0x56c957=_0x56c957-0x0;var _0x1fccb0=a118_0x462b[_0x56c957];return _0x1fccb0;};'use strict';Object[a118_0x4691('0x0')](exports,a118_0x4691('0x1'),{'value':!![]});const fs=require('fs');const spawn=require(a118_0x4691('0x2'))['spawn'];const fsExtra=require(a118_0x4691('0x3'));const isImage=require('is-image');class FileOptimizationTask{constructor(){this['videoConverting']=![];}['start'](){const _0x19c60c=setInterval(function(){this['exploreDir']();}['bind'](this),0x2710);}[a118_0x4691('0x4')](){const _0x517726=process[a118_0x4691('0x5')][a118_0x4691('0x6')];console[a118_0x4691('0x7')](a118_0x4691('0x8')+_0x517726);fs[a118_0x4691('0x9')](_0x517726,(_0x5e0a44,_0x483381)=>{if(_0x483381!=null){_0x483381[a118_0x4691('0xa')](_0x221184=>{const _0x4ccd73=0x14;const _0xd4b0=_0x221184['split']('.')[a118_0x4691('0xb')](0x0,-0x1)[a118_0x4691('0xc')]('.');if(isImage(_0x221184)&&!this[a118_0x4691('0xd')]&&!fsExtra[a118_0x4691('0xe')](_0x517726+_0xd4b0+a118_0x4691('0xf'))){this['videoConverting']=!![];this[a118_0x4691('0x10')](_0x517726,_0x221184,_0x4ccd73);}});}});}['createImageVideo'](_0x485677,_0x2d15fa,_0x122bda=0xa){const _0x4dac4d=_0x485677+''+_0x2d15fa;console[a118_0x4691('0x7')](_0x4dac4d);console[a118_0x4691('0x7')](_0x2d15fa);const _0x203154=_0x2d15fa[a118_0x4691('0x11')]('.')[a118_0x4691('0xb')](0x0,-0x1)[a118_0x4691('0xc')]('.');const _0x2739ff=a118_0x4691('0x12');const _0x4b9768=['-y','-r',a118_0x4691('0x13'),a118_0x4691('0x14'),'1',a118_0x4691('0x15'),a118_0x4691('0x16'),'-i',_0x4dac4d,'-t',String(_0x122bda),a118_0x4691('0x17'),'libx264',a118_0x4691('0x18'),a118_0x4691('0x19'),'-r','25',a118_0x4691('0x1a'),a118_0x4691('0x1b'),_0x485677+_0x203154+a118_0x4691('0xf')];const _0x18a984=spawn(_0x2739ff,_0x4b9768);_0x18a984[a118_0x4691('0x1c')]['on'](a118_0x4691('0x1d'),function(_0x504a92){console[a118_0x4691('0x7')](a118_0x4691('0x1e')+_0x4dac4d);});_0x18a984[a118_0x4691('0x1f')]['on']('data',function(_0xdfe7fe){console[a118_0x4691('0x7')](a118_0x4691('0x20')+_0xdfe7fe);}[a118_0x4691('0x21')](this));_0x18a984['on'](a118_0x4691('0x22'),function(){console[a118_0x4691('0x7')](a118_0x4691('0x23'));this['videoConverting']=![];}[a118_0x4691('0x21')](this));}}exports['default']=FileOptimizationTask;