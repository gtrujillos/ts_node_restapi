var a223_0x1a83=['log','ffmpeg','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','yuv420p','scale=1920:1080','stdout','data','stderr','stderr:\x20','bind','finished\x20mp4\x20convert','default','defineProperty','spawn','fs-extra','is-image','videoConverting','start','exploreDir','forEach','split','slice','join','existsSync','.mp4','createImageVideo'];(function(_0x328b7a,_0x33dc19){var _0x57a626=function(_0x1efe8d){while(--_0x1efe8d){_0x328b7a['push'](_0x328b7a['shift']());}};_0x57a626(++_0x33dc19);}(a223_0x1a83,0xcb));var a223_0x46d5=function(_0x427c7b,_0x2f5c95){_0x427c7b=_0x427c7b-0x0;var _0x2b3be5=a223_0x1a83[_0x427c7b];return _0x2b3be5;};'use strict';Object[a223_0x46d5('0x0')](exports,'__esModule',{'value':!![]});const fs=require('fs');const spawn=require('child_process')[a223_0x46d5('0x1')];const fsExtra=require(a223_0x46d5('0x2'));const isImage=require(a223_0x46d5('0x3'));class FileOptimizationTask{constructor(){this[a223_0x46d5('0x4')]=![];}[a223_0x46d5('0x5')](){const _0x1a65fa=setInterval(function(){this[a223_0x46d5('0x6')]();}['bind'](this),0x2710);}[a223_0x46d5('0x6')](){const _0x344dfc=process['env']['IMAGE_FILES_FOLDER'];console['log']('exploreDir:\x20'+_0x344dfc);fs['readdir'](_0x344dfc,(_0x43afe6,_0x25fc55)=>{if(_0x25fc55!=null){_0x25fc55[a223_0x46d5('0x7')](_0x1e8819=>{const _0x3954d0=0x14;const _0x13b72a=_0x1e8819[a223_0x46d5('0x8')]('.')[a223_0x46d5('0x9')](0x0,-0x1)[a223_0x46d5('0xa')]('.');if(isImage(_0x1e8819)&&!this[a223_0x46d5('0x4')]&&!fsExtra[a223_0x46d5('0xb')](_0x344dfc+_0x13b72a+a223_0x46d5('0xc'))){this[a223_0x46d5('0x4')]=!![];this[a223_0x46d5('0xd')](_0x344dfc,_0x1e8819,_0x3954d0);}});}});}[a223_0x46d5('0xd')](_0x57e230,_0x25d449,_0x5ced53=0xa){const _0x559db4=_0x57e230+''+_0x25d449;console[a223_0x46d5('0xe')](_0x559db4);console[a223_0x46d5('0xe')](_0x25d449);const _0x316c2b=_0x25d449[a223_0x46d5('0x8')]('.')[a223_0x46d5('0x9')](0x0,-0x1)[a223_0x46d5('0xa')]('.');const _0x2472b7=a223_0x46d5('0xf');const _0x4eb893=['-y','-r',a223_0x46d5('0x10'),a223_0x46d5('0x11'),'1',a223_0x46d5('0x12'),'glob','-i',_0x559db4,'-t',String(_0x5ced53),a223_0x46d5('0x13'),a223_0x46d5('0x14'),a223_0x46d5('0x15'),a223_0x46d5('0x16'),'-r','25','-vf',a223_0x46d5('0x17'),_0x57e230+_0x316c2b+a223_0x46d5('0xc')];const _0xdd134a=spawn(_0x2472b7,_0x4eb893);_0xdd134a[a223_0x46d5('0x18')]['on'](a223_0x46d5('0x19'),function(_0x125932){console[a223_0x46d5('0xe')]('Converting\x20'+_0x559db4);});_0xdd134a[a223_0x46d5('0x1a')]['on'](a223_0x46d5('0x19'),function(_0x2128af){console['log'](a223_0x46d5('0x1b')+_0x2128af);}[a223_0x46d5('0x1c')](this));_0xdd134a['on']('close',function(){console[a223_0x46d5('0xe')](a223_0x46d5('0x1d'));this[a223_0x46d5('0x4')]=![];}['bind'](this));}}exports[a223_0x46d5('0x1e')]=FileOptimizationTask;