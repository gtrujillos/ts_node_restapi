var a223_0x45d5=['bind','IMAGE_FILES_FOLDER','log','exploreDir:\x20','readdir','forEach','split','join','existsSync','.mp4','slice','1/2','-loop','-pattern_type','glob','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','close','default','defineProperty','__esModule','child_process','spawn','fs-extra','videoConverting','start','exploreDir'];(function(_0x3062f7,_0x5a280d){var _0x125c15=function(_0x731a37){while(--_0x731a37){_0x3062f7['push'](_0x3062f7['shift']());}};_0x125c15(++_0x5a280d);}(a223_0x45d5,0x80));var a223_0x198f=function(_0x26911f,_0x42ef24){_0x26911f=_0x26911f-0x0;var _0x3703e8=a223_0x45d5[_0x26911f];return _0x3703e8;};'use strict';Object[a223_0x198f('0x0')](exports,a223_0x198f('0x1'),{'value':!![]});const fs=require('fs');const spawn=require(a223_0x198f('0x2'))[a223_0x198f('0x3')];const fsExtra=require(a223_0x198f('0x4'));const isImage=require('is-image');class FileOptimizationTask{constructor(){this[a223_0x198f('0x5')]=![];}[a223_0x198f('0x6')](){const _0x595ede=setInterval(function(){this[a223_0x198f('0x7')]();}[a223_0x198f('0x8')](this),0x2710);}['exploreDir'](){const _0x277679=process['env'][a223_0x198f('0x9')];console[a223_0x198f('0xa')](a223_0x198f('0xb')+_0x277679);fs[a223_0x198f('0xc')](_0x277679,(_0x2d1aba,_0x12c3ab)=>{if(_0x12c3ab!=null){_0x12c3ab[a223_0x198f('0xd')](_0x4387f8=>{const _0x3e2de2=0x14;const _0x3215a0=_0x4387f8[a223_0x198f('0xe')]('.')['slice'](0x0,-0x1)[a223_0x198f('0xf')]('.');if(isImage(_0x4387f8)&&!this[a223_0x198f('0x5')]&&!fsExtra[a223_0x198f('0x10')](_0x277679+_0x3215a0+a223_0x198f('0x11'))){this[a223_0x198f('0x5')]=!![];this['createImageVideo'](_0x277679,_0x4387f8,_0x3e2de2);}});}});}['createImageVideo'](_0x30d46b,_0x49cf15,_0x3ffe98=0xa){const _0x4c8b28=_0x30d46b+''+_0x49cf15;console[a223_0x198f('0xa')](_0x4c8b28);console['log'](_0x49cf15);const _0x2397fc=_0x49cf15[a223_0x198f('0xe')]('.')[a223_0x198f('0x12')](0x0,-0x1)[a223_0x198f('0xf')]('.');const _0x54dcb1='ffmpeg';const _0x4bc573=['-y','-r',a223_0x198f('0x13'),a223_0x198f('0x14'),'1',a223_0x198f('0x15'),a223_0x198f('0x16'),'-i',_0x4c8b28,'-t',String(_0x3ffe98),'-c:v','libx264',a223_0x198f('0x17'),a223_0x198f('0x18'),'-r','25',a223_0x198f('0x19'),a223_0x198f('0x1a'),_0x30d46b+_0x2397fc+a223_0x198f('0x11')];const _0x403b93=spawn(_0x54dcb1,_0x4bc573);_0x403b93[a223_0x198f('0x1b')]['on'](a223_0x198f('0x1c'),function(_0x5d9ea1){console['log'](a223_0x198f('0x1d')+_0x4c8b28);});_0x403b93[a223_0x198f('0x1e')]['on'](a223_0x198f('0x1c'),function(_0xaac714){console[a223_0x198f('0xa')](a223_0x198f('0x1f')+_0xaac714);}[a223_0x198f('0x8')](this));_0x403b93['on'](a223_0x198f('0x20'),function(){console[a223_0x198f('0xa')]('finished\x20mp4\x20convert');this['videoConverting']=![];}[a223_0x198f('0x8')](this));}}exports[a223_0x198f('0x21')]=FileOptimizationTask;