var a223_0x4e2f=['Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','__esModule','child_process','videoConverting','start','exploreDir','bind','env','log','readdir','forEach','split','slice','join','existsSync','.mp4','createImageVideo','ffmpeg','-loop','-pattern_type','-c:v','libx264','-pix_fmt','-vf','stdout','data'];(function(_0x3e3bdb,_0x590bb1){var _0x3e6228=function(_0x31d05c){while(--_0x31d05c){_0x3e3bdb['push'](_0x3e3bdb['shift']());}};_0x3e6228(++_0x590bb1);}(a223_0x4e2f,0x1e5));var a223_0x2a03=function(_0x1c2a7d,_0x2e4d44){_0x1c2a7d=_0x1c2a7d-0x0;var _0x17f675=a223_0x4e2f[_0x1c2a7d];return _0x17f675;};'use strict';Object['defineProperty'](exports,a223_0x2a03('0x0'),{'value':!![]});const fs=require('fs');const spawn=require(a223_0x2a03('0x1'))['spawn'];const fsExtra=require('fs-extra');const isImage=require('is-image');class FileOptimizationTask{constructor(){this[a223_0x2a03('0x2')]=![];}[a223_0x2a03('0x3')](){const _0x480821=setInterval(function(){this[a223_0x2a03('0x4')]();}[a223_0x2a03('0x5')](this),0x2710);}[a223_0x2a03('0x4')](){const _0x578dc0=process[a223_0x2a03('0x6')]['IMAGE_FILES_FOLDER'];console[a223_0x2a03('0x7')]('exploreDir:\x20'+_0x578dc0);fs[a223_0x2a03('0x8')](_0x578dc0,(_0x17f1c6,_0x504a2c)=>{if(_0x504a2c!=null){_0x504a2c[a223_0x2a03('0x9')](_0x28ec9a=>{const _0x4ad335=0x14;const _0x22aec0=_0x28ec9a[a223_0x2a03('0xa')]('.')[a223_0x2a03('0xb')](0x0,-0x1)[a223_0x2a03('0xc')]('.');if(isImage(_0x28ec9a)&&!this[a223_0x2a03('0x2')]&&!fsExtra[a223_0x2a03('0xd')](_0x578dc0+_0x22aec0+a223_0x2a03('0xe'))){this['videoConverting']=!![];this[a223_0x2a03('0xf')](_0x578dc0,_0x28ec9a,_0x4ad335);}});}});}[a223_0x2a03('0xf')](_0x538dea,_0x53260e,_0x2087d1=0xa){const _0xde2328=_0x538dea+''+_0x53260e;console[a223_0x2a03('0x7')](_0xde2328);console[a223_0x2a03('0x7')](_0x53260e);const _0x463515=_0x53260e[a223_0x2a03('0xa')]('.')['slice'](0x0,-0x1)['join']('.');const _0x322538=a223_0x2a03('0x10');const _0x47af6b=['-y','-r','1/2',a223_0x2a03('0x11'),'1',a223_0x2a03('0x12'),'glob','-i',_0xde2328,'-t',String(_0x2087d1),a223_0x2a03('0x13'),a223_0x2a03('0x14'),a223_0x2a03('0x15'),'yuv420p','-r','25',a223_0x2a03('0x16'),'scale=1920:1080',_0x538dea+_0x463515+a223_0x2a03('0xe')];const _0x34a7d2=spawn(_0x322538,_0x47af6b);_0x34a7d2[a223_0x2a03('0x17')]['on'](a223_0x2a03('0x18'),function(_0x30b1a2){console[a223_0x2a03('0x7')](a223_0x2a03('0x19')+_0xde2328);});_0x34a7d2[a223_0x2a03('0x1a')]['on']('data',function(_0x1a8fd2){console['log'](a223_0x2a03('0x1b')+_0x1a8fd2);}[a223_0x2a03('0x5')](this));_0x34a7d2['on'](a223_0x2a03('0x1c'),function(){console[a223_0x2a03('0x7')](a223_0x2a03('0x1d'));this[a223_0x2a03('0x2')]=![];}[a223_0x2a03('0x5')](this));}}exports['default']=FileOptimizationTask;