var a127_0x559b=['defineProperty','__esModule','spawn','is-image','videoConverting','start','bind','exploreDir','env','IMAGE_FILES_FOLDER','log','exploreDir:\x20','readdir','forEach','split','slice','join','existsSync','.mp4','createImageVideo','ffmpeg','1/2','-loop','-pattern_type','glob','libx264','-pix_fmt','stdout','data','Converting\x20','stderr','close','finished\x20mp4\x20convert','default'];(function(_0x461722,_0x1a2577){var _0x3913e5=function(_0x4309a9){while(--_0x4309a9){_0x461722['push'](_0x461722['shift']());}};_0x3913e5(++_0x1a2577);}(a127_0x559b,0x1dc));var a127_0x5ca6=function(_0x3f20fa,_0xdcce45){_0x3f20fa=_0x3f20fa-0x0;var _0x4fbffa=a127_0x559b[_0x3f20fa];return _0x4fbffa;};'use strict';Object[a127_0x5ca6('0x0')](exports,a127_0x5ca6('0x1'),{'value':!![]});const fs=require('fs');const spawn=require('child_process')[a127_0x5ca6('0x2')];const fsExtra=require('fs-extra');const isImage=require(a127_0x5ca6('0x3'));class FileOptimizationTask{constructor(){this[a127_0x5ca6('0x4')]=![];}[a127_0x5ca6('0x5')](){const _0x55cd28=setInterval(function(){this['exploreDir']();}[a127_0x5ca6('0x6')](this),0x2710);}[a127_0x5ca6('0x7')](){const _0x1a3739=process[a127_0x5ca6('0x8')][a127_0x5ca6('0x9')];console[a127_0x5ca6('0xa')](a127_0x5ca6('0xb')+_0x1a3739);fs[a127_0x5ca6('0xc')](_0x1a3739,(_0x31e9b1,_0x52dc75)=>{if(_0x52dc75!=null){_0x52dc75[a127_0x5ca6('0xd')](_0x140cd5=>{const _0x2d4f2d=0x14;const _0x347ee0=_0x140cd5[a127_0x5ca6('0xe')]('.')[a127_0x5ca6('0xf')](0x0,-0x1)[a127_0x5ca6('0x10')]('.');if(isImage(_0x140cd5)&&!this[a127_0x5ca6('0x4')]&&!fsExtra[a127_0x5ca6('0x11')](_0x1a3739+_0x347ee0+a127_0x5ca6('0x12'))){this[a127_0x5ca6('0x4')]=!![];this[a127_0x5ca6('0x13')](_0x1a3739,_0x140cd5,_0x2d4f2d);}});}});}[a127_0x5ca6('0x13')](_0x395321,_0x4dd585,_0x1f3f8f=0xa){const _0x2bf133=_0x395321+''+_0x4dd585;console['log'](_0x2bf133);console[a127_0x5ca6('0xa')](_0x4dd585);const _0x140c4b=_0x4dd585[a127_0x5ca6('0xe')]('.')[a127_0x5ca6('0xf')](0x0,-0x1)[a127_0x5ca6('0x10')]('.');const _0xc334b2=a127_0x5ca6('0x14');const _0x3d7c6d=['-y','-r',a127_0x5ca6('0x15'),a127_0x5ca6('0x16'),'1',a127_0x5ca6('0x17'),a127_0x5ca6('0x18'),'-i',_0x2bf133,'-t',String(_0x1f3f8f),'-c:v',a127_0x5ca6('0x19'),a127_0x5ca6('0x1a'),'yuv420p','-r','25','-vf','scale=1920:1080',_0x395321+_0x140c4b+a127_0x5ca6('0x12')];const _0xb3e981=spawn(_0xc334b2,_0x3d7c6d);_0xb3e981[a127_0x5ca6('0x1b')]['on'](a127_0x5ca6('0x1c'),function(_0x2a6667){console['log'](a127_0x5ca6('0x1d')+_0x2bf133);});_0xb3e981[a127_0x5ca6('0x1e')]['on'](a127_0x5ca6('0x1c'),function(_0xc05363){console[a127_0x5ca6('0xa')]('stderr:\x20'+_0xc05363);}[a127_0x5ca6('0x6')](this));_0xb3e981['on'](a127_0x5ca6('0x1f'),function(){console[a127_0x5ca6('0xa')](a127_0x5ca6('0x20'));this[a127_0x5ca6('0x4')]=![];}['bind'](this));}}exports[a127_0x5ca6('0x21')]=FileOptimizationTask;