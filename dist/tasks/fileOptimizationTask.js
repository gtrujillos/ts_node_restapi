var a223_0x40c2=['default','defineProperty','__esModule','child_process','fs-extra','is-image','videoConverting','exploreDir','bind','env','IMAGE_FILES_FOLDER','log','readdir','forEach','split','existsSync','.mp4','createImageVideo','slice','join','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert'];(function(_0x1fe9de,_0xad39b8){var _0x22e388=function(_0x29e024){while(--_0x29e024){_0x1fe9de['push'](_0x1fe9de['shift']());}};_0x22e388(++_0xad39b8);}(a223_0x40c2,0x1d5));var a223_0x320e=function(_0x2f3e31,_0x3a89c9){_0x2f3e31=_0x2f3e31-0x0;var _0x2c6db2=a223_0x40c2[_0x2f3e31];return _0x2c6db2;};'use strict';Object[a223_0x320e('0x0')](exports,a223_0x320e('0x1'),{'value':!![]});const fs=require('fs');const spawn=require(a223_0x320e('0x2'))['spawn'];const fsExtra=require(a223_0x320e('0x3'));const isImage=require(a223_0x320e('0x4'));class FileOptimizationTask{constructor(){this[a223_0x320e('0x5')]=![];}['start'](){const _0x67a9b0=setInterval(function(){this[a223_0x320e('0x6')]();}[a223_0x320e('0x7')](this),0x2710);}[a223_0x320e('0x6')](){const _0x163a08=process[a223_0x320e('0x8')][a223_0x320e('0x9')];console[a223_0x320e('0xa')]('exploreDir:\x20'+_0x163a08);fs[a223_0x320e('0xb')](_0x163a08,(_0x392b85,_0x106c30)=>{if(_0x106c30!=null){_0x106c30[a223_0x320e('0xc')](_0x8cdc14=>{const _0x15aade=0x14;const _0xe03ffa=_0x8cdc14[a223_0x320e('0xd')]('.')['slice'](0x0,-0x1)['join']('.');if(isImage(_0x8cdc14)&&!this['videoConverting']&&!fsExtra[a223_0x320e('0xe')](_0x163a08+_0xe03ffa+a223_0x320e('0xf'))){this[a223_0x320e('0x5')]=!![];this[a223_0x320e('0x10')](_0x163a08,_0x8cdc14,_0x15aade);}});}});}[a223_0x320e('0x10')](_0x4a4f53,_0x30af7c,_0x1b3bb8=0xa){const _0x2d58e9=_0x4a4f53+''+_0x30af7c;console['log'](_0x2d58e9);console['log'](_0x30af7c);const _0x4c366c=_0x30af7c[a223_0x320e('0xd')]('.')[a223_0x320e('0x11')](0x0,-0x1)[a223_0x320e('0x12')]('.');const _0x1c7294=a223_0x320e('0x13');const _0x45cda0=['-y','-r',a223_0x320e('0x14'),a223_0x320e('0x15'),'1',a223_0x320e('0x16'),a223_0x320e('0x17'),'-i',_0x2d58e9,'-t',String(_0x1b3bb8),a223_0x320e('0x18'),'libx264',a223_0x320e('0x19'),a223_0x320e('0x1a'),'-r','25',a223_0x320e('0x1b'),a223_0x320e('0x1c'),_0x4a4f53+_0x4c366c+a223_0x320e('0xf')];const _0x397b16=spawn(_0x1c7294,_0x45cda0);_0x397b16[a223_0x320e('0x1d')]['on'](a223_0x320e('0x1e'),function(_0x20901e){console['log'](a223_0x320e('0x1f')+_0x2d58e9);});_0x397b16[a223_0x320e('0x20')]['on'](a223_0x320e('0x1e'),function(_0x1adadc){console[a223_0x320e('0xa')](a223_0x320e('0x21')+_0x1adadc);}[a223_0x320e('0x7')](this));_0x397b16['on']('close',function(){console[a223_0x320e('0xa')](a223_0x320e('0x22'));this[a223_0x320e('0x5')]=![];}[a223_0x320e('0x7')](this));}}exports[a223_0x320e('0x23')]=FileOptimizationTask;