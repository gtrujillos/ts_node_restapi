var a118_0x55b1=['1/2','-loop','-pattern_type','glob','-c:v','libx264','yuv420p','scale=1920:1080','stdout','data','stderr:\x20','close','finished\x20mp4\x20convert','bind','default','__esModule','spawn','fs-extra','is-image','start','exploreDir','log','exploreDir:\x20','readdir','forEach','split','slice','join','videoConverting','existsSync','.mp4','createImageVideo','ffmpeg'];(function(_0x1196c6,_0x44e6fa){var _0x18d0d0=function(_0x300794){while(--_0x300794){_0x1196c6['push'](_0x1196c6['shift']());}};_0x18d0d0(++_0x44e6fa);}(a118_0x55b1,0x117));var a118_0x2da9=function(_0x5c8699,_0x63a1e7){_0x5c8699=_0x5c8699-0x0;var _0x2bd2cd=a118_0x55b1[_0x5c8699];return _0x2bd2cd;};'use strict';Object['defineProperty'](exports,a118_0x2da9('0x0'),{'value':!![]});const fs=require('fs');const spawn=require('child_process')[a118_0x2da9('0x1')];const fsExtra=require(a118_0x2da9('0x2'));const isImage=require(a118_0x2da9('0x3'));class FileOptimizationTask{constructor(){this['videoConverting']=![];}[a118_0x2da9('0x4')](){const _0x31d312=setInterval(function(){this['exploreDir']();}['bind'](this),0x2710);}[a118_0x2da9('0x5')](){const _0xb84a05=process['env']['IMAGE_FILES_FOLDER'];console[a118_0x2da9('0x6')](a118_0x2da9('0x7')+_0xb84a05);fs[a118_0x2da9('0x8')](_0xb84a05,(_0x24fa28,_0x4554f6)=>{if(_0x4554f6!=null){_0x4554f6[a118_0x2da9('0x9')](_0xe754b3=>{const _0x45234e=0x14;const _0x579e72=_0xe754b3[a118_0x2da9('0xa')]('.')[a118_0x2da9('0xb')](0x0,-0x1)[a118_0x2da9('0xc')]('.');if(isImage(_0xe754b3)&&!this[a118_0x2da9('0xd')]&&!fsExtra[a118_0x2da9('0xe')](_0xb84a05+_0x579e72+a118_0x2da9('0xf'))){this[a118_0x2da9('0xd')]=!![];this['createImageVideo'](_0xb84a05,_0xe754b3,_0x45234e);}});}});}[a118_0x2da9('0x10')](_0x121723,_0x5b82f8,_0x4c75d2=0xa){const _0x7b67a2=_0x121723+''+_0x5b82f8;console['log'](_0x7b67a2);console[a118_0x2da9('0x6')](_0x5b82f8);const _0x170177=_0x5b82f8[a118_0x2da9('0xa')]('.')[a118_0x2da9('0xb')](0x0,-0x1)['join']('.');const _0x17d8e8=a118_0x2da9('0x11');const _0x31255a=['-y','-r',a118_0x2da9('0x12'),a118_0x2da9('0x13'),'1',a118_0x2da9('0x14'),a118_0x2da9('0x15'),'-i',_0x7b67a2,'-t',String(_0x4c75d2),a118_0x2da9('0x16'),a118_0x2da9('0x17'),'-pix_fmt',a118_0x2da9('0x18'),'-r','25','-vf',a118_0x2da9('0x19'),_0x121723+_0x170177+'.mp4'];const _0x238b83=spawn(_0x17d8e8,_0x31255a);_0x238b83[a118_0x2da9('0x1a')]['on'](a118_0x2da9('0x1b'),function(_0x5768db){console['log']('Converting\x20'+_0x7b67a2);});_0x238b83['stderr']['on'](a118_0x2da9('0x1b'),function(_0x2d8f1b){console[a118_0x2da9('0x6')](a118_0x2da9('0x1c')+_0x2d8f1b);}['bind'](this));_0x238b83['on'](a118_0x2da9('0x1d'),function(){console[a118_0x2da9('0x6')](a118_0x2da9('0x1e'));this[a118_0x2da9('0xd')]=![];}[a118_0x2da9('0x1f')](this));}}exports[a118_0x2da9('0x20')]=FileOptimizationTask;