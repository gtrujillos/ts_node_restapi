var a118_0x1a6a=['stdout','data','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','__esModule','child_process','spawn','videoConverting','start','exploreDir','bind','env','IMAGE_FILES_FOLDER','log','exploreDir:\x20','readdir','forEach','slice','join','existsSync','.mp4','ffmpeg','1/2','-loop','-pattern_type','glob','libx264','-pix_fmt','yuv420p','-vf'];(function(_0x56656b,_0x34267d){var _0x1b121e=function(_0x15a653){while(--_0x15a653){_0x56656b['push'](_0x56656b['shift']());}};_0x1b121e(++_0x34267d);}(a118_0x1a6a,0x106));var a118_0x4372=function(_0x1db2e1,_0x2b3ba9){_0x1db2e1=_0x1db2e1-0x0;var _0x57b4b9=a118_0x1a6a[_0x1db2e1];return _0x57b4b9;};'use strict';Object['defineProperty'](exports,a118_0x4372('0x0'),{'value':!![]});const fs=require('fs');const spawn=require(a118_0x4372('0x1'))[a118_0x4372('0x2')];const fsExtra=require('fs-extra');const isImage=require('is-image');class FileOptimizationTask{constructor(){this[a118_0x4372('0x3')]=![];}[a118_0x4372('0x4')](){const _0x5b1233=setInterval(function(){this[a118_0x4372('0x5')]();}[a118_0x4372('0x6')](this),0x2710);}[a118_0x4372('0x5')](){const _0x16caed=process[a118_0x4372('0x7')][a118_0x4372('0x8')];console[a118_0x4372('0x9')](a118_0x4372('0xa')+_0x16caed);fs[a118_0x4372('0xb')](_0x16caed,(_0x1facf6,_0x518ca7)=>{if(_0x518ca7!=null){_0x518ca7[a118_0x4372('0xc')](_0x19a7ab=>{const _0x8fb8a3=0x14;const _0x54267f=_0x19a7ab['split']('.')[a118_0x4372('0xd')](0x0,-0x1)[a118_0x4372('0xe')]('.');if(isImage(_0x19a7ab)&&!this['videoConverting']&&!fsExtra[a118_0x4372('0xf')](_0x16caed+_0x54267f+a118_0x4372('0x10'))){this[a118_0x4372('0x3')]=!![];this['createImageVideo'](_0x16caed,_0x19a7ab,_0x8fb8a3);}});}});}['createImageVideo'](_0xe8c49,_0x441bdc,_0xbbb0fc=0xa){const _0x36c9eb=_0xe8c49+''+_0x441bdc;console['log'](_0x36c9eb);console[a118_0x4372('0x9')](_0x441bdc);const _0x1a6792=_0x441bdc['split']('.')[a118_0x4372('0xd')](0x0,-0x1)[a118_0x4372('0xe')]('.');const _0x52caf2=a118_0x4372('0x11');const _0x2a2ea0=['-y','-r',a118_0x4372('0x12'),a118_0x4372('0x13'),'1',a118_0x4372('0x14'),a118_0x4372('0x15'),'-i',_0x36c9eb,'-t',String(_0xbbb0fc),'-c:v',a118_0x4372('0x16'),a118_0x4372('0x17'),a118_0x4372('0x18'),'-r','25',a118_0x4372('0x19'),'scale=1920:1080',_0xe8c49+_0x1a6792+a118_0x4372('0x10')];const _0x10d7b9=spawn(_0x52caf2,_0x2a2ea0);_0x10d7b9[a118_0x4372('0x1a')]['on'](a118_0x4372('0x1b'),function(_0xa6e4b3){console[a118_0x4372('0x9')](a118_0x4372('0x1c')+_0x36c9eb);});_0x10d7b9[a118_0x4372('0x1d')]['on'](a118_0x4372('0x1b'),function(_0x2f0c7d){console[a118_0x4372('0x9')](a118_0x4372('0x1e')+_0x2f0c7d);}[a118_0x4372('0x6')](this));_0x10d7b9['on']('close',function(){console[a118_0x4372('0x9')](a118_0x4372('0x1f'));this[a118_0x4372('0x3')]=![];}[a118_0x4372('0x6')](this));}}exports['default']=FileOptimizationTask;