var a159_0x3491=['libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','videoConverting','default','defineProperty','__esModule','child_process','spawn','fs-extra','is-image','start','exploreDir','bind','env','IMAGE_FILES_FOLDER','log','readdir','forEach','join','existsSync','.mp4','createImageVideo','split','slice','-loop','-pattern_type','-c:v'];(function(_0x5a5fee,_0x5e7e3c){var _0x2d1e76=function(_0x474072){while(--_0x474072){_0x5a5fee['push'](_0x5a5fee['shift']());}};_0x2d1e76(++_0x5e7e3c);}(a159_0x3491,0x101));var a159_0x46ca=function(_0x433bdf,_0x570ee1){_0x433bdf=_0x433bdf-0x0;var _0x4473a4=a159_0x3491[_0x433bdf];return _0x4473a4;};'use strict';Object[a159_0x46ca('0x0')](exports,a159_0x46ca('0x1'),{'value':!![]});const fs=require('fs');const spawn=require(a159_0x46ca('0x2'))[a159_0x46ca('0x3')];const fsExtra=require(a159_0x46ca('0x4'));const isImage=require(a159_0x46ca('0x5'));class FileOptimizationTask{constructor(){this['videoConverting']=![];}[a159_0x46ca('0x6')](){const _0x2460e6=setInterval(function(){this[a159_0x46ca('0x7')]();}[a159_0x46ca('0x8')](this),0x2710);}[a159_0x46ca('0x7')](){const _0x5ad894=process[a159_0x46ca('0x9')][a159_0x46ca('0xa')];console[a159_0x46ca('0xb')]('exploreDir:\x20'+_0x5ad894);fs[a159_0x46ca('0xc')](_0x5ad894,(_0x3c81c6,_0x6bbe23)=>{if(_0x6bbe23!=null){_0x6bbe23[a159_0x46ca('0xd')](_0x7b4655=>{const _0x42a9ef=0x14;const _0x146f01=_0x7b4655['split']('.')['slice'](0x0,-0x1)[a159_0x46ca('0xe')]('.');if(isImage(_0x7b4655)&&!this['videoConverting']&&!fsExtra[a159_0x46ca('0xf')](_0x5ad894+_0x146f01+a159_0x46ca('0x10'))){this['videoConverting']=!![];this['createImageVideo'](_0x5ad894,_0x7b4655,_0x42a9ef);}});}});}[a159_0x46ca('0x11')](_0x2fe973,_0x5e3297,_0x391152=0xa){const _0x19ae0c=_0x2fe973+''+_0x5e3297;console['log'](_0x19ae0c);console[a159_0x46ca('0xb')](_0x5e3297);const _0x3416e6=_0x5e3297[a159_0x46ca('0x12')]('.')[a159_0x46ca('0x13')](0x0,-0x1)[a159_0x46ca('0xe')]('.');const _0x44b3fb='ffmpeg';const _0x3aa881=['-y','-r','1/2',a159_0x46ca('0x14'),'1',a159_0x46ca('0x15'),'glob','-i',_0x19ae0c,'-t',String(_0x391152),a159_0x46ca('0x16'),a159_0x46ca('0x17'),a159_0x46ca('0x18'),a159_0x46ca('0x19'),'-r','25',a159_0x46ca('0x1a'),a159_0x46ca('0x1b'),_0x2fe973+_0x3416e6+'.mp4'];const _0x28383a=spawn(_0x44b3fb,_0x3aa881);_0x28383a[a159_0x46ca('0x1c')]['on']('data',function(_0x5220fd){console[a159_0x46ca('0xb')](a159_0x46ca('0x1d')+_0x19ae0c);});_0x28383a[a159_0x46ca('0x1e')]['on']('data',function(_0x11daa1){console[a159_0x46ca('0xb')](a159_0x46ca('0x1f')+_0x11daa1);}['bind'](this));_0x28383a['on']('close',function(){console[a159_0x46ca('0xb')](a159_0x46ca('0x20'));this[a159_0x46ca('0x21')]=![];}[a159_0x46ca('0x8')](this));}}exports[a159_0x46ca('0x22')]=FileOptimizationTask;