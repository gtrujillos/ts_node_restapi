var a223_0x54cc=['existsSync','.mp4','createImageVideo','log','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','default','defineProperty','spawn','fs-extra','start','exploreDir','bind','env','IMAGE_FILES_FOLDER','exploreDir:\x20','readdir','forEach','split','slice','join','videoConverting'];(function(_0x13e5dc,_0x5bea31){var _0x106aea=function(_0x533a34){while(--_0x533a34){_0x13e5dc['push'](_0x13e5dc['shift']());}};_0x106aea(++_0x5bea31);}(a223_0x54cc,0x195));var a223_0x3a1a=function(_0x1af496,_0x5312f2){_0x1af496=_0x1af496-0x0;var _0x155417=a223_0x54cc[_0x1af496];return _0x155417;};'use strict';Object[a223_0x3a1a('0x0')](exports,'__esModule',{'value':!![]});const fs=require('fs');const spawn=require('child_process')[a223_0x3a1a('0x1')];const fsExtra=require(a223_0x3a1a('0x2'));const isImage=require('is-image');class FileOptimizationTask{constructor(){this['videoConverting']=![];}[a223_0x3a1a('0x3')](){const _0x22900d=setInterval(function(){this[a223_0x3a1a('0x4')]();}[a223_0x3a1a('0x5')](this),0x2710);}['exploreDir'](){const _0x44a1b4=process[a223_0x3a1a('0x6')][a223_0x3a1a('0x7')];console['log'](a223_0x3a1a('0x8')+_0x44a1b4);fs[a223_0x3a1a('0x9')](_0x44a1b4,(_0x9267f4,_0x4003b8)=>{if(_0x4003b8!=null){_0x4003b8[a223_0x3a1a('0xa')](_0x3d57d7=>{const _0x2bcc68=0x14;const _0xc0234d=_0x3d57d7[a223_0x3a1a('0xb')]('.')[a223_0x3a1a('0xc')](0x0,-0x1)[a223_0x3a1a('0xd')]('.');if(isImage(_0x3d57d7)&&!this[a223_0x3a1a('0xe')]&&!fsExtra[a223_0x3a1a('0xf')](_0x44a1b4+_0xc0234d+a223_0x3a1a('0x10'))){this[a223_0x3a1a('0xe')]=!![];this[a223_0x3a1a('0x11')](_0x44a1b4,_0x3d57d7,_0x2bcc68);}});}});}[a223_0x3a1a('0x11')](_0x38d0d6,_0x18dea6,_0x5b70e7=0xa){const _0x2323b0=_0x38d0d6+''+_0x18dea6;console[a223_0x3a1a('0x12')](_0x2323b0);console[a223_0x3a1a('0x12')](_0x18dea6);const _0x4b9a7e=_0x18dea6[a223_0x3a1a('0xb')]('.')[a223_0x3a1a('0xc')](0x0,-0x1)[a223_0x3a1a('0xd')]('.');const _0x10a41b=a223_0x3a1a('0x13');const _0x11f775=['-y','-r',a223_0x3a1a('0x14'),a223_0x3a1a('0x15'),'1',a223_0x3a1a('0x16'),a223_0x3a1a('0x17'),'-i',_0x2323b0,'-t',String(_0x5b70e7),a223_0x3a1a('0x18'),'libx264',a223_0x3a1a('0x19'),'yuv420p','-r','25','-vf',a223_0x3a1a('0x1a'),_0x38d0d6+_0x4b9a7e+a223_0x3a1a('0x10')];const _0x23e960=spawn(_0x10a41b,_0x11f775);_0x23e960[a223_0x3a1a('0x1b')]['on'](a223_0x3a1a('0x1c'),function(_0x2b6dca){console['log'](a223_0x3a1a('0x1d')+_0x2323b0);});_0x23e960[a223_0x3a1a('0x1e')]['on'](a223_0x3a1a('0x1c'),function(_0x1c1955){console['log'](a223_0x3a1a('0x1f')+_0x1c1955);}[a223_0x3a1a('0x5')](this));_0x23e960['on'](a223_0x3a1a('0x20'),function(){console['log'](a223_0x3a1a('0x21'));this['videoConverting']=![];}[a223_0x3a1a('0x5')](this));}}exports[a223_0x3a1a('0x22')]=FileOptimizationTask;