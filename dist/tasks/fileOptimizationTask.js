var a223_0x41f8=['ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-vf','scale=1920:1080','stdout','data','stderr','stderr:\x20','finished\x20mp4\x20convert','bind','__esModule','child_process','spawn','fs-extra','is-image','videoConverting','start','exploreDir','log','readdir','forEach','split','slice','join','.mp4','createImageVideo'];(function(_0x52b237,_0x8be816){var _0xfa9a3e=function(_0x169cca){while(--_0x169cca){_0x52b237['push'](_0x52b237['shift']());}};_0xfa9a3e(++_0x8be816);}(a223_0x41f8,0xfe));var a223_0x108b=function(_0x955b44,_0x4491e5){_0x955b44=_0x955b44-0x0;var _0x6d3430=a223_0x41f8[_0x955b44];return _0x6d3430;};'use strict';Object['defineProperty'](exports,a223_0x108b('0x0'),{'value':!![]});const fs=require('fs');const spawn=require(a223_0x108b('0x1'))[a223_0x108b('0x2')];const fsExtra=require(a223_0x108b('0x3'));const isImage=require(a223_0x108b('0x4'));class FileOptimizationTask{constructor(){this[a223_0x108b('0x5')]=![];}[a223_0x108b('0x6')](){const _0xc1c7ad=setInterval(function(){this[a223_0x108b('0x7')]();}['bind'](this),0x2710);}[a223_0x108b('0x7')](){const _0x46cd3e=process['env']['IMAGE_FILES_FOLDER'];console[a223_0x108b('0x8')]('exploreDir:\x20'+_0x46cd3e);fs[a223_0x108b('0x9')](_0x46cd3e,(_0x5b2577,_0xfed10f)=>{if(_0xfed10f!=null){_0xfed10f[a223_0x108b('0xa')](_0x3e3a78=>{const _0x194e54=0x14;const _0xeb6c4d=_0x3e3a78[a223_0x108b('0xb')]('.')[a223_0x108b('0xc')](0x0,-0x1)[a223_0x108b('0xd')]('.');if(isImage(_0x3e3a78)&&!this[a223_0x108b('0x5')]&&!fsExtra['existsSync'](_0x46cd3e+_0xeb6c4d+a223_0x108b('0xe'))){this[a223_0x108b('0x5')]=!![];this[a223_0x108b('0xf')](_0x46cd3e,_0x3e3a78,_0x194e54);}});}});}[a223_0x108b('0xf')](_0x4d7e09,_0x375e4a,_0x342048=0xa){const _0x2d8711=_0x4d7e09+''+_0x375e4a;console[a223_0x108b('0x8')](_0x2d8711);console[a223_0x108b('0x8')](_0x375e4a);const _0x38fbcc=_0x375e4a[a223_0x108b('0xb')]('.')[a223_0x108b('0xc')](0x0,-0x1)['join']('.');const _0x14c7df=a223_0x108b('0x10');const _0x398720=['-y','-r',a223_0x108b('0x11'),a223_0x108b('0x12'),'1',a223_0x108b('0x13'),a223_0x108b('0x14'),'-i',_0x2d8711,'-t',String(_0x342048),a223_0x108b('0x15'),'libx264','-pix_fmt','yuv420p','-r','25',a223_0x108b('0x16'),a223_0x108b('0x17'),_0x4d7e09+_0x38fbcc+a223_0x108b('0xe')];const _0x515680=spawn(_0x14c7df,_0x398720);_0x515680[a223_0x108b('0x18')]['on'](a223_0x108b('0x19'),function(_0x452323){console[a223_0x108b('0x8')]('Converting\x20'+_0x2d8711);});_0x515680[a223_0x108b('0x1a')]['on']('data',function(_0x46a669){console['log'](a223_0x108b('0x1b')+_0x46a669);}['bind'](this));_0x515680['on']('close',function(){console[a223_0x108b('0x8')](a223_0x108b('0x1c'));this[a223_0x108b('0x5')]=![];}[a223_0x108b('0x1d')](this));}}exports['default']=FileOptimizationTask;