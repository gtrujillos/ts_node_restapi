var a223_0x15bf=['scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','bind','default','defineProperty','child_process','spawn','fs-extra','is-image','videoConverting','start','exploreDir','IMAGE_FILES_FOLDER','log','exploreDir:\x20','readdir','forEach','split','slice','join','.mp4','createImageVideo','ffmpeg','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','-vf'];(function(_0x7bacbe,_0x3a745c){var _0x4f2f29=function(_0x1a4fde){while(--_0x1a4fde){_0x7bacbe['push'](_0x7bacbe['shift']());}};_0x4f2f29(++_0x3a745c);}(a223_0x15bf,0x130));var a223_0x4099=function(_0x1a52c0,_0x408772){_0x1a52c0=_0x1a52c0-0x0;var _0x2b6d34=a223_0x15bf[_0x1a52c0];return _0x2b6d34;};'use strict';Object[a223_0x4099('0x0')](exports,'__esModule',{'value':!![]});const fs=require('fs');const spawn=require(a223_0x4099('0x1'))[a223_0x4099('0x2')];const fsExtra=require(a223_0x4099('0x3'));const isImage=require(a223_0x4099('0x4'));class FileOptimizationTask{constructor(){this[a223_0x4099('0x5')]=![];}[a223_0x4099('0x6')](){const _0x1aefd8=setInterval(function(){this[a223_0x4099('0x7')]();}['bind'](this),0x2710);}[a223_0x4099('0x7')](){const _0xc2baff=process['env'][a223_0x4099('0x8')];console[a223_0x4099('0x9')](a223_0x4099('0xa')+_0xc2baff);fs[a223_0x4099('0xb')](_0xc2baff,(_0x183caa,_0x44ba48)=>{if(_0x44ba48!=null){_0x44ba48[a223_0x4099('0xc')](_0x596be7=>{const _0x2987c5=0x14;const _0x454f2a=_0x596be7[a223_0x4099('0xd')]('.')[a223_0x4099('0xe')](0x0,-0x1)[a223_0x4099('0xf')]('.');if(isImage(_0x596be7)&&!this[a223_0x4099('0x5')]&&!fsExtra['existsSync'](_0xc2baff+_0x454f2a+a223_0x4099('0x10'))){this[a223_0x4099('0x5')]=!![];this[a223_0x4099('0x11')](_0xc2baff,_0x596be7,_0x2987c5);}});}});}[a223_0x4099('0x11')](_0x2db9da,_0x2beb20,_0x30111e=0xa){const _0x1969ba=_0x2db9da+''+_0x2beb20;console[a223_0x4099('0x9')](_0x1969ba);console[a223_0x4099('0x9')](_0x2beb20);const _0x3d2bcf=_0x2beb20[a223_0x4099('0xd')]('.')[a223_0x4099('0xe')](0x0,-0x1)[a223_0x4099('0xf')]('.');const _0x179742=a223_0x4099('0x12');const _0x9bb611=['-y','-r',a223_0x4099('0x13'),a223_0x4099('0x14'),'1',a223_0x4099('0x15'),'glob','-i',_0x1969ba,'-t',String(_0x30111e),a223_0x4099('0x16'),a223_0x4099('0x17'),a223_0x4099('0x18'),'yuv420p','-r','25',a223_0x4099('0x19'),a223_0x4099('0x1a'),_0x2db9da+_0x3d2bcf+a223_0x4099('0x10')];const _0x41f34d=spawn(_0x179742,_0x9bb611);_0x41f34d[a223_0x4099('0x1b')]['on']('data',function(_0x278626){console[a223_0x4099('0x9')](a223_0x4099('0x1c')+_0x1969ba);});_0x41f34d[a223_0x4099('0x1d')]['on']('data',function(_0x19d7d4){console[a223_0x4099('0x9')](a223_0x4099('0x1e')+_0x19d7d4);}[a223_0x4099('0x1f')](this));_0x41f34d['on']('close',function(){console['log']('finished\x20mp4\x20convert');this['videoConverting']=![];}[a223_0x4099('0x1f')](this));}}exports[a223_0x4099('0x20')]=FileOptimizationTask;