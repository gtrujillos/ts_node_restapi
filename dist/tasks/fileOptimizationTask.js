var a223_0x3a3d=['log','exploreDir:\x20','readdir','forEach','slice','join','existsSync','.mp4','createImageVideo','split','ffmpeg','1/2','-loop','-pattern_type','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','defineProperty','__esModule','spawn','fs-extra','is-image','videoConverting','start','exploreDir','bind','env'];(function(_0xd110dc,_0x687f1b){var _0x2be817=function(_0x1dd642){while(--_0x1dd642){_0xd110dc['push'](_0xd110dc['shift']());}};_0x2be817(++_0x687f1b);}(a223_0x3a3d,0x1d2));var a223_0x2afe=function(_0x253e7d,_0x4ea476){_0x253e7d=_0x253e7d-0x0;var _0x5879b7=a223_0x3a3d[_0x253e7d];return _0x5879b7;};'use strict';Object[a223_0x2afe('0x0')](exports,a223_0x2afe('0x1'),{'value':!![]});const fs=require('fs');const spawn=require('child_process')[a223_0x2afe('0x2')];const fsExtra=require(a223_0x2afe('0x3'));const isImage=require(a223_0x2afe('0x4'));class FileOptimizationTask{constructor(){this[a223_0x2afe('0x5')]=![];}[a223_0x2afe('0x6')](){const _0x2cc1e1=setInterval(function(){this[a223_0x2afe('0x7')]();}[a223_0x2afe('0x8')](this),0x2710);}[a223_0x2afe('0x7')](){const _0x264042=process[a223_0x2afe('0x9')]['IMAGE_FILES_FOLDER'];console[a223_0x2afe('0xa')](a223_0x2afe('0xb')+_0x264042);fs[a223_0x2afe('0xc')](_0x264042,(_0x3b0d41,_0x5f341a)=>{if(_0x5f341a!=null){_0x5f341a[a223_0x2afe('0xd')](_0x1a7716=>{const _0x47d0b3=0x14;const _0x41f56a=_0x1a7716['split']('.')[a223_0x2afe('0xe')](0x0,-0x1)[a223_0x2afe('0xf')]('.');if(isImage(_0x1a7716)&&!this['videoConverting']&&!fsExtra[a223_0x2afe('0x10')](_0x264042+_0x41f56a+a223_0x2afe('0x11'))){this[a223_0x2afe('0x5')]=!![];this[a223_0x2afe('0x12')](_0x264042,_0x1a7716,_0x47d0b3);}});}});}[a223_0x2afe('0x12')](_0x3a5923,_0x449195,_0x48bd76=0xa){const _0x24b06b=_0x3a5923+''+_0x449195;console[a223_0x2afe('0xa')](_0x24b06b);console['log'](_0x449195);const _0xd7cc0e=_0x449195[a223_0x2afe('0x13')]('.')[a223_0x2afe('0xe')](0x0,-0x1)[a223_0x2afe('0xf')]('.');const _0x13ce72=a223_0x2afe('0x14');const _0x69a369=['-y','-r',a223_0x2afe('0x15'),a223_0x2afe('0x16'),'1',a223_0x2afe('0x17'),'glob','-i',_0x24b06b,'-t',String(_0x48bd76),'-c:v',a223_0x2afe('0x18'),a223_0x2afe('0x19'),a223_0x2afe('0x1a'),'-r','25',a223_0x2afe('0x1b'),a223_0x2afe('0x1c'),_0x3a5923+_0xd7cc0e+a223_0x2afe('0x11')];const _0x1ede9f=spawn(_0x13ce72,_0x69a369);_0x1ede9f[a223_0x2afe('0x1d')]['on'](a223_0x2afe('0x1e'),function(_0x456aaf){console[a223_0x2afe('0xa')](a223_0x2afe('0x1f')+_0x24b06b);});_0x1ede9f[a223_0x2afe('0x20')]['on']('data',function(_0x853233){console[a223_0x2afe('0xa')](a223_0x2afe('0x21')+_0x853233);}[a223_0x2afe('0x8')](this));_0x1ede9f['on']('close',function(){console[a223_0x2afe('0xa')]('finished\x20mp4\x20convert');this['videoConverting']=![];}[a223_0x2afe('0x8')](this));}}exports['default']=FileOptimizationTask;