var a94_0x4887=['success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','kind','info','getReset','isAuthenticated','token','where','passwordResetExpires','now','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','save','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','__esModule','async','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','sanitize','email','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn'];(function(_0x21a525,_0x319dd5){var _0x52bd84=function(_0x231159){while(--_0x231159){_0x21a525['push'](_0x21a525['shift']());}};_0x52bd84(++_0x319dd5);}(a94_0x4887,0xba));var a94_0x594f=function(_0x4bf6fa,_0xe8b88b){_0x4bf6fa=_0x4bf6fa-0x0;var _0x5837f6=a94_0x4887[_0x4bf6fa];return _0x5837f6;};'use strict';var __importDefault=this&&this[a94_0x594f('0x0')]||function(_0x8944be){return _0x8944be&&_0x8944be['__esModule']?_0x8944be:{'default':_0x8944be};};Object[a94_0x594f('0x1')](exports,a94_0x594f('0x2'),{'value':!![]});const async_1=__importDefault(require(a94_0x594f('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a94_0x594f('0x4')));const passport_1=__importDefault(require(a94_0x594f('0x5')));const User_1=__importDefault(require(a94_0x594f('0x6')));const request=require(a94_0x594f('0x7'));exports[a94_0x594f('0x8')]=(_0x2959b4,_0xd61bdf)=>{if(_0x2959b4[a94_0x594f('0x9')]){return _0xd61bdf[a94_0x594f('0xa')]('/');}_0xd61bdf[a94_0x594f('0xb')](a94_0x594f('0xc'),{'title':a94_0x594f('0xd')});};exports[a94_0x594f('0xe')]=(_0x12a309,_0x5c2fdb,_0x24d0ba)=>{_0x12a309[a94_0x594f('0xf')]('email',a94_0x594f('0x10'))[a94_0x594f('0x11')]();_0x12a309['assert'](a94_0x594f('0x12'),'Password\x20cannot\x20be\x20blank')[a94_0x594f('0x13')]();_0x12a309[a94_0x594f('0x14')](a94_0x594f('0x15'))[a94_0x594f('0x16')]({'gmail_remove_dots':![]});const _0x3b6d7b=_0x12a309[a94_0x594f('0x17')]();if(_0x3b6d7b){_0x12a309[a94_0x594f('0x18')](a94_0x594f('0x19'),_0x3b6d7b);return _0x5c2fdb['redirect'](a94_0x594f('0x1a'));}passport_1[a94_0x594f('0x1b')][a94_0x594f('0x1c')](a94_0x594f('0x1d'),(_0xa7749b,_0x487fc7,_0x263c51)=>{if(_0xa7749b){return _0x24d0ba(_0xa7749b);}if(!_0x487fc7){_0x12a309[a94_0x594f('0x18')](a94_0x594f('0x19'),_0x263c51[a94_0x594f('0x1e')]);return _0x5c2fdb[a94_0x594f('0xa')](a94_0x594f('0x1a'));}_0x12a309[a94_0x594f('0x1f')](_0x487fc7,_0xa7749b=>{if(_0xa7749b){return _0x24d0ba(_0xa7749b);}_0x12a309[a94_0x594f('0x18')](a94_0x594f('0x20'),{'msg':a94_0x594f('0x21')});_0x5c2fdb['redirect'](_0x12a309[a94_0x594f('0x22')]['returnTo']||'/');});})(_0x12a309,_0x5c2fdb,_0x24d0ba);};exports['logout']=(_0x239bed,_0x1f86dc)=>{_0x239bed[a94_0x594f('0x23')]();_0x1f86dc[a94_0x594f('0xa')]('/');};exports[a94_0x594f('0x24')]=(_0x1a70a6,_0x3619be)=>{if(_0x1a70a6[a94_0x594f('0x9')]){return _0x3619be[a94_0x594f('0xa')]('/');}_0x3619be[a94_0x594f('0xb')](a94_0x594f('0x25'),{'title':a94_0x594f('0x26')});};exports['postSignup']=(_0x59fe04,_0x589077,_0x386f5f)=>{_0x59fe04['assert']('email',a94_0x594f('0x10'))['isEmail']();_0x59fe04[a94_0x594f('0xf')](a94_0x594f('0x12'),a94_0x594f('0x27'))[a94_0x594f('0x28')]({'min':0x4});_0x59fe04[a94_0x594f('0xf')](a94_0x594f('0x29'),a94_0x594f('0x2a'))[a94_0x594f('0x2b')](_0x59fe04[a94_0x594f('0x2c')][a94_0x594f('0x12')]);_0x59fe04[a94_0x594f('0x14')](a94_0x594f('0x15'))[a94_0x594f('0x16')]({'gmail_remove_dots':![]});const _0x1beb30=_0x59fe04['validationErrors']();if(_0x1beb30){_0x59fe04['flash']('errors',_0x1beb30);return _0x589077['redirect'](a94_0x594f('0x2d'));}const _0x430d4d=new User_1[(a94_0x594f('0x1b'))]({'email':_0x59fe04[a94_0x594f('0x2c')][a94_0x594f('0x15')],'password':_0x59fe04[a94_0x594f('0x2c')][a94_0x594f('0x12')]});User_1['default'][a94_0x594f('0x2e')]({'email':_0x59fe04[a94_0x594f('0x2c')][a94_0x594f('0x15')]},(_0x3f22bc,_0x265c64)=>{if(_0x3f22bc){return _0x386f5f(_0x3f22bc);}if(_0x265c64){_0x59fe04['flash'](a94_0x594f('0x19'),{'msg':a94_0x594f('0x2f')});return _0x589077[a94_0x594f('0xa')]('/signup');}_0x430d4d['save'](_0x3f22bc=>{if(_0x3f22bc){return _0x386f5f(_0x3f22bc);}_0x59fe04[a94_0x594f('0x1f')](_0x430d4d,_0x3f22bc=>{if(_0x3f22bc){return _0x386f5f(_0x3f22bc);}_0x589077[a94_0x594f('0xa')]('/');});});});};exports[a94_0x594f('0x30')]=(_0x22e0e0,_0x244d18)=>{_0x244d18[a94_0x594f('0xb')](a94_0x594f('0x31'),{'title':'Account\x20Management'});};exports[a94_0x594f('0x32')]=(_0x40c1c7,_0xa7598e,_0x3059c6)=>{_0x40c1c7['assert'](a94_0x594f('0x15'),a94_0x594f('0x33'))[a94_0x594f('0x11')]();_0x40c1c7['sanitize'](a94_0x594f('0x15'))[a94_0x594f('0x16')]({'gmail_remove_dots':![]});const _0x59e9c4=_0x40c1c7[a94_0x594f('0x17')]();if(_0x59e9c4){_0x40c1c7[a94_0x594f('0x18')](a94_0x594f('0x19'),_0x59e9c4);return _0xa7598e[a94_0x594f('0xa')](a94_0x594f('0x34'));}User_1['default'][a94_0x594f('0x35')](_0x40c1c7['user']['id'],(_0x385e07,_0x1ec470)=>{if(_0x385e07){return _0x3059c6(_0x385e07);}_0x1ec470[a94_0x594f('0x15')]=_0x40c1c7[a94_0x594f('0x2c')][a94_0x594f('0x15')]||'';_0x1ec470['profile']['name']=_0x40c1c7[a94_0x594f('0x2c')][a94_0x594f('0x36')]||'';_0x1ec470[a94_0x594f('0x37')][a94_0x594f('0x38')]=_0x40c1c7[a94_0x594f('0x2c')][a94_0x594f('0x38')]||'';_0x1ec470[a94_0x594f('0x37')][a94_0x594f('0x39')]=_0x40c1c7['body'][a94_0x594f('0x39')]||'';_0x1ec470[a94_0x594f('0x37')][a94_0x594f('0x3a')]=_0x40c1c7[a94_0x594f('0x2c')]['website']||'';_0x1ec470['save'](_0x385e07=>{if(_0x385e07){if(_0x385e07[a94_0x594f('0x3b')]===0x2af8){_0x40c1c7[a94_0x594f('0x18')](a94_0x594f('0x19'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0xa7598e[a94_0x594f('0xa')](a94_0x594f('0x34'));}return _0x3059c6(_0x385e07);}_0x40c1c7['flash'](a94_0x594f('0x20'),{'msg':a94_0x594f('0x3c')});_0xa7598e[a94_0x594f('0xa')](a94_0x594f('0x34'));});});};exports['postUpdatePassword']=(_0x122f1a,_0x539467,_0x247c0b)=>{_0x122f1a[a94_0x594f('0xf')](a94_0x594f('0x12'),a94_0x594f('0x27'))[a94_0x594f('0x28')]({'min':0x4});_0x122f1a['assert'](a94_0x594f('0x29'),'Passwords\x20do\x20not\x20match')[a94_0x594f('0x2b')](_0x122f1a[a94_0x594f('0x2c')][a94_0x594f('0x12')]);const _0x54a2e6=_0x122f1a['validationErrors']();if(_0x54a2e6){_0x122f1a['flash']('errors',_0x54a2e6);return _0x539467['redirect'](a94_0x594f('0x34'));}User_1['default'][a94_0x594f('0x35')](_0x122f1a[a94_0x594f('0x9')]['id'],(_0x23bd11,_0x7641da)=>{if(_0x23bd11){return _0x247c0b(_0x23bd11);}_0x7641da[a94_0x594f('0x12')]=_0x122f1a['body'][a94_0x594f('0x12')];_0x7641da['save'](_0x23bd11=>{if(_0x23bd11){return _0x247c0b(_0x23bd11);}_0x122f1a['flash'](a94_0x594f('0x20'),{'msg':a94_0x594f('0x3d')});_0x539467[a94_0x594f('0xa')](a94_0x594f('0x34'));});});};exports[a94_0x594f('0x3e')]=(_0x338ba5,_0x45bafc,_0x25ed03)=>{User_1[a94_0x594f('0x1b')][a94_0x594f('0x3f')]({'_id':_0x338ba5['user']['id']},_0x2834bb=>{if(_0x2834bb){return _0x25ed03(_0x2834bb);}_0x338ba5['logout']();_0x338ba5[a94_0x594f('0x18')]('info',{'msg':a94_0x594f('0x40')});_0x45bafc[a94_0x594f('0xa')]('/');});};exports['getOauthUnlink']=(_0xb7d16,_0x3dd712,_0x2e99ce)=>{const _0x49ffd8=_0xb7d16[a94_0x594f('0x41')][a94_0x594f('0x42')];User_1[a94_0x594f('0x1b')][a94_0x594f('0x35')](_0xb7d16[a94_0x594f('0x9')]['id'],(_0xa6a0e4,_0xad48f)=>{if(_0xa6a0e4){return _0x2e99ce(_0xa6a0e4);}_0xad48f[_0x49ffd8]=undefined;_0xad48f[a94_0x594f('0x43')]=_0xad48f[a94_0x594f('0x43')]['filter'](_0x22cb73=>_0x22cb73[a94_0x594f('0x44')]!==_0x49ffd8);_0xad48f['save'](_0xa6a0e4=>{if(_0xa6a0e4){return _0x2e99ce(_0xa6a0e4);}_0xb7d16[a94_0x594f('0x18')](a94_0x594f('0x45'),{'msg':_0x49ffd8+'\x20account\x20has\x20been\x20unlinked.'});_0x3dd712[a94_0x594f('0xa')]('/account');});});};exports[a94_0x594f('0x46')]=(_0x36aa5a,_0x2e90dd,_0x547aa7)=>{if(_0x36aa5a[a94_0x594f('0x47')]()){return _0x2e90dd[a94_0x594f('0xa')]('/');}User_1[a94_0x594f('0x1b')][a94_0x594f('0x2e')]({'passwordResetToken':_0x36aa5a[a94_0x594f('0x41')][a94_0x594f('0x48')]})[a94_0x594f('0x49')](a94_0x594f('0x4a'))['gt'](Date[a94_0x594f('0x4b')]())['exec']((_0x403713,_0xe82bf5)=>{if(_0x403713){return _0x547aa7(_0x403713);}if(!_0xe82bf5){_0x36aa5a[a94_0x594f('0x18')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2e90dd[a94_0x594f('0xa')](a94_0x594f('0x4c'));}_0x2e90dd[a94_0x594f('0xb')]('account/reset',{'title':a94_0x594f('0x4d')});});};exports[a94_0x594f('0x4e')]=(_0x527265,_0x1390d0,_0x208d5f)=>{_0x527265['assert'](a94_0x594f('0x12'),a94_0x594f('0x4f'))[a94_0x594f('0x28')]({'min':0x4});_0x527265['assert'](a94_0x594f('0x50'),a94_0x594f('0x51'))[a94_0x594f('0x2b')](_0x527265[a94_0x594f('0x2c')][a94_0x594f('0x12')]);const _0x1316ee=_0x527265[a94_0x594f('0x17')]();if(_0x1316ee){_0x527265['flash'](a94_0x594f('0x19'),_0x1316ee);return _0x1390d0[a94_0x594f('0xa')](a94_0x594f('0x52'));}async_1[a94_0x594f('0x1b')][a94_0x594f('0x53')]([function resetPassword(_0x555878){User_1[a94_0x594f('0x1b')][a94_0x594f('0x2e')]({'passwordResetToken':_0x527265['params'][a94_0x594f('0x48')]})[a94_0x594f('0x49')](a94_0x594f('0x4a'))['gt'](Date['now']())['exec']((_0x3d1258,_0x393432)=>{if(_0x3d1258){return _0x208d5f(_0x3d1258);}if(!_0x393432){_0x527265[a94_0x594f('0x18')]('errors',{'msg':a94_0x594f('0x54')});return _0x1390d0[a94_0x594f('0xa')]('back');}_0x393432[a94_0x594f('0x12')]=_0x527265[a94_0x594f('0x2c')][a94_0x594f('0x12')];_0x393432[a94_0x594f('0x55')]=undefined;_0x393432[a94_0x594f('0x4a')]=undefined;_0x393432[a94_0x594f('0x56')](_0x3d1258=>{if(_0x3d1258){return _0x208d5f(_0x3d1258);}_0x527265[a94_0x594f('0x1f')](_0x393432,_0x3d1258=>{_0x555878(_0x3d1258,_0x393432);});});});},function sendResetPasswordEmail(_0x15d6d4,_0x1f821d){const _0x1d6ee3=nodemailer_1[a94_0x594f('0x1b')][a94_0x594f('0x57')]({'service':a94_0x594f('0x58'),'auth':{'user':process[a94_0x594f('0x59')][a94_0x594f('0x5a')],'pass':process[a94_0x594f('0x59')][a94_0x594f('0x5b')]}});const _0x32402d={'to':_0x15d6d4['email'],'from':a94_0x594f('0x5c'),'subject':a94_0x594f('0x5d'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x15d6d4[a94_0x594f('0x15')]+a94_0x594f('0x5e')};_0x1d6ee3['sendMail'](_0x32402d,_0x2cc396=>{_0x527265[a94_0x594f('0x18')](a94_0x594f('0x20'),{'msg':a94_0x594f('0x5f')});_0x1f821d(_0x2cc396);});}],_0x194616=>{if(_0x194616){return _0x208d5f(_0x194616);}_0x1390d0[a94_0x594f('0xa')]('/');});};exports[a94_0x594f('0x60')]=(_0x30f4cb,_0x2e0653)=>{if(_0x30f4cb[a94_0x594f('0x47')]()){return _0x2e0653[a94_0x594f('0xa')]('/');}_0x2e0653[a94_0x594f('0xb')](a94_0x594f('0x61'),{'title':a94_0x594f('0x62')});};exports['postForgot']=(_0x19cf68,_0x44a69c,_0x21b74f)=>{_0x19cf68[a94_0x594f('0xf')](a94_0x594f('0x15'),a94_0x594f('0x33'))[a94_0x594f('0x11')]();_0x19cf68[a94_0x594f('0x14')]('email')[a94_0x594f('0x16')]({'gmail_remove_dots':![]});const _0x1bc501=_0x19cf68[a94_0x594f('0x17')]();if(_0x1bc501){_0x19cf68['flash'](a94_0x594f('0x19'),_0x1bc501);return _0x44a69c['redirect'](a94_0x594f('0x4c'));}async_1[a94_0x594f('0x1b')]['waterfall']([function createRandomToken(_0x2c4942){crypto_1[a94_0x594f('0x1b')][a94_0x594f('0x63')](0x10,(_0x1c6a79,_0x471e0e)=>{const _0x4f61b7=_0x471e0e[a94_0x594f('0x64')](a94_0x594f('0x65'));_0x2c4942(_0x1c6a79,_0x4f61b7);});},function setRandomToken(_0x1a39f3,_0x2ccbe7){User_1[a94_0x594f('0x1b')]['findOne']({'email':_0x19cf68[a94_0x594f('0x2c')][a94_0x594f('0x15')]},(_0x568edd,_0x2878c3)=>{if(_0x568edd){return _0x2ccbe7(_0x568edd);}if(!_0x2878c3){_0x19cf68[a94_0x594f('0x18')](a94_0x594f('0x19'),{'msg':a94_0x594f('0x66')});return _0x44a69c[a94_0x594f('0xa')](a94_0x594f('0x4c'));}_0x2878c3[a94_0x594f('0x55')]=_0x1a39f3;_0x2878c3[a94_0x594f('0x4a')]=Date['now']()+0x36ee80;_0x2878c3['save'](_0x568edd=>{_0x2ccbe7(_0x568edd,_0x1a39f3,_0x2878c3);});});},function sendForgotPasswordEmail(_0x2964bf,_0x3846cf,_0x41fb65){const _0x5554c7=nodemailer_1[a94_0x594f('0x1b')][a94_0x594f('0x57')]({'service':'SendGrid','auth':{'user':process[a94_0x594f('0x59')][a94_0x594f('0x5a')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x24eb6f={'to':_0x3846cf[a94_0x594f('0x15')],'from':a94_0x594f('0x67'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a94_0x594f('0x68')+_0x19cf68['headers']['host']+a94_0x594f('0x69')+_0x2964bf+a94_0x594f('0x6a')};_0x5554c7['sendMail'](_0x24eb6f,_0x37eb1a=>{_0x19cf68[a94_0x594f('0x18')](a94_0x594f('0x45'),{'msg':a94_0x594f('0x6b')+_0x3846cf[a94_0x594f('0x15')]+a94_0x594f('0x6c')});_0x41fb65(_0x37eb1a);});}],_0x558fe0=>{if(_0x558fe0){return _0x21b74f(_0x558fe0);}_0x44a69c[a94_0x594f('0xa')](a94_0x594f('0x4c'));});};