var a201_0x42af=['../models/User','getLogin','user','redirect','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','/login','default','authenticate','local','errors','message','logIn','success','session','returnTo','logout','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','postUpdateProfile','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','now','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','Forgot\x20Password','postForgot','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport'];(function(_0x903cb0,_0x51ae10){var _0x58ff7e=function(_0x4852b7){while(--_0x4852b7){_0x903cb0['push'](_0x903cb0['shift']());}};_0x58ff7e(++_0x51ae10);}(a201_0x42af,0x1b9));var a201_0x566e=function(_0x328d6d,_0x19c810){_0x328d6d=_0x328d6d-0x0;var _0x4642a0=a201_0x42af[_0x328d6d];return _0x4642a0;};'use strict';var __importDefault=this&&this[a201_0x566e('0x0')]||function(_0x1a398b){return _0x1a398b&&_0x1a398b[a201_0x566e('0x1')]?_0x1a398b:{'default':_0x1a398b};};Object[a201_0x566e('0x2')](exports,a201_0x566e('0x1'),{'value':!![]});const async_1=__importDefault(require(a201_0x566e('0x3')));const crypto_1=__importDefault(require(a201_0x566e('0x4')));const nodemailer_1=__importDefault(require(a201_0x566e('0x5')));const passport_1=__importDefault(require(a201_0x566e('0x6')));const User_1=__importDefault(require(a201_0x566e('0x7')));const request=require('express-validator');exports[a201_0x566e('0x8')]=(_0x504005,_0xe2fd34)=>{if(_0x504005[a201_0x566e('0x9')]){return _0xe2fd34[a201_0x566e('0xa')]('/');}_0xe2fd34[a201_0x566e('0xb')]('account/login',{'title':a201_0x566e('0xc')});};exports[a201_0x566e('0xd')]=(_0x4b37c5,_0x4e187f,_0x3f2128)=>{_0x4b37c5[a201_0x566e('0xe')](a201_0x566e('0xf'),a201_0x566e('0x10'))[a201_0x566e('0x11')]();_0x4b37c5[a201_0x566e('0xe')](a201_0x566e('0x12'),a201_0x566e('0x13'))[a201_0x566e('0x14')]();_0x4b37c5[a201_0x566e('0x15')](a201_0x566e('0xf'))[a201_0x566e('0x16')]({'gmail_remove_dots':![]});const _0x386af2=_0x4b37c5[a201_0x566e('0x17')]();if(_0x386af2){_0x4b37c5[a201_0x566e('0x18')]('errors',_0x386af2);return _0x4e187f[a201_0x566e('0xa')](a201_0x566e('0x19'));}passport_1[a201_0x566e('0x1a')][a201_0x566e('0x1b')](a201_0x566e('0x1c'),(_0x297ce8,_0x3e0506,_0x3902bd)=>{if(_0x297ce8){return _0x3f2128(_0x297ce8);}if(!_0x3e0506){_0x4b37c5[a201_0x566e('0x18')](a201_0x566e('0x1d'),_0x3902bd[a201_0x566e('0x1e')]);return _0x4e187f[a201_0x566e('0xa')](a201_0x566e('0x19'));}_0x4b37c5[a201_0x566e('0x1f')](_0x3e0506,_0x297ce8=>{if(_0x297ce8){return _0x3f2128(_0x297ce8);}_0x4b37c5[a201_0x566e('0x18')](a201_0x566e('0x20'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x4e187f[a201_0x566e('0xa')](_0x4b37c5[a201_0x566e('0x21')][a201_0x566e('0x22')]||'/');});})(_0x4b37c5,_0x4e187f,_0x3f2128);};exports[a201_0x566e('0x23')]=(_0x368e0b,_0x4b78f4)=>{_0x368e0b['logout']();_0x4b78f4[a201_0x566e('0xa')]('/');};exports['getSignup']=(_0x583ec8,_0x400eb4)=>{if(_0x583ec8[a201_0x566e('0x9')]){return _0x400eb4['redirect']('/');}_0x400eb4[a201_0x566e('0xb')](a201_0x566e('0x24'),{'title':a201_0x566e('0x25')});};exports[a201_0x566e('0x26')]=(_0x204dde,_0x3374a7,_0x2bb473)=>{_0x204dde[a201_0x566e('0xe')]('email',a201_0x566e('0x10'))[a201_0x566e('0x11')]();_0x204dde[a201_0x566e('0xe')]('password',a201_0x566e('0x27'))[a201_0x566e('0x28')]({'min':0x4});_0x204dde['assert'](a201_0x566e('0x29'),'Passwords\x20do\x20not\x20match')[a201_0x566e('0x2a')](_0x204dde[a201_0x566e('0x2b')][a201_0x566e('0x12')]);_0x204dde[a201_0x566e('0x15')](a201_0x566e('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2b3b99=_0x204dde[a201_0x566e('0x17')]();if(_0x2b3b99){_0x204dde[a201_0x566e('0x18')](a201_0x566e('0x1d'),_0x2b3b99);return _0x3374a7[a201_0x566e('0xa')](a201_0x566e('0x2c'));}const _0x593740=new User_1[(a201_0x566e('0x1a'))]({'email':_0x204dde[a201_0x566e('0x2b')][a201_0x566e('0xf')],'password':_0x204dde[a201_0x566e('0x2b')]['password']});User_1['default'][a201_0x566e('0x2d')]({'email':_0x204dde[a201_0x566e('0x2b')][a201_0x566e('0xf')]},(_0x16518a,_0x2d5195)=>{if(_0x16518a){return _0x2bb473(_0x16518a);}if(_0x2d5195){_0x204dde[a201_0x566e('0x18')](a201_0x566e('0x1d'),{'msg':a201_0x566e('0x2e')});return _0x3374a7['redirect'](a201_0x566e('0x2c'));}_0x593740[a201_0x566e('0x2f')](_0x16518a=>{if(_0x16518a){return _0x2bb473(_0x16518a);}_0x204dde[a201_0x566e('0x1f')](_0x593740,_0x16518a=>{if(_0x16518a){return _0x2bb473(_0x16518a);}_0x3374a7[a201_0x566e('0xa')]('/');});});});};exports[a201_0x566e('0x30')]=(_0x45afad,_0x111956)=>{_0x111956[a201_0x566e('0xb')]('account/profile',{'title':'Account\x20Management'});};exports[a201_0x566e('0x31')]=(_0x27131e,_0x129c32,_0x440d71)=>{_0x27131e[a201_0x566e('0xe')](a201_0x566e('0xf'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a201_0x566e('0x11')]();_0x27131e[a201_0x566e('0x15')](a201_0x566e('0xf'))[a201_0x566e('0x16')]({'gmail_remove_dots':![]});const _0xebba89=_0x27131e[a201_0x566e('0x17')]();if(_0xebba89){_0x27131e['flash']('errors',_0xebba89);return _0x129c32[a201_0x566e('0xa')](a201_0x566e('0x32'));}User_1[a201_0x566e('0x1a')][a201_0x566e('0x33')](_0x27131e['user']['id'],(_0x587e48,_0x1b72e4)=>{if(_0x587e48){return _0x440d71(_0x587e48);}_0x1b72e4[a201_0x566e('0xf')]=_0x27131e[a201_0x566e('0x2b')]['email']||'';_0x1b72e4[a201_0x566e('0x34')][a201_0x566e('0x35')]=_0x27131e['body']['name']||'';_0x1b72e4[a201_0x566e('0x34')][a201_0x566e('0x36')]=_0x27131e[a201_0x566e('0x2b')]['gender']||'';_0x1b72e4[a201_0x566e('0x34')][a201_0x566e('0x37')]=_0x27131e['body'][a201_0x566e('0x37')]||'';_0x1b72e4[a201_0x566e('0x34')][a201_0x566e('0x38')]=_0x27131e[a201_0x566e('0x2b')][a201_0x566e('0x38')]||'';_0x1b72e4[a201_0x566e('0x2f')](_0x587e48=>{if(_0x587e48){if(_0x587e48['code']===0x2af8){_0x27131e[a201_0x566e('0x18')](a201_0x566e('0x1d'),{'msg':a201_0x566e('0x39')});return _0x129c32[a201_0x566e('0xa')]('/account');}return _0x440d71(_0x587e48);}_0x27131e[a201_0x566e('0x18')]('success',{'msg':a201_0x566e('0x3a')});_0x129c32['redirect']('/account');});});};exports[a201_0x566e('0x3b')]=(_0x4a6416,_0x562d59,_0x98be39)=>{_0x4a6416['assert'](a201_0x566e('0x12'),a201_0x566e('0x27'))[a201_0x566e('0x28')]({'min':0x4});_0x4a6416[a201_0x566e('0xe')](a201_0x566e('0x29'),a201_0x566e('0x3c'))[a201_0x566e('0x2a')](_0x4a6416['body']['password']);const _0x38a69e=_0x4a6416[a201_0x566e('0x17')]();if(_0x38a69e){_0x4a6416[a201_0x566e('0x18')](a201_0x566e('0x1d'),_0x38a69e);return _0x562d59[a201_0x566e('0xa')]('/account');}User_1['default']['findById'](_0x4a6416['user']['id'],(_0x3f7936,_0x285a4b)=>{if(_0x3f7936){return _0x98be39(_0x3f7936);}_0x285a4b[a201_0x566e('0x12')]=_0x4a6416[a201_0x566e('0x2b')][a201_0x566e('0x12')];_0x285a4b[a201_0x566e('0x2f')](_0x3f7936=>{if(_0x3f7936){return _0x98be39(_0x3f7936);}_0x4a6416['flash']('success',{'msg':a201_0x566e('0x3d')});_0x562d59[a201_0x566e('0xa')](a201_0x566e('0x32'));});});};exports[a201_0x566e('0x3e')]=(_0x2ab1a6,_0x3fb3e0,_0x12a3da)=>{User_1[a201_0x566e('0x1a')][a201_0x566e('0x3f')]({'_id':_0x2ab1a6['user']['id']},_0x5d06d5=>{if(_0x5d06d5){return _0x12a3da(_0x5d06d5);}_0x2ab1a6['logout']();_0x2ab1a6[a201_0x566e('0x18')]('info',{'msg':a201_0x566e('0x40')});_0x3fb3e0[a201_0x566e('0xa')]('/');});};exports['getOauthUnlink']=(_0x3e75a7,_0x1af697,_0x19d7b9)=>{const _0x2e0cf7=_0x3e75a7[a201_0x566e('0x41')][a201_0x566e('0x42')];User_1[a201_0x566e('0x1a')][a201_0x566e('0x33')](_0x3e75a7[a201_0x566e('0x9')]['id'],(_0x376595,_0x559fef)=>{if(_0x376595){return _0x19d7b9(_0x376595);}_0x559fef[_0x2e0cf7]=undefined;_0x559fef[a201_0x566e('0x43')]=_0x559fef['tokens'][a201_0x566e('0x44')](_0x317894=>_0x317894[a201_0x566e('0x45')]!==_0x2e0cf7);_0x559fef[a201_0x566e('0x2f')](_0x376595=>{if(_0x376595){return _0x19d7b9(_0x376595);}_0x3e75a7[a201_0x566e('0x18')]('info',{'msg':_0x2e0cf7+'\x20account\x20has\x20been\x20unlinked.'});_0x1af697[a201_0x566e('0xa')](a201_0x566e('0x32'));});});};exports['getReset']=(_0x5e8592,_0x40d1bd,_0x116d1d)=>{if(_0x5e8592['isAuthenticated']()){return _0x40d1bd[a201_0x566e('0xa')]('/');}User_1['default']['findOne']({'passwordResetToken':_0x5e8592[a201_0x566e('0x41')][a201_0x566e('0x46')]})[a201_0x566e('0x47')](a201_0x566e('0x48'))['gt'](Date['now']())[a201_0x566e('0x49')]((_0x21b4d3,_0x10ac30)=>{if(_0x21b4d3){return _0x116d1d(_0x21b4d3);}if(!_0x10ac30){_0x5e8592[a201_0x566e('0x18')](a201_0x566e('0x1d'),{'msg':a201_0x566e('0x4a')});return _0x40d1bd[a201_0x566e('0xa')](a201_0x566e('0x4b'));}_0x40d1bd[a201_0x566e('0xb')]('account/reset',{'title':a201_0x566e('0x4c')});});};exports['postReset']=(_0x4a81e1,_0x1b0ab0,_0x79835a)=>{_0x4a81e1['assert'](a201_0x566e('0x12'),a201_0x566e('0x4d'))['len']({'min':0x4});_0x4a81e1['assert'](a201_0x566e('0x4e'),a201_0x566e('0x4f'))[a201_0x566e('0x2a')](_0x4a81e1[a201_0x566e('0x2b')]['password']);const _0x19eaa4=_0x4a81e1[a201_0x566e('0x17')]();if(_0x19eaa4){_0x4a81e1[a201_0x566e('0x18')](a201_0x566e('0x1d'),_0x19eaa4);return _0x1b0ab0[a201_0x566e('0xa')]('back');}async_1['default'][a201_0x566e('0x50')]([function resetPassword(_0xc2e9b1){User_1[a201_0x566e('0x1a')][a201_0x566e('0x2d')]({'passwordResetToken':_0x4a81e1[a201_0x566e('0x41')][a201_0x566e('0x46')]})['where'](a201_0x566e('0x48'))['gt'](Date[a201_0x566e('0x51')]())[a201_0x566e('0x49')]((_0x36d1ef,_0x273ccb)=>{if(_0x36d1ef){return _0x79835a(_0x36d1ef);}if(!_0x273ccb){_0x4a81e1['flash'](a201_0x566e('0x1d'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x1b0ab0[a201_0x566e('0xa')](a201_0x566e('0x52'));}_0x273ccb['password']=_0x4a81e1[a201_0x566e('0x2b')]['password'];_0x273ccb[a201_0x566e('0x53')]=undefined;_0x273ccb[a201_0x566e('0x48')]=undefined;_0x273ccb[a201_0x566e('0x2f')](_0x36d1ef=>{if(_0x36d1ef){return _0x79835a(_0x36d1ef);}_0x4a81e1[a201_0x566e('0x1f')](_0x273ccb,_0x36d1ef=>{_0xc2e9b1(_0x36d1ef,_0x273ccb);});});});},function sendResetPasswordEmail(_0x220234,_0x5d7cf6){const _0x37af4e=nodemailer_1[a201_0x566e('0x1a')][a201_0x566e('0x54')]({'service':a201_0x566e('0x55'),'auth':{'user':process[a201_0x566e('0x56')][a201_0x566e('0x57')],'pass':process[a201_0x566e('0x56')][a201_0x566e('0x58')]}});const _0x345036={'to':_0x220234[a201_0x566e('0xf')],'from':a201_0x566e('0x59'),'subject':a201_0x566e('0x5a'),'text':a201_0x566e('0x5b')+_0x220234[a201_0x566e('0xf')]+a201_0x566e('0x5c')};_0x37af4e[a201_0x566e('0x5d')](_0x345036,_0x8ee349=>{_0x4a81e1[a201_0x566e('0x18')](a201_0x566e('0x20'),{'msg':a201_0x566e('0x5e')});_0x5d7cf6(_0x8ee349);});}],_0x1babe7=>{if(_0x1babe7){return _0x79835a(_0x1babe7);}_0x1b0ab0[a201_0x566e('0xa')]('/');});};exports[a201_0x566e('0x5f')]=(_0x1e2e42,_0x1df163)=>{if(_0x1e2e42[a201_0x566e('0x60')]()){return _0x1df163[a201_0x566e('0xa')]('/');}_0x1df163[a201_0x566e('0xb')](a201_0x566e('0x61'),{'title':a201_0x566e('0x62')});};exports[a201_0x566e('0x63')]=(_0x1bada5,_0x2a5e2e,_0x122351)=>{_0x1bada5[a201_0x566e('0xe')](a201_0x566e('0xf'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x1bada5[a201_0x566e('0x15')](a201_0x566e('0xf'))[a201_0x566e('0x16')]({'gmail_remove_dots':![]});const _0x97f755=_0x1bada5[a201_0x566e('0x17')]();if(_0x97f755){_0x1bada5[a201_0x566e('0x18')](a201_0x566e('0x1d'),_0x97f755);return _0x2a5e2e['redirect'](a201_0x566e('0x4b'));}async_1[a201_0x566e('0x1a')][a201_0x566e('0x50')]([function createRandomToken(_0xe47174){crypto_1[a201_0x566e('0x1a')]['randomBytes'](0x10,(_0x5ef5ea,_0x204fe5)=>{const _0x34df64=_0x204fe5[a201_0x566e('0x64')](a201_0x566e('0x65'));_0xe47174(_0x5ef5ea,_0x34df64);});},function setRandomToken(_0x1fbd7b,_0x21a0c6){User_1['default'][a201_0x566e('0x2d')]({'email':_0x1bada5[a201_0x566e('0x2b')][a201_0x566e('0xf')]},(_0x18fca0,_0x2dbbc8)=>{if(_0x18fca0){return _0x21a0c6(_0x18fca0);}if(!_0x2dbbc8){_0x1bada5['flash'](a201_0x566e('0x1d'),{'msg':a201_0x566e('0x66')});return _0x2a5e2e[a201_0x566e('0xa')](a201_0x566e('0x4b'));}_0x2dbbc8[a201_0x566e('0x53')]=_0x1fbd7b;_0x2dbbc8[a201_0x566e('0x48')]=Date[a201_0x566e('0x51')]()+0x36ee80;_0x2dbbc8[a201_0x566e('0x2f')](_0x18fca0=>{_0x21a0c6(_0x18fca0,_0x1fbd7b,_0x2dbbc8);});});},function sendForgotPasswordEmail(_0x3553f9,_0x6807cb,_0x1a2f0f){const _0x58d4d7=nodemailer_1['default'][a201_0x566e('0x54')]({'service':a201_0x566e('0x55'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a201_0x566e('0x56')][a201_0x566e('0x58')]}});const _0xb08aa1={'to':_0x6807cb[a201_0x566e('0xf')],'from':a201_0x566e('0x67'),'subject':a201_0x566e('0x68'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x1bada5[a201_0x566e('0x69')][a201_0x566e('0x6a')]+a201_0x566e('0x6b')+_0x3553f9+a201_0x566e('0x6c')};_0x58d4d7[a201_0x566e('0x5d')](_0xb08aa1,_0x361157=>{_0x1bada5[a201_0x566e('0x18')](a201_0x566e('0x6d'),{'msg':a201_0x566e('0x6e')+_0x6807cb[a201_0x566e('0xf')]+a201_0x566e('0x6f')});_0x1a2f0f(_0x361157);});}],_0x175a55=>{if(_0x175a55){return _0x122351(_0x175a55);}_0x2a5e2e[a201_0x566e('0xa')](a201_0x566e('0x4b'));});};