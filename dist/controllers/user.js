var a201_0x534e=['session','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','body','password','validationErrors','/signup','default','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','name','gender','location','website','code','success','confirmPassword','equals','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','\x20account\x20has\x20been\x20unlinked.','findOne','token','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','Passwords\x20must\x20match.','passwordResetExpires','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','/forgot','waterfall','toString','hex','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','flash','errors','/login','authenticate','local','message','logIn','Success!\x20You\x20are\x20logged\x20in.'];(function(_0x37c1fa,_0xfb9e7b){var _0x5afe77=function(_0x4029fd){while(--_0x4029fd){_0x37c1fa['push'](_0x37c1fa['shift']());}};_0x5afe77(++_0xfb9e7b);}(a201_0x534e,0x11a));var a201_0x4188=function(_0x123412,_0x24153b){_0x123412=_0x123412-0x0;var _0x27a3a6=a201_0x534e[_0x123412];return _0x27a3a6;};'use strict';var __importDefault=this&&this[a201_0x4188('0x0')]||function(_0xdfbace){return _0xdfbace&&_0xdfbace[a201_0x4188('0x1')]?_0xdfbace:{'default':_0xdfbace};};Object[a201_0x4188('0x2')](exports,a201_0x4188('0x1'),{'value':!![]});const async_1=__importDefault(require(a201_0x4188('0x3')));const crypto_1=__importDefault(require(a201_0x4188('0x4')));const nodemailer_1=__importDefault(require(a201_0x4188('0x5')));const passport_1=__importDefault(require(a201_0x4188('0x6')));const User_1=__importDefault(require(a201_0x4188('0x7')));const request=require(a201_0x4188('0x8'));exports[a201_0x4188('0x9')]=(_0x11fe90,_0x17a5d3)=>{if(_0x11fe90[a201_0x4188('0xa')]){return _0x17a5d3[a201_0x4188('0xb')]('/');}_0x17a5d3[a201_0x4188('0xc')]('account/login',{'title':a201_0x4188('0xd')});};exports[a201_0x4188('0xe')]=(_0x1e29a0,_0x293e95,_0x5d926d)=>{_0x1e29a0['assert'](a201_0x4188('0xf'),a201_0x4188('0x10'))[a201_0x4188('0x11')]();_0x1e29a0[a201_0x4188('0x12')]('password',a201_0x4188('0x13'))['notEmpty']();_0x1e29a0[a201_0x4188('0x14')](a201_0x4188('0xf'))[a201_0x4188('0x15')]({'gmail_remove_dots':![]});const _0x36ce82=_0x1e29a0['validationErrors']();if(_0x36ce82){_0x1e29a0[a201_0x4188('0x16')](a201_0x4188('0x17'),_0x36ce82);return _0x293e95['redirect'](a201_0x4188('0x18'));}passport_1['default'][a201_0x4188('0x19')](a201_0x4188('0x1a'),(_0x416484,_0x2823f4,_0x2b2d17)=>{if(_0x416484){return _0x5d926d(_0x416484);}if(!_0x2823f4){_0x1e29a0[a201_0x4188('0x16')]('errors',_0x2b2d17[a201_0x4188('0x1b')]);return _0x293e95[a201_0x4188('0xb')]('/login');}_0x1e29a0[a201_0x4188('0x1c')](_0x2823f4,_0x416484=>{if(_0x416484){return _0x5d926d(_0x416484);}_0x1e29a0[a201_0x4188('0x16')]('success',{'msg':a201_0x4188('0x1d')});_0x293e95['redirect'](_0x1e29a0[a201_0x4188('0x1e')]['returnTo']||'/');});})(_0x1e29a0,_0x293e95,_0x5d926d);};exports[a201_0x4188('0x1f')]=(_0x45b50a,_0x4ba371)=>{_0x45b50a['logout']();_0x4ba371['redirect']('/');};exports[a201_0x4188('0x20')]=(_0x1e7270,_0x5030e0)=>{if(_0x1e7270[a201_0x4188('0xa')]){return _0x5030e0[a201_0x4188('0xb')]('/');}_0x5030e0[a201_0x4188('0xc')](a201_0x4188('0x21'),{'title':a201_0x4188('0x22')});};exports[a201_0x4188('0x23')]=(_0x5a7f71,_0x40fa8e,_0x4ee09a)=>{_0x5a7f71[a201_0x4188('0x12')](a201_0x4188('0xf'),a201_0x4188('0x10'))[a201_0x4188('0x11')]();_0x5a7f71['assert']('password',a201_0x4188('0x24'))['len']({'min':0x4});_0x5a7f71[a201_0x4188('0x12')]('confirmPassword',a201_0x4188('0x25'))['equals'](_0x5a7f71[a201_0x4188('0x26')][a201_0x4188('0x27')]);_0x5a7f71[a201_0x4188('0x14')](a201_0x4188('0xf'))[a201_0x4188('0x15')]({'gmail_remove_dots':![]});const _0x6a9910=_0x5a7f71[a201_0x4188('0x28')]();if(_0x6a9910){_0x5a7f71['flash'](a201_0x4188('0x17'),_0x6a9910);return _0x40fa8e['redirect'](a201_0x4188('0x29'));}const _0x1c850a=new User_1[(a201_0x4188('0x2a'))]({'email':_0x5a7f71[a201_0x4188('0x26')]['email'],'password':_0x5a7f71['body']['password']});User_1['default']['findOne']({'email':_0x5a7f71['body']['email']},(_0x411e08,_0x354d5f)=>{if(_0x411e08){return _0x4ee09a(_0x411e08);}if(_0x354d5f){_0x5a7f71[a201_0x4188('0x16')]('errors',{'msg':a201_0x4188('0x2b')});return _0x40fa8e[a201_0x4188('0xb')](a201_0x4188('0x29'));}_0x1c850a[a201_0x4188('0x2c')](_0x411e08=>{if(_0x411e08){return _0x4ee09a(_0x411e08);}_0x5a7f71['logIn'](_0x1c850a,_0x411e08=>{if(_0x411e08){return _0x4ee09a(_0x411e08);}_0x40fa8e[a201_0x4188('0xb')]('/');});});});};exports[a201_0x4188('0x2d')]=(_0x13c08f,_0x23b363)=>{_0x23b363[a201_0x4188('0xc')](a201_0x4188('0x2e'),{'title':a201_0x4188('0x2f')});};exports[a201_0x4188('0x30')]=(_0x801d37,_0x4600a9,_0x3dc29a)=>{_0x801d37[a201_0x4188('0x12')]('email',a201_0x4188('0x31'))[a201_0x4188('0x11')]();_0x801d37['sanitize'](a201_0x4188('0xf'))[a201_0x4188('0x15')]({'gmail_remove_dots':![]});const _0x1bdcf6=_0x801d37[a201_0x4188('0x28')]();if(_0x1bdcf6){_0x801d37['flash'](a201_0x4188('0x17'),_0x1bdcf6);return _0x4600a9[a201_0x4188('0xb')](a201_0x4188('0x32'));}User_1[a201_0x4188('0x2a')]['findById'](_0x801d37[a201_0x4188('0xa')]['id'],(_0x897507,_0x2f7e2c)=>{if(_0x897507){return _0x3dc29a(_0x897507);}_0x2f7e2c[a201_0x4188('0xf')]=_0x801d37[a201_0x4188('0x26')][a201_0x4188('0xf')]||'';_0x2f7e2c[a201_0x4188('0x33')][a201_0x4188('0x34')]=_0x801d37[a201_0x4188('0x26')][a201_0x4188('0x34')]||'';_0x2f7e2c['profile']['gender']=_0x801d37[a201_0x4188('0x26')][a201_0x4188('0x35')]||'';_0x2f7e2c[a201_0x4188('0x33')][a201_0x4188('0x36')]=_0x801d37['body'][a201_0x4188('0x36')]||'';_0x2f7e2c[a201_0x4188('0x33')][a201_0x4188('0x37')]=_0x801d37[a201_0x4188('0x26')][a201_0x4188('0x37')]||'';_0x2f7e2c[a201_0x4188('0x2c')](_0x897507=>{if(_0x897507){if(_0x897507[a201_0x4188('0x38')]===0x2af8){_0x801d37['flash'](a201_0x4188('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x4600a9[a201_0x4188('0xb')](a201_0x4188('0x32'));}return _0x3dc29a(_0x897507);}_0x801d37[a201_0x4188('0x16')](a201_0x4188('0x39'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x4600a9[a201_0x4188('0xb')](a201_0x4188('0x32'));});});};exports['postUpdatePassword']=(_0x1ca31c,_0x4455a1,_0x3156c6)=>{_0x1ca31c['assert'](a201_0x4188('0x27'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x1ca31c[a201_0x4188('0x12')](a201_0x4188('0x3a'),a201_0x4188('0x25'))[a201_0x4188('0x3b')](_0x1ca31c['body']['password']);const _0x2c53af=_0x1ca31c[a201_0x4188('0x28')]();if(_0x2c53af){_0x1ca31c[a201_0x4188('0x16')](a201_0x4188('0x17'),_0x2c53af);return _0x4455a1['redirect'](a201_0x4188('0x32'));}User_1[a201_0x4188('0x2a')]['findById'](_0x1ca31c[a201_0x4188('0xa')]['id'],(_0x351a91,_0x3919fd)=>{if(_0x351a91){return _0x3156c6(_0x351a91);}_0x3919fd[a201_0x4188('0x27')]=_0x1ca31c[a201_0x4188('0x26')][a201_0x4188('0x27')];_0x3919fd[a201_0x4188('0x2c')](_0x351a91=>{if(_0x351a91){return _0x3156c6(_0x351a91);}_0x1ca31c['flash'](a201_0x4188('0x39'),{'msg':'Password\x20has\x20been\x20changed.'});_0x4455a1['redirect'](a201_0x4188('0x32'));});});};exports['postDeleteAccount']=(_0x5f249b,_0x465ac8,_0x534bf2)=>{User_1['default']['remove']({'_id':_0x5f249b[a201_0x4188('0xa')]['id']},_0x5b05ea=>{if(_0x5b05ea){return _0x534bf2(_0x5b05ea);}_0x5f249b[a201_0x4188('0x1f')]();_0x5f249b[a201_0x4188('0x16')](a201_0x4188('0x3c'),{'msg':a201_0x4188('0x3d')});_0x465ac8[a201_0x4188('0xb')]('/');});};exports[a201_0x4188('0x3e')]=(_0x1efaba,_0x2be4bd,_0x3ebd81)=>{const _0x1e3030=_0x1efaba[a201_0x4188('0x3f')][a201_0x4188('0x40')];User_1['default']['findById'](_0x1efaba['user']['id'],(_0x556e75,_0x5529c0)=>{if(_0x556e75){return _0x3ebd81(_0x556e75);}_0x5529c0[_0x1e3030]=undefined;_0x5529c0[a201_0x4188('0x41')]=_0x5529c0['tokens'][a201_0x4188('0x42')](_0x37cf8a=>_0x37cf8a['kind']!==_0x1e3030);_0x5529c0[a201_0x4188('0x2c')](_0x556e75=>{if(_0x556e75){return _0x3ebd81(_0x556e75);}_0x1efaba['flash'](a201_0x4188('0x3c'),{'msg':_0x1e3030+a201_0x4188('0x43')});_0x2be4bd[a201_0x4188('0xb')](a201_0x4188('0x32'));});});};exports['getReset']=(_0x2f8d07,_0x3df921,_0x71efe9)=>{if(_0x2f8d07['isAuthenticated']()){return _0x3df921[a201_0x4188('0xb')]('/');}User_1[a201_0x4188('0x2a')][a201_0x4188('0x44')]({'passwordResetToken':_0x2f8d07[a201_0x4188('0x3f')][a201_0x4188('0x45')]})['where']('passwordResetExpires')['gt'](Date[a201_0x4188('0x46')]())[a201_0x4188('0x47')]((_0x59634d,_0x51a746)=>{if(_0x59634d){return _0x71efe9(_0x59634d);}if(!_0x51a746){_0x2f8d07[a201_0x4188('0x16')](a201_0x4188('0x17'),{'msg':a201_0x4188('0x48')});return _0x3df921[a201_0x4188('0xb')]('/forgot');}_0x3df921['render']('account/reset',{'title':a201_0x4188('0x49')});});};exports[a201_0x4188('0x4a')]=(_0x33b1f2,_0x5ae204,_0x4e4161)=>{_0x33b1f2['assert'](a201_0x4188('0x27'),a201_0x4188('0x4b'))[a201_0x4188('0x4c')]({'min':0x4});_0x33b1f2[a201_0x4188('0x12')](a201_0x4188('0x4d'),a201_0x4188('0x4e'))['equals'](_0x33b1f2[a201_0x4188('0x26')][a201_0x4188('0x27')]);const _0x5b50ca=_0x33b1f2[a201_0x4188('0x28')]();if(_0x5b50ca){_0x33b1f2['flash'](a201_0x4188('0x17'),_0x5b50ca);return _0x5ae204['redirect']('back');}async_1[a201_0x4188('0x2a')]['waterfall']([function resetPassword(_0x181a22){User_1['default']['findOne']({'passwordResetToken':_0x33b1f2[a201_0x4188('0x3f')][a201_0x4188('0x45')]})['where'](a201_0x4188('0x4f'))['gt'](Date[a201_0x4188('0x46')]())['exec']((_0x154964,_0x5c5cc3)=>{if(_0x154964){return _0x4e4161(_0x154964);}if(!_0x5c5cc3){_0x33b1f2[a201_0x4188('0x16')]('errors',{'msg':a201_0x4188('0x48')});return _0x5ae204['redirect']('back');}_0x5c5cc3['password']=_0x33b1f2[a201_0x4188('0x26')][a201_0x4188('0x27')];_0x5c5cc3[a201_0x4188('0x50')]=undefined;_0x5c5cc3[a201_0x4188('0x4f')]=undefined;_0x5c5cc3[a201_0x4188('0x2c')](_0x154964=>{if(_0x154964){return _0x4e4161(_0x154964);}_0x33b1f2[a201_0x4188('0x1c')](_0x5c5cc3,_0x154964=>{_0x181a22(_0x154964,_0x5c5cc3);});});});},function sendResetPasswordEmail(_0x35d1cf,_0x918d94){const _0x3c69ff=nodemailer_1[a201_0x4188('0x2a')][a201_0x4188('0x51')]({'service':a201_0x4188('0x52'),'auth':{'user':process[a201_0x4188('0x53')][a201_0x4188('0x54')],'pass':process[a201_0x4188('0x53')][a201_0x4188('0x55')]}});const _0x382c99={'to':_0x35d1cf[a201_0x4188('0xf')],'from':'express-ts@starter.com','subject':a201_0x4188('0x56'),'text':a201_0x4188('0x57')+_0x35d1cf[a201_0x4188('0xf')]+a201_0x4188('0x58')};_0x3c69ff[a201_0x4188('0x59')](_0x382c99,_0x569e0f=>{_0x33b1f2[a201_0x4188('0x16')](a201_0x4188('0x39'),{'msg':a201_0x4188('0x5a')});_0x918d94(_0x569e0f);});}],_0x1c683d=>{if(_0x1c683d){return _0x4e4161(_0x1c683d);}_0x5ae204[a201_0x4188('0xb')]('/');});};exports['getForgot']=(_0x3d6688,_0x4c47e9)=>{if(_0x3d6688['isAuthenticated']()){return _0x4c47e9[a201_0x4188('0xb')]('/');}_0x4c47e9[a201_0x4188('0xc')](a201_0x4188('0x5b'),{'title':a201_0x4188('0x5c')});};exports['postForgot']=(_0x39c435,_0x5edcf7,_0x5c9877)=>{_0x39c435[a201_0x4188('0x12')](a201_0x4188('0xf'),a201_0x4188('0x31'))[a201_0x4188('0x11')]();_0x39c435['sanitize'](a201_0x4188('0xf'))[a201_0x4188('0x15')]({'gmail_remove_dots':![]});const _0x420241=_0x39c435[a201_0x4188('0x28')]();if(_0x420241){_0x39c435[a201_0x4188('0x16')](a201_0x4188('0x17'),_0x420241);return _0x5edcf7[a201_0x4188('0xb')](a201_0x4188('0x5d'));}async_1['default'][a201_0x4188('0x5e')]([function createRandomToken(_0x280c6b){crypto_1[a201_0x4188('0x2a')]['randomBytes'](0x10,(_0x923413,_0x479166)=>{const _0x519b7c=_0x479166[a201_0x4188('0x5f')](a201_0x4188('0x60'));_0x280c6b(_0x923413,_0x519b7c);});},function setRandomToken(_0x45cef4,_0xd70ebd){User_1[a201_0x4188('0x2a')][a201_0x4188('0x44')]({'email':_0x39c435[a201_0x4188('0x26')][a201_0x4188('0xf')]},(_0x24351e,_0x2f7094)=>{if(_0x24351e){return _0xd70ebd(_0x24351e);}if(!_0x2f7094){_0x39c435[a201_0x4188('0x16')](a201_0x4188('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x5edcf7[a201_0x4188('0xb')](a201_0x4188('0x5d'));}_0x2f7094[a201_0x4188('0x50')]=_0x45cef4;_0x2f7094[a201_0x4188('0x4f')]=Date[a201_0x4188('0x46')]()+0x36ee80;_0x2f7094['save'](_0x24351e=>{_0xd70ebd(_0x24351e,_0x45cef4,_0x2f7094);});});},function sendForgotPasswordEmail(_0x2cff5c,_0x1a172d,_0x267171){const _0x5ceb25=nodemailer_1['default']['createTransport']({'service':a201_0x4188('0x52'),'auth':{'user':process[a201_0x4188('0x53')][a201_0x4188('0x54')],'pass':process[a201_0x4188('0x53')][a201_0x4188('0x55')]}});const _0x144684={'to':_0x1a172d[a201_0x4188('0xf')],'from':a201_0x4188('0x61'),'subject':a201_0x4188('0x62'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x39c435[a201_0x4188('0x63')]['host']+a201_0x4188('0x64')+_0x2cff5c+a201_0x4188('0x65')};_0x5ceb25[a201_0x4188('0x59')](_0x144684,_0xfe8f6c=>{_0x39c435[a201_0x4188('0x16')](a201_0x4188('0x3c'),{'msg':a201_0x4188('0x66')+_0x1a172d['email']+a201_0x4188('0x67')});_0x267171(_0xfe8f6c);});}],_0x35172c=>{if(_0x35172c){return _0x5c9877(_0x35172c);}_0x5edcf7[a201_0x4188('0xb')](a201_0x4188('0x5d'));});};