var a95_0x2ac0=['postLogin','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','sanitize','email','validationErrors','flash','errors','default','authenticate','local','message','/login','logIn','success','session','returnTo','logout','getSignup','account/signup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','normalizeEmail','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','save','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','findOne','token','where','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','passwordResetExpires','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','postForgot','/forgot','randomBytes','hex','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','async','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','Login'];(function(_0xb67384,_0x27295a){var _0x156d7c=function(_0x52a1f8){while(--_0x52a1f8){_0xb67384['push'](_0xb67384['shift']());}};_0x156d7c(++_0x27295a);}(a95_0x2ac0,0xc7));var a95_0xc426=function(_0x129cd7,_0x4dcbad){_0x129cd7=_0x129cd7-0x0;var _0x4c4a19=a95_0x2ac0[_0x129cd7];return _0x4c4a19;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4d67ef){return _0x4d67ef&&_0x4d67ef[a95_0xc426('0x0')]?_0x4d67ef:{'default':_0x4d67ef};};Object['defineProperty'](exports,a95_0xc426('0x0'),{'value':!![]});const async_1=__importDefault(require(a95_0xc426('0x1')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a95_0xc426('0x2')));const passport_1=__importDefault(require(a95_0xc426('0x3')));const User_1=__importDefault(require(a95_0xc426('0x4')));const request=require(a95_0xc426('0x5'));exports[a95_0xc426('0x6')]=(_0x3a246a,_0x49969c)=>{if(_0x3a246a[a95_0xc426('0x7')]){return _0x49969c[a95_0xc426('0x8')]('/');}_0x49969c[a95_0xc426('0x9')]('account/login',{'title':a95_0xc426('0xa')});};exports[a95_0xc426('0xb')]=(_0x43017c,_0x487b3e,_0x18f10d)=>{_0x43017c['assert']('email',a95_0xc426('0xc'))[a95_0xc426('0xd')]();_0x43017c[a95_0xc426('0xe')](a95_0xc426('0xf'),a95_0xc426('0x10'))['notEmpty']();_0x43017c[a95_0xc426('0x11')](a95_0xc426('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x35b020=_0x43017c[a95_0xc426('0x13')]();if(_0x35b020){_0x43017c[a95_0xc426('0x14')](a95_0xc426('0x15'),_0x35b020);return _0x487b3e['redirect']('/login');}passport_1[a95_0xc426('0x16')][a95_0xc426('0x17')](a95_0xc426('0x18'),(_0x4a7172,_0x4300d3,_0x2b9447)=>{if(_0x4a7172){return _0x18f10d(_0x4a7172);}if(!_0x4300d3){_0x43017c[a95_0xc426('0x14')](a95_0xc426('0x15'),_0x2b9447[a95_0xc426('0x19')]);return _0x487b3e[a95_0xc426('0x8')](a95_0xc426('0x1a'));}_0x43017c[a95_0xc426('0x1b')](_0x4300d3,_0x4a7172=>{if(_0x4a7172){return _0x18f10d(_0x4a7172);}_0x43017c['flash'](a95_0xc426('0x1c'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x487b3e[a95_0xc426('0x8')](_0x43017c[a95_0xc426('0x1d')][a95_0xc426('0x1e')]||'/');});})(_0x43017c,_0x487b3e,_0x18f10d);};exports['logout']=(_0x3623e5,_0x14e77c)=>{_0x3623e5[a95_0xc426('0x1f')]();_0x14e77c[a95_0xc426('0x8')]('/');};exports[a95_0xc426('0x20')]=(_0x49aa38,_0x3237f3)=>{if(_0x49aa38[a95_0xc426('0x7')]){return _0x3237f3[a95_0xc426('0x8')]('/');}_0x3237f3[a95_0xc426('0x9')](a95_0xc426('0x21'),{'title':'Create\x20Account'});};exports['postSignup']=(_0x23ecae,_0x177db6,_0x22072e)=>{_0x23ecae[a95_0xc426('0xe')](a95_0xc426('0x12'),'Email\x20is\x20not\x20valid')[a95_0xc426('0xd')]();_0x23ecae[a95_0xc426('0xe')](a95_0xc426('0xf'),a95_0xc426('0x22'))[a95_0xc426('0x23')]({'min':0x4});_0x23ecae[a95_0xc426('0xe')](a95_0xc426('0x24'),a95_0xc426('0x25'))[a95_0xc426('0x26')](_0x23ecae[a95_0xc426('0x27')][a95_0xc426('0xf')]);_0x23ecae['sanitize'](a95_0xc426('0x12'))[a95_0xc426('0x28')]({'gmail_remove_dots':![]});const _0x426823=_0x23ecae['validationErrors']();if(_0x426823){_0x23ecae['flash'](a95_0xc426('0x15'),_0x426823);return _0x177db6[a95_0xc426('0x8')](a95_0xc426('0x29'));}const _0x161347=new User_1[(a95_0xc426('0x16'))]({'email':_0x23ecae['body']['email'],'password':_0x23ecae[a95_0xc426('0x27')]['password']});User_1[a95_0xc426('0x16')]['findOne']({'email':_0x23ecae['body']['email']},(_0x35a8ee,_0x47ee2a)=>{if(_0x35a8ee){return _0x22072e(_0x35a8ee);}if(_0x47ee2a){_0x23ecae['flash'](a95_0xc426('0x15'),{'msg':a95_0xc426('0x2a')});return _0x177db6['redirect']('/signup');}_0x161347['save'](_0x35a8ee=>{if(_0x35a8ee){return _0x22072e(_0x35a8ee);}_0x23ecae[a95_0xc426('0x1b')](_0x161347,_0x35a8ee=>{if(_0x35a8ee){return _0x22072e(_0x35a8ee);}_0x177db6[a95_0xc426('0x8')]('/');});});});};exports[a95_0xc426('0x2b')]=(_0x12e847,_0x3bcee1)=>{_0x3bcee1[a95_0xc426('0x9')](a95_0xc426('0x2c'),{'title':a95_0xc426('0x2d')});};exports['postUpdateProfile']=(_0x21b474,_0x523103,_0x5a305e)=>{_0x21b474[a95_0xc426('0xe')]('email',a95_0xc426('0x2e'))[a95_0xc426('0xd')]();_0x21b474[a95_0xc426('0x11')](a95_0xc426('0x12'))[a95_0xc426('0x28')]({'gmail_remove_dots':![]});const _0x43d904=_0x21b474['validationErrors']();if(_0x43d904){_0x21b474[a95_0xc426('0x14')](a95_0xc426('0x15'),_0x43d904);return _0x523103['redirect'](a95_0xc426('0x2f'));}User_1[a95_0xc426('0x16')][a95_0xc426('0x30')](_0x21b474[a95_0xc426('0x7')]['id'],(_0x2948e4,_0x426f80)=>{if(_0x2948e4){return _0x5a305e(_0x2948e4);}_0x426f80[a95_0xc426('0x12')]=_0x21b474['body'][a95_0xc426('0x12')]||'';_0x426f80['profile'][a95_0xc426('0x31')]=_0x21b474[a95_0xc426('0x27')][a95_0xc426('0x31')]||'';_0x426f80[a95_0xc426('0x32')][a95_0xc426('0x33')]=_0x21b474[a95_0xc426('0x27')]['gender']||'';_0x426f80[a95_0xc426('0x32')][a95_0xc426('0x34')]=_0x21b474[a95_0xc426('0x27')][a95_0xc426('0x34')]||'';_0x426f80['profile']['website']=_0x21b474[a95_0xc426('0x27')][a95_0xc426('0x35')]||'';_0x426f80['save'](_0x2948e4=>{if(_0x2948e4){if(_0x2948e4['code']===0x2af8){_0x21b474[a95_0xc426('0x14')]('errors',{'msg':a95_0xc426('0x36')});return _0x523103[a95_0xc426('0x8')](a95_0xc426('0x2f'));}return _0x5a305e(_0x2948e4);}_0x21b474[a95_0xc426('0x14')](a95_0xc426('0x1c'),{'msg':a95_0xc426('0x37')});_0x523103['redirect'](a95_0xc426('0x2f'));});});};exports['postUpdatePassword']=(_0x312db5,_0x3a09f3,_0x270c08)=>{_0x312db5[a95_0xc426('0xe')](a95_0xc426('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0xc426('0x23')]({'min':0x4});_0x312db5[a95_0xc426('0xe')](a95_0xc426('0x24'),a95_0xc426('0x25'))[a95_0xc426('0x26')](_0x312db5[a95_0xc426('0x27')]['password']);const _0x2149a2=_0x312db5[a95_0xc426('0x13')]();if(_0x2149a2){_0x312db5[a95_0xc426('0x14')](a95_0xc426('0x15'),_0x2149a2);return _0x3a09f3[a95_0xc426('0x8')](a95_0xc426('0x2f'));}User_1[a95_0xc426('0x16')][a95_0xc426('0x30')](_0x312db5[a95_0xc426('0x7')]['id'],(_0x425d50,_0x51fd3e)=>{if(_0x425d50){return _0x270c08(_0x425d50);}_0x51fd3e[a95_0xc426('0xf')]=_0x312db5[a95_0xc426('0x27')][a95_0xc426('0xf')];_0x51fd3e['save'](_0x425d50=>{if(_0x425d50){return _0x270c08(_0x425d50);}_0x312db5[a95_0xc426('0x14')](a95_0xc426('0x1c'),{'msg':a95_0xc426('0x38')});_0x3a09f3['redirect'](a95_0xc426('0x2f'));});});};exports[a95_0xc426('0x39')]=(_0x4ef90b,_0x23f6d1,_0x5aabf1)=>{User_1[a95_0xc426('0x16')][a95_0xc426('0x3a')]({'_id':_0x4ef90b[a95_0xc426('0x7')]['id']},_0x94b1a6=>{if(_0x94b1a6){return _0x5aabf1(_0x94b1a6);}_0x4ef90b[a95_0xc426('0x1f')]();_0x4ef90b[a95_0xc426('0x14')](a95_0xc426('0x3b'),{'msg':a95_0xc426('0x3c')});_0x23f6d1['redirect']('/');});};exports[a95_0xc426('0x3d')]=(_0x58e2fc,_0x15cfb9,_0x391929)=>{const _0x5be92e=_0x58e2fc[a95_0xc426('0x3e')][a95_0xc426('0x3f')];User_1[a95_0xc426('0x16')]['findById'](_0x58e2fc['user']['id'],(_0x5f46f1,_0x544b37)=>{if(_0x5f46f1){return _0x391929(_0x5f46f1);}_0x544b37[_0x5be92e]=undefined;_0x544b37[a95_0xc426('0x40')]=_0x544b37[a95_0xc426('0x40')][a95_0xc426('0x41')](_0x38809a=>_0x38809a[a95_0xc426('0x42')]!==_0x5be92e);_0x544b37[a95_0xc426('0x43')](_0x5f46f1=>{if(_0x5f46f1){return _0x391929(_0x5f46f1);}_0x58e2fc[a95_0xc426('0x14')](a95_0xc426('0x3b'),{'msg':_0x5be92e+a95_0xc426('0x44')});_0x15cfb9[a95_0xc426('0x8')](a95_0xc426('0x2f'));});});};exports['getReset']=(_0x37d893,_0x2951ea,_0x482b91)=>{if(_0x37d893[a95_0xc426('0x45')]()){return _0x2951ea['redirect']('/');}User_1[a95_0xc426('0x16')][a95_0xc426('0x46')]({'passwordResetToken':_0x37d893['params'][a95_0xc426('0x47')]})[a95_0xc426('0x48')]('passwordResetExpires')['gt'](Date[a95_0xc426('0x49')]())[a95_0xc426('0x4a')]((_0x5db074,_0x4eea0b)=>{if(_0x5db074){return _0x482b91(_0x5db074);}if(!_0x4eea0b){_0x37d893[a95_0xc426('0x14')](a95_0xc426('0x15'),{'msg':a95_0xc426('0x4b')});return _0x2951ea[a95_0xc426('0x8')]('/forgot');}_0x2951ea[a95_0xc426('0x9')](a95_0xc426('0x4c'),{'title':a95_0xc426('0x4d')});});};exports['postReset']=(_0x5ac145,_0x3cdc52,_0x2d8bbe)=>{_0x5ac145['assert'](a95_0xc426('0xf'),a95_0xc426('0x4e'))[a95_0xc426('0x23')]({'min':0x4});_0x5ac145['assert'](a95_0xc426('0x4f'),a95_0xc426('0x50'))[a95_0xc426('0x26')](_0x5ac145[a95_0xc426('0x27')][a95_0xc426('0xf')]);const _0x327751=_0x5ac145[a95_0xc426('0x13')]();if(_0x327751){_0x5ac145[a95_0xc426('0x14')](a95_0xc426('0x15'),_0x327751);return _0x3cdc52['redirect'](a95_0xc426('0x51'));}async_1[a95_0xc426('0x16')]['waterfall']([function resetPassword(_0x549fd6){User_1[a95_0xc426('0x16')][a95_0xc426('0x46')]({'passwordResetToken':_0x5ac145[a95_0xc426('0x3e')]['token']})[a95_0xc426('0x48')](a95_0xc426('0x52'))['gt'](Date[a95_0xc426('0x49')]())['exec']((_0x12f319,_0x3a13e6)=>{if(_0x12f319){return _0x2d8bbe(_0x12f319);}if(!_0x3a13e6){_0x5ac145[a95_0xc426('0x14')](a95_0xc426('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x3cdc52['redirect'](a95_0xc426('0x51'));}_0x3a13e6['password']=_0x5ac145[a95_0xc426('0x27')][a95_0xc426('0xf')];_0x3a13e6[a95_0xc426('0x53')]=undefined;_0x3a13e6['passwordResetExpires']=undefined;_0x3a13e6['save'](_0x12f319=>{if(_0x12f319){return _0x2d8bbe(_0x12f319);}_0x5ac145[a95_0xc426('0x1b')](_0x3a13e6,_0x12f319=>{_0x549fd6(_0x12f319,_0x3a13e6);});});});},function sendResetPasswordEmail(_0xe0ca86,_0x348dac){const _0x5e94d7=nodemailer_1[a95_0xc426('0x16')][a95_0xc426('0x54')]({'service':a95_0xc426('0x55'),'auth':{'user':process[a95_0xc426('0x56')][a95_0xc426('0x57')],'pass':process[a95_0xc426('0x56')][a95_0xc426('0x58')]}});const _0x515813={'to':_0xe0ca86[a95_0xc426('0x12')],'from':a95_0xc426('0x59'),'subject':a95_0xc426('0x5a'),'text':a95_0xc426('0x5b')+_0xe0ca86[a95_0xc426('0x12')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x5e94d7[a95_0xc426('0x5c')](_0x515813,_0x218b9b=>{_0x5ac145[a95_0xc426('0x14')](a95_0xc426('0x1c'),{'msg':a95_0xc426('0x5d')});_0x348dac(_0x218b9b);});}],_0x2159f8=>{if(_0x2159f8){return _0x2d8bbe(_0x2159f8);}_0x3cdc52['redirect']('/');});};exports['getForgot']=(_0x3e72eb,_0x4a1600)=>{if(_0x3e72eb['isAuthenticated']()){return _0x4a1600[a95_0xc426('0x8')]('/');}_0x4a1600[a95_0xc426('0x9')]('account/forgot',{'title':'Forgot\x20Password'});};exports[a95_0xc426('0x5e')]=(_0x1115f3,_0xc1f43,_0x3b5f07)=>{_0x1115f3[a95_0xc426('0xe')](a95_0xc426('0x12'),a95_0xc426('0x2e'))['isEmail']();_0x1115f3[a95_0xc426('0x11')](a95_0xc426('0x12'))[a95_0xc426('0x28')]({'gmail_remove_dots':![]});const _0x5e74e8=_0x1115f3['validationErrors']();if(_0x5e74e8){_0x1115f3[a95_0xc426('0x14')](a95_0xc426('0x15'),_0x5e74e8);return _0xc1f43[a95_0xc426('0x8')](a95_0xc426('0x5f'));}async_1[a95_0xc426('0x16')]['waterfall']([function createRandomToken(_0x314d07){crypto_1[a95_0xc426('0x16')][a95_0xc426('0x60')](0x10,(_0x76a6e2,_0xf0503e)=>{const _0x9c1fda=_0xf0503e['toString'](a95_0xc426('0x61'));_0x314d07(_0x76a6e2,_0x9c1fda);});},function setRandomToken(_0x48acdc,_0xdb8853){User_1[a95_0xc426('0x16')][a95_0xc426('0x46')]({'email':_0x1115f3[a95_0xc426('0x27')][a95_0xc426('0x12')]},(_0x459523,_0x4f3f4b)=>{if(_0x459523){return _0xdb8853(_0x459523);}if(!_0x4f3f4b){_0x1115f3['flash'](a95_0xc426('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0xc1f43[a95_0xc426('0x8')]('/forgot');}_0x4f3f4b['passwordResetToken']=_0x48acdc;_0x4f3f4b[a95_0xc426('0x52')]=Date[a95_0xc426('0x49')]()+0x36ee80;_0x4f3f4b['save'](_0x459523=>{_0xdb8853(_0x459523,_0x48acdc,_0x4f3f4b);});});},function sendForgotPasswordEmail(_0x2ce877,_0xfa5086,_0x406896){const _0x3fb1ef=nodemailer_1['default'][a95_0xc426('0x54')]({'service':a95_0xc426('0x55'),'auth':{'user':process[a95_0xc426('0x56')][a95_0xc426('0x57')],'pass':process[a95_0xc426('0x56')][a95_0xc426('0x58')]}});const _0x4b5080={'to':_0xfa5086['email'],'from':a95_0xc426('0x62'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0xc426('0x63')+_0x1115f3['headers'][a95_0xc426('0x64')]+a95_0xc426('0x65')+_0x2ce877+a95_0xc426('0x66')};_0x3fb1ef[a95_0xc426('0x5c')](_0x4b5080,_0x2b9f10=>{_0x1115f3[a95_0xc426('0x14')](a95_0xc426('0x3b'),{'msg':a95_0xc426('0x67')+_0xfa5086[a95_0xc426('0x12')]+a95_0xc426('0x68')});_0x406896(_0x2b9f10);});}],_0x2b93ca=>{if(_0x2b93ca){return _0x3b5f07(_0x2b93ca);}_0xc1f43['redirect']('/forgot');});};