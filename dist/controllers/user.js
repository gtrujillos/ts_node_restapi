var a201_0x4a26=['password','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','render','account/signup','Create\x20Account','postSignup','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','postUpdateProfile','/account','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','/forgot','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','nodemailer','passport','../models/User','redirect','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail'];(function(_0x1a3a93,_0xd5fc4e){var _0x43cd8e=function(_0x52dc57){while(--_0x52dc57){_0x1a3a93['push'](_0x1a3a93['shift']());}};_0x43cd8e(++_0xd5fc4e);}(a201_0x4a26,0x147));var a201_0x45bf=function(_0x212d23,_0x3d20bc){_0x212d23=_0x212d23-0x0;var _0x4f7472=a201_0x4a26[_0x212d23];return _0x4f7472;};'use strict';var __importDefault=this&&this[a201_0x45bf('0x0')]||function(_0xf51534){return _0xf51534&&_0xf51534[a201_0x45bf('0x1')]?_0xf51534:{'default':_0xf51534};};Object[a201_0x45bf('0x2')](exports,a201_0x45bf('0x1'),{'value':!![]});const async_1=__importDefault(require(a201_0x45bf('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a201_0x45bf('0x4')));const passport_1=__importDefault(require(a201_0x45bf('0x5')));const User_1=__importDefault(require(a201_0x45bf('0x6')));const request=require('express-validator');exports['getLogin']=(_0x18199e,_0x1c9dac)=>{if(_0x18199e['user']){return _0x1c9dac[a201_0x45bf('0x7')]('/');}_0x1c9dac['render'](a201_0x45bf('0x8'),{'title':a201_0x45bf('0x9')});};exports[a201_0x45bf('0xa')]=(_0x42444c,_0x46fe39,_0x1c0fcd)=>{_0x42444c[a201_0x45bf('0xb')](a201_0x45bf('0xc'),a201_0x45bf('0xd'))[a201_0x45bf('0xe')]();_0x42444c[a201_0x45bf('0xb')](a201_0x45bf('0xf'),'Password\x20cannot\x20be\x20blank')[a201_0x45bf('0x10')]();_0x42444c[a201_0x45bf('0x11')](a201_0x45bf('0xc'))[a201_0x45bf('0x12')]({'gmail_remove_dots':![]});const _0x1d50ff=_0x42444c[a201_0x45bf('0x13')]();if(_0x1d50ff){_0x42444c[a201_0x45bf('0x14')](a201_0x45bf('0x15'),_0x1d50ff);return _0x46fe39['redirect']('/login');}passport_1['default'][a201_0x45bf('0x16')](a201_0x45bf('0x17'),(_0x573473,_0xcd74c2,_0x44ad3a)=>{if(_0x573473){return _0x1c0fcd(_0x573473);}if(!_0xcd74c2){_0x42444c[a201_0x45bf('0x14')](a201_0x45bf('0x15'),_0x44ad3a[a201_0x45bf('0x18')]);return _0x46fe39[a201_0x45bf('0x7')]('/login');}_0x42444c[a201_0x45bf('0x19')](_0xcd74c2,_0x573473=>{if(_0x573473){return _0x1c0fcd(_0x573473);}_0x42444c['flash'](a201_0x45bf('0x1a'),{'msg':a201_0x45bf('0x1b')});_0x46fe39['redirect'](_0x42444c[a201_0x45bf('0x1c')][a201_0x45bf('0x1d')]||'/');});})(_0x42444c,_0x46fe39,_0x1c0fcd);};exports[a201_0x45bf('0x1e')]=(_0x44dbfd,_0x2f9479)=>{_0x44dbfd[a201_0x45bf('0x1e')]();_0x2f9479[a201_0x45bf('0x7')]('/');};exports[a201_0x45bf('0x1f')]=(_0x4c7d7e,_0x2f1135)=>{if(_0x4c7d7e[a201_0x45bf('0x20')]){return _0x2f1135[a201_0x45bf('0x7')]('/');}_0x2f1135[a201_0x45bf('0x21')](a201_0x45bf('0x22'),{'title':a201_0x45bf('0x23')});};exports[a201_0x45bf('0x24')]=(_0x3bb0cf,_0x206756,_0xb1681d)=>{_0x3bb0cf[a201_0x45bf('0xb')](a201_0x45bf('0xc'),a201_0x45bf('0xd'))[a201_0x45bf('0xe')]();_0x3bb0cf[a201_0x45bf('0xb')](a201_0x45bf('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a201_0x45bf('0x25')]({'min':0x4});_0x3bb0cf[a201_0x45bf('0xb')](a201_0x45bf('0x26'),a201_0x45bf('0x27'))[a201_0x45bf('0x28')](_0x3bb0cf[a201_0x45bf('0x29')][a201_0x45bf('0xf')]);_0x3bb0cf['sanitize'](a201_0x45bf('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4e0804=_0x3bb0cf[a201_0x45bf('0x13')]();if(_0x4e0804){_0x3bb0cf[a201_0x45bf('0x14')](a201_0x45bf('0x15'),_0x4e0804);return _0x206756[a201_0x45bf('0x7')](a201_0x45bf('0x2a'));}const _0x4639cc=new User_1[(a201_0x45bf('0x2b'))]({'email':_0x3bb0cf[a201_0x45bf('0x29')][a201_0x45bf('0xc')],'password':_0x3bb0cf[a201_0x45bf('0x29')][a201_0x45bf('0xf')]});User_1[a201_0x45bf('0x2b')][a201_0x45bf('0x2c')]({'email':_0x3bb0cf[a201_0x45bf('0x29')]['email']},(_0x286281,_0x5deda0)=>{if(_0x286281){return _0xb1681d(_0x286281);}if(_0x5deda0){_0x3bb0cf['flash'](a201_0x45bf('0x15'),{'msg':a201_0x45bf('0x2d')});return _0x206756[a201_0x45bf('0x7')]('/signup');}_0x4639cc[a201_0x45bf('0x2e')](_0x286281=>{if(_0x286281){return _0xb1681d(_0x286281);}_0x3bb0cf[a201_0x45bf('0x19')](_0x4639cc,_0x286281=>{if(_0x286281){return _0xb1681d(_0x286281);}_0x206756[a201_0x45bf('0x7')]('/');});});});};exports[a201_0x45bf('0x2f')]=(_0x4756ab,_0x43e92b)=>{_0x43e92b[a201_0x45bf('0x21')](a201_0x45bf('0x30'),{'title':'Account\x20Management'});};exports[a201_0x45bf('0x31')]=(_0x830ac9,_0x54624a,_0x21ac5e)=>{_0x830ac9[a201_0x45bf('0xb')](a201_0x45bf('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a201_0x45bf('0xe')]();_0x830ac9[a201_0x45bf('0x11')](a201_0x45bf('0xc'))[a201_0x45bf('0x12')]({'gmail_remove_dots':![]});const _0xae504e=_0x830ac9[a201_0x45bf('0x13')]();if(_0xae504e){_0x830ac9[a201_0x45bf('0x14')](a201_0x45bf('0x15'),_0xae504e);return _0x54624a['redirect'](a201_0x45bf('0x32'));}User_1[a201_0x45bf('0x2b')]['findById'](_0x830ac9[a201_0x45bf('0x20')]['id'],(_0x5cb21d,_0x38a1b5)=>{if(_0x5cb21d){return _0x21ac5e(_0x5cb21d);}_0x38a1b5['email']=_0x830ac9[a201_0x45bf('0x29')]['email']||'';_0x38a1b5[a201_0x45bf('0x33')][a201_0x45bf('0x34')]=_0x830ac9[a201_0x45bf('0x29')][a201_0x45bf('0x34')]||'';_0x38a1b5[a201_0x45bf('0x33')][a201_0x45bf('0x35')]=_0x830ac9[a201_0x45bf('0x29')][a201_0x45bf('0x35')]||'';_0x38a1b5[a201_0x45bf('0x33')][a201_0x45bf('0x36')]=_0x830ac9[a201_0x45bf('0x29')][a201_0x45bf('0x36')]||'';_0x38a1b5[a201_0x45bf('0x33')][a201_0x45bf('0x37')]=_0x830ac9[a201_0x45bf('0x29')][a201_0x45bf('0x37')]||'';_0x38a1b5[a201_0x45bf('0x2e')](_0x5cb21d=>{if(_0x5cb21d){if(_0x5cb21d[a201_0x45bf('0x38')]===0x2af8){_0x830ac9[a201_0x45bf('0x14')](a201_0x45bf('0x15'),{'msg':a201_0x45bf('0x39')});return _0x54624a['redirect'](a201_0x45bf('0x32'));}return _0x21ac5e(_0x5cb21d);}_0x830ac9[a201_0x45bf('0x14')](a201_0x45bf('0x1a'),{'msg':a201_0x45bf('0x3a')});_0x54624a['redirect'](a201_0x45bf('0x32'));});});};exports[a201_0x45bf('0x3b')]=(_0x4b37bd,_0x85ba5a,_0x5e50be)=>{_0x4b37bd['assert'](a201_0x45bf('0xf'),a201_0x45bf('0x3c'))[a201_0x45bf('0x25')]({'min':0x4});_0x4b37bd[a201_0x45bf('0xb')](a201_0x45bf('0x26'),a201_0x45bf('0x27'))[a201_0x45bf('0x28')](_0x4b37bd[a201_0x45bf('0x29')][a201_0x45bf('0xf')]);const _0x13c392=_0x4b37bd['validationErrors']();if(_0x13c392){_0x4b37bd[a201_0x45bf('0x14')](a201_0x45bf('0x15'),_0x13c392);return _0x85ba5a['redirect'](a201_0x45bf('0x32'));}User_1[a201_0x45bf('0x2b')][a201_0x45bf('0x3d')](_0x4b37bd[a201_0x45bf('0x20')]['id'],(_0x363895,_0x29534d)=>{if(_0x363895){return _0x5e50be(_0x363895);}_0x29534d[a201_0x45bf('0xf')]=_0x4b37bd[a201_0x45bf('0x29')]['password'];_0x29534d[a201_0x45bf('0x2e')](_0x363895=>{if(_0x363895){return _0x5e50be(_0x363895);}_0x4b37bd[a201_0x45bf('0x14')](a201_0x45bf('0x1a'),{'msg':a201_0x45bf('0x3e')});_0x85ba5a[a201_0x45bf('0x7')](a201_0x45bf('0x32'));});});};exports[a201_0x45bf('0x3f')]=(_0x1c2eba,_0x5ab98e,_0x49619f)=>{User_1[a201_0x45bf('0x2b')][a201_0x45bf('0x40')]({'_id':_0x1c2eba[a201_0x45bf('0x20')]['id']},_0x44c925=>{if(_0x44c925){return _0x49619f(_0x44c925);}_0x1c2eba[a201_0x45bf('0x1e')]();_0x1c2eba[a201_0x45bf('0x14')](a201_0x45bf('0x41'),{'msg':a201_0x45bf('0x42')});_0x5ab98e[a201_0x45bf('0x7')]('/');});};exports[a201_0x45bf('0x43')]=(_0x5c5459,_0x1ee449,_0x1d2723)=>{const _0x556cd7=_0x5c5459[a201_0x45bf('0x44')]['provider'];User_1[a201_0x45bf('0x2b')][a201_0x45bf('0x3d')](_0x5c5459[a201_0x45bf('0x20')]['id'],(_0x1c42be,_0x37f127)=>{if(_0x1c42be){return _0x1d2723(_0x1c42be);}_0x37f127[_0x556cd7]=undefined;_0x37f127[a201_0x45bf('0x45')]=_0x37f127[a201_0x45bf('0x45')]['filter'](_0x47e501=>_0x47e501[a201_0x45bf('0x46')]!==_0x556cd7);_0x37f127[a201_0x45bf('0x2e')](_0x1c42be=>{if(_0x1c42be){return _0x1d2723(_0x1c42be);}_0x5c5459[a201_0x45bf('0x14')](a201_0x45bf('0x41'),{'msg':_0x556cd7+a201_0x45bf('0x47')});_0x1ee449[a201_0x45bf('0x7')](a201_0x45bf('0x32'));});});};exports[a201_0x45bf('0x48')]=(_0x2a4327,_0x260977,_0x306639)=>{if(_0x2a4327[a201_0x45bf('0x49')]()){return _0x260977[a201_0x45bf('0x7')]('/');}User_1[a201_0x45bf('0x2b')]['findOne']({'passwordResetToken':_0x2a4327['params'][a201_0x45bf('0x4a')]})[a201_0x45bf('0x4b')](a201_0x45bf('0x4c'))['gt'](Date[a201_0x45bf('0x4d')]())[a201_0x45bf('0x4e')]((_0x1a5011,_0x386f4c)=>{if(_0x1a5011){return _0x306639(_0x1a5011);}if(!_0x386f4c){_0x2a4327[a201_0x45bf('0x14')](a201_0x45bf('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x260977['redirect'](a201_0x45bf('0x4f'));}_0x260977['render']('account/reset',{'title':'Password\x20Reset'});});};exports[a201_0x45bf('0x50')]=(_0x135677,_0x18e6f2,_0x2fd88e)=>{_0x135677[a201_0x45bf('0xb')](a201_0x45bf('0xf'),a201_0x45bf('0x51'))['len']({'min':0x4});_0x135677[a201_0x45bf('0xb')](a201_0x45bf('0x52'),a201_0x45bf('0x53'))[a201_0x45bf('0x28')](_0x135677['body'][a201_0x45bf('0xf')]);const _0x4d5c51=_0x135677[a201_0x45bf('0x13')]();if(_0x4d5c51){_0x135677['flash'](a201_0x45bf('0x15'),_0x4d5c51);return _0x18e6f2[a201_0x45bf('0x7')](a201_0x45bf('0x54'));}async_1['default'][a201_0x45bf('0x55')]([function resetPassword(_0x29f551){User_1['default'][a201_0x45bf('0x2c')]({'passwordResetToken':_0x135677[a201_0x45bf('0x44')][a201_0x45bf('0x4a')]})[a201_0x45bf('0x4b')]('passwordResetExpires')['gt'](Date[a201_0x45bf('0x4d')]())['exec']((_0x4e441d,_0x561522)=>{if(_0x4e441d){return _0x2fd88e(_0x4e441d);}if(!_0x561522){_0x135677['flash'](a201_0x45bf('0x15'),{'msg':a201_0x45bf('0x56')});return _0x18e6f2[a201_0x45bf('0x7')](a201_0x45bf('0x54'));}_0x561522['password']=_0x135677[a201_0x45bf('0x29')]['password'];_0x561522['passwordResetToken']=undefined;_0x561522[a201_0x45bf('0x4c')]=undefined;_0x561522[a201_0x45bf('0x2e')](_0x4e441d=>{if(_0x4e441d){return _0x2fd88e(_0x4e441d);}_0x135677[a201_0x45bf('0x19')](_0x561522,_0x4e441d=>{_0x29f551(_0x4e441d,_0x561522);});});});},function sendResetPasswordEmail(_0x1fc214,_0x4dd648){const _0x5c1b66=nodemailer_1['default'][a201_0x45bf('0x57')]({'service':'SendGrid','auth':{'user':process[a201_0x45bf('0x58')][a201_0x45bf('0x59')],'pass':process[a201_0x45bf('0x58')][a201_0x45bf('0x5a')]}});const _0x4eff8a={'to':_0x1fc214['email'],'from':a201_0x45bf('0x5b'),'subject':a201_0x45bf('0x5c'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x1fc214[a201_0x45bf('0xc')]+a201_0x45bf('0x5d')};_0x5c1b66[a201_0x45bf('0x5e')](_0x4eff8a,_0x2efaf7=>{_0x135677[a201_0x45bf('0x14')](a201_0x45bf('0x1a'),{'msg':a201_0x45bf('0x5f')});_0x4dd648(_0x2efaf7);});}],_0x29ebe7=>{if(_0x29ebe7){return _0x2fd88e(_0x29ebe7);}_0x18e6f2[a201_0x45bf('0x7')]('/');});};exports[a201_0x45bf('0x60')]=(_0x2695d2,_0x13609c)=>{if(_0x2695d2[a201_0x45bf('0x49')]()){return _0x13609c[a201_0x45bf('0x7')]('/');}_0x13609c[a201_0x45bf('0x21')](a201_0x45bf('0x61'),{'title':a201_0x45bf('0x62')});};exports[a201_0x45bf('0x63')]=(_0x43965a,_0x1ccaa2,_0x15dc4b)=>{_0x43965a[a201_0x45bf('0xb')](a201_0x45bf('0xc'),a201_0x45bf('0x64'))[a201_0x45bf('0xe')]();_0x43965a[a201_0x45bf('0x11')](a201_0x45bf('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1b0838=_0x43965a[a201_0x45bf('0x13')]();if(_0x1b0838){_0x43965a[a201_0x45bf('0x14')](a201_0x45bf('0x15'),_0x1b0838);return _0x1ccaa2[a201_0x45bf('0x7')](a201_0x45bf('0x4f'));}async_1[a201_0x45bf('0x2b')][a201_0x45bf('0x55')]([function createRandomToken(_0x5c6bb6){crypto_1[a201_0x45bf('0x2b')][a201_0x45bf('0x65')](0x10,(_0x3d8a6d,_0x11dd1f)=>{const _0x35d58e=_0x11dd1f[a201_0x45bf('0x66')]('hex');_0x5c6bb6(_0x3d8a6d,_0x35d58e);});},function setRandomToken(_0x31938a,_0x2a24e1){User_1[a201_0x45bf('0x2b')][a201_0x45bf('0x2c')]({'email':_0x43965a[a201_0x45bf('0x29')][a201_0x45bf('0xc')]},(_0x3f2277,_0x4f6f9a)=>{if(_0x3f2277){return _0x2a24e1(_0x3f2277);}if(!_0x4f6f9a){_0x43965a[a201_0x45bf('0x14')](a201_0x45bf('0x15'),{'msg':a201_0x45bf('0x67')});return _0x1ccaa2[a201_0x45bf('0x7')](a201_0x45bf('0x4f'));}_0x4f6f9a[a201_0x45bf('0x68')]=_0x31938a;_0x4f6f9a[a201_0x45bf('0x4c')]=Date[a201_0x45bf('0x4d')]()+0x36ee80;_0x4f6f9a[a201_0x45bf('0x2e')](_0x3f2277=>{_0x2a24e1(_0x3f2277,_0x31938a,_0x4f6f9a);});});},function sendForgotPasswordEmail(_0x123e8f,_0x4da197,_0x3ca751){const _0x278afc=nodemailer_1[a201_0x45bf('0x2b')][a201_0x45bf('0x57')]({'service':'SendGrid','auth':{'user':process['env'][a201_0x45bf('0x59')],'pass':process[a201_0x45bf('0x58')][a201_0x45bf('0x5a')]}});const _0x498a18={'to':_0x4da197[a201_0x45bf('0xc')],'from':a201_0x45bf('0x69'),'subject':a201_0x45bf('0x6a'),'text':a201_0x45bf('0x6b')+_0x43965a[a201_0x45bf('0x6c')][a201_0x45bf('0x6d')]+a201_0x45bf('0x6e')+_0x123e8f+a201_0x45bf('0x6f')};_0x278afc['sendMail'](_0x498a18,_0x3420d2=>{_0x43965a[a201_0x45bf('0x14')](a201_0x45bf('0x41'),{'msg':a201_0x45bf('0x70')+_0x4da197[a201_0x45bf('0xc')]+a201_0x45bf('0x71')});_0x3ca751(_0x3420d2);});}],_0x5a5c36=>{if(_0x5a5c36){return _0x15dc4b(_0x5a5c36);}_0x1ccaa2['redirect'](a201_0x45bf('0x4f'));});};