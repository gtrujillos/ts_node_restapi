var a95_0x128b=['findOne','save','logIn','getAccount','account/profile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','/account','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Password\x20has\x20been\x20changed.','postDeleteAccount','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','params','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','postForgot','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','passport','../models/User','getLogin','redirect','render','postLogin','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','validationErrors','errors','authenticate','local','flash','message','/login','success','session','returnTo','logout','getSignup','user','account/signup','Create\x20Account','postSignup','isEmail','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','normalizeEmail','/signup','default'];(function(_0x4082c6,_0x1a3b1c){var _0x2997da=function(_0x19ad97){while(--_0x19ad97){_0x4082c6['push'](_0x4082c6['shift']());}};_0x2997da(++_0x1a3b1c);}(a95_0x128b,0x10b));var a95_0x1937=function(_0x381278,_0x4b11ab){_0x381278=_0x381278-0x0;var _0x547134=a95_0x128b[_0x381278];return _0x547134;};'use strict';var __importDefault=this&&this[a95_0x1937('0x0')]||function(_0x3e8c88){return _0x3e8c88&&_0x3e8c88[a95_0x1937('0x1')]?_0x3e8c88:{'default':_0x3e8c88};};Object[a95_0x1937('0x2')](exports,a95_0x1937('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x1937('0x3')));const crypto_1=__importDefault(require(a95_0x1937('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a95_0x1937('0x5')));const User_1=__importDefault(require(a95_0x1937('0x6')));const request=require('express-validator');exports[a95_0x1937('0x7')]=(_0x38d06b,_0x563442)=>{if(_0x38d06b['user']){return _0x563442[a95_0x1937('0x8')]('/');}_0x563442[a95_0x1937('0x9')]('account/login',{'title':'Login'});};exports[a95_0x1937('0xa')]=(_0x860cbf,_0x5b5b5c,_0x5b9204)=>{_0x860cbf[a95_0x1937('0xb')]('email','Email\x20is\x20not\x20valid')['isEmail']();_0x860cbf[a95_0x1937('0xb')](a95_0x1937('0xc'),a95_0x1937('0xd'))[a95_0x1937('0xe')]();_0x860cbf[a95_0x1937('0xf')](a95_0x1937('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1d1317=_0x860cbf[a95_0x1937('0x11')]();if(_0x1d1317){_0x860cbf['flash'](a95_0x1937('0x12'),_0x1d1317);return _0x5b5b5c[a95_0x1937('0x8')]('/login');}passport_1['default'][a95_0x1937('0x13')](a95_0x1937('0x14'),(_0x10d09f,_0x3e7211,_0x593513)=>{if(_0x10d09f){return _0x5b9204(_0x10d09f);}if(!_0x3e7211){_0x860cbf[a95_0x1937('0x15')](a95_0x1937('0x12'),_0x593513[a95_0x1937('0x16')]);return _0x5b5b5c[a95_0x1937('0x8')](a95_0x1937('0x17'));}_0x860cbf['logIn'](_0x3e7211,_0x10d09f=>{if(_0x10d09f){return _0x5b9204(_0x10d09f);}_0x860cbf[a95_0x1937('0x15')](a95_0x1937('0x18'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x5b5b5c[a95_0x1937('0x8')](_0x860cbf[a95_0x1937('0x19')][a95_0x1937('0x1a')]||'/');});})(_0x860cbf,_0x5b5b5c,_0x5b9204);};exports['logout']=(_0x26f8c9,_0x485c7d)=>{_0x26f8c9[a95_0x1937('0x1b')]();_0x485c7d[a95_0x1937('0x8')]('/');};exports[a95_0x1937('0x1c')]=(_0x5c01ac,_0xd4f4f1)=>{if(_0x5c01ac[a95_0x1937('0x1d')]){return _0xd4f4f1[a95_0x1937('0x8')]('/');}_0xd4f4f1[a95_0x1937('0x9')](a95_0x1937('0x1e'),{'title':a95_0x1937('0x1f')});};exports[a95_0x1937('0x20')]=(_0x5409ba,_0x4b8ef7,_0xba729f)=>{_0x5409ba[a95_0x1937('0xb')](a95_0x1937('0x10'),'Email\x20is\x20not\x20valid')[a95_0x1937('0x21')]();_0x5409ba[a95_0x1937('0xb')](a95_0x1937('0xc'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x1937('0x22')]({'min':0x4});_0x5409ba[a95_0x1937('0xb')](a95_0x1937('0x23'),a95_0x1937('0x24'))[a95_0x1937('0x25')](_0x5409ba[a95_0x1937('0x26')][a95_0x1937('0xc')]);_0x5409ba[a95_0x1937('0xf')]('email')[a95_0x1937('0x27')]({'gmail_remove_dots':![]});const _0x535b3b=_0x5409ba[a95_0x1937('0x11')]();if(_0x535b3b){_0x5409ba[a95_0x1937('0x15')](a95_0x1937('0x12'),_0x535b3b);return _0x4b8ef7[a95_0x1937('0x8')](a95_0x1937('0x28'));}const _0x3cd00f=new User_1['default']({'email':_0x5409ba[a95_0x1937('0x26')][a95_0x1937('0x10')],'password':_0x5409ba['body'][a95_0x1937('0xc')]});User_1[a95_0x1937('0x29')][a95_0x1937('0x2a')]({'email':_0x5409ba['body'][a95_0x1937('0x10')]},(_0xbc9077,_0x4bd91e)=>{if(_0xbc9077){return _0xba729f(_0xbc9077);}if(_0x4bd91e){_0x5409ba[a95_0x1937('0x15')](a95_0x1937('0x12'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x4b8ef7[a95_0x1937('0x8')](a95_0x1937('0x28'));}_0x3cd00f[a95_0x1937('0x2b')](_0xbc9077=>{if(_0xbc9077){return _0xba729f(_0xbc9077);}_0x5409ba[a95_0x1937('0x2c')](_0x3cd00f,_0xbc9077=>{if(_0xbc9077){return _0xba729f(_0xbc9077);}_0x4b8ef7['redirect']('/');});});});};exports[a95_0x1937('0x2d')]=(_0x135ef5,_0x3b22bf)=>{_0x3b22bf['render'](a95_0x1937('0x2e'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x2f26a1,_0x24d33d,_0x2597c3)=>{_0x2f26a1['assert'](a95_0x1937('0x10'),a95_0x1937('0x2f'))[a95_0x1937('0x21')]();_0x2f26a1[a95_0x1937('0xf')](a95_0x1937('0x10'))[a95_0x1937('0x27')]({'gmail_remove_dots':![]});const _0x49cfd2=_0x2f26a1[a95_0x1937('0x11')]();if(_0x49cfd2){_0x2f26a1[a95_0x1937('0x15')]('errors',_0x49cfd2);return _0x24d33d[a95_0x1937('0x8')]('/account');}User_1[a95_0x1937('0x29')][a95_0x1937('0x30')](_0x2f26a1[a95_0x1937('0x1d')]['id'],(_0x482413,_0x4f2eba)=>{if(_0x482413){return _0x2597c3(_0x482413);}_0x4f2eba[a95_0x1937('0x10')]=_0x2f26a1[a95_0x1937('0x26')][a95_0x1937('0x10')]||'';_0x4f2eba[a95_0x1937('0x31')]['name']=_0x2f26a1['body'][a95_0x1937('0x32')]||'';_0x4f2eba['profile'][a95_0x1937('0x33')]=_0x2f26a1[a95_0x1937('0x26')][a95_0x1937('0x33')]||'';_0x4f2eba['profile'][a95_0x1937('0x34')]=_0x2f26a1[a95_0x1937('0x26')][a95_0x1937('0x34')]||'';_0x4f2eba['profile'][a95_0x1937('0x35')]=_0x2f26a1[a95_0x1937('0x26')][a95_0x1937('0x35')]||'';_0x4f2eba[a95_0x1937('0x2b')](_0x482413=>{if(_0x482413){if(_0x482413[a95_0x1937('0x36')]===0x2af8){_0x2f26a1['flash'](a95_0x1937('0x12'),{'msg':a95_0x1937('0x37')});return _0x24d33d[a95_0x1937('0x8')]('/account');}return _0x2597c3(_0x482413);}_0x2f26a1[a95_0x1937('0x15')](a95_0x1937('0x18'),{'msg':a95_0x1937('0x38')});_0x24d33d['redirect'](a95_0x1937('0x39'));});});};exports[a95_0x1937('0x3a')]=(_0x1f116b,_0x589ba8,_0x8ff2d3)=>{_0x1f116b[a95_0x1937('0xb')](a95_0x1937('0xc'),a95_0x1937('0x3b'))['len']({'min':0x4});_0x1f116b[a95_0x1937('0xb')](a95_0x1937('0x23'),'Passwords\x20do\x20not\x20match')[a95_0x1937('0x25')](_0x1f116b[a95_0x1937('0x26')][a95_0x1937('0xc')]);const _0x1ca460=_0x1f116b[a95_0x1937('0x11')]();if(_0x1ca460){_0x1f116b[a95_0x1937('0x15')](a95_0x1937('0x12'),_0x1ca460);return _0x589ba8[a95_0x1937('0x8')](a95_0x1937('0x39'));}User_1[a95_0x1937('0x29')][a95_0x1937('0x30')](_0x1f116b[a95_0x1937('0x1d')]['id'],(_0x4739bc,_0x3eaab2)=>{if(_0x4739bc){return _0x8ff2d3(_0x4739bc);}_0x3eaab2[a95_0x1937('0xc')]=_0x1f116b['body'][a95_0x1937('0xc')];_0x3eaab2[a95_0x1937('0x2b')](_0x4739bc=>{if(_0x4739bc){return _0x8ff2d3(_0x4739bc);}_0x1f116b[a95_0x1937('0x15')](a95_0x1937('0x18'),{'msg':a95_0x1937('0x3c')});_0x589ba8[a95_0x1937('0x8')]('/account');});});};exports[a95_0x1937('0x3d')]=(_0x16497d,_0xda6997,_0x18dd30)=>{User_1[a95_0x1937('0x29')]['remove']({'_id':_0x16497d[a95_0x1937('0x1d')]['id']},_0x1cc3a8=>{if(_0x1cc3a8){return _0x18dd30(_0x1cc3a8);}_0x16497d[a95_0x1937('0x1b')]();_0x16497d['flash']('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0xda6997['redirect']('/');});};exports['getOauthUnlink']=(_0x339d07,_0xc8ea16,_0x51ce47)=>{const _0x223187=_0x339d07['params']['provider'];User_1[a95_0x1937('0x29')]['findById'](_0x339d07[a95_0x1937('0x1d')]['id'],(_0x545f2b,_0xdf2465)=>{if(_0x545f2b){return _0x51ce47(_0x545f2b);}_0xdf2465[_0x223187]=undefined;_0xdf2465[a95_0x1937('0x3e')]=_0xdf2465['tokens'][a95_0x1937('0x3f')](_0x42b1e2=>_0x42b1e2[a95_0x1937('0x40')]!==_0x223187);_0xdf2465['save'](_0x545f2b=>{if(_0x545f2b){return _0x51ce47(_0x545f2b);}_0x339d07[a95_0x1937('0x15')](a95_0x1937('0x41'),{'msg':_0x223187+a95_0x1937('0x42')});_0xc8ea16[a95_0x1937('0x8')](a95_0x1937('0x39'));});});};exports['getReset']=(_0x1d8fa8,_0x37fb99,_0x53dc43)=>{if(_0x1d8fa8[a95_0x1937('0x43')]()){return _0x37fb99['redirect']('/');}User_1['default'][a95_0x1937('0x2a')]({'passwordResetToken':_0x1d8fa8[a95_0x1937('0x44')][a95_0x1937('0x45')]})[a95_0x1937('0x46')](a95_0x1937('0x47'))['gt'](Date[a95_0x1937('0x48')]())[a95_0x1937('0x49')]((_0x3873cd,_0x47512e)=>{if(_0x3873cd){return _0x53dc43(_0x3873cd);}if(!_0x47512e){_0x1d8fa8[a95_0x1937('0x15')](a95_0x1937('0x12'),{'msg':a95_0x1937('0x4a')});return _0x37fb99['redirect'](a95_0x1937('0x4b'));}_0x37fb99[a95_0x1937('0x9')](a95_0x1937('0x4c'),{'title':'Password\x20Reset'});});};exports[a95_0x1937('0x4d')]=(_0x4950ef,_0x3c50a9,_0x5be92f)=>{_0x4950ef[a95_0x1937('0xb')](a95_0x1937('0xc'),a95_0x1937('0x4e'))['len']({'min':0x4});_0x4950ef['assert'](a95_0x1937('0x4f'),a95_0x1937('0x50'))[a95_0x1937('0x25')](_0x4950ef[a95_0x1937('0x26')][a95_0x1937('0xc')]);const _0x5218f4=_0x4950ef[a95_0x1937('0x11')]();if(_0x5218f4){_0x4950ef[a95_0x1937('0x15')](a95_0x1937('0x12'),_0x5218f4);return _0x3c50a9[a95_0x1937('0x8')](a95_0x1937('0x51'));}async_1[a95_0x1937('0x29')][a95_0x1937('0x52')]([function resetPassword(_0x1eadf8){User_1[a95_0x1937('0x29')][a95_0x1937('0x2a')]({'passwordResetToken':_0x4950ef['params']['token']})[a95_0x1937('0x46')](a95_0x1937('0x47'))['gt'](Date[a95_0x1937('0x48')]())['exec']((_0x24868e,_0x39fd2a)=>{if(_0x24868e){return _0x5be92f(_0x24868e);}if(!_0x39fd2a){_0x4950ef[a95_0x1937('0x15')](a95_0x1937('0x12'),{'msg':a95_0x1937('0x4a')});return _0x3c50a9[a95_0x1937('0x8')]('back');}_0x39fd2a['password']=_0x4950ef[a95_0x1937('0x26')][a95_0x1937('0xc')];_0x39fd2a[a95_0x1937('0x53')]=undefined;_0x39fd2a[a95_0x1937('0x47')]=undefined;_0x39fd2a['save'](_0x24868e=>{if(_0x24868e){return _0x5be92f(_0x24868e);}_0x4950ef[a95_0x1937('0x2c')](_0x39fd2a,_0x24868e=>{_0x1eadf8(_0x24868e,_0x39fd2a);});});});},function sendResetPasswordEmail(_0x1a29a6,_0x4a62b1){const _0x8f1d09=nodemailer_1[a95_0x1937('0x29')]['createTransport']({'service':a95_0x1937('0x54'),'auth':{'user':process[a95_0x1937('0x55')][a95_0x1937('0x56')],'pass':process[a95_0x1937('0x55')][a95_0x1937('0x57')]}});const _0x2ef407={'to':_0x1a29a6['email'],'from':'express-ts@starter.com','subject':a95_0x1937('0x58'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x1a29a6['email']+a95_0x1937('0x59')};_0x8f1d09[a95_0x1937('0x5a')](_0x2ef407,_0x15172c=>{_0x4950ef['flash'](a95_0x1937('0x18'),{'msg':a95_0x1937('0x5b')});_0x4a62b1(_0x15172c);});}],_0x46cff8=>{if(_0x46cff8){return _0x5be92f(_0x46cff8);}_0x3c50a9[a95_0x1937('0x8')]('/');});};exports[a95_0x1937('0x5c')]=(_0x3d5d51,_0x48b613)=>{if(_0x3d5d51['isAuthenticated']()){return _0x48b613[a95_0x1937('0x8')]('/');}_0x48b613[a95_0x1937('0x9')]('account/forgot',{'title':'Forgot\x20Password'});};exports[a95_0x1937('0x5d')]=(_0x91478f,_0x5d11ba,_0x5a23f7)=>{_0x91478f['assert'](a95_0x1937('0x10'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x1937('0x21')]();_0x91478f['sanitize']('email')[a95_0x1937('0x27')]({'gmail_remove_dots':![]});const _0x2c5a62=_0x91478f[a95_0x1937('0x11')]();if(_0x2c5a62){_0x91478f[a95_0x1937('0x15')](a95_0x1937('0x12'),_0x2c5a62);return _0x5d11ba[a95_0x1937('0x8')](a95_0x1937('0x4b'));}async_1[a95_0x1937('0x29')]['waterfall']([function createRandomToken(_0x579e0d){crypto_1['default']['randomBytes'](0x10,(_0x1762d8,_0x2765cf)=>{const _0x2ba400=_0x2765cf[a95_0x1937('0x5e')](a95_0x1937('0x5f'));_0x579e0d(_0x1762d8,_0x2ba400);});},function setRandomToken(_0x45f423,_0x54b073){User_1[a95_0x1937('0x29')][a95_0x1937('0x2a')]({'email':_0x91478f[a95_0x1937('0x26')][a95_0x1937('0x10')]},(_0x496cad,_0x1d156e)=>{if(_0x496cad){return _0x54b073(_0x496cad);}if(!_0x1d156e){_0x91478f[a95_0x1937('0x15')](a95_0x1937('0x12'),{'msg':a95_0x1937('0x60')});return _0x5d11ba[a95_0x1937('0x8')](a95_0x1937('0x4b'));}_0x1d156e[a95_0x1937('0x53')]=_0x45f423;_0x1d156e['passwordResetExpires']=Date[a95_0x1937('0x48')]()+0x36ee80;_0x1d156e[a95_0x1937('0x2b')](_0x496cad=>{_0x54b073(_0x496cad,_0x45f423,_0x1d156e);});});},function sendForgotPasswordEmail(_0x1d6676,_0x51de5c,_0xd9ccee){const _0x4c0247=nodemailer_1[a95_0x1937('0x29')][a95_0x1937('0x61')]({'service':a95_0x1937('0x54'),'auth':{'user':process['env'][a95_0x1937('0x56')],'pass':process[a95_0x1937('0x55')][a95_0x1937('0x57')]}});const _0x493080={'to':_0x51de5c[a95_0x1937('0x10')],'from':'hackathon@starter.com','subject':a95_0x1937('0x62'),'text':a95_0x1937('0x63')+_0x91478f['headers'][a95_0x1937('0x64')]+a95_0x1937('0x65')+_0x1d6676+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x4c0247[a95_0x1937('0x5a')](_0x493080,_0x63b084=>{_0x91478f[a95_0x1937('0x15')](a95_0x1937('0x41'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x51de5c[a95_0x1937('0x10')]+a95_0x1937('0x66')});_0xd9ccee(_0x63b084);});}],_0x1a8e31=>{if(_0x1a8e31){return _0x5a23f7(_0x1a8e31);}_0x5d11ba['redirect'](a95_0x1937('0x4b'));});};