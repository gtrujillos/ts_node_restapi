var a95_0x1edc=['sanitize','normalizeEmail','validationErrors','flash','/login','default','authenticate','errors','message','redirect','logIn','success','session','returnTo','logout','getSignup','user','account/signup','Create\x20Account','postSignup','len','Passwords\x20do\x20not\x20match','equals','body','password','email','/signup','save','account/profile','Account\x20Management','findById','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','waterfall','back','createTransport','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','postForgot','toString','hex','passwordResetToken','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','../models/User','express-validator','getLogin','render','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank'];(function(_0x2052dd,_0x2fea83){var _0x357665=function(_0x3a305b){while(--_0x3a305b){_0x2052dd['push'](_0x2052dd['shift']());}};_0x357665(++_0x2fea83);}(a95_0x1edc,0x19d));var a95_0x45b9=function(_0x47fdcd,_0x3952cc){_0x47fdcd=_0x47fdcd-0x0;var _0x1ebd76=a95_0x1edc[_0x47fdcd];return _0x1ebd76;};'use strict';var __importDefault=this&&this[a95_0x45b9('0x0')]||function(_0x34cfa5){return _0x34cfa5&&_0x34cfa5[a95_0x45b9('0x1')]?_0x34cfa5:{'default':_0x34cfa5};};Object[a95_0x45b9('0x2')](exports,a95_0x45b9('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x45b9('0x3')));const crypto_1=__importDefault(require(a95_0x45b9('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a95_0x45b9('0x5')));const request=require(a95_0x45b9('0x6'));exports[a95_0x45b9('0x7')]=(_0x22da7e,_0x2bd7eb)=>{if(_0x22da7e['user']){return _0x2bd7eb['redirect']('/');}_0x2bd7eb[a95_0x45b9('0x8')]('account/login',{'title':a95_0x45b9('0x9')});};exports[a95_0x45b9('0xa')]=(_0x173126,_0x348f25,_0x52f67c)=>{_0x173126[a95_0x45b9('0xb')]('email',a95_0x45b9('0xc'))[a95_0x45b9('0xd')]();_0x173126[a95_0x45b9('0xb')]('password',a95_0x45b9('0xe'))['notEmpty']();_0x173126[a95_0x45b9('0xf')]('email')[a95_0x45b9('0x10')]({'gmail_remove_dots':![]});const _0x1a304d=_0x173126[a95_0x45b9('0x11')]();if(_0x1a304d){_0x173126[a95_0x45b9('0x12')]('errors',_0x1a304d);return _0x348f25['redirect'](a95_0x45b9('0x13'));}passport_1[a95_0x45b9('0x14')][a95_0x45b9('0x15')]('local',(_0x5d1ec9,_0xc2a87a,_0x2272d8)=>{if(_0x5d1ec9){return _0x52f67c(_0x5d1ec9);}if(!_0xc2a87a){_0x173126[a95_0x45b9('0x12')](a95_0x45b9('0x16'),_0x2272d8[a95_0x45b9('0x17')]);return _0x348f25[a95_0x45b9('0x18')](a95_0x45b9('0x13'));}_0x173126[a95_0x45b9('0x19')](_0xc2a87a,_0x5d1ec9=>{if(_0x5d1ec9){return _0x52f67c(_0x5d1ec9);}_0x173126[a95_0x45b9('0x12')](a95_0x45b9('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x348f25['redirect'](_0x173126[a95_0x45b9('0x1b')][a95_0x45b9('0x1c')]||'/');});})(_0x173126,_0x348f25,_0x52f67c);};exports[a95_0x45b9('0x1d')]=(_0x32b56b,_0x14dd89)=>{_0x32b56b['logout']();_0x14dd89[a95_0x45b9('0x18')]('/');};exports[a95_0x45b9('0x1e')]=(_0x587ecf,_0x1b3189)=>{if(_0x587ecf[a95_0x45b9('0x1f')]){return _0x1b3189['redirect']('/');}_0x1b3189['render'](a95_0x45b9('0x20'),{'title':a95_0x45b9('0x21')});};exports[a95_0x45b9('0x22')]=(_0x5130e3,_0x2b7725,_0x39e5de)=>{_0x5130e3[a95_0x45b9('0xb')]('email',a95_0x45b9('0xc'))[a95_0x45b9('0xd')]();_0x5130e3[a95_0x45b9('0xb')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x45b9('0x23')]({'min':0x4});_0x5130e3[a95_0x45b9('0xb')]('confirmPassword',a95_0x45b9('0x24'))[a95_0x45b9('0x25')](_0x5130e3[a95_0x45b9('0x26')][a95_0x45b9('0x27')]);_0x5130e3['sanitize'](a95_0x45b9('0x28'))[a95_0x45b9('0x10')]({'gmail_remove_dots':![]});const _0x970c09=_0x5130e3[a95_0x45b9('0x11')]();if(_0x970c09){_0x5130e3['flash']('errors',_0x970c09);return _0x2b7725[a95_0x45b9('0x18')](a95_0x45b9('0x29'));}const _0x1f00bd=new User_1['default']({'email':_0x5130e3['body']['email'],'password':_0x5130e3['body']['password']});User_1[a95_0x45b9('0x14')]['findOne']({'email':_0x5130e3['body']['email']},(_0x324e15,_0x1c2828)=>{if(_0x324e15){return _0x39e5de(_0x324e15);}if(_0x1c2828){_0x5130e3['flash'](a95_0x45b9('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x2b7725[a95_0x45b9('0x18')](a95_0x45b9('0x29'));}_0x1f00bd[a95_0x45b9('0x2a')](_0x324e15=>{if(_0x324e15){return _0x39e5de(_0x324e15);}_0x5130e3['logIn'](_0x1f00bd,_0x324e15=>{if(_0x324e15){return _0x39e5de(_0x324e15);}_0x2b7725[a95_0x45b9('0x18')]('/');});});});};exports['getAccount']=(_0x281fdb,_0x570673)=>{_0x570673[a95_0x45b9('0x8')](a95_0x45b9('0x2b'),{'title':a95_0x45b9('0x2c')});};exports['postUpdateProfile']=(_0x5b9097,_0x4cddbc,_0x1c931c)=>{_0x5b9097[a95_0x45b9('0xb')](a95_0x45b9('0x28'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x5b9097['sanitize'](a95_0x45b9('0x28'))[a95_0x45b9('0x10')]({'gmail_remove_dots':![]});const _0x31319e=_0x5b9097[a95_0x45b9('0x11')]();if(_0x31319e){_0x5b9097['flash'](a95_0x45b9('0x16'),_0x31319e);return _0x4cddbc['redirect']('/account');}User_1[a95_0x45b9('0x14')][a95_0x45b9('0x2d')](_0x5b9097[a95_0x45b9('0x1f')]['id'],(_0x5b1633,_0x365965)=>{if(_0x5b1633){return _0x1c931c(_0x5b1633);}_0x365965[a95_0x45b9('0x28')]=_0x5b9097[a95_0x45b9('0x26')][a95_0x45b9('0x28')]||'';_0x365965['profile'][a95_0x45b9('0x2e')]=_0x5b9097[a95_0x45b9('0x26')]['name']||'';_0x365965[a95_0x45b9('0x2f')][a95_0x45b9('0x30')]=_0x5b9097[a95_0x45b9('0x26')][a95_0x45b9('0x30')]||'';_0x365965[a95_0x45b9('0x2f')]['location']=_0x5b9097[a95_0x45b9('0x26')][a95_0x45b9('0x31')]||'';_0x365965[a95_0x45b9('0x2f')][a95_0x45b9('0x32')]=_0x5b9097[a95_0x45b9('0x26')][a95_0x45b9('0x32')]||'';_0x365965[a95_0x45b9('0x2a')](_0x5b1633=>{if(_0x5b1633){if(_0x5b1633['code']===0x2af8){_0x5b9097[a95_0x45b9('0x12')]('errors',{'msg':a95_0x45b9('0x33')});return _0x4cddbc[a95_0x45b9('0x18')](a95_0x45b9('0x34'));}return _0x1c931c(_0x5b1633);}_0x5b9097['flash'](a95_0x45b9('0x1a'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x4cddbc[a95_0x45b9('0x18')]('/account');});});};exports[a95_0x45b9('0x35')]=(_0x1d3a3b,_0x17df07,_0x2a7307)=>{_0x1d3a3b[a95_0x45b9('0xb')](a95_0x45b9('0x27'),a95_0x45b9('0x36'))[a95_0x45b9('0x23')]({'min':0x4});_0x1d3a3b['assert'](a95_0x45b9('0x37'),a95_0x45b9('0x24'))[a95_0x45b9('0x25')](_0x1d3a3b[a95_0x45b9('0x26')][a95_0x45b9('0x27')]);const _0x1f9080=_0x1d3a3b[a95_0x45b9('0x11')]();if(_0x1f9080){_0x1d3a3b['flash'](a95_0x45b9('0x16'),_0x1f9080);return _0x17df07[a95_0x45b9('0x18')]('/account');}User_1[a95_0x45b9('0x14')][a95_0x45b9('0x2d')](_0x1d3a3b['user']['id'],(_0x2028a7,_0x358ede)=>{if(_0x2028a7){return _0x2a7307(_0x2028a7);}_0x358ede[a95_0x45b9('0x27')]=_0x1d3a3b['body'][a95_0x45b9('0x27')];_0x358ede[a95_0x45b9('0x2a')](_0x2028a7=>{if(_0x2028a7){return _0x2a7307(_0x2028a7);}_0x1d3a3b[a95_0x45b9('0x12')](a95_0x45b9('0x1a'),{'msg':a95_0x45b9('0x38')});_0x17df07[a95_0x45b9('0x18')](a95_0x45b9('0x34'));});});};exports[a95_0x45b9('0x39')]=(_0xc596d4,_0x45cfa1,_0x17065c)=>{User_1[a95_0x45b9('0x14')][a95_0x45b9('0x3a')]({'_id':_0xc596d4[a95_0x45b9('0x1f')]['id']},_0x2a3962=>{if(_0x2a3962){return _0x17065c(_0x2a3962);}_0xc596d4[a95_0x45b9('0x1d')]();_0xc596d4[a95_0x45b9('0x12')](a95_0x45b9('0x3b'),{'msg':a95_0x45b9('0x3c')});_0x45cfa1[a95_0x45b9('0x18')]('/');});};exports[a95_0x45b9('0x3d')]=(_0x564791,_0xe2ea70,_0x2b3fc4)=>{const _0x53e238=_0x564791[a95_0x45b9('0x3e')][a95_0x45b9('0x3f')];User_1[a95_0x45b9('0x14')]['findById'](_0x564791[a95_0x45b9('0x1f')]['id'],(_0x523038,_0x26b576)=>{if(_0x523038){return _0x2b3fc4(_0x523038);}_0x26b576[_0x53e238]=undefined;_0x26b576[a95_0x45b9('0x40')]=_0x26b576[a95_0x45b9('0x40')]['filter'](_0x4fc7f8=>_0x4fc7f8[a95_0x45b9('0x41')]!==_0x53e238);_0x26b576['save'](_0x523038=>{if(_0x523038){return _0x2b3fc4(_0x523038);}_0x564791['flash'](a95_0x45b9('0x3b'),{'msg':_0x53e238+a95_0x45b9('0x42')});_0xe2ea70[a95_0x45b9('0x18')](a95_0x45b9('0x34'));});});};exports[a95_0x45b9('0x43')]=(_0x54b565,_0x48e670,_0x1588f6)=>{if(_0x54b565[a95_0x45b9('0x44')]()){return _0x48e670[a95_0x45b9('0x18')]('/');}User_1['default'][a95_0x45b9('0x45')]({'passwordResetToken':_0x54b565[a95_0x45b9('0x3e')][a95_0x45b9('0x46')]})[a95_0x45b9('0x47')](a95_0x45b9('0x48'))['gt'](Date[a95_0x45b9('0x49')]())[a95_0x45b9('0x4a')]((_0x2d4b27,_0xdb0718)=>{if(_0x2d4b27){return _0x1588f6(_0x2d4b27);}if(!_0xdb0718){_0x54b565['flash'](a95_0x45b9('0x16'),{'msg':a95_0x45b9('0x4b')});return _0x48e670[a95_0x45b9('0x18')]('/forgot');}_0x48e670['render'](a95_0x45b9('0x4c'),{'title':a95_0x45b9('0x4d')});});};exports[a95_0x45b9('0x4e')]=(_0x387417,_0x4c1779,_0x24d3e1)=>{_0x387417['assert'](a95_0x45b9('0x27'),a95_0x45b9('0x4f'))[a95_0x45b9('0x23')]({'min':0x4});_0x387417['assert'](a95_0x45b9('0x50'),'Passwords\x20must\x20match.')[a95_0x45b9('0x25')](_0x387417[a95_0x45b9('0x26')][a95_0x45b9('0x27')]);const _0x44952e=_0x387417[a95_0x45b9('0x11')]();if(_0x44952e){_0x387417[a95_0x45b9('0x12')](a95_0x45b9('0x16'),_0x44952e);return _0x4c1779[a95_0x45b9('0x18')]('back');}async_1['default'][a95_0x45b9('0x51')]([function resetPassword(_0x48c14c){User_1['default'][a95_0x45b9('0x45')]({'passwordResetToken':_0x387417['params']['token']})[a95_0x45b9('0x47')](a95_0x45b9('0x48'))['gt'](Date['now']())[a95_0x45b9('0x4a')]((_0x2288ef,_0x4e6ad3)=>{if(_0x2288ef){return _0x24d3e1(_0x2288ef);}if(!_0x4e6ad3){_0x387417[a95_0x45b9('0x12')](a95_0x45b9('0x16'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4c1779[a95_0x45b9('0x18')](a95_0x45b9('0x52'));}_0x4e6ad3['password']=_0x387417[a95_0x45b9('0x26')][a95_0x45b9('0x27')];_0x4e6ad3['passwordResetToken']=undefined;_0x4e6ad3[a95_0x45b9('0x48')]=undefined;_0x4e6ad3['save'](_0x2288ef=>{if(_0x2288ef){return _0x24d3e1(_0x2288ef);}_0x387417[a95_0x45b9('0x19')](_0x4e6ad3,_0x2288ef=>{_0x48c14c(_0x2288ef,_0x4e6ad3);});});});},function sendResetPasswordEmail(_0x256793,_0x196667){const _0x425694=nodemailer_1[a95_0x45b9('0x14')][a95_0x45b9('0x53')]({'service':'SendGrid','auth':{'user':process['env'][a95_0x45b9('0x54')],'pass':process[a95_0x45b9('0x55')][a95_0x45b9('0x56')]}});const _0x56dbd0={'to':_0x256793['email'],'from':a95_0x45b9('0x57'),'subject':a95_0x45b9('0x58'),'text':a95_0x45b9('0x59')+_0x256793[a95_0x45b9('0x28')]+a95_0x45b9('0x5a')};_0x425694['sendMail'](_0x56dbd0,_0x2d53f5=>{_0x387417[a95_0x45b9('0x12')](a95_0x45b9('0x1a'),{'msg':a95_0x45b9('0x5b')});_0x196667(_0x2d53f5);});}],_0x14e15f=>{if(_0x14e15f){return _0x24d3e1(_0x14e15f);}_0x4c1779[a95_0x45b9('0x18')]('/');});};exports['getForgot']=(_0x3b5a3b,_0x36bb69)=>{if(_0x3b5a3b['isAuthenticated']()){return _0x36bb69['redirect']('/');}_0x36bb69[a95_0x45b9('0x8')](a95_0x45b9('0x5c'),{'title':a95_0x45b9('0x5d')});};exports[a95_0x45b9('0x5e')]=(_0x1e6941,_0x99f4a4,_0x473519)=>{_0x1e6941[a95_0x45b9('0xb')](a95_0x45b9('0x28'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x45b9('0xd')]();_0x1e6941[a95_0x45b9('0xf')](a95_0x45b9('0x28'))[a95_0x45b9('0x10')]({'gmail_remove_dots':![]});const _0x1a8b04=_0x1e6941[a95_0x45b9('0x11')]();if(_0x1a8b04){_0x1e6941[a95_0x45b9('0x12')](a95_0x45b9('0x16'),_0x1a8b04);return _0x99f4a4[a95_0x45b9('0x18')]('/forgot');}async_1[a95_0x45b9('0x14')][a95_0x45b9('0x51')]([function createRandomToken(_0x446019){crypto_1[a95_0x45b9('0x14')]['randomBytes'](0x10,(_0x10d4a1,_0x301630)=>{const _0xa0d6ac=_0x301630[a95_0x45b9('0x5f')](a95_0x45b9('0x60'));_0x446019(_0x10d4a1,_0xa0d6ac);});},function setRandomToken(_0x23a075,_0x3811fa){User_1[a95_0x45b9('0x14')][a95_0x45b9('0x45')]({'email':_0x1e6941[a95_0x45b9('0x26')][a95_0x45b9('0x28')]},(_0x228a2e,_0x42995c)=>{if(_0x228a2e){return _0x3811fa(_0x228a2e);}if(!_0x42995c){_0x1e6941[a95_0x45b9('0x12')](a95_0x45b9('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x99f4a4[a95_0x45b9('0x18')]('/forgot');}_0x42995c[a95_0x45b9('0x61')]=_0x23a075;_0x42995c[a95_0x45b9('0x48')]=Date[a95_0x45b9('0x49')]()+0x36ee80;_0x42995c['save'](_0x228a2e=>{_0x3811fa(_0x228a2e,_0x23a075,_0x42995c);});});},function sendForgotPasswordEmail(_0x4782b9,_0xf3791b,_0x38b5ee){const _0xb74397=nodemailer_1[a95_0x45b9('0x14')][a95_0x45b9('0x53')]({'service':'SendGrid','auth':{'user':process[a95_0x45b9('0x55')]['SENDGRID_USER'],'pass':process[a95_0x45b9('0x55')][a95_0x45b9('0x56')]}});const _0x13aa7b={'to':_0xf3791b[a95_0x45b9('0x28')],'from':a95_0x45b9('0x62'),'subject':a95_0x45b9('0x63'),'text':a95_0x45b9('0x64')+_0x1e6941[a95_0x45b9('0x65')][a95_0x45b9('0x66')]+'/reset/'+_0x4782b9+a95_0x45b9('0x67')};_0xb74397[a95_0x45b9('0x68')](_0x13aa7b,_0x42c835=>{_0x1e6941['flash'](a95_0x45b9('0x3b'),{'msg':a95_0x45b9('0x69')+_0xf3791b[a95_0x45b9('0x28')]+a95_0x45b9('0x6a')});_0x38b5ee(_0x42c835);});}],_0x107b9a=>{if(_0x107b9a){return _0x473519(_0x107b9a);}_0x99f4a4[a95_0x45b9('0x18')]('/forgot');});};