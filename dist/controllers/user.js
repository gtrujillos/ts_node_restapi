var a95_0x45c0=['local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','body','flash','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','params','token','now','exec','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','waterfall','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetExpires','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','/login'];(function(_0x297bd5,_0x3d3c45){var _0x433295=function(_0x3c1bd6){while(--_0x3c1bd6){_0x297bd5['push'](_0x297bd5['shift']());}};_0x433295(++_0x3d3c45);}(a95_0x45c0,0xc6));var a95_0x1ae6=function(_0x166d14,_0x456a9a){_0x166d14=_0x166d14-0x0;var _0x562664=a95_0x45c0[_0x166d14];return _0x562664;};'use strict';var __importDefault=this&&this[a95_0x1ae6('0x0')]||function(_0x551d02){return _0x551d02&&_0x551d02[a95_0x1ae6('0x1')]?_0x551d02:{'default':_0x551d02};};Object[a95_0x1ae6('0x2')](exports,a95_0x1ae6('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a95_0x1ae6('0x3')));const nodemailer_1=__importDefault(require(a95_0x1ae6('0x4')));const passport_1=__importDefault(require(a95_0x1ae6('0x5')));const User_1=__importDefault(require(a95_0x1ae6('0x6')));const request=require(a95_0x1ae6('0x7'));exports[a95_0x1ae6('0x8')]=(_0x8cf58a,_0x43935e)=>{if(_0x8cf58a[a95_0x1ae6('0x9')]){return _0x43935e[a95_0x1ae6('0xa')]('/');}_0x43935e[a95_0x1ae6('0xb')](a95_0x1ae6('0xc'),{'title':a95_0x1ae6('0xd')});};exports[a95_0x1ae6('0xe')]=(_0x1db0d9,_0x320cd5,_0x358967)=>{_0x1db0d9[a95_0x1ae6('0xf')](a95_0x1ae6('0x10'),a95_0x1ae6('0x11'))[a95_0x1ae6('0x12')]();_0x1db0d9[a95_0x1ae6('0xf')]('password',a95_0x1ae6('0x13'))[a95_0x1ae6('0x14')]();_0x1db0d9[a95_0x1ae6('0x15')](a95_0x1ae6('0x10'))[a95_0x1ae6('0x16')]({'gmail_remove_dots':![]});const _0x5de262=_0x1db0d9[a95_0x1ae6('0x17')]();if(_0x5de262){_0x1db0d9['flash'](a95_0x1ae6('0x18'),_0x5de262);return _0x320cd5[a95_0x1ae6('0xa')](a95_0x1ae6('0x19'));}passport_1['default']['authenticate'](a95_0x1ae6('0x1a'),(_0x2182aa,_0x434bfd,_0x473e22)=>{if(_0x2182aa){return _0x358967(_0x2182aa);}if(!_0x434bfd){_0x1db0d9['flash'](a95_0x1ae6('0x18'),_0x473e22[a95_0x1ae6('0x1b')]);return _0x320cd5[a95_0x1ae6('0xa')](a95_0x1ae6('0x19'));}_0x1db0d9[a95_0x1ae6('0x1c')](_0x434bfd,_0x2182aa=>{if(_0x2182aa){return _0x358967(_0x2182aa);}_0x1db0d9['flash'](a95_0x1ae6('0x1d'),{'msg':a95_0x1ae6('0x1e')});_0x320cd5['redirect'](_0x1db0d9[a95_0x1ae6('0x1f')][a95_0x1ae6('0x20')]||'/');});})(_0x1db0d9,_0x320cd5,_0x358967);};exports['logout']=(_0xdd757c,_0x1798e2)=>{_0xdd757c[a95_0x1ae6('0x21')]();_0x1798e2['redirect']('/');};exports[a95_0x1ae6('0x22')]=(_0xb52d55,_0xb94a20)=>{if(_0xb52d55['user']){return _0xb94a20[a95_0x1ae6('0xa')]('/');}_0xb94a20['render'](a95_0x1ae6('0x23'),{'title':'Create\x20Account'});};exports[a95_0x1ae6('0x24')]=(_0x3dea7b,_0x5f2a76,_0x4b44df)=>{_0x3dea7b['assert'](a95_0x1ae6('0x10'),a95_0x1ae6('0x11'))['isEmail']();_0x3dea7b[a95_0x1ae6('0xf')](a95_0x1ae6('0x25'),a95_0x1ae6('0x26'))[a95_0x1ae6('0x27')]({'min':0x4});_0x3dea7b[a95_0x1ae6('0xf')](a95_0x1ae6('0x28'),'Passwords\x20do\x20not\x20match')[a95_0x1ae6('0x29')](_0x3dea7b[a95_0x1ae6('0x2a')]['password']);_0x3dea7b['sanitize'](a95_0x1ae6('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x325a65=_0x3dea7b[a95_0x1ae6('0x17')]();if(_0x325a65){_0x3dea7b[a95_0x1ae6('0x2b')](a95_0x1ae6('0x18'),_0x325a65);return _0x5f2a76[a95_0x1ae6('0xa')](a95_0x1ae6('0x2c'));}const _0x2bd5b5=new User_1[(a95_0x1ae6('0x2d'))]({'email':_0x3dea7b[a95_0x1ae6('0x2a')][a95_0x1ae6('0x10')],'password':_0x3dea7b['body'][a95_0x1ae6('0x25')]});User_1[a95_0x1ae6('0x2d')][a95_0x1ae6('0x2e')]({'email':_0x3dea7b['body'][a95_0x1ae6('0x10')]},(_0x354095,_0x441848)=>{if(_0x354095){return _0x4b44df(_0x354095);}if(_0x441848){_0x3dea7b[a95_0x1ae6('0x2b')](a95_0x1ae6('0x18'),{'msg':a95_0x1ae6('0x2f')});return _0x5f2a76[a95_0x1ae6('0xa')]('/signup');}_0x2bd5b5[a95_0x1ae6('0x30')](_0x354095=>{if(_0x354095){return _0x4b44df(_0x354095);}_0x3dea7b['logIn'](_0x2bd5b5,_0x354095=>{if(_0x354095){return _0x4b44df(_0x354095);}_0x5f2a76['redirect']('/');});});});};exports[a95_0x1ae6('0x31')]=(_0x48a613,_0x494e2f)=>{_0x494e2f[a95_0x1ae6('0xb')](a95_0x1ae6('0x32'),{'title':a95_0x1ae6('0x33')});};exports[a95_0x1ae6('0x34')]=(_0x3d3544,_0x1ae4d1,_0x42db40)=>{_0x3d3544[a95_0x1ae6('0xf')](a95_0x1ae6('0x10'),a95_0x1ae6('0x35'))['isEmail']();_0x3d3544[a95_0x1ae6('0x15')]('email')[a95_0x1ae6('0x16')]({'gmail_remove_dots':![]});const _0x16f8df=_0x3d3544[a95_0x1ae6('0x17')]();if(_0x16f8df){_0x3d3544[a95_0x1ae6('0x2b')]('errors',_0x16f8df);return _0x1ae4d1[a95_0x1ae6('0xa')]('/account');}User_1[a95_0x1ae6('0x2d')][a95_0x1ae6('0x36')](_0x3d3544[a95_0x1ae6('0x9')]['id'],(_0x41c059,_0x321d86)=>{if(_0x41c059){return _0x42db40(_0x41c059);}_0x321d86[a95_0x1ae6('0x10')]=_0x3d3544['body'][a95_0x1ae6('0x10')]||'';_0x321d86['profile'][a95_0x1ae6('0x37')]=_0x3d3544[a95_0x1ae6('0x2a')]['name']||'';_0x321d86[a95_0x1ae6('0x38')][a95_0x1ae6('0x39')]=_0x3d3544['body'][a95_0x1ae6('0x39')]||'';_0x321d86[a95_0x1ae6('0x38')][a95_0x1ae6('0x3a')]=_0x3d3544[a95_0x1ae6('0x2a')]['location']||'';_0x321d86[a95_0x1ae6('0x38')][a95_0x1ae6('0x3b')]=_0x3d3544[a95_0x1ae6('0x2a')][a95_0x1ae6('0x3b')]||'';_0x321d86['save'](_0x41c059=>{if(_0x41c059){if(_0x41c059[a95_0x1ae6('0x3c')]===0x2af8){_0x3d3544[a95_0x1ae6('0x2b')]('errors',{'msg':a95_0x1ae6('0x3d')});return _0x1ae4d1['redirect'](a95_0x1ae6('0x3e'));}return _0x42db40(_0x41c059);}_0x3d3544['flash'](a95_0x1ae6('0x1d'),{'msg':a95_0x1ae6('0x3f')});_0x1ae4d1[a95_0x1ae6('0xa')](a95_0x1ae6('0x3e'));});});};exports[a95_0x1ae6('0x40')]=(_0x2158ea,_0x4f8b6c,_0x55d443)=>{_0x2158ea[a95_0x1ae6('0xf')]('password',a95_0x1ae6('0x26'))['len']({'min':0x4});_0x2158ea[a95_0x1ae6('0xf')]('confirmPassword',a95_0x1ae6('0x41'))['equals'](_0x2158ea[a95_0x1ae6('0x2a')][a95_0x1ae6('0x25')]);const _0x9438a0=_0x2158ea[a95_0x1ae6('0x17')]();if(_0x9438a0){_0x2158ea[a95_0x1ae6('0x2b')]('errors',_0x9438a0);return _0x4f8b6c[a95_0x1ae6('0xa')](a95_0x1ae6('0x3e'));}User_1[a95_0x1ae6('0x2d')]['findById'](_0x2158ea['user']['id'],(_0x503aea,_0xd78103)=>{if(_0x503aea){return _0x55d443(_0x503aea);}_0xd78103[a95_0x1ae6('0x25')]=_0x2158ea[a95_0x1ae6('0x2a')][a95_0x1ae6('0x25')];_0xd78103[a95_0x1ae6('0x30')](_0x503aea=>{if(_0x503aea){return _0x55d443(_0x503aea);}_0x2158ea['flash']('success',{'msg':a95_0x1ae6('0x42')});_0x4f8b6c[a95_0x1ae6('0xa')](a95_0x1ae6('0x3e'));});});};exports[a95_0x1ae6('0x43')]=(_0x460a96,_0x2be983,_0x327e25)=>{User_1[a95_0x1ae6('0x2d')]['remove']({'_id':_0x460a96['user']['id']},_0x570d5c=>{if(_0x570d5c){return _0x327e25(_0x570d5c);}_0x460a96[a95_0x1ae6('0x21')]();_0x460a96['flash'](a95_0x1ae6('0x44'),{'msg':a95_0x1ae6('0x45')});_0x2be983['redirect']('/');});};exports[a95_0x1ae6('0x46')]=(_0x5aa527,_0x1dff39,_0x49cefa)=>{const _0x7475fc=_0x5aa527['params'][a95_0x1ae6('0x47')];User_1[a95_0x1ae6('0x2d')][a95_0x1ae6('0x36')](_0x5aa527[a95_0x1ae6('0x9')]['id'],(_0x2aa5a4,_0x56b96b)=>{if(_0x2aa5a4){return _0x49cefa(_0x2aa5a4);}_0x56b96b[_0x7475fc]=undefined;_0x56b96b[a95_0x1ae6('0x48')]=_0x56b96b['tokens']['filter'](_0x430ea9=>_0x430ea9[a95_0x1ae6('0x49')]!==_0x7475fc);_0x56b96b[a95_0x1ae6('0x30')](_0x2aa5a4=>{if(_0x2aa5a4){return _0x49cefa(_0x2aa5a4);}_0x5aa527['flash'](a95_0x1ae6('0x44'),{'msg':_0x7475fc+a95_0x1ae6('0x4a')});_0x1dff39[a95_0x1ae6('0xa')](a95_0x1ae6('0x3e'));});});};exports['getReset']=(_0x32c97a,_0x2a3063,_0x176ab3)=>{if(_0x32c97a[a95_0x1ae6('0x4b')]()){return _0x2a3063[a95_0x1ae6('0xa')]('/');}User_1[a95_0x1ae6('0x2d')][a95_0x1ae6('0x2e')]({'passwordResetToken':_0x32c97a[a95_0x1ae6('0x4c')][a95_0x1ae6('0x4d')]})['where']('passwordResetExpires')['gt'](Date[a95_0x1ae6('0x4e')]())[a95_0x1ae6('0x4f')]((_0x4a7831,_0x12c62d)=>{if(_0x4a7831){return _0x176ab3(_0x4a7831);}if(!_0x12c62d){_0x32c97a[a95_0x1ae6('0x2b')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2a3063['redirect'](a95_0x1ae6('0x50'));}_0x2a3063[a95_0x1ae6('0xb')](a95_0x1ae6('0x51'),{'title':'Password\x20Reset'});});};exports[a95_0x1ae6('0x52')]=(_0x2d2fb5,_0x55ff40,_0x420d1a)=>{_0x2d2fb5['assert'](a95_0x1ae6('0x25'),a95_0x1ae6('0x53'))['len']({'min':0x4});_0x2d2fb5[a95_0x1ae6('0xf')]('confirm',a95_0x1ae6('0x54'))['equals'](_0x2d2fb5['body'][a95_0x1ae6('0x25')]);const _0x2d5b6a=_0x2d2fb5['validationErrors']();if(_0x2d5b6a){_0x2d2fb5[a95_0x1ae6('0x2b')](a95_0x1ae6('0x18'),_0x2d5b6a);return _0x55ff40[a95_0x1ae6('0xa')](a95_0x1ae6('0x55'));}async_1['default']['waterfall']([function resetPassword(_0xb29ad9){User_1[a95_0x1ae6('0x2d')][a95_0x1ae6('0x2e')]({'passwordResetToken':_0x2d2fb5[a95_0x1ae6('0x4c')][a95_0x1ae6('0x4d')]})['where']('passwordResetExpires')['gt'](Date['now']())[a95_0x1ae6('0x4f')]((_0x2df42c,_0x1a65a5)=>{if(_0x2df42c){return _0x420d1a(_0x2df42c);}if(!_0x1a65a5){_0x2d2fb5[a95_0x1ae6('0x2b')]('errors',{'msg':a95_0x1ae6('0x56')});return _0x55ff40[a95_0x1ae6('0xa')](a95_0x1ae6('0x55'));}_0x1a65a5[a95_0x1ae6('0x25')]=_0x2d2fb5[a95_0x1ae6('0x2a')][a95_0x1ae6('0x25')];_0x1a65a5[a95_0x1ae6('0x57')]=undefined;_0x1a65a5['passwordResetExpires']=undefined;_0x1a65a5[a95_0x1ae6('0x30')](_0x2df42c=>{if(_0x2df42c){return _0x420d1a(_0x2df42c);}_0x2d2fb5[a95_0x1ae6('0x1c')](_0x1a65a5,_0x2df42c=>{_0xb29ad9(_0x2df42c,_0x1a65a5);});});});},function sendResetPasswordEmail(_0x5b8bc6,_0x2e74a2){const _0x11d560=nodemailer_1[a95_0x1ae6('0x2d')][a95_0x1ae6('0x58')]({'service':a95_0x1ae6('0x59'),'auth':{'user':process[a95_0x1ae6('0x5a')][a95_0x1ae6('0x5b')],'pass':process[a95_0x1ae6('0x5a')][a95_0x1ae6('0x5c')]}});const _0x416256={'to':_0x5b8bc6[a95_0x1ae6('0x10')],'from':a95_0x1ae6('0x5d'),'subject':a95_0x1ae6('0x5e'),'text':a95_0x1ae6('0x5f')+_0x5b8bc6[a95_0x1ae6('0x10')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x11d560['sendMail'](_0x416256,_0xe33651=>{_0x2d2fb5[a95_0x1ae6('0x2b')](a95_0x1ae6('0x1d'),{'msg':a95_0x1ae6('0x60')});_0x2e74a2(_0xe33651);});}],_0x145c32=>{if(_0x145c32){return _0x420d1a(_0x145c32);}_0x55ff40[a95_0x1ae6('0xa')]('/');});};exports[a95_0x1ae6('0x61')]=(_0x2af570,_0x451180)=>{if(_0x2af570[a95_0x1ae6('0x4b')]()){return _0x451180[a95_0x1ae6('0xa')]('/');}_0x451180[a95_0x1ae6('0xb')](a95_0x1ae6('0x62'),{'title':a95_0x1ae6('0x63')});};exports['postForgot']=(_0x5af1cb,_0x3a98ac,_0x547119)=>{_0x5af1cb[a95_0x1ae6('0xf')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x1ae6('0x12')]();_0x5af1cb[a95_0x1ae6('0x15')](a95_0x1ae6('0x10'))[a95_0x1ae6('0x16')]({'gmail_remove_dots':![]});const _0x5297b6=_0x5af1cb['validationErrors']();if(_0x5297b6){_0x5af1cb[a95_0x1ae6('0x2b')](a95_0x1ae6('0x18'),_0x5297b6);return _0x3a98ac['redirect'](a95_0x1ae6('0x50'));}async_1['default'][a95_0x1ae6('0x64')]([function createRandomToken(_0x16b063){crypto_1[a95_0x1ae6('0x2d')][a95_0x1ae6('0x65')](0x10,(_0x338bbf,_0x270c20)=>{const _0xc436a1=_0x270c20['toString'](a95_0x1ae6('0x66'));_0x16b063(_0x338bbf,_0xc436a1);});},function setRandomToken(_0x5815b9,_0x4e1563){User_1['default']['findOne']({'email':_0x5af1cb['body']['email']},(_0xf8edfe,_0xc9b1e9)=>{if(_0xf8edfe){return _0x4e1563(_0xf8edfe);}if(!_0xc9b1e9){_0x5af1cb[a95_0x1ae6('0x2b')]('errors',{'msg':a95_0x1ae6('0x67')});return _0x3a98ac['redirect']('/forgot');}_0xc9b1e9[a95_0x1ae6('0x57')]=_0x5815b9;_0xc9b1e9[a95_0x1ae6('0x68')]=Date['now']()+0x36ee80;_0xc9b1e9[a95_0x1ae6('0x30')](_0xf8edfe=>{_0x4e1563(_0xf8edfe,_0x5815b9,_0xc9b1e9);});});},function sendForgotPasswordEmail(_0x5db150,_0x556903,_0x3ac520){const _0x11768f=nodemailer_1['default']['createTransport']({'service':a95_0x1ae6('0x59'),'auth':{'user':process[a95_0x1ae6('0x5a')][a95_0x1ae6('0x5b')],'pass':process[a95_0x1ae6('0x5a')]['SENDGRID_PASSWORD']}});const _0x21908b={'to':_0x556903[a95_0x1ae6('0x10')],'from':a95_0x1ae6('0x69'),'subject':a95_0x1ae6('0x6a'),'text':a95_0x1ae6('0x6b')+_0x5af1cb[a95_0x1ae6('0x6c')][a95_0x1ae6('0x6d')]+'/reset/'+_0x5db150+a95_0x1ae6('0x6e')};_0x11768f['sendMail'](_0x21908b,_0x5da152=>{_0x5af1cb['flash'](a95_0x1ae6('0x44'),{'msg':a95_0x1ae6('0x6f')+_0x556903[a95_0x1ae6('0x10')]+'\x20with\x20further\x20instructions.'});_0x3ac520(_0x5da152);});}],_0x391c17=>{if(_0x391c17){return _0x547119(_0x391c17);}_0x3a98ac[a95_0x1ae6('0xa')](a95_0x1ae6('0x50'));});};