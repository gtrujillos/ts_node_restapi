var a95_0x4163=['validationErrors','flash','errors','/login','default','authenticate','local','message','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','Create\x20Account','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','token','where','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','findOne','passwordResetToken','createTransport','env','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','waterfall','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','SENDGRID_USER','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','async','crypto','passport','../models/User','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','notEmpty','sanitize','email','normalizeEmail'];(function(_0x1c72d1,_0x121414){var _0x3e4fd9=function(_0x594f2b){while(--_0x594f2b){_0x1c72d1['push'](_0x1c72d1['shift']());}};_0x3e4fd9(++_0x121414);}(a95_0x4163,0x1b7));var a95_0x1489=function(_0x295941,_0x4d2509){_0x295941=_0x295941-0x0;var _0x48ab77=a95_0x4163[_0x295941];return _0x48ab77;};'use strict';var __importDefault=this&&this[a95_0x1489('0x0')]||function(_0x193702){return _0x193702&&_0x193702[a95_0x1489('0x1')]?_0x193702:{'default':_0x193702};};Object[a95_0x1489('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a95_0x1489('0x3')));const crypto_1=__importDefault(require(a95_0x1489('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a95_0x1489('0x5')));const User_1=__importDefault(require(a95_0x1489('0x6')));const request=require(a95_0x1489('0x7'));exports[a95_0x1489('0x8')]=(_0x58dc17,_0x44cb49)=>{if(_0x58dc17[a95_0x1489('0x9')]){return _0x44cb49[a95_0x1489('0xa')]('/');}_0x44cb49[a95_0x1489('0xb')]('account/login',{'title':a95_0x1489('0xc')});};exports[a95_0x1489('0xd')]=(_0x479439,_0x364bd5,_0x451a8a)=>{_0x479439[a95_0x1489('0xe')]('email',a95_0x1489('0xf'))[a95_0x1489('0x10')]();_0x479439[a95_0x1489('0xe')]('password','Password\x20cannot\x20be\x20blank')[a95_0x1489('0x11')]();_0x479439[a95_0x1489('0x12')](a95_0x1489('0x13'))[a95_0x1489('0x14')]({'gmail_remove_dots':![]});const _0x5a8453=_0x479439[a95_0x1489('0x15')]();if(_0x5a8453){_0x479439[a95_0x1489('0x16')](a95_0x1489('0x17'),_0x5a8453);return _0x364bd5[a95_0x1489('0xa')](a95_0x1489('0x18'));}passport_1[a95_0x1489('0x19')][a95_0x1489('0x1a')](a95_0x1489('0x1b'),(_0x435b3b,_0xfa75c5,_0xe07513)=>{if(_0x435b3b){return _0x451a8a(_0x435b3b);}if(!_0xfa75c5){_0x479439['flash'](a95_0x1489('0x17'),_0xe07513[a95_0x1489('0x1c')]);return _0x364bd5[a95_0x1489('0xa')](a95_0x1489('0x18'));}_0x479439['logIn'](_0xfa75c5,_0x435b3b=>{if(_0x435b3b){return _0x451a8a(_0x435b3b);}_0x479439[a95_0x1489('0x16')]('success',{'msg':a95_0x1489('0x1d')});_0x364bd5['redirect'](_0x479439[a95_0x1489('0x1e')][a95_0x1489('0x1f')]||'/');});})(_0x479439,_0x364bd5,_0x451a8a);};exports[a95_0x1489('0x20')]=(_0x10f5ed,_0x5ad27)=>{_0x10f5ed['logout']();_0x5ad27['redirect']('/');};exports['getSignup']=(_0x3ba172,_0xb8c4f3)=>{if(_0x3ba172['user']){return _0xb8c4f3[a95_0x1489('0xa')]('/');}_0xb8c4f3[a95_0x1489('0xb')](a95_0x1489('0x21'),{'title':a95_0x1489('0x22')});};exports[a95_0x1489('0x23')]=(_0x58f4b9,_0x1e79e6,_0x2ae25d)=>{_0x58f4b9[a95_0x1489('0xe')](a95_0x1489('0x13'),a95_0x1489('0xf'))[a95_0x1489('0x10')]();_0x58f4b9['assert'](a95_0x1489('0x24'),a95_0x1489('0x25'))['len']({'min':0x4});_0x58f4b9['assert']('confirmPassword',a95_0x1489('0x26'))[a95_0x1489('0x27')](_0x58f4b9[a95_0x1489('0x28')][a95_0x1489('0x24')]);_0x58f4b9[a95_0x1489('0x12')](a95_0x1489('0x13'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x30ff18=_0x58f4b9['validationErrors']();if(_0x30ff18){_0x58f4b9['flash'](a95_0x1489('0x17'),_0x30ff18);return _0x1e79e6[a95_0x1489('0xa')](a95_0x1489('0x29'));}const _0x3474bd=new User_1[(a95_0x1489('0x19'))]({'email':_0x58f4b9[a95_0x1489('0x28')][a95_0x1489('0x13')],'password':_0x58f4b9[a95_0x1489('0x28')]['password']});User_1[a95_0x1489('0x19')]['findOne']({'email':_0x58f4b9[a95_0x1489('0x28')][a95_0x1489('0x13')]},(_0x35b8b5,_0x5029fb)=>{if(_0x35b8b5){return _0x2ae25d(_0x35b8b5);}if(_0x5029fb){_0x58f4b9[a95_0x1489('0x16')](a95_0x1489('0x17'),{'msg':a95_0x1489('0x2a')});return _0x1e79e6['redirect'](a95_0x1489('0x29'));}_0x3474bd[a95_0x1489('0x2b')](_0x35b8b5=>{if(_0x35b8b5){return _0x2ae25d(_0x35b8b5);}_0x58f4b9[a95_0x1489('0x2c')](_0x3474bd,_0x35b8b5=>{if(_0x35b8b5){return _0x2ae25d(_0x35b8b5);}_0x1e79e6['redirect']('/');});});});};exports[a95_0x1489('0x2d')]=(_0x68ea87,_0x4735a4)=>{_0x4735a4['render'](a95_0x1489('0x2e'),{'title':a95_0x1489('0x2f')});};exports[a95_0x1489('0x30')]=(_0x4ea3ee,_0x3cf91f,_0x2d762c)=>{_0x4ea3ee['assert'](a95_0x1489('0x13'),a95_0x1489('0x31'))[a95_0x1489('0x10')]();_0x4ea3ee[a95_0x1489('0x12')](a95_0x1489('0x13'))[a95_0x1489('0x14')]({'gmail_remove_dots':![]});const _0x350b25=_0x4ea3ee[a95_0x1489('0x15')]();if(_0x350b25){_0x4ea3ee[a95_0x1489('0x16')](a95_0x1489('0x17'),_0x350b25);return _0x3cf91f[a95_0x1489('0xa')](a95_0x1489('0x32'));}User_1['default'][a95_0x1489('0x33')](_0x4ea3ee[a95_0x1489('0x9')]['id'],(_0x5862b7,_0x5aa99e)=>{if(_0x5862b7){return _0x2d762c(_0x5862b7);}_0x5aa99e['email']=_0x4ea3ee['body'][a95_0x1489('0x13')]||'';_0x5aa99e[a95_0x1489('0x34')][a95_0x1489('0x35')]=_0x4ea3ee['body']['name']||'';_0x5aa99e[a95_0x1489('0x34')]['gender']=_0x4ea3ee[a95_0x1489('0x28')][a95_0x1489('0x36')]||'';_0x5aa99e['profile'][a95_0x1489('0x37')]=_0x4ea3ee[a95_0x1489('0x28')][a95_0x1489('0x37')]||'';_0x5aa99e['profile'][a95_0x1489('0x38')]=_0x4ea3ee['body'][a95_0x1489('0x38')]||'';_0x5aa99e[a95_0x1489('0x2b')](_0x5862b7=>{if(_0x5862b7){if(_0x5862b7['code']===0x2af8){_0x4ea3ee[a95_0x1489('0x16')](a95_0x1489('0x17'),{'msg':a95_0x1489('0x39')});return _0x3cf91f[a95_0x1489('0xa')](a95_0x1489('0x32'));}return _0x2d762c(_0x5862b7);}_0x4ea3ee[a95_0x1489('0x16')](a95_0x1489('0x3a'),{'msg':a95_0x1489('0x3b')});_0x3cf91f[a95_0x1489('0xa')](a95_0x1489('0x32'));});});};exports[a95_0x1489('0x3c')]=(_0x568d7b,_0x3923bf,_0x19263f)=>{_0x568d7b['assert'](a95_0x1489('0x24'),a95_0x1489('0x25'))[a95_0x1489('0x3d')]({'min':0x4});_0x568d7b[a95_0x1489('0xe')]('confirmPassword',a95_0x1489('0x26'))[a95_0x1489('0x27')](_0x568d7b[a95_0x1489('0x28')][a95_0x1489('0x24')]);const _0x216442=_0x568d7b[a95_0x1489('0x15')]();if(_0x216442){_0x568d7b['flash'](a95_0x1489('0x17'),_0x216442);return _0x3923bf[a95_0x1489('0xa')](a95_0x1489('0x32'));}User_1[a95_0x1489('0x19')][a95_0x1489('0x33')](_0x568d7b[a95_0x1489('0x9')]['id'],(_0x232269,_0x553d8e)=>{if(_0x232269){return _0x19263f(_0x232269);}_0x553d8e[a95_0x1489('0x24')]=_0x568d7b[a95_0x1489('0x28')][a95_0x1489('0x24')];_0x553d8e['save'](_0x232269=>{if(_0x232269){return _0x19263f(_0x232269);}_0x568d7b[a95_0x1489('0x16')](a95_0x1489('0x3a'),{'msg':a95_0x1489('0x3e')});_0x3923bf[a95_0x1489('0xa')](a95_0x1489('0x32'));});});};exports[a95_0x1489('0x3f')]=(_0x3f5e49,_0x3a81d3,_0x8a55ac)=>{User_1[a95_0x1489('0x19')][a95_0x1489('0x40')]({'_id':_0x3f5e49[a95_0x1489('0x9')]['id']},_0x1d1b93=>{if(_0x1d1b93){return _0x8a55ac(_0x1d1b93);}_0x3f5e49[a95_0x1489('0x20')]();_0x3f5e49[a95_0x1489('0x16')](a95_0x1489('0x41'),{'msg':a95_0x1489('0x42')});_0x3a81d3[a95_0x1489('0xa')]('/');});};exports[a95_0x1489('0x43')]=(_0x3bdffb,_0x575765,_0x424419)=>{const _0x4d7a04=_0x3bdffb['params'][a95_0x1489('0x44')];User_1[a95_0x1489('0x19')][a95_0x1489('0x33')](_0x3bdffb[a95_0x1489('0x9')]['id'],(_0x4adb0c,_0x1ded7b)=>{if(_0x4adb0c){return _0x424419(_0x4adb0c);}_0x1ded7b[_0x4d7a04]=undefined;_0x1ded7b['tokens']=_0x1ded7b[a95_0x1489('0x45')][a95_0x1489('0x46')](_0x386d36=>_0x386d36[a95_0x1489('0x47')]!==_0x4d7a04);_0x1ded7b[a95_0x1489('0x2b')](_0x4adb0c=>{if(_0x4adb0c){return _0x424419(_0x4adb0c);}_0x3bdffb[a95_0x1489('0x16')](a95_0x1489('0x41'),{'msg':_0x4d7a04+a95_0x1489('0x48')});_0x575765['redirect'](a95_0x1489('0x32'));});});};exports[a95_0x1489('0x49')]=(_0x4bfb4a,_0x316945,_0x308b17)=>{if(_0x4bfb4a[a95_0x1489('0x4a')]()){return _0x316945[a95_0x1489('0xa')]('/');}User_1['default']['findOne']({'passwordResetToken':_0x4bfb4a[a95_0x1489('0x4b')][a95_0x1489('0x4c')]})[a95_0x1489('0x4d')](a95_0x1489('0x4e'))['gt'](Date[a95_0x1489('0x4f')]())['exec']((_0x28a93a,_0x8e1b7d)=>{if(_0x28a93a){return _0x308b17(_0x28a93a);}if(!_0x8e1b7d){_0x4bfb4a[a95_0x1489('0x16')](a95_0x1489('0x17'),{'msg':a95_0x1489('0x50')});return _0x316945['redirect'](a95_0x1489('0x51'));}_0x316945[a95_0x1489('0xb')](a95_0x1489('0x52'),{'title':a95_0x1489('0x53')});});};exports[a95_0x1489('0x54')]=(_0x314c2b,_0x167d76,_0x3a6383)=>{_0x314c2b[a95_0x1489('0xe')](a95_0x1489('0x24'),a95_0x1489('0x55'))[a95_0x1489('0x3d')]({'min':0x4});_0x314c2b[a95_0x1489('0xe')](a95_0x1489('0x56'),a95_0x1489('0x57'))[a95_0x1489('0x27')](_0x314c2b[a95_0x1489('0x28')][a95_0x1489('0x24')]);const _0x4bba84=_0x314c2b[a95_0x1489('0x15')]();if(_0x4bba84){_0x314c2b[a95_0x1489('0x16')](a95_0x1489('0x17'),_0x4bba84);return _0x167d76[a95_0x1489('0xa')](a95_0x1489('0x58'));}async_1['default']['waterfall']([function resetPassword(_0x21a2a4){User_1[a95_0x1489('0x19')][a95_0x1489('0x59')]({'passwordResetToken':_0x314c2b[a95_0x1489('0x4b')][a95_0x1489('0x4c')]})[a95_0x1489('0x4d')](a95_0x1489('0x4e'))['gt'](Date[a95_0x1489('0x4f')]())['exec']((_0x4120f2,_0x37e4c7)=>{if(_0x4120f2){return _0x3a6383(_0x4120f2);}if(!_0x37e4c7){_0x314c2b[a95_0x1489('0x16')](a95_0x1489('0x17'),{'msg':a95_0x1489('0x50')});return _0x167d76['redirect'](a95_0x1489('0x58'));}_0x37e4c7[a95_0x1489('0x24')]=_0x314c2b['body'][a95_0x1489('0x24')];_0x37e4c7[a95_0x1489('0x5a')]=undefined;_0x37e4c7['passwordResetExpires']=undefined;_0x37e4c7[a95_0x1489('0x2b')](_0x4120f2=>{if(_0x4120f2){return _0x3a6383(_0x4120f2);}_0x314c2b[a95_0x1489('0x2c')](_0x37e4c7,_0x4120f2=>{_0x21a2a4(_0x4120f2,_0x37e4c7);});});});},function sendResetPasswordEmail(_0x2f0865,_0x3a8e93){const _0x3371cd=nodemailer_1[a95_0x1489('0x19')][a95_0x1489('0x5b')]({'service':'SendGrid','auth':{'user':process[a95_0x1489('0x5c')]['SENDGRID_USER'],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x384dba={'to':_0x2f0865[a95_0x1489('0x13')],'from':a95_0x1489('0x5d'),'subject':a95_0x1489('0x5e'),'text':a95_0x1489('0x5f')+_0x2f0865['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0x3371cd[a95_0x1489('0x60')](_0x384dba,_0x1768d4=>{_0x314c2b['flash'](a95_0x1489('0x3a'),{'msg':a95_0x1489('0x61')});_0x3a8e93(_0x1768d4);});}],_0x5dc002=>{if(_0x5dc002){return _0x3a6383(_0x5dc002);}_0x167d76[a95_0x1489('0xa')]('/');});};exports[a95_0x1489('0x62')]=(_0x551113,_0x280546)=>{if(_0x551113[a95_0x1489('0x4a')]()){return _0x280546['redirect']('/');}_0x280546['render'](a95_0x1489('0x63'),{'title':a95_0x1489('0x64')});};exports['postForgot']=(_0x3d5883,_0x51d7c1,_0x2a9d0f)=>{_0x3d5883[a95_0x1489('0xe')]('email',a95_0x1489('0x31'))[a95_0x1489('0x10')]();_0x3d5883[a95_0x1489('0x12')](a95_0x1489('0x13'))[a95_0x1489('0x14')]({'gmail_remove_dots':![]});const _0x96d8d9=_0x3d5883[a95_0x1489('0x15')]();if(_0x96d8d9){_0x3d5883[a95_0x1489('0x16')](a95_0x1489('0x17'),_0x96d8d9);return _0x51d7c1[a95_0x1489('0xa')](a95_0x1489('0x51'));}async_1[a95_0x1489('0x19')][a95_0x1489('0x65')]([function createRandomToken(_0xc4f152){crypto_1[a95_0x1489('0x19')][a95_0x1489('0x66')](0x10,(_0x24bb96,_0x1fdcca)=>{const _0x14e2a4=_0x1fdcca['toString'](a95_0x1489('0x67'));_0xc4f152(_0x24bb96,_0x14e2a4);});},function setRandomToken(_0x186593,_0x558f28){User_1[a95_0x1489('0x19')]['findOne']({'email':_0x3d5883[a95_0x1489('0x28')][a95_0x1489('0x13')]},(_0x43c032,_0x513153)=>{if(_0x43c032){return _0x558f28(_0x43c032);}if(!_0x513153){_0x3d5883['flash']('errors',{'msg':a95_0x1489('0x68')});return _0x51d7c1[a95_0x1489('0xa')](a95_0x1489('0x51'));}_0x513153['passwordResetToken']=_0x186593;_0x513153[a95_0x1489('0x4e')]=Date[a95_0x1489('0x4f')]()+0x36ee80;_0x513153[a95_0x1489('0x2b')](_0x43c032=>{_0x558f28(_0x43c032,_0x186593,_0x513153);});});},function sendForgotPasswordEmail(_0x2ebf46,_0x52b820,_0x1e2591){const _0xec78bb=nodemailer_1[a95_0x1489('0x19')][a95_0x1489('0x5b')]({'service':a95_0x1489('0x69'),'auth':{'user':process[a95_0x1489('0x5c')][a95_0x1489('0x6a')],'pass':process[a95_0x1489('0x5c')][a95_0x1489('0x6b')]}});const _0x21183e={'to':_0x52b820[a95_0x1489('0x13')],'from':a95_0x1489('0x6c'),'subject':a95_0x1489('0x6d'),'text':a95_0x1489('0x6e')+_0x3d5883['headers'][a95_0x1489('0x6f')]+a95_0x1489('0x70')+_0x2ebf46+a95_0x1489('0x71')};_0xec78bb[a95_0x1489('0x60')](_0x21183e,_0x518ebb=>{_0x3d5883[a95_0x1489('0x16')]('info',{'msg':a95_0x1489('0x72')+_0x52b820['email']+'\x20with\x20further\x20instructions.'});_0x1e2591(_0x518ebb);});}],_0xebef89=>{if(_0xebef89){return _0x2a9d0f(_0xebef89);}_0x51d7c1[a95_0x1489('0xa')](a95_0x1489('0x51'));});};