var a91_0xd4d2=['Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','/signup','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','logIn','getAccount','render','account/profile','Please\x20enter\x20a\x20valid\x20email\x20address.','sanitize','/account','findById','profile','name','gender','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','len','validationErrors','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','getReset','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','waterfall','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','Forgot\x20Password','postForgot','/forgot','randomBytes','hex','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','defineProperty','async','nodemailer','express-validator','getLogin','user','redirect','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','flash','errors','/login','default','authenticate','local','message','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup'];(function(_0x63939e,_0x3dd851){var _0x40691e=function(_0x51bea3){while(--_0x51bea3){_0x63939e['push'](_0x63939e['shift']());}};_0x40691e(++_0x3dd851);}(a91_0xd4d2,0xba));var a91_0x44ea=function(_0xeb3d7c,_0x4aa785){_0xeb3d7c=_0xeb3d7c-0x0;var _0x2e1c78=a91_0xd4d2[_0xeb3d7c];return _0x2e1c78;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x256123){return _0x256123&&_0x256123['__esModule']?_0x256123:{'default':_0x256123};};Object[a91_0x44ea('0x0')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a91_0x44ea('0x1')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a91_0x44ea('0x2')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require(a91_0x44ea('0x3'));exports[a91_0x44ea('0x4')]=(_0x11d714,_0x352bbc)=>{if(_0x11d714[a91_0x44ea('0x5')]){return _0x352bbc[a91_0x44ea('0x6')]('/');}_0x352bbc['render'](a91_0x44ea('0x7'),{'title':a91_0x44ea('0x8')});};exports[a91_0x44ea('0x9')]=(_0x2da15f,_0x1974fd,_0xa7417d)=>{_0x2da15f[a91_0x44ea('0xa')](a91_0x44ea('0xb'),a91_0x44ea('0xc'))[a91_0x44ea('0xd')]();_0x2da15f['assert'](a91_0x44ea('0xe'),a91_0x44ea('0xf'))[a91_0x44ea('0x10')]();_0x2da15f['sanitize']('email')[a91_0x44ea('0x11')]({'gmail_remove_dots':![]});const _0x22c599=_0x2da15f['validationErrors']();if(_0x22c599){_0x2da15f[a91_0x44ea('0x12')](a91_0x44ea('0x13'),_0x22c599);return _0x1974fd[a91_0x44ea('0x6')](a91_0x44ea('0x14'));}passport_1[a91_0x44ea('0x15')][a91_0x44ea('0x16')](a91_0x44ea('0x17'),(_0x4d8757,_0x411b73,_0x24c89e)=>{if(_0x4d8757){return _0xa7417d(_0x4d8757);}if(!_0x411b73){_0x2da15f[a91_0x44ea('0x12')](a91_0x44ea('0x13'),_0x24c89e[a91_0x44ea('0x18')]);return _0x1974fd[a91_0x44ea('0x6')](a91_0x44ea('0x14'));}_0x2da15f['logIn'](_0x411b73,_0x4d8757=>{if(_0x4d8757){return _0xa7417d(_0x4d8757);}_0x2da15f[a91_0x44ea('0x12')](a91_0x44ea('0x19'),{'msg':a91_0x44ea('0x1a')});_0x1974fd['redirect'](_0x2da15f[a91_0x44ea('0x1b')][a91_0x44ea('0x1c')]||'/');});})(_0x2da15f,_0x1974fd,_0xa7417d);};exports[a91_0x44ea('0x1d')]=(_0xc7034f,_0x428ab7)=>{_0xc7034f[a91_0x44ea('0x1d')]();_0x428ab7[a91_0x44ea('0x6')]('/');};exports[a91_0x44ea('0x1e')]=(_0xa14aa7,_0x21a905)=>{if(_0xa14aa7[a91_0x44ea('0x5')]){return _0x21a905[a91_0x44ea('0x6')]('/');}_0x21a905['render'](a91_0x44ea('0x1f'),{'title':a91_0x44ea('0x20')});};exports[a91_0x44ea('0x21')]=(_0x447fc0,_0x3bf23f,_0x221b4c)=>{_0x447fc0[a91_0x44ea('0xa')]('email','Email\x20is\x20not\x20valid')[a91_0x44ea('0xd')]();_0x447fc0['assert']('password',a91_0x44ea('0x22'))['len']({'min':0x4});_0x447fc0[a91_0x44ea('0xa')](a91_0x44ea('0x23'),a91_0x44ea('0x24'))[a91_0x44ea('0x25')](_0x447fc0['body'][a91_0x44ea('0xe')]);_0x447fc0['sanitize'](a91_0x44ea('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x415942=_0x447fc0['validationErrors']();if(_0x415942){_0x447fc0[a91_0x44ea('0x12')](a91_0x44ea('0x13'),_0x415942);return _0x3bf23f[a91_0x44ea('0x6')](a91_0x44ea('0x26'));}const _0x46358d=new User_1[(a91_0x44ea('0x15'))]({'email':_0x447fc0[a91_0x44ea('0x27')][a91_0x44ea('0xb')],'password':_0x447fc0[a91_0x44ea('0x27')][a91_0x44ea('0xe')]});User_1[a91_0x44ea('0x15')][a91_0x44ea('0x28')]({'email':_0x447fc0[a91_0x44ea('0x27')]['email']},(_0x1b6798,_0x4bb6f8)=>{if(_0x1b6798){return _0x221b4c(_0x1b6798);}if(_0x4bb6f8){_0x447fc0[a91_0x44ea('0x12')](a91_0x44ea('0x13'),{'msg':a91_0x44ea('0x29')});return _0x3bf23f[a91_0x44ea('0x6')](a91_0x44ea('0x26'));}_0x46358d['save'](_0x1b6798=>{if(_0x1b6798){return _0x221b4c(_0x1b6798);}_0x447fc0[a91_0x44ea('0x2a')](_0x46358d,_0x1b6798=>{if(_0x1b6798){return _0x221b4c(_0x1b6798);}_0x3bf23f['redirect']('/');});});});};exports[a91_0x44ea('0x2b')]=(_0x48a150,_0x39707e)=>{_0x39707e[a91_0x44ea('0x2c')](a91_0x44ea('0x2d'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x1e0c6c,_0x55cda3,_0x4b5de3)=>{_0x1e0c6c['assert'](a91_0x44ea('0xb'),a91_0x44ea('0x2e'))['isEmail']();_0x1e0c6c[a91_0x44ea('0x2f')](a91_0x44ea('0xb'))[a91_0x44ea('0x11')]({'gmail_remove_dots':![]});const _0x30f3ee=_0x1e0c6c['validationErrors']();if(_0x30f3ee){_0x1e0c6c['flash'](a91_0x44ea('0x13'),_0x30f3ee);return _0x55cda3[a91_0x44ea('0x6')](a91_0x44ea('0x30'));}User_1['default'][a91_0x44ea('0x31')](_0x1e0c6c[a91_0x44ea('0x5')]['id'],(_0x1014b8,_0x91fe19)=>{if(_0x1014b8){return _0x4b5de3(_0x1014b8);}_0x91fe19[a91_0x44ea('0xb')]=_0x1e0c6c[a91_0x44ea('0x27')]['email']||'';_0x91fe19[a91_0x44ea('0x32')][a91_0x44ea('0x33')]=_0x1e0c6c[a91_0x44ea('0x27')][a91_0x44ea('0x33')]||'';_0x91fe19[a91_0x44ea('0x32')][a91_0x44ea('0x34')]=_0x1e0c6c[a91_0x44ea('0x27')][a91_0x44ea('0x34')]||'';_0x91fe19[a91_0x44ea('0x32')][a91_0x44ea('0x35')]=_0x1e0c6c['body'][a91_0x44ea('0x35')]||'';_0x91fe19['profile']['website']=_0x1e0c6c[a91_0x44ea('0x27')][a91_0x44ea('0x36')]||'';_0x91fe19[a91_0x44ea('0x37')](_0x1014b8=>{if(_0x1014b8){if(_0x1014b8[a91_0x44ea('0x38')]===0x2af8){_0x1e0c6c[a91_0x44ea('0x12')](a91_0x44ea('0x13'),{'msg':a91_0x44ea('0x39')});return _0x55cda3[a91_0x44ea('0x6')](a91_0x44ea('0x30'));}return _0x4b5de3(_0x1014b8);}_0x1e0c6c[a91_0x44ea('0x12')](a91_0x44ea('0x19'),{'msg':a91_0x44ea('0x3a')});_0x55cda3[a91_0x44ea('0x6')](a91_0x44ea('0x30'));});});};exports['postUpdatePassword']=(_0x2e4b53,_0x15f09e,_0x46153e)=>{_0x2e4b53[a91_0x44ea('0xa')](a91_0x44ea('0xe'),a91_0x44ea('0x22'))[a91_0x44ea('0x3b')]({'min':0x4});_0x2e4b53[a91_0x44ea('0xa')]('confirmPassword',a91_0x44ea('0x24'))['equals'](_0x2e4b53[a91_0x44ea('0x27')][a91_0x44ea('0xe')]);const _0x3f3ccf=_0x2e4b53[a91_0x44ea('0x3c')]();if(_0x3f3ccf){_0x2e4b53['flash'](a91_0x44ea('0x13'),_0x3f3ccf);return _0x15f09e['redirect']('/account');}User_1[a91_0x44ea('0x15')][a91_0x44ea('0x31')](_0x2e4b53[a91_0x44ea('0x5')]['id'],(_0x1db0bc,_0x562fc6)=>{if(_0x1db0bc){return _0x46153e(_0x1db0bc);}_0x562fc6[a91_0x44ea('0xe')]=_0x2e4b53[a91_0x44ea('0x27')]['password'];_0x562fc6[a91_0x44ea('0x37')](_0x1db0bc=>{if(_0x1db0bc){return _0x46153e(_0x1db0bc);}_0x2e4b53[a91_0x44ea('0x12')](a91_0x44ea('0x19'),{'msg':a91_0x44ea('0x3d')});_0x15f09e[a91_0x44ea('0x6')](a91_0x44ea('0x30'));});});};exports[a91_0x44ea('0x3e')]=(_0xbd20d0,_0x3a5a0b,_0x1a948c)=>{User_1[a91_0x44ea('0x15')][a91_0x44ea('0x3f')]({'_id':_0xbd20d0[a91_0x44ea('0x5')]['id']},_0xc9991f=>{if(_0xc9991f){return _0x1a948c(_0xc9991f);}_0xbd20d0[a91_0x44ea('0x1d')]();_0xbd20d0['flash'](a91_0x44ea('0x40'),{'msg':a91_0x44ea('0x41')});_0x3a5a0b[a91_0x44ea('0x6')]('/');});};exports[a91_0x44ea('0x42')]=(_0x49490d,_0x55255b,_0xe2a297)=>{const _0x595d5=_0x49490d[a91_0x44ea('0x43')]['provider'];User_1[a91_0x44ea('0x15')]['findById'](_0x49490d[a91_0x44ea('0x5')]['id'],(_0x356f94,_0x1bb436)=>{if(_0x356f94){return _0xe2a297(_0x356f94);}_0x1bb436[_0x595d5]=undefined;_0x1bb436[a91_0x44ea('0x44')]=_0x1bb436[a91_0x44ea('0x44')][a91_0x44ea('0x45')](_0x54b252=>_0x54b252[a91_0x44ea('0x46')]!==_0x595d5);_0x1bb436[a91_0x44ea('0x37')](_0x356f94=>{if(_0x356f94){return _0xe2a297(_0x356f94);}_0x49490d[a91_0x44ea('0x12')]('info',{'msg':_0x595d5+'\x20account\x20has\x20been\x20unlinked.'});_0x55255b[a91_0x44ea('0x6')]('/account');});});};exports[a91_0x44ea('0x47')]=(_0x18ea28,_0x59fdb4,_0x40f125)=>{if(_0x18ea28['isAuthenticated']()){return _0x59fdb4[a91_0x44ea('0x6')]('/');}User_1[a91_0x44ea('0x15')][a91_0x44ea('0x28')]({'passwordResetToken':_0x18ea28[a91_0x44ea('0x43')][a91_0x44ea('0x48')]})[a91_0x44ea('0x49')](a91_0x44ea('0x4a'))['gt'](Date[a91_0x44ea('0x4b')]())[a91_0x44ea('0x4c')]((_0x58d24c,_0x211cdb)=>{if(_0x58d24c){return _0x40f125(_0x58d24c);}if(!_0x211cdb){_0x18ea28[a91_0x44ea('0x12')](a91_0x44ea('0x13'),{'msg':a91_0x44ea('0x4d')});return _0x59fdb4['redirect']('/forgot');}_0x59fdb4[a91_0x44ea('0x2c')](a91_0x44ea('0x4e'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x5e02cc,_0x5ddc7e,_0x2eb03e)=>{_0x5e02cc[a91_0x44ea('0xa')](a91_0x44ea('0xe'),a91_0x44ea('0x4f'))[a91_0x44ea('0x3b')]({'min':0x4});_0x5e02cc['assert']('confirm',a91_0x44ea('0x50'))[a91_0x44ea('0x25')](_0x5e02cc[a91_0x44ea('0x27')][a91_0x44ea('0xe')]);const _0x48ae6c=_0x5e02cc[a91_0x44ea('0x3c')]();if(_0x48ae6c){_0x5e02cc['flash']('errors',_0x48ae6c);return _0x5ddc7e['redirect']('back');}async_1[a91_0x44ea('0x15')][a91_0x44ea('0x51')]([function resetPassword(_0x5a1742){User_1['default']['findOne']({'passwordResetToken':_0x5e02cc[a91_0x44ea('0x43')][a91_0x44ea('0x48')]})['where'](a91_0x44ea('0x4a'))['gt'](Date[a91_0x44ea('0x4b')]())[a91_0x44ea('0x4c')]((_0x3647d6,_0x5bb6dc)=>{if(_0x3647d6){return _0x2eb03e(_0x3647d6);}if(!_0x5bb6dc){_0x5e02cc['flash'](a91_0x44ea('0x13'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x5ddc7e[a91_0x44ea('0x6')](a91_0x44ea('0x52'));}_0x5bb6dc[a91_0x44ea('0xe')]=_0x5e02cc[a91_0x44ea('0x27')][a91_0x44ea('0xe')];_0x5bb6dc[a91_0x44ea('0x53')]=undefined;_0x5bb6dc[a91_0x44ea('0x4a')]=undefined;_0x5bb6dc[a91_0x44ea('0x37')](_0x3647d6=>{if(_0x3647d6){return _0x2eb03e(_0x3647d6);}_0x5e02cc[a91_0x44ea('0x2a')](_0x5bb6dc,_0x3647d6=>{_0x5a1742(_0x3647d6,_0x5bb6dc);});});});},function sendResetPasswordEmail(_0x4e9643,_0x55d059){const _0x1f62e7=nodemailer_1[a91_0x44ea('0x15')][a91_0x44ea('0x54')]({'service':a91_0x44ea('0x55'),'auth':{'user':process[a91_0x44ea('0x56')][a91_0x44ea('0x57')],'pass':process[a91_0x44ea('0x56')][a91_0x44ea('0x58')]}});const _0x355a72={'to':_0x4e9643[a91_0x44ea('0xb')],'from':a91_0x44ea('0x59'),'subject':a91_0x44ea('0x5a'),'text':a91_0x44ea('0x5b')+_0x4e9643[a91_0x44ea('0xb')]+a91_0x44ea('0x5c')};_0x1f62e7[a91_0x44ea('0x5d')](_0x355a72,_0x2d44e9=>{_0x5e02cc['flash'](a91_0x44ea('0x19'),{'msg':a91_0x44ea('0x5e')});_0x55d059(_0x2d44e9);});}],_0x5c8bfe=>{if(_0x5c8bfe){return _0x2eb03e(_0x5c8bfe);}_0x5ddc7e[a91_0x44ea('0x6')]('/');});};exports[a91_0x44ea('0x5f')]=(_0x349ecf,_0x5079ef)=>{if(_0x349ecf[a91_0x44ea('0x60')]()){return _0x5079ef[a91_0x44ea('0x6')]('/');}_0x5079ef[a91_0x44ea('0x2c')](a91_0x44ea('0x61'),{'title':a91_0x44ea('0x62')});};exports[a91_0x44ea('0x63')]=(_0x28a8df,_0x171345,_0x23732a)=>{_0x28a8df[a91_0x44ea('0xa')](a91_0x44ea('0xb'),a91_0x44ea('0x2e'))[a91_0x44ea('0xd')]();_0x28a8df['sanitize'](a91_0x44ea('0xb'))[a91_0x44ea('0x11')]({'gmail_remove_dots':![]});const _0x1bc8f=_0x28a8df[a91_0x44ea('0x3c')]();if(_0x1bc8f){_0x28a8df['flash'](a91_0x44ea('0x13'),_0x1bc8f);return _0x171345[a91_0x44ea('0x6')](a91_0x44ea('0x64'));}async_1[a91_0x44ea('0x15')][a91_0x44ea('0x51')]([function createRandomToken(_0x3cb26a){crypto_1['default'][a91_0x44ea('0x65')](0x10,(_0x48f31b,_0x1153d3)=>{const _0x2cbc4b=_0x1153d3['toString'](a91_0x44ea('0x66'));_0x3cb26a(_0x48f31b,_0x2cbc4b);});},function setRandomToken(_0x5974d3,_0x1a4b20){User_1['default']['findOne']({'email':_0x28a8df[a91_0x44ea('0x27')]['email']},(_0x5e46aa,_0x9acf41)=>{if(_0x5e46aa){return _0x1a4b20(_0x5e46aa);}if(!_0x9acf41){_0x28a8df['flash'](a91_0x44ea('0x13'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x171345[a91_0x44ea('0x6')]('/forgot');}_0x9acf41[a91_0x44ea('0x53')]=_0x5974d3;_0x9acf41['passwordResetExpires']=Date[a91_0x44ea('0x4b')]()+0x36ee80;_0x9acf41['save'](_0x5e46aa=>{_0x1a4b20(_0x5e46aa,_0x5974d3,_0x9acf41);});});},function sendForgotPasswordEmail(_0xba5f61,_0x7a23d7,_0x481fc3){const _0x31f564=nodemailer_1[a91_0x44ea('0x15')]['createTransport']({'service':a91_0x44ea('0x55'),'auth':{'user':process[a91_0x44ea('0x56')][a91_0x44ea('0x57')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x58983e={'to':_0x7a23d7[a91_0x44ea('0xb')],'from':a91_0x44ea('0x67'),'subject':a91_0x44ea('0x68'),'text':a91_0x44ea('0x69')+_0x28a8df[a91_0x44ea('0x6a')]['host']+a91_0x44ea('0x6b')+_0xba5f61+a91_0x44ea('0x6c')};_0x31f564['sendMail'](_0x58983e,_0x2c18fb=>{_0x28a8df[a91_0x44ea('0x12')](a91_0x44ea('0x40'),{'msg':a91_0x44ea('0x6d')+_0x7a23d7[a91_0x44ea('0xb')]+'\x20with\x20further\x20instructions.'});_0x481fc3(_0x2c18fb);});}],_0x2a1a1e=>{if(_0x2a1a1e){return _0x23732a(_0x2a1a1e);}_0x171345[a91_0x44ea('0x6')](a91_0x44ea('0x64'));});};