var a91_0xf524=['getOauthUnlink','findById','tokens','filter','\x20account\x20has\x20been\x20unlinked.','params','token','where','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','now','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','passwordResetToken','passwordResetExpires','createTransport','SendGrid','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','defineProperty','__esModule','async','crypto','nodemailer','passport','express-validator','redirect','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password','notEmpty','sanitize','validationErrors','flash','/login','authenticate','local','errors','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','Create\x20Account','confirmPassword','body','normalizeEmail','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','name','gender','profile','location','website','code','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','user','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info'];(function(_0x29d45a,_0x20b398){var _0x22215a=function(_0x46a121){while(--_0x46a121){_0x29d45a['push'](_0x29d45a['shift']());}};_0x22215a(++_0x20b398);}(a91_0xf524,0x1bb));var a91_0x51dc=function(_0x13eecb,_0x3a7e9e){_0x13eecb=_0x13eecb-0x0;var _0x32f8c1=a91_0xf524[_0x13eecb];return _0x32f8c1;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4986bd){return _0x4986bd&&_0x4986bd['__esModule']?_0x4986bd:{'default':_0x4986bd};};Object[a91_0x51dc('0x0')](exports,a91_0x51dc('0x1'),{'value':!![]});const async_1=__importDefault(require(a91_0x51dc('0x2')));const crypto_1=__importDefault(require(a91_0x51dc('0x3')));const nodemailer_1=__importDefault(require(a91_0x51dc('0x4')));const passport_1=__importDefault(require(a91_0x51dc('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a91_0x51dc('0x6'));exports['getLogin']=(_0x48e7f5,_0x14d510)=>{if(_0x48e7f5['user']){return _0x14d510[a91_0x51dc('0x7')]('/');}_0x14d510[a91_0x51dc('0x8')](a91_0x51dc('0x9'),{'title':a91_0x51dc('0xa')});};exports[a91_0x51dc('0xb')]=(_0x48d3a9,_0x36cbee,_0x987af2)=>{_0x48d3a9['assert'](a91_0x51dc('0xc'),a91_0x51dc('0xd'))[a91_0x51dc('0xe')]();_0x48d3a9[a91_0x51dc('0xf')](a91_0x51dc('0x10'),'Password\x20cannot\x20be\x20blank')[a91_0x51dc('0x11')]();_0x48d3a9[a91_0x51dc('0x12')](a91_0x51dc('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x36a6ca=_0x48d3a9[a91_0x51dc('0x13')]();if(_0x36a6ca){_0x48d3a9[a91_0x51dc('0x14')]('errors',_0x36a6ca);return _0x36cbee[a91_0x51dc('0x7')](a91_0x51dc('0x15'));}passport_1['default'][a91_0x51dc('0x16')](a91_0x51dc('0x17'),(_0x2be627,_0x2e632a,_0x3bab9d)=>{if(_0x2be627){return _0x987af2(_0x2be627);}if(!_0x2e632a){_0x48d3a9[a91_0x51dc('0x14')](a91_0x51dc('0x18'),_0x3bab9d[a91_0x51dc('0x19')]);return _0x36cbee[a91_0x51dc('0x7')]('/login');}_0x48d3a9[a91_0x51dc('0x1a')](_0x2e632a,_0x2be627=>{if(_0x2be627){return _0x987af2(_0x2be627);}_0x48d3a9[a91_0x51dc('0x14')](a91_0x51dc('0x1b'),{'msg':a91_0x51dc('0x1c')});_0x36cbee[a91_0x51dc('0x7')](_0x48d3a9['session'][a91_0x51dc('0x1d')]||'/');});})(_0x48d3a9,_0x36cbee,_0x987af2);};exports[a91_0x51dc('0x1e')]=(_0x3b72c4,_0x17837b)=>{_0x3b72c4['logout']();_0x17837b[a91_0x51dc('0x7')]('/');};exports[a91_0x51dc('0x1f')]=(_0x17af75,_0x38add6)=>{if(_0x17af75['user']){return _0x38add6['redirect']('/');}_0x38add6[a91_0x51dc('0x8')](a91_0x51dc('0x20'),{'title':a91_0x51dc('0x21')});};exports['postSignup']=(_0x941af9,_0x50dfa5,_0x3dc8b6)=>{_0x941af9[a91_0x51dc('0xf')](a91_0x51dc('0xc'),a91_0x51dc('0xd'))[a91_0x51dc('0xe')]();_0x941af9[a91_0x51dc('0xf')](a91_0x51dc('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x941af9[a91_0x51dc('0xf')](a91_0x51dc('0x22'),'Passwords\x20do\x20not\x20match')['equals'](_0x941af9[a91_0x51dc('0x23')][a91_0x51dc('0x10')]);_0x941af9[a91_0x51dc('0x12')](a91_0x51dc('0xc'))[a91_0x51dc('0x24')]({'gmail_remove_dots':![]});const _0x15cdf9=_0x941af9[a91_0x51dc('0x13')]();if(_0x15cdf9){_0x941af9[a91_0x51dc('0x14')]('errors',_0x15cdf9);return _0x50dfa5[a91_0x51dc('0x7')](a91_0x51dc('0x25'));}const _0x391d89=new User_1[(a91_0x51dc('0x26'))]({'email':_0x941af9[a91_0x51dc('0x23')][a91_0x51dc('0xc')],'password':_0x941af9['body']['password']});User_1['default'][a91_0x51dc('0x27')]({'email':_0x941af9[a91_0x51dc('0x23')][a91_0x51dc('0xc')]},(_0x5d4528,_0xbf3553)=>{if(_0x5d4528){return _0x3dc8b6(_0x5d4528);}if(_0xbf3553){_0x941af9['flash'](a91_0x51dc('0x18'),{'msg':a91_0x51dc('0x28')});return _0x50dfa5[a91_0x51dc('0x7')](a91_0x51dc('0x25'));}_0x391d89[a91_0x51dc('0x29')](_0x5d4528=>{if(_0x5d4528){return _0x3dc8b6(_0x5d4528);}_0x941af9['logIn'](_0x391d89,_0x5d4528=>{if(_0x5d4528){return _0x3dc8b6(_0x5d4528);}_0x50dfa5[a91_0x51dc('0x7')]('/');});});});};exports['getAccount']=(_0x207e51,_0x5d8823)=>{_0x5d8823['render'](a91_0x51dc('0x2a'),{'title':'Account\x20Management'});};exports[a91_0x51dc('0x2b')]=(_0x443210,_0xb07f03,_0x1d849d)=>{_0x443210['assert']('email',a91_0x51dc('0x2c'))[a91_0x51dc('0xe')]();_0x443210[a91_0x51dc('0x12')](a91_0x51dc('0xc'))[a91_0x51dc('0x24')]({'gmail_remove_dots':![]});const _0x4ea112=_0x443210[a91_0x51dc('0x13')]();if(_0x4ea112){_0x443210[a91_0x51dc('0x14')](a91_0x51dc('0x18'),_0x4ea112);return _0xb07f03[a91_0x51dc('0x7')]('/account');}User_1[a91_0x51dc('0x26')]['findById'](_0x443210['user']['id'],(_0x5f2341,_0x2938e4)=>{if(_0x5f2341){return _0x1d849d(_0x5f2341);}_0x2938e4[a91_0x51dc('0xc')]=_0x443210['body'][a91_0x51dc('0xc')]||'';_0x2938e4['profile'][a91_0x51dc('0x2d')]=_0x443210['body']['name']||'';_0x2938e4['profile'][a91_0x51dc('0x2e')]=_0x443210[a91_0x51dc('0x23')][a91_0x51dc('0x2e')]||'';_0x2938e4[a91_0x51dc('0x2f')][a91_0x51dc('0x30')]=_0x443210[a91_0x51dc('0x23')][a91_0x51dc('0x30')]||'';_0x2938e4[a91_0x51dc('0x2f')][a91_0x51dc('0x31')]=_0x443210[a91_0x51dc('0x23')][a91_0x51dc('0x31')]||'';_0x2938e4[a91_0x51dc('0x29')](_0x5f2341=>{if(_0x5f2341){if(_0x5f2341[a91_0x51dc('0x32')]===0x2af8){_0x443210['flash']('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0xb07f03[a91_0x51dc('0x7')](a91_0x51dc('0x33'));}return _0x1d849d(_0x5f2341);}_0x443210[a91_0x51dc('0x14')]('success',{'msg':a91_0x51dc('0x34')});_0xb07f03[a91_0x51dc('0x7')]('/account');});});};exports[a91_0x51dc('0x35')]=(_0x1e217d,_0x213583,_0x199eb7)=>{_0x1e217d[a91_0x51dc('0xf')]('password',a91_0x51dc('0x36'))['len']({'min':0x4});_0x1e217d[a91_0x51dc('0xf')]('confirmPassword',a91_0x51dc('0x37'))[a91_0x51dc('0x38')](_0x1e217d[a91_0x51dc('0x23')][a91_0x51dc('0x10')]);const _0xf9ed4b=_0x1e217d[a91_0x51dc('0x13')]();if(_0xf9ed4b){_0x1e217d['flash'](a91_0x51dc('0x18'),_0xf9ed4b);return _0x213583[a91_0x51dc('0x7')](a91_0x51dc('0x33'));}User_1['default']['findById'](_0x1e217d[a91_0x51dc('0x39')]['id'],(_0x2fba5a,_0x30dcb5)=>{if(_0x2fba5a){return _0x199eb7(_0x2fba5a);}_0x30dcb5['password']=_0x1e217d[a91_0x51dc('0x23')][a91_0x51dc('0x10')];_0x30dcb5[a91_0x51dc('0x29')](_0x2fba5a=>{if(_0x2fba5a){return _0x199eb7(_0x2fba5a);}_0x1e217d[a91_0x51dc('0x14')]('success',{'msg':a91_0x51dc('0x3a')});_0x213583[a91_0x51dc('0x7')](a91_0x51dc('0x33'));});});};exports[a91_0x51dc('0x3b')]=(_0x5b8efd,_0x553c0c,_0x209971)=>{User_1['default'][a91_0x51dc('0x3c')]({'_id':_0x5b8efd[a91_0x51dc('0x39')]['id']},_0x59d8cf=>{if(_0x59d8cf){return _0x209971(_0x59d8cf);}_0x5b8efd[a91_0x51dc('0x1e')]();_0x5b8efd[a91_0x51dc('0x14')](a91_0x51dc('0x3d'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x553c0c[a91_0x51dc('0x7')]('/');});};exports[a91_0x51dc('0x3e')]=(_0x5676b1,_0x2017f1,_0xbdcf3d)=>{const _0xd782ea=_0x5676b1['params']['provider'];User_1[a91_0x51dc('0x26')][a91_0x51dc('0x3f')](_0x5676b1[a91_0x51dc('0x39')]['id'],(_0x3ac790,_0x2ef5c1)=>{if(_0x3ac790){return _0xbdcf3d(_0x3ac790);}_0x2ef5c1[_0xd782ea]=undefined;_0x2ef5c1['tokens']=_0x2ef5c1[a91_0x51dc('0x40')][a91_0x51dc('0x41')](_0x4cd570=>_0x4cd570['kind']!==_0xd782ea);_0x2ef5c1[a91_0x51dc('0x29')](_0x3ac790=>{if(_0x3ac790){return _0xbdcf3d(_0x3ac790);}_0x5676b1[a91_0x51dc('0x14')]('info',{'msg':_0xd782ea+a91_0x51dc('0x42')});_0x2017f1['redirect'](a91_0x51dc('0x33'));});});};exports['getReset']=(_0x339361,_0x2567b1,_0x1e26cd)=>{if(_0x339361['isAuthenticated']()){return _0x2567b1['redirect']('/');}User_1[a91_0x51dc('0x26')]['findOne']({'passwordResetToken':_0x339361[a91_0x51dc('0x43')][a91_0x51dc('0x44')]})[a91_0x51dc('0x45')]('passwordResetExpires')['gt'](Date['now']())[a91_0x51dc('0x46')]((_0x31fe17,_0x3f9bf9)=>{if(_0x31fe17){return _0x1e26cd(_0x31fe17);}if(!_0x3f9bf9){_0x339361[a91_0x51dc('0x14')](a91_0x51dc('0x18'),{'msg':a91_0x51dc('0x47')});return _0x2567b1[a91_0x51dc('0x7')](a91_0x51dc('0x48'));}_0x2567b1[a91_0x51dc('0x8')]('account/reset',{'title':'Password\x20Reset'});});};exports['postReset']=(_0x249e79,_0xe17559,_0x2df593)=>{_0x249e79[a91_0x51dc('0xf')]('password',a91_0x51dc('0x49'))['len']({'min':0x4});_0x249e79[a91_0x51dc('0xf')](a91_0x51dc('0x4a'),a91_0x51dc('0x4b'))[a91_0x51dc('0x38')](_0x249e79[a91_0x51dc('0x23')][a91_0x51dc('0x10')]);const _0x327487=_0x249e79[a91_0x51dc('0x13')]();if(_0x327487){_0x249e79[a91_0x51dc('0x14')](a91_0x51dc('0x18'),_0x327487);return _0xe17559[a91_0x51dc('0x7')](a91_0x51dc('0x4c'));}async_1[a91_0x51dc('0x26')][a91_0x51dc('0x4d')]([function resetPassword(_0x237d45){User_1[a91_0x51dc('0x26')][a91_0x51dc('0x27')]({'passwordResetToken':_0x249e79[a91_0x51dc('0x43')][a91_0x51dc('0x44')]})[a91_0x51dc('0x45')]('passwordResetExpires')['gt'](Date[a91_0x51dc('0x4e')]())[a91_0x51dc('0x46')]((_0xa9ed05,_0x46d5b0)=>{if(_0xa9ed05){return _0x2df593(_0xa9ed05);}if(!_0x46d5b0){_0x249e79['flash']('errors',{'msg':a91_0x51dc('0x47')});return _0xe17559[a91_0x51dc('0x7')]('back');}_0x46d5b0[a91_0x51dc('0x10')]=_0x249e79[a91_0x51dc('0x23')]['password'];_0x46d5b0['passwordResetToken']=undefined;_0x46d5b0['passwordResetExpires']=undefined;_0x46d5b0[a91_0x51dc('0x29')](_0xa9ed05=>{if(_0xa9ed05){return _0x2df593(_0xa9ed05);}_0x249e79[a91_0x51dc('0x1a')](_0x46d5b0,_0xa9ed05=>{_0x237d45(_0xa9ed05,_0x46d5b0);});});});},function sendResetPasswordEmail(_0x409697,_0x1f5513){const _0x3756f4=nodemailer_1[a91_0x51dc('0x26')]['createTransport']({'service':'SendGrid','auth':{'user':process['env'][a91_0x51dc('0x4f')],'pass':process[a91_0x51dc('0x50')][a91_0x51dc('0x51')]}});const _0x292d14={'to':_0x409697['email'],'from':a91_0x51dc('0x52'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a91_0x51dc('0x53')+_0x409697[a91_0x51dc('0xc')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x3756f4[a91_0x51dc('0x54')](_0x292d14,_0x2a8857=>{_0x249e79[a91_0x51dc('0x14')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x1f5513(_0x2a8857);});}],_0x462a87=>{if(_0x462a87){return _0x2df593(_0x462a87);}_0xe17559[a91_0x51dc('0x7')]('/');});};exports['getForgot']=(_0x2c3216,_0x4635b9)=>{if(_0x2c3216['isAuthenticated']()){return _0x4635b9['redirect']('/');}_0x4635b9[a91_0x51dc('0x8')](a91_0x51dc('0x55'),{'title':a91_0x51dc('0x56')});};exports[a91_0x51dc('0x57')]=(_0xe13e83,_0x2bdcc5,_0x2c9904)=>{_0xe13e83['assert']('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a91_0x51dc('0xe')]();_0xe13e83[a91_0x51dc('0x12')](a91_0x51dc('0xc'))[a91_0x51dc('0x24')]({'gmail_remove_dots':![]});const _0x5e773d=_0xe13e83[a91_0x51dc('0x13')]();if(_0x5e773d){_0xe13e83[a91_0x51dc('0x14')](a91_0x51dc('0x18'),_0x5e773d);return _0x2bdcc5['redirect'](a91_0x51dc('0x48'));}async_1['default'][a91_0x51dc('0x4d')]([function createRandomToken(_0x43a361){crypto_1[a91_0x51dc('0x26')][a91_0x51dc('0x58')](0x10,(_0x5cb39a,_0x58386d)=>{const _0x209082=_0x58386d[a91_0x51dc('0x59')](a91_0x51dc('0x5a'));_0x43a361(_0x5cb39a,_0x209082);});},function setRandomToken(_0x25f065,_0x408f55){User_1[a91_0x51dc('0x26')]['findOne']({'email':_0xe13e83['body'][a91_0x51dc('0xc')]},(_0x3611d5,_0x4dad2a)=>{if(_0x3611d5){return _0x408f55(_0x3611d5);}if(!_0x4dad2a){_0xe13e83[a91_0x51dc('0x14')](a91_0x51dc('0x18'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x2bdcc5[a91_0x51dc('0x7')]('/forgot');}_0x4dad2a[a91_0x51dc('0x5b')]=_0x25f065;_0x4dad2a[a91_0x51dc('0x5c')]=Date['now']()+0x36ee80;_0x4dad2a[a91_0x51dc('0x29')](_0x3611d5=>{_0x408f55(_0x3611d5,_0x25f065,_0x4dad2a);});});},function sendForgotPasswordEmail(_0x43a241,_0x3735db,_0x115883){const _0x3058ff=nodemailer_1[a91_0x51dc('0x26')][a91_0x51dc('0x5d')]({'service':a91_0x51dc('0x5e'),'auth':{'user':process['env'][a91_0x51dc('0x4f')],'pass':process[a91_0x51dc('0x50')]['SENDGRID_PASSWORD']}});const _0x5d1966={'to':_0x3735db[a91_0x51dc('0xc')],'from':a91_0x51dc('0x5f'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a91_0x51dc('0x60')+_0xe13e83[a91_0x51dc('0x61')][a91_0x51dc('0x62')]+'/reset/'+_0x43a241+a91_0x51dc('0x63')};_0x3058ff[a91_0x51dc('0x54')](_0x5d1966,_0x40aa6d=>{_0xe13e83['flash'](a91_0x51dc('0x3d'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x3735db[a91_0x51dc('0xc')]+a91_0x51dc('0x64')});_0x115883(_0x40aa6d);});}],_0x44bd35=>{if(_0x44bd35){return _0x2c9904(_0x44bd35);}_0x2bdcc5[a91_0x51dc('0x7')]('/forgot');});};