var a142_0xabdc=['\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','passwordResetExpires','now','exec','/forgot','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','where','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','postForgot','randomBytes','hex','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','async','../models/User','express-validator','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','errors','/login','default','authenticate','local','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','body','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','save','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','equals','user','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','kind'];(function(_0xe0f539,_0x3a1199){var _0x577a12=function(_0x220e4a){while(--_0x220e4a){_0xe0f539['push'](_0xe0f539['shift']());}};_0x577a12(++_0x3a1199);}(a142_0xabdc,0x164));var a142_0x1d82=function(_0x17d338,_0x3eaf8a){_0x17d338=_0x17d338-0x0;var _0x2c2266=a142_0xabdc[_0x17d338];return _0x2c2266;};'use strict';var __importDefault=this&&this[a142_0x1d82('0x0')]||function(_0x3f75d6){return _0x3f75d6&&_0x3f75d6[a142_0x1d82('0x1')]?_0x3f75d6:{'default':_0x3f75d6};};Object['defineProperty'](exports,a142_0x1d82('0x1'),{'value':!![]});const async_1=__importDefault(require(a142_0x1d82('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a142_0x1d82('0x3')));const request=require(a142_0x1d82('0x4'));exports['getLogin']=(_0x123e96,_0x3a373e)=>{if(_0x123e96['user']){return _0x3a373e[a142_0x1d82('0x5')]('/');}_0x3a373e[a142_0x1d82('0x6')](a142_0x1d82('0x7'),{'title':a142_0x1d82('0x8')});};exports[a142_0x1d82('0x9')]=(_0x2d3b35,_0x3a8397,_0x51b732)=>{_0x2d3b35[a142_0x1d82('0xa')](a142_0x1d82('0xb'),a142_0x1d82('0xc'))[a142_0x1d82('0xd')]();_0x2d3b35[a142_0x1d82('0xa')]('password',a142_0x1d82('0xe'))[a142_0x1d82('0xf')]();_0x2d3b35[a142_0x1d82('0x10')](a142_0x1d82('0xb'))[a142_0x1d82('0x11')]({'gmail_remove_dots':![]});const _0x58bc6a=_0x2d3b35['validationErrors']();if(_0x58bc6a){_0x2d3b35[a142_0x1d82('0x12')](a142_0x1d82('0x13'),_0x58bc6a);return _0x3a8397[a142_0x1d82('0x5')](a142_0x1d82('0x14'));}passport_1[a142_0x1d82('0x15')][a142_0x1d82('0x16')](a142_0x1d82('0x17'),(_0x5c271e,_0x30e3a5,_0x43706b)=>{if(_0x5c271e){return _0x51b732(_0x5c271e);}if(!_0x30e3a5){_0x2d3b35[a142_0x1d82('0x12')]('errors',_0x43706b['message']);return _0x3a8397[a142_0x1d82('0x5')](a142_0x1d82('0x14'));}_0x2d3b35[a142_0x1d82('0x18')](_0x30e3a5,_0x5c271e=>{if(_0x5c271e){return _0x51b732(_0x5c271e);}_0x2d3b35[a142_0x1d82('0x12')](a142_0x1d82('0x19'),{'msg':a142_0x1d82('0x1a')});_0x3a8397[a142_0x1d82('0x5')](_0x2d3b35[a142_0x1d82('0x1b')][a142_0x1d82('0x1c')]||'/');});})(_0x2d3b35,_0x3a8397,_0x51b732);};exports['logout']=(_0x40e171,_0xef279c)=>{_0x40e171[a142_0x1d82('0x1d')]();_0xef279c[a142_0x1d82('0x5')]('/');};exports[a142_0x1d82('0x1e')]=(_0x215118,_0x543196)=>{if(_0x215118['user']){return _0x543196[a142_0x1d82('0x5')]('/');}_0x543196[a142_0x1d82('0x6')](a142_0x1d82('0x1f'),{'title':a142_0x1d82('0x20')});};exports[a142_0x1d82('0x21')]=(_0x582755,_0xa65b66,_0x45231f)=>{_0x582755['assert']('email',a142_0x1d82('0xc'))[a142_0x1d82('0xd')]();_0x582755[a142_0x1d82('0xa')](a142_0x1d82('0x22'),a142_0x1d82('0x23'))[a142_0x1d82('0x24')]({'min':0x4});_0x582755[a142_0x1d82('0xa')]('confirmPassword',a142_0x1d82('0x25'))['equals'](_0x582755[a142_0x1d82('0x26')]['password']);_0x582755['sanitize']('email')[a142_0x1d82('0x11')]({'gmail_remove_dots':![]});const _0x5da8bc=_0x582755[a142_0x1d82('0x27')]();if(_0x5da8bc){_0x582755[a142_0x1d82('0x12')]('errors',_0x5da8bc);return _0xa65b66[a142_0x1d82('0x5')](a142_0x1d82('0x28'));}const _0x4cb9d6=new User_1[(a142_0x1d82('0x15'))]({'email':_0x582755['body'][a142_0x1d82('0xb')],'password':_0x582755[a142_0x1d82('0x26')][a142_0x1d82('0x22')]});User_1[a142_0x1d82('0x15')][a142_0x1d82('0x29')]({'email':_0x582755[a142_0x1d82('0x26')][a142_0x1d82('0xb')]},(_0xb7d043,_0x5f1058)=>{if(_0xb7d043){return _0x45231f(_0xb7d043);}if(_0x5f1058){_0x582755[a142_0x1d82('0x12')]('errors',{'msg':a142_0x1d82('0x2a')});return _0xa65b66[a142_0x1d82('0x5')](a142_0x1d82('0x28'));}_0x4cb9d6['save'](_0xb7d043=>{if(_0xb7d043){return _0x45231f(_0xb7d043);}_0x582755['logIn'](_0x4cb9d6,_0xb7d043=>{if(_0xb7d043){return _0x45231f(_0xb7d043);}_0xa65b66[a142_0x1d82('0x5')]('/');});});});};exports[a142_0x1d82('0x2b')]=(_0x4b0999,_0x534ad1)=>{_0x534ad1[a142_0x1d82('0x6')](a142_0x1d82('0x2c'),{'title':a142_0x1d82('0x2d')});};exports[a142_0x1d82('0x2e')]=(_0x4510d8,_0x27d2e0,_0x232f54)=>{_0x4510d8[a142_0x1d82('0xa')](a142_0x1d82('0xb'),a142_0x1d82('0x2f'))[a142_0x1d82('0xd')]();_0x4510d8[a142_0x1d82('0x10')](a142_0x1d82('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x539397=_0x4510d8[a142_0x1d82('0x27')]();if(_0x539397){_0x4510d8[a142_0x1d82('0x12')]('errors',_0x539397);return _0x27d2e0[a142_0x1d82('0x5')](a142_0x1d82('0x30'));}User_1[a142_0x1d82('0x15')][a142_0x1d82('0x31')](_0x4510d8['user']['id'],(_0x3c4687,_0x2cb6ce)=>{if(_0x3c4687){return _0x232f54(_0x3c4687);}_0x2cb6ce[a142_0x1d82('0xb')]=_0x4510d8[a142_0x1d82('0x26')][a142_0x1d82('0xb')]||'';_0x2cb6ce[a142_0x1d82('0x32')]['name']=_0x4510d8[a142_0x1d82('0x26')][a142_0x1d82('0x33')]||'';_0x2cb6ce['profile'][a142_0x1d82('0x34')]=_0x4510d8[a142_0x1d82('0x26')][a142_0x1d82('0x34')]||'';_0x2cb6ce['profile'][a142_0x1d82('0x35')]=_0x4510d8['body'][a142_0x1d82('0x35')]||'';_0x2cb6ce[a142_0x1d82('0x32')][a142_0x1d82('0x36')]=_0x4510d8[a142_0x1d82('0x26')][a142_0x1d82('0x36')]||'';_0x2cb6ce[a142_0x1d82('0x37')](_0x3c4687=>{if(_0x3c4687){if(_0x3c4687['code']===0x2af8){_0x4510d8[a142_0x1d82('0x12')](a142_0x1d82('0x13'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x27d2e0[a142_0x1d82('0x5')](a142_0x1d82('0x30'));}return _0x232f54(_0x3c4687);}_0x4510d8[a142_0x1d82('0x12')](a142_0x1d82('0x19'),{'msg':a142_0x1d82('0x38')});_0x27d2e0[a142_0x1d82('0x5')](a142_0x1d82('0x30'));});});};exports[a142_0x1d82('0x39')]=(_0x59a470,_0x453c55,_0x482892)=>{_0x59a470[a142_0x1d82('0xa')](a142_0x1d82('0x22'),a142_0x1d82('0x23'))[a142_0x1d82('0x24')]({'min':0x4});_0x59a470[a142_0x1d82('0xa')]('confirmPassword','Passwords\x20do\x20not\x20match')[a142_0x1d82('0x3a')](_0x59a470[a142_0x1d82('0x26')]['password']);const _0x467006=_0x59a470['validationErrors']();if(_0x467006){_0x59a470[a142_0x1d82('0x12')]('errors',_0x467006);return _0x453c55[a142_0x1d82('0x5')](a142_0x1d82('0x30'));}User_1[a142_0x1d82('0x15')][a142_0x1d82('0x31')](_0x59a470[a142_0x1d82('0x3b')]['id'],(_0x99fc50,_0x43650e)=>{if(_0x99fc50){return _0x482892(_0x99fc50);}_0x43650e[a142_0x1d82('0x22')]=_0x59a470[a142_0x1d82('0x26')][a142_0x1d82('0x22')];_0x43650e[a142_0x1d82('0x37')](_0x99fc50=>{if(_0x99fc50){return _0x482892(_0x99fc50);}_0x59a470[a142_0x1d82('0x12')](a142_0x1d82('0x19'),{'msg':a142_0x1d82('0x3c')});_0x453c55[a142_0x1d82('0x5')](a142_0x1d82('0x30'));});});};exports['postDeleteAccount']=(_0x4965ed,_0x523d60,_0x5b4088)=>{User_1[a142_0x1d82('0x15')][a142_0x1d82('0x3d')]({'_id':_0x4965ed[a142_0x1d82('0x3b')]['id']},_0x362ee1=>{if(_0x362ee1){return _0x5b4088(_0x362ee1);}_0x4965ed[a142_0x1d82('0x1d')]();_0x4965ed[a142_0x1d82('0x12')](a142_0x1d82('0x3e'),{'msg':a142_0x1d82('0x3f')});_0x523d60[a142_0x1d82('0x5')]('/');});};exports[a142_0x1d82('0x40')]=(_0x325f34,_0x48e576,_0xa6f06)=>{const _0x1b98b5=_0x325f34[a142_0x1d82('0x41')]['provider'];User_1['default'][a142_0x1d82('0x31')](_0x325f34[a142_0x1d82('0x3b')]['id'],(_0x4be932,_0x11101a)=>{if(_0x4be932){return _0xa6f06(_0x4be932);}_0x11101a[_0x1b98b5]=undefined;_0x11101a[a142_0x1d82('0x42')]=_0x11101a[a142_0x1d82('0x42')]['filter'](_0x5ed397=>_0x5ed397[a142_0x1d82('0x43')]!==_0x1b98b5);_0x11101a[a142_0x1d82('0x37')](_0x4be932=>{if(_0x4be932){return _0xa6f06(_0x4be932);}_0x325f34[a142_0x1d82('0x12')](a142_0x1d82('0x3e'),{'msg':_0x1b98b5+a142_0x1d82('0x44')});_0x48e576[a142_0x1d82('0x5')](a142_0x1d82('0x30'));});});};exports[a142_0x1d82('0x45')]=(_0x4902a7,_0xc9776d,_0x44f56d)=>{if(_0x4902a7[a142_0x1d82('0x46')]()){return _0xc9776d[a142_0x1d82('0x5')]('/');}User_1['default'][a142_0x1d82('0x29')]({'passwordResetToken':_0x4902a7[a142_0x1d82('0x41')][a142_0x1d82('0x47')]})['where'](a142_0x1d82('0x48'))['gt'](Date[a142_0x1d82('0x49')]())[a142_0x1d82('0x4a')]((_0xa8c4b5,_0x21d2d3)=>{if(_0xa8c4b5){return _0x44f56d(_0xa8c4b5);}if(!_0x21d2d3){_0x4902a7[a142_0x1d82('0x12')](a142_0x1d82('0x13'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0xc9776d['redirect'](a142_0x1d82('0x4b'));}_0xc9776d[a142_0x1d82('0x6')](a142_0x1d82('0x4c'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x6c4a1,_0x2f152a,_0x21cacc)=>{_0x6c4a1[a142_0x1d82('0xa')](a142_0x1d82('0x22'),a142_0x1d82('0x4d'))[a142_0x1d82('0x24')]({'min':0x4});_0x6c4a1[a142_0x1d82('0xa')](a142_0x1d82('0x4e'),a142_0x1d82('0x4f'))['equals'](_0x6c4a1[a142_0x1d82('0x26')]['password']);const _0x5dd1cc=_0x6c4a1[a142_0x1d82('0x27')]();if(_0x5dd1cc){_0x6c4a1[a142_0x1d82('0x12')]('errors',_0x5dd1cc);return _0x2f152a[a142_0x1d82('0x5')]('back');}async_1['default'][a142_0x1d82('0x50')]([function resetPassword(_0x67ebe7){User_1['default'][a142_0x1d82('0x29')]({'passwordResetToken':_0x6c4a1[a142_0x1d82('0x41')]['token']})[a142_0x1d82('0x51')](a142_0x1d82('0x48'))['gt'](Date['now']())[a142_0x1d82('0x4a')]((_0xa202f1,_0x4ad12c)=>{if(_0xa202f1){return _0x21cacc(_0xa202f1);}if(!_0x4ad12c){_0x6c4a1[a142_0x1d82('0x12')](a142_0x1d82('0x13'),{'msg':a142_0x1d82('0x52')});return _0x2f152a[a142_0x1d82('0x5')](a142_0x1d82('0x53'));}_0x4ad12c[a142_0x1d82('0x22')]=_0x6c4a1['body'][a142_0x1d82('0x22')];_0x4ad12c[a142_0x1d82('0x54')]=undefined;_0x4ad12c['passwordResetExpires']=undefined;_0x4ad12c[a142_0x1d82('0x37')](_0xa202f1=>{if(_0xa202f1){return _0x21cacc(_0xa202f1);}_0x6c4a1[a142_0x1d82('0x18')](_0x4ad12c,_0xa202f1=>{_0x67ebe7(_0xa202f1,_0x4ad12c);});});});},function sendResetPasswordEmail(_0x4b2040,_0x1302c7){const _0x41f152=nodemailer_1[a142_0x1d82('0x15')][a142_0x1d82('0x55')]({'service':a142_0x1d82('0x56'),'auth':{'user':process[a142_0x1d82('0x57')][a142_0x1d82('0x58')],'pass':process['env'][a142_0x1d82('0x59')]}});const _0x1f79bd={'to':_0x4b2040[a142_0x1d82('0xb')],'from':a142_0x1d82('0x5a'),'subject':a142_0x1d82('0x5b'),'text':a142_0x1d82('0x5c')+_0x4b2040[a142_0x1d82('0xb')]+a142_0x1d82('0x5d')};_0x41f152[a142_0x1d82('0x5e')](_0x1f79bd,_0x37684f=>{_0x6c4a1[a142_0x1d82('0x12')](a142_0x1d82('0x19'),{'msg':a142_0x1d82('0x5f')});_0x1302c7(_0x37684f);});}],_0x327175=>{if(_0x327175){return _0x21cacc(_0x327175);}_0x2f152a[a142_0x1d82('0x5')]('/');});};exports['getForgot']=(_0x48d0d0,_0x3704ea)=>{if(_0x48d0d0['isAuthenticated']()){return _0x3704ea[a142_0x1d82('0x5')]('/');}_0x3704ea['render'](a142_0x1d82('0x60'),{'title':'Forgot\x20Password'});};exports[a142_0x1d82('0x61')]=(_0x542dbd,_0x852994,_0x161dca)=>{_0x542dbd['assert'](a142_0x1d82('0xb'),a142_0x1d82('0x2f'))[a142_0x1d82('0xd')]();_0x542dbd['sanitize'](a142_0x1d82('0xb'))[a142_0x1d82('0x11')]({'gmail_remove_dots':![]});const _0x56ba1b=_0x542dbd['validationErrors']();if(_0x56ba1b){_0x542dbd['flash'](a142_0x1d82('0x13'),_0x56ba1b);return _0x852994['redirect'](a142_0x1d82('0x4b'));}async_1[a142_0x1d82('0x15')][a142_0x1d82('0x50')]([function createRandomToken(_0x4aec97){crypto_1[a142_0x1d82('0x15')][a142_0x1d82('0x62')](0x10,(_0xfb19dd,_0x30eec4)=>{const _0xe7f044=_0x30eec4['toString'](a142_0x1d82('0x63'));_0x4aec97(_0xfb19dd,_0xe7f044);});},function setRandomToken(_0x51abbd,_0x58b16a){User_1['default'][a142_0x1d82('0x29')]({'email':_0x542dbd[a142_0x1d82('0x26')][a142_0x1d82('0xb')]},(_0x17a4be,_0x6573fb)=>{if(_0x17a4be){return _0x58b16a(_0x17a4be);}if(!_0x6573fb){_0x542dbd[a142_0x1d82('0x12')](a142_0x1d82('0x13'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x852994[a142_0x1d82('0x5')]('/forgot');}_0x6573fb[a142_0x1d82('0x54')]=_0x51abbd;_0x6573fb[a142_0x1d82('0x48')]=Date[a142_0x1d82('0x49')]()+0x36ee80;_0x6573fb[a142_0x1d82('0x37')](_0x17a4be=>{_0x58b16a(_0x17a4be,_0x51abbd,_0x6573fb);});});},function sendForgotPasswordEmail(_0x26548a,_0x3fb4a5,_0x4296bf){const _0xe94b93=nodemailer_1[a142_0x1d82('0x15')][a142_0x1d82('0x55')]({'service':a142_0x1d82('0x56'),'auth':{'user':process[a142_0x1d82('0x57')][a142_0x1d82('0x58')],'pass':process[a142_0x1d82('0x57')][a142_0x1d82('0x59')]}});const _0x31ea18={'to':_0x3fb4a5['email'],'from':a142_0x1d82('0x64'),'subject':a142_0x1d82('0x65'),'text':a142_0x1d82('0x66')+_0x542dbd[a142_0x1d82('0x67')]['host']+a142_0x1d82('0x68')+_0x26548a+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0xe94b93[a142_0x1d82('0x5e')](_0x31ea18,_0x533ca7=>{_0x542dbd[a142_0x1d82('0x12')]('info',{'msg':a142_0x1d82('0x69')+_0x3fb4a5[a142_0x1d82('0xb')]+'\x20with\x20further\x20instructions.'});_0x4296bf(_0x533ca7);});}],_0x25f268=>{if(_0x25f268){return _0x161dca(_0x25f268);}_0x852994['redirect'](a142_0x1d82('0x4b'));});};