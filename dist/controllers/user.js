var a95_0x3c8a=['logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','assert','password','len','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','validationErrors','/account','findById','profile','gender','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','waterfall','params','token','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','toString','hex','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','crypto','nodemailer','passport','getLogin','user','redirect','render','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','errors','/login','default','authenticate','local','message'];(function(_0x16a2be,_0x2bf26b){var _0x17982a=function(_0x457746){while(--_0x457746){_0x16a2be['push'](_0x16a2be['shift']());}};_0x17982a(++_0x2bf26b);}(a95_0x3c8a,0xbd));var a95_0x18df=function(_0x5d18f5,_0x56943d){_0x5d18f5=_0x5d18f5-0x0;var _0x1fe024=a95_0x3c8a[_0x5d18f5];return _0x1fe024;};'use strict';var __importDefault=this&&this[a95_0x18df('0x0')]||function(_0x312841){return _0x312841&&_0x312841[a95_0x18df('0x1')]?_0x312841:{'default':_0x312841};};Object['defineProperty'](exports,a95_0x18df('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a95_0x18df('0x2')));const nodemailer_1=__importDefault(require(a95_0x18df('0x3')));const passport_1=__importDefault(require(a95_0x18df('0x4')));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a95_0x18df('0x5')]=(_0x49f73d,_0x331298)=>{if(_0x49f73d[a95_0x18df('0x6')]){return _0x331298[a95_0x18df('0x7')]('/');}_0x331298[a95_0x18df('0x8')]('account/login',{'title':a95_0x18df('0x9')});};exports[a95_0x18df('0xa')]=(_0x2f6f44,_0xaf441c,_0x5e4be6)=>{_0x2f6f44['assert'](a95_0x18df('0xb'),a95_0x18df('0xc'))[a95_0x18df('0xd')]();_0x2f6f44['assert']('password',a95_0x18df('0xe'))[a95_0x18df('0xf')]();_0x2f6f44[a95_0x18df('0x10')](a95_0x18df('0xb'))[a95_0x18df('0x11')]({'gmail_remove_dots':![]});const _0x1d70e5=_0x2f6f44['validationErrors']();if(_0x1d70e5){_0x2f6f44[a95_0x18df('0x12')](a95_0x18df('0x13'),_0x1d70e5);return _0xaf441c[a95_0x18df('0x7')](a95_0x18df('0x14'));}passport_1[a95_0x18df('0x15')][a95_0x18df('0x16')](a95_0x18df('0x17'),(_0x1a837b,_0x45f940,_0x4973f0)=>{if(_0x1a837b){return _0x5e4be6(_0x1a837b);}if(!_0x45f940){_0x2f6f44[a95_0x18df('0x12')](a95_0x18df('0x13'),_0x4973f0[a95_0x18df('0x18')]);return _0xaf441c[a95_0x18df('0x7')](a95_0x18df('0x14'));}_0x2f6f44[a95_0x18df('0x19')](_0x45f940,_0x1a837b=>{if(_0x1a837b){return _0x5e4be6(_0x1a837b);}_0x2f6f44[a95_0x18df('0x12')](a95_0x18df('0x1a'),{'msg':a95_0x18df('0x1b')});_0xaf441c['redirect'](_0x2f6f44[a95_0x18df('0x1c')][a95_0x18df('0x1d')]||'/');});})(_0x2f6f44,_0xaf441c,_0x5e4be6);};exports[a95_0x18df('0x1e')]=(_0x10dadf,_0x53cf84)=>{_0x10dadf[a95_0x18df('0x1e')]();_0x53cf84['redirect']('/');};exports[a95_0x18df('0x1f')]=(_0x3ef6f9,_0x1892ff)=>{if(_0x3ef6f9['user']){return _0x1892ff[a95_0x18df('0x7')]('/');}_0x1892ff[a95_0x18df('0x8')](a95_0x18df('0x20'),{'title':'Create\x20Account'});};exports['postSignup']=(_0x947b35,_0x109e5a,_0x990f1c)=>{_0x947b35[a95_0x18df('0x21')](a95_0x18df('0xb'),a95_0x18df('0xc'))['isEmail']();_0x947b35[a95_0x18df('0x21')](a95_0x18df('0x22'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x18df('0x23')]({'min':0x4});_0x947b35[a95_0x18df('0x21')]('confirmPassword',a95_0x18df('0x24'))[a95_0x18df('0x25')](_0x947b35[a95_0x18df('0x26')][a95_0x18df('0x22')]);_0x947b35['sanitize']('email')[a95_0x18df('0x11')]({'gmail_remove_dots':![]});const _0xbca580=_0x947b35['validationErrors']();if(_0xbca580){_0x947b35[a95_0x18df('0x12')](a95_0x18df('0x13'),_0xbca580);return _0x109e5a[a95_0x18df('0x7')](a95_0x18df('0x27'));}const _0xd27061=new User_1[(a95_0x18df('0x15'))]({'email':_0x947b35['body'][a95_0x18df('0xb')],'password':_0x947b35[a95_0x18df('0x26')]['password']});User_1['default'][a95_0x18df('0x28')]({'email':_0x947b35[a95_0x18df('0x26')][a95_0x18df('0xb')]},(_0x342b94,_0x14eb97)=>{if(_0x342b94){return _0x990f1c(_0x342b94);}if(_0x14eb97){_0x947b35[a95_0x18df('0x12')](a95_0x18df('0x13'),{'msg':a95_0x18df('0x29')});return _0x109e5a[a95_0x18df('0x7')](a95_0x18df('0x27'));}_0xd27061['save'](_0x342b94=>{if(_0x342b94){return _0x990f1c(_0x342b94);}_0x947b35['logIn'](_0xd27061,_0x342b94=>{if(_0x342b94){return _0x990f1c(_0x342b94);}_0x109e5a[a95_0x18df('0x7')]('/');});});});};exports[a95_0x18df('0x2a')]=(_0x4c0aa1,_0x36815c)=>{_0x36815c[a95_0x18df('0x8')](a95_0x18df('0x2b'),{'title':a95_0x18df('0x2c')});};exports[a95_0x18df('0x2d')]=(_0x145954,_0x1b615f,_0x5310bf)=>{_0x145954[a95_0x18df('0x21')](a95_0x18df('0xb'),a95_0x18df('0x2e'))[a95_0x18df('0xd')]();_0x145954[a95_0x18df('0x10')]('email')[a95_0x18df('0x11')]({'gmail_remove_dots':![]});const _0x5496c6=_0x145954[a95_0x18df('0x2f')]();if(_0x5496c6){_0x145954['flash']('errors',_0x5496c6);return _0x1b615f['redirect'](a95_0x18df('0x30'));}User_1['default'][a95_0x18df('0x31')](_0x145954[a95_0x18df('0x6')]['id'],(_0x2ccef1,_0x26152b)=>{if(_0x2ccef1){return _0x5310bf(_0x2ccef1);}_0x26152b[a95_0x18df('0xb')]=_0x145954[a95_0x18df('0x26')][a95_0x18df('0xb')]||'';_0x26152b[a95_0x18df('0x32')]['name']=_0x145954[a95_0x18df('0x26')]['name']||'';_0x26152b[a95_0x18df('0x32')][a95_0x18df('0x33')]=_0x145954['body'][a95_0x18df('0x33')]||'';_0x26152b[a95_0x18df('0x32')]['location']=_0x145954[a95_0x18df('0x26')]['location']||'';_0x26152b['profile'][a95_0x18df('0x34')]=_0x145954[a95_0x18df('0x26')][a95_0x18df('0x34')]||'';_0x26152b[a95_0x18df('0x35')](_0x2ccef1=>{if(_0x2ccef1){if(_0x2ccef1[a95_0x18df('0x36')]===0x2af8){_0x145954[a95_0x18df('0x12')](a95_0x18df('0x13'),{'msg':a95_0x18df('0x37')});return _0x1b615f['redirect'](a95_0x18df('0x30'));}return _0x5310bf(_0x2ccef1);}_0x145954[a95_0x18df('0x12')](a95_0x18df('0x1a'),{'msg':a95_0x18df('0x38')});_0x1b615f['redirect']('/account');});});};exports[a95_0x18df('0x39')]=(_0x30c63c,_0x57b652,_0xc912f)=>{_0x30c63c[a95_0x18df('0x21')](a95_0x18df('0x22'),a95_0x18df('0x3a'))[a95_0x18df('0x23')]({'min':0x4});_0x30c63c[a95_0x18df('0x21')]('confirmPassword','Passwords\x20do\x20not\x20match')['equals'](_0x30c63c[a95_0x18df('0x26')][a95_0x18df('0x22')]);const _0x340595=_0x30c63c[a95_0x18df('0x2f')]();if(_0x340595){_0x30c63c['flash'](a95_0x18df('0x13'),_0x340595);return _0x57b652[a95_0x18df('0x7')](a95_0x18df('0x30'));}User_1[a95_0x18df('0x15')][a95_0x18df('0x31')](_0x30c63c[a95_0x18df('0x6')]['id'],(_0x3e35fd,_0x1740e2)=>{if(_0x3e35fd){return _0xc912f(_0x3e35fd);}_0x1740e2[a95_0x18df('0x22')]=_0x30c63c[a95_0x18df('0x26')][a95_0x18df('0x22')];_0x1740e2[a95_0x18df('0x35')](_0x3e35fd=>{if(_0x3e35fd){return _0xc912f(_0x3e35fd);}_0x30c63c[a95_0x18df('0x12')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x57b652[a95_0x18df('0x7')](a95_0x18df('0x30'));});});};exports['postDeleteAccount']=(_0x3c5726,_0x2cd461,_0x2f6a48)=>{User_1[a95_0x18df('0x15')][a95_0x18df('0x3b')]({'_id':_0x3c5726[a95_0x18df('0x6')]['id']},_0x3c194f=>{if(_0x3c194f){return _0x2f6a48(_0x3c194f);}_0x3c5726[a95_0x18df('0x1e')]();_0x3c5726[a95_0x18df('0x12')](a95_0x18df('0x3c'),{'msg':a95_0x18df('0x3d')});_0x2cd461[a95_0x18df('0x7')]('/');});};exports[a95_0x18df('0x3e')]=(_0x488e8b,_0x1f0c97,_0x1b7043)=>{const _0x3939fa=_0x488e8b['params'][a95_0x18df('0x3f')];User_1[a95_0x18df('0x15')]['findById'](_0x488e8b[a95_0x18df('0x6')]['id'],(_0x2582d2,_0x144bff)=>{if(_0x2582d2){return _0x1b7043(_0x2582d2);}_0x144bff[_0x3939fa]=undefined;_0x144bff[a95_0x18df('0x40')]=_0x144bff[a95_0x18df('0x40')][a95_0x18df('0x41')](_0x1184af=>_0x1184af[a95_0x18df('0x42')]!==_0x3939fa);_0x144bff[a95_0x18df('0x35')](_0x2582d2=>{if(_0x2582d2){return _0x1b7043(_0x2582d2);}_0x488e8b[a95_0x18df('0x12')](a95_0x18df('0x3c'),{'msg':_0x3939fa+a95_0x18df('0x43')});_0x1f0c97[a95_0x18df('0x7')](a95_0x18df('0x30'));});});};exports[a95_0x18df('0x44')]=(_0x2ca185,_0x3a2430,_0x5f52ad)=>{if(_0x2ca185[a95_0x18df('0x45')]()){return _0x3a2430[a95_0x18df('0x7')]('/');}User_1[a95_0x18df('0x15')]['findOne']({'passwordResetToken':_0x2ca185['params']['token']})[a95_0x18df('0x46')](a95_0x18df('0x47'))['gt'](Date[a95_0x18df('0x48')]())[a95_0x18df('0x49')]((_0x31a620,_0x2e5b2b)=>{if(_0x31a620){return _0x5f52ad(_0x31a620);}if(!_0x2e5b2b){_0x2ca185['flash'](a95_0x18df('0x13'),{'msg':a95_0x18df('0x4a')});return _0x3a2430['redirect'](a95_0x18df('0x4b'));}_0x3a2430[a95_0x18df('0x8')](a95_0x18df('0x4c'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x285ac6,_0x1190d2,_0x213f77)=>{_0x285ac6[a95_0x18df('0x21')](a95_0x18df('0x22'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a95_0x18df('0x23')]({'min':0x4});_0x285ac6[a95_0x18df('0x21')]('confirm','Passwords\x20must\x20match.')[a95_0x18df('0x25')](_0x285ac6[a95_0x18df('0x26')][a95_0x18df('0x22')]);const _0x32ddc2=_0x285ac6['validationErrors']();if(_0x32ddc2){_0x285ac6[a95_0x18df('0x12')](a95_0x18df('0x13'),_0x32ddc2);return _0x1190d2[a95_0x18df('0x7')]('back');}async_1[a95_0x18df('0x15')][a95_0x18df('0x4d')]([function resetPassword(_0x7e9ef7){User_1[a95_0x18df('0x15')][a95_0x18df('0x28')]({'passwordResetToken':_0x285ac6[a95_0x18df('0x4e')][a95_0x18df('0x4f')]})[a95_0x18df('0x46')](a95_0x18df('0x47'))['gt'](Date[a95_0x18df('0x48')]())[a95_0x18df('0x49')]((_0x48b800,_0x4f52ff)=>{if(_0x48b800){return _0x213f77(_0x48b800);}if(!_0x4f52ff){_0x285ac6[a95_0x18df('0x12')]('errors',{'msg':a95_0x18df('0x4a')});return _0x1190d2['redirect'](a95_0x18df('0x50'));}_0x4f52ff['password']=_0x285ac6[a95_0x18df('0x26')][a95_0x18df('0x22')];_0x4f52ff[a95_0x18df('0x51')]=undefined;_0x4f52ff[a95_0x18df('0x47')]=undefined;_0x4f52ff[a95_0x18df('0x35')](_0x48b800=>{if(_0x48b800){return _0x213f77(_0x48b800);}_0x285ac6[a95_0x18df('0x19')](_0x4f52ff,_0x48b800=>{_0x7e9ef7(_0x48b800,_0x4f52ff);});});});},function sendResetPasswordEmail(_0x349056,_0x5c3a31){const _0x2f4558=nodemailer_1[a95_0x18df('0x15')][a95_0x18df('0x52')]({'service':a95_0x18df('0x53'),'auth':{'user':process[a95_0x18df('0x54')][a95_0x18df('0x55')],'pass':process[a95_0x18df('0x54')][a95_0x18df('0x56')]}});const _0x2b6693={'to':_0x349056[a95_0x18df('0xb')],'from':a95_0x18df('0x57'),'subject':a95_0x18df('0x58'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x349056[a95_0x18df('0xb')]+a95_0x18df('0x59')};_0x2f4558[a95_0x18df('0x5a')](_0x2b6693,_0x21126d=>{_0x285ac6[a95_0x18df('0x12')](a95_0x18df('0x1a'),{'msg':a95_0x18df('0x5b')});_0x5c3a31(_0x21126d);});}],_0x366600=>{if(_0x366600){return _0x213f77(_0x366600);}_0x1190d2['redirect']('/');});};exports[a95_0x18df('0x5c')]=(_0x222e7e,_0x2050fb)=>{if(_0x222e7e[a95_0x18df('0x45')]()){return _0x2050fb[a95_0x18df('0x7')]('/');}_0x2050fb[a95_0x18df('0x8')](a95_0x18df('0x5d'),{'title':a95_0x18df('0x5e')});};exports['postForgot']=(_0x3b081c,_0x84f8fa,_0x5412dd)=>{_0x3b081c[a95_0x18df('0x21')](a95_0x18df('0xb'),a95_0x18df('0x2e'))['isEmail']();_0x3b081c['sanitize'](a95_0x18df('0xb'))[a95_0x18df('0x11')]({'gmail_remove_dots':![]});const _0x513188=_0x3b081c['validationErrors']();if(_0x513188){_0x3b081c['flash'](a95_0x18df('0x13'),_0x513188);return _0x84f8fa['redirect'](a95_0x18df('0x4b'));}async_1[a95_0x18df('0x15')][a95_0x18df('0x4d')]([function createRandomToken(_0x371434){crypto_1[a95_0x18df('0x15')][a95_0x18df('0x5f')](0x10,(_0x3b326c,_0x489f7a)=>{const _0x6284f0=_0x489f7a[a95_0x18df('0x60')](a95_0x18df('0x61'));_0x371434(_0x3b326c,_0x6284f0);});},function setRandomToken(_0x9068f9,_0x576c95){User_1[a95_0x18df('0x15')][a95_0x18df('0x28')]({'email':_0x3b081c[a95_0x18df('0x26')][a95_0x18df('0xb')]},(_0x440eaa,_0x14bab2)=>{if(_0x440eaa){return _0x576c95(_0x440eaa);}if(!_0x14bab2){_0x3b081c[a95_0x18df('0x12')](a95_0x18df('0x13'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x84f8fa[a95_0x18df('0x7')](a95_0x18df('0x4b'));}_0x14bab2[a95_0x18df('0x51')]=_0x9068f9;_0x14bab2[a95_0x18df('0x47')]=Date[a95_0x18df('0x48')]()+0x36ee80;_0x14bab2['save'](_0x440eaa=>{_0x576c95(_0x440eaa,_0x9068f9,_0x14bab2);});});},function sendForgotPasswordEmail(_0x5a4a75,_0x506c26,_0x3d3765){const _0x20fed0=nodemailer_1[a95_0x18df('0x15')][a95_0x18df('0x52')]({'service':a95_0x18df('0x53'),'auth':{'user':process[a95_0x18df('0x54')][a95_0x18df('0x55')],'pass':process['env'][a95_0x18df('0x56')]}});const _0x5337cd={'to':_0x506c26[a95_0x18df('0xb')],'from':a95_0x18df('0x62'),'subject':a95_0x18df('0x63'),'text':a95_0x18df('0x64')+_0x3b081c[a95_0x18df('0x65')][a95_0x18df('0x66')]+a95_0x18df('0x67')+_0x5a4a75+a95_0x18df('0x68')};_0x20fed0[a95_0x18df('0x5a')](_0x5337cd,_0x30ac3f=>{_0x3b081c['flash'](a95_0x18df('0x3c'),{'msg':a95_0x18df('0x69')+_0x506c26[a95_0x18df('0xb')]+a95_0x18df('0x6a')});_0x3d3765(_0x30ac3f);});}],_0x205993=>{if(_0x205993){return _0x5412dd(_0x205993);}_0x84f8fa['redirect'](a95_0x18df('0x4b'));});};