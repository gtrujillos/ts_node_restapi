var a95_0x5de8=['flash','errors','/login','default','authenticate','local','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','sanitize','profile','name','gender','location','website','code','/account','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','equals','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','Your\x20account\x20has\x20been\x20deleted.','params','tokens','kind','info','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','token','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','postForgot','/forgot','randomBytes','toString','hex','passwordResetToken','createTransport','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','defineProperty','__esModule','crypto','nodemailer','passport','../models/User','express-validator','user','redirect','render','account/login','postLogin','assert','email','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','validationErrors'];(function(_0x3dfc6b,_0x3b08d8){var _0x1a6edf=function(_0xf1524e){while(--_0xf1524e){_0x3dfc6b['push'](_0x3dfc6b['shift']());}};_0x1a6edf(++_0x3b08d8);}(a95_0x5de8,0x194));var a95_0x2993=function(_0x347707,_0xa1fa49){_0x347707=_0x347707-0x0;var _0x56dcd9=a95_0x5de8[_0x347707];return _0x56dcd9;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x894a6d){return _0x894a6d&&_0x894a6d['__esModule']?_0x894a6d:{'default':_0x894a6d};};Object[a95_0x2993('0x0')](exports,a95_0x2993('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a95_0x2993('0x2')));const nodemailer_1=__importDefault(require(a95_0x2993('0x3')));const passport_1=__importDefault(require(a95_0x2993('0x4')));const User_1=__importDefault(require(a95_0x2993('0x5')));const request=require(a95_0x2993('0x6'));exports['getLogin']=(_0x515ce3,_0x3f8842)=>{if(_0x515ce3[a95_0x2993('0x7')]){return _0x3f8842[a95_0x2993('0x8')]('/');}_0x3f8842[a95_0x2993('0x9')](a95_0x2993('0xa'),{'title':'Login'});};exports[a95_0x2993('0xb')]=(_0x38df73,_0x51ffc1,_0x30026c)=>{_0x38df73[a95_0x2993('0xc')](a95_0x2993('0xd'),'Email\x20is\x20not\x20valid')[a95_0x2993('0xe')]();_0x38df73['assert'](a95_0x2993('0xf'),a95_0x2993('0x10'))[a95_0x2993('0x11')]();_0x38df73['sanitize']('email')[a95_0x2993('0x12')]({'gmail_remove_dots':![]});const _0x1cf79=_0x38df73[a95_0x2993('0x13')]();if(_0x1cf79){_0x38df73[a95_0x2993('0x14')](a95_0x2993('0x15'),_0x1cf79);return _0x51ffc1[a95_0x2993('0x8')](a95_0x2993('0x16'));}passport_1[a95_0x2993('0x17')][a95_0x2993('0x18')](a95_0x2993('0x19'),(_0x10cdb5,_0x4da685,_0x9a00b9)=>{if(_0x10cdb5){return _0x30026c(_0x10cdb5);}if(!_0x4da685){_0x38df73[a95_0x2993('0x14')](a95_0x2993('0x15'),_0x9a00b9[a95_0x2993('0x1a')]);return _0x51ffc1[a95_0x2993('0x8')](a95_0x2993('0x16'));}_0x38df73[a95_0x2993('0x1b')](_0x4da685,_0x10cdb5=>{if(_0x10cdb5){return _0x30026c(_0x10cdb5);}_0x38df73[a95_0x2993('0x14')]('success',{'msg':a95_0x2993('0x1c')});_0x51ffc1['redirect'](_0x38df73[a95_0x2993('0x1d')]['returnTo']||'/');});})(_0x38df73,_0x51ffc1,_0x30026c);};exports[a95_0x2993('0x1e')]=(_0x2d8c4f,_0x4dced5)=>{_0x2d8c4f[a95_0x2993('0x1e')]();_0x4dced5[a95_0x2993('0x8')]('/');};exports[a95_0x2993('0x1f')]=(_0x58c924,_0x538daa)=>{if(_0x58c924['user']){return _0x538daa['redirect']('/');}_0x538daa['render'](a95_0x2993('0x20'),{'title':a95_0x2993('0x21')});};exports[a95_0x2993('0x22')]=(_0x3b965a,_0x4a14f4,_0x19800d)=>{_0x3b965a[a95_0x2993('0xc')](a95_0x2993('0xd'),'Email\x20is\x20not\x20valid')[a95_0x2993('0xe')]();_0x3b965a[a95_0x2993('0xc')](a95_0x2993('0xf'),a95_0x2993('0x23'))[a95_0x2993('0x24')]({'min':0x4});_0x3b965a[a95_0x2993('0xc')]('confirmPassword',a95_0x2993('0x25'))['equals'](_0x3b965a[a95_0x2993('0x26')][a95_0x2993('0xf')]);_0x3b965a['sanitize'](a95_0x2993('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x398295=_0x3b965a['validationErrors']();if(_0x398295){_0x3b965a[a95_0x2993('0x14')](a95_0x2993('0x15'),_0x398295);return _0x4a14f4['redirect'](a95_0x2993('0x27'));}const _0xfcbcf1=new User_1[(a95_0x2993('0x17'))]({'email':_0x3b965a[a95_0x2993('0x26')][a95_0x2993('0xd')],'password':_0x3b965a[a95_0x2993('0x26')][a95_0x2993('0xf')]});User_1[a95_0x2993('0x17')][a95_0x2993('0x28')]({'email':_0x3b965a[a95_0x2993('0x26')][a95_0x2993('0xd')]},(_0xbff23a,_0x1cddcb)=>{if(_0xbff23a){return _0x19800d(_0xbff23a);}if(_0x1cddcb){_0x3b965a[a95_0x2993('0x14')](a95_0x2993('0x15'),{'msg':a95_0x2993('0x29')});return _0x4a14f4[a95_0x2993('0x8')](a95_0x2993('0x27'));}_0xfcbcf1[a95_0x2993('0x2a')](_0xbff23a=>{if(_0xbff23a){return _0x19800d(_0xbff23a);}_0x3b965a[a95_0x2993('0x1b')](_0xfcbcf1,_0xbff23a=>{if(_0xbff23a){return _0x19800d(_0xbff23a);}_0x4a14f4[a95_0x2993('0x8')]('/');});});});};exports['getAccount']=(_0x5e7315,_0xd2856a)=>{_0xd2856a['render'](a95_0x2993('0x2b'),{'title':'Account\x20Management'});};exports[a95_0x2993('0x2c')]=(_0x21490b,_0x84a06,_0x305554)=>{_0x21490b[a95_0x2993('0xc')]('email',a95_0x2993('0x2d'))[a95_0x2993('0xe')]();_0x21490b[a95_0x2993('0x2e')](a95_0x2993('0xd'))[a95_0x2993('0x12')]({'gmail_remove_dots':![]});const _0x10d551=_0x21490b[a95_0x2993('0x13')]();if(_0x10d551){_0x21490b[a95_0x2993('0x14')](a95_0x2993('0x15'),_0x10d551);return _0x84a06['redirect']('/account');}User_1[a95_0x2993('0x17')]['findById'](_0x21490b[a95_0x2993('0x7')]['id'],(_0x51618e,_0x5d9d02)=>{if(_0x51618e){return _0x305554(_0x51618e);}_0x5d9d02[a95_0x2993('0xd')]=_0x21490b['body'][a95_0x2993('0xd')]||'';_0x5d9d02[a95_0x2993('0x2f')][a95_0x2993('0x30')]=_0x21490b[a95_0x2993('0x26')][a95_0x2993('0x30')]||'';_0x5d9d02['profile'][a95_0x2993('0x31')]=_0x21490b[a95_0x2993('0x26')]['gender']||'';_0x5d9d02[a95_0x2993('0x2f')][a95_0x2993('0x32')]=_0x21490b['body'][a95_0x2993('0x32')]||'';_0x5d9d02[a95_0x2993('0x2f')][a95_0x2993('0x33')]=_0x21490b[a95_0x2993('0x26')][a95_0x2993('0x33')]||'';_0x5d9d02[a95_0x2993('0x2a')](_0x51618e=>{if(_0x51618e){if(_0x51618e[a95_0x2993('0x34')]===0x2af8){_0x21490b['flash']('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x84a06[a95_0x2993('0x8')](a95_0x2993('0x35'));}return _0x305554(_0x51618e);}_0x21490b['flash'](a95_0x2993('0x36'),{'msg':a95_0x2993('0x37')});_0x84a06[a95_0x2993('0x8')]('/account');});});};exports[a95_0x2993('0x38')]=(_0x360a31,_0x512a34,_0x58a5e3)=>{_0x360a31['assert'](a95_0x2993('0xf'),a95_0x2993('0x23'))['len']({'min':0x4});_0x360a31[a95_0x2993('0xc')](a95_0x2993('0x39'),a95_0x2993('0x25'))[a95_0x2993('0x3a')](_0x360a31[a95_0x2993('0x26')][a95_0x2993('0xf')]);const _0x24b073=_0x360a31[a95_0x2993('0x13')]();if(_0x24b073){_0x360a31['flash'](a95_0x2993('0x15'),_0x24b073);return _0x512a34[a95_0x2993('0x8')](a95_0x2993('0x35'));}User_1['default'][a95_0x2993('0x3b')](_0x360a31[a95_0x2993('0x7')]['id'],(_0x264d1c,_0x32b1e3)=>{if(_0x264d1c){return _0x58a5e3(_0x264d1c);}_0x32b1e3[a95_0x2993('0xf')]=_0x360a31[a95_0x2993('0x26')][a95_0x2993('0xf')];_0x32b1e3[a95_0x2993('0x2a')](_0x264d1c=>{if(_0x264d1c){return _0x58a5e3(_0x264d1c);}_0x360a31[a95_0x2993('0x14')](a95_0x2993('0x36'),{'msg':a95_0x2993('0x3c')});_0x512a34[a95_0x2993('0x8')](a95_0x2993('0x35'));});});};exports[a95_0x2993('0x3d')]=(_0x18f91a,_0x41bdf6,_0x4e0c2f)=>{User_1[a95_0x2993('0x17')]['remove']({'_id':_0x18f91a[a95_0x2993('0x7')]['id']},_0x22a34f=>{if(_0x22a34f){return _0x4e0c2f(_0x22a34f);}_0x18f91a[a95_0x2993('0x1e')]();_0x18f91a[a95_0x2993('0x14')]('info',{'msg':a95_0x2993('0x3e')});_0x41bdf6['redirect']('/');});};exports['getOauthUnlink']=(_0x318c5a,_0x2c3ed5,_0x29ca81)=>{const _0x198c5e=_0x318c5a[a95_0x2993('0x3f')]['provider'];User_1[a95_0x2993('0x17')][a95_0x2993('0x3b')](_0x318c5a[a95_0x2993('0x7')]['id'],(_0x49b843,_0x52ea34)=>{if(_0x49b843){return _0x29ca81(_0x49b843);}_0x52ea34[_0x198c5e]=undefined;_0x52ea34[a95_0x2993('0x40')]=_0x52ea34[a95_0x2993('0x40')]['filter'](_0x2b2374=>_0x2b2374[a95_0x2993('0x41')]!==_0x198c5e);_0x52ea34[a95_0x2993('0x2a')](_0x49b843=>{if(_0x49b843){return _0x29ca81(_0x49b843);}_0x318c5a['flash'](a95_0x2993('0x42'),{'msg':_0x198c5e+a95_0x2993('0x43')});_0x2c3ed5[a95_0x2993('0x8')](a95_0x2993('0x35'));});});};exports['getReset']=(_0x3a8c14,_0x3ea137,_0x466f16)=>{if(_0x3a8c14[a95_0x2993('0x44')]()){return _0x3ea137[a95_0x2993('0x8')]('/');}User_1[a95_0x2993('0x17')][a95_0x2993('0x28')]({'passwordResetToken':_0x3a8c14[a95_0x2993('0x3f')]['token']})['where'](a95_0x2993('0x45'))['gt'](Date[a95_0x2993('0x46')]())[a95_0x2993('0x47')]((_0xd543e,_0x2bea1b)=>{if(_0xd543e){return _0x466f16(_0xd543e);}if(!_0x2bea1b){_0x3a8c14['flash'](a95_0x2993('0x15'),{'msg':a95_0x2993('0x48')});return _0x3ea137[a95_0x2993('0x8')]('/forgot');}_0x3ea137['render'](a95_0x2993('0x49'),{'title':a95_0x2993('0x4a')});});};exports[a95_0x2993('0x4b')]=(_0x2213f0,_0x2ca9f5,_0x623f5)=>{_0x2213f0['assert'](a95_0x2993('0xf'),a95_0x2993('0x4c'))[a95_0x2993('0x24')]({'min':0x4});_0x2213f0[a95_0x2993('0xc')](a95_0x2993('0x4d'),a95_0x2993('0x4e'))[a95_0x2993('0x3a')](_0x2213f0[a95_0x2993('0x26')][a95_0x2993('0xf')]);const _0x7b0f52=_0x2213f0[a95_0x2993('0x13')]();if(_0x7b0f52){_0x2213f0[a95_0x2993('0x14')](a95_0x2993('0x15'),_0x7b0f52);return _0x2ca9f5[a95_0x2993('0x8')](a95_0x2993('0x4f'));}async_1[a95_0x2993('0x17')][a95_0x2993('0x50')]([function resetPassword(_0x427c80){User_1[a95_0x2993('0x17')][a95_0x2993('0x28')]({'passwordResetToken':_0x2213f0['params'][a95_0x2993('0x51')]})['where'](a95_0x2993('0x45'))['gt'](Date[a95_0x2993('0x46')]())[a95_0x2993('0x47')]((_0xc66d,_0x18ff56)=>{if(_0xc66d){return _0x623f5(_0xc66d);}if(!_0x18ff56){_0x2213f0['flash'](a95_0x2993('0x15'),{'msg':a95_0x2993('0x48')});return _0x2ca9f5[a95_0x2993('0x8')](a95_0x2993('0x4f'));}_0x18ff56['password']=_0x2213f0[a95_0x2993('0x26')][a95_0x2993('0xf')];_0x18ff56['passwordResetToken']=undefined;_0x18ff56[a95_0x2993('0x45')]=undefined;_0x18ff56['save'](_0xc66d=>{if(_0xc66d){return _0x623f5(_0xc66d);}_0x2213f0[a95_0x2993('0x1b')](_0x18ff56,_0xc66d=>{_0x427c80(_0xc66d,_0x18ff56);});});});},function sendResetPasswordEmail(_0x44ac31,_0x1ce139){const _0x272655=nodemailer_1[a95_0x2993('0x17')]['createTransport']({'service':a95_0x2993('0x52'),'auth':{'user':process[a95_0x2993('0x53')][a95_0x2993('0x54')],'pass':process[a95_0x2993('0x53')][a95_0x2993('0x55')]}});const _0x284bbc={'to':_0x44ac31[a95_0x2993('0xd')],'from':a95_0x2993('0x56'),'subject':a95_0x2993('0x57'),'text':a95_0x2993('0x58')+_0x44ac31[a95_0x2993('0xd')]+a95_0x2993('0x59')};_0x272655[a95_0x2993('0x5a')](_0x284bbc,_0x3b634d=>{_0x2213f0[a95_0x2993('0x14')](a95_0x2993('0x36'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x1ce139(_0x3b634d);});}],_0x537e35=>{if(_0x537e35){return _0x623f5(_0x537e35);}_0x2ca9f5['redirect']('/');});};exports[a95_0x2993('0x5b')]=(_0x4fda67,_0x25b5d9)=>{if(_0x4fda67[a95_0x2993('0x44')]()){return _0x25b5d9[a95_0x2993('0x8')]('/');}_0x25b5d9[a95_0x2993('0x9')](a95_0x2993('0x5c'),{'title':'Forgot\x20Password'});};exports[a95_0x2993('0x5d')]=(_0x5541e7,_0x5c46e9,_0x33b448)=>{_0x5541e7[a95_0x2993('0xc')](a95_0x2993('0xd'),a95_0x2993('0x2d'))['isEmail']();_0x5541e7[a95_0x2993('0x2e')](a95_0x2993('0xd'))[a95_0x2993('0x12')]({'gmail_remove_dots':![]});const _0x4eaae3=_0x5541e7[a95_0x2993('0x13')]();if(_0x4eaae3){_0x5541e7[a95_0x2993('0x14')]('errors',_0x4eaae3);return _0x5c46e9[a95_0x2993('0x8')](a95_0x2993('0x5e'));}async_1[a95_0x2993('0x17')]['waterfall']([function createRandomToken(_0x13900d){crypto_1[a95_0x2993('0x17')][a95_0x2993('0x5f')](0x10,(_0x52f76b,_0x434b87)=>{const _0x430856=_0x434b87[a95_0x2993('0x60')](a95_0x2993('0x61'));_0x13900d(_0x52f76b,_0x430856);});},function setRandomToken(_0x503cf0,_0x39e23b){User_1[a95_0x2993('0x17')][a95_0x2993('0x28')]({'email':_0x5541e7[a95_0x2993('0x26')][a95_0x2993('0xd')]},(_0x51f866,_0x49e6bb)=>{if(_0x51f866){return _0x39e23b(_0x51f866);}if(!_0x49e6bb){_0x5541e7['flash'](a95_0x2993('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x5c46e9['redirect']('/forgot');}_0x49e6bb[a95_0x2993('0x62')]=_0x503cf0;_0x49e6bb['passwordResetExpires']=Date[a95_0x2993('0x46')]()+0x36ee80;_0x49e6bb[a95_0x2993('0x2a')](_0x51f866=>{_0x39e23b(_0x51f866,_0x503cf0,_0x49e6bb);});});},function sendForgotPasswordEmail(_0x3f6ac8,_0x20a81e,_0x2ec8e8){const _0xe1b79a=nodemailer_1[a95_0x2993('0x17')][a95_0x2993('0x63')]({'service':a95_0x2993('0x52'),'auth':{'user':process[a95_0x2993('0x53')][a95_0x2993('0x54')],'pass':process[a95_0x2993('0x53')]['SENDGRID_PASSWORD']}});const _0x5d5c0e={'to':_0x20a81e['email'],'from':a95_0x2993('0x64'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x2993('0x65')+_0x5541e7[a95_0x2993('0x66')][a95_0x2993('0x67')]+a95_0x2993('0x68')+_0x3f6ac8+a95_0x2993('0x69')};_0xe1b79a[a95_0x2993('0x5a')](_0x5d5c0e,_0x4c9fbb=>{_0x5541e7[a95_0x2993('0x14')](a95_0x2993('0x42'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x20a81e[a95_0x2993('0xd')]+'\x20with\x20further\x20instructions.'});_0x2ec8e8(_0x4c9fbb);});}],_0x33badd=>{if(_0x33badd){return _0x33b448(_0x33badd);}_0x5c46e9[a95_0x2993('0x8')]('/forgot');});};