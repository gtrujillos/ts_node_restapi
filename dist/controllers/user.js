var a201_0x4d7c=['tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','__importDefault','defineProperty','async','passport','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','sanitize','normalizeEmail','validationErrors','errors','/login','default','authenticate','local','flash','logIn','success','logout','getSignup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink'];(function(_0x3d5aee,_0x11cebe){var _0x45f83a=function(_0x33be49){while(--_0x33be49){_0x3d5aee['push'](_0x3d5aee['shift']());}};_0x45f83a(++_0x11cebe);}(a201_0x4d7c,0x8f));var a201_0x2b38=function(_0x43c954,_0x1a9140){_0x43c954=_0x43c954-0x0;var _0x2202ba=a201_0x4d7c[_0x43c954];return _0x2202ba;};'use strict';var __importDefault=this&&this[a201_0x2b38('0x0')]||function(_0x1a0182){return _0x1a0182&&_0x1a0182['__esModule']?_0x1a0182:{'default':_0x1a0182};};Object[a201_0x2b38('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a201_0x2b38('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a201_0x2b38('0x3')));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a201_0x2b38('0x4')]=(_0x1c1113,_0x3f1bf3)=>{if(_0x1c1113[a201_0x2b38('0x5')]){return _0x3f1bf3[a201_0x2b38('0x6')]('/');}_0x3f1bf3[a201_0x2b38('0x7')](a201_0x2b38('0x8'),{'title':a201_0x2b38('0x9')});};exports[a201_0x2b38('0xa')]=(_0x5506b2,_0xe55b2a,_0x163ec1)=>{_0x5506b2[a201_0x2b38('0xb')](a201_0x2b38('0xc'),a201_0x2b38('0xd'))[a201_0x2b38('0xe')]();_0x5506b2['assert'](a201_0x2b38('0xf'),'Password\x20cannot\x20be\x20blank')['notEmpty']();_0x5506b2[a201_0x2b38('0x10')](a201_0x2b38('0xc'))[a201_0x2b38('0x11')]({'gmail_remove_dots':![]});const _0x3f063f=_0x5506b2[a201_0x2b38('0x12')]();if(_0x3f063f){_0x5506b2['flash'](a201_0x2b38('0x13'),_0x3f063f);return _0xe55b2a['redirect'](a201_0x2b38('0x14'));}passport_1[a201_0x2b38('0x15')][a201_0x2b38('0x16')](a201_0x2b38('0x17'),(_0x1b90ef,_0x5991f7,_0x149876)=>{if(_0x1b90ef){return _0x163ec1(_0x1b90ef);}if(!_0x5991f7){_0x5506b2[a201_0x2b38('0x18')]('errors',_0x149876['message']);return _0xe55b2a[a201_0x2b38('0x6')](a201_0x2b38('0x14'));}_0x5506b2[a201_0x2b38('0x19')](_0x5991f7,_0x1b90ef=>{if(_0x1b90ef){return _0x163ec1(_0x1b90ef);}_0x5506b2[a201_0x2b38('0x18')](a201_0x2b38('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0xe55b2a[a201_0x2b38('0x6')](_0x5506b2['session']['returnTo']||'/');});})(_0x5506b2,_0xe55b2a,_0x163ec1);};exports[a201_0x2b38('0x1b')]=(_0xe6a8c9,_0x47044b)=>{_0xe6a8c9[a201_0x2b38('0x1b')]();_0x47044b['redirect']('/');};exports[a201_0x2b38('0x1c')]=(_0x2b11fb,_0x555429)=>{if(_0x2b11fb[a201_0x2b38('0x5')]){return _0x555429[a201_0x2b38('0x6')]('/');}_0x555429['render']('account/signup',{'title':a201_0x2b38('0x1d')});};exports[a201_0x2b38('0x1e')]=(_0x51b4d0,_0x378887,_0x590955)=>{_0x51b4d0[a201_0x2b38('0xb')](a201_0x2b38('0xc'),a201_0x2b38('0xd'))[a201_0x2b38('0xe')]();_0x51b4d0[a201_0x2b38('0xb')](a201_0x2b38('0xf'),a201_0x2b38('0x1f'))['len']({'min':0x4});_0x51b4d0[a201_0x2b38('0xb')](a201_0x2b38('0x20'),a201_0x2b38('0x21'))[a201_0x2b38('0x22')](_0x51b4d0[a201_0x2b38('0x23')][a201_0x2b38('0xf')]);_0x51b4d0[a201_0x2b38('0x10')](a201_0x2b38('0xc'))[a201_0x2b38('0x11')]({'gmail_remove_dots':![]});const _0x1ec17d=_0x51b4d0['validationErrors']();if(_0x1ec17d){_0x51b4d0[a201_0x2b38('0x18')](a201_0x2b38('0x13'),_0x1ec17d);return _0x378887[a201_0x2b38('0x6')](a201_0x2b38('0x24'));}const _0x19a5f4=new User_1[(a201_0x2b38('0x15'))]({'email':_0x51b4d0[a201_0x2b38('0x23')][a201_0x2b38('0xc')],'password':_0x51b4d0[a201_0x2b38('0x23')][a201_0x2b38('0xf')]});User_1[a201_0x2b38('0x15')]['findOne']({'email':_0x51b4d0[a201_0x2b38('0x23')]['email']},(_0xefc3a3,_0x2f9ec4)=>{if(_0xefc3a3){return _0x590955(_0xefc3a3);}if(_0x2f9ec4){_0x51b4d0['flash'](a201_0x2b38('0x13'),{'msg':a201_0x2b38('0x25')});return _0x378887[a201_0x2b38('0x6')](a201_0x2b38('0x24'));}_0x19a5f4[a201_0x2b38('0x26')](_0xefc3a3=>{if(_0xefc3a3){return _0x590955(_0xefc3a3);}_0x51b4d0[a201_0x2b38('0x19')](_0x19a5f4,_0xefc3a3=>{if(_0xefc3a3){return _0x590955(_0xefc3a3);}_0x378887['redirect']('/');});});});};exports[a201_0x2b38('0x27')]=(_0x48a938,_0x183950)=>{_0x183950[a201_0x2b38('0x7')](a201_0x2b38('0x28'),{'title':a201_0x2b38('0x29')});};exports[a201_0x2b38('0x2a')]=(_0x2a7047,_0x314d51,_0x39e678)=>{_0x2a7047['assert'](a201_0x2b38('0xc'),a201_0x2b38('0x2b'))[a201_0x2b38('0xe')]();_0x2a7047[a201_0x2b38('0x10')](a201_0x2b38('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3aa2fd=_0x2a7047[a201_0x2b38('0x12')]();if(_0x3aa2fd){_0x2a7047[a201_0x2b38('0x18')](a201_0x2b38('0x13'),_0x3aa2fd);return _0x314d51[a201_0x2b38('0x6')](a201_0x2b38('0x2c'));}User_1[a201_0x2b38('0x15')][a201_0x2b38('0x2d')](_0x2a7047['user']['id'],(_0x451b79,_0x1fce94)=>{if(_0x451b79){return _0x39e678(_0x451b79);}_0x1fce94[a201_0x2b38('0xc')]=_0x2a7047[a201_0x2b38('0x23')]['email']||'';_0x1fce94[a201_0x2b38('0x2e')][a201_0x2b38('0x2f')]=_0x2a7047[a201_0x2b38('0x23')]['name']||'';_0x1fce94[a201_0x2b38('0x2e')][a201_0x2b38('0x30')]=_0x2a7047['body'][a201_0x2b38('0x30')]||'';_0x1fce94[a201_0x2b38('0x2e')][a201_0x2b38('0x31')]=_0x2a7047[a201_0x2b38('0x23')][a201_0x2b38('0x31')]||'';_0x1fce94[a201_0x2b38('0x2e')][a201_0x2b38('0x32')]=_0x2a7047[a201_0x2b38('0x23')]['website']||'';_0x1fce94['save'](_0x451b79=>{if(_0x451b79){if(_0x451b79[a201_0x2b38('0x33')]===0x2af8){_0x2a7047[a201_0x2b38('0x18')]('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x314d51[a201_0x2b38('0x6')](a201_0x2b38('0x2c'));}return _0x39e678(_0x451b79);}_0x2a7047[a201_0x2b38('0x18')](a201_0x2b38('0x1a'),{'msg':a201_0x2b38('0x34')});_0x314d51[a201_0x2b38('0x6')](a201_0x2b38('0x2c'));});});};exports['postUpdatePassword']=(_0x114bc0,_0x5abe6f,_0x210906)=>{_0x114bc0['assert'](a201_0x2b38('0xf'),a201_0x2b38('0x1f'))['len']({'min':0x4});_0x114bc0[a201_0x2b38('0xb')]('confirmPassword','Passwords\x20do\x20not\x20match')[a201_0x2b38('0x22')](_0x114bc0[a201_0x2b38('0x23')][a201_0x2b38('0xf')]);const _0x5f50ee=_0x114bc0[a201_0x2b38('0x12')]();if(_0x5f50ee){_0x114bc0[a201_0x2b38('0x18')](a201_0x2b38('0x13'),_0x5f50ee);return _0x5abe6f[a201_0x2b38('0x6')](a201_0x2b38('0x2c'));}User_1['default'][a201_0x2b38('0x2d')](_0x114bc0[a201_0x2b38('0x5')]['id'],(_0x511ebc,_0x545df2)=>{if(_0x511ebc){return _0x210906(_0x511ebc);}_0x545df2['password']=_0x114bc0[a201_0x2b38('0x23')][a201_0x2b38('0xf')];_0x545df2[a201_0x2b38('0x26')](_0x511ebc=>{if(_0x511ebc){return _0x210906(_0x511ebc);}_0x114bc0['flash'](a201_0x2b38('0x1a'),{'msg':a201_0x2b38('0x35')});_0x5abe6f['redirect'](a201_0x2b38('0x2c'));});});};exports[a201_0x2b38('0x36')]=(_0x24c3e1,_0x56065a,_0x42704c)=>{User_1[a201_0x2b38('0x15')][a201_0x2b38('0x37')]({'_id':_0x24c3e1[a201_0x2b38('0x5')]['id']},_0x3f8a9f=>{if(_0x3f8a9f){return _0x42704c(_0x3f8a9f);}_0x24c3e1['logout']();_0x24c3e1[a201_0x2b38('0x18')](a201_0x2b38('0x38'),{'msg':a201_0x2b38('0x39')});_0x56065a[a201_0x2b38('0x6')]('/');});};exports[a201_0x2b38('0x3a')]=(_0x54bfb7,_0x9ecae3,_0x57e289)=>{const _0x45d743=_0x54bfb7['params']['provider'];User_1[a201_0x2b38('0x15')]['findById'](_0x54bfb7['user']['id'],(_0x343cf4,_0x166c80)=>{if(_0x343cf4){return _0x57e289(_0x343cf4);}_0x166c80[_0x45d743]=undefined;_0x166c80[a201_0x2b38('0x3b')]=_0x166c80['tokens']['filter'](_0x5a8a95=>_0x5a8a95[a201_0x2b38('0x3c')]!==_0x45d743);_0x166c80[a201_0x2b38('0x26')](_0x343cf4=>{if(_0x343cf4){return _0x57e289(_0x343cf4);}_0x54bfb7[a201_0x2b38('0x18')](a201_0x2b38('0x38'),{'msg':_0x45d743+a201_0x2b38('0x3d')});_0x9ecae3['redirect'](a201_0x2b38('0x2c'));});});};exports[a201_0x2b38('0x3e')]=(_0x4be1e6,_0x1ebd80,_0x29cbb9)=>{if(_0x4be1e6[a201_0x2b38('0x3f')]()){return _0x1ebd80['redirect']('/');}User_1[a201_0x2b38('0x15')][a201_0x2b38('0x40')]({'passwordResetToken':_0x4be1e6['params'][a201_0x2b38('0x41')]})[a201_0x2b38('0x42')](a201_0x2b38('0x43'))['gt'](Date[a201_0x2b38('0x44')]())[a201_0x2b38('0x45')]((_0x5c3405,_0xedaa82)=>{if(_0x5c3405){return _0x29cbb9(_0x5c3405);}if(!_0xedaa82){_0x4be1e6[a201_0x2b38('0x18')](a201_0x2b38('0x13'),{'msg':a201_0x2b38('0x46')});return _0x1ebd80['redirect'](a201_0x2b38('0x47'));}_0x1ebd80[a201_0x2b38('0x7')](a201_0x2b38('0x48'),{'title':a201_0x2b38('0x49')});});};exports['postReset']=(_0x26b26f,_0x28d971,_0x74d1c)=>{_0x26b26f[a201_0x2b38('0xb')]('password',a201_0x2b38('0x4a'))[a201_0x2b38('0x4b')]({'min':0x4});_0x26b26f[a201_0x2b38('0xb')](a201_0x2b38('0x4c'),a201_0x2b38('0x4d'))[a201_0x2b38('0x22')](_0x26b26f['body']['password']);const _0x59ad15=_0x26b26f[a201_0x2b38('0x12')]();if(_0x59ad15){_0x26b26f['flash']('errors',_0x59ad15);return _0x28d971[a201_0x2b38('0x6')](a201_0x2b38('0x4e'));}async_1['default'][a201_0x2b38('0x4f')]([function resetPassword(_0x2d42b2){User_1[a201_0x2b38('0x15')][a201_0x2b38('0x40')]({'passwordResetToken':_0x26b26f['params'][a201_0x2b38('0x41')]})[a201_0x2b38('0x42')]('passwordResetExpires')['gt'](Date[a201_0x2b38('0x44')]())[a201_0x2b38('0x45')]((_0x38c2d5,_0x5de45b)=>{if(_0x38c2d5){return _0x74d1c(_0x38c2d5);}if(!_0x5de45b){_0x26b26f[a201_0x2b38('0x18')](a201_0x2b38('0x13'),{'msg':a201_0x2b38('0x46')});return _0x28d971['redirect'](a201_0x2b38('0x4e'));}_0x5de45b[a201_0x2b38('0xf')]=_0x26b26f[a201_0x2b38('0x23')][a201_0x2b38('0xf')];_0x5de45b[a201_0x2b38('0x50')]=undefined;_0x5de45b[a201_0x2b38('0x43')]=undefined;_0x5de45b['save'](_0x38c2d5=>{if(_0x38c2d5){return _0x74d1c(_0x38c2d5);}_0x26b26f[a201_0x2b38('0x19')](_0x5de45b,_0x38c2d5=>{_0x2d42b2(_0x38c2d5,_0x5de45b);});});});},function sendResetPasswordEmail(_0x7fdd3a,_0x4d42e2){const _0x252056=nodemailer_1[a201_0x2b38('0x15')]['createTransport']({'service':a201_0x2b38('0x51'),'auth':{'user':process[a201_0x2b38('0x52')][a201_0x2b38('0x53')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x54ed71={'to':_0x7fdd3a[a201_0x2b38('0xc')],'from':a201_0x2b38('0x54'),'subject':a201_0x2b38('0x55'),'text':a201_0x2b38('0x56')+_0x7fdd3a['email']+a201_0x2b38('0x57')};_0x252056[a201_0x2b38('0x58')](_0x54ed71,_0x4fba82=>{_0x26b26f['flash']('success',{'msg':a201_0x2b38('0x59')});_0x4d42e2(_0x4fba82);});}],_0x49665b=>{if(_0x49665b){return _0x74d1c(_0x49665b);}_0x28d971[a201_0x2b38('0x6')]('/');});};exports['getForgot']=(_0x5476fd,_0x36c84a)=>{if(_0x5476fd['isAuthenticated']()){return _0x36c84a[a201_0x2b38('0x6')]('/');}_0x36c84a[a201_0x2b38('0x7')](a201_0x2b38('0x5a'),{'title':'Forgot\x20Password'});};exports[a201_0x2b38('0x5b')]=(_0x37d3ac,_0x456072,_0x22188b)=>{_0x37d3ac['assert'](a201_0x2b38('0xc'),a201_0x2b38('0x2b'))[a201_0x2b38('0xe')]();_0x37d3ac['sanitize'](a201_0x2b38('0xc'))[a201_0x2b38('0x11')]({'gmail_remove_dots':![]});const _0x305e44=_0x37d3ac[a201_0x2b38('0x12')]();if(_0x305e44){_0x37d3ac[a201_0x2b38('0x18')]('errors',_0x305e44);return _0x456072[a201_0x2b38('0x6')](a201_0x2b38('0x47'));}async_1[a201_0x2b38('0x15')]['waterfall']([function createRandomToken(_0x3c7dc2){crypto_1[a201_0x2b38('0x15')][a201_0x2b38('0x5c')](0x10,(_0x244f76,_0x1ad2be)=>{const _0x4aad18=_0x1ad2be['toString'](a201_0x2b38('0x5d'));_0x3c7dc2(_0x244f76,_0x4aad18);});},function setRandomToken(_0x10f465,_0x4d829c){User_1[a201_0x2b38('0x15')]['findOne']({'email':_0x37d3ac[a201_0x2b38('0x23')][a201_0x2b38('0xc')]},(_0x4a8e9d,_0x51b989)=>{if(_0x4a8e9d){return _0x4d829c(_0x4a8e9d);}if(!_0x51b989){_0x37d3ac[a201_0x2b38('0x18')](a201_0x2b38('0x13'),{'msg':a201_0x2b38('0x5e')});return _0x456072['redirect'](a201_0x2b38('0x47'));}_0x51b989['passwordResetToken']=_0x10f465;_0x51b989[a201_0x2b38('0x43')]=Date[a201_0x2b38('0x44')]()+0x36ee80;_0x51b989['save'](_0x4a8e9d=>{_0x4d829c(_0x4a8e9d,_0x10f465,_0x51b989);});});},function sendForgotPasswordEmail(_0x2b61be,_0xb26ab5,_0x1692ef){const _0x18aea1=nodemailer_1['default']['createTransport']({'service':a201_0x2b38('0x51'),'auth':{'user':process[a201_0x2b38('0x52')]['SENDGRID_USER'],'pass':process['env'][a201_0x2b38('0x5f')]}});const _0x406c97={'to':_0xb26ab5['email'],'from':a201_0x2b38('0x60'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x37d3ac[a201_0x2b38('0x61')][a201_0x2b38('0x62')]+a201_0x2b38('0x63')+_0x2b61be+a201_0x2b38('0x64')};_0x18aea1[a201_0x2b38('0x58')](_0x406c97,_0x411aa7=>{_0x37d3ac[a201_0x2b38('0x18')](a201_0x2b38('0x38'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0xb26ab5[a201_0x2b38('0xc')]+'\x20with\x20further\x20instructions.'});_0x1692ef(_0x411aa7);});}],_0x5f184c=>{if(_0x5f184c){return _0x22188b(_0x5f184c);}_0x456072['redirect'](a201_0x2b38('0x47'));});};