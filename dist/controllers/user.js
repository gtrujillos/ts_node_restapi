var a201_0x5a5e=['Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','confirm','Passwords\x20must\x20match.','back','waterfall','now','createTransport','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','express-validator','getLogin','user','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','redirect','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount'];(function(_0x36967a,_0xc006a7){var _0xd971d=function(_0x182dd4){while(--_0x182dd4){_0x36967a['push'](_0x36967a['shift']());}};_0xd971d(++_0xc006a7);}(a201_0x5a5e,0x117));var a201_0x4e8c=function(_0x81c701,_0x3326cc){_0x81c701=_0x81c701-0x0;var _0x2d4553=a201_0x5a5e[_0x81c701];return _0x2d4553;};'use strict';var __importDefault=this&&this[a201_0x4e8c('0x0')]||function(_0x1fa993){return _0x1fa993&&_0x1fa993[a201_0x4e8c('0x1')]?_0x1fa993:{'default':_0x1fa993};};Object[a201_0x4e8c('0x2')](exports,a201_0x4e8c('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a201_0x4e8c('0x3')));const nodemailer_1=__importDefault(require(a201_0x4e8c('0x4')));const passport_1=__importDefault(require(a201_0x4e8c('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a201_0x4e8c('0x6'));exports[a201_0x4e8c('0x7')]=(_0x1597aa,_0x4e5197)=>{if(_0x1597aa[a201_0x4e8c('0x8')]){return _0x4e5197['redirect']('/');}_0x4e5197[a201_0x4e8c('0x9')]('account/login',{'title':a201_0x4e8c('0xa')});};exports[a201_0x4e8c('0xb')]=(_0x26a0b6,_0x4397ef,_0x571301)=>{_0x26a0b6[a201_0x4e8c('0xc')](a201_0x4e8c('0xd'),a201_0x4e8c('0xe'))[a201_0x4e8c('0xf')]();_0x26a0b6[a201_0x4e8c('0xc')](a201_0x4e8c('0x10'),a201_0x4e8c('0x11'))[a201_0x4e8c('0x12')]();_0x26a0b6[a201_0x4e8c('0x13')](a201_0x4e8c('0xd'))[a201_0x4e8c('0x14')]({'gmail_remove_dots':![]});const _0x459647=_0x26a0b6[a201_0x4e8c('0x15')]();if(_0x459647){_0x26a0b6[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),_0x459647);return _0x4397ef[a201_0x4e8c('0x18')](a201_0x4e8c('0x19'));}passport_1[a201_0x4e8c('0x1a')][a201_0x4e8c('0x1b')](a201_0x4e8c('0x1c'),(_0x3649aa,_0x23756c,_0x40a026)=>{if(_0x3649aa){return _0x571301(_0x3649aa);}if(!_0x23756c){_0x26a0b6[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),_0x40a026[a201_0x4e8c('0x1d')]);return _0x4397ef[a201_0x4e8c('0x18')](a201_0x4e8c('0x19'));}_0x26a0b6[a201_0x4e8c('0x1e')](_0x23756c,_0x3649aa=>{if(_0x3649aa){return _0x571301(_0x3649aa);}_0x26a0b6['flash'](a201_0x4e8c('0x1f'),{'msg':a201_0x4e8c('0x20')});_0x4397ef[a201_0x4e8c('0x18')](_0x26a0b6[a201_0x4e8c('0x21')]['returnTo']||'/');});})(_0x26a0b6,_0x4397ef,_0x571301);};exports[a201_0x4e8c('0x22')]=(_0x55e94d,_0x39bbe3)=>{_0x55e94d['logout']();_0x39bbe3[a201_0x4e8c('0x18')]('/');};exports[a201_0x4e8c('0x23')]=(_0x3c1e2c,_0x54e7f5)=>{if(_0x3c1e2c[a201_0x4e8c('0x8')]){return _0x54e7f5[a201_0x4e8c('0x18')]('/');}_0x54e7f5['render'](a201_0x4e8c('0x24'),{'title':'Create\x20Account'});};exports['postSignup']=(_0x31dbec,_0x710dbe,_0x53d28a)=>{_0x31dbec[a201_0x4e8c('0xc')](a201_0x4e8c('0xd'),'Email\x20is\x20not\x20valid')[a201_0x4e8c('0xf')]();_0x31dbec[a201_0x4e8c('0xc')](a201_0x4e8c('0x10'),a201_0x4e8c('0x25'))[a201_0x4e8c('0x26')]({'min':0x4});_0x31dbec[a201_0x4e8c('0xc')](a201_0x4e8c('0x27'),a201_0x4e8c('0x28'))[a201_0x4e8c('0x29')](_0x31dbec[a201_0x4e8c('0x2a')][a201_0x4e8c('0x10')]);_0x31dbec[a201_0x4e8c('0x13')](a201_0x4e8c('0xd'))[a201_0x4e8c('0x14')]({'gmail_remove_dots':![]});const _0xce699e=_0x31dbec[a201_0x4e8c('0x15')]();if(_0xce699e){_0x31dbec[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),_0xce699e);return _0x710dbe['redirect'](a201_0x4e8c('0x2b'));}const _0x1309f0=new User_1[(a201_0x4e8c('0x1a'))]({'email':_0x31dbec['body']['email'],'password':_0x31dbec[a201_0x4e8c('0x2a')][a201_0x4e8c('0x10')]});User_1[a201_0x4e8c('0x1a')][a201_0x4e8c('0x2c')]({'email':_0x31dbec['body'][a201_0x4e8c('0xd')]},(_0x57f80c,_0x4b8551)=>{if(_0x57f80c){return _0x53d28a(_0x57f80c);}if(_0x4b8551){_0x31dbec[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),{'msg':a201_0x4e8c('0x2d')});return _0x710dbe[a201_0x4e8c('0x18')](a201_0x4e8c('0x2b'));}_0x1309f0[a201_0x4e8c('0x2e')](_0x57f80c=>{if(_0x57f80c){return _0x53d28a(_0x57f80c);}_0x31dbec[a201_0x4e8c('0x1e')](_0x1309f0,_0x57f80c=>{if(_0x57f80c){return _0x53d28a(_0x57f80c);}_0x710dbe[a201_0x4e8c('0x18')]('/');});});});};exports[a201_0x4e8c('0x2f')]=(_0xe2ae37,_0x34aa2e)=>{_0x34aa2e[a201_0x4e8c('0x9')]('account/profile',{'title':a201_0x4e8c('0x30')});};exports[a201_0x4e8c('0x31')]=(_0x1e28af,_0x249714,_0x15dadc)=>{_0x1e28af[a201_0x4e8c('0xc')](a201_0x4e8c('0xd'),a201_0x4e8c('0x32'))['isEmail']();_0x1e28af['sanitize'](a201_0x4e8c('0xd'))[a201_0x4e8c('0x14')]({'gmail_remove_dots':![]});const _0x2f95e3=_0x1e28af[a201_0x4e8c('0x15')]();if(_0x2f95e3){_0x1e28af[a201_0x4e8c('0x16')]('errors',_0x2f95e3);return _0x249714[a201_0x4e8c('0x18')](a201_0x4e8c('0x33'));}User_1[a201_0x4e8c('0x1a')][a201_0x4e8c('0x34')](_0x1e28af[a201_0x4e8c('0x8')]['id'],(_0x129d9a,_0x333413)=>{if(_0x129d9a){return _0x15dadc(_0x129d9a);}_0x333413[a201_0x4e8c('0xd')]=_0x1e28af[a201_0x4e8c('0x2a')][a201_0x4e8c('0xd')]||'';_0x333413[a201_0x4e8c('0x35')][a201_0x4e8c('0x36')]=_0x1e28af[a201_0x4e8c('0x2a')][a201_0x4e8c('0x36')]||'';_0x333413[a201_0x4e8c('0x35')][a201_0x4e8c('0x37')]=_0x1e28af[a201_0x4e8c('0x2a')][a201_0x4e8c('0x37')]||'';_0x333413[a201_0x4e8c('0x35')][a201_0x4e8c('0x38')]=_0x1e28af[a201_0x4e8c('0x2a')][a201_0x4e8c('0x38')]||'';_0x333413['profile'][a201_0x4e8c('0x39')]=_0x1e28af[a201_0x4e8c('0x2a')][a201_0x4e8c('0x39')]||'';_0x333413[a201_0x4e8c('0x2e')](_0x129d9a=>{if(_0x129d9a){if(_0x129d9a[a201_0x4e8c('0x3a')]===0x2af8){_0x1e28af[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),{'msg':a201_0x4e8c('0x3b')});return _0x249714[a201_0x4e8c('0x18')](a201_0x4e8c('0x33'));}return _0x15dadc(_0x129d9a);}_0x1e28af[a201_0x4e8c('0x16')]('success',{'msg':a201_0x4e8c('0x3c')});_0x249714[a201_0x4e8c('0x18')]('/account');});});};exports['postUpdatePassword']=(_0x570976,_0x2f7b8b,_0xc93ad4)=>{_0x570976[a201_0x4e8c('0xc')]('password',a201_0x4e8c('0x25'))[a201_0x4e8c('0x26')]({'min':0x4});_0x570976[a201_0x4e8c('0xc')](a201_0x4e8c('0x27'),a201_0x4e8c('0x28'))[a201_0x4e8c('0x29')](_0x570976[a201_0x4e8c('0x2a')][a201_0x4e8c('0x10')]);const _0xd7aae5=_0x570976[a201_0x4e8c('0x15')]();if(_0xd7aae5){_0x570976[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),_0xd7aae5);return _0x2f7b8b[a201_0x4e8c('0x18')](a201_0x4e8c('0x33'));}User_1[a201_0x4e8c('0x1a')]['findById'](_0x570976[a201_0x4e8c('0x8')]['id'],(_0x4a26f9,_0x25e8f0)=>{if(_0x4a26f9){return _0xc93ad4(_0x4a26f9);}_0x25e8f0[a201_0x4e8c('0x10')]=_0x570976[a201_0x4e8c('0x2a')][a201_0x4e8c('0x10')];_0x25e8f0['save'](_0x4a26f9=>{if(_0x4a26f9){return _0xc93ad4(_0x4a26f9);}_0x570976[a201_0x4e8c('0x16')](a201_0x4e8c('0x1f'),{'msg':a201_0x4e8c('0x3d')});_0x2f7b8b[a201_0x4e8c('0x18')](a201_0x4e8c('0x33'));});});};exports[a201_0x4e8c('0x3e')]=(_0x55b276,_0x32fd4c,_0x145083)=>{User_1['default'][a201_0x4e8c('0x3f')]({'_id':_0x55b276[a201_0x4e8c('0x8')]['id']},_0x1118c3=>{if(_0x1118c3){return _0x145083(_0x1118c3);}_0x55b276['logout']();_0x55b276[a201_0x4e8c('0x16')](a201_0x4e8c('0x40'),{'msg':a201_0x4e8c('0x41')});_0x32fd4c[a201_0x4e8c('0x18')]('/');});};exports[a201_0x4e8c('0x42')]=(_0x43addf,_0x24489c,_0x31b949)=>{const _0x5b3e9b=_0x43addf[a201_0x4e8c('0x43')][a201_0x4e8c('0x44')];User_1[a201_0x4e8c('0x1a')]['findById'](_0x43addf[a201_0x4e8c('0x8')]['id'],(_0x389205,_0x5bccc2)=>{if(_0x389205){return _0x31b949(_0x389205);}_0x5bccc2[_0x5b3e9b]=undefined;_0x5bccc2[a201_0x4e8c('0x45')]=_0x5bccc2['tokens']['filter'](_0x53e3b5=>_0x53e3b5[a201_0x4e8c('0x46')]!==_0x5b3e9b);_0x5bccc2['save'](_0x389205=>{if(_0x389205){return _0x31b949(_0x389205);}_0x43addf[a201_0x4e8c('0x16')](a201_0x4e8c('0x40'),{'msg':_0x5b3e9b+a201_0x4e8c('0x47')});_0x24489c[a201_0x4e8c('0x18')]('/account');});});};exports[a201_0x4e8c('0x48')]=(_0x595506,_0x5cd86c,_0x53eb2f)=>{if(_0x595506[a201_0x4e8c('0x49')]()){return _0x5cd86c[a201_0x4e8c('0x18')]('/');}User_1['default'][a201_0x4e8c('0x2c')]({'passwordResetToken':_0x595506[a201_0x4e8c('0x43')][a201_0x4e8c('0x4a')]})[a201_0x4e8c('0x4b')](a201_0x4e8c('0x4c'))['gt'](Date['now']())['exec']((_0x3ad14d,_0x2b15c3)=>{if(_0x3ad14d){return _0x53eb2f(_0x3ad14d);}if(!_0x2b15c3){_0x595506[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),{'msg':a201_0x4e8c('0x4d')});return _0x5cd86c[a201_0x4e8c('0x18')]('/forgot');}_0x5cd86c[a201_0x4e8c('0x9')](a201_0x4e8c('0x4e'),{'title':a201_0x4e8c('0x4f')});});};exports['postReset']=(_0xfbf954,_0xb29503,_0x7b26c6)=>{_0xfbf954['assert'](a201_0x4e8c('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a201_0x4e8c('0x26')]({'min':0x4});_0xfbf954[a201_0x4e8c('0xc')](a201_0x4e8c('0x50'),a201_0x4e8c('0x51'))[a201_0x4e8c('0x29')](_0xfbf954[a201_0x4e8c('0x2a')][a201_0x4e8c('0x10')]);const _0x51d498=_0xfbf954['validationErrors']();if(_0x51d498){_0xfbf954[a201_0x4e8c('0x16')](a201_0x4e8c('0x17'),_0x51d498);return _0xb29503[a201_0x4e8c('0x18')](a201_0x4e8c('0x52'));}async_1[a201_0x4e8c('0x1a')][a201_0x4e8c('0x53')]([function resetPassword(_0x33f511){User_1[a201_0x4e8c('0x1a')][a201_0x4e8c('0x2c')]({'passwordResetToken':_0xfbf954[a201_0x4e8c('0x43')][a201_0x4e8c('0x4a')]})['where']('passwordResetExpires')['gt'](Date[a201_0x4e8c('0x54')]())['exec']((_0x1d4c82,_0x5d6fab)=>{if(_0x1d4c82){return _0x7b26c6(_0x1d4c82);}if(!_0x5d6fab){_0xfbf954[a201_0x4e8c('0x16')]('errors',{'msg':a201_0x4e8c('0x4d')});return _0xb29503[a201_0x4e8c('0x18')](a201_0x4e8c('0x52'));}_0x5d6fab[a201_0x4e8c('0x10')]=_0xfbf954['body'][a201_0x4e8c('0x10')];_0x5d6fab['passwordResetToken']=undefined;_0x5d6fab[a201_0x4e8c('0x4c')]=undefined;_0x5d6fab[a201_0x4e8c('0x2e')](_0x1d4c82=>{if(_0x1d4c82){return _0x7b26c6(_0x1d4c82);}_0xfbf954[a201_0x4e8c('0x1e')](_0x5d6fab,_0x1d4c82=>{_0x33f511(_0x1d4c82,_0x5d6fab);});});});},function sendResetPasswordEmail(_0x337ea5,_0x5ddea9){const _0x466d44=nodemailer_1[a201_0x4e8c('0x1a')][a201_0x4e8c('0x55')]({'service':a201_0x4e8c('0x56'),'auth':{'user':process['env'][a201_0x4e8c('0x57')],'pass':process[a201_0x4e8c('0x58')][a201_0x4e8c('0x59')]}});const _0x3739f5={'to':_0x337ea5[a201_0x4e8c('0xd')],'from':'express-ts@starter.com','subject':a201_0x4e8c('0x5a'),'text':a201_0x4e8c('0x5b')+_0x337ea5['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0x466d44[a201_0x4e8c('0x5c')](_0x3739f5,_0x4c8cfc=>{_0xfbf954[a201_0x4e8c('0x16')](a201_0x4e8c('0x1f'),{'msg':a201_0x4e8c('0x5d')});_0x5ddea9(_0x4c8cfc);});}],_0xf28b7a=>{if(_0xf28b7a){return _0x7b26c6(_0xf28b7a);}_0xb29503['redirect']('/');});};exports[a201_0x4e8c('0x5e')]=(_0x24a02b,_0x37038d)=>{if(_0x24a02b[a201_0x4e8c('0x49')]()){return _0x37038d[a201_0x4e8c('0x18')]('/');}_0x37038d[a201_0x4e8c('0x9')](a201_0x4e8c('0x5f'),{'title':a201_0x4e8c('0x60')});};exports[a201_0x4e8c('0x61')]=(_0x2797e9,_0x45983e,_0x30050c)=>{_0x2797e9[a201_0x4e8c('0xc')](a201_0x4e8c('0xd'),a201_0x4e8c('0x32'))['isEmail']();_0x2797e9[a201_0x4e8c('0x13')](a201_0x4e8c('0xd'))[a201_0x4e8c('0x14')]({'gmail_remove_dots':![]});const _0x2ce7a4=_0x2797e9[a201_0x4e8c('0x15')]();if(_0x2ce7a4){_0x2797e9['flash'](a201_0x4e8c('0x17'),_0x2ce7a4);return _0x45983e[a201_0x4e8c('0x18')](a201_0x4e8c('0x62'));}async_1['default'][a201_0x4e8c('0x53')]([function createRandomToken(_0x2b8729){crypto_1['default'][a201_0x4e8c('0x63')](0x10,(_0x1c6e00,_0x29dd4f)=>{const _0x4b0624=_0x29dd4f[a201_0x4e8c('0x64')](a201_0x4e8c('0x65'));_0x2b8729(_0x1c6e00,_0x4b0624);});},function setRandomToken(_0xdc863e,_0x41ecdd){User_1[a201_0x4e8c('0x1a')][a201_0x4e8c('0x2c')]({'email':_0x2797e9[a201_0x4e8c('0x2a')][a201_0x4e8c('0xd')]},(_0x53b11e,_0x270dee)=>{if(_0x53b11e){return _0x41ecdd(_0x53b11e);}if(!_0x270dee){_0x2797e9[a201_0x4e8c('0x16')]('errors',{'msg':a201_0x4e8c('0x66')});return _0x45983e[a201_0x4e8c('0x18')](a201_0x4e8c('0x62'));}_0x270dee[a201_0x4e8c('0x67')]=_0xdc863e;_0x270dee[a201_0x4e8c('0x4c')]=Date['now']()+0x36ee80;_0x270dee[a201_0x4e8c('0x2e')](_0x53b11e=>{_0x41ecdd(_0x53b11e,_0xdc863e,_0x270dee);});});},function sendForgotPasswordEmail(_0x1a7cf8,_0x4f6fab,_0x2fb7a3){const _0x52845a=nodemailer_1['default']['createTransport']({'service':a201_0x4e8c('0x56'),'auth':{'user':process['env'][a201_0x4e8c('0x57')],'pass':process['env'][a201_0x4e8c('0x59')]}});const _0x217dde={'to':_0x4f6fab[a201_0x4e8c('0xd')],'from':a201_0x4e8c('0x68'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a201_0x4e8c('0x69')+_0x2797e9[a201_0x4e8c('0x6a')][a201_0x4e8c('0x6b')]+'/reset/'+_0x1a7cf8+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x52845a[a201_0x4e8c('0x5c')](_0x217dde,_0x3cc0b6=>{_0x2797e9[a201_0x4e8c('0x16')](a201_0x4e8c('0x40'),{'msg':a201_0x4e8c('0x6c')+_0x4f6fab['email']+'\x20with\x20further\x20instructions.'});_0x2fb7a3(_0x3cc0b6);});}],_0x1dcf76=>{if(_0x1dcf76){return _0x30050c(_0x1dcf76);}_0x45983e[a201_0x4e8c('0x18')](a201_0x4e8c('0x62'));});};