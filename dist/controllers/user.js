var a95_0x19f3=['info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','waterfall','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','toString','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','Create\x20Account','postSignup','password','len','body','sanitize','findOne','/signup','save','logIn','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','postDeleteAccount','remove','getOauthUnlink','params','tokens','filter','kind'];(function(_0x512f2b,_0x6985){var _0x24254e=function(_0x31d6e2){while(--_0x31d6e2){_0x512f2b['push'](_0x512f2b['shift']());}};_0x24254e(++_0x6985);}(a95_0x19f3,0x161));var a95_0x3951=function(_0x12cc6a,_0x1c8c72){_0x12cc6a=_0x12cc6a-0x0;var _0x4c3f70=a95_0x19f3[_0x12cc6a];return _0x4c3f70;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x302b23){return _0x302b23&&_0x302b23[a95_0x3951('0x0')]?_0x302b23:{'default':_0x302b23};};Object[a95_0x3951('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a95_0x3951('0x2')));const crypto_1=__importDefault(require(a95_0x3951('0x3')));const nodemailer_1=__importDefault(require(a95_0x3951('0x4')));const passport_1=__importDefault(require(a95_0x3951('0x5')));const User_1=__importDefault(require(a95_0x3951('0x6')));const request=require('express-validator');exports[a95_0x3951('0x7')]=(_0x18a096,_0x27a1fb)=>{if(_0x18a096[a95_0x3951('0x8')]){return _0x27a1fb[a95_0x3951('0x9')]('/');}_0x27a1fb[a95_0x3951('0xa')](a95_0x3951('0xb'),{'title':a95_0x3951('0xc')});};exports[a95_0x3951('0xd')]=(_0x158ff3,_0x42dad1,_0x1fe674)=>{_0x158ff3[a95_0x3951('0xe')](a95_0x3951('0xf'),'Email\x20is\x20not\x20valid')[a95_0x3951('0x10')]();_0x158ff3[a95_0x3951('0xe')]('password',a95_0x3951('0x11'))[a95_0x3951('0x12')]();_0x158ff3['sanitize'](a95_0x3951('0xf'))[a95_0x3951('0x13')]({'gmail_remove_dots':![]});const _0x201c9d=_0x158ff3[a95_0x3951('0x14')]();if(_0x201c9d){_0x158ff3[a95_0x3951('0x15')](a95_0x3951('0x16'),_0x201c9d);return _0x42dad1['redirect'](a95_0x3951('0x17'));}passport_1[a95_0x3951('0x18')][a95_0x3951('0x19')](a95_0x3951('0x1a'),(_0x584bed,_0x233cd8,_0x2f51f1)=>{if(_0x584bed){return _0x1fe674(_0x584bed);}if(!_0x233cd8){_0x158ff3['flash']('errors',_0x2f51f1[a95_0x3951('0x1b')]);return _0x42dad1[a95_0x3951('0x9')](a95_0x3951('0x17'));}_0x158ff3['logIn'](_0x233cd8,_0x584bed=>{if(_0x584bed){return _0x1fe674(_0x584bed);}_0x158ff3['flash'](a95_0x3951('0x1c'),{'msg':a95_0x3951('0x1d')});_0x42dad1[a95_0x3951('0x9')](_0x158ff3['session'][a95_0x3951('0x1e')]||'/');});})(_0x158ff3,_0x42dad1,_0x1fe674);};exports['logout']=(_0x4bc943,_0x44877f)=>{_0x4bc943[a95_0x3951('0x1f')]();_0x44877f[a95_0x3951('0x9')]('/');};exports['getSignup']=(_0x5a8df8,_0x41a133)=>{if(_0x5a8df8[a95_0x3951('0x8')]){return _0x41a133['redirect']('/');}_0x41a133[a95_0x3951('0xa')]('account/signup',{'title':a95_0x3951('0x20')});};exports[a95_0x3951('0x21')]=(_0x1b8157,_0xfa99f0,_0x4f71be)=>{_0x1b8157[a95_0x3951('0xe')](a95_0x3951('0xf'),'Email\x20is\x20not\x20valid')[a95_0x3951('0x10')]();_0x1b8157['assert'](a95_0x3951('0x22'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x3951('0x23')]({'min':0x4});_0x1b8157['assert']('confirmPassword','Passwords\x20do\x20not\x20match')['equals'](_0x1b8157[a95_0x3951('0x24')]['password']);_0x1b8157[a95_0x3951('0x25')](a95_0x3951('0xf'))[a95_0x3951('0x13')]({'gmail_remove_dots':![]});const _0x2583cf=_0x1b8157[a95_0x3951('0x14')]();if(_0x2583cf){_0x1b8157[a95_0x3951('0x15')](a95_0x3951('0x16'),_0x2583cf);return _0xfa99f0['redirect']('/signup');}const _0x21a3c5=new User_1[(a95_0x3951('0x18'))]({'email':_0x1b8157[a95_0x3951('0x24')][a95_0x3951('0xf')],'password':_0x1b8157[a95_0x3951('0x24')]['password']});User_1[a95_0x3951('0x18')][a95_0x3951('0x26')]({'email':_0x1b8157[a95_0x3951('0x24')]['email']},(_0x5495bf,_0x69cfd9)=>{if(_0x5495bf){return _0x4f71be(_0x5495bf);}if(_0x69cfd9){_0x1b8157[a95_0x3951('0x15')](a95_0x3951('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0xfa99f0[a95_0x3951('0x9')](a95_0x3951('0x27'));}_0x21a3c5[a95_0x3951('0x28')](_0x5495bf=>{if(_0x5495bf){return _0x4f71be(_0x5495bf);}_0x1b8157[a95_0x3951('0x29')](_0x21a3c5,_0x5495bf=>{if(_0x5495bf){return _0x4f71be(_0x5495bf);}_0xfa99f0[a95_0x3951('0x9')]('/');});});});};exports[a95_0x3951('0x2a')]=(_0x5603f3,_0x8e3026)=>{_0x8e3026[a95_0x3951('0xa')](a95_0x3951('0x2b'),{'title':'Account\x20Management'});};exports[a95_0x3951('0x2c')]=(_0x5db3d7,_0x1ceeef,_0x1ff836)=>{_0x5db3d7[a95_0x3951('0xe')](a95_0x3951('0xf'),a95_0x3951('0x2d'))[a95_0x3951('0x10')]();_0x5db3d7['sanitize'](a95_0x3951('0xf'))[a95_0x3951('0x13')]({'gmail_remove_dots':![]});const _0x364993=_0x5db3d7['validationErrors']();if(_0x364993){_0x5db3d7[a95_0x3951('0x15')](a95_0x3951('0x16'),_0x364993);return _0x1ceeef[a95_0x3951('0x9')](a95_0x3951('0x2e'));}User_1[a95_0x3951('0x18')][a95_0x3951('0x2f')](_0x5db3d7[a95_0x3951('0x8')]['id'],(_0x2b911b,_0x394557)=>{if(_0x2b911b){return _0x1ff836(_0x2b911b);}_0x394557['email']=_0x5db3d7['body'][a95_0x3951('0xf')]||'';_0x394557['profile']['name']=_0x5db3d7[a95_0x3951('0x24')][a95_0x3951('0x30')]||'';_0x394557[a95_0x3951('0x31')]['gender']=_0x5db3d7[a95_0x3951('0x24')][a95_0x3951('0x32')]||'';_0x394557[a95_0x3951('0x31')][a95_0x3951('0x33')]=_0x5db3d7['body']['location']||'';_0x394557[a95_0x3951('0x31')][a95_0x3951('0x34')]=_0x5db3d7[a95_0x3951('0x24')][a95_0x3951('0x34')]||'';_0x394557[a95_0x3951('0x28')](_0x2b911b=>{if(_0x2b911b){if(_0x2b911b['code']===0x2af8){_0x5db3d7[a95_0x3951('0x15')]('errors',{'msg':a95_0x3951('0x35')});return _0x1ceeef[a95_0x3951('0x9')](a95_0x3951('0x2e'));}return _0x1ff836(_0x2b911b);}_0x5db3d7['flash']('success',{'msg':a95_0x3951('0x36')});_0x1ceeef['redirect']('/account');});});};exports[a95_0x3951('0x37')]=(_0x46fabf,_0x2b914c,_0x54ab84)=>{_0x46fabf['assert']('password',a95_0x3951('0x38'))['len']({'min':0x4});_0x46fabf[a95_0x3951('0xe')](a95_0x3951('0x39'),a95_0x3951('0x3a'))[a95_0x3951('0x3b')](_0x46fabf[a95_0x3951('0x24')][a95_0x3951('0x22')]);const _0xc6a6a8=_0x46fabf[a95_0x3951('0x14')]();if(_0xc6a6a8){_0x46fabf[a95_0x3951('0x15')](a95_0x3951('0x16'),_0xc6a6a8);return _0x2b914c['redirect'](a95_0x3951('0x2e'));}User_1[a95_0x3951('0x18')]['findById'](_0x46fabf['user']['id'],(_0x5a3022,_0x30c460)=>{if(_0x5a3022){return _0x54ab84(_0x5a3022);}_0x30c460[a95_0x3951('0x22')]=_0x46fabf[a95_0x3951('0x24')][a95_0x3951('0x22')];_0x30c460[a95_0x3951('0x28')](_0x5a3022=>{if(_0x5a3022){return _0x54ab84(_0x5a3022);}_0x46fabf[a95_0x3951('0x15')](a95_0x3951('0x1c'),{'msg':'Password\x20has\x20been\x20changed.'});_0x2b914c[a95_0x3951('0x9')](a95_0x3951('0x2e'));});});};exports[a95_0x3951('0x3c')]=(_0x4c81fd,_0x10bb8d,_0x408e94)=>{User_1['default'][a95_0x3951('0x3d')]({'_id':_0x4c81fd[a95_0x3951('0x8')]['id']},_0x396ea0=>{if(_0x396ea0){return _0x408e94(_0x396ea0);}_0x4c81fd['logout']();_0x4c81fd[a95_0x3951('0x15')]('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x10bb8d[a95_0x3951('0x9')]('/');});};exports[a95_0x3951('0x3e')]=(_0x48dc99,_0x19553f,_0x7ed44f)=>{const _0xb09061=_0x48dc99[a95_0x3951('0x3f')]['provider'];User_1[a95_0x3951('0x18')]['findById'](_0x48dc99[a95_0x3951('0x8')]['id'],(_0x52a89e,_0x2659bd)=>{if(_0x52a89e){return _0x7ed44f(_0x52a89e);}_0x2659bd[_0xb09061]=undefined;_0x2659bd[a95_0x3951('0x40')]=_0x2659bd['tokens'][a95_0x3951('0x41')](_0x16dbd8=>_0x16dbd8[a95_0x3951('0x42')]!==_0xb09061);_0x2659bd[a95_0x3951('0x28')](_0x52a89e=>{if(_0x52a89e){return _0x7ed44f(_0x52a89e);}_0x48dc99[a95_0x3951('0x15')](a95_0x3951('0x43'),{'msg':_0xb09061+a95_0x3951('0x44')});_0x19553f[a95_0x3951('0x9')](a95_0x3951('0x2e'));});});};exports[a95_0x3951('0x45')]=(_0x431cc3,_0x152d41,_0x5cd630)=>{if(_0x431cc3[a95_0x3951('0x46')]()){return _0x152d41[a95_0x3951('0x9')]('/');}User_1[a95_0x3951('0x18')]['findOne']({'passwordResetToken':_0x431cc3[a95_0x3951('0x3f')]['token']})[a95_0x3951('0x47')](a95_0x3951('0x48'))['gt'](Date[a95_0x3951('0x49')]())[a95_0x3951('0x4a')]((_0x297761,_0x265568)=>{if(_0x297761){return _0x5cd630(_0x297761);}if(!_0x265568){_0x431cc3[a95_0x3951('0x15')](a95_0x3951('0x16'),{'msg':a95_0x3951('0x4b')});return _0x152d41['redirect'](a95_0x3951('0x4c'));}_0x152d41[a95_0x3951('0xa')](a95_0x3951('0x4d'),{'title':'Password\x20Reset'});});};exports[a95_0x3951('0x4e')]=(_0x30a9c6,_0x43f5ca,_0x52b6b5)=>{_0x30a9c6['assert']('password',a95_0x3951('0x4f'))['len']({'min':0x4});_0x30a9c6[a95_0x3951('0xe')]('confirm',a95_0x3951('0x50'))['equals'](_0x30a9c6[a95_0x3951('0x24')]['password']);const _0x4e54ab=_0x30a9c6[a95_0x3951('0x14')]();if(_0x4e54ab){_0x30a9c6[a95_0x3951('0x15')](a95_0x3951('0x16'),_0x4e54ab);return _0x43f5ca['redirect']('back');}async_1[a95_0x3951('0x18')][a95_0x3951('0x51')]([function resetPassword(_0x3648eb){User_1[a95_0x3951('0x18')][a95_0x3951('0x26')]({'passwordResetToken':_0x30a9c6[a95_0x3951('0x3f')]['token']})[a95_0x3951('0x47')](a95_0x3951('0x48'))['gt'](Date['now']())[a95_0x3951('0x4a')]((_0x328a4d,_0x1a514d)=>{if(_0x328a4d){return _0x52b6b5(_0x328a4d);}if(!_0x1a514d){_0x30a9c6[a95_0x3951('0x15')](a95_0x3951('0x16'),{'msg':a95_0x3951('0x4b')});return _0x43f5ca[a95_0x3951('0x9')](a95_0x3951('0x52'));}_0x1a514d['password']=_0x30a9c6[a95_0x3951('0x24')][a95_0x3951('0x22')];_0x1a514d[a95_0x3951('0x53')]=undefined;_0x1a514d[a95_0x3951('0x48')]=undefined;_0x1a514d[a95_0x3951('0x28')](_0x328a4d=>{if(_0x328a4d){return _0x52b6b5(_0x328a4d);}_0x30a9c6[a95_0x3951('0x29')](_0x1a514d,_0x328a4d=>{_0x3648eb(_0x328a4d,_0x1a514d);});});});},function sendResetPasswordEmail(_0xdee72d,_0x20d965){const _0x1d8cb6=nodemailer_1['default'][a95_0x3951('0x54')]({'service':a95_0x3951('0x55'),'auth':{'user':process[a95_0x3951('0x56')][a95_0x3951('0x57')],'pass':process[a95_0x3951('0x56')][a95_0x3951('0x58')]}});const _0x263ef8={'to':_0xdee72d['email'],'from':'express-ts@starter.com','subject':a95_0x3951('0x59'),'text':a95_0x3951('0x5a')+_0xdee72d[a95_0x3951('0xf')]+a95_0x3951('0x5b')};_0x1d8cb6['sendMail'](_0x263ef8,_0x878a72=>{_0x30a9c6[a95_0x3951('0x15')](a95_0x3951('0x1c'),{'msg':a95_0x3951('0x5c')});_0x20d965(_0x878a72);});}],_0x5ac5dc=>{if(_0x5ac5dc){return _0x52b6b5(_0x5ac5dc);}_0x43f5ca[a95_0x3951('0x9')]('/');});};exports[a95_0x3951('0x5d')]=(_0x43b532,_0x8ff95f)=>{if(_0x43b532['isAuthenticated']()){return _0x8ff95f[a95_0x3951('0x9')]('/');}_0x8ff95f[a95_0x3951('0xa')](a95_0x3951('0x5e'),{'title':a95_0x3951('0x5f')});};exports['postForgot']=(_0x1af3ea,_0x577e2e,_0x17b442)=>{_0x1af3ea[a95_0x3951('0xe')](a95_0x3951('0xf'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x3951('0x10')]();_0x1af3ea['sanitize'](a95_0x3951('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x349d39=_0x1af3ea[a95_0x3951('0x14')]();if(_0x349d39){_0x1af3ea[a95_0x3951('0x15')]('errors',_0x349d39);return _0x577e2e[a95_0x3951('0x9')](a95_0x3951('0x4c'));}async_1['default']['waterfall']([function createRandomToken(_0x3df758){crypto_1[a95_0x3951('0x18')]['randomBytes'](0x10,(_0x1088c5,_0xe9b5e)=>{const _0x5923ed=_0xe9b5e[a95_0x3951('0x60')]('hex');_0x3df758(_0x1088c5,_0x5923ed);});},function setRandomToken(_0x5c1dff,_0x459b97){User_1['default']['findOne']({'email':_0x1af3ea['body'][a95_0x3951('0xf')]},(_0x462142,_0x42daf1)=>{if(_0x462142){return _0x459b97(_0x462142);}if(!_0x42daf1){_0x1af3ea[a95_0x3951('0x15')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x577e2e['redirect'](a95_0x3951('0x4c'));}_0x42daf1[a95_0x3951('0x53')]=_0x5c1dff;_0x42daf1[a95_0x3951('0x48')]=Date[a95_0x3951('0x49')]()+0x36ee80;_0x42daf1['save'](_0x462142=>{_0x459b97(_0x462142,_0x5c1dff,_0x42daf1);});});},function sendForgotPasswordEmail(_0x36b86c,_0x5077c0,_0x1d977d){const _0x57bef1=nodemailer_1[a95_0x3951('0x18')][a95_0x3951('0x54')]({'service':a95_0x3951('0x55'),'auth':{'user':process[a95_0x3951('0x56')]['SENDGRID_USER'],'pass':process['env'][a95_0x3951('0x58')]}});const _0x2404de={'to':_0x5077c0[a95_0x3951('0xf')],'from':a95_0x3951('0x61'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x3951('0x62')+_0x1af3ea[a95_0x3951('0x63')][a95_0x3951('0x64')]+a95_0x3951('0x65')+_0x36b86c+a95_0x3951('0x66')};_0x57bef1['sendMail'](_0x2404de,_0x184511=>{_0x1af3ea['flash'](a95_0x3951('0x43'),{'msg':a95_0x3951('0x67')+_0x5077c0[a95_0x3951('0xf')]+a95_0x3951('0x68')});_0x1d977d(_0x184511);});}],_0x5ac430=>{if(_0x5ac430){return _0x17b442(_0x5ac430);}_0x577e2e['redirect'](a95_0x3951('0x4c'));});};