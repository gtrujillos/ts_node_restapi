var a101_0x4bb3=['errors','/login','default','authenticate','local','flash','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','postSignup','email','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','normalizeEmail','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','/forgot','account/reset','postReset','confirm','back','waterfall','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__importDefault','__esModule','nodemailer','../models/User','express-validator','getLogin','user','redirect','render','Login','assert','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','validationErrors'];(function(_0x211209,_0x46d92){var _0xc71520=function(_0x2e368c){while(--_0x2e368c){_0x211209['push'](_0x211209['shift']());}};_0xc71520(++_0x46d92);}(a101_0x4bb3,0x193));var a101_0x1527=function(_0x2c5d01,_0x219eb5){_0x2c5d01=_0x2c5d01-0x0;var _0xd869f3=a101_0x4bb3[_0x2c5d01];return _0xd869f3;};'use strict';var __importDefault=this&&this[a101_0x1527('0x0')]||function(_0x3de2e5){return _0x3de2e5&&_0x3de2e5[a101_0x1527('0x1')]?_0x3de2e5:{'default':_0x3de2e5};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a101_0x1527('0x2')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a101_0x1527('0x3')));const request=require(a101_0x1527('0x4'));exports[a101_0x1527('0x5')]=(_0x3b60a9,_0x32a8be)=>{if(_0x3b60a9[a101_0x1527('0x6')]){return _0x32a8be[a101_0x1527('0x7')]('/');}_0x32a8be[a101_0x1527('0x8')]('account/login',{'title':a101_0x1527('0x9')});};exports['postLogin']=(_0x187b89,_0x2d9125,_0x2f46b6)=>{_0x187b89[a101_0x1527('0xa')]('email',a101_0x1527('0xb'))[a101_0x1527('0xc')]();_0x187b89[a101_0x1527('0xa')](a101_0x1527('0xd'),a101_0x1527('0xe'))['notEmpty']();_0x187b89[a101_0x1527('0xf')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x442c01=_0x187b89[a101_0x1527('0x10')]();if(_0x442c01){_0x187b89['flash'](a101_0x1527('0x11'),_0x442c01);return _0x2d9125[a101_0x1527('0x7')](a101_0x1527('0x12'));}passport_1[a101_0x1527('0x13')][a101_0x1527('0x14')](a101_0x1527('0x15'),(_0x1e536c,_0x3b42ad,_0x1554db)=>{if(_0x1e536c){return _0x2f46b6(_0x1e536c);}if(!_0x3b42ad){_0x187b89[a101_0x1527('0x16')](a101_0x1527('0x11'),_0x1554db[a101_0x1527('0x17')]);return _0x2d9125[a101_0x1527('0x7')](a101_0x1527('0x12'));}_0x187b89[a101_0x1527('0x18')](_0x3b42ad,_0x1e536c=>{if(_0x1e536c){return _0x2f46b6(_0x1e536c);}_0x187b89[a101_0x1527('0x16')](a101_0x1527('0x19'),{'msg':a101_0x1527('0x1a')});_0x2d9125[a101_0x1527('0x7')](_0x187b89[a101_0x1527('0x1b')][a101_0x1527('0x1c')]||'/');});})(_0x187b89,_0x2d9125,_0x2f46b6);};exports[a101_0x1527('0x1d')]=(_0xaf8308,_0x8256a6)=>{_0xaf8308[a101_0x1527('0x1d')]();_0x8256a6['redirect']('/');};exports['getSignup']=(_0x1fb9fd,_0x3e1ff7)=>{if(_0x1fb9fd[a101_0x1527('0x6')]){return _0x3e1ff7[a101_0x1527('0x7')]('/');}_0x3e1ff7[a101_0x1527('0x8')](a101_0x1527('0x1e'),{'title':'Create\x20Account'});};exports[a101_0x1527('0x1f')]=(_0x467180,_0x24eb9d,_0x414652)=>{_0x467180[a101_0x1527('0xa')](a101_0x1527('0x20'),a101_0x1527('0xb'))['isEmail']();_0x467180[a101_0x1527('0xa')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a101_0x1527('0x21')]({'min':0x4});_0x467180['assert'](a101_0x1527('0x22'),a101_0x1527('0x23'))[a101_0x1527('0x24')](_0x467180[a101_0x1527('0x25')][a101_0x1527('0xd')]);_0x467180[a101_0x1527('0xf')](a101_0x1527('0x20'))[a101_0x1527('0x26')]({'gmail_remove_dots':![]});const _0x417f75=_0x467180['validationErrors']();if(_0x417f75){_0x467180[a101_0x1527('0x16')]('errors',_0x417f75);return _0x24eb9d[a101_0x1527('0x7')](a101_0x1527('0x27'));}const _0x56d5b8=new User_1[(a101_0x1527('0x13'))]({'email':_0x467180['body'][a101_0x1527('0x20')],'password':_0x467180[a101_0x1527('0x25')][a101_0x1527('0xd')]});User_1[a101_0x1527('0x13')][a101_0x1527('0x28')]({'email':_0x467180[a101_0x1527('0x25')][a101_0x1527('0x20')]},(_0x9afe63,_0x1cbf8)=>{if(_0x9afe63){return _0x414652(_0x9afe63);}if(_0x1cbf8){_0x467180[a101_0x1527('0x16')]('errors',{'msg':a101_0x1527('0x29')});return _0x24eb9d['redirect'](a101_0x1527('0x27'));}_0x56d5b8[a101_0x1527('0x2a')](_0x9afe63=>{if(_0x9afe63){return _0x414652(_0x9afe63);}_0x467180[a101_0x1527('0x18')](_0x56d5b8,_0x9afe63=>{if(_0x9afe63){return _0x414652(_0x9afe63);}_0x24eb9d[a101_0x1527('0x7')]('/');});});});};exports['getAccount']=(_0x56f590,_0x234c30)=>{_0x234c30[a101_0x1527('0x8')]('account/profile',{'title':a101_0x1527('0x2b')});};exports['postUpdateProfile']=(_0x140024,_0x5d47ed,_0x251e8)=>{_0x140024[a101_0x1527('0xa')](a101_0x1527('0x20'),a101_0x1527('0x2c'))[a101_0x1527('0xc')]();_0x140024[a101_0x1527('0xf')]('email')[a101_0x1527('0x26')]({'gmail_remove_dots':![]});const _0x1ad571=_0x140024[a101_0x1527('0x10')]();if(_0x1ad571){_0x140024['flash'](a101_0x1527('0x11'),_0x1ad571);return _0x5d47ed['redirect'](a101_0x1527('0x2d'));}User_1[a101_0x1527('0x13')][a101_0x1527('0x2e')](_0x140024['user']['id'],(_0x119473,_0x5404a8)=>{if(_0x119473){return _0x251e8(_0x119473);}_0x5404a8['email']=_0x140024[a101_0x1527('0x25')]['email']||'';_0x5404a8['profile'][a101_0x1527('0x2f')]=_0x140024[a101_0x1527('0x25')][a101_0x1527('0x2f')]||'';_0x5404a8[a101_0x1527('0x30')][a101_0x1527('0x31')]=_0x140024[a101_0x1527('0x25')][a101_0x1527('0x31')]||'';_0x5404a8['profile'][a101_0x1527('0x32')]=_0x140024[a101_0x1527('0x25')][a101_0x1527('0x32')]||'';_0x5404a8[a101_0x1527('0x30')][a101_0x1527('0x33')]=_0x140024[a101_0x1527('0x25')]['website']||'';_0x5404a8['save'](_0x119473=>{if(_0x119473){if(_0x119473[a101_0x1527('0x34')]===0x2af8){_0x140024['flash']('errors',{'msg':a101_0x1527('0x35')});return _0x5d47ed[a101_0x1527('0x7')](a101_0x1527('0x2d'));}return _0x251e8(_0x119473);}_0x140024[a101_0x1527('0x16')](a101_0x1527('0x19'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x5d47ed[a101_0x1527('0x7')](a101_0x1527('0x2d'));});});};exports[a101_0x1527('0x36')]=(_0x4ce582,_0x4318aa,_0x392d6e)=>{_0x4ce582[a101_0x1527('0xa')](a101_0x1527('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a101_0x1527('0x21')]({'min':0x4});_0x4ce582['assert'](a101_0x1527('0x22'),a101_0x1527('0x23'))[a101_0x1527('0x24')](_0x4ce582['body'][a101_0x1527('0xd')]);const _0x2b18f5=_0x4ce582[a101_0x1527('0x10')]();if(_0x2b18f5){_0x4ce582['flash'](a101_0x1527('0x11'),_0x2b18f5);return _0x4318aa[a101_0x1527('0x7')](a101_0x1527('0x2d'));}User_1[a101_0x1527('0x13')]['findById'](_0x4ce582[a101_0x1527('0x6')]['id'],(_0x45346d,_0x24c6ab)=>{if(_0x45346d){return _0x392d6e(_0x45346d);}_0x24c6ab[a101_0x1527('0xd')]=_0x4ce582[a101_0x1527('0x25')][a101_0x1527('0xd')];_0x24c6ab[a101_0x1527('0x2a')](_0x45346d=>{if(_0x45346d){return _0x392d6e(_0x45346d);}_0x4ce582['flash'](a101_0x1527('0x19'),{'msg':a101_0x1527('0x37')});_0x4318aa[a101_0x1527('0x7')](a101_0x1527('0x2d'));});});};exports[a101_0x1527('0x38')]=(_0x1daa26,_0x105ece,_0x128654)=>{User_1[a101_0x1527('0x13')]['remove']({'_id':_0x1daa26[a101_0x1527('0x6')]['id']},_0x486124=>{if(_0x486124){return _0x128654(_0x486124);}_0x1daa26[a101_0x1527('0x1d')]();_0x1daa26['flash'](a101_0x1527('0x39'),{'msg':a101_0x1527('0x3a')});_0x105ece[a101_0x1527('0x7')]('/');});};exports[a101_0x1527('0x3b')]=(_0x145a9a,_0x358e6d,_0x18d707)=>{const _0x1945ce=_0x145a9a[a101_0x1527('0x3c')][a101_0x1527('0x3d')];User_1[a101_0x1527('0x13')][a101_0x1527('0x2e')](_0x145a9a['user']['id'],(_0x10fd15,_0x3f94cd)=>{if(_0x10fd15){return _0x18d707(_0x10fd15);}_0x3f94cd[_0x1945ce]=undefined;_0x3f94cd[a101_0x1527('0x3e')]=_0x3f94cd[a101_0x1527('0x3e')][a101_0x1527('0x3f')](_0x2a4388=>_0x2a4388[a101_0x1527('0x40')]!==_0x1945ce);_0x3f94cd[a101_0x1527('0x2a')](_0x10fd15=>{if(_0x10fd15){return _0x18d707(_0x10fd15);}_0x145a9a[a101_0x1527('0x16')]('info',{'msg':_0x1945ce+a101_0x1527('0x41')});_0x358e6d[a101_0x1527('0x7')](a101_0x1527('0x2d'));});});};exports[a101_0x1527('0x42')]=(_0x40334a,_0x514dbf,_0x320f34)=>{if(_0x40334a[a101_0x1527('0x43')]()){return _0x514dbf[a101_0x1527('0x7')]('/');}User_1['default']['findOne']({'passwordResetToken':_0x40334a[a101_0x1527('0x3c')][a101_0x1527('0x44')]})[a101_0x1527('0x45')](a101_0x1527('0x46'))['gt'](Date[a101_0x1527('0x47')]())['exec']((_0x530762,_0x27060e)=>{if(_0x530762){return _0x320f34(_0x530762);}if(!_0x27060e){_0x40334a[a101_0x1527('0x16')](a101_0x1527('0x11'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x514dbf[a101_0x1527('0x7')](a101_0x1527('0x48'));}_0x514dbf[a101_0x1527('0x8')](a101_0x1527('0x49'),{'title':'Password\x20Reset'});});};exports[a101_0x1527('0x4a')]=(_0x1c7127,_0x382160,_0x42c232)=>{_0x1c7127[a101_0x1527('0xa')](a101_0x1527('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')['len']({'min':0x4});_0x1c7127[a101_0x1527('0xa')](a101_0x1527('0x4b'),'Passwords\x20must\x20match.')['equals'](_0x1c7127[a101_0x1527('0x25')]['password']);const _0x18f24c=_0x1c7127[a101_0x1527('0x10')]();if(_0x18f24c){_0x1c7127[a101_0x1527('0x16')](a101_0x1527('0x11'),_0x18f24c);return _0x382160[a101_0x1527('0x7')](a101_0x1527('0x4c'));}async_1[a101_0x1527('0x13')][a101_0x1527('0x4d')]([function resetPassword(_0x335f6b){User_1[a101_0x1527('0x13')][a101_0x1527('0x28')]({'passwordResetToken':_0x1c7127[a101_0x1527('0x3c')][a101_0x1527('0x44')]})[a101_0x1527('0x45')](a101_0x1527('0x46'))['gt'](Date['now']())[a101_0x1527('0x4e')]((_0x2265c3,_0x34c33f)=>{if(_0x2265c3){return _0x42c232(_0x2265c3);}if(!_0x34c33f){_0x1c7127[a101_0x1527('0x16')]('errors',{'msg':a101_0x1527('0x4f')});return _0x382160[a101_0x1527('0x7')]('back');}_0x34c33f['password']=_0x1c7127[a101_0x1527('0x25')][a101_0x1527('0xd')];_0x34c33f[a101_0x1527('0x50')]=undefined;_0x34c33f[a101_0x1527('0x46')]=undefined;_0x34c33f[a101_0x1527('0x2a')](_0x2265c3=>{if(_0x2265c3){return _0x42c232(_0x2265c3);}_0x1c7127[a101_0x1527('0x18')](_0x34c33f,_0x2265c3=>{_0x335f6b(_0x2265c3,_0x34c33f);});});});},function sendResetPasswordEmail(_0x585088,_0x5983e1){const _0x5157c5=nodemailer_1[a101_0x1527('0x13')][a101_0x1527('0x51')]({'service':a101_0x1527('0x52'),'auth':{'user':process[a101_0x1527('0x53')][a101_0x1527('0x54')],'pass':process['env'][a101_0x1527('0x55')]}});const _0x52770e={'to':_0x585088[a101_0x1527('0x20')],'from':a101_0x1527('0x56'),'subject':a101_0x1527('0x57'),'text':a101_0x1527('0x58')+_0x585088[a101_0x1527('0x20')]+a101_0x1527('0x59')};_0x5157c5[a101_0x1527('0x5a')](_0x52770e,_0x2c1ea8=>{_0x1c7127[a101_0x1527('0x16')](a101_0x1527('0x19'),{'msg':a101_0x1527('0x5b')});_0x5983e1(_0x2c1ea8);});}],_0x43d945=>{if(_0x43d945){return _0x42c232(_0x43d945);}_0x382160[a101_0x1527('0x7')]('/');});};exports[a101_0x1527('0x5c')]=(_0x3f7678,_0x205bdd)=>{if(_0x3f7678[a101_0x1527('0x43')]()){return _0x205bdd[a101_0x1527('0x7')]('/');}_0x205bdd['render']('account/forgot',{'title':a101_0x1527('0x5d')});};exports[a101_0x1527('0x5e')]=(_0x27e9e5,_0xb1ecdd,_0x2e655d)=>{_0x27e9e5[a101_0x1527('0xa')](a101_0x1527('0x20'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a101_0x1527('0xc')]();_0x27e9e5[a101_0x1527('0xf')](a101_0x1527('0x20'))[a101_0x1527('0x26')]({'gmail_remove_dots':![]});const _0x5bbfec=_0x27e9e5[a101_0x1527('0x10')]();if(_0x5bbfec){_0x27e9e5[a101_0x1527('0x16')]('errors',_0x5bbfec);return _0xb1ecdd[a101_0x1527('0x7')]('/forgot');}async_1[a101_0x1527('0x13')][a101_0x1527('0x4d')]([function createRandomToken(_0x129b9d){crypto_1['default']['randomBytes'](0x10,(_0x43702d,_0x4f4bc8)=>{const _0x5b9d89=_0x4f4bc8[a101_0x1527('0x5f')]('hex');_0x129b9d(_0x43702d,_0x5b9d89);});},function setRandomToken(_0x4660f9,_0x112af5){User_1[a101_0x1527('0x13')]['findOne']({'email':_0x27e9e5[a101_0x1527('0x25')]['email']},(_0x3aba0c,_0x38246d)=>{if(_0x3aba0c){return _0x112af5(_0x3aba0c);}if(!_0x38246d){_0x27e9e5['flash'](a101_0x1527('0x11'),{'msg':a101_0x1527('0x60')});return _0xb1ecdd[a101_0x1527('0x7')](a101_0x1527('0x48'));}_0x38246d[a101_0x1527('0x50')]=_0x4660f9;_0x38246d[a101_0x1527('0x46')]=Date[a101_0x1527('0x47')]()+0x36ee80;_0x38246d[a101_0x1527('0x2a')](_0x3aba0c=>{_0x112af5(_0x3aba0c,_0x4660f9,_0x38246d);});});},function sendForgotPasswordEmail(_0x2f7492,_0x55ea3d,_0xa9e55d){const _0x18e0c6=nodemailer_1['default'][a101_0x1527('0x51')]({'service':'SendGrid','auth':{'user':process[a101_0x1527('0x53')][a101_0x1527('0x54')],'pass':process['env'][a101_0x1527('0x55')]}});const _0x128a44={'to':_0x55ea3d['email'],'from':a101_0x1527('0x61'),'subject':a101_0x1527('0x62'),'text':a101_0x1527('0x63')+_0x27e9e5[a101_0x1527('0x64')][a101_0x1527('0x65')]+a101_0x1527('0x66')+_0x2f7492+a101_0x1527('0x67')};_0x18e0c6['sendMail'](_0x128a44,_0x344457=>{_0x27e9e5['flash'](a101_0x1527('0x39'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x55ea3d[a101_0x1527('0x20')]+a101_0x1527('0x68')});_0xa9e55d(_0x344457);});}],_0x20f46b=>{if(_0x20f46b){return _0x2e655d(_0x20f46b);}_0xb1ecdd[a101_0x1527('0x7')]('/forgot');});};