var a95_0x5870=['gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','/account','postUpdatePassword','findById','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','Passwords\x20must\x20match.','waterfall','where','back','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','isEmail','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','logIn','getAccount','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','profile','name'];(function(_0x5804a1,_0x476746){var _0x2cae88=function(_0x4b66c2){while(--_0x4b66c2){_0x5804a1['push'](_0x5804a1['shift']());}};_0x2cae88(++_0x476746);}(a95_0x5870,0xac));var a95_0x34aa=function(_0x20a78d,_0xcaf54c){_0x20a78d=_0x20a78d-0x0;var _0xa655a9=a95_0x5870[_0x20a78d];return _0xa655a9;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x336672){return _0x336672&&_0x336672[a95_0x34aa('0x0')]?_0x336672:{'default':_0x336672};};Object[a95_0x34aa('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a95_0x34aa('0x2')));const crypto_1=__importDefault(require(a95_0x34aa('0x3')));const nodemailer_1=__importDefault(require(a95_0x34aa('0x4')));const passport_1=__importDefault(require(a95_0x34aa('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a95_0x34aa('0x6'));exports[a95_0x34aa('0x7')]=(_0xb691ff,_0x3de669)=>{if(_0xb691ff[a95_0x34aa('0x8')]){return _0x3de669[a95_0x34aa('0x9')]('/');}_0x3de669[a95_0x34aa('0xa')]('account/login',{'title':a95_0x34aa('0xb')});};exports[a95_0x34aa('0xc')]=(_0x4226e5,_0x7213c2,_0x423f4b)=>{_0x4226e5[a95_0x34aa('0xd')](a95_0x34aa('0xe'),a95_0x34aa('0xf'))['isEmail']();_0x4226e5[a95_0x34aa('0xd')]('password',a95_0x34aa('0x10'))[a95_0x34aa('0x11')]();_0x4226e5[a95_0x34aa('0x12')](a95_0x34aa('0xe'))[a95_0x34aa('0x13')]({'gmail_remove_dots':![]});const _0x2bf71a=_0x4226e5[a95_0x34aa('0x14')]();if(_0x2bf71a){_0x4226e5[a95_0x34aa('0x15')](a95_0x34aa('0x16'),_0x2bf71a);return _0x7213c2[a95_0x34aa('0x9')](a95_0x34aa('0x17'));}passport_1[a95_0x34aa('0x18')][a95_0x34aa('0x19')](a95_0x34aa('0x1a'),(_0x49e591,_0x504744,_0x1ec3a5)=>{if(_0x49e591){return _0x423f4b(_0x49e591);}if(!_0x504744){_0x4226e5[a95_0x34aa('0x15')](a95_0x34aa('0x16'),_0x1ec3a5[a95_0x34aa('0x1b')]);return _0x7213c2['redirect'](a95_0x34aa('0x17'));}_0x4226e5['logIn'](_0x504744,_0x49e591=>{if(_0x49e591){return _0x423f4b(_0x49e591);}_0x4226e5[a95_0x34aa('0x15')]('success',{'msg':a95_0x34aa('0x1c')});_0x7213c2[a95_0x34aa('0x9')](_0x4226e5[a95_0x34aa('0x1d')]['returnTo']||'/');});})(_0x4226e5,_0x7213c2,_0x423f4b);};exports['logout']=(_0x3702d5,_0x46afc9)=>{_0x3702d5[a95_0x34aa('0x1e')]();_0x46afc9[a95_0x34aa('0x9')]('/');};exports[a95_0x34aa('0x1f')]=(_0x1ae8c3,_0x50fe13)=>{if(_0x1ae8c3[a95_0x34aa('0x8')]){return _0x50fe13[a95_0x34aa('0x9')]('/');}_0x50fe13[a95_0x34aa('0xa')](a95_0x34aa('0x20'),{'title':a95_0x34aa('0x21')});};exports['postSignup']=(_0x30dc8f,_0x4aff8b,_0xbaa3fb)=>{_0x30dc8f['assert'](a95_0x34aa('0xe'),a95_0x34aa('0xf'))[a95_0x34aa('0x22')]();_0x30dc8f['assert'](a95_0x34aa('0x23'),a95_0x34aa('0x24'))['len']({'min':0x4});_0x30dc8f[a95_0x34aa('0xd')]('confirmPassword',a95_0x34aa('0x25'))[a95_0x34aa('0x26')](_0x30dc8f[a95_0x34aa('0x27')][a95_0x34aa('0x23')]);_0x30dc8f[a95_0x34aa('0x12')](a95_0x34aa('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x85eee0=_0x30dc8f[a95_0x34aa('0x14')]();if(_0x85eee0){_0x30dc8f['flash']('errors',_0x85eee0);return _0x4aff8b[a95_0x34aa('0x9')]('/signup');}const _0x1992a0=new User_1['default']({'email':_0x30dc8f[a95_0x34aa('0x27')]['email'],'password':_0x30dc8f[a95_0x34aa('0x27')][a95_0x34aa('0x23')]});User_1[a95_0x34aa('0x18')][a95_0x34aa('0x28')]({'email':_0x30dc8f[a95_0x34aa('0x27')][a95_0x34aa('0xe')]},(_0x1c42b5,_0x1880b9)=>{if(_0x1c42b5){return _0xbaa3fb(_0x1c42b5);}if(_0x1880b9){_0x30dc8f[a95_0x34aa('0x15')](a95_0x34aa('0x16'),{'msg':a95_0x34aa('0x29')});return _0x4aff8b[a95_0x34aa('0x9')](a95_0x34aa('0x2a'));}_0x1992a0[a95_0x34aa('0x2b')](_0x1c42b5=>{if(_0x1c42b5){return _0xbaa3fb(_0x1c42b5);}_0x30dc8f[a95_0x34aa('0x2c')](_0x1992a0,_0x1c42b5=>{if(_0x1c42b5){return _0xbaa3fb(_0x1c42b5);}_0x4aff8b[a95_0x34aa('0x9')]('/');});});});};exports[a95_0x34aa('0x2d')]=(_0x286053,_0x144fc1)=>{_0x144fc1[a95_0x34aa('0xa')]('account/profile',{'title':a95_0x34aa('0x2e')});};exports['postUpdateProfile']=(_0xd09e0f,_0x4d294a,_0x2d85e4)=>{_0xd09e0f[a95_0x34aa('0xd')]('email',a95_0x34aa('0x2f'))['isEmail']();_0xd09e0f[a95_0x34aa('0x12')](a95_0x34aa('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xff4722=_0xd09e0f[a95_0x34aa('0x14')]();if(_0xff4722){_0xd09e0f[a95_0x34aa('0x15')](a95_0x34aa('0x16'),_0xff4722);return _0x4d294a[a95_0x34aa('0x9')]('/account');}User_1[a95_0x34aa('0x18')]['findById'](_0xd09e0f[a95_0x34aa('0x8')]['id'],(_0x491d9a,_0x10f58a)=>{if(_0x491d9a){return _0x2d85e4(_0x491d9a);}_0x10f58a[a95_0x34aa('0xe')]=_0xd09e0f[a95_0x34aa('0x27')][a95_0x34aa('0xe')]||'';_0x10f58a[a95_0x34aa('0x30')][a95_0x34aa('0x31')]=_0xd09e0f['body']['name']||'';_0x10f58a[a95_0x34aa('0x30')][a95_0x34aa('0x32')]=_0xd09e0f[a95_0x34aa('0x27')][a95_0x34aa('0x32')]||'';_0x10f58a[a95_0x34aa('0x30')][a95_0x34aa('0x33')]=_0xd09e0f[a95_0x34aa('0x27')][a95_0x34aa('0x33')]||'';_0x10f58a['profile'][a95_0x34aa('0x34')]=_0xd09e0f[a95_0x34aa('0x27')][a95_0x34aa('0x34')]||'';_0x10f58a['save'](_0x491d9a=>{if(_0x491d9a){if(_0x491d9a[a95_0x34aa('0x35')]===0x2af8){_0xd09e0f[a95_0x34aa('0x15')](a95_0x34aa('0x16'),{'msg':a95_0x34aa('0x36')});return _0x4d294a[a95_0x34aa('0x9')]('/account');}return _0x2d85e4(_0x491d9a);}_0xd09e0f[a95_0x34aa('0x15')](a95_0x34aa('0x37'),{'msg':a95_0x34aa('0x38')});_0x4d294a['redirect'](a95_0x34aa('0x39'));});});};exports[a95_0x34aa('0x3a')]=(_0x26696f,_0x552838,_0x3be414)=>{_0x26696f['assert'](a95_0x34aa('0x23'),a95_0x34aa('0x24'))['len']({'min':0x4});_0x26696f[a95_0x34aa('0xd')]('confirmPassword','Passwords\x20do\x20not\x20match')[a95_0x34aa('0x26')](_0x26696f[a95_0x34aa('0x27')]['password']);const _0x445b83=_0x26696f['validationErrors']();if(_0x445b83){_0x26696f['flash'](a95_0x34aa('0x16'),_0x445b83);return _0x552838[a95_0x34aa('0x9')](a95_0x34aa('0x39'));}User_1[a95_0x34aa('0x18')][a95_0x34aa('0x3b')](_0x26696f['user']['id'],(_0x183439,_0x1ad9ca)=>{if(_0x183439){return _0x3be414(_0x183439);}_0x1ad9ca[a95_0x34aa('0x23')]=_0x26696f['body'][a95_0x34aa('0x23')];_0x1ad9ca[a95_0x34aa('0x2b')](_0x183439=>{if(_0x183439){return _0x3be414(_0x183439);}_0x26696f[a95_0x34aa('0x15')](a95_0x34aa('0x37'),{'msg':'Password\x20has\x20been\x20changed.'});_0x552838[a95_0x34aa('0x9')]('/account');});});};exports['postDeleteAccount']=(_0x19beaa,_0x59b19c,_0x22ceb9)=>{User_1[a95_0x34aa('0x18')][a95_0x34aa('0x3c')]({'_id':_0x19beaa['user']['id']},_0x1460a6=>{if(_0x1460a6){return _0x22ceb9(_0x1460a6);}_0x19beaa['logout']();_0x19beaa[a95_0x34aa('0x15')](a95_0x34aa('0x3d'),{'msg':a95_0x34aa('0x3e')});_0x59b19c['redirect']('/');});};exports[a95_0x34aa('0x3f')]=(_0x180630,_0x4ff576,_0x36a8ab)=>{const _0x30ddbd=_0x180630[a95_0x34aa('0x40')]['provider'];User_1['default'][a95_0x34aa('0x3b')](_0x180630['user']['id'],(_0x132230,_0x47fa0f)=>{if(_0x132230){return _0x36a8ab(_0x132230);}_0x47fa0f[_0x30ddbd]=undefined;_0x47fa0f[a95_0x34aa('0x41')]=_0x47fa0f[a95_0x34aa('0x41')][a95_0x34aa('0x42')](_0x24d492=>_0x24d492[a95_0x34aa('0x43')]!==_0x30ddbd);_0x47fa0f[a95_0x34aa('0x2b')](_0x132230=>{if(_0x132230){return _0x36a8ab(_0x132230);}_0x180630['flash'](a95_0x34aa('0x3d'),{'msg':_0x30ddbd+a95_0x34aa('0x44')});_0x4ff576[a95_0x34aa('0x9')](a95_0x34aa('0x39'));});});};exports['getReset']=(_0x44fb5b,_0x39fce3,_0x12cc6a)=>{if(_0x44fb5b[a95_0x34aa('0x45')]()){return _0x39fce3[a95_0x34aa('0x9')]('/');}User_1[a95_0x34aa('0x18')][a95_0x34aa('0x28')]({'passwordResetToken':_0x44fb5b[a95_0x34aa('0x40')]['token']})['where'](a95_0x34aa('0x46'))['gt'](Date[a95_0x34aa('0x47')]())[a95_0x34aa('0x48')]((_0x17ee98,_0x2dbbdb)=>{if(_0x17ee98){return _0x12cc6a(_0x17ee98);}if(!_0x2dbbdb){_0x44fb5b[a95_0x34aa('0x15')]('errors',{'msg':a95_0x34aa('0x49')});return _0x39fce3['redirect'](a95_0x34aa('0x4a'));}_0x39fce3[a95_0x34aa('0xa')](a95_0x34aa('0x4b'),{'title':a95_0x34aa('0x4c')});});};exports[a95_0x34aa('0x4d')]=(_0x11e28e,_0x310fe3,_0x5e8307)=>{_0x11e28e[a95_0x34aa('0xd')](a95_0x34aa('0x23'),a95_0x34aa('0x4e'))[a95_0x34aa('0x4f')]({'min':0x4});_0x11e28e[a95_0x34aa('0xd')](a95_0x34aa('0x50'),a95_0x34aa('0x51'))['equals'](_0x11e28e[a95_0x34aa('0x27')][a95_0x34aa('0x23')]);const _0x5ad873=_0x11e28e[a95_0x34aa('0x14')]();if(_0x5ad873){_0x11e28e['flash'](a95_0x34aa('0x16'),_0x5ad873);return _0x310fe3[a95_0x34aa('0x9')]('back');}async_1['default'][a95_0x34aa('0x52')]([function resetPassword(_0x404e1f){User_1[a95_0x34aa('0x18')][a95_0x34aa('0x28')]({'passwordResetToken':_0x11e28e[a95_0x34aa('0x40')]['token']})[a95_0x34aa('0x53')](a95_0x34aa('0x46'))['gt'](Date['now']())[a95_0x34aa('0x48')]((_0x3907b2,_0x4a5e8a)=>{if(_0x3907b2){return _0x5e8307(_0x3907b2);}if(!_0x4a5e8a){_0x11e28e['flash'](a95_0x34aa('0x16'),{'msg':a95_0x34aa('0x49')});return _0x310fe3[a95_0x34aa('0x9')](a95_0x34aa('0x54'));}_0x4a5e8a[a95_0x34aa('0x23')]=_0x11e28e['body']['password'];_0x4a5e8a['passwordResetToken']=undefined;_0x4a5e8a['passwordResetExpires']=undefined;_0x4a5e8a[a95_0x34aa('0x2b')](_0x3907b2=>{if(_0x3907b2){return _0x5e8307(_0x3907b2);}_0x11e28e[a95_0x34aa('0x2c')](_0x4a5e8a,_0x3907b2=>{_0x404e1f(_0x3907b2,_0x4a5e8a);});});});},function sendResetPasswordEmail(_0x39bfde,_0x4cd2fb){const _0x23471b=nodemailer_1[a95_0x34aa('0x18')][a95_0x34aa('0x55')]({'service':a95_0x34aa('0x56'),'auth':{'user':process[a95_0x34aa('0x57')][a95_0x34aa('0x58')],'pass':process['env'][a95_0x34aa('0x59')]}});const _0x2720c1={'to':_0x39bfde['email'],'from':a95_0x34aa('0x5a'),'subject':a95_0x34aa('0x5b'),'text':a95_0x34aa('0x5c')+_0x39bfde[a95_0x34aa('0xe')]+a95_0x34aa('0x5d')};_0x23471b['sendMail'](_0x2720c1,_0x1feb56=>{_0x11e28e['flash'](a95_0x34aa('0x37'),{'msg':a95_0x34aa('0x5e')});_0x4cd2fb(_0x1feb56);});}],_0x1779cf=>{if(_0x1779cf){return _0x5e8307(_0x1779cf);}_0x310fe3[a95_0x34aa('0x9')]('/');});};exports[a95_0x34aa('0x5f')]=(_0x56652b,_0x19e3db)=>{if(_0x56652b[a95_0x34aa('0x45')]()){return _0x19e3db['redirect']('/');}_0x19e3db['render'](a95_0x34aa('0x60'),{'title':a95_0x34aa('0x61')});};exports['postForgot']=(_0xb3eb59,_0x5e5a8b,_0x4cb98b)=>{_0xb3eb59[a95_0x34aa('0xd')](a95_0x34aa('0xe'),a95_0x34aa('0x2f'))[a95_0x34aa('0x22')]();_0xb3eb59[a95_0x34aa('0x12')](a95_0x34aa('0xe'))[a95_0x34aa('0x13')]({'gmail_remove_dots':![]});const _0x1c5f36=_0xb3eb59[a95_0x34aa('0x14')]();if(_0x1c5f36){_0xb3eb59['flash'](a95_0x34aa('0x16'),_0x1c5f36);return _0x5e5a8b[a95_0x34aa('0x9')]('/forgot');}async_1[a95_0x34aa('0x18')][a95_0x34aa('0x52')]([function createRandomToken(_0x368ad7){crypto_1[a95_0x34aa('0x18')][a95_0x34aa('0x62')](0x10,(_0x4f3694,_0x1b151c)=>{const _0x5c1741=_0x1b151c[a95_0x34aa('0x63')](a95_0x34aa('0x64'));_0x368ad7(_0x4f3694,_0x5c1741);});},function setRandomToken(_0x19dc61,_0x391cee){User_1[a95_0x34aa('0x18')][a95_0x34aa('0x28')]({'email':_0xb3eb59[a95_0x34aa('0x27')][a95_0x34aa('0xe')]},(_0x586998,_0x1b075d)=>{if(_0x586998){return _0x391cee(_0x586998);}if(!_0x1b075d){_0xb3eb59[a95_0x34aa('0x15')](a95_0x34aa('0x16'),{'msg':a95_0x34aa('0x65')});return _0x5e5a8b[a95_0x34aa('0x9')]('/forgot');}_0x1b075d[a95_0x34aa('0x66')]=_0x19dc61;_0x1b075d['passwordResetExpires']=Date[a95_0x34aa('0x47')]()+0x36ee80;_0x1b075d['save'](_0x586998=>{_0x391cee(_0x586998,_0x19dc61,_0x1b075d);});});},function sendForgotPasswordEmail(_0x1cbcbb,_0x5d2bb1,_0x2febb9){const _0x57ddee=nodemailer_1[a95_0x34aa('0x18')][a95_0x34aa('0x55')]({'service':a95_0x34aa('0x56'),'auth':{'user':process[a95_0x34aa('0x57')][a95_0x34aa('0x58')],'pass':process[a95_0x34aa('0x57')][a95_0x34aa('0x59')]}});const _0x2918d5={'to':_0x5d2bb1[a95_0x34aa('0xe')],'from':a95_0x34aa('0x67'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0xb3eb59[a95_0x34aa('0x68')][a95_0x34aa('0x69')]+a95_0x34aa('0x6a')+_0x1cbcbb+a95_0x34aa('0x6b')};_0x57ddee[a95_0x34aa('0x6c')](_0x2918d5,_0x52cd75=>{_0xb3eb59[a95_0x34aa('0x15')](a95_0x34aa('0x3d'),{'msg':a95_0x34aa('0x6d')+_0x5d2bb1[a95_0x34aa('0xe')]+a95_0x34aa('0x6e')});_0x2febb9(_0x52cd75);});}],_0x275f9f=>{if(_0x275f9f){return _0x4cb98b(_0x275f9f);}_0x5e5a8b[a95_0x34aa('0x9')](a95_0x34aa('0x4a'));});};