var a201_0x199d=['isAuthenticated','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hex','hackathon@starter.com','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','getLogin','user','render','Login','postLogin','email','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','redirect','/login','authenticate','message','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','Create\x20Account','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','/signup','default','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','equals','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','kind','getReset','params','token','passwordResetExpires','now','/forgot','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.'];(function(_0x235213,_0x4e4b5d){var _0x2207cf=function(_0x467f71){while(--_0x467f71){_0x235213['push'](_0x235213['shift']());}};_0x2207cf(++_0x4e4b5d);}(a201_0x199d,0x1b2));var a201_0x488c=function(_0x4cfbb4,_0x259f73){_0x4cfbb4=_0x4cfbb4-0x0;var _0x4691ba=a201_0x199d[_0x4cfbb4];return _0x4691ba;};'use strict';var __importDefault=this&&this[a201_0x488c('0x0')]||function(_0x30e53d){return _0x30e53d&&_0x30e53d[a201_0x488c('0x1')]?_0x30e53d:{'default':_0x30e53d};};Object[a201_0x488c('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a201_0x488c('0x3')));const crypto_1=__importDefault(require(a201_0x488c('0x4')));const nodemailer_1=__importDefault(require(a201_0x488c('0x5')));const passport_1=__importDefault(require(a201_0x488c('0x6')));const User_1=__importDefault(require(a201_0x488c('0x7')));const request=require('express-validator');exports[a201_0x488c('0x8')]=(_0x2c7c8f,_0x493080)=>{if(_0x2c7c8f[a201_0x488c('0x9')]){return _0x493080['redirect']('/');}_0x493080[a201_0x488c('0xa')]('account/login',{'title':a201_0x488c('0xb')});};exports[a201_0x488c('0xc')]=(_0x570ad5,_0x416057,_0x266abc)=>{_0x570ad5['assert'](a201_0x488c('0xd'),'Email\x20is\x20not\x20valid')[a201_0x488c('0xe')]();_0x570ad5[a201_0x488c('0xf')](a201_0x488c('0x10'),a201_0x488c('0x11'))[a201_0x488c('0x12')]();_0x570ad5[a201_0x488c('0x13')]('email')[a201_0x488c('0x14')]({'gmail_remove_dots':![]});const _0x41c1b7=_0x570ad5[a201_0x488c('0x15')]();if(_0x41c1b7){_0x570ad5[a201_0x488c('0x16')](a201_0x488c('0x17'),_0x41c1b7);return _0x416057[a201_0x488c('0x18')](a201_0x488c('0x19'));}passport_1['default'][a201_0x488c('0x1a')]('local',(_0x4ec184,_0x133b37,_0x4126f7)=>{if(_0x4ec184){return _0x266abc(_0x4ec184);}if(!_0x133b37){_0x570ad5[a201_0x488c('0x16')](a201_0x488c('0x17'),_0x4126f7[a201_0x488c('0x1b')]);return _0x416057['redirect']('/login');}_0x570ad5['logIn'](_0x133b37,_0x4ec184=>{if(_0x4ec184){return _0x266abc(_0x4ec184);}_0x570ad5[a201_0x488c('0x16')]('success',{'msg':a201_0x488c('0x1c')});_0x416057[a201_0x488c('0x18')](_0x570ad5['session'][a201_0x488c('0x1d')]||'/');});})(_0x570ad5,_0x416057,_0x266abc);};exports[a201_0x488c('0x1e')]=(_0x23d771,_0x1f13bd)=>{_0x23d771[a201_0x488c('0x1e')]();_0x1f13bd['redirect']('/');};exports[a201_0x488c('0x1f')]=(_0x3cbbcb,_0x33d8dd)=>{if(_0x3cbbcb[a201_0x488c('0x9')]){return _0x33d8dd['redirect']('/');}_0x33d8dd[a201_0x488c('0xa')](a201_0x488c('0x20'),{'title':a201_0x488c('0x21')});};exports['postSignup']=(_0x3f127d,_0x4b4e83,_0x1ca037)=>{_0x3f127d[a201_0x488c('0xf')]('email',a201_0x488c('0x22'))[a201_0x488c('0xe')]();_0x3f127d[a201_0x488c('0xf')](a201_0x488c('0x10'),a201_0x488c('0x23'))[a201_0x488c('0x24')]({'min':0x4});_0x3f127d[a201_0x488c('0xf')](a201_0x488c('0x25'),a201_0x488c('0x26'))['equals'](_0x3f127d['body']['password']);_0x3f127d[a201_0x488c('0x13')](a201_0x488c('0xd'))[a201_0x488c('0x14')]({'gmail_remove_dots':![]});const _0x350737=_0x3f127d['validationErrors']();if(_0x350737){_0x3f127d['flash']('errors',_0x350737);return _0x4b4e83[a201_0x488c('0x18')](a201_0x488c('0x27'));}const _0x66addb=new User_1[(a201_0x488c('0x28'))]({'email':_0x3f127d[a201_0x488c('0x29')][a201_0x488c('0xd')],'password':_0x3f127d[a201_0x488c('0x29')][a201_0x488c('0x10')]});User_1[a201_0x488c('0x28')][a201_0x488c('0x2a')]({'email':_0x3f127d[a201_0x488c('0x29')][a201_0x488c('0xd')]},(_0x4bb19f,_0xa3121e)=>{if(_0x4bb19f){return _0x1ca037(_0x4bb19f);}if(_0xa3121e){_0x3f127d[a201_0x488c('0x16')](a201_0x488c('0x17'),{'msg':a201_0x488c('0x2b')});return _0x4b4e83[a201_0x488c('0x18')](a201_0x488c('0x27'));}_0x66addb[a201_0x488c('0x2c')](_0x4bb19f=>{if(_0x4bb19f){return _0x1ca037(_0x4bb19f);}_0x3f127d['logIn'](_0x66addb,_0x4bb19f=>{if(_0x4bb19f){return _0x1ca037(_0x4bb19f);}_0x4b4e83[a201_0x488c('0x18')]('/');});});});};exports[a201_0x488c('0x2d')]=(_0x595eb6,_0x3e3957)=>{_0x3e3957['render'](a201_0x488c('0x2e'),{'title':a201_0x488c('0x2f')});};exports[a201_0x488c('0x30')]=(_0x4527ab,_0xd6e374,_0x45bc98)=>{_0x4527ab[a201_0x488c('0xf')](a201_0x488c('0xd'),a201_0x488c('0x31'))[a201_0x488c('0xe')]();_0x4527ab[a201_0x488c('0x13')](a201_0x488c('0xd'))[a201_0x488c('0x14')]({'gmail_remove_dots':![]});const _0x1b6c80=_0x4527ab['validationErrors']();if(_0x1b6c80){_0x4527ab['flash'](a201_0x488c('0x17'),_0x1b6c80);return _0xd6e374[a201_0x488c('0x18')](a201_0x488c('0x32'));}User_1[a201_0x488c('0x28')][a201_0x488c('0x33')](_0x4527ab[a201_0x488c('0x9')]['id'],(_0x98919a,_0x15bc71)=>{if(_0x98919a){return _0x45bc98(_0x98919a);}_0x15bc71['email']=_0x4527ab['body'][a201_0x488c('0xd')]||'';_0x15bc71[a201_0x488c('0x34')][a201_0x488c('0x35')]=_0x4527ab[a201_0x488c('0x29')]['name']||'';_0x15bc71[a201_0x488c('0x34')]['gender']=_0x4527ab[a201_0x488c('0x29')][a201_0x488c('0x36')]||'';_0x15bc71[a201_0x488c('0x34')]['location']=_0x4527ab[a201_0x488c('0x29')]['location']||'';_0x15bc71['profile'][a201_0x488c('0x37')]=_0x4527ab[a201_0x488c('0x29')][a201_0x488c('0x37')]||'';_0x15bc71[a201_0x488c('0x2c')](_0x98919a=>{if(_0x98919a){if(_0x98919a[a201_0x488c('0x38')]===0x2af8){_0x4527ab['flash'](a201_0x488c('0x17'),{'msg':a201_0x488c('0x39')});return _0xd6e374[a201_0x488c('0x18')]('/account');}return _0x45bc98(_0x98919a);}_0x4527ab[a201_0x488c('0x16')](a201_0x488c('0x3a'),{'msg':a201_0x488c('0x3b')});_0xd6e374[a201_0x488c('0x18')](a201_0x488c('0x32'));});});};exports[a201_0x488c('0x3c')]=(_0x3a6ba2,_0x4254fc,_0x454b44)=>{_0x3a6ba2[a201_0x488c('0xf')](a201_0x488c('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a201_0x488c('0x24')]({'min':0x4});_0x3a6ba2[a201_0x488c('0xf')]('confirmPassword','Passwords\x20do\x20not\x20match')[a201_0x488c('0x3d')](_0x3a6ba2[a201_0x488c('0x29')][a201_0x488c('0x10')]);const _0x3d3f0f=_0x3a6ba2['validationErrors']();if(_0x3d3f0f){_0x3a6ba2['flash'](a201_0x488c('0x17'),_0x3d3f0f);return _0x4254fc[a201_0x488c('0x18')]('/account');}User_1[a201_0x488c('0x28')][a201_0x488c('0x33')](_0x3a6ba2['user']['id'],(_0x1bc0af,_0x516aa0)=>{if(_0x1bc0af){return _0x454b44(_0x1bc0af);}_0x516aa0[a201_0x488c('0x10')]=_0x3a6ba2['body'][a201_0x488c('0x10')];_0x516aa0[a201_0x488c('0x2c')](_0x1bc0af=>{if(_0x1bc0af){return _0x454b44(_0x1bc0af);}_0x3a6ba2[a201_0x488c('0x16')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x4254fc[a201_0x488c('0x18')](a201_0x488c('0x32'));});});};exports['postDeleteAccount']=(_0xbe8952,_0x28e470,_0x3b558f)=>{User_1['default'][a201_0x488c('0x3e')]({'_id':_0xbe8952[a201_0x488c('0x9')]['id']},_0x460dc7=>{if(_0x460dc7){return _0x3b558f(_0x460dc7);}_0xbe8952[a201_0x488c('0x1e')]();_0xbe8952['flash'](a201_0x488c('0x3f'),{'msg':a201_0x488c('0x40')});_0x28e470[a201_0x488c('0x18')]('/');});};exports[a201_0x488c('0x41')]=(_0x802c6d,_0x1ec1f2,_0x579621)=>{const _0x343b99=_0x802c6d['params'][a201_0x488c('0x42')];User_1[a201_0x488c('0x28')][a201_0x488c('0x33')](_0x802c6d[a201_0x488c('0x9')]['id'],(_0x4893d2,_0x4c6d55)=>{if(_0x4893d2){return _0x579621(_0x4893d2);}_0x4c6d55[_0x343b99]=undefined;_0x4c6d55['tokens']=_0x4c6d55[a201_0x488c('0x43')]['filter'](_0x40d518=>_0x40d518[a201_0x488c('0x44')]!==_0x343b99);_0x4c6d55['save'](_0x4893d2=>{if(_0x4893d2){return _0x579621(_0x4893d2);}_0x802c6d[a201_0x488c('0x16')]('info',{'msg':_0x343b99+'\x20account\x20has\x20been\x20unlinked.'});_0x1ec1f2[a201_0x488c('0x18')](a201_0x488c('0x32'));});});};exports[a201_0x488c('0x45')]=(_0x41ba5f,_0x254cae,_0x56f263)=>{if(_0x41ba5f['isAuthenticated']()){return _0x254cae[a201_0x488c('0x18')]('/');}User_1[a201_0x488c('0x28')][a201_0x488c('0x2a')]({'passwordResetToken':_0x41ba5f[a201_0x488c('0x46')][a201_0x488c('0x47')]})['where'](a201_0x488c('0x48'))['gt'](Date[a201_0x488c('0x49')]())['exec']((_0x4c4ac4,_0x2a6ee6)=>{if(_0x4c4ac4){return _0x56f263(_0x4c4ac4);}if(!_0x2a6ee6){_0x41ba5f[a201_0x488c('0x16')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x254cae['redirect'](a201_0x488c('0x4a'));}_0x254cae[a201_0x488c('0xa')](a201_0x488c('0x4b'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x5891af,_0x78e040,_0x101d1d)=>{_0x5891af[a201_0x488c('0xf')]('password',a201_0x488c('0x4c'))['len']({'min':0x4});_0x5891af[a201_0x488c('0xf')](a201_0x488c('0x4d'),a201_0x488c('0x4e'))[a201_0x488c('0x3d')](_0x5891af[a201_0x488c('0x29')][a201_0x488c('0x10')]);const _0x1ad82d=_0x5891af[a201_0x488c('0x15')]();if(_0x1ad82d){_0x5891af[a201_0x488c('0x16')](a201_0x488c('0x17'),_0x1ad82d);return _0x78e040[a201_0x488c('0x18')](a201_0x488c('0x4f'));}async_1[a201_0x488c('0x28')]['waterfall']([function resetPassword(_0x28156b){User_1['default']['findOne']({'passwordResetToken':_0x5891af[a201_0x488c('0x46')]['token']})['where']('passwordResetExpires')['gt'](Date['now']())[a201_0x488c('0x50')]((_0x9425fd,_0x3ad48e)=>{if(_0x9425fd){return _0x101d1d(_0x9425fd);}if(!_0x3ad48e){_0x5891af[a201_0x488c('0x16')](a201_0x488c('0x17'),{'msg':a201_0x488c('0x51')});return _0x78e040[a201_0x488c('0x18')](a201_0x488c('0x4f'));}_0x3ad48e[a201_0x488c('0x10')]=_0x5891af[a201_0x488c('0x29')][a201_0x488c('0x10')];_0x3ad48e[a201_0x488c('0x52')]=undefined;_0x3ad48e[a201_0x488c('0x48')]=undefined;_0x3ad48e[a201_0x488c('0x2c')](_0x9425fd=>{if(_0x9425fd){return _0x101d1d(_0x9425fd);}_0x5891af['logIn'](_0x3ad48e,_0x9425fd=>{_0x28156b(_0x9425fd,_0x3ad48e);});});});},function sendResetPasswordEmail(_0x2a8ea3,_0x48eeb2){const _0x334ef0=nodemailer_1[a201_0x488c('0x28')][a201_0x488c('0x53')]({'service':a201_0x488c('0x54'),'auth':{'user':process[a201_0x488c('0x55')]['SENDGRID_USER'],'pass':process[a201_0x488c('0x55')][a201_0x488c('0x56')]}});const _0x357d14={'to':_0x2a8ea3[a201_0x488c('0xd')],'from':a201_0x488c('0x57'),'subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x2a8ea3[a201_0x488c('0xd')]+a201_0x488c('0x58')};_0x334ef0[a201_0x488c('0x59')](_0x357d14,_0xe45eba=>{_0x5891af[a201_0x488c('0x16')](a201_0x488c('0x3a'),{'msg':a201_0x488c('0x5a')});_0x48eeb2(_0xe45eba);});}],_0x1d6930=>{if(_0x1d6930){return _0x101d1d(_0x1d6930);}_0x78e040[a201_0x488c('0x18')]('/');});};exports['getForgot']=(_0x592b8c,_0xa72a72)=>{if(_0x592b8c[a201_0x488c('0x5b')]()){return _0xa72a72[a201_0x488c('0x18')]('/');}_0xa72a72[a201_0x488c('0xa')](a201_0x488c('0x5c'),{'title':a201_0x488c('0x5d')});};exports[a201_0x488c('0x5e')]=(_0x29be7e,_0x512c33,_0x4405ce)=>{_0x29be7e['assert'](a201_0x488c('0xd'),a201_0x488c('0x31'))[a201_0x488c('0xe')]();_0x29be7e[a201_0x488c('0x13')](a201_0x488c('0xd'))[a201_0x488c('0x14')]({'gmail_remove_dots':![]});const _0x49e401=_0x29be7e[a201_0x488c('0x15')]();if(_0x49e401){_0x29be7e[a201_0x488c('0x16')](a201_0x488c('0x17'),_0x49e401);return _0x512c33[a201_0x488c('0x18')](a201_0x488c('0x4a'));}async_1[a201_0x488c('0x28')][a201_0x488c('0x5f')]([function createRandomToken(_0x551579){crypto_1[a201_0x488c('0x28')][a201_0x488c('0x60')](0x10,(_0x4fdc72,_0x428cf5)=>{const _0x26ab69=_0x428cf5[a201_0x488c('0x61')](a201_0x488c('0x62'));_0x551579(_0x4fdc72,_0x26ab69);});},function setRandomToken(_0xb232b6,_0x505153){User_1[a201_0x488c('0x28')][a201_0x488c('0x2a')]({'email':_0x29be7e[a201_0x488c('0x29')][a201_0x488c('0xd')]},(_0x39261,_0x14e3a3)=>{if(_0x39261){return _0x505153(_0x39261);}if(!_0x14e3a3){_0x29be7e[a201_0x488c('0x16')](a201_0x488c('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x512c33[a201_0x488c('0x18')](a201_0x488c('0x4a'));}_0x14e3a3[a201_0x488c('0x52')]=_0xb232b6;_0x14e3a3[a201_0x488c('0x48')]=Date[a201_0x488c('0x49')]()+0x36ee80;_0x14e3a3[a201_0x488c('0x2c')](_0x39261=>{_0x505153(_0x39261,_0xb232b6,_0x14e3a3);});});},function sendForgotPasswordEmail(_0x1f3b6a,_0x2e1501,_0x59919c){const _0xef148e=nodemailer_1[a201_0x488c('0x28')][a201_0x488c('0x53')]({'service':a201_0x488c('0x54'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process['env'][a201_0x488c('0x56')]}});const _0x52c5d6={'to':_0x2e1501[a201_0x488c('0xd')],'from':a201_0x488c('0x63'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x29be7e['headers'][a201_0x488c('0x64')]+a201_0x488c('0x65')+_0x1f3b6a+a201_0x488c('0x66')};_0xef148e[a201_0x488c('0x59')](_0x52c5d6,_0x34bf72=>{_0x29be7e[a201_0x488c('0x16')]('info',{'msg':a201_0x488c('0x67')+_0x2e1501[a201_0x488c('0xd')]+a201_0x488c('0x68')});_0x59919c(_0x34bf72);});}],_0x426ca4=>{if(_0x426ca4){return _0x4405ce(_0x426ca4);}_0x512c33['redirect']('/forgot');});};