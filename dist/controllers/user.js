var a95_0x3c38=['remove','Your\x20account\x20has\x20been\x20deleted.','params','provider','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','passwordResetToken','save','createTransport','SENDGRID_USER','env','SENDGRID_PASSWORD','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','crypto','nodemailer','passport','../models/User','user','render','account/login','postLogin','email','assert','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','redirect','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','isEmail','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','errors','/signup','findOne','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','validationErrors','findById'];(function(_0x3b6812,_0x53f43f){var _0x181d1e=function(_0xa1bac3){while(--_0xa1bac3){_0x3b6812['push'](_0x3b6812['shift']());}};_0x181d1e(++_0x53f43f);}(a95_0x3c38,0x1db));var a95_0x39a8=function(_0x2b0f97,_0x34efaa){_0x2b0f97=_0x2b0f97-0x0;var _0x492ae9=a95_0x3c38[_0x2b0f97];return _0x492ae9;};'use strict';var __importDefault=this&&this[a95_0x39a8('0x0')]||function(_0x326673){return _0x326673&&_0x326673[a95_0x39a8('0x1')]?_0x326673:{'default':_0x326673};};Object['defineProperty'](exports,a95_0x39a8('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a95_0x39a8('0x2')));const nodemailer_1=__importDefault(require(a95_0x39a8('0x3')));const passport_1=__importDefault(require(a95_0x39a8('0x4')));const User_1=__importDefault(require(a95_0x39a8('0x5')));const request=require('express-validator');exports['getLogin']=(_0x27f687,_0x38fcee)=>{if(_0x27f687[a95_0x39a8('0x6')]){return _0x38fcee['redirect']('/');}_0x38fcee[a95_0x39a8('0x7')](a95_0x39a8('0x8'),{'title':'Login'});};exports[a95_0x39a8('0x9')]=(_0x2eaceb,_0x3ea57c,_0x16d663)=>{_0x2eaceb['assert'](a95_0x39a8('0xa'),'Email\x20is\x20not\x20valid')['isEmail']();_0x2eaceb[a95_0x39a8('0xb')]('password',a95_0x39a8('0xc'))[a95_0x39a8('0xd')]();_0x2eaceb[a95_0x39a8('0xe')](a95_0x39a8('0xa'))[a95_0x39a8('0xf')]({'gmail_remove_dots':![]});const _0x7a993f=_0x2eaceb['validationErrors']();if(_0x7a993f){_0x2eaceb[a95_0x39a8('0x10')]('errors',_0x7a993f);return _0x3ea57c[a95_0x39a8('0x11')](a95_0x39a8('0x12'));}passport_1[a95_0x39a8('0x13')][a95_0x39a8('0x14')](a95_0x39a8('0x15'),(_0x4fdf78,_0x1df4c6,_0x44f4f6)=>{if(_0x4fdf78){return _0x16d663(_0x4fdf78);}if(!_0x1df4c6){_0x2eaceb[a95_0x39a8('0x10')]('errors',_0x44f4f6[a95_0x39a8('0x16')]);return _0x3ea57c[a95_0x39a8('0x11')](a95_0x39a8('0x12'));}_0x2eaceb[a95_0x39a8('0x17')](_0x1df4c6,_0x4fdf78=>{if(_0x4fdf78){return _0x16d663(_0x4fdf78);}_0x2eaceb['flash'](a95_0x39a8('0x18'),{'msg':a95_0x39a8('0x19')});_0x3ea57c[a95_0x39a8('0x11')](_0x2eaceb['session'][a95_0x39a8('0x1a')]||'/');});})(_0x2eaceb,_0x3ea57c,_0x16d663);};exports[a95_0x39a8('0x1b')]=(_0x3a3686,_0x4063c9)=>{_0x3a3686[a95_0x39a8('0x1b')]();_0x4063c9['redirect']('/');};exports[a95_0x39a8('0x1c')]=(_0xee2484,_0x1f3489)=>{if(_0xee2484['user']){return _0x1f3489[a95_0x39a8('0x11')]('/');}_0x1f3489[a95_0x39a8('0x7')](a95_0x39a8('0x1d'),{'title':a95_0x39a8('0x1e')});};exports[a95_0x39a8('0x1f')]=(_0x4df539,_0x5111cf,_0x28129d)=>{_0x4df539[a95_0x39a8('0xb')](a95_0x39a8('0xa'),a95_0x39a8('0x20'))[a95_0x39a8('0x21')]();_0x4df539[a95_0x39a8('0xb')](a95_0x39a8('0x22'),a95_0x39a8('0x23'))[a95_0x39a8('0x24')]({'min':0x4});_0x4df539[a95_0x39a8('0xb')]('confirmPassword',a95_0x39a8('0x25'))[a95_0x39a8('0x26')](_0x4df539[a95_0x39a8('0x27')]['password']);_0x4df539[a95_0x39a8('0xe')](a95_0x39a8('0xa'))[a95_0x39a8('0xf')]({'gmail_remove_dots':![]});const _0x2bf5cf=_0x4df539['validationErrors']();if(_0x2bf5cf){_0x4df539[a95_0x39a8('0x10')](a95_0x39a8('0x28'),_0x2bf5cf);return _0x5111cf[a95_0x39a8('0x11')](a95_0x39a8('0x29'));}const _0x16ec81=new User_1[(a95_0x39a8('0x13'))]({'email':_0x4df539[a95_0x39a8('0x27')][a95_0x39a8('0xa')],'password':_0x4df539['body'][a95_0x39a8('0x22')]});User_1['default'][a95_0x39a8('0x2a')]({'email':_0x4df539['body']['email']},(_0xcb3f01,_0x3a9f9c)=>{if(_0xcb3f01){return _0x28129d(_0xcb3f01);}if(_0x3a9f9c){_0x4df539[a95_0x39a8('0x10')](a95_0x39a8('0x28'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x5111cf[a95_0x39a8('0x11')](a95_0x39a8('0x29'));}_0x16ec81['save'](_0xcb3f01=>{if(_0xcb3f01){return _0x28129d(_0xcb3f01);}_0x4df539[a95_0x39a8('0x17')](_0x16ec81,_0xcb3f01=>{if(_0xcb3f01){return _0x28129d(_0xcb3f01);}_0x5111cf[a95_0x39a8('0x11')]('/');});});});};exports[a95_0x39a8('0x2b')]=(_0x2ce112,_0x5d4317)=>{_0x5d4317[a95_0x39a8('0x7')](a95_0x39a8('0x2c'),{'title':a95_0x39a8('0x2d')});};exports[a95_0x39a8('0x2e')]=(_0x5883ff,_0x47d65f,_0x105a4f)=>{_0x5883ff[a95_0x39a8('0xb')](a95_0x39a8('0xa'),a95_0x39a8('0x2f'))[a95_0x39a8('0x21')]();_0x5883ff[a95_0x39a8('0xe')](a95_0x39a8('0xa'))[a95_0x39a8('0xf')]({'gmail_remove_dots':![]});const _0x3c0d90=_0x5883ff['validationErrors']();if(_0x3c0d90){_0x5883ff['flash'](a95_0x39a8('0x28'),_0x3c0d90);return _0x47d65f[a95_0x39a8('0x11')](a95_0x39a8('0x30'));}User_1[a95_0x39a8('0x13')]['findById'](_0x5883ff['user']['id'],(_0x2a584a,_0x4fe7cd)=>{if(_0x2a584a){return _0x105a4f(_0x2a584a);}_0x4fe7cd[a95_0x39a8('0xa')]=_0x5883ff[a95_0x39a8('0x27')][a95_0x39a8('0xa')]||'';_0x4fe7cd[a95_0x39a8('0x31')][a95_0x39a8('0x32')]=_0x5883ff[a95_0x39a8('0x27')][a95_0x39a8('0x32')]||'';_0x4fe7cd[a95_0x39a8('0x31')][a95_0x39a8('0x33')]=_0x5883ff[a95_0x39a8('0x27')][a95_0x39a8('0x33')]||'';_0x4fe7cd[a95_0x39a8('0x31')][a95_0x39a8('0x34')]=_0x5883ff[a95_0x39a8('0x27')]['location']||'';_0x4fe7cd[a95_0x39a8('0x31')][a95_0x39a8('0x35')]=_0x5883ff[a95_0x39a8('0x27')][a95_0x39a8('0x35')]||'';_0x4fe7cd['save'](_0x2a584a=>{if(_0x2a584a){if(_0x2a584a['code']===0x2af8){_0x5883ff['flash']('errors',{'msg':a95_0x39a8('0x36')});return _0x47d65f[a95_0x39a8('0x11')](a95_0x39a8('0x30'));}return _0x105a4f(_0x2a584a);}_0x5883ff[a95_0x39a8('0x10')](a95_0x39a8('0x18'),{'msg':a95_0x39a8('0x37')});_0x47d65f[a95_0x39a8('0x11')](a95_0x39a8('0x30'));});});};exports[a95_0x39a8('0x38')]=(_0x5ef826,_0x4aed98,_0x2bc41e)=>{_0x5ef826[a95_0x39a8('0xb')](a95_0x39a8('0x22'),a95_0x39a8('0x23'))['len']({'min':0x4});_0x5ef826['assert'](a95_0x39a8('0x39'),a95_0x39a8('0x25'))[a95_0x39a8('0x26')](_0x5ef826[a95_0x39a8('0x27')]['password']);const _0x2e0de1=_0x5ef826[a95_0x39a8('0x3a')]();if(_0x2e0de1){_0x5ef826['flash'](a95_0x39a8('0x28'),_0x2e0de1);return _0x4aed98[a95_0x39a8('0x11')](a95_0x39a8('0x30'));}User_1['default'][a95_0x39a8('0x3b')](_0x5ef826[a95_0x39a8('0x6')]['id'],(_0xe92096,_0x3a47d8)=>{if(_0xe92096){return _0x2bc41e(_0xe92096);}_0x3a47d8[a95_0x39a8('0x22')]=_0x5ef826[a95_0x39a8('0x27')][a95_0x39a8('0x22')];_0x3a47d8['save'](_0xe92096=>{if(_0xe92096){return _0x2bc41e(_0xe92096);}_0x5ef826['flash'](a95_0x39a8('0x18'),{'msg':'Password\x20has\x20been\x20changed.'});_0x4aed98[a95_0x39a8('0x11')]('/account');});});};exports['postDeleteAccount']=(_0x50375e,_0x2aad84,_0x266802)=>{User_1['default'][a95_0x39a8('0x3c')]({'_id':_0x50375e[a95_0x39a8('0x6')]['id']},_0x426de8=>{if(_0x426de8){return _0x266802(_0x426de8);}_0x50375e[a95_0x39a8('0x1b')]();_0x50375e['flash']('info',{'msg':a95_0x39a8('0x3d')});_0x2aad84[a95_0x39a8('0x11')]('/');});};exports['getOauthUnlink']=(_0x15fbfc,_0x309ba0,_0x4e681f)=>{const _0x24852c=_0x15fbfc[a95_0x39a8('0x3e')][a95_0x39a8('0x3f')];User_1[a95_0x39a8('0x13')][a95_0x39a8('0x3b')](_0x15fbfc[a95_0x39a8('0x6')]['id'],(_0x2923e7,_0x5ad306)=>{if(_0x2923e7){return _0x4e681f(_0x2923e7);}_0x5ad306[_0x24852c]=undefined;_0x5ad306['tokens']=_0x5ad306['tokens'][a95_0x39a8('0x40')](_0x2e62bc=>_0x2e62bc[a95_0x39a8('0x41')]!==_0x24852c);_0x5ad306['save'](_0x2923e7=>{if(_0x2923e7){return _0x4e681f(_0x2923e7);}_0x15fbfc[a95_0x39a8('0x10')](a95_0x39a8('0x42'),{'msg':_0x24852c+a95_0x39a8('0x43')});_0x309ba0[a95_0x39a8('0x11')](a95_0x39a8('0x30'));});});};exports[a95_0x39a8('0x44')]=(_0x3a62b2,_0x26db6d,_0x455c46)=>{if(_0x3a62b2[a95_0x39a8('0x45')]()){return _0x26db6d[a95_0x39a8('0x11')]('/');}User_1[a95_0x39a8('0x13')]['findOne']({'passwordResetToken':_0x3a62b2[a95_0x39a8('0x3e')][a95_0x39a8('0x46')]})[a95_0x39a8('0x47')](a95_0x39a8('0x48'))['gt'](Date[a95_0x39a8('0x49')]())[a95_0x39a8('0x4a')]((_0x1a7458,_0x33ffd7)=>{if(_0x1a7458){return _0x455c46(_0x1a7458);}if(!_0x33ffd7){_0x3a62b2[a95_0x39a8('0x10')](a95_0x39a8('0x28'),{'msg':a95_0x39a8('0x4b')});return _0x26db6d[a95_0x39a8('0x11')](a95_0x39a8('0x4c'));}_0x26db6d['render']('account/reset',{'title':a95_0x39a8('0x4d')});});};exports[a95_0x39a8('0x4e')]=(_0x3d7b3d,_0x4767c3,_0x4908ed)=>{_0x3d7b3d['assert'](a95_0x39a8('0x22'),a95_0x39a8('0x4f'))[a95_0x39a8('0x24')]({'min':0x4});_0x3d7b3d['assert'](a95_0x39a8('0x50'),a95_0x39a8('0x51'))[a95_0x39a8('0x26')](_0x3d7b3d['body'][a95_0x39a8('0x22')]);const _0x4783dc=_0x3d7b3d[a95_0x39a8('0x3a')]();if(_0x4783dc){_0x3d7b3d[a95_0x39a8('0x10')]('errors',_0x4783dc);return _0x4767c3[a95_0x39a8('0x11')]('back');}async_1[a95_0x39a8('0x13')][a95_0x39a8('0x52')]([function resetPassword(_0x300ade){User_1[a95_0x39a8('0x13')][a95_0x39a8('0x2a')]({'passwordResetToken':_0x3d7b3d[a95_0x39a8('0x3e')][a95_0x39a8('0x46')]})[a95_0x39a8('0x47')]('passwordResetExpires')['gt'](Date[a95_0x39a8('0x49')]())['exec']((_0x26b552,_0x46d1e6)=>{if(_0x26b552){return _0x4908ed(_0x26b552);}if(!_0x46d1e6){_0x3d7b3d['flash'](a95_0x39a8('0x28'),{'msg':a95_0x39a8('0x4b')});return _0x4767c3['redirect']('back');}_0x46d1e6[a95_0x39a8('0x22')]=_0x3d7b3d['body'][a95_0x39a8('0x22')];_0x46d1e6[a95_0x39a8('0x53')]=undefined;_0x46d1e6[a95_0x39a8('0x48')]=undefined;_0x46d1e6[a95_0x39a8('0x54')](_0x26b552=>{if(_0x26b552){return _0x4908ed(_0x26b552);}_0x3d7b3d['logIn'](_0x46d1e6,_0x26b552=>{_0x300ade(_0x26b552,_0x46d1e6);});});});},function sendResetPasswordEmail(_0x14ceec,_0x135d89){const _0x58a39a=nodemailer_1[a95_0x39a8('0x13')][a95_0x39a8('0x55')]({'service':'SendGrid','auth':{'user':process['env'][a95_0x39a8('0x56')],'pass':process[a95_0x39a8('0x57')][a95_0x39a8('0x58')]}});const _0x3e477f={'to':_0x14ceec[a95_0x39a8('0xa')],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':a95_0x39a8('0x59')+_0x14ceec[a95_0x39a8('0xa')]+a95_0x39a8('0x5a')};_0x58a39a['sendMail'](_0x3e477f,_0x1e8834=>{_0x3d7b3d[a95_0x39a8('0x10')](a95_0x39a8('0x18'),{'msg':a95_0x39a8('0x5b')});_0x135d89(_0x1e8834);});}],_0x2eddb4=>{if(_0x2eddb4){return _0x4908ed(_0x2eddb4);}_0x4767c3[a95_0x39a8('0x11')]('/');});};exports[a95_0x39a8('0x5c')]=(_0xc1ccf3,_0x2839e4)=>{if(_0xc1ccf3[a95_0x39a8('0x45')]()){return _0x2839e4[a95_0x39a8('0x11')]('/');}_0x2839e4[a95_0x39a8('0x7')](a95_0x39a8('0x5d'),{'title':a95_0x39a8('0x5e')});};exports[a95_0x39a8('0x5f')]=(_0x27bf22,_0x2f9a18,_0x93b5ca)=>{_0x27bf22[a95_0x39a8('0xb')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x27bf22[a95_0x39a8('0xe')](a95_0x39a8('0xa'))[a95_0x39a8('0xf')]({'gmail_remove_dots':![]});const _0x52c62f=_0x27bf22[a95_0x39a8('0x3a')]();if(_0x52c62f){_0x27bf22['flash']('errors',_0x52c62f);return _0x2f9a18['redirect'](a95_0x39a8('0x4c'));}async_1[a95_0x39a8('0x13')][a95_0x39a8('0x52')]([function createRandomToken(_0x2a9101){crypto_1[a95_0x39a8('0x13')][a95_0x39a8('0x60')](0x10,(_0x39563f,_0x5d9087)=>{const _0x44da11=_0x5d9087[a95_0x39a8('0x61')]('hex');_0x2a9101(_0x39563f,_0x44da11);});},function setRandomToken(_0x64ea6,_0x48bbe8){User_1[a95_0x39a8('0x13')][a95_0x39a8('0x2a')]({'email':_0x27bf22[a95_0x39a8('0x27')][a95_0x39a8('0xa')]},(_0x2e6754,_0x20aa81)=>{if(_0x2e6754){return _0x48bbe8(_0x2e6754);}if(!_0x20aa81){_0x27bf22[a95_0x39a8('0x10')](a95_0x39a8('0x28'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x2f9a18['redirect']('/forgot');}_0x20aa81[a95_0x39a8('0x53')]=_0x64ea6;_0x20aa81[a95_0x39a8('0x48')]=Date[a95_0x39a8('0x49')]()+0x36ee80;_0x20aa81[a95_0x39a8('0x54')](_0x2e6754=>{_0x48bbe8(_0x2e6754,_0x64ea6,_0x20aa81);});});},function sendForgotPasswordEmail(_0x26b193,_0xcad4e1,_0x5bac0e){const _0x119fad=nodemailer_1[a95_0x39a8('0x13')][a95_0x39a8('0x55')]({'service':a95_0x39a8('0x62'),'auth':{'user':process[a95_0x39a8('0x57')][a95_0x39a8('0x56')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x432c1a={'to':_0xcad4e1[a95_0x39a8('0xa')],'from':a95_0x39a8('0x63'),'subject':a95_0x39a8('0x64'),'text':a95_0x39a8('0x65')+_0x27bf22[a95_0x39a8('0x66')]['host']+a95_0x39a8('0x67')+_0x26b193+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x119fad[a95_0x39a8('0x68')](_0x432c1a,_0x4a1bd4=>{_0x27bf22[a95_0x39a8('0x10')](a95_0x39a8('0x42'),{'msg':a95_0x39a8('0x69')+_0xcad4e1['email']+a95_0x39a8('0x6a')});_0x5bac0e(_0x4a1bd4);});}],_0x1afede=>{if(_0x1afede){return _0x93b5ca(_0x1afede);}_0x2f9a18['redirect'](a95_0x39a8('0x4c'));});};