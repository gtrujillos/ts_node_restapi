var a95_0x5a48=['findById','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','len','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','getOauthUnlink','params','provider','tokens','filter','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetExpires','now','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x20with\x20further\x20instructions.','async','nodemailer','getLogin','redirect','render','account/login','Login','postLogin','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','email','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','message','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','account/signup','Create\x20Account','postSignup','assert','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','sanitize','findOne','/signup','save','logIn','account/profile','postUpdateProfile','/account'];(function(_0x27ed5e,_0x89cfae){var _0x1c5565=function(_0x3f1364){while(--_0x3f1364){_0x27ed5e['push'](_0x27ed5e['shift']());}};_0x1c5565(++_0x89cfae);}(a95_0x5a48,0x186));var a95_0x2455=function(_0x364726,_0x26b445){_0x364726=_0x364726-0x0;var _0x34249c=a95_0x5a48[_0x364726];return _0x34249c;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2743a1){return _0x2743a1&&_0x2743a1['__esModule']?_0x2743a1:{'default':_0x2743a1};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a95_0x2455('0x0')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a95_0x2455('0x1')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a95_0x2455('0x2')]=(_0x2231f6,_0x17af53)=>{if(_0x2231f6['user']){return _0x17af53[a95_0x2455('0x3')]('/');}_0x17af53[a95_0x2455('0x4')](a95_0x2455('0x5'),{'title':a95_0x2455('0x6')});};exports[a95_0x2455('0x7')]=(_0x234439,_0x22883f,_0x2b0ce7)=>{_0x234439['assert']('email',a95_0x2455('0x8'))[a95_0x2455('0x9')]();_0x234439['assert'](a95_0x2455('0xa'),a95_0x2455('0xb'))[a95_0x2455('0xc')]();_0x234439['sanitize'](a95_0x2455('0xd'))[a95_0x2455('0xe')]({'gmail_remove_dots':![]});const _0x565f3d=_0x234439[a95_0x2455('0xf')]();if(_0x565f3d){_0x234439[a95_0x2455('0x10')](a95_0x2455('0x11'),_0x565f3d);return _0x22883f[a95_0x2455('0x3')](a95_0x2455('0x12'));}passport_1[a95_0x2455('0x13')][a95_0x2455('0x14')]('local',(_0x294411,_0x582bef,_0x5456ef)=>{if(_0x294411){return _0x2b0ce7(_0x294411);}if(!_0x582bef){_0x234439[a95_0x2455('0x10')](a95_0x2455('0x11'),_0x5456ef[a95_0x2455('0x15')]);return _0x22883f[a95_0x2455('0x3')](a95_0x2455('0x12'));}_0x234439['logIn'](_0x582bef,_0x294411=>{if(_0x294411){return _0x2b0ce7(_0x294411);}_0x234439[a95_0x2455('0x10')](a95_0x2455('0x16'),{'msg':a95_0x2455('0x17')});_0x22883f[a95_0x2455('0x3')](_0x234439[a95_0x2455('0x18')][a95_0x2455('0x19')]||'/');});})(_0x234439,_0x22883f,_0x2b0ce7);};exports[a95_0x2455('0x1a')]=(_0x45b5ec,_0x37301e)=>{_0x45b5ec[a95_0x2455('0x1a')]();_0x37301e[a95_0x2455('0x3')]('/');};exports[a95_0x2455('0x1b')]=(_0x428a03,_0x174a3d)=>{if(_0x428a03[a95_0x2455('0x1c')]){return _0x174a3d[a95_0x2455('0x3')]('/');}_0x174a3d['render'](a95_0x2455('0x1d'),{'title':a95_0x2455('0x1e')});};exports[a95_0x2455('0x1f')]=(_0x291e94,_0x599768,_0xf205bf)=>{_0x291e94[a95_0x2455('0x20')](a95_0x2455('0xd'),a95_0x2455('0x8'))[a95_0x2455('0x9')]();_0x291e94['assert'](a95_0x2455('0xa'),a95_0x2455('0x21'))['len']({'min':0x4});_0x291e94[a95_0x2455('0x20')](a95_0x2455('0x22'),a95_0x2455('0x23'))[a95_0x2455('0x24')](_0x291e94[a95_0x2455('0x25')][a95_0x2455('0xa')]);_0x291e94[a95_0x2455('0x26')](a95_0x2455('0xd'))[a95_0x2455('0xe')]({'gmail_remove_dots':![]});const _0x3a7e9b=_0x291e94[a95_0x2455('0xf')]();if(_0x3a7e9b){_0x291e94['flash']('errors',_0x3a7e9b);return _0x599768[a95_0x2455('0x3')]('/signup');}const _0x27857e=new User_1[(a95_0x2455('0x13'))]({'email':_0x291e94['body'][a95_0x2455('0xd')],'password':_0x291e94[a95_0x2455('0x25')]['password']});User_1['default'][a95_0x2455('0x27')]({'email':_0x291e94[a95_0x2455('0x25')]['email']},(_0x300874,_0xc4b3d1)=>{if(_0x300874){return _0xf205bf(_0x300874);}if(_0xc4b3d1){_0x291e94[a95_0x2455('0x10')](a95_0x2455('0x11'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x599768[a95_0x2455('0x3')](a95_0x2455('0x28'));}_0x27857e[a95_0x2455('0x29')](_0x300874=>{if(_0x300874){return _0xf205bf(_0x300874);}_0x291e94[a95_0x2455('0x2a')](_0x27857e,_0x300874=>{if(_0x300874){return _0xf205bf(_0x300874);}_0x599768[a95_0x2455('0x3')]('/');});});});};exports['getAccount']=(_0x52558f,_0x1df954)=>{_0x1df954[a95_0x2455('0x4')](a95_0x2455('0x2b'),{'title':'Account\x20Management'});};exports[a95_0x2455('0x2c')]=(_0xd60439,_0x5e2066,_0x1f1e4d)=>{_0xd60439[a95_0x2455('0x20')](a95_0x2455('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x2455('0x9')]();_0xd60439[a95_0x2455('0x26')](a95_0x2455('0xd'))[a95_0x2455('0xe')]({'gmail_remove_dots':![]});const _0x3d77d5=_0xd60439[a95_0x2455('0xf')]();if(_0x3d77d5){_0xd60439[a95_0x2455('0x10')]('errors',_0x3d77d5);return _0x5e2066['redirect'](a95_0x2455('0x2d'));}User_1[a95_0x2455('0x13')][a95_0x2455('0x2e')](_0xd60439[a95_0x2455('0x1c')]['id'],(_0x3a73e9,_0x52af5b)=>{if(_0x3a73e9){return _0x1f1e4d(_0x3a73e9);}_0x52af5b['email']=_0xd60439[a95_0x2455('0x25')][a95_0x2455('0xd')]||'';_0x52af5b['profile']['name']=_0xd60439['body'][a95_0x2455('0x2f')]||'';_0x52af5b[a95_0x2455('0x30')][a95_0x2455('0x31')]=_0xd60439[a95_0x2455('0x25')][a95_0x2455('0x31')]||'';_0x52af5b[a95_0x2455('0x30')][a95_0x2455('0x32')]=_0xd60439['body'][a95_0x2455('0x32')]||'';_0x52af5b[a95_0x2455('0x30')][a95_0x2455('0x33')]=_0xd60439[a95_0x2455('0x25')][a95_0x2455('0x33')]||'';_0x52af5b[a95_0x2455('0x29')](_0x3a73e9=>{if(_0x3a73e9){if(_0x3a73e9[a95_0x2455('0x34')]===0x2af8){_0xd60439[a95_0x2455('0x10')](a95_0x2455('0x11'),{'msg':a95_0x2455('0x35')});return _0x5e2066['redirect'](a95_0x2455('0x2d'));}return _0x1f1e4d(_0x3a73e9);}_0xd60439[a95_0x2455('0x10')](a95_0x2455('0x16'),{'msg':a95_0x2455('0x36')});_0x5e2066[a95_0x2455('0x3')](a95_0x2455('0x2d'));});});};exports['postUpdatePassword']=(_0x3bbebe,_0xebf6ee,_0x57b72c)=>{_0x3bbebe[a95_0x2455('0x20')](a95_0x2455('0xa'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x2455('0x37')]({'min':0x4});_0x3bbebe[a95_0x2455('0x20')]('confirmPassword','Passwords\x20do\x20not\x20match')[a95_0x2455('0x24')](_0x3bbebe[a95_0x2455('0x25')][a95_0x2455('0xa')]);const _0x3110ab=_0x3bbebe[a95_0x2455('0xf')]();if(_0x3110ab){_0x3bbebe[a95_0x2455('0x10')](a95_0x2455('0x11'),_0x3110ab);return _0xebf6ee[a95_0x2455('0x3')](a95_0x2455('0x2d'));}User_1[a95_0x2455('0x13')]['findById'](_0x3bbebe[a95_0x2455('0x1c')]['id'],(_0x5ee44f,_0x1ec316)=>{if(_0x5ee44f){return _0x57b72c(_0x5ee44f);}_0x1ec316['password']=_0x3bbebe['body'][a95_0x2455('0xa')];_0x1ec316[a95_0x2455('0x29')](_0x5ee44f=>{if(_0x5ee44f){return _0x57b72c(_0x5ee44f);}_0x3bbebe[a95_0x2455('0x10')](a95_0x2455('0x16'),{'msg':a95_0x2455('0x38')});_0xebf6ee[a95_0x2455('0x3')](a95_0x2455('0x2d'));});});};exports[a95_0x2455('0x39')]=(_0x5b287f,_0x388a72,_0x4ba096)=>{User_1[a95_0x2455('0x13')][a95_0x2455('0x3a')]({'_id':_0x5b287f[a95_0x2455('0x1c')]['id']},_0x241e8a=>{if(_0x241e8a){return _0x4ba096(_0x241e8a);}_0x5b287f[a95_0x2455('0x1a')]();_0x5b287f[a95_0x2455('0x10')](a95_0x2455('0x3b'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x388a72[a95_0x2455('0x3')]('/');});};exports[a95_0x2455('0x3c')]=(_0x4e7b29,_0x5a1544,_0x1829a9)=>{const _0x183afa=_0x4e7b29[a95_0x2455('0x3d')][a95_0x2455('0x3e')];User_1[a95_0x2455('0x13')]['findById'](_0x4e7b29[a95_0x2455('0x1c')]['id'],(_0x40f08f,_0x3a35e3)=>{if(_0x40f08f){return _0x1829a9(_0x40f08f);}_0x3a35e3[_0x183afa]=undefined;_0x3a35e3[a95_0x2455('0x3f')]=_0x3a35e3[a95_0x2455('0x3f')][a95_0x2455('0x40')](_0x2ee62d=>_0x2ee62d['kind']!==_0x183afa);_0x3a35e3[a95_0x2455('0x29')](_0x40f08f=>{if(_0x40f08f){return _0x1829a9(_0x40f08f);}_0x4e7b29['flash'](a95_0x2455('0x3b'),{'msg':_0x183afa+a95_0x2455('0x41')});_0x5a1544['redirect'](a95_0x2455('0x2d'));});});};exports['getReset']=(_0x2c1872,_0x56e5b3,_0x5c56f5)=>{if(_0x2c1872[a95_0x2455('0x42')]()){return _0x56e5b3['redirect']('/');}User_1[a95_0x2455('0x13')][a95_0x2455('0x27')]({'passwordResetToken':_0x2c1872[a95_0x2455('0x3d')][a95_0x2455('0x43')]})[a95_0x2455('0x44')]('passwordResetExpires')['gt'](Date['now']())[a95_0x2455('0x45')]((_0x2360f9,_0x348bbc)=>{if(_0x2360f9){return _0x5c56f5(_0x2360f9);}if(!_0x348bbc){_0x2c1872[a95_0x2455('0x10')](a95_0x2455('0x11'),{'msg':a95_0x2455('0x46')});return _0x56e5b3['redirect'](a95_0x2455('0x47'));}_0x56e5b3[a95_0x2455('0x4')](a95_0x2455('0x48'),{'title':a95_0x2455('0x49')});});};exports[a95_0x2455('0x4a')]=(_0x3a18d7,_0x36828d,_0x5d505e)=>{_0x3a18d7[a95_0x2455('0x20')](a95_0x2455('0xa'),a95_0x2455('0x4b'))[a95_0x2455('0x37')]({'min':0x4});_0x3a18d7[a95_0x2455('0x20')](a95_0x2455('0x4c'),a95_0x2455('0x4d'))[a95_0x2455('0x24')](_0x3a18d7[a95_0x2455('0x25')]['password']);const _0x11efad=_0x3a18d7['validationErrors']();if(_0x11efad){_0x3a18d7['flash'](a95_0x2455('0x11'),_0x11efad);return _0x36828d[a95_0x2455('0x3')](a95_0x2455('0x4e'));}async_1[a95_0x2455('0x13')][a95_0x2455('0x4f')]([function resetPassword(_0x355bb1){User_1[a95_0x2455('0x13')][a95_0x2455('0x27')]({'passwordResetToken':_0x3a18d7['params'][a95_0x2455('0x43')]})['where'](a95_0x2455('0x50'))['gt'](Date[a95_0x2455('0x51')]())['exec']((_0x3aad16,_0x4333e5)=>{if(_0x3aad16){return _0x5d505e(_0x3aad16);}if(!_0x4333e5){_0x3a18d7['flash'](a95_0x2455('0x11'),{'msg':a95_0x2455('0x46')});return _0x36828d['redirect'](a95_0x2455('0x4e'));}_0x4333e5[a95_0x2455('0xa')]=_0x3a18d7[a95_0x2455('0x25')][a95_0x2455('0xa')];_0x4333e5[a95_0x2455('0x52')]=undefined;_0x4333e5[a95_0x2455('0x50')]=undefined;_0x4333e5[a95_0x2455('0x29')](_0x3aad16=>{if(_0x3aad16){return _0x5d505e(_0x3aad16);}_0x3a18d7[a95_0x2455('0x2a')](_0x4333e5,_0x3aad16=>{_0x355bb1(_0x3aad16,_0x4333e5);});});});},function sendResetPasswordEmail(_0x41da85,_0x3f893c){const _0xac64dc=nodemailer_1[a95_0x2455('0x13')][a95_0x2455('0x53')]({'service':a95_0x2455('0x54'),'auth':{'user':process[a95_0x2455('0x55')][a95_0x2455('0x56')],'pass':process[a95_0x2455('0x55')][a95_0x2455('0x57')]}});const _0x21a4c0={'to':_0x41da85[a95_0x2455('0xd')],'from':a95_0x2455('0x58'),'subject':a95_0x2455('0x59'),'text':a95_0x2455('0x5a')+_0x41da85['email']+a95_0x2455('0x5b')};_0xac64dc[a95_0x2455('0x5c')](_0x21a4c0,_0x238a91=>{_0x3a18d7[a95_0x2455('0x10')](a95_0x2455('0x16'),{'msg':a95_0x2455('0x5d')});_0x3f893c(_0x238a91);});}],_0xa3e103=>{if(_0xa3e103){return _0x5d505e(_0xa3e103);}_0x36828d[a95_0x2455('0x3')]('/');});};exports[a95_0x2455('0x5e')]=(_0xb13027,_0x38dbbb)=>{if(_0xb13027[a95_0x2455('0x42')]()){return _0x38dbbb[a95_0x2455('0x3')]('/');}_0x38dbbb[a95_0x2455('0x4')](a95_0x2455('0x5f'),{'title':a95_0x2455('0x60')});};exports[a95_0x2455('0x61')]=(_0x38da9e,_0x48abef,_0x563514)=>{_0x38da9e[a95_0x2455('0x20')](a95_0x2455('0xd'),a95_0x2455('0x62'))[a95_0x2455('0x9')]();_0x38da9e[a95_0x2455('0x26')](a95_0x2455('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x5a8463=_0x38da9e['validationErrors']();if(_0x5a8463){_0x38da9e[a95_0x2455('0x10')]('errors',_0x5a8463);return _0x48abef[a95_0x2455('0x3')](a95_0x2455('0x47'));}async_1[a95_0x2455('0x13')]['waterfall']([function createRandomToken(_0x1797ea){crypto_1[a95_0x2455('0x13')][a95_0x2455('0x63')](0x10,(_0x2154ed,_0x2dd29b)=>{const _0x67ce4d=_0x2dd29b[a95_0x2455('0x64')](a95_0x2455('0x65'));_0x1797ea(_0x2154ed,_0x67ce4d);});},function setRandomToken(_0x540107,_0x5c836a){User_1[a95_0x2455('0x13')]['findOne']({'email':_0x38da9e[a95_0x2455('0x25')][a95_0x2455('0xd')]},(_0x2ea177,_0x19cdb1)=>{if(_0x2ea177){return _0x5c836a(_0x2ea177);}if(!_0x19cdb1){_0x38da9e[a95_0x2455('0x10')]('errors',{'msg':a95_0x2455('0x66')});return _0x48abef[a95_0x2455('0x3')]('/forgot');}_0x19cdb1[a95_0x2455('0x52')]=_0x540107;_0x19cdb1['passwordResetExpires']=Date[a95_0x2455('0x51')]()+0x36ee80;_0x19cdb1[a95_0x2455('0x29')](_0x2ea177=>{_0x5c836a(_0x2ea177,_0x540107,_0x19cdb1);});});},function sendForgotPasswordEmail(_0x4f8fc4,_0x374c60,_0x3016f2){const _0x59841c=nodemailer_1['default']['createTransport']({'service':a95_0x2455('0x54'),'auth':{'user':process[a95_0x2455('0x55')][a95_0x2455('0x56')],'pass':process[a95_0x2455('0x55')]['SENDGRID_PASSWORD']}});const _0x3423dd={'to':_0x374c60['email'],'from':a95_0x2455('0x67'),'subject':a95_0x2455('0x68'),'text':a95_0x2455('0x69')+_0x38da9e[a95_0x2455('0x6a')][a95_0x2455('0x6b')]+'/reset/'+_0x4f8fc4+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x59841c[a95_0x2455('0x5c')](_0x3423dd,_0x4d24f0=>{_0x38da9e[a95_0x2455('0x10')](a95_0x2455('0x3b'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x374c60['email']+a95_0x2455('0x6c')});_0x3016f2(_0x4d24f0);});}],_0x171b41=>{if(_0x171b41){return _0x563514(_0x171b41);}_0x48abef[a95_0x2455('0x3')](a95_0x2455('0x47'));});};