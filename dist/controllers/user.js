var a95_0x3aa6=['email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','validationErrors','flash','errors','redirect','/login','default','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','normalizeEmail','/signup','findOne','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','user','name','profile','gender','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','waterfall','now','passwordResetToken','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','Forgot\x20Password','postForgot','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','/forgot','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','async','crypto','nodemailer','passport','express-validator','getLogin','render','account/login','Login','assert'];(function(_0x2094dd,_0x34e824){var _0x35d01e=function(_0x3c5eb9){while(--_0x3c5eb9){_0x2094dd['push'](_0x2094dd['shift']());}};_0x35d01e(++_0x34e824);}(a95_0x3aa6,0xc9));var a95_0x1bfd=function(_0x37dfe4,_0x7831ad){_0x37dfe4=_0x37dfe4-0x0;var _0x116804=a95_0x3aa6[_0x37dfe4];return _0x116804;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x39804a){return _0x39804a&&_0x39804a[a95_0x1bfd('0x0')]?_0x39804a:{'default':_0x39804a};};Object['defineProperty'](exports,a95_0x1bfd('0x0'),{'value':!![]});const async_1=__importDefault(require(a95_0x1bfd('0x1')));const crypto_1=__importDefault(require(a95_0x1bfd('0x2')));const nodemailer_1=__importDefault(require(a95_0x1bfd('0x3')));const passport_1=__importDefault(require(a95_0x1bfd('0x4')));const User_1=__importDefault(require('../models/User'));const request=require(a95_0x1bfd('0x5'));exports[a95_0x1bfd('0x6')]=(_0x464f99,_0x586b78)=>{if(_0x464f99['user']){return _0x586b78['redirect']('/');}_0x586b78[a95_0x1bfd('0x7')](a95_0x1bfd('0x8'),{'title':a95_0x1bfd('0x9')});};exports['postLogin']=(_0xd30dac,_0x105079,_0x27ef67)=>{_0xd30dac[a95_0x1bfd('0xa')](a95_0x1bfd('0xb'),a95_0x1bfd('0xc'))[a95_0x1bfd('0xd')]();_0xd30dac[a95_0x1bfd('0xa')](a95_0x1bfd('0xe'),a95_0x1bfd('0xf'))[a95_0x1bfd('0x10')]();_0xd30dac[a95_0x1bfd('0x11')](a95_0x1bfd('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x493599=_0xd30dac[a95_0x1bfd('0x12')]();if(_0x493599){_0xd30dac[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),_0x493599);return _0x105079[a95_0x1bfd('0x15')](a95_0x1bfd('0x16'));}passport_1[a95_0x1bfd('0x17')]['authenticate'](a95_0x1bfd('0x18'),(_0x564922,_0x1f1405,_0x2cd3d3)=>{if(_0x564922){return _0x27ef67(_0x564922);}if(!_0x1f1405){_0xd30dac[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),_0x2cd3d3[a95_0x1bfd('0x19')]);return _0x105079[a95_0x1bfd('0x15')](a95_0x1bfd('0x16'));}_0xd30dac[a95_0x1bfd('0x1a')](_0x1f1405,_0x564922=>{if(_0x564922){return _0x27ef67(_0x564922);}_0xd30dac[a95_0x1bfd('0x13')](a95_0x1bfd('0x1b'),{'msg':a95_0x1bfd('0x1c')});_0x105079[a95_0x1bfd('0x15')](_0xd30dac['session']['returnTo']||'/');});})(_0xd30dac,_0x105079,_0x27ef67);};exports['logout']=(_0x4d6944,_0x2f07a3)=>{_0x4d6944[a95_0x1bfd('0x1d')]();_0x2f07a3['redirect']('/');};exports[a95_0x1bfd('0x1e')]=(_0x2695c3,_0x571552)=>{if(_0x2695c3['user']){return _0x571552['redirect']('/');}_0x571552['render'](a95_0x1bfd('0x1f'),{'title':a95_0x1bfd('0x20')});};exports[a95_0x1bfd('0x21')]=(_0x586086,_0x282f84,_0x1ba9c2)=>{_0x586086[a95_0x1bfd('0xa')](a95_0x1bfd('0xb'),a95_0x1bfd('0xc'))['isEmail']();_0x586086[a95_0x1bfd('0xa')](a95_0x1bfd('0xe'),a95_0x1bfd('0x22'))[a95_0x1bfd('0x23')]({'min':0x4});_0x586086[a95_0x1bfd('0xa')](a95_0x1bfd('0x24'),a95_0x1bfd('0x25'))[a95_0x1bfd('0x26')](_0x586086['body'][a95_0x1bfd('0xe')]);_0x586086[a95_0x1bfd('0x11')]('email')[a95_0x1bfd('0x27')]({'gmail_remove_dots':![]});const _0x5d08b0=_0x586086[a95_0x1bfd('0x12')]();if(_0x5d08b0){_0x586086['flash']('errors',_0x5d08b0);return _0x282f84['redirect'](a95_0x1bfd('0x28'));}const _0x34b938=new User_1[(a95_0x1bfd('0x17'))]({'email':_0x586086['body'][a95_0x1bfd('0xb')],'password':_0x586086['body'][a95_0x1bfd('0xe')]});User_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x29')]({'email':_0x586086[a95_0x1bfd('0x2a')]['email']},(_0x5907c5,_0x40152f)=>{if(_0x5907c5){return _0x1ba9c2(_0x5907c5);}if(_0x40152f){_0x586086[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),{'msg':a95_0x1bfd('0x2b')});return _0x282f84['redirect'](a95_0x1bfd('0x28'));}_0x34b938[a95_0x1bfd('0x2c')](_0x5907c5=>{if(_0x5907c5){return _0x1ba9c2(_0x5907c5);}_0x586086['logIn'](_0x34b938,_0x5907c5=>{if(_0x5907c5){return _0x1ba9c2(_0x5907c5);}_0x282f84['redirect']('/');});});});};exports[a95_0x1bfd('0x2d')]=(_0x4ed51d,_0x45c1f6)=>{_0x45c1f6[a95_0x1bfd('0x7')]('account/profile',{'title':'Account\x20Management'});};exports[a95_0x1bfd('0x2e')]=(_0x473e5f,_0x4d9332,_0x4339ab)=>{_0x473e5f[a95_0x1bfd('0xa')](a95_0x1bfd('0xb'),a95_0x1bfd('0x2f'))[a95_0x1bfd('0xd')]();_0x473e5f[a95_0x1bfd('0x11')]('email')[a95_0x1bfd('0x27')]({'gmail_remove_dots':![]});const _0x10a05b=_0x473e5f['validationErrors']();if(_0x10a05b){_0x473e5f[a95_0x1bfd('0x13')]('errors',_0x10a05b);return _0x4d9332['redirect'](a95_0x1bfd('0x30'));}User_1[a95_0x1bfd('0x17')]['findById'](_0x473e5f[a95_0x1bfd('0x31')]['id'],(_0x528824,_0x1bedce)=>{if(_0x528824){return _0x4339ab(_0x528824);}_0x1bedce[a95_0x1bfd('0xb')]=_0x473e5f['body'][a95_0x1bfd('0xb')]||'';_0x1bedce['profile'][a95_0x1bfd('0x32')]=_0x473e5f['body'][a95_0x1bfd('0x32')]||'';_0x1bedce[a95_0x1bfd('0x33')][a95_0x1bfd('0x34')]=_0x473e5f[a95_0x1bfd('0x2a')][a95_0x1bfd('0x34')]||'';_0x1bedce[a95_0x1bfd('0x33')]['location']=_0x473e5f['body']['location']||'';_0x1bedce[a95_0x1bfd('0x33')][a95_0x1bfd('0x35')]=_0x473e5f[a95_0x1bfd('0x2a')][a95_0x1bfd('0x35')]||'';_0x1bedce[a95_0x1bfd('0x2c')](_0x528824=>{if(_0x528824){if(_0x528824[a95_0x1bfd('0x36')]===0x2af8){_0x473e5f[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),{'msg':a95_0x1bfd('0x37')});return _0x4d9332[a95_0x1bfd('0x15')](a95_0x1bfd('0x30'));}return _0x4339ab(_0x528824);}_0x473e5f['flash'](a95_0x1bfd('0x1b'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x4d9332[a95_0x1bfd('0x15')](a95_0x1bfd('0x30'));});});};exports[a95_0x1bfd('0x38')]=(_0x3ddb7c,_0x5d02d7,_0x482384)=>{_0x3ddb7c[a95_0x1bfd('0xa')]('password',a95_0x1bfd('0x22'))[a95_0x1bfd('0x23')]({'min':0x4});_0x3ddb7c['assert'](a95_0x1bfd('0x24'),a95_0x1bfd('0x25'))['equals'](_0x3ddb7c[a95_0x1bfd('0x2a')][a95_0x1bfd('0xe')]);const _0x59c928=_0x3ddb7c[a95_0x1bfd('0x12')]();if(_0x59c928){_0x3ddb7c[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),_0x59c928);return _0x5d02d7[a95_0x1bfd('0x15')](a95_0x1bfd('0x30'));}User_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x39')](_0x3ddb7c[a95_0x1bfd('0x31')]['id'],(_0x28239f,_0x3b2929)=>{if(_0x28239f){return _0x482384(_0x28239f);}_0x3b2929['password']=_0x3ddb7c[a95_0x1bfd('0x2a')]['password'];_0x3b2929[a95_0x1bfd('0x2c')](_0x28239f=>{if(_0x28239f){return _0x482384(_0x28239f);}_0x3ddb7c[a95_0x1bfd('0x13')](a95_0x1bfd('0x1b'),{'msg':a95_0x1bfd('0x3a')});_0x5d02d7['redirect'](a95_0x1bfd('0x30'));});});};exports[a95_0x1bfd('0x3b')]=(_0x53ed63,_0x20339a,_0x5ad0c)=>{User_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x3c')]({'_id':_0x53ed63[a95_0x1bfd('0x31')]['id']},_0x5dfcaf=>{if(_0x5dfcaf){return _0x5ad0c(_0x5dfcaf);}_0x53ed63['logout']();_0x53ed63[a95_0x1bfd('0x13')](a95_0x1bfd('0x3d'),{'msg':a95_0x1bfd('0x3e')});_0x20339a['redirect']('/');});};exports[a95_0x1bfd('0x3f')]=(_0x4ebe22,_0xfe70cb,_0x1b98f2)=>{const _0x42a75e=_0x4ebe22[a95_0x1bfd('0x40')]['provider'];User_1['default'][a95_0x1bfd('0x39')](_0x4ebe22['user']['id'],(_0x58a5fc,_0x2895cb)=>{if(_0x58a5fc){return _0x1b98f2(_0x58a5fc);}_0x2895cb[_0x42a75e]=undefined;_0x2895cb['tokens']=_0x2895cb['tokens'][a95_0x1bfd('0x41')](_0x2f4841=>_0x2f4841[a95_0x1bfd('0x42')]!==_0x42a75e);_0x2895cb[a95_0x1bfd('0x2c')](_0x58a5fc=>{if(_0x58a5fc){return _0x1b98f2(_0x58a5fc);}_0x4ebe22[a95_0x1bfd('0x13')](a95_0x1bfd('0x3d'),{'msg':_0x42a75e+a95_0x1bfd('0x43')});_0xfe70cb['redirect'](a95_0x1bfd('0x30'));});});};exports['getReset']=(_0x394e7c,_0x54869a,_0x21e5ed)=>{if(_0x394e7c[a95_0x1bfd('0x44')]()){return _0x54869a[a95_0x1bfd('0x15')]('/');}User_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x29')]({'passwordResetToken':_0x394e7c[a95_0x1bfd('0x40')][a95_0x1bfd('0x45')]})[a95_0x1bfd('0x46')](a95_0x1bfd('0x47'))['gt'](Date['now']())[a95_0x1bfd('0x48')]((_0x5bafc8,_0x167e75)=>{if(_0x5bafc8){return _0x21e5ed(_0x5bafc8);}if(!_0x167e75){_0x394e7c[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),{'msg':a95_0x1bfd('0x49')});return _0x54869a['redirect']('/forgot');}_0x54869a[a95_0x1bfd('0x7')](a95_0x1bfd('0x4a'),{'title':a95_0x1bfd('0x4b')});});};exports[a95_0x1bfd('0x4c')]=(_0x9f9fe,_0x58a832,_0x10536a)=>{_0x9f9fe['assert'](a95_0x1bfd('0xe'),a95_0x1bfd('0x4d'))[a95_0x1bfd('0x23')]({'min':0x4});_0x9f9fe[a95_0x1bfd('0xa')]('confirm',a95_0x1bfd('0x4e'))[a95_0x1bfd('0x26')](_0x9f9fe[a95_0x1bfd('0x2a')][a95_0x1bfd('0xe')]);const _0x18561b=_0x9f9fe[a95_0x1bfd('0x12')]();if(_0x18561b){_0x9f9fe[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),_0x18561b);return _0x58a832[a95_0x1bfd('0x15')](a95_0x1bfd('0x4f'));}async_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x50')]([function resetPassword(_0x223a12){User_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x29')]({'passwordResetToken':_0x9f9fe['params'][a95_0x1bfd('0x45')]})[a95_0x1bfd('0x46')](a95_0x1bfd('0x47'))['gt'](Date[a95_0x1bfd('0x51')]())[a95_0x1bfd('0x48')]((_0x50ebe9,_0x376435)=>{if(_0x50ebe9){return _0x10536a(_0x50ebe9);}if(!_0x376435){_0x9f9fe[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),{'msg':a95_0x1bfd('0x49')});return _0x58a832[a95_0x1bfd('0x15')](a95_0x1bfd('0x4f'));}_0x376435[a95_0x1bfd('0xe')]=_0x9f9fe[a95_0x1bfd('0x2a')][a95_0x1bfd('0xe')];_0x376435[a95_0x1bfd('0x52')]=undefined;_0x376435[a95_0x1bfd('0x47')]=undefined;_0x376435['save'](_0x50ebe9=>{if(_0x50ebe9){return _0x10536a(_0x50ebe9);}_0x9f9fe['logIn'](_0x376435,_0x50ebe9=>{_0x223a12(_0x50ebe9,_0x376435);});});});},function sendResetPasswordEmail(_0x822d43,_0x1da7c4){const _0x311e1f=nodemailer_1[a95_0x1bfd('0x17')]['createTransport']({'service':a95_0x1bfd('0x53'),'auth':{'user':process[a95_0x1bfd('0x54')]['SENDGRID_USER'],'pass':process['env'][a95_0x1bfd('0x55')]}});const _0x38dfa6={'to':_0x822d43[a95_0x1bfd('0xb')],'from':a95_0x1bfd('0x56'),'subject':a95_0x1bfd('0x57'),'text':a95_0x1bfd('0x58')+_0x822d43[a95_0x1bfd('0xb')]+a95_0x1bfd('0x59')};_0x311e1f[a95_0x1bfd('0x5a')](_0x38dfa6,_0x51837c=>{_0x9f9fe[a95_0x1bfd('0x13')](a95_0x1bfd('0x1b'),{'msg':a95_0x1bfd('0x5b')});_0x1da7c4(_0x51837c);});}],_0x2a81b3=>{if(_0x2a81b3){return _0x10536a(_0x2a81b3);}_0x58a832[a95_0x1bfd('0x15')]('/');});};exports['getForgot']=(_0x37ac4d,_0x49acfd)=>{if(_0x37ac4d[a95_0x1bfd('0x44')]()){return _0x49acfd['redirect']('/');}_0x49acfd[a95_0x1bfd('0x7')]('account/forgot',{'title':a95_0x1bfd('0x5c')});};exports[a95_0x1bfd('0x5d')]=(_0x3c8b91,_0x338ec6,_0x2c6e9a)=>{_0x3c8b91[a95_0x1bfd('0xa')](a95_0x1bfd('0xb'),a95_0x1bfd('0x2f'))['isEmail']();_0x3c8b91[a95_0x1bfd('0x11')](a95_0x1bfd('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xbfc084=_0x3c8b91[a95_0x1bfd('0x12')]();if(_0xbfc084){_0x3c8b91[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),_0xbfc084);return _0x338ec6[a95_0x1bfd('0x15')]('/forgot');}async_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x50')]([function createRandomToken(_0x5888bd){crypto_1[a95_0x1bfd('0x17')]['randomBytes'](0x10,(_0x5de849,_0x3ce5)=>{const _0x54f597=_0x3ce5['toString']('hex');_0x5888bd(_0x5de849,_0x54f597);});},function setRandomToken(_0x188c0b,_0x442036){User_1[a95_0x1bfd('0x17')][a95_0x1bfd('0x29')]({'email':_0x3c8b91[a95_0x1bfd('0x2a')]['email']},(_0x2e7c50,_0x5da147)=>{if(_0x2e7c50){return _0x442036(_0x2e7c50);}if(!_0x5da147){_0x3c8b91[a95_0x1bfd('0x13')](a95_0x1bfd('0x14'),{'msg':a95_0x1bfd('0x5e')});return _0x338ec6[a95_0x1bfd('0x15')](a95_0x1bfd('0x5f'));}_0x5da147[a95_0x1bfd('0x52')]=_0x188c0b;_0x5da147['passwordResetExpires']=Date[a95_0x1bfd('0x51')]()+0x36ee80;_0x5da147[a95_0x1bfd('0x2c')](_0x2e7c50=>{_0x442036(_0x2e7c50,_0x188c0b,_0x5da147);});});},function sendForgotPasswordEmail(_0x1aaf7a,_0x52f656,_0x3029aa){const _0x18bad9=nodemailer_1['default']['createTransport']({'service':'SendGrid','auth':{'user':process[a95_0x1bfd('0x54')][a95_0x1bfd('0x60')],'pass':process['env'][a95_0x1bfd('0x55')]}});const _0x1d2f81={'to':_0x52f656[a95_0x1bfd('0xb')],'from':a95_0x1bfd('0x61'),'subject':a95_0x1bfd('0x62'),'text':a95_0x1bfd('0x63')+_0x3c8b91[a95_0x1bfd('0x64')][a95_0x1bfd('0x65')]+a95_0x1bfd('0x66')+_0x1aaf7a+a95_0x1bfd('0x67')};_0x18bad9[a95_0x1bfd('0x5a')](_0x1d2f81,_0x54f747=>{_0x3c8b91[a95_0x1bfd('0x13')](a95_0x1bfd('0x3d'),{'msg':a95_0x1bfd('0x68')+_0x52f656[a95_0x1bfd('0xb')]+a95_0x1bfd('0x69')});_0x3029aa(_0x54f747);});}],_0x9111c=>{if(_0x9111c){return _0x2c6e9a(_0x9111c);}_0x338ec6[a95_0x1bfd('0x15')]('/forgot');});};