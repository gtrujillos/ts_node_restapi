var a201_0x19ec=['/login','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','where','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','token','exec','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','Forgot\x20Password','/forgot','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','now','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','defineProperty','__esModule','async','nodemailer','passport','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','default','authenticate','local','message'];(function(_0x3e33c1,_0x1c25c1){var _0x33a3b9=function(_0x7c3f5){while(--_0x7c3f5){_0x3e33c1['push'](_0x3e33c1['shift']());}};_0x33a3b9(++_0x1c25c1);}(a201_0x19ec,0x116));var a201_0x24a2=function(_0x522051,_0x493840){_0x522051=_0x522051-0x0;var _0x5252f2=a201_0x19ec[_0x522051];return _0x5252f2;};'use strict';var __importDefault=this&&this[a201_0x24a2('0x0')]||function(_0x2810f3){return _0x2810f3&&_0x2810f3['__esModule']?_0x2810f3:{'default':_0x2810f3};};Object[a201_0x24a2('0x1')](exports,a201_0x24a2('0x2'),{'value':!![]});const async_1=__importDefault(require(a201_0x24a2('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a201_0x24a2('0x4')));const passport_1=__importDefault(require(a201_0x24a2('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a201_0x24a2('0x6'));exports[a201_0x24a2('0x7')]=(_0x919211,_0x483760)=>{if(_0x919211[a201_0x24a2('0x8')]){return _0x483760[a201_0x24a2('0x9')]('/');}_0x483760[a201_0x24a2('0xa')](a201_0x24a2('0xb'),{'title':a201_0x24a2('0xc')});};exports[a201_0x24a2('0xd')]=(_0x207cd2,_0x2c58e7,_0x2f80b4)=>{_0x207cd2[a201_0x24a2('0xe')](a201_0x24a2('0xf'),'Email\x20is\x20not\x20valid')[a201_0x24a2('0x10')]();_0x207cd2['assert'](a201_0x24a2('0x11'),a201_0x24a2('0x12'))['notEmpty']();_0x207cd2[a201_0x24a2('0x13')](a201_0x24a2('0xf'))[a201_0x24a2('0x14')]({'gmail_remove_dots':![]});const _0x43476a=_0x207cd2[a201_0x24a2('0x15')]();if(_0x43476a){_0x207cd2[a201_0x24a2('0x16')](a201_0x24a2('0x17'),_0x43476a);return _0x2c58e7[a201_0x24a2('0x9')]('/login');}passport_1[a201_0x24a2('0x18')][a201_0x24a2('0x19')](a201_0x24a2('0x1a'),(_0x175412,_0x1dd1da,_0x168a6e)=>{if(_0x175412){return _0x2f80b4(_0x175412);}if(!_0x1dd1da){_0x207cd2[a201_0x24a2('0x16')](a201_0x24a2('0x17'),_0x168a6e[a201_0x24a2('0x1b')]);return _0x2c58e7[a201_0x24a2('0x9')](a201_0x24a2('0x1c'));}_0x207cd2[a201_0x24a2('0x1d')](_0x1dd1da,_0x175412=>{if(_0x175412){return _0x2f80b4(_0x175412);}_0x207cd2[a201_0x24a2('0x16')](a201_0x24a2('0x1e'),{'msg':a201_0x24a2('0x1f')});_0x2c58e7[a201_0x24a2('0x9')](_0x207cd2['session'][a201_0x24a2('0x20')]||'/');});})(_0x207cd2,_0x2c58e7,_0x2f80b4);};exports[a201_0x24a2('0x21')]=(_0x36b01f,_0x554dd9)=>{_0x36b01f[a201_0x24a2('0x21')]();_0x554dd9[a201_0x24a2('0x9')]('/');};exports[a201_0x24a2('0x22')]=(_0x26d225,_0x317566)=>{if(_0x26d225[a201_0x24a2('0x8')]){return _0x317566['redirect']('/');}_0x317566[a201_0x24a2('0xa')]('account/signup',{'title':a201_0x24a2('0x23')});};exports[a201_0x24a2('0x24')]=(_0x1a61ba,_0x315c71,_0x3b012d)=>{_0x1a61ba[a201_0x24a2('0xe')]('email',a201_0x24a2('0x25'))[a201_0x24a2('0x10')]();_0x1a61ba['assert'](a201_0x24a2('0x11'),a201_0x24a2('0x26'))[a201_0x24a2('0x27')]({'min':0x4});_0x1a61ba[a201_0x24a2('0xe')](a201_0x24a2('0x28'),a201_0x24a2('0x29'))[a201_0x24a2('0x2a')](_0x1a61ba[a201_0x24a2('0x2b')]['password']);_0x1a61ba[a201_0x24a2('0x13')](a201_0x24a2('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3604e1=_0x1a61ba[a201_0x24a2('0x15')]();if(_0x3604e1){_0x1a61ba[a201_0x24a2('0x16')](a201_0x24a2('0x17'),_0x3604e1);return _0x315c71[a201_0x24a2('0x9')](a201_0x24a2('0x2c'));}const _0x44544e=new User_1['default']({'email':_0x1a61ba[a201_0x24a2('0x2b')]['email'],'password':_0x1a61ba[a201_0x24a2('0x2b')][a201_0x24a2('0x11')]});User_1[a201_0x24a2('0x18')][a201_0x24a2('0x2d')]({'email':_0x1a61ba[a201_0x24a2('0x2b')][a201_0x24a2('0xf')]},(_0x12344a,_0x397c32)=>{if(_0x12344a){return _0x3b012d(_0x12344a);}if(_0x397c32){_0x1a61ba[a201_0x24a2('0x16')](a201_0x24a2('0x17'),{'msg':a201_0x24a2('0x2e')});return _0x315c71[a201_0x24a2('0x9')]('/signup');}_0x44544e[a201_0x24a2('0x2f')](_0x12344a=>{if(_0x12344a){return _0x3b012d(_0x12344a);}_0x1a61ba[a201_0x24a2('0x1d')](_0x44544e,_0x12344a=>{if(_0x12344a){return _0x3b012d(_0x12344a);}_0x315c71[a201_0x24a2('0x9')]('/');});});});};exports['getAccount']=(_0x5da3e5,_0x5e3b7b)=>{_0x5e3b7b['render'](a201_0x24a2('0x30'),{'title':a201_0x24a2('0x31')});};exports[a201_0x24a2('0x32')]=(_0x20bbd3,_0x261d31,_0x3b7dce)=>{_0x20bbd3[a201_0x24a2('0xe')](a201_0x24a2('0xf'),a201_0x24a2('0x33'))['isEmail']();_0x20bbd3[a201_0x24a2('0x13')](a201_0x24a2('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x7779bd=_0x20bbd3['validationErrors']();if(_0x7779bd){_0x20bbd3[a201_0x24a2('0x16')](a201_0x24a2('0x17'),_0x7779bd);return _0x261d31[a201_0x24a2('0x9')](a201_0x24a2('0x34'));}User_1[a201_0x24a2('0x18')][a201_0x24a2('0x35')](_0x20bbd3['user']['id'],(_0x422d56,_0x164f21)=>{if(_0x422d56){return _0x3b7dce(_0x422d56);}_0x164f21['email']=_0x20bbd3['body'][a201_0x24a2('0xf')]||'';_0x164f21[a201_0x24a2('0x36')]['name']=_0x20bbd3[a201_0x24a2('0x2b')]['name']||'';_0x164f21[a201_0x24a2('0x36')]['gender']=_0x20bbd3[a201_0x24a2('0x2b')]['gender']||'';_0x164f21['profile']['location']=_0x20bbd3[a201_0x24a2('0x2b')]['location']||'';_0x164f21[a201_0x24a2('0x36')][a201_0x24a2('0x37')]=_0x20bbd3[a201_0x24a2('0x2b')][a201_0x24a2('0x37')]||'';_0x164f21[a201_0x24a2('0x2f')](_0x422d56=>{if(_0x422d56){if(_0x422d56[a201_0x24a2('0x38')]===0x2af8){_0x20bbd3[a201_0x24a2('0x16')](a201_0x24a2('0x17'),{'msg':a201_0x24a2('0x39')});return _0x261d31[a201_0x24a2('0x9')](a201_0x24a2('0x34'));}return _0x3b7dce(_0x422d56);}_0x20bbd3[a201_0x24a2('0x16')](a201_0x24a2('0x1e'),{'msg':a201_0x24a2('0x3a')});_0x261d31[a201_0x24a2('0x9')]('/account');});});};exports[a201_0x24a2('0x3b')]=(_0x2d6097,_0x10e9fe,_0x186344)=>{_0x2d6097['assert'](a201_0x24a2('0x11'),a201_0x24a2('0x26'))[a201_0x24a2('0x27')]({'min':0x4});_0x2d6097[a201_0x24a2('0xe')](a201_0x24a2('0x28'),a201_0x24a2('0x29'))[a201_0x24a2('0x2a')](_0x2d6097[a201_0x24a2('0x2b')][a201_0x24a2('0x11')]);const _0x3cd2b8=_0x2d6097[a201_0x24a2('0x15')]();if(_0x3cd2b8){_0x2d6097[a201_0x24a2('0x16')](a201_0x24a2('0x17'),_0x3cd2b8);return _0x10e9fe[a201_0x24a2('0x9')](a201_0x24a2('0x34'));}User_1[a201_0x24a2('0x18')]['findById'](_0x2d6097[a201_0x24a2('0x8')]['id'],(_0x58f689,_0x28d56b)=>{if(_0x58f689){return _0x186344(_0x58f689);}_0x28d56b['password']=_0x2d6097['body']['password'];_0x28d56b[a201_0x24a2('0x2f')](_0x58f689=>{if(_0x58f689){return _0x186344(_0x58f689);}_0x2d6097[a201_0x24a2('0x16')](a201_0x24a2('0x1e'),{'msg':a201_0x24a2('0x3c')});_0x10e9fe[a201_0x24a2('0x9')](a201_0x24a2('0x34'));});});};exports[a201_0x24a2('0x3d')]=(_0x2b227a,_0x2a354b,_0x2de354)=>{User_1['default']['remove']({'_id':_0x2b227a[a201_0x24a2('0x8')]['id']},_0x46b727=>{if(_0x46b727){return _0x2de354(_0x46b727);}_0x2b227a['logout']();_0x2b227a[a201_0x24a2('0x16')]('info',{'msg':a201_0x24a2('0x3e')});_0x2a354b[a201_0x24a2('0x9')]('/');});};exports[a201_0x24a2('0x3f')]=(_0x422561,_0x50c60f,_0x164c27)=>{const _0x243d3e=_0x422561[a201_0x24a2('0x40')][a201_0x24a2('0x41')];User_1[a201_0x24a2('0x18')]['findById'](_0x422561[a201_0x24a2('0x8')]['id'],(_0x391385,_0x3467ea)=>{if(_0x391385){return _0x164c27(_0x391385);}_0x3467ea[_0x243d3e]=undefined;_0x3467ea[a201_0x24a2('0x42')]=_0x3467ea['tokens']['filter'](_0x2d115d=>_0x2d115d[a201_0x24a2('0x43')]!==_0x243d3e);_0x3467ea['save'](_0x391385=>{if(_0x391385){return _0x164c27(_0x391385);}_0x422561[a201_0x24a2('0x16')](a201_0x24a2('0x44'),{'msg':_0x243d3e+a201_0x24a2('0x45')});_0x50c60f[a201_0x24a2('0x9')](a201_0x24a2('0x34'));});});};exports[a201_0x24a2('0x46')]=(_0x493224,_0x420815,_0x5dc42d)=>{if(_0x493224['isAuthenticated']()){return _0x420815[a201_0x24a2('0x9')]('/');}User_1[a201_0x24a2('0x18')]['findOne']({'passwordResetToken':_0x493224[a201_0x24a2('0x40')]['token']})[a201_0x24a2('0x47')](a201_0x24a2('0x48'))['gt'](Date['now']())['exec']((_0x4659a7,_0x226b18)=>{if(_0x4659a7){return _0x5dc42d(_0x4659a7);}if(!_0x226b18){_0x493224[a201_0x24a2('0x16')](a201_0x24a2('0x17'),{'msg':a201_0x24a2('0x49')});return _0x420815[a201_0x24a2('0x9')]('/forgot');}_0x420815['render'](a201_0x24a2('0x4a'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x269d9e,_0x21cb27,_0x5827f4)=>{_0x269d9e[a201_0x24a2('0xe')]('password',a201_0x24a2('0x4b'))[a201_0x24a2('0x27')]({'min':0x4});_0x269d9e['assert'](a201_0x24a2('0x4c'),a201_0x24a2('0x4d'))[a201_0x24a2('0x2a')](_0x269d9e['body']['password']);const _0x3880ce=_0x269d9e['validationErrors']();if(_0x3880ce){_0x269d9e['flash'](a201_0x24a2('0x17'),_0x3880ce);return _0x21cb27[a201_0x24a2('0x9')](a201_0x24a2('0x4e'));}async_1['default'][a201_0x24a2('0x4f')]([function resetPassword(_0x9fc4d9){User_1[a201_0x24a2('0x18')][a201_0x24a2('0x2d')]({'passwordResetToken':_0x269d9e[a201_0x24a2('0x40')][a201_0x24a2('0x50')]})[a201_0x24a2('0x47')](a201_0x24a2('0x48'))['gt'](Date['now']())[a201_0x24a2('0x51')]((_0x5b00eb,_0x452ef9)=>{if(_0x5b00eb){return _0x5827f4(_0x5b00eb);}if(!_0x452ef9){_0x269d9e[a201_0x24a2('0x16')](a201_0x24a2('0x17'),{'msg':a201_0x24a2('0x49')});return _0x21cb27[a201_0x24a2('0x9')](a201_0x24a2('0x4e'));}_0x452ef9['password']=_0x269d9e['body'][a201_0x24a2('0x11')];_0x452ef9[a201_0x24a2('0x52')]=undefined;_0x452ef9[a201_0x24a2('0x48')]=undefined;_0x452ef9[a201_0x24a2('0x2f')](_0x5b00eb=>{if(_0x5b00eb){return _0x5827f4(_0x5b00eb);}_0x269d9e[a201_0x24a2('0x1d')](_0x452ef9,_0x5b00eb=>{_0x9fc4d9(_0x5b00eb,_0x452ef9);});});});},function sendResetPasswordEmail(_0x52aed4,_0x3ef1c5){const _0x1b27b1=nodemailer_1['default'][a201_0x24a2('0x53')]({'service':a201_0x24a2('0x54'),'auth':{'user':process[a201_0x24a2('0x55')][a201_0x24a2('0x56')],'pass':process[a201_0x24a2('0x55')][a201_0x24a2('0x57')]}});const _0x3a0919={'to':_0x52aed4[a201_0x24a2('0xf')],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x52aed4['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0x1b27b1[a201_0x24a2('0x58')](_0x3a0919,_0x42c4a9=>{_0x269d9e[a201_0x24a2('0x16')](a201_0x24a2('0x1e'),{'msg':a201_0x24a2('0x59')});_0x3ef1c5(_0x42c4a9);});}],_0x4bcf96=>{if(_0x4bcf96){return _0x5827f4(_0x4bcf96);}_0x21cb27[a201_0x24a2('0x9')]('/');});};exports[a201_0x24a2('0x5a')]=(_0x2f7d37,_0x304b27)=>{if(_0x2f7d37[a201_0x24a2('0x5b')]()){return _0x304b27['redirect']('/');}_0x304b27['render'](a201_0x24a2('0x5c'),{'title':a201_0x24a2('0x5d')});};exports['postForgot']=(_0xcdedb5,_0x4ad326,_0xa60f05)=>{_0xcdedb5[a201_0x24a2('0xe')](a201_0x24a2('0xf'),a201_0x24a2('0x33'))[a201_0x24a2('0x10')]();_0xcdedb5[a201_0x24a2('0x13')]('email')[a201_0x24a2('0x14')]({'gmail_remove_dots':![]});const _0x1244bc=_0xcdedb5[a201_0x24a2('0x15')]();if(_0x1244bc){_0xcdedb5['flash'](a201_0x24a2('0x17'),_0x1244bc);return _0x4ad326['redirect'](a201_0x24a2('0x5e'));}async_1[a201_0x24a2('0x18')][a201_0x24a2('0x4f')]([function createRandomToken(_0x30c08e){crypto_1[a201_0x24a2('0x18')][a201_0x24a2('0x5f')](0x10,(_0x4f845a,_0x3bdab2)=>{const _0x4be3b5=_0x3bdab2['toString']('hex');_0x30c08e(_0x4f845a,_0x4be3b5);});},function setRandomToken(_0x188412,_0xd8129f){User_1[a201_0x24a2('0x18')][a201_0x24a2('0x2d')]({'email':_0xcdedb5[a201_0x24a2('0x2b')][a201_0x24a2('0xf')]},(_0x3e9199,_0xfc6dce)=>{if(_0x3e9199){return _0xd8129f(_0x3e9199);}if(!_0xfc6dce){_0xcdedb5['flash'](a201_0x24a2('0x17'),{'msg':a201_0x24a2('0x60')});return _0x4ad326[a201_0x24a2('0x9')]('/forgot');}_0xfc6dce[a201_0x24a2('0x52')]=_0x188412;_0xfc6dce[a201_0x24a2('0x48')]=Date[a201_0x24a2('0x61')]()+0x36ee80;_0xfc6dce[a201_0x24a2('0x2f')](_0x3e9199=>{_0xd8129f(_0x3e9199,_0x188412,_0xfc6dce);});});},function sendForgotPasswordEmail(_0x2459c4,_0x553542,_0x5184b3){const _0x1761fc=nodemailer_1['default'][a201_0x24a2('0x53')]({'service':a201_0x24a2('0x54'),'auth':{'user':process['env'][a201_0x24a2('0x56')],'pass':process[a201_0x24a2('0x55')]['SENDGRID_PASSWORD']}});const _0x1edfaa={'to':_0x553542['email'],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0xcdedb5[a201_0x24a2('0x62')][a201_0x24a2('0x63')]+'/reset/'+_0x2459c4+a201_0x24a2('0x64')};_0x1761fc[a201_0x24a2('0x58')](_0x1edfaa,_0x52222f=>{_0xcdedb5[a201_0x24a2('0x16')](a201_0x24a2('0x44'),{'msg':a201_0x24a2('0x65')+_0x553542['email']+'\x20with\x20further\x20instructions.'});_0x5184b3(_0x52222f);});}],_0x3eec5a=>{if(_0x3eec5a){return _0xa60f05(_0x3eec5a);}_0x4ad326[a201_0x24a2('0x9')](a201_0x24a2('0x5e'));});};