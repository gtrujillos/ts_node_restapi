var a95_0x59c1=['info','getOauthUnlink','params','provider','tokens','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','passport','../models/User','getLogin','user','redirect','render','account/login','postLogin','email','Email\x20is\x20not\x20valid','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','authenticate','local','logIn','success','Success!\x20You\x20are\x20logged\x20in.','logout','getSignup','account/signup','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','/signup','default','body','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','website','/account','Profile\x20information\x20has\x20been\x20updated.','equals','postDeleteAccount'];(function(_0x2193b3,_0x3d0e9e){var _0x32feeb=function(_0x57c834){while(--_0x57c834){_0x2193b3['push'](_0x2193b3['shift']());}};_0x32feeb(++_0x3d0e9e);}(a95_0x59c1,0x1cf));var a95_0x512e=function(_0x31186d,_0xbc572d){_0x31186d=_0x31186d-0x0;var _0x54869a=a95_0x59c1[_0x31186d];return _0x54869a;};'use strict';var __importDefault=this&&this[a95_0x512e('0x0')]||function(_0x16fb45){return _0x16fb45&&_0x16fb45[a95_0x512e('0x1')]?_0x16fb45:{'default':_0x16fb45};};Object[a95_0x512e('0x2')](exports,a95_0x512e('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x512e('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a95_0x512e('0x4')));const User_1=__importDefault(require(a95_0x512e('0x5')));const request=require('express-validator');exports[a95_0x512e('0x6')]=(_0x4be406,_0x10d01c)=>{if(_0x4be406[a95_0x512e('0x7')]){return _0x10d01c[a95_0x512e('0x8')]('/');}_0x10d01c[a95_0x512e('0x9')](a95_0x512e('0xa'),{'title':'Login'});};exports[a95_0x512e('0xb')]=(_0x385af4,_0x86fb41,_0x3ac380)=>{_0x385af4['assert'](a95_0x512e('0xc'),a95_0x512e('0xd'))['isEmail']();_0x385af4[a95_0x512e('0xe')](a95_0x512e('0xf'),a95_0x512e('0x10'))[a95_0x512e('0x11')]();_0x385af4[a95_0x512e('0x12')](a95_0x512e('0xc'))[a95_0x512e('0x13')]({'gmail_remove_dots':![]});const _0x538085=_0x385af4[a95_0x512e('0x14')]();if(_0x538085){_0x385af4[a95_0x512e('0x15')](a95_0x512e('0x16'),_0x538085);return _0x86fb41[a95_0x512e('0x8')]('/login');}passport_1['default'][a95_0x512e('0x17')](a95_0x512e('0x18'),(_0x3cab0a,_0x12e1e5,_0x424907)=>{if(_0x3cab0a){return _0x3ac380(_0x3cab0a);}if(!_0x12e1e5){_0x385af4[a95_0x512e('0x15')](a95_0x512e('0x16'),_0x424907['message']);return _0x86fb41[a95_0x512e('0x8')]('/login');}_0x385af4[a95_0x512e('0x19')](_0x12e1e5,_0x3cab0a=>{if(_0x3cab0a){return _0x3ac380(_0x3cab0a);}_0x385af4[a95_0x512e('0x15')](a95_0x512e('0x1a'),{'msg':a95_0x512e('0x1b')});_0x86fb41[a95_0x512e('0x8')](_0x385af4['session']['returnTo']||'/');});})(_0x385af4,_0x86fb41,_0x3ac380);};exports[a95_0x512e('0x1c')]=(_0x4c9b3f,_0x43d414)=>{_0x4c9b3f[a95_0x512e('0x1c')]();_0x43d414[a95_0x512e('0x8')]('/');};exports[a95_0x512e('0x1d')]=(_0x5b5dd5,_0x5caeda)=>{if(_0x5b5dd5[a95_0x512e('0x7')]){return _0x5caeda['redirect']('/');}_0x5caeda[a95_0x512e('0x9')](a95_0x512e('0x1e'),{'title':a95_0x512e('0x1f')});};exports[a95_0x512e('0x20')]=(_0x247184,_0x4cee08,_0x49bc89)=>{_0x247184[a95_0x512e('0xe')](a95_0x512e('0xc'),a95_0x512e('0xd'))[a95_0x512e('0x21')]();_0x247184[a95_0x512e('0xe')](a95_0x512e('0xf'),a95_0x512e('0x22'))[a95_0x512e('0x23')]({'min':0x4});_0x247184[a95_0x512e('0xe')](a95_0x512e('0x24'),a95_0x512e('0x25'))['equals'](_0x247184['body'][a95_0x512e('0xf')]);_0x247184[a95_0x512e('0x12')]('email')[a95_0x512e('0x13')]({'gmail_remove_dots':![]});const _0x31422e=_0x247184['validationErrors']();if(_0x31422e){_0x247184['flash']('errors',_0x31422e);return _0x4cee08[a95_0x512e('0x8')](a95_0x512e('0x26'));}const _0x12498d=new User_1[(a95_0x512e('0x27'))]({'email':_0x247184['body']['email'],'password':_0x247184['body'][a95_0x512e('0xf')]});User_1[a95_0x512e('0x27')]['findOne']({'email':_0x247184[a95_0x512e('0x28')][a95_0x512e('0xc')]},(_0x179387,_0x4ec3b9)=>{if(_0x179387){return _0x49bc89(_0x179387);}if(_0x4ec3b9){_0x247184[a95_0x512e('0x15')](a95_0x512e('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x4cee08[a95_0x512e('0x8')](a95_0x512e('0x26'));}_0x12498d[a95_0x512e('0x29')](_0x179387=>{if(_0x179387){return _0x49bc89(_0x179387);}_0x247184[a95_0x512e('0x19')](_0x12498d,_0x179387=>{if(_0x179387){return _0x49bc89(_0x179387);}_0x4cee08[a95_0x512e('0x8')]('/');});});});};exports[a95_0x512e('0x2a')]=(_0x418a52,_0x1bc910)=>{_0x1bc910[a95_0x512e('0x9')](a95_0x512e('0x2b'),{'title':a95_0x512e('0x2c')});};exports[a95_0x512e('0x2d')]=(_0x522281,_0x31a346,_0x3a25c3)=>{_0x522281[a95_0x512e('0xe')](a95_0x512e('0xc'),a95_0x512e('0x2e'))[a95_0x512e('0x21')]();_0x522281[a95_0x512e('0x12')](a95_0x512e('0xc'))[a95_0x512e('0x13')]({'gmail_remove_dots':![]});const _0x152f0d=_0x522281[a95_0x512e('0x14')]();if(_0x152f0d){_0x522281['flash']('errors',_0x152f0d);return _0x31a346[a95_0x512e('0x8')]('/account');}User_1['default'][a95_0x512e('0x2f')](_0x522281[a95_0x512e('0x7')]['id'],(_0x4fe2f4,_0x2bb2dc)=>{if(_0x4fe2f4){return _0x3a25c3(_0x4fe2f4);}_0x2bb2dc[a95_0x512e('0xc')]=_0x522281['body'][a95_0x512e('0xc')]||'';_0x2bb2dc[a95_0x512e('0x30')][a95_0x512e('0x31')]=_0x522281['body'][a95_0x512e('0x31')]||'';_0x2bb2dc[a95_0x512e('0x30')]['gender']=_0x522281[a95_0x512e('0x28')][a95_0x512e('0x32')]||'';_0x2bb2dc[a95_0x512e('0x30')][a95_0x512e('0x33')]=_0x522281[a95_0x512e('0x28')][a95_0x512e('0x33')]||'';_0x2bb2dc[a95_0x512e('0x30')][a95_0x512e('0x34')]=_0x522281[a95_0x512e('0x28')][a95_0x512e('0x34')]||'';_0x2bb2dc[a95_0x512e('0x29')](_0x4fe2f4=>{if(_0x4fe2f4){if(_0x4fe2f4['code']===0x2af8){_0x522281['flash'](a95_0x512e('0x16'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x31a346[a95_0x512e('0x8')](a95_0x512e('0x35'));}return _0x3a25c3(_0x4fe2f4);}_0x522281[a95_0x512e('0x15')]('success',{'msg':a95_0x512e('0x36')});_0x31a346[a95_0x512e('0x8')](a95_0x512e('0x35'));});});};exports['postUpdatePassword']=(_0x4a4485,_0x58b0af,_0x51430b)=>{_0x4a4485[a95_0x512e('0xe')](a95_0x512e('0xf'),a95_0x512e('0x22'))[a95_0x512e('0x23')]({'min':0x4});_0x4a4485[a95_0x512e('0xe')](a95_0x512e('0x24'),a95_0x512e('0x25'))[a95_0x512e('0x37')](_0x4a4485['body'][a95_0x512e('0xf')]);const _0x323f61=_0x4a4485[a95_0x512e('0x14')]();if(_0x323f61){_0x4a4485[a95_0x512e('0x15')](a95_0x512e('0x16'),_0x323f61);return _0x58b0af[a95_0x512e('0x8')]('/account');}User_1[a95_0x512e('0x27')][a95_0x512e('0x2f')](_0x4a4485[a95_0x512e('0x7')]['id'],(_0x27c725,_0x2a009d)=>{if(_0x27c725){return _0x51430b(_0x27c725);}_0x2a009d[a95_0x512e('0xf')]=_0x4a4485[a95_0x512e('0x28')][a95_0x512e('0xf')];_0x2a009d[a95_0x512e('0x29')](_0x27c725=>{if(_0x27c725){return _0x51430b(_0x27c725);}_0x4a4485[a95_0x512e('0x15')](a95_0x512e('0x1a'),{'msg':'Password\x20has\x20been\x20changed.'});_0x58b0af[a95_0x512e('0x8')](a95_0x512e('0x35'));});});};exports[a95_0x512e('0x38')]=(_0x23ae4e,_0x24d942,_0x4958db)=>{User_1[a95_0x512e('0x27')]['remove']({'_id':_0x23ae4e[a95_0x512e('0x7')]['id']},_0x2f25a2=>{if(_0x2f25a2){return _0x4958db(_0x2f25a2);}_0x23ae4e['logout']();_0x23ae4e['flash'](a95_0x512e('0x39'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x24d942['redirect']('/');});};exports[a95_0x512e('0x3a')]=(_0x53b482,_0x5d9748,_0x4f3f51)=>{const _0x5bc4c6=_0x53b482[a95_0x512e('0x3b')][a95_0x512e('0x3c')];User_1[a95_0x512e('0x27')][a95_0x512e('0x2f')](_0x53b482[a95_0x512e('0x7')]['id'],(_0x2a3d68,_0x2fcb6b)=>{if(_0x2a3d68){return _0x4f3f51(_0x2a3d68);}_0x2fcb6b[_0x5bc4c6]=undefined;_0x2fcb6b[a95_0x512e('0x3d')]=_0x2fcb6b[a95_0x512e('0x3d')]['filter'](_0x17c6d8=>_0x17c6d8['kind']!==_0x5bc4c6);_0x2fcb6b[a95_0x512e('0x29')](_0x2a3d68=>{if(_0x2a3d68){return _0x4f3f51(_0x2a3d68);}_0x53b482[a95_0x512e('0x15')](a95_0x512e('0x39'),{'msg':_0x5bc4c6+a95_0x512e('0x3e')});_0x5d9748[a95_0x512e('0x8')](a95_0x512e('0x35'));});});};exports[a95_0x512e('0x3f')]=(_0x1c8926,_0x1fd1c8,_0x1e04a4)=>{if(_0x1c8926[a95_0x512e('0x40')]()){return _0x1fd1c8[a95_0x512e('0x8')]('/');}User_1['default'][a95_0x512e('0x41')]({'passwordResetToken':_0x1c8926['params'][a95_0x512e('0x42')]})[a95_0x512e('0x43')](a95_0x512e('0x44'))['gt'](Date[a95_0x512e('0x45')]())[a95_0x512e('0x46')]((_0x487163,_0x3a81d4)=>{if(_0x487163){return _0x1e04a4(_0x487163);}if(!_0x3a81d4){_0x1c8926[a95_0x512e('0x15')](a95_0x512e('0x16'),{'msg':a95_0x512e('0x47')});return _0x1fd1c8[a95_0x512e('0x8')](a95_0x512e('0x48'));}_0x1fd1c8['render'](a95_0x512e('0x49'),{'title':a95_0x512e('0x4a')});});};exports[a95_0x512e('0x4b')]=(_0x2191e7,_0x27719b,_0x3d022e)=>{_0x2191e7[a95_0x512e('0xe')](a95_0x512e('0xf'),a95_0x512e('0x4c'))[a95_0x512e('0x23')]({'min':0x4});_0x2191e7[a95_0x512e('0xe')]('confirm',a95_0x512e('0x4d'))[a95_0x512e('0x37')](_0x2191e7[a95_0x512e('0x28')]['password']);const _0x50442c=_0x2191e7[a95_0x512e('0x14')]();if(_0x50442c){_0x2191e7[a95_0x512e('0x15')](a95_0x512e('0x16'),_0x50442c);return _0x27719b['redirect'](a95_0x512e('0x4e'));}async_1['default'][a95_0x512e('0x4f')]([function resetPassword(_0x4541a9){User_1[a95_0x512e('0x27')][a95_0x512e('0x41')]({'passwordResetToken':_0x2191e7[a95_0x512e('0x3b')][a95_0x512e('0x42')]})[a95_0x512e('0x43')]('passwordResetExpires')['gt'](Date[a95_0x512e('0x45')]())[a95_0x512e('0x46')]((_0x41c89e,_0x335034)=>{if(_0x41c89e){return _0x3d022e(_0x41c89e);}if(!_0x335034){_0x2191e7[a95_0x512e('0x15')](a95_0x512e('0x16'),{'msg':a95_0x512e('0x47')});return _0x27719b[a95_0x512e('0x8')](a95_0x512e('0x4e'));}_0x335034[a95_0x512e('0xf')]=_0x2191e7[a95_0x512e('0x28')][a95_0x512e('0xf')];_0x335034[a95_0x512e('0x50')]=undefined;_0x335034['passwordResetExpires']=undefined;_0x335034[a95_0x512e('0x29')](_0x41c89e=>{if(_0x41c89e){return _0x3d022e(_0x41c89e);}_0x2191e7[a95_0x512e('0x19')](_0x335034,_0x41c89e=>{_0x4541a9(_0x41c89e,_0x335034);});});});},function sendResetPasswordEmail(_0x178945,_0x2c534c){const _0x22014d=nodemailer_1[a95_0x512e('0x27')]['createTransport']({'service':'SendGrid','auth':{'user':process[a95_0x512e('0x51')][a95_0x512e('0x52')],'pass':process['env'][a95_0x512e('0x53')]}});const _0x3988f0={'to':_0x178945[a95_0x512e('0xc')],'from':a95_0x512e('0x54'),'subject':a95_0x512e('0x55'),'text':a95_0x512e('0x56')+_0x178945[a95_0x512e('0xc')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x22014d[a95_0x512e('0x57')](_0x3988f0,_0x5bb315=>{_0x2191e7['flash']('success',{'msg':a95_0x512e('0x58')});_0x2c534c(_0x5bb315);});}],_0x2937fd=>{if(_0x2937fd){return _0x3d022e(_0x2937fd);}_0x27719b[a95_0x512e('0x8')]('/');});};exports[a95_0x512e('0x59')]=(_0x242858,_0x42ad82)=>{if(_0x242858[a95_0x512e('0x40')]()){return _0x42ad82['redirect']('/');}_0x42ad82['render']('account/forgot',{'title':a95_0x512e('0x5a')});};exports[a95_0x512e('0x5b')]=(_0x30edfc,_0x171dc1,_0x5bed42)=>{_0x30edfc[a95_0x512e('0xe')](a95_0x512e('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x512e('0x21')]();_0x30edfc[a95_0x512e('0x12')](a95_0x512e('0xc'))[a95_0x512e('0x13')]({'gmail_remove_dots':![]});const _0x5c97e3=_0x30edfc['validationErrors']();if(_0x5c97e3){_0x30edfc[a95_0x512e('0x15')](a95_0x512e('0x16'),_0x5c97e3);return _0x171dc1[a95_0x512e('0x8')](a95_0x512e('0x48'));}async_1[a95_0x512e('0x27')][a95_0x512e('0x4f')]([function createRandomToken(_0x353cfc){crypto_1[a95_0x512e('0x27')][a95_0x512e('0x5c')](0x10,(_0x301734,_0x30b0f6)=>{const _0x4f6d16=_0x30b0f6['toString'](a95_0x512e('0x5d'));_0x353cfc(_0x301734,_0x4f6d16);});},function setRandomToken(_0xaee268,_0xc3ea4f){User_1[a95_0x512e('0x27')][a95_0x512e('0x41')]({'email':_0x30edfc[a95_0x512e('0x28')][a95_0x512e('0xc')]},(_0x268958,_0x1f111c)=>{if(_0x268958){return _0xc3ea4f(_0x268958);}if(!_0x1f111c){_0x30edfc[a95_0x512e('0x15')](a95_0x512e('0x16'),{'msg':a95_0x512e('0x5e')});return _0x171dc1[a95_0x512e('0x8')](a95_0x512e('0x48'));}_0x1f111c['passwordResetToken']=_0xaee268;_0x1f111c[a95_0x512e('0x44')]=Date['now']()+0x36ee80;_0x1f111c[a95_0x512e('0x29')](_0x268958=>{_0xc3ea4f(_0x268958,_0xaee268,_0x1f111c);});});},function sendForgotPasswordEmail(_0x3e8a4f,_0x31ee7,_0x153ad9){const _0x256db8=nodemailer_1[a95_0x512e('0x27')][a95_0x512e('0x5f')]({'service':a95_0x512e('0x60'),'auth':{'user':process[a95_0x512e('0x51')][a95_0x512e('0x52')],'pass':process[a95_0x512e('0x51')][a95_0x512e('0x53')]}});const _0x1252c6={'to':_0x31ee7[a95_0x512e('0xc')],'from':a95_0x512e('0x61'),'subject':a95_0x512e('0x62'),'text':a95_0x512e('0x63')+_0x30edfc[a95_0x512e('0x64')][a95_0x512e('0x65')]+a95_0x512e('0x66')+_0x3e8a4f+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x256db8['sendMail'](_0x1252c6,_0x2ac0a9=>{_0x30edfc[a95_0x512e('0x15')](a95_0x512e('0x39'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x31ee7[a95_0x512e('0xc')]+a95_0x512e('0x67')});_0x153ad9(_0x2ac0a9);});}],_0x56a44d=>{if(_0x56a44d){return _0x5bed42(_0x56a44d);}_0x171dc1[a95_0x512e('0x8')]('/forgot');});};