var a183_0x1d85=['createTransport','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','getLogin','user','redirect','account/login','Login','postLogin','assert','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','flash','errors','/login','authenticate','local','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','render','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','validationErrors','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','logIn','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','save','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','passwordResetToken'];(function(_0x330476,_0x2bc1ce){var _0x56ad45=function(_0x2dde9b){while(--_0x2dde9b){_0x330476['push'](_0x330476['shift']());}};_0x56ad45(++_0x2bc1ce);}(a183_0x1d85,0x86));var a183_0x1ebf=function(_0x569b2,_0x4b5f6a){_0x569b2=_0x569b2-0x0;var _0x34a59d=a183_0x1d85[_0x569b2];return _0x34a59d;};'use strict';var __importDefault=this&&this[a183_0x1ebf('0x0')]||function(_0x55243f){return _0x55243f&&_0x55243f[a183_0x1ebf('0x1')]?_0x55243f:{'default':_0x55243f};};Object[a183_0x1ebf('0x2')](exports,a183_0x1ebf('0x1'),{'value':!![]});const async_1=__importDefault(require(a183_0x1ebf('0x3')));const crypto_1=__importDefault(require(a183_0x1ebf('0x4')));const nodemailer_1=__importDefault(require(a183_0x1ebf('0x5')));const passport_1=__importDefault(require(a183_0x1ebf('0x6')));const User_1=__importDefault(require(a183_0x1ebf('0x7')));const request=require('express-validator');exports[a183_0x1ebf('0x8')]=(_0x1e3ad7,_0x568cbf)=>{if(_0x1e3ad7[a183_0x1ebf('0x9')]){return _0x568cbf[a183_0x1ebf('0xa')]('/');}_0x568cbf['render'](a183_0x1ebf('0xb'),{'title':a183_0x1ebf('0xc')});};exports[a183_0x1ebf('0xd')]=(_0x502a85,_0x55461a,_0x76e408)=>{_0x502a85[a183_0x1ebf('0xe')]('email','Email\x20is\x20not\x20valid')[a183_0x1ebf('0xf')]();_0x502a85[a183_0x1ebf('0xe')](a183_0x1ebf('0x10'),a183_0x1ebf('0x11'))[a183_0x1ebf('0x12')]();_0x502a85[a183_0x1ebf('0x13')](a183_0x1ebf('0x14'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4ad6ea=_0x502a85['validationErrors']();if(_0x4ad6ea){_0x502a85[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),_0x4ad6ea);return _0x55461a[a183_0x1ebf('0xa')](a183_0x1ebf('0x17'));}passport_1['default'][a183_0x1ebf('0x18')](a183_0x1ebf('0x19'),(_0x251f40,_0x2bb4f0,_0x337734)=>{if(_0x251f40){return _0x76e408(_0x251f40);}if(!_0x2bb4f0){_0x502a85[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),_0x337734['message']);return _0x55461a[a183_0x1ebf('0xa')](a183_0x1ebf('0x17'));}_0x502a85['logIn'](_0x2bb4f0,_0x251f40=>{if(_0x251f40){return _0x76e408(_0x251f40);}_0x502a85[a183_0x1ebf('0x15')](a183_0x1ebf('0x1a'),{'msg':a183_0x1ebf('0x1b')});_0x55461a[a183_0x1ebf('0xa')](_0x502a85[a183_0x1ebf('0x1c')]['returnTo']||'/');});})(_0x502a85,_0x55461a,_0x76e408);};exports[a183_0x1ebf('0x1d')]=(_0x59ec8d,_0x23b3d2)=>{_0x59ec8d[a183_0x1ebf('0x1d')]();_0x23b3d2[a183_0x1ebf('0xa')]('/');};exports[a183_0x1ebf('0x1e')]=(_0xdf544d,_0xf5177d)=>{if(_0xdf544d['user']){return _0xf5177d[a183_0x1ebf('0xa')]('/');}_0xf5177d[a183_0x1ebf('0x1f')]('account/signup',{'title':'Create\x20Account'});};exports[a183_0x1ebf('0x20')]=(_0x48894f,_0x4c739e,_0x300f28)=>{_0x48894f[a183_0x1ebf('0xe')](a183_0x1ebf('0x14'),a183_0x1ebf('0x21'))[a183_0x1ebf('0xf')]();_0x48894f['assert'](a183_0x1ebf('0x10'),a183_0x1ebf('0x22'))[a183_0x1ebf('0x23')]({'min':0x4});_0x48894f[a183_0x1ebf('0xe')](a183_0x1ebf('0x24'),a183_0x1ebf('0x25'))[a183_0x1ebf('0x26')](_0x48894f[a183_0x1ebf('0x27')][a183_0x1ebf('0x10')]);_0x48894f[a183_0x1ebf('0x13')](a183_0x1ebf('0x14'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4687a8=_0x48894f[a183_0x1ebf('0x28')]();if(_0x4687a8){_0x48894f[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),_0x4687a8);return _0x4c739e[a183_0x1ebf('0xa')]('/signup');}const _0x1dfee3=new User_1[(a183_0x1ebf('0x29'))]({'email':_0x48894f[a183_0x1ebf('0x27')][a183_0x1ebf('0x14')],'password':_0x48894f[a183_0x1ebf('0x27')][a183_0x1ebf('0x10')]});User_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x2a')]({'email':_0x48894f[a183_0x1ebf('0x27')][a183_0x1ebf('0x14')]},(_0x326d69,_0x32ac33)=>{if(_0x326d69){return _0x300f28(_0x326d69);}if(_0x32ac33){_0x48894f['flash']('errors',{'msg':a183_0x1ebf('0x2b')});return _0x4c739e[a183_0x1ebf('0xa')](a183_0x1ebf('0x2c'));}_0x1dfee3['save'](_0x326d69=>{if(_0x326d69){return _0x300f28(_0x326d69);}_0x48894f[a183_0x1ebf('0x2d')](_0x1dfee3,_0x326d69=>{if(_0x326d69){return _0x300f28(_0x326d69);}_0x4c739e['redirect']('/');});});});};exports[a183_0x1ebf('0x2e')]=(_0x3c7208,_0x43cdff)=>{_0x43cdff[a183_0x1ebf('0x1f')](a183_0x1ebf('0x2f'),{'title':a183_0x1ebf('0x30')});};exports['postUpdateProfile']=(_0x4f6a31,_0x11b8e7,_0x457943)=>{_0x4f6a31[a183_0x1ebf('0xe')](a183_0x1ebf('0x14'),a183_0x1ebf('0x31'))[a183_0x1ebf('0xf')]();_0x4f6a31[a183_0x1ebf('0x13')]('email')[a183_0x1ebf('0x32')]({'gmail_remove_dots':![]});const _0x30bab3=_0x4f6a31[a183_0x1ebf('0x28')]();if(_0x30bab3){_0x4f6a31['flash'](a183_0x1ebf('0x16'),_0x30bab3);return _0x11b8e7[a183_0x1ebf('0xa')](a183_0x1ebf('0x33'));}User_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x34')](_0x4f6a31['user']['id'],(_0x4419a5,_0x4c64df)=>{if(_0x4419a5){return _0x457943(_0x4419a5);}_0x4c64df[a183_0x1ebf('0x14')]=_0x4f6a31[a183_0x1ebf('0x27')][a183_0x1ebf('0x14')]||'';_0x4c64df[a183_0x1ebf('0x35')][a183_0x1ebf('0x36')]=_0x4f6a31[a183_0x1ebf('0x27')][a183_0x1ebf('0x36')]||'';_0x4c64df[a183_0x1ebf('0x35')][a183_0x1ebf('0x37')]=_0x4f6a31['body']['gender']||'';_0x4c64df[a183_0x1ebf('0x35')][a183_0x1ebf('0x38')]=_0x4f6a31['body']['location']||'';_0x4c64df[a183_0x1ebf('0x35')][a183_0x1ebf('0x39')]=_0x4f6a31['body']['website']||'';_0x4c64df[a183_0x1ebf('0x3a')](_0x4419a5=>{if(_0x4419a5){if(_0x4419a5['code']===0x2af8){_0x4f6a31[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),{'msg':a183_0x1ebf('0x3b')});return _0x11b8e7[a183_0x1ebf('0xa')](a183_0x1ebf('0x33'));}return _0x457943(_0x4419a5);}_0x4f6a31[a183_0x1ebf('0x15')]('success',{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x11b8e7[a183_0x1ebf('0xa')](a183_0x1ebf('0x33'));});});};exports[a183_0x1ebf('0x3c')]=(_0x4ad073,_0x5fb29f,_0x566026)=>{_0x4ad073[a183_0x1ebf('0xe')](a183_0x1ebf('0x10'),a183_0x1ebf('0x22'))['len']({'min':0x4});_0x4ad073[a183_0x1ebf('0xe')](a183_0x1ebf('0x24'),a183_0x1ebf('0x25'))['equals'](_0x4ad073['body']['password']);const _0x153a95=_0x4ad073[a183_0x1ebf('0x28')]();if(_0x153a95){_0x4ad073[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),_0x153a95);return _0x5fb29f['redirect'](a183_0x1ebf('0x33'));}User_1[a183_0x1ebf('0x29')]['findById'](_0x4ad073['user']['id'],(_0x4a2ee4,_0x1cd4ea)=>{if(_0x4a2ee4){return _0x566026(_0x4a2ee4);}_0x1cd4ea[a183_0x1ebf('0x10')]=_0x4ad073['body'][a183_0x1ebf('0x10')];_0x1cd4ea[a183_0x1ebf('0x3a')](_0x4a2ee4=>{if(_0x4a2ee4){return _0x566026(_0x4a2ee4);}_0x4ad073[a183_0x1ebf('0x15')](a183_0x1ebf('0x1a'),{'msg':a183_0x1ebf('0x3d')});_0x5fb29f[a183_0x1ebf('0xa')]('/account');});});};exports[a183_0x1ebf('0x3e')]=(_0x1886b8,_0x5649ef,_0x4034b0)=>{User_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x3f')]({'_id':_0x1886b8['user']['id']},_0x69ed7d=>{if(_0x69ed7d){return _0x4034b0(_0x69ed7d);}_0x1886b8[a183_0x1ebf('0x1d')]();_0x1886b8[a183_0x1ebf('0x15')](a183_0x1ebf('0x40'),{'msg':a183_0x1ebf('0x41')});_0x5649ef[a183_0x1ebf('0xa')]('/');});};exports[a183_0x1ebf('0x42')]=(_0x5e2e73,_0x457ae3,_0x98388a)=>{const _0xd0b018=_0x5e2e73[a183_0x1ebf('0x43')][a183_0x1ebf('0x44')];User_1[a183_0x1ebf('0x29')]['findById'](_0x5e2e73['user']['id'],(_0x239950,_0x20735c)=>{if(_0x239950){return _0x98388a(_0x239950);}_0x20735c[_0xd0b018]=undefined;_0x20735c['tokens']=_0x20735c['tokens'][a183_0x1ebf('0x45')](_0x16624a=>_0x16624a[a183_0x1ebf('0x46')]!==_0xd0b018);_0x20735c['save'](_0x239950=>{if(_0x239950){return _0x98388a(_0x239950);}_0x5e2e73[a183_0x1ebf('0x15')]('info',{'msg':_0xd0b018+a183_0x1ebf('0x47')});_0x457ae3[a183_0x1ebf('0xa')](a183_0x1ebf('0x33'));});});};exports[a183_0x1ebf('0x48')]=(_0x1f19a2,_0x86095d,_0x5323e9)=>{if(_0x1f19a2['isAuthenticated']()){return _0x86095d['redirect']('/');}User_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x2a')]({'passwordResetToken':_0x1f19a2[a183_0x1ebf('0x43')][a183_0x1ebf('0x49')]})[a183_0x1ebf('0x4a')](a183_0x1ebf('0x4b'))['gt'](Date[a183_0x1ebf('0x4c')]())[a183_0x1ebf('0x4d')]((_0x8e2f94,_0x496331)=>{if(_0x8e2f94){return _0x5323e9(_0x8e2f94);}if(!_0x496331){_0x1f19a2[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),{'msg':a183_0x1ebf('0x4e')});return _0x86095d[a183_0x1ebf('0xa')](a183_0x1ebf('0x4f'));}_0x86095d['render'](a183_0x1ebf('0x50'),{'title':a183_0x1ebf('0x51')});});};exports['postReset']=(_0x641d0b,_0xf42bec,_0x4c7bd4)=>{_0x641d0b[a183_0x1ebf('0xe')](a183_0x1ebf('0x10'),a183_0x1ebf('0x52'))[a183_0x1ebf('0x23')]({'min':0x4});_0x641d0b[a183_0x1ebf('0xe')]('confirm',a183_0x1ebf('0x53'))['equals'](_0x641d0b[a183_0x1ebf('0x27')]['password']);const _0x38e868=_0x641d0b['validationErrors']();if(_0x38e868){_0x641d0b[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),_0x38e868);return _0xf42bec[a183_0x1ebf('0xa')](a183_0x1ebf('0x54'));}async_1[a183_0x1ebf('0x29')]['waterfall']([function resetPassword(_0x5276a6){User_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x2a')]({'passwordResetToken':_0x641d0b[a183_0x1ebf('0x43')][a183_0x1ebf('0x49')]})['where']('passwordResetExpires')['gt'](Date[a183_0x1ebf('0x4c')]())[a183_0x1ebf('0x4d')]((_0x132ad0,_0x1885c7)=>{if(_0x132ad0){return _0x4c7bd4(_0x132ad0);}if(!_0x1885c7){_0x641d0b[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),{'msg':a183_0x1ebf('0x4e')});return _0xf42bec[a183_0x1ebf('0xa')](a183_0x1ebf('0x54'));}_0x1885c7[a183_0x1ebf('0x10')]=_0x641d0b['body'][a183_0x1ebf('0x10')];_0x1885c7[a183_0x1ebf('0x55')]=undefined;_0x1885c7[a183_0x1ebf('0x4b')]=undefined;_0x1885c7[a183_0x1ebf('0x3a')](_0x132ad0=>{if(_0x132ad0){return _0x4c7bd4(_0x132ad0);}_0x641d0b['logIn'](_0x1885c7,_0x132ad0=>{_0x5276a6(_0x132ad0,_0x1885c7);});});});},function sendResetPasswordEmail(_0x1ec5c2,_0xdc850e){const _0x4e1978=nodemailer_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x56')]({'service':a183_0x1ebf('0x57'),'auth':{'user':process['env'][a183_0x1ebf('0x58')],'pass':process[a183_0x1ebf('0x59')][a183_0x1ebf('0x5a')]}});const _0x566bb0={'to':_0x1ec5c2[a183_0x1ebf('0x14')],'from':'express-ts@starter.com','subject':a183_0x1ebf('0x5b'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x1ec5c2[a183_0x1ebf('0x14')]+a183_0x1ebf('0x5c')};_0x4e1978[a183_0x1ebf('0x5d')](_0x566bb0,_0x5c6bd8=>{_0x641d0b[a183_0x1ebf('0x15')](a183_0x1ebf('0x1a'),{'msg':a183_0x1ebf('0x5e')});_0xdc850e(_0x5c6bd8);});}],_0x26f798=>{if(_0x26f798){return _0x4c7bd4(_0x26f798);}_0xf42bec[a183_0x1ebf('0xa')]('/');});};exports[a183_0x1ebf('0x5f')]=(_0x4e89c2,_0x2214f2)=>{if(_0x4e89c2['isAuthenticated']()){return _0x2214f2[a183_0x1ebf('0xa')]('/');}_0x2214f2[a183_0x1ebf('0x1f')](a183_0x1ebf('0x60'),{'title':a183_0x1ebf('0x61')});};exports[a183_0x1ebf('0x62')]=(_0x43cca5,_0x3f42c5,_0x4f9d8e)=>{_0x43cca5[a183_0x1ebf('0xe')](a183_0x1ebf('0x14'),a183_0x1ebf('0x31'))[a183_0x1ebf('0xf')]();_0x43cca5['sanitize'](a183_0x1ebf('0x14'))[a183_0x1ebf('0x32')]({'gmail_remove_dots':![]});const _0x3b2278=_0x43cca5[a183_0x1ebf('0x28')]();if(_0x3b2278){_0x43cca5[a183_0x1ebf('0x15')](a183_0x1ebf('0x16'),_0x3b2278);return _0x3f42c5[a183_0x1ebf('0xa')](a183_0x1ebf('0x4f'));}async_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x63')]([function createRandomToken(_0x4fcbff){crypto_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x64')](0x10,(_0x154f06,_0x1f93dc)=>{const _0x1d4d68=_0x1f93dc['toString'](a183_0x1ebf('0x65'));_0x4fcbff(_0x154f06,_0x1d4d68);});},function setRandomToken(_0x161869,_0x25d434){User_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x2a')]({'email':_0x43cca5['body']['email']},(_0xc11988,_0x5df828)=>{if(_0xc11988){return _0x25d434(_0xc11988);}if(!_0x5df828){_0x43cca5['flash'](a183_0x1ebf('0x16'),{'msg':a183_0x1ebf('0x66')});return _0x3f42c5[a183_0x1ebf('0xa')](a183_0x1ebf('0x4f'));}_0x5df828[a183_0x1ebf('0x55')]=_0x161869;_0x5df828[a183_0x1ebf('0x4b')]=Date[a183_0x1ebf('0x4c')]()+0x36ee80;_0x5df828[a183_0x1ebf('0x3a')](_0xc11988=>{_0x25d434(_0xc11988,_0x161869,_0x5df828);});});},function sendForgotPasswordEmail(_0xe7ee68,_0x7d8d28,_0x572f2f){const _0x4641f4=nodemailer_1[a183_0x1ebf('0x29')][a183_0x1ebf('0x56')]({'service':'SendGrid','auth':{'user':process[a183_0x1ebf('0x59')]['SENDGRID_USER'],'pass':process[a183_0x1ebf('0x59')]['SENDGRID_PASSWORD']}});const _0x3acc34={'to':_0x7d8d28[a183_0x1ebf('0x14')],'from':a183_0x1ebf('0x67'),'subject':a183_0x1ebf('0x68'),'text':a183_0x1ebf('0x69')+_0x43cca5[a183_0x1ebf('0x6a')]['host']+a183_0x1ebf('0x6b')+_0xe7ee68+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x4641f4[a183_0x1ebf('0x5d')](_0x3acc34,_0x507de2=>{_0x43cca5[a183_0x1ebf('0x15')](a183_0x1ebf('0x40'),{'msg':a183_0x1ebf('0x6c')+_0x7d8d28[a183_0x1ebf('0x14')]+a183_0x1ebf('0x6d')});_0x572f2f(_0x507de2);});}],_0x4708de=>{if(_0x4708de){return _0x4f9d8e(_0x4708de);}_0x3f42c5['redirect'](a183_0x1ebf('0x4f'));});};