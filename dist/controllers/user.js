var a111_0xac85=['errors','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','getSignup','account/signup','Create\x20Account','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','body','sanitize','findOne','/signup','save','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','user','profile','name','gender','location','website','code','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','logout','getOauthUnlink','tokens','filter','kind','info','params','token','where','passwordResetExpires','now','exec','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','isAuthenticated','account/forgot','postForgot','/forgot','randomBytes','passwordResetToken','SENDGRID_USER','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','async','crypto','nodemailer','passport','getLogin','redirect','render','account/login','Login','assert','email','Email\x20is\x20not\x20valid','isEmail','notEmpty','normalizeEmail','validationErrors','flash','/login','default','authenticate','local'];(function(_0x4eac49,_0x48e0a6){var _0x375cdd=function(_0x3e6848){while(--_0x3e6848){_0x4eac49['push'](_0x4eac49['shift']());}};_0x375cdd(++_0x48e0a6);}(a111_0xac85,0x1ec));var a111_0x1f8b=function(_0x10c9e5,_0x5940b0){_0x10c9e5=_0x10c9e5-0x0;var _0x45e263=a111_0xac85[_0x10c9e5];return _0x45e263;};'use strict';var __importDefault=this&&this[a111_0x1f8b('0x0')]||function(_0x3199f5){return _0x3199f5&&_0x3199f5[a111_0x1f8b('0x1')]?_0x3199f5:{'default':_0x3199f5};};Object['defineProperty'](exports,a111_0x1f8b('0x1'),{'value':!![]});const async_1=__importDefault(require(a111_0x1f8b('0x2')));const crypto_1=__importDefault(require(a111_0x1f8b('0x3')));const nodemailer_1=__importDefault(require(a111_0x1f8b('0x4')));const passport_1=__importDefault(require(a111_0x1f8b('0x5')));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a111_0x1f8b('0x6')]=(_0xe93f1b,_0x3a277d)=>{if(_0xe93f1b['user']){return _0x3a277d[a111_0x1f8b('0x7')]('/');}_0x3a277d[a111_0x1f8b('0x8')](a111_0x1f8b('0x9'),{'title':a111_0x1f8b('0xa')});};exports['postLogin']=(_0x4adc03,_0xd19adb,_0xb331ab)=>{_0x4adc03[a111_0x1f8b('0xb')](a111_0x1f8b('0xc'),a111_0x1f8b('0xd'))[a111_0x1f8b('0xe')]();_0x4adc03[a111_0x1f8b('0xb')]('password','Password\x20cannot\x20be\x20blank')[a111_0x1f8b('0xf')]();_0x4adc03['sanitize'](a111_0x1f8b('0xc'))[a111_0x1f8b('0x10')]({'gmail_remove_dots':![]});const _0x2ee233=_0x4adc03[a111_0x1f8b('0x11')]();if(_0x2ee233){_0x4adc03[a111_0x1f8b('0x12')]('errors',_0x2ee233);return _0xd19adb[a111_0x1f8b('0x7')](a111_0x1f8b('0x13'));}passport_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x15')](a111_0x1f8b('0x16'),(_0x5942a1,_0x365ddf,_0x12b0cb)=>{if(_0x5942a1){return _0xb331ab(_0x5942a1);}if(!_0x365ddf){_0x4adc03['flash'](a111_0x1f8b('0x17'),_0x12b0cb[a111_0x1f8b('0x18')]);return _0xd19adb[a111_0x1f8b('0x7')](a111_0x1f8b('0x13'));}_0x4adc03[a111_0x1f8b('0x19')](_0x365ddf,_0x5942a1=>{if(_0x5942a1){return _0xb331ab(_0x5942a1);}_0x4adc03[a111_0x1f8b('0x12')]('success',{'msg':a111_0x1f8b('0x1a')});_0xd19adb[a111_0x1f8b('0x7')](_0x4adc03[a111_0x1f8b('0x1b')][a111_0x1f8b('0x1c')]||'/');});})(_0x4adc03,_0xd19adb,_0xb331ab);};exports['logout']=(_0xdb6d6b,_0x55d66a)=>{_0xdb6d6b['logout']();_0x55d66a[a111_0x1f8b('0x7')]('/');};exports[a111_0x1f8b('0x1d')]=(_0x33286c,_0x274bbd)=>{if(_0x33286c['user']){return _0x274bbd[a111_0x1f8b('0x7')]('/');}_0x274bbd['render'](a111_0x1f8b('0x1e'),{'title':a111_0x1f8b('0x1f')});};exports['postSignup']=(_0x48e54f,_0x52016f,_0x3f8a86)=>{_0x48e54f[a111_0x1f8b('0xb')](a111_0x1f8b('0xc'),'Email\x20is\x20not\x20valid')[a111_0x1f8b('0xe')]();_0x48e54f[a111_0x1f8b('0xb')](a111_0x1f8b('0x20'),a111_0x1f8b('0x21'))[a111_0x1f8b('0x22')]({'min':0x4});_0x48e54f['assert']('confirmPassword',a111_0x1f8b('0x23'))['equals'](_0x48e54f[a111_0x1f8b('0x24')][a111_0x1f8b('0x20')]);_0x48e54f[a111_0x1f8b('0x25')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x10eaef=_0x48e54f[a111_0x1f8b('0x11')]();if(_0x10eaef){_0x48e54f[a111_0x1f8b('0x12')]('errors',_0x10eaef);return _0x52016f[a111_0x1f8b('0x7')]('/signup');}const _0x2cacb8=new User_1[(a111_0x1f8b('0x14'))]({'email':_0x48e54f['body'][a111_0x1f8b('0xc')],'password':_0x48e54f[a111_0x1f8b('0x24')][a111_0x1f8b('0x20')]});User_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x26')]({'email':_0x48e54f[a111_0x1f8b('0x24')][a111_0x1f8b('0xc')]},(_0x4db7a3,_0x52ba43)=>{if(_0x4db7a3){return _0x3f8a86(_0x4db7a3);}if(_0x52ba43){_0x48e54f[a111_0x1f8b('0x12')](a111_0x1f8b('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x52016f[a111_0x1f8b('0x7')](a111_0x1f8b('0x27'));}_0x2cacb8[a111_0x1f8b('0x28')](_0x4db7a3=>{if(_0x4db7a3){return _0x3f8a86(_0x4db7a3);}_0x48e54f['logIn'](_0x2cacb8,_0x4db7a3=>{if(_0x4db7a3){return _0x3f8a86(_0x4db7a3);}_0x52016f[a111_0x1f8b('0x7')]('/');});});});};exports[a111_0x1f8b('0x29')]=(_0x32a9a1,_0x2dcb5a)=>{_0x2dcb5a[a111_0x1f8b('0x8')](a111_0x1f8b('0x2a'),{'title':a111_0x1f8b('0x2b')});};exports['postUpdateProfile']=(_0x2ad430,_0x97ac58,_0x2629c4)=>{_0x2ad430[a111_0x1f8b('0xb')]('email',a111_0x1f8b('0x2c'))['isEmail']();_0x2ad430[a111_0x1f8b('0x25')](a111_0x1f8b('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x50ab60=_0x2ad430[a111_0x1f8b('0x11')]();if(_0x50ab60){_0x2ad430['flash'](a111_0x1f8b('0x17'),_0x50ab60);return _0x97ac58[a111_0x1f8b('0x7')](a111_0x1f8b('0x2d'));}User_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x2e')](_0x2ad430[a111_0x1f8b('0x2f')]['id'],(_0x196e7f,_0x271e46)=>{if(_0x196e7f){return _0x2629c4(_0x196e7f);}_0x271e46['email']=_0x2ad430[a111_0x1f8b('0x24')]['email']||'';_0x271e46[a111_0x1f8b('0x30')][a111_0x1f8b('0x31')]=_0x2ad430[a111_0x1f8b('0x24')][a111_0x1f8b('0x31')]||'';_0x271e46['profile'][a111_0x1f8b('0x32')]=_0x2ad430[a111_0x1f8b('0x24')]['gender']||'';_0x271e46[a111_0x1f8b('0x30')][a111_0x1f8b('0x33')]=_0x2ad430['body'][a111_0x1f8b('0x33')]||'';_0x271e46[a111_0x1f8b('0x30')][a111_0x1f8b('0x34')]=_0x2ad430['body']['website']||'';_0x271e46[a111_0x1f8b('0x28')](_0x196e7f=>{if(_0x196e7f){if(_0x196e7f[a111_0x1f8b('0x35')]===0x2af8){_0x2ad430[a111_0x1f8b('0x12')](a111_0x1f8b('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x97ac58['redirect'](a111_0x1f8b('0x2d'));}return _0x2629c4(_0x196e7f);}_0x2ad430['flash'](a111_0x1f8b('0x36'),{'msg':a111_0x1f8b('0x37')});_0x97ac58[a111_0x1f8b('0x7')]('/account');});});};exports[a111_0x1f8b('0x38')]=(_0x4b4b73,_0x57d42a,_0x393c87)=>{_0x4b4b73[a111_0x1f8b('0xb')](a111_0x1f8b('0x20'),a111_0x1f8b('0x21'))[a111_0x1f8b('0x22')]({'min':0x4});_0x4b4b73['assert'](a111_0x1f8b('0x39'),a111_0x1f8b('0x23'))['equals'](_0x4b4b73[a111_0x1f8b('0x24')][a111_0x1f8b('0x20')]);const _0xa8fb19=_0x4b4b73[a111_0x1f8b('0x11')]();if(_0xa8fb19){_0x4b4b73[a111_0x1f8b('0x12')](a111_0x1f8b('0x17'),_0xa8fb19);return _0x57d42a[a111_0x1f8b('0x7')]('/account');}User_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x2e')](_0x4b4b73[a111_0x1f8b('0x2f')]['id'],(_0x5e43d7,_0x43be9d)=>{if(_0x5e43d7){return _0x393c87(_0x5e43d7);}_0x43be9d[a111_0x1f8b('0x20')]=_0x4b4b73[a111_0x1f8b('0x24')][a111_0x1f8b('0x20')];_0x43be9d[a111_0x1f8b('0x28')](_0x5e43d7=>{if(_0x5e43d7){return _0x393c87(_0x5e43d7);}_0x4b4b73[a111_0x1f8b('0x12')]('success',{'msg':a111_0x1f8b('0x3a')});_0x57d42a[a111_0x1f8b('0x7')]('/account');});});};exports[a111_0x1f8b('0x3b')]=(_0x1ca590,_0x36930d,_0x3aa5c0)=>{User_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x3c')]({'_id':_0x1ca590['user']['id']},_0xbce8ac=>{if(_0xbce8ac){return _0x3aa5c0(_0xbce8ac);}_0x1ca590[a111_0x1f8b('0x3d')]();_0x1ca590[a111_0x1f8b('0x12')]('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x36930d[a111_0x1f8b('0x7')]('/');});};exports[a111_0x1f8b('0x3e')]=(_0x39e4f6,_0x41c248,_0x599276)=>{const _0xa71595=_0x39e4f6['params']['provider'];User_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x2e')](_0x39e4f6['user']['id'],(_0x1a521a,_0x42ee93)=>{if(_0x1a521a){return _0x599276(_0x1a521a);}_0x42ee93[_0xa71595]=undefined;_0x42ee93['tokens']=_0x42ee93[a111_0x1f8b('0x3f')][a111_0x1f8b('0x40')](_0x511208=>_0x511208[a111_0x1f8b('0x41')]!==_0xa71595);_0x42ee93['save'](_0x1a521a=>{if(_0x1a521a){return _0x599276(_0x1a521a);}_0x39e4f6[a111_0x1f8b('0x12')](a111_0x1f8b('0x42'),{'msg':_0xa71595+'\x20account\x20has\x20been\x20unlinked.'});_0x41c248['redirect'](a111_0x1f8b('0x2d'));});});};exports['getReset']=(_0xbbf794,_0x22b64f,_0x39820e)=>{if(_0xbbf794['isAuthenticated']()){return _0x22b64f[a111_0x1f8b('0x7')]('/');}User_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x26')]({'passwordResetToken':_0xbbf794[a111_0x1f8b('0x43')][a111_0x1f8b('0x44')]})[a111_0x1f8b('0x45')](a111_0x1f8b('0x46'))['gt'](Date[a111_0x1f8b('0x47')]())[a111_0x1f8b('0x48')]((_0x553958,_0x48beee)=>{if(_0x553958){return _0x39820e(_0x553958);}if(!_0x48beee){_0xbbf794[a111_0x1f8b('0x12')](a111_0x1f8b('0x17'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x22b64f[a111_0x1f8b('0x7')]('/forgot');}_0x22b64f[a111_0x1f8b('0x8')](a111_0x1f8b('0x49'),{'title':a111_0x1f8b('0x4a')});});};exports[a111_0x1f8b('0x4b')]=(_0x2be310,_0x524f9b,_0x9c19d0)=>{_0x2be310[a111_0x1f8b('0xb')](a111_0x1f8b('0x20'),a111_0x1f8b('0x4c'))[a111_0x1f8b('0x22')]({'min':0x4});_0x2be310['assert'](a111_0x1f8b('0x4d'),'Passwords\x20must\x20match.')['equals'](_0x2be310[a111_0x1f8b('0x24')]['password']);const _0x150d4b=_0x2be310[a111_0x1f8b('0x11')]();if(_0x150d4b){_0x2be310[a111_0x1f8b('0x12')](a111_0x1f8b('0x17'),_0x150d4b);return _0x524f9b[a111_0x1f8b('0x7')](a111_0x1f8b('0x4e'));}async_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x4f')]([function resetPassword(_0x422e60){User_1[a111_0x1f8b('0x14')]['findOne']({'passwordResetToken':_0x2be310[a111_0x1f8b('0x43')][a111_0x1f8b('0x44')]})[a111_0x1f8b('0x45')](a111_0x1f8b('0x46'))['gt'](Date[a111_0x1f8b('0x47')]())['exec']((_0x325d56,_0xf00f41)=>{if(_0x325d56){return _0x9c19d0(_0x325d56);}if(!_0xf00f41){_0x2be310[a111_0x1f8b('0x12')]('errors',{'msg':a111_0x1f8b('0x50')});return _0x524f9b[a111_0x1f8b('0x7')]('back');}_0xf00f41[a111_0x1f8b('0x20')]=_0x2be310['body']['password'];_0xf00f41['passwordResetToken']=undefined;_0xf00f41[a111_0x1f8b('0x46')]=undefined;_0xf00f41[a111_0x1f8b('0x28')](_0x325d56=>{if(_0x325d56){return _0x9c19d0(_0x325d56);}_0x2be310[a111_0x1f8b('0x19')](_0xf00f41,_0x325d56=>{_0x422e60(_0x325d56,_0xf00f41);});});});},function sendResetPasswordEmail(_0x56a133,_0x15a930){const _0x4d50de=nodemailer_1['default'][a111_0x1f8b('0x51')]({'service':a111_0x1f8b('0x52'),'auth':{'user':process[a111_0x1f8b('0x53')]['SENDGRID_USER'],'pass':process[a111_0x1f8b('0x53')][a111_0x1f8b('0x54')]}});const _0x2e8323={'to':_0x56a133['email'],'from':a111_0x1f8b('0x55'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a111_0x1f8b('0x56')+_0x56a133[a111_0x1f8b('0xc')]+a111_0x1f8b('0x57')};_0x4d50de[a111_0x1f8b('0x58')](_0x2e8323,_0x50417a=>{_0x2be310[a111_0x1f8b('0x12')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x15a930(_0x50417a);});}],_0x2002dd=>{if(_0x2002dd){return _0x9c19d0(_0x2002dd);}_0x524f9b[a111_0x1f8b('0x7')]('/');});};exports[a111_0x1f8b('0x59')]=(_0x4f5a90,_0x269443)=>{if(_0x4f5a90[a111_0x1f8b('0x5a')]()){return _0x269443['redirect']('/');}_0x269443[a111_0x1f8b('0x8')](a111_0x1f8b('0x5b'),{'title':'Forgot\x20Password'});};exports[a111_0x1f8b('0x5c')]=(_0x3b525b,_0x4603a0,_0x880d34)=>{_0x3b525b[a111_0x1f8b('0xb')]('email',a111_0x1f8b('0x2c'))[a111_0x1f8b('0xe')]();_0x3b525b[a111_0x1f8b('0x25')](a111_0x1f8b('0xc'))[a111_0x1f8b('0x10')]({'gmail_remove_dots':![]});const _0x556908=_0x3b525b[a111_0x1f8b('0x11')]();if(_0x556908){_0x3b525b['flash'](a111_0x1f8b('0x17'),_0x556908);return _0x4603a0['redirect'](a111_0x1f8b('0x5d'));}async_1[a111_0x1f8b('0x14')]['waterfall']([function createRandomToken(_0x15df0f){crypto_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x5e')](0x10,(_0x4a7a39,_0x429dda)=>{const _0x519be7=_0x429dda['toString']('hex');_0x15df0f(_0x4a7a39,_0x519be7);});},function setRandomToken(_0x2132c1,_0x2e94b5){User_1['default'][a111_0x1f8b('0x26')]({'email':_0x3b525b[a111_0x1f8b('0x24')][a111_0x1f8b('0xc')]},(_0x39470f,_0x453535)=>{if(_0x39470f){return _0x2e94b5(_0x39470f);}if(!_0x453535){_0x3b525b[a111_0x1f8b('0x12')](a111_0x1f8b('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x4603a0[a111_0x1f8b('0x7')]('/forgot');}_0x453535[a111_0x1f8b('0x5f')]=_0x2132c1;_0x453535['passwordResetExpires']=Date[a111_0x1f8b('0x47')]()+0x36ee80;_0x453535[a111_0x1f8b('0x28')](_0x39470f=>{_0x2e94b5(_0x39470f,_0x2132c1,_0x453535);});});},function sendForgotPasswordEmail(_0x29364b,_0x4b4209,_0x26a65f){const _0x164d32=nodemailer_1[a111_0x1f8b('0x14')][a111_0x1f8b('0x51')]({'service':a111_0x1f8b('0x52'),'auth':{'user':process[a111_0x1f8b('0x53')][a111_0x1f8b('0x60')],'pass':process['env'][a111_0x1f8b('0x54')]}});const _0x1e503d={'to':_0x4b4209[a111_0x1f8b('0xc')],'from':'hackathon@starter.com','subject':a111_0x1f8b('0x61'),'text':a111_0x1f8b('0x62')+_0x3b525b[a111_0x1f8b('0x63')][a111_0x1f8b('0x64')]+'/reset/'+_0x29364b+a111_0x1f8b('0x65')};_0x164d32[a111_0x1f8b('0x58')](_0x1e503d,_0x2c0666=>{_0x3b525b[a111_0x1f8b('0x12')]('info',{'msg':a111_0x1f8b('0x66')+_0x4b4209[a111_0x1f8b('0xc')]+'\x20with\x20further\x20instructions.'});_0x26a65f(_0x2c0666);});}],_0x5eb5c2=>{if(_0x5eb5c2){return _0x880d34(_0x5eb5c2);}_0x4603a0['redirect'](a111_0x1f8b('0x5d'));});};