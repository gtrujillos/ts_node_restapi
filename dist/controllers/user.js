var a101_0x19aa=['postUpdatePassword','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','getReset','isAuthenticated','findOne','token','where','now','exec','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','Your\x20password\x20has\x20been\x20changed','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','defineProperty','__esModule','async','crypto','passport','../models/User','user','redirect','render','postLogin','email','Email\x20is\x20not\x20valid','assert','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','local','message','logIn','success','session','returnTo','logout','getSignup','Create\x20Account','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','/signup','default','password','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','name','gender','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'];(function(_0x14151c,_0x31e67e){var _0x730bd5=function(_0x4cb912){while(--_0x4cb912){_0x14151c['push'](_0x14151c['shift']());}};_0x730bd5(++_0x31e67e);}(a101_0x19aa,0x1d1));var a101_0x50b5=function(_0x4d697b,_0x412f5d){_0x4d697b=_0x4d697b-0x0;var _0x13a220=a101_0x19aa[_0x4d697b];return _0x13a220;};'use strict';var __importDefault=this&&this[a101_0x50b5('0x0')]||function(_0x138a04){return _0x138a04&&_0x138a04['__esModule']?_0x138a04:{'default':_0x138a04};};Object[a101_0x50b5('0x1')](exports,a101_0x50b5('0x2'),{'value':!![]});const async_1=__importDefault(require(a101_0x50b5('0x3')));const crypto_1=__importDefault(require(a101_0x50b5('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a101_0x50b5('0x5')));const User_1=__importDefault(require(a101_0x50b5('0x6')));const request=require('express-validator');exports['getLogin']=(_0xd6ef29,_0x170454)=>{if(_0xd6ef29[a101_0x50b5('0x7')]){return _0x170454[a101_0x50b5('0x8')]('/');}_0x170454[a101_0x50b5('0x9')]('account/login',{'title':'Login'});};exports[a101_0x50b5('0xa')]=(_0x2ab281,_0x5ab89a,_0xd842e3)=>{_0x2ab281['assert'](a101_0x50b5('0xb'),a101_0x50b5('0xc'))['isEmail']();_0x2ab281[a101_0x50b5('0xd')]('password',a101_0x50b5('0xe'))[a101_0x50b5('0xf')]();_0x2ab281[a101_0x50b5('0x10')](a101_0x50b5('0xb'))[a101_0x50b5('0x11')]({'gmail_remove_dots':![]});const _0x821c3f=_0x2ab281[a101_0x50b5('0x12')]();if(_0x821c3f){_0x2ab281[a101_0x50b5('0x13')](a101_0x50b5('0x14'),_0x821c3f);return _0x5ab89a[a101_0x50b5('0x8')](a101_0x50b5('0x15'));}passport_1['default']['authenticate'](a101_0x50b5('0x16'),(_0x3d56ca,_0x1f6dbf,_0x3adbfd)=>{if(_0x3d56ca){return _0xd842e3(_0x3d56ca);}if(!_0x1f6dbf){_0x2ab281[a101_0x50b5('0x13')]('errors',_0x3adbfd[a101_0x50b5('0x17')]);return _0x5ab89a[a101_0x50b5('0x8')](a101_0x50b5('0x15'));}_0x2ab281[a101_0x50b5('0x18')](_0x1f6dbf,_0x3d56ca=>{if(_0x3d56ca){return _0xd842e3(_0x3d56ca);}_0x2ab281['flash'](a101_0x50b5('0x19'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x5ab89a[a101_0x50b5('0x8')](_0x2ab281[a101_0x50b5('0x1a')][a101_0x50b5('0x1b')]||'/');});})(_0x2ab281,_0x5ab89a,_0xd842e3);};exports[a101_0x50b5('0x1c')]=(_0xe4876f,_0x1dc538)=>{_0xe4876f[a101_0x50b5('0x1c')]();_0x1dc538[a101_0x50b5('0x8')]('/');};exports[a101_0x50b5('0x1d')]=(_0x493701,_0x23c966)=>{if(_0x493701[a101_0x50b5('0x7')]){return _0x23c966['redirect']('/');}_0x23c966[a101_0x50b5('0x9')]('account/signup',{'title':a101_0x50b5('0x1e')});};exports['postSignup']=(_0x10ccac,_0x21794d,_0x1f7b6d)=>{_0x10ccac[a101_0x50b5('0xd')](a101_0x50b5('0xb'),a101_0x50b5('0xc'))[a101_0x50b5('0x1f')]();_0x10ccac['assert']('password',a101_0x50b5('0x20'))[a101_0x50b5('0x21')]({'min':0x4});_0x10ccac['assert']('confirmPassword',a101_0x50b5('0x22'))[a101_0x50b5('0x23')](_0x10ccac[a101_0x50b5('0x24')]['password']);_0x10ccac[a101_0x50b5('0x10')](a101_0x50b5('0xb'))[a101_0x50b5('0x11')]({'gmail_remove_dots':![]});const _0x1244db=_0x10ccac[a101_0x50b5('0x12')]();if(_0x1244db){_0x10ccac[a101_0x50b5('0x13')](a101_0x50b5('0x14'),_0x1244db);return _0x21794d[a101_0x50b5('0x8')](a101_0x50b5('0x25'));}const _0x2c53a5=new User_1[(a101_0x50b5('0x26'))]({'email':_0x10ccac['body'][a101_0x50b5('0xb')],'password':_0x10ccac[a101_0x50b5('0x24')][a101_0x50b5('0x27')]});User_1[a101_0x50b5('0x26')]['findOne']({'email':_0x10ccac['body'][a101_0x50b5('0xb')]},(_0x47f8a7,_0x5777a3)=>{if(_0x47f8a7){return _0x1f7b6d(_0x47f8a7);}if(_0x5777a3){_0x10ccac[a101_0x50b5('0x13')](a101_0x50b5('0x14'),{'msg':a101_0x50b5('0x28')});return _0x21794d[a101_0x50b5('0x8')]('/signup');}_0x2c53a5['save'](_0x47f8a7=>{if(_0x47f8a7){return _0x1f7b6d(_0x47f8a7);}_0x10ccac[a101_0x50b5('0x18')](_0x2c53a5,_0x47f8a7=>{if(_0x47f8a7){return _0x1f7b6d(_0x47f8a7);}_0x21794d['redirect']('/');});});});};exports[a101_0x50b5('0x29')]=(_0x30bf65,_0x52d200)=>{_0x52d200[a101_0x50b5('0x9')](a101_0x50b5('0x2a'),{'title':a101_0x50b5('0x2b')});};exports[a101_0x50b5('0x2c')]=(_0x5ebe2a,_0x4b54c2,_0x1c5b34)=>{_0x5ebe2a['assert'](a101_0x50b5('0xb'),a101_0x50b5('0x2d'))[a101_0x50b5('0x1f')]();_0x5ebe2a[a101_0x50b5('0x10')]('email')[a101_0x50b5('0x11')]({'gmail_remove_dots':![]});const _0x562f9a=_0x5ebe2a['validationErrors']();if(_0x562f9a){_0x5ebe2a[a101_0x50b5('0x13')](a101_0x50b5('0x14'),_0x562f9a);return _0x4b54c2[a101_0x50b5('0x8')](a101_0x50b5('0x2e'));}User_1[a101_0x50b5('0x26')]['findById'](_0x5ebe2a['user']['id'],(_0x3902d2,_0x1a32f4)=>{if(_0x3902d2){return _0x1c5b34(_0x3902d2);}_0x1a32f4['email']=_0x5ebe2a[a101_0x50b5('0x24')][a101_0x50b5('0xb')]||'';_0x1a32f4[a101_0x50b5('0x2f')][a101_0x50b5('0x30')]=_0x5ebe2a[a101_0x50b5('0x24')][a101_0x50b5('0x30')]||'';_0x1a32f4[a101_0x50b5('0x2f')][a101_0x50b5('0x31')]=_0x5ebe2a['body']['gender']||'';_0x1a32f4[a101_0x50b5('0x2f')][a101_0x50b5('0x32')]=_0x5ebe2a[a101_0x50b5('0x24')][a101_0x50b5('0x32')]||'';_0x1a32f4[a101_0x50b5('0x2f')][a101_0x50b5('0x33')]=_0x5ebe2a[a101_0x50b5('0x24')]['website']||'';_0x1a32f4[a101_0x50b5('0x34')](_0x3902d2=>{if(_0x3902d2){if(_0x3902d2[a101_0x50b5('0x35')]===0x2af8){_0x5ebe2a[a101_0x50b5('0x13')](a101_0x50b5('0x14'),{'msg':a101_0x50b5('0x36')});return _0x4b54c2[a101_0x50b5('0x8')]('/account');}return _0x1c5b34(_0x3902d2);}_0x5ebe2a['flash'](a101_0x50b5('0x19'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x4b54c2['redirect'](a101_0x50b5('0x2e'));});});};exports[a101_0x50b5('0x37')]=(_0x5cb2fa,_0x2f1e39,_0xe499e9)=>{_0x5cb2fa['assert'](a101_0x50b5('0x27'),a101_0x50b5('0x20'))[a101_0x50b5('0x21')]({'min':0x4});_0x5cb2fa[a101_0x50b5('0xd')]('confirmPassword',a101_0x50b5('0x22'))['equals'](_0x5cb2fa[a101_0x50b5('0x24')][a101_0x50b5('0x27')]);const _0x1f60c3=_0x5cb2fa['validationErrors']();if(_0x1f60c3){_0x5cb2fa[a101_0x50b5('0x13')](a101_0x50b5('0x14'),_0x1f60c3);return _0x2f1e39[a101_0x50b5('0x8')](a101_0x50b5('0x2e'));}User_1[a101_0x50b5('0x26')][a101_0x50b5('0x38')](_0x5cb2fa[a101_0x50b5('0x7')]['id'],(_0x3de585,_0x119de9)=>{if(_0x3de585){return _0xe499e9(_0x3de585);}_0x119de9['password']=_0x5cb2fa[a101_0x50b5('0x24')][a101_0x50b5('0x27')];_0x119de9['save'](_0x3de585=>{if(_0x3de585){return _0xe499e9(_0x3de585);}_0x5cb2fa['flash'](a101_0x50b5('0x19'),{'msg':a101_0x50b5('0x39')});_0x2f1e39[a101_0x50b5('0x8')](a101_0x50b5('0x2e'));});});};exports[a101_0x50b5('0x3a')]=(_0xa33562,_0xc5e259,_0x35d129)=>{User_1[a101_0x50b5('0x26')]['remove']({'_id':_0xa33562['user']['id']},_0x2239ae=>{if(_0x2239ae){return _0x35d129(_0x2239ae);}_0xa33562[a101_0x50b5('0x1c')]();_0xa33562[a101_0x50b5('0x13')](a101_0x50b5('0x3b'),{'msg':a101_0x50b5('0x3c')});_0xc5e259['redirect']('/');});};exports[a101_0x50b5('0x3d')]=(_0x242c0a,_0x364fa1,_0x4e2f72)=>{const _0x488968=_0x242c0a[a101_0x50b5('0x3e')]['provider'];User_1[a101_0x50b5('0x26')]['findById'](_0x242c0a[a101_0x50b5('0x7')]['id'],(_0x2319bc,_0x5a0a3a)=>{if(_0x2319bc){return _0x4e2f72(_0x2319bc);}_0x5a0a3a[_0x488968]=undefined;_0x5a0a3a[a101_0x50b5('0x3f')]=_0x5a0a3a[a101_0x50b5('0x3f')][a101_0x50b5('0x40')](_0x429b29=>_0x429b29[a101_0x50b5('0x41')]!==_0x488968);_0x5a0a3a['save'](_0x2319bc=>{if(_0x2319bc){return _0x4e2f72(_0x2319bc);}_0x242c0a['flash'](a101_0x50b5('0x3b'),{'msg':_0x488968+'\x20account\x20has\x20been\x20unlinked.'});_0x364fa1[a101_0x50b5('0x8')](a101_0x50b5('0x2e'));});});};exports[a101_0x50b5('0x42')]=(_0x3a0c05,_0x1ec81a,_0x5cb0ae)=>{if(_0x3a0c05[a101_0x50b5('0x43')]()){return _0x1ec81a[a101_0x50b5('0x8')]('/');}User_1[a101_0x50b5('0x26')][a101_0x50b5('0x44')]({'passwordResetToken':_0x3a0c05['params'][a101_0x50b5('0x45')]})[a101_0x50b5('0x46')]('passwordResetExpires')['gt'](Date[a101_0x50b5('0x47')]())[a101_0x50b5('0x48')]((_0x123eba,_0x6ecd09)=>{if(_0x123eba){return _0x5cb0ae(_0x123eba);}if(!_0x6ecd09){_0x3a0c05['flash'](a101_0x50b5('0x14'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x1ec81a[a101_0x50b5('0x8')](a101_0x50b5('0x49'));}_0x1ec81a[a101_0x50b5('0x9')](a101_0x50b5('0x4a'),{'title':a101_0x50b5('0x4b')});});};exports['postReset']=(_0xa7b6dd,_0x1c2af9,_0x161fe9)=>{_0xa7b6dd['assert'](a101_0x50b5('0x27'),a101_0x50b5('0x4c'))[a101_0x50b5('0x21')]({'min':0x4});_0xa7b6dd[a101_0x50b5('0xd')](a101_0x50b5('0x4d'),a101_0x50b5('0x4e'))[a101_0x50b5('0x23')](_0xa7b6dd['body'][a101_0x50b5('0x27')]);const _0x4b6144=_0xa7b6dd['validationErrors']();if(_0x4b6144){_0xa7b6dd['flash'](a101_0x50b5('0x14'),_0x4b6144);return _0x1c2af9['redirect'](a101_0x50b5('0x4f'));}async_1['default'][a101_0x50b5('0x50')]([function resetPassword(_0x26b58a){User_1['default'][a101_0x50b5('0x44')]({'passwordResetToken':_0xa7b6dd['params'][a101_0x50b5('0x45')]})[a101_0x50b5('0x46')](a101_0x50b5('0x51'))['gt'](Date[a101_0x50b5('0x47')]())[a101_0x50b5('0x48')]((_0x141474,_0x2c8c09)=>{if(_0x141474){return _0x161fe9(_0x141474);}if(!_0x2c8c09){_0xa7b6dd[a101_0x50b5('0x13')](a101_0x50b5('0x14'),{'msg':a101_0x50b5('0x52')});return _0x1c2af9['redirect'](a101_0x50b5('0x4f'));}_0x2c8c09[a101_0x50b5('0x27')]=_0xa7b6dd[a101_0x50b5('0x24')][a101_0x50b5('0x27')];_0x2c8c09[a101_0x50b5('0x53')]=undefined;_0x2c8c09[a101_0x50b5('0x51')]=undefined;_0x2c8c09['save'](_0x141474=>{if(_0x141474){return _0x161fe9(_0x141474);}_0xa7b6dd[a101_0x50b5('0x18')](_0x2c8c09,_0x141474=>{_0x26b58a(_0x141474,_0x2c8c09);});});});},function sendResetPasswordEmail(_0x3d2c1f,_0x1e2493){const _0x32ee0d=nodemailer_1['default'][a101_0x50b5('0x54')]({'service':a101_0x50b5('0x55'),'auth':{'user':process[a101_0x50b5('0x56')]['SENDGRID_USER'],'pass':process[a101_0x50b5('0x56')]['SENDGRID_PASSWORD']}});const _0xd88d90={'to':_0x3d2c1f[a101_0x50b5('0xb')],'from':'express-ts@starter.com','subject':a101_0x50b5('0x57'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x3d2c1f[a101_0x50b5('0xb')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x32ee0d[a101_0x50b5('0x58')](_0xd88d90,_0x3972ba=>{_0xa7b6dd[a101_0x50b5('0x13')]('success',{'msg':a101_0x50b5('0x59')});_0x1e2493(_0x3972ba);});}],_0x237753=>{if(_0x237753){return _0x161fe9(_0x237753);}_0x1c2af9[a101_0x50b5('0x8')]('/');});};exports['getForgot']=(_0x1bfc38,_0x18bc91)=>{if(_0x1bfc38[a101_0x50b5('0x43')]()){return _0x18bc91[a101_0x50b5('0x8')]('/');}_0x18bc91[a101_0x50b5('0x9')](a101_0x50b5('0x5a'),{'title':a101_0x50b5('0x5b')});};exports[a101_0x50b5('0x5c')]=(_0x506501,_0x245bc1,_0x3e4f5a)=>{_0x506501[a101_0x50b5('0xd')](a101_0x50b5('0xb'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x506501['sanitize'](a101_0x50b5('0xb'))[a101_0x50b5('0x11')]({'gmail_remove_dots':![]});const _0x5cd6ea=_0x506501['validationErrors']();if(_0x5cd6ea){_0x506501[a101_0x50b5('0x13')]('errors',_0x5cd6ea);return _0x245bc1[a101_0x50b5('0x8')](a101_0x50b5('0x49'));}async_1[a101_0x50b5('0x26')][a101_0x50b5('0x50')]([function createRandomToken(_0x231a0f){crypto_1[a101_0x50b5('0x26')][a101_0x50b5('0x5d')](0x10,(_0x51a149,_0xe5049a)=>{const _0x9fae87=_0xe5049a[a101_0x50b5('0x5e')](a101_0x50b5('0x5f'));_0x231a0f(_0x51a149,_0x9fae87);});},function setRandomToken(_0x24b4c7,_0x4dc28a){User_1[a101_0x50b5('0x26')][a101_0x50b5('0x44')]({'email':_0x506501[a101_0x50b5('0x24')][a101_0x50b5('0xb')]},(_0x2b3f8c,_0x56b09e)=>{if(_0x2b3f8c){return _0x4dc28a(_0x2b3f8c);}if(!_0x56b09e){_0x506501[a101_0x50b5('0x13')](a101_0x50b5('0x14'),{'msg':a101_0x50b5('0x60')});return _0x245bc1['redirect']('/forgot');}_0x56b09e[a101_0x50b5('0x53')]=_0x24b4c7;_0x56b09e['passwordResetExpires']=Date[a101_0x50b5('0x47')]()+0x36ee80;_0x56b09e[a101_0x50b5('0x34')](_0x2b3f8c=>{_0x4dc28a(_0x2b3f8c,_0x24b4c7,_0x56b09e);});});},function sendForgotPasswordEmail(_0x24d562,_0x19a2f2,_0x564035){const _0x145f3c=nodemailer_1['default']['createTransport']({'service':a101_0x50b5('0x55'),'auth':{'user':process[a101_0x50b5('0x56')]['SENDGRID_USER'],'pass':process[a101_0x50b5('0x56')][a101_0x50b5('0x61')]}});const _0x17ec22={'to':_0x19a2f2[a101_0x50b5('0xb')],'from':'hackathon@starter.com','subject':a101_0x50b5('0x62'),'text':a101_0x50b5('0x63')+_0x506501[a101_0x50b5('0x64')][a101_0x50b5('0x65')]+a101_0x50b5('0x66')+_0x24d562+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x145f3c[a101_0x50b5('0x58')](_0x17ec22,_0x90796e=>{_0x506501['flash'](a101_0x50b5('0x3b'),{'msg':a101_0x50b5('0x67')+_0x19a2f2[a101_0x50b5('0xb')]+'\x20with\x20further\x20instructions.'});_0x564035(_0x90796e);});}],_0x139cb9=>{if(_0x139cb9){return _0x3e4f5a(_0x139cb9);}_0x245bc1[a101_0x50b5('0x8')](a101_0x50b5('0x49'));});};