var a95_0x2a99=['now','exec','render','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','Please\x20enter\x20a\x20valid\x20email\x20address.','/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_USER','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','passport','../models/User','express-validator','getLogin','user','redirect','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','getReset','isAuthenticated','findOne','token','where','passwordResetExpires'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a95_0x2a99,0x103));var a95_0x1dc3=function(_0x122469,_0x3cf5b3){_0x122469=_0x122469-0x0;var _0xcb2fe6=a95_0x2a99[_0x122469];return _0xcb2fe6;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1a0af5){return _0x1a0af5&&_0x1a0af5[a95_0x1dc3('0x0')]?_0x1a0af5:{'default':_0x1a0af5};};Object[a95_0x1dc3('0x1')](exports,a95_0x1dc3('0x0'),{'value':!![]});const async_1=__importDefault(require(a95_0x1dc3('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a95_0x1dc3('0x3')));const User_1=__importDefault(require(a95_0x1dc3('0x4')));const request=require(a95_0x1dc3('0x5'));exports[a95_0x1dc3('0x6')]=(_0x490709,_0x169587)=>{if(_0x490709[a95_0x1dc3('0x7')]){return _0x169587[a95_0x1dc3('0x8')]('/');}_0x169587['render'](a95_0x1dc3('0x9'),{'title':a95_0x1dc3('0xa')});};exports[a95_0x1dc3('0xb')]=(_0x9b9557,_0x13ed15,_0x3da105)=>{_0x9b9557[a95_0x1dc3('0xc')](a95_0x1dc3('0xd'),a95_0x1dc3('0xe'))[a95_0x1dc3('0xf')]();_0x9b9557[a95_0x1dc3('0xc')](a95_0x1dc3('0x10'),a95_0x1dc3('0x11'))['notEmpty']();_0x9b9557[a95_0x1dc3('0x12')](a95_0x1dc3('0xd'))[a95_0x1dc3('0x13')]({'gmail_remove_dots':![]});const _0x54417f=_0x9b9557[a95_0x1dc3('0x14')]();if(_0x54417f){_0x9b9557[a95_0x1dc3('0x15')](a95_0x1dc3('0x16'),_0x54417f);return _0x13ed15['redirect'](a95_0x1dc3('0x17'));}passport_1[a95_0x1dc3('0x18')][a95_0x1dc3('0x19')]('local',(_0x3bf086,_0x2182bb,_0x5f36c4)=>{if(_0x3bf086){return _0x3da105(_0x3bf086);}if(!_0x2182bb){_0x9b9557[a95_0x1dc3('0x15')](a95_0x1dc3('0x16'),_0x5f36c4[a95_0x1dc3('0x1a')]);return _0x13ed15[a95_0x1dc3('0x8')](a95_0x1dc3('0x17'));}_0x9b9557[a95_0x1dc3('0x1b')](_0x2182bb,_0x3bf086=>{if(_0x3bf086){return _0x3da105(_0x3bf086);}_0x9b9557[a95_0x1dc3('0x15')](a95_0x1dc3('0x1c'),{'msg':a95_0x1dc3('0x1d')});_0x13ed15[a95_0x1dc3('0x8')](_0x9b9557[a95_0x1dc3('0x1e')][a95_0x1dc3('0x1f')]||'/');});})(_0x9b9557,_0x13ed15,_0x3da105);};exports[a95_0x1dc3('0x20')]=(_0x3bd65e,_0x34ab2c)=>{_0x3bd65e[a95_0x1dc3('0x20')]();_0x34ab2c[a95_0x1dc3('0x8')]('/');};exports[a95_0x1dc3('0x21')]=(_0x384278,_0x218119)=>{if(_0x384278[a95_0x1dc3('0x7')]){return _0x218119[a95_0x1dc3('0x8')]('/');}_0x218119['render']('account/signup',{'title':a95_0x1dc3('0x22')});};exports[a95_0x1dc3('0x23')]=(_0x347049,_0x48ffbd,_0xf8160a)=>{_0x347049[a95_0x1dc3('0xc')]('email',a95_0x1dc3('0xe'))[a95_0x1dc3('0xf')]();_0x347049[a95_0x1dc3('0xc')]('password',a95_0x1dc3('0x24'))[a95_0x1dc3('0x25')]({'min':0x4});_0x347049[a95_0x1dc3('0xc')](a95_0x1dc3('0x26'),a95_0x1dc3('0x27'))[a95_0x1dc3('0x28')](_0x347049[a95_0x1dc3('0x29')][a95_0x1dc3('0x10')]);_0x347049['sanitize'](a95_0x1dc3('0xd'))[a95_0x1dc3('0x13')]({'gmail_remove_dots':![]});const _0x25c242=_0x347049[a95_0x1dc3('0x14')]();if(_0x25c242){_0x347049[a95_0x1dc3('0x15')]('errors',_0x25c242);return _0x48ffbd[a95_0x1dc3('0x8')](a95_0x1dc3('0x2a'));}const _0x17f180=new User_1['default']({'email':_0x347049[a95_0x1dc3('0x29')][a95_0x1dc3('0xd')],'password':_0x347049[a95_0x1dc3('0x29')][a95_0x1dc3('0x10')]});User_1['default']['findOne']({'email':_0x347049[a95_0x1dc3('0x29')][a95_0x1dc3('0xd')]},(_0x12cdbc,_0x3e8247)=>{if(_0x12cdbc){return _0xf8160a(_0x12cdbc);}if(_0x3e8247){_0x347049[a95_0x1dc3('0x15')](a95_0x1dc3('0x16'),{'msg':a95_0x1dc3('0x2b')});return _0x48ffbd['redirect'](a95_0x1dc3('0x2a'));}_0x17f180[a95_0x1dc3('0x2c')](_0x12cdbc=>{if(_0x12cdbc){return _0xf8160a(_0x12cdbc);}_0x347049['logIn'](_0x17f180,_0x12cdbc=>{if(_0x12cdbc){return _0xf8160a(_0x12cdbc);}_0x48ffbd[a95_0x1dc3('0x8')]('/');});});});};exports[a95_0x1dc3('0x2d')]=(_0x4f1114,_0x171408)=>{_0x171408['render'](a95_0x1dc3('0x2e'),{'title':a95_0x1dc3('0x2f')});};exports[a95_0x1dc3('0x30')]=(_0x5ea5b4,_0x1419ef,_0x3892bb)=>{_0x5ea5b4['assert'](a95_0x1dc3('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x5ea5b4[a95_0x1dc3('0x12')](a95_0x1dc3('0xd'))[a95_0x1dc3('0x13')]({'gmail_remove_dots':![]});const _0x1ac494=_0x5ea5b4[a95_0x1dc3('0x14')]();if(_0x1ac494){_0x5ea5b4[a95_0x1dc3('0x15')](a95_0x1dc3('0x16'),_0x1ac494);return _0x1419ef['redirect']('/account');}User_1[a95_0x1dc3('0x18')][a95_0x1dc3('0x31')](_0x5ea5b4['user']['id'],(_0x25dd6d,_0x5919ca)=>{if(_0x25dd6d){return _0x3892bb(_0x25dd6d);}_0x5919ca['email']=_0x5ea5b4[a95_0x1dc3('0x29')][a95_0x1dc3('0xd')]||'';_0x5919ca[a95_0x1dc3('0x32')][a95_0x1dc3('0x33')]=_0x5ea5b4['body']['name']||'';_0x5919ca[a95_0x1dc3('0x32')]['gender']=_0x5ea5b4[a95_0x1dc3('0x29')][a95_0x1dc3('0x34')]||'';_0x5919ca[a95_0x1dc3('0x32')]['location']=_0x5ea5b4[a95_0x1dc3('0x29')][a95_0x1dc3('0x35')]||'';_0x5919ca['profile'][a95_0x1dc3('0x36')]=_0x5ea5b4['body'][a95_0x1dc3('0x36')]||'';_0x5919ca['save'](_0x25dd6d=>{if(_0x25dd6d){if(_0x25dd6d[a95_0x1dc3('0x37')]===0x2af8){_0x5ea5b4['flash'](a95_0x1dc3('0x16'),{'msg':a95_0x1dc3('0x38')});return _0x1419ef['redirect'](a95_0x1dc3('0x39'));}return _0x3892bb(_0x25dd6d);}_0x5ea5b4[a95_0x1dc3('0x15')]('success',{'msg':a95_0x1dc3('0x3a')});_0x1419ef[a95_0x1dc3('0x8')](a95_0x1dc3('0x39'));});});};exports['postUpdatePassword']=(_0x44a51c,_0x258469,_0x14516b)=>{_0x44a51c[a95_0x1dc3('0xc')](a95_0x1dc3('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x44a51c[a95_0x1dc3('0xc')](a95_0x1dc3('0x26'),a95_0x1dc3('0x27'))[a95_0x1dc3('0x28')](_0x44a51c[a95_0x1dc3('0x29')][a95_0x1dc3('0x10')]);const _0x2decac=_0x44a51c[a95_0x1dc3('0x14')]();if(_0x2decac){_0x44a51c['flash'](a95_0x1dc3('0x16'),_0x2decac);return _0x258469[a95_0x1dc3('0x8')]('/account');}User_1[a95_0x1dc3('0x18')][a95_0x1dc3('0x31')](_0x44a51c[a95_0x1dc3('0x7')]['id'],(_0x2c97d2,_0xd7ff64)=>{if(_0x2c97d2){return _0x14516b(_0x2c97d2);}_0xd7ff64[a95_0x1dc3('0x10')]=_0x44a51c[a95_0x1dc3('0x29')][a95_0x1dc3('0x10')];_0xd7ff64[a95_0x1dc3('0x2c')](_0x2c97d2=>{if(_0x2c97d2){return _0x14516b(_0x2c97d2);}_0x44a51c[a95_0x1dc3('0x15')](a95_0x1dc3('0x1c'),{'msg':a95_0x1dc3('0x3b')});_0x258469[a95_0x1dc3('0x8')](a95_0x1dc3('0x39'));});});};exports['postDeleteAccount']=(_0x437e68,_0x2d5d8c,_0x53d315)=>{User_1['default'][a95_0x1dc3('0x3c')]({'_id':_0x437e68['user']['id']},_0xd24b2c=>{if(_0xd24b2c){return _0x53d315(_0xd24b2c);}_0x437e68['logout']();_0x437e68[a95_0x1dc3('0x15')](a95_0x1dc3('0x3d'),{'msg':a95_0x1dc3('0x3e')});_0x2d5d8c[a95_0x1dc3('0x8')]('/');});};exports[a95_0x1dc3('0x3f')]=(_0xa9ca31,_0x373c4e,_0x2e76d4)=>{const _0x5c83a7=_0xa9ca31[a95_0x1dc3('0x40')][a95_0x1dc3('0x41')];User_1['default']['findById'](_0xa9ca31[a95_0x1dc3('0x7')]['id'],(_0x5f4716,_0x5e97c3)=>{if(_0x5f4716){return _0x2e76d4(_0x5f4716);}_0x5e97c3[_0x5c83a7]=undefined;_0x5e97c3['tokens']=_0x5e97c3[a95_0x1dc3('0x42')][a95_0x1dc3('0x43')](_0x47420f=>_0x47420f['kind']!==_0x5c83a7);_0x5e97c3['save'](_0x5f4716=>{if(_0x5f4716){return _0x2e76d4(_0x5f4716);}_0xa9ca31[a95_0x1dc3('0x15')](a95_0x1dc3('0x3d'),{'msg':_0x5c83a7+'\x20account\x20has\x20been\x20unlinked.'});_0x373c4e[a95_0x1dc3('0x8')]('/account');});});};exports[a95_0x1dc3('0x44')]=(_0x30cd7a,_0x395a57,_0x3287b2)=>{if(_0x30cd7a[a95_0x1dc3('0x45')]()){return _0x395a57['redirect']('/');}User_1[a95_0x1dc3('0x18')][a95_0x1dc3('0x46')]({'passwordResetToken':_0x30cd7a[a95_0x1dc3('0x40')][a95_0x1dc3('0x47')]})[a95_0x1dc3('0x48')](a95_0x1dc3('0x49'))['gt'](Date[a95_0x1dc3('0x4a')]())[a95_0x1dc3('0x4b')]((_0x25535,_0x2e6448)=>{if(_0x25535){return _0x3287b2(_0x25535);}if(!_0x2e6448){_0x30cd7a[a95_0x1dc3('0x15')](a95_0x1dc3('0x16'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x395a57[a95_0x1dc3('0x8')]('/forgot');}_0x395a57[a95_0x1dc3('0x4c')]('account/reset',{'title':a95_0x1dc3('0x4d')});});};exports[a95_0x1dc3('0x4e')]=(_0x42ea91,_0x312996,_0x392b76)=>{_0x42ea91['assert'](a95_0x1dc3('0x10'),a95_0x1dc3('0x4f'))[a95_0x1dc3('0x25')]({'min':0x4});_0x42ea91['assert'](a95_0x1dc3('0x50'),a95_0x1dc3('0x51'))[a95_0x1dc3('0x28')](_0x42ea91['body']['password']);const _0x25b25f=_0x42ea91[a95_0x1dc3('0x14')]();if(_0x25b25f){_0x42ea91['flash'](a95_0x1dc3('0x16'),_0x25b25f);return _0x312996[a95_0x1dc3('0x8')]('back');}async_1[a95_0x1dc3('0x18')][a95_0x1dc3('0x52')]([function resetPassword(_0x29fb1b){User_1[a95_0x1dc3('0x18')]['findOne']({'passwordResetToken':_0x42ea91[a95_0x1dc3('0x40')][a95_0x1dc3('0x47')]})[a95_0x1dc3('0x48')]('passwordResetExpires')['gt'](Date['now']())[a95_0x1dc3('0x4b')]((_0x33cfc4,_0x4ebaf0)=>{if(_0x33cfc4){return _0x392b76(_0x33cfc4);}if(!_0x4ebaf0){_0x42ea91[a95_0x1dc3('0x15')]('errors',{'msg':a95_0x1dc3('0x53')});return _0x312996[a95_0x1dc3('0x8')](a95_0x1dc3('0x54'));}_0x4ebaf0['password']=_0x42ea91[a95_0x1dc3('0x29')]['password'];_0x4ebaf0[a95_0x1dc3('0x55')]=undefined;_0x4ebaf0['passwordResetExpires']=undefined;_0x4ebaf0['save'](_0x33cfc4=>{if(_0x33cfc4){return _0x392b76(_0x33cfc4);}_0x42ea91[a95_0x1dc3('0x1b')](_0x4ebaf0,_0x33cfc4=>{_0x29fb1b(_0x33cfc4,_0x4ebaf0);});});});},function sendResetPasswordEmail(_0x5cc37c,_0x322b6c){const _0x4c56a9=nodemailer_1[a95_0x1dc3('0x18')][a95_0x1dc3('0x56')]({'service':a95_0x1dc3('0x57'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a95_0x1dc3('0x58')][a95_0x1dc3('0x59')]}});const _0x20457e={'to':_0x5cc37c[a95_0x1dc3('0xd')],'from':a95_0x1dc3('0x5a'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a95_0x1dc3('0x5b')+_0x5cc37c[a95_0x1dc3('0xd')]+a95_0x1dc3('0x5c')};_0x4c56a9['sendMail'](_0x20457e,_0x363b64=>{_0x42ea91[a95_0x1dc3('0x15')](a95_0x1dc3('0x1c'),{'msg':a95_0x1dc3('0x5d')});_0x322b6c(_0x363b64);});}],_0x2cc2c1=>{if(_0x2cc2c1){return _0x392b76(_0x2cc2c1);}_0x312996[a95_0x1dc3('0x8')]('/');});};exports[a95_0x1dc3('0x5e')]=(_0x38d31d,_0x37bec4)=>{if(_0x38d31d['isAuthenticated']()){return _0x37bec4[a95_0x1dc3('0x8')]('/');}_0x37bec4['render'](a95_0x1dc3('0x5f'),{'title':a95_0x1dc3('0x60')});};exports['postForgot']=(_0x52ec84,_0x1b9ed9,_0x5b0aa3)=>{_0x52ec84[a95_0x1dc3('0xc')]('email',a95_0x1dc3('0x61'))['isEmail']();_0x52ec84[a95_0x1dc3('0x12')](a95_0x1dc3('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x418a17=_0x52ec84[a95_0x1dc3('0x14')]();if(_0x418a17){_0x52ec84[a95_0x1dc3('0x15')](a95_0x1dc3('0x16'),_0x418a17);return _0x1b9ed9[a95_0x1dc3('0x8')](a95_0x1dc3('0x62'));}async_1['default'][a95_0x1dc3('0x52')]([function createRandomToken(_0x3ca1c7){crypto_1[a95_0x1dc3('0x18')][a95_0x1dc3('0x63')](0x10,(_0x16b84c,_0x15570f)=>{const _0x334ec4=_0x15570f[a95_0x1dc3('0x64')](a95_0x1dc3('0x65'));_0x3ca1c7(_0x16b84c,_0x334ec4);});},function setRandomToken(_0x42d29d,_0x406519){User_1['default'][a95_0x1dc3('0x46')]({'email':_0x52ec84[a95_0x1dc3('0x29')][a95_0x1dc3('0xd')]},(_0x4d0f75,_0x2edb90)=>{if(_0x4d0f75){return _0x406519(_0x4d0f75);}if(!_0x2edb90){_0x52ec84[a95_0x1dc3('0x15')](a95_0x1dc3('0x16'),{'msg':a95_0x1dc3('0x66')});return _0x1b9ed9[a95_0x1dc3('0x8')](a95_0x1dc3('0x62'));}_0x2edb90[a95_0x1dc3('0x55')]=_0x42d29d;_0x2edb90[a95_0x1dc3('0x49')]=Date[a95_0x1dc3('0x4a')]()+0x36ee80;_0x2edb90['save'](_0x4d0f75=>{_0x406519(_0x4d0f75,_0x42d29d,_0x2edb90);});});},function sendForgotPasswordEmail(_0xdcc494,_0x5d08f9,_0x32528d){const _0x23d389=nodemailer_1['default']['createTransport']({'service':a95_0x1dc3('0x57'),'auth':{'user':process[a95_0x1dc3('0x58')][a95_0x1dc3('0x67')],'pass':process[a95_0x1dc3('0x58')][a95_0x1dc3('0x59')]}});const _0x1de076={'to':_0x5d08f9[a95_0x1dc3('0xd')],'from':a95_0x1dc3('0x68'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x1dc3('0x69')+_0x52ec84[a95_0x1dc3('0x6a')]['host']+a95_0x1dc3('0x6b')+_0xdcc494+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x23d389[a95_0x1dc3('0x6c')](_0x1de076,_0x4a55ef=>{_0x52ec84[a95_0x1dc3('0x15')](a95_0x1dc3('0x3d'),{'msg':a95_0x1dc3('0x6d')+_0x5d08f9[a95_0x1dc3('0xd')]+a95_0x1dc3('0x6e')});_0x32528d(_0x4a55ef);});}],_0x2072e4=>{if(_0x2072e4){return _0x5b0aa3(_0x2072e4);}_0x1b9ed9[a95_0x1dc3('0x8')](a95_0x1dc3('0x62'));});};