var a291_0x5395=['Passwords\x20do\x20not\x20match','equals','body','sanitize','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','getReset','token','where','passwordResetExpires','now','/forgot','Password\x20Reset','postReset','Passwords\x20must\x20match.','back','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','postForgot','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','async','nodemailer','passport','express-validator','getLogin','user','redirect','render','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','normalizeEmail','flash','errors','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword'];(function(_0x5a053d,_0x496d77){var _0x40bb35=function(_0x464a98){while(--_0x464a98){_0x5a053d['push'](_0x5a053d['shift']());}};_0x40bb35(++_0x496d77);}(a291_0x5395,0x118));var a291_0x3a4d=function(_0x4684ef,_0x2d9902){_0x4684ef=_0x4684ef-0x0;var _0x5173e2=a291_0x5395[_0x4684ef];return _0x5173e2;};'use strict';var __importDefault=this&&this[a291_0x3a4d('0x0')]||function(_0x832922){return _0x832922&&_0x832922[a291_0x3a4d('0x1')]?_0x832922:{'default':_0x832922};};Object[a291_0x3a4d('0x2')](exports,a291_0x3a4d('0x1'),{'value':!![]});const async_1=__importDefault(require(a291_0x3a4d('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a291_0x3a4d('0x4')));const passport_1=__importDefault(require(a291_0x3a4d('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a291_0x3a4d('0x6'));exports[a291_0x3a4d('0x7')]=(_0x109171,_0x10c880)=>{if(_0x109171[a291_0x3a4d('0x8')]){return _0x10c880[a291_0x3a4d('0x9')]('/');}_0x10c880[a291_0x3a4d('0xa')]('account/login',{'title':'Login'});};exports[a291_0x3a4d('0xb')]=(_0x165a0a,_0x148199,_0x1b93c5)=>{_0x165a0a[a291_0x3a4d('0xc')](a291_0x3a4d('0xd'),a291_0x3a4d('0xe'))[a291_0x3a4d('0xf')]();_0x165a0a[a291_0x3a4d('0xc')](a291_0x3a4d('0x10'),a291_0x3a4d('0x11'))['notEmpty']();_0x165a0a['sanitize']('email')[a291_0x3a4d('0x12')]({'gmail_remove_dots':![]});const _0x1f1b5e=_0x165a0a['validationErrors']();if(_0x1f1b5e){_0x165a0a[a291_0x3a4d('0x13')](a291_0x3a4d('0x14'),_0x1f1b5e);return _0x148199[a291_0x3a4d('0x9')](a291_0x3a4d('0x15'));}passport_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x17')](a291_0x3a4d('0x18'),(_0x3a73d3,_0x3f247e,_0x444abc)=>{if(_0x3a73d3){return _0x1b93c5(_0x3a73d3);}if(!_0x3f247e){_0x165a0a[a291_0x3a4d('0x13')](a291_0x3a4d('0x14'),_0x444abc[a291_0x3a4d('0x19')]);return _0x148199[a291_0x3a4d('0x9')](a291_0x3a4d('0x15'));}_0x165a0a[a291_0x3a4d('0x1a')](_0x3f247e,_0x3a73d3=>{if(_0x3a73d3){return _0x1b93c5(_0x3a73d3);}_0x165a0a[a291_0x3a4d('0x13')](a291_0x3a4d('0x1b'),{'msg':a291_0x3a4d('0x1c')});_0x148199[a291_0x3a4d('0x9')](_0x165a0a[a291_0x3a4d('0x1d')][a291_0x3a4d('0x1e')]||'/');});})(_0x165a0a,_0x148199,_0x1b93c5);};exports[a291_0x3a4d('0x1f')]=(_0x3b1260,_0x50efb0)=>{_0x3b1260[a291_0x3a4d('0x1f')]();_0x50efb0[a291_0x3a4d('0x9')]('/');};exports[a291_0x3a4d('0x20')]=(_0x2dfa23,_0x11dd60)=>{if(_0x2dfa23[a291_0x3a4d('0x8')]){return _0x11dd60[a291_0x3a4d('0x9')]('/');}_0x11dd60[a291_0x3a4d('0xa')](a291_0x3a4d('0x21'),{'title':a291_0x3a4d('0x22')});};exports[a291_0x3a4d('0x23')]=(_0x34cedd,_0x509c2c,_0xc4b0b0)=>{_0x34cedd['assert'](a291_0x3a4d('0xd'),a291_0x3a4d('0xe'))[a291_0x3a4d('0xf')]();_0x34cedd[a291_0x3a4d('0xc')](a291_0x3a4d('0x10'),a291_0x3a4d('0x24'))['len']({'min':0x4});_0x34cedd[a291_0x3a4d('0xc')](a291_0x3a4d('0x25'),a291_0x3a4d('0x26'))[a291_0x3a4d('0x27')](_0x34cedd[a291_0x3a4d('0x28')][a291_0x3a4d('0x10')]);_0x34cedd[a291_0x3a4d('0x29')]('email')[a291_0x3a4d('0x12')]({'gmail_remove_dots':![]});const _0x4ade3d=_0x34cedd[a291_0x3a4d('0x2a')]();if(_0x4ade3d){_0x34cedd[a291_0x3a4d('0x13')](a291_0x3a4d('0x14'),_0x4ade3d);return _0x509c2c[a291_0x3a4d('0x9')](a291_0x3a4d('0x2b'));}const _0x5ae4bb=new User_1['default']({'email':_0x34cedd['body'][a291_0x3a4d('0xd')],'password':_0x34cedd[a291_0x3a4d('0x28')][a291_0x3a4d('0x10')]});User_1['default'][a291_0x3a4d('0x2c')]({'email':_0x34cedd[a291_0x3a4d('0x28')][a291_0x3a4d('0xd')]},(_0x21bba7,_0x1babc7)=>{if(_0x21bba7){return _0xc4b0b0(_0x21bba7);}if(_0x1babc7){_0x34cedd['flash'](a291_0x3a4d('0x14'),{'msg':a291_0x3a4d('0x2d')});return _0x509c2c['redirect'](a291_0x3a4d('0x2b'));}_0x5ae4bb[a291_0x3a4d('0x2e')](_0x21bba7=>{if(_0x21bba7){return _0xc4b0b0(_0x21bba7);}_0x34cedd[a291_0x3a4d('0x1a')](_0x5ae4bb,_0x21bba7=>{if(_0x21bba7){return _0xc4b0b0(_0x21bba7);}_0x509c2c['redirect']('/');});});});};exports[a291_0x3a4d('0x2f')]=(_0x40ad2e,_0x499194)=>{_0x499194[a291_0x3a4d('0xa')](a291_0x3a4d('0x30'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x150bcf,_0x50976c,_0x373144)=>{_0x150bcf[a291_0x3a4d('0xc')]('email',a291_0x3a4d('0x31'))['isEmail']();_0x150bcf[a291_0x3a4d('0x29')]('email')[a291_0x3a4d('0x12')]({'gmail_remove_dots':![]});const _0x5c340e=_0x150bcf[a291_0x3a4d('0x2a')]();if(_0x5c340e){_0x150bcf[a291_0x3a4d('0x13')](a291_0x3a4d('0x14'),_0x5c340e);return _0x50976c[a291_0x3a4d('0x9')](a291_0x3a4d('0x32'));}User_1['default'][a291_0x3a4d('0x33')](_0x150bcf[a291_0x3a4d('0x8')]['id'],(_0x5a3a48,_0x3460dd)=>{if(_0x5a3a48){return _0x373144(_0x5a3a48);}_0x3460dd[a291_0x3a4d('0xd')]=_0x150bcf['body'][a291_0x3a4d('0xd')]||'';_0x3460dd['profile'][a291_0x3a4d('0x34')]=_0x150bcf['body'][a291_0x3a4d('0x34')]||'';_0x3460dd[a291_0x3a4d('0x35')]['gender']=_0x150bcf[a291_0x3a4d('0x28')][a291_0x3a4d('0x36')]||'';_0x3460dd[a291_0x3a4d('0x35')][a291_0x3a4d('0x37')]=_0x150bcf[a291_0x3a4d('0x28')][a291_0x3a4d('0x37')]||'';_0x3460dd[a291_0x3a4d('0x35')][a291_0x3a4d('0x38')]=_0x150bcf['body'][a291_0x3a4d('0x38')]||'';_0x3460dd['save'](_0x5a3a48=>{if(_0x5a3a48){if(_0x5a3a48[a291_0x3a4d('0x39')]===0x2af8){_0x150bcf['flash'](a291_0x3a4d('0x14'),{'msg':a291_0x3a4d('0x3a')});return _0x50976c['redirect'](a291_0x3a4d('0x32'));}return _0x373144(_0x5a3a48);}_0x150bcf['flash'](a291_0x3a4d('0x1b'),{'msg':a291_0x3a4d('0x3b')});_0x50976c[a291_0x3a4d('0x9')](a291_0x3a4d('0x32'));});});};exports[a291_0x3a4d('0x3c')]=(_0x14351a,_0x1b9255,_0xc05633)=>{_0x14351a[a291_0x3a4d('0xc')](a291_0x3a4d('0x10'),a291_0x3a4d('0x24'))[a291_0x3a4d('0x3d')]({'min':0x4});_0x14351a[a291_0x3a4d('0xc')](a291_0x3a4d('0x25'),a291_0x3a4d('0x26'))[a291_0x3a4d('0x27')](_0x14351a[a291_0x3a4d('0x28')][a291_0x3a4d('0x10')]);const _0x5a6cb3=_0x14351a['validationErrors']();if(_0x5a6cb3){_0x14351a[a291_0x3a4d('0x13')](a291_0x3a4d('0x14'),_0x5a6cb3);return _0x1b9255['redirect'](a291_0x3a4d('0x32'));}User_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x33')](_0x14351a[a291_0x3a4d('0x8')]['id'],(_0xf03e89,_0x2e2894)=>{if(_0xf03e89){return _0xc05633(_0xf03e89);}_0x2e2894[a291_0x3a4d('0x10')]=_0x14351a[a291_0x3a4d('0x28')][a291_0x3a4d('0x10')];_0x2e2894[a291_0x3a4d('0x2e')](_0xf03e89=>{if(_0xf03e89){return _0xc05633(_0xf03e89);}_0x14351a[a291_0x3a4d('0x13')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x1b9255[a291_0x3a4d('0x9')](a291_0x3a4d('0x32'));});});};exports[a291_0x3a4d('0x3e')]=(_0x2810ea,_0x3b10c4,_0x2e7e2b)=>{User_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x3f')]({'_id':_0x2810ea[a291_0x3a4d('0x8')]['id']},_0x553fd4=>{if(_0x553fd4){return _0x2e7e2b(_0x553fd4);}_0x2810ea[a291_0x3a4d('0x1f')]();_0x2810ea[a291_0x3a4d('0x13')]('info',{'msg':a291_0x3a4d('0x40')});_0x3b10c4[a291_0x3a4d('0x9')]('/');});};exports['getOauthUnlink']=(_0x207604,_0x27e1bd,_0x3b1401)=>{const _0x39406e=_0x207604[a291_0x3a4d('0x41')][a291_0x3a4d('0x42')];User_1[a291_0x3a4d('0x16')]['findById'](_0x207604[a291_0x3a4d('0x8')]['id'],(_0x270586,_0x2f1ee7)=>{if(_0x270586){return _0x3b1401(_0x270586);}_0x2f1ee7[_0x39406e]=undefined;_0x2f1ee7[a291_0x3a4d('0x43')]=_0x2f1ee7[a291_0x3a4d('0x43')][a291_0x3a4d('0x44')](_0x303e63=>_0x303e63[a291_0x3a4d('0x45')]!==_0x39406e);_0x2f1ee7[a291_0x3a4d('0x2e')](_0x270586=>{if(_0x270586){return _0x3b1401(_0x270586);}_0x207604[a291_0x3a4d('0x13')]('info',{'msg':_0x39406e+'\x20account\x20has\x20been\x20unlinked.'});_0x27e1bd[a291_0x3a4d('0x9')](a291_0x3a4d('0x32'));});});};exports[a291_0x3a4d('0x46')]=(_0xad8210,_0x318b31,_0x442be5)=>{if(_0xad8210['isAuthenticated']()){return _0x318b31['redirect']('/');}User_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x2c')]({'passwordResetToken':_0xad8210[a291_0x3a4d('0x41')][a291_0x3a4d('0x47')]})[a291_0x3a4d('0x48')](a291_0x3a4d('0x49'))['gt'](Date[a291_0x3a4d('0x4a')]())['exec']((_0x56451f,_0x3f1dc6)=>{if(_0x56451f){return _0x442be5(_0x56451f);}if(!_0x3f1dc6){_0xad8210[a291_0x3a4d('0x13')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x318b31[a291_0x3a4d('0x9')](a291_0x3a4d('0x4b'));}_0x318b31[a291_0x3a4d('0xa')]('account/reset',{'title':a291_0x3a4d('0x4c')});});};exports[a291_0x3a4d('0x4d')]=(_0x124cf9,_0x5d56b9,_0x56c77b)=>{_0x124cf9[a291_0x3a4d('0xc')](a291_0x3a4d('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a291_0x3a4d('0x3d')]({'min':0x4});_0x124cf9['assert']('confirm',a291_0x3a4d('0x4e'))[a291_0x3a4d('0x27')](_0x124cf9['body'][a291_0x3a4d('0x10')]);const _0x3bff80=_0x124cf9[a291_0x3a4d('0x2a')]();if(_0x3bff80){_0x124cf9['flash'](a291_0x3a4d('0x14'),_0x3bff80);return _0x5d56b9[a291_0x3a4d('0x9')](a291_0x3a4d('0x4f'));}async_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x50')]([function resetPassword(_0x39f307){User_1['default'][a291_0x3a4d('0x2c')]({'passwordResetToken':_0x124cf9[a291_0x3a4d('0x41')][a291_0x3a4d('0x47')]})[a291_0x3a4d('0x48')](a291_0x3a4d('0x49'))['gt'](Date[a291_0x3a4d('0x4a')]())['exec']((_0x34b9cd,_0x2f50a4)=>{if(_0x34b9cd){return _0x56c77b(_0x34b9cd);}if(!_0x2f50a4){_0x124cf9[a291_0x3a4d('0x13')]('errors',{'msg':a291_0x3a4d('0x51')});return _0x5d56b9[a291_0x3a4d('0x9')](a291_0x3a4d('0x4f'));}_0x2f50a4[a291_0x3a4d('0x10')]=_0x124cf9['body'][a291_0x3a4d('0x10')];_0x2f50a4[a291_0x3a4d('0x52')]=undefined;_0x2f50a4['passwordResetExpires']=undefined;_0x2f50a4[a291_0x3a4d('0x2e')](_0x34b9cd=>{if(_0x34b9cd){return _0x56c77b(_0x34b9cd);}_0x124cf9[a291_0x3a4d('0x1a')](_0x2f50a4,_0x34b9cd=>{_0x39f307(_0x34b9cd,_0x2f50a4);});});});},function sendResetPasswordEmail(_0x48b5f4,_0x2ae441){const _0x2aefc9=nodemailer_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x53')]({'service':'SendGrid','auth':{'user':process[a291_0x3a4d('0x54')][a291_0x3a4d('0x55')],'pass':process[a291_0x3a4d('0x54')][a291_0x3a4d('0x56')]}});const _0x445fe0={'to':_0x48b5f4[a291_0x3a4d('0xd')],'from':a291_0x3a4d('0x57'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a291_0x3a4d('0x58')+_0x48b5f4[a291_0x3a4d('0xd')]+a291_0x3a4d('0x59')};_0x2aefc9[a291_0x3a4d('0x5a')](_0x445fe0,_0x274899=>{_0x124cf9[a291_0x3a4d('0x13')](a291_0x3a4d('0x1b'),{'msg':a291_0x3a4d('0x5b')});_0x2ae441(_0x274899);});}],_0x10b69f=>{if(_0x10b69f){return _0x56c77b(_0x10b69f);}_0x5d56b9[a291_0x3a4d('0x9')]('/');});};exports[a291_0x3a4d('0x5c')]=(_0x1eef03,_0x3cf102)=>{if(_0x1eef03[a291_0x3a4d('0x5d')]()){return _0x3cf102['redirect']('/');}_0x3cf102[a291_0x3a4d('0xa')](a291_0x3a4d('0x5e'),{'title':'Forgot\x20Password'});};exports[a291_0x3a4d('0x5f')]=(_0x502d00,_0x21a272,_0x1d0f00)=>{_0x502d00['assert'](a291_0x3a4d('0xd'),a291_0x3a4d('0x31'))[a291_0x3a4d('0xf')]();_0x502d00[a291_0x3a4d('0x29')](a291_0x3a4d('0xd'))[a291_0x3a4d('0x12')]({'gmail_remove_dots':![]});const _0x499ea3=_0x502d00[a291_0x3a4d('0x2a')]();if(_0x499ea3){_0x502d00['flash']('errors',_0x499ea3);return _0x21a272[a291_0x3a4d('0x9')](a291_0x3a4d('0x4b'));}async_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x50')]([function createRandomToken(_0x233abb){crypto_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x60')](0x10,(_0x21dff2,_0x48f3fb)=>{const _0x4ab92f=_0x48f3fb['toString']('hex');_0x233abb(_0x21dff2,_0x4ab92f);});},function setRandomToken(_0x27d3d0,_0x4ad80c){User_1[a291_0x3a4d('0x16')][a291_0x3a4d('0x2c')]({'email':_0x502d00[a291_0x3a4d('0x28')]['email']},(_0x141dfc,_0x4d4223)=>{if(_0x141dfc){return _0x4ad80c(_0x141dfc);}if(!_0x4d4223){_0x502d00[a291_0x3a4d('0x13')]('errors',{'msg':a291_0x3a4d('0x61')});return _0x21a272[a291_0x3a4d('0x9')](a291_0x3a4d('0x4b'));}_0x4d4223[a291_0x3a4d('0x52')]=_0x27d3d0;_0x4d4223[a291_0x3a4d('0x49')]=Date[a291_0x3a4d('0x4a')]()+0x36ee80;_0x4d4223[a291_0x3a4d('0x2e')](_0x141dfc=>{_0x4ad80c(_0x141dfc,_0x27d3d0,_0x4d4223);});});},function sendForgotPasswordEmail(_0x5320c6,_0x5813eb,_0x310620){const _0x605834=nodemailer_1['default'][a291_0x3a4d('0x53')]({'service':a291_0x3a4d('0x62'),'auth':{'user':process[a291_0x3a4d('0x54')][a291_0x3a4d('0x55')],'pass':process[a291_0x3a4d('0x54')][a291_0x3a4d('0x56')]}});const _0x3d7fb6={'to':_0x5813eb[a291_0x3a4d('0xd')],'from':'hackathon@starter.com','subject':a291_0x3a4d('0x63'),'text':a291_0x3a4d('0x64')+_0x502d00[a291_0x3a4d('0x65')]['host']+a291_0x3a4d('0x66')+_0x5320c6+a291_0x3a4d('0x67')};_0x605834[a291_0x3a4d('0x5a')](_0x3d7fb6,_0x734fa5=>{_0x502d00[a291_0x3a4d('0x13')](a291_0x3a4d('0x68'),{'msg':a291_0x3a4d('0x69')+_0x5813eb['email']+'\x20with\x20further\x20instructions.'});_0x310620(_0x734fa5);});}],_0x4f37fe=>{if(_0x4f37fe){return _0x1d0f00(_0x4f37fe);}_0x21a272[a291_0x3a4d('0x9')](a291_0x3a4d('0x4b'));});};