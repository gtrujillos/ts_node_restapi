var a94_0x32ae=['name','gender','location','code','Profile\x20information\x20has\x20been\x20updated.','save','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','passwordResetToken','createTransport','SendGrid','SENDGRID_USER','env','express-ts@starter.com','sendMail','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','__importDefault','__esModule','defineProperty','crypto','passport','../models/User','express-validator','getLogin','redirect','render','account/login','Login','postLogin','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','default','authenticate','local','errors','/login','success','session','returnTo','logout','getSignup','user','Create\x20Account','postSignup','email','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','logIn','getAccount','account/profile','Account\x20Management','/account','findById','profile'];(function(_0x5d38c8,_0x8e85a4){var _0x388771=function(_0x13d4e7){while(--_0x13d4e7){_0x5d38c8['push'](_0x5d38c8['shift']());}};_0x388771(++_0x8e85a4);}(a94_0x32ae,0x101));var a94_0x1d8b=function(_0x5c6ce9,_0x1293a7){_0x5c6ce9=_0x5c6ce9-0x0;var _0x27257a=a94_0x32ae[_0x5c6ce9];return _0x27257a;};'use strict';var __importDefault=this&&this[a94_0x1d8b('0x0')]||function(_0x12679c){return _0x12679c&&_0x12679c[a94_0x1d8b('0x1')]?_0x12679c:{'default':_0x12679c};};Object[a94_0x1d8b('0x2')](exports,a94_0x1d8b('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a94_0x1d8b('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a94_0x1d8b('0x4')));const User_1=__importDefault(require(a94_0x1d8b('0x5')));const request=require(a94_0x1d8b('0x6'));exports[a94_0x1d8b('0x7')]=(_0x5f226e,_0xb2f84d)=>{if(_0x5f226e['user']){return _0xb2f84d[a94_0x1d8b('0x8')]('/');}_0xb2f84d[a94_0x1d8b('0x9')](a94_0x1d8b('0xa'),{'title':a94_0x1d8b('0xb')});};exports[a94_0x1d8b('0xc')]=(_0x63a8bc,_0x5e7cfb,_0x1f54db)=>{_0x63a8bc['assert']('email',a94_0x1d8b('0xd'))[a94_0x1d8b('0xe')]();_0x63a8bc[a94_0x1d8b('0xf')](a94_0x1d8b('0x10'),a94_0x1d8b('0x11'))['notEmpty']();_0x63a8bc[a94_0x1d8b('0x12')]('email')[a94_0x1d8b('0x13')]({'gmail_remove_dots':![]});const _0xdc6b84=_0x63a8bc[a94_0x1d8b('0x14')]();if(_0xdc6b84){_0x63a8bc[a94_0x1d8b('0x15')]('errors',_0xdc6b84);return _0x5e7cfb[a94_0x1d8b('0x8')]('/login');}passport_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x17')](a94_0x1d8b('0x18'),(_0x56e5ce,_0x4ec497,_0x18beef)=>{if(_0x56e5ce){return _0x1f54db(_0x56e5ce);}if(!_0x4ec497){_0x63a8bc[a94_0x1d8b('0x15')](a94_0x1d8b('0x19'),_0x18beef['message']);return _0x5e7cfb[a94_0x1d8b('0x8')](a94_0x1d8b('0x1a'));}_0x63a8bc['logIn'](_0x4ec497,_0x56e5ce=>{if(_0x56e5ce){return _0x1f54db(_0x56e5ce);}_0x63a8bc['flash'](a94_0x1d8b('0x1b'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x5e7cfb['redirect'](_0x63a8bc[a94_0x1d8b('0x1c')][a94_0x1d8b('0x1d')]||'/');});})(_0x63a8bc,_0x5e7cfb,_0x1f54db);};exports[a94_0x1d8b('0x1e')]=(_0x15d79d,_0x44522a)=>{_0x15d79d[a94_0x1d8b('0x1e')]();_0x44522a[a94_0x1d8b('0x8')]('/');};exports[a94_0x1d8b('0x1f')]=(_0xf16ace,_0x5485bc)=>{if(_0xf16ace[a94_0x1d8b('0x20')]){return _0x5485bc[a94_0x1d8b('0x8')]('/');}_0x5485bc[a94_0x1d8b('0x9')]('account/signup',{'title':a94_0x1d8b('0x21')});};exports[a94_0x1d8b('0x22')]=(_0x51389a,_0x2a731a,_0x66fd7e)=>{_0x51389a[a94_0x1d8b('0xf')](a94_0x1d8b('0x23'),'Email\x20is\x20not\x20valid')['isEmail']();_0x51389a['assert'](a94_0x1d8b('0x10'),a94_0x1d8b('0x24'))[a94_0x1d8b('0x25')]({'min':0x4});_0x51389a[a94_0x1d8b('0xf')](a94_0x1d8b('0x26'),a94_0x1d8b('0x27'))[a94_0x1d8b('0x28')](_0x51389a[a94_0x1d8b('0x29')][a94_0x1d8b('0x10')]);_0x51389a['sanitize'](a94_0x1d8b('0x23'))[a94_0x1d8b('0x13')]({'gmail_remove_dots':![]});const _0x36a0e8=_0x51389a['validationErrors']();if(_0x36a0e8){_0x51389a[a94_0x1d8b('0x15')](a94_0x1d8b('0x19'),_0x36a0e8);return _0x2a731a[a94_0x1d8b('0x8')](a94_0x1d8b('0x2a'));}const _0x7fc15f=new User_1[(a94_0x1d8b('0x16'))]({'email':_0x51389a[a94_0x1d8b('0x29')]['email'],'password':_0x51389a[a94_0x1d8b('0x29')][a94_0x1d8b('0x10')]});User_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x2b')]({'email':_0x51389a[a94_0x1d8b('0x29')][a94_0x1d8b('0x23')]},(_0x15866b,_0x1d9939)=>{if(_0x15866b){return _0x66fd7e(_0x15866b);}if(_0x1d9939){_0x51389a[a94_0x1d8b('0x15')](a94_0x1d8b('0x19'),{'msg':a94_0x1d8b('0x2c')});return _0x2a731a[a94_0x1d8b('0x8')]('/signup');}_0x7fc15f['save'](_0x15866b=>{if(_0x15866b){return _0x66fd7e(_0x15866b);}_0x51389a[a94_0x1d8b('0x2d')](_0x7fc15f,_0x15866b=>{if(_0x15866b){return _0x66fd7e(_0x15866b);}_0x2a731a['redirect']('/');});});});};exports[a94_0x1d8b('0x2e')]=(_0x1ec7e9,_0x4fc6ff)=>{_0x4fc6ff[a94_0x1d8b('0x9')](a94_0x1d8b('0x2f'),{'title':a94_0x1d8b('0x30')});};exports['postUpdateProfile']=(_0x55d902,_0x67e920,_0x1c7c55)=>{_0x55d902[a94_0x1d8b('0xf')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a94_0x1d8b('0xe')]();_0x55d902[a94_0x1d8b('0x12')](a94_0x1d8b('0x23'))[a94_0x1d8b('0x13')]({'gmail_remove_dots':![]});const _0x360f28=_0x55d902['validationErrors']();if(_0x360f28){_0x55d902[a94_0x1d8b('0x15')](a94_0x1d8b('0x19'),_0x360f28);return _0x67e920[a94_0x1d8b('0x8')](a94_0x1d8b('0x31'));}User_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x32')](_0x55d902[a94_0x1d8b('0x20')]['id'],(_0x2d7dae,_0x58b8bd)=>{if(_0x2d7dae){return _0x1c7c55(_0x2d7dae);}_0x58b8bd[a94_0x1d8b('0x23')]=_0x55d902[a94_0x1d8b('0x29')][a94_0x1d8b('0x23')]||'';_0x58b8bd[a94_0x1d8b('0x33')][a94_0x1d8b('0x34')]=_0x55d902[a94_0x1d8b('0x29')][a94_0x1d8b('0x34')]||'';_0x58b8bd['profile'][a94_0x1d8b('0x35')]=_0x55d902[a94_0x1d8b('0x29')][a94_0x1d8b('0x35')]||'';_0x58b8bd[a94_0x1d8b('0x33')]['location']=_0x55d902[a94_0x1d8b('0x29')][a94_0x1d8b('0x36')]||'';_0x58b8bd[a94_0x1d8b('0x33')]['website']=_0x55d902['body']['website']||'';_0x58b8bd['save'](_0x2d7dae=>{if(_0x2d7dae){if(_0x2d7dae[a94_0x1d8b('0x37')]===0x2af8){_0x55d902['flash'](a94_0x1d8b('0x19'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x67e920[a94_0x1d8b('0x8')](a94_0x1d8b('0x31'));}return _0x1c7c55(_0x2d7dae);}_0x55d902[a94_0x1d8b('0x15')](a94_0x1d8b('0x1b'),{'msg':a94_0x1d8b('0x38')});_0x67e920[a94_0x1d8b('0x8')]('/account');});});};exports['postUpdatePassword']=(_0x5d30a7,_0x3e235b,_0x483a04)=>{_0x5d30a7[a94_0x1d8b('0xf')](a94_0x1d8b('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x5d30a7[a94_0x1d8b('0xf')](a94_0x1d8b('0x26'),a94_0x1d8b('0x27'))[a94_0x1d8b('0x28')](_0x5d30a7['body']['password']);const _0x2e4088=_0x5d30a7[a94_0x1d8b('0x14')]();if(_0x2e4088){_0x5d30a7[a94_0x1d8b('0x15')]('errors',_0x2e4088);return _0x3e235b[a94_0x1d8b('0x8')]('/account');}User_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x32')](_0x5d30a7['user']['id'],(_0x1d1ce9,_0x3efd0a)=>{if(_0x1d1ce9){return _0x483a04(_0x1d1ce9);}_0x3efd0a['password']=_0x5d30a7[a94_0x1d8b('0x29')][a94_0x1d8b('0x10')];_0x3efd0a[a94_0x1d8b('0x39')](_0x1d1ce9=>{if(_0x1d1ce9){return _0x483a04(_0x1d1ce9);}_0x5d30a7[a94_0x1d8b('0x15')](a94_0x1d8b('0x1b'),{'msg':'Password\x20has\x20been\x20changed.'});_0x3e235b[a94_0x1d8b('0x8')](a94_0x1d8b('0x31'));});});};exports[a94_0x1d8b('0x3a')]=(_0x2f11ea,_0x9d802c,_0x561760)=>{User_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x3b')]({'_id':_0x2f11ea[a94_0x1d8b('0x20')]['id']},_0xa4e03f=>{if(_0xa4e03f){return _0x561760(_0xa4e03f);}_0x2f11ea[a94_0x1d8b('0x1e')]();_0x2f11ea[a94_0x1d8b('0x15')](a94_0x1d8b('0x3c'),{'msg':a94_0x1d8b('0x3d')});_0x9d802c[a94_0x1d8b('0x8')]('/');});};exports[a94_0x1d8b('0x3e')]=(_0x18fab6,_0x57c1ce,_0x1b5b0a)=>{const _0x6d1d70=_0x18fab6[a94_0x1d8b('0x3f')][a94_0x1d8b('0x40')];User_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x32')](_0x18fab6[a94_0x1d8b('0x20')]['id'],(_0x40e6c9,_0x669752)=>{if(_0x40e6c9){return _0x1b5b0a(_0x40e6c9);}_0x669752[_0x6d1d70]=undefined;_0x669752[a94_0x1d8b('0x41')]=_0x669752['tokens'][a94_0x1d8b('0x42')](_0x752a2=>_0x752a2[a94_0x1d8b('0x43')]!==_0x6d1d70);_0x669752[a94_0x1d8b('0x39')](_0x40e6c9=>{if(_0x40e6c9){return _0x1b5b0a(_0x40e6c9);}_0x18fab6[a94_0x1d8b('0x15')]('info',{'msg':_0x6d1d70+'\x20account\x20has\x20been\x20unlinked.'});_0x57c1ce[a94_0x1d8b('0x8')](a94_0x1d8b('0x31'));});});};exports[a94_0x1d8b('0x44')]=(_0x1cbfd3,_0x52f3bc,_0x54c4be)=>{if(_0x1cbfd3[a94_0x1d8b('0x45')]()){return _0x52f3bc[a94_0x1d8b('0x8')]('/');}User_1[a94_0x1d8b('0x16')]['findOne']({'passwordResetToken':_0x1cbfd3[a94_0x1d8b('0x3f')][a94_0x1d8b('0x46')]})[a94_0x1d8b('0x47')](a94_0x1d8b('0x48'))['gt'](Date[a94_0x1d8b('0x49')]())[a94_0x1d8b('0x4a')]((_0x3aca20,_0x5a48be)=>{if(_0x3aca20){return _0x54c4be(_0x3aca20);}if(!_0x5a48be){_0x1cbfd3[a94_0x1d8b('0x15')](a94_0x1d8b('0x19'),{'msg':a94_0x1d8b('0x4b')});return _0x52f3bc['redirect'](a94_0x1d8b('0x4c'));}_0x52f3bc[a94_0x1d8b('0x9')]('account/reset',{'title':a94_0x1d8b('0x4d')});});};exports['postReset']=(_0x23069b,_0x302cae,_0x5b1500)=>{_0x23069b[a94_0x1d8b('0xf')](a94_0x1d8b('0x10'),a94_0x1d8b('0x4e'))[a94_0x1d8b('0x25')]({'min':0x4});_0x23069b[a94_0x1d8b('0xf')](a94_0x1d8b('0x4f'),'Passwords\x20must\x20match.')[a94_0x1d8b('0x28')](_0x23069b[a94_0x1d8b('0x29')][a94_0x1d8b('0x10')]);const _0x36ac0e=_0x23069b[a94_0x1d8b('0x14')]();if(_0x36ac0e){_0x23069b[a94_0x1d8b('0x15')](a94_0x1d8b('0x19'),_0x36ac0e);return _0x302cae[a94_0x1d8b('0x8')](a94_0x1d8b('0x50'));}async_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x51')]([function resetPassword(_0x190099){User_1['default'][a94_0x1d8b('0x2b')]({'passwordResetToken':_0x23069b[a94_0x1d8b('0x3f')][a94_0x1d8b('0x46')]})[a94_0x1d8b('0x47')](a94_0x1d8b('0x48'))['gt'](Date[a94_0x1d8b('0x49')]())[a94_0x1d8b('0x4a')]((_0xa558f9,_0x51eab6)=>{if(_0xa558f9){return _0x5b1500(_0xa558f9);}if(!_0x51eab6){_0x23069b[a94_0x1d8b('0x15')](a94_0x1d8b('0x19'),{'msg':a94_0x1d8b('0x4b')});return _0x302cae[a94_0x1d8b('0x8')](a94_0x1d8b('0x50'));}_0x51eab6['password']=_0x23069b[a94_0x1d8b('0x29')][a94_0x1d8b('0x10')];_0x51eab6[a94_0x1d8b('0x52')]=undefined;_0x51eab6[a94_0x1d8b('0x48')]=undefined;_0x51eab6['save'](_0xa558f9=>{if(_0xa558f9){return _0x5b1500(_0xa558f9);}_0x23069b[a94_0x1d8b('0x2d')](_0x51eab6,_0xa558f9=>{_0x190099(_0xa558f9,_0x51eab6);});});});},function sendResetPasswordEmail(_0xa7827a,_0x104223){const _0x4e2570=nodemailer_1['default'][a94_0x1d8b('0x53')]({'service':a94_0x1d8b('0x54'),'auth':{'user':process['env'][a94_0x1d8b('0x55')],'pass':process[a94_0x1d8b('0x56')]['SENDGRID_PASSWORD']}});const _0x2407ba={'to':_0xa7827a['email'],'from':a94_0x1d8b('0x57'),'subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0xa7827a[a94_0x1d8b('0x23')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x4e2570[a94_0x1d8b('0x58')](_0x2407ba,_0x53543e=>{_0x23069b[a94_0x1d8b('0x15')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x104223(_0x53543e);});}],_0x3e0918=>{if(_0x3e0918){return _0x5b1500(_0x3e0918);}_0x302cae[a94_0x1d8b('0x8')]('/');});};exports[a94_0x1d8b('0x59')]=(_0x17db2,_0x3a9179)=>{if(_0x17db2[a94_0x1d8b('0x45')]()){return _0x3a9179[a94_0x1d8b('0x8')]('/');}_0x3a9179[a94_0x1d8b('0x9')](a94_0x1d8b('0x5a'),{'title':a94_0x1d8b('0x5b')});};exports[a94_0x1d8b('0x5c')]=(_0x13736b,_0x83353,_0x349d40)=>{_0x13736b[a94_0x1d8b('0xf')]('email',a94_0x1d8b('0x5d'))[a94_0x1d8b('0xe')]();_0x13736b[a94_0x1d8b('0x12')](a94_0x1d8b('0x23'))[a94_0x1d8b('0x13')]({'gmail_remove_dots':![]});const _0x2b3302=_0x13736b[a94_0x1d8b('0x14')]();if(_0x2b3302){_0x13736b[a94_0x1d8b('0x15')]('errors',_0x2b3302);return _0x83353[a94_0x1d8b('0x8')](a94_0x1d8b('0x4c'));}async_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x51')]([function createRandomToken(_0x511f23){crypto_1['default']['randomBytes'](0x10,(_0x4f36e9,_0x2a2ee9)=>{const _0x43775a=_0x2a2ee9['toString'](a94_0x1d8b('0x5e'));_0x511f23(_0x4f36e9,_0x43775a);});},function setRandomToken(_0x1a3fb8,_0x4a87de){User_1[a94_0x1d8b('0x16')][a94_0x1d8b('0x2b')]({'email':_0x13736b['body']['email']},(_0x3b1158,_0x7fafad)=>{if(_0x3b1158){return _0x4a87de(_0x3b1158);}if(!_0x7fafad){_0x13736b['flash'](a94_0x1d8b('0x19'),{'msg':a94_0x1d8b('0x5f')});return _0x83353[a94_0x1d8b('0x8')](a94_0x1d8b('0x4c'));}_0x7fafad['passwordResetToken']=_0x1a3fb8;_0x7fafad['passwordResetExpires']=Date['now']()+0x36ee80;_0x7fafad[a94_0x1d8b('0x39')](_0x3b1158=>{_0x4a87de(_0x3b1158,_0x1a3fb8,_0x7fafad);});});},function sendForgotPasswordEmail(_0x1f6e9d,_0x22657e,_0x36c760){const _0x12b3c3=nodemailer_1[a94_0x1d8b('0x16')]['createTransport']({'service':a94_0x1d8b('0x54'),'auth':{'user':process[a94_0x1d8b('0x56')]['SENDGRID_USER'],'pass':process[a94_0x1d8b('0x56')][a94_0x1d8b('0x60')]}});const _0x3ce762={'to':_0x22657e[a94_0x1d8b('0x23')],'from':a94_0x1d8b('0x61'),'subject':a94_0x1d8b('0x62'),'text':a94_0x1d8b('0x63')+_0x13736b[a94_0x1d8b('0x64')][a94_0x1d8b('0x65')]+'/reset/'+_0x1f6e9d+a94_0x1d8b('0x66')};_0x12b3c3[a94_0x1d8b('0x58')](_0x3ce762,_0x505bd2=>{_0x13736b[a94_0x1d8b('0x15')](a94_0x1d8b('0x3c'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x22657e[a94_0x1d8b('0x23')]+'\x20with\x20further\x20instructions.'});_0x36c760(_0x505bd2);});}],_0x279007=>{if(_0x279007){return _0x349d40(_0x279007);}_0x83353['redirect'](a94_0x1d8b('0x4c'));});};