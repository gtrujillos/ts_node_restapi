var a95_0x226a=['getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','back','passwordResetToken','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','Please\x20enter\x20a\x20valid\x20email\x20address.','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','message','logIn','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','getAccount','render','account/profile','Account\x20Management','postUpdateProfile','/account','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','findById','success','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','tokens','filter','\x20account\x20has\x20been\x20unlinked.'];(function(_0x5a42c8,_0x2d3308){var _0x59f09a=function(_0xcad96c){while(--_0xcad96c){_0x5a42c8['push'](_0x5a42c8['shift']());}};_0x59f09a(++_0x2d3308);}(a95_0x226a,0x96));var a95_0x1996=function(_0x265f13,_0x34ddd2){_0x265f13=_0x265f13-0x0;var _0x313e06=a95_0x226a[_0x265f13];return _0x313e06;};'use strict';var __importDefault=this&&this[a95_0x1996('0x0')]||function(_0x26a24e){return _0x26a24e&&_0x26a24e[a95_0x1996('0x1')]?_0x26a24e:{'default':_0x26a24e};};Object[a95_0x1996('0x2')](exports,a95_0x1996('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x1996('0x3')));const crypto_1=__importDefault(require(a95_0x1996('0x4')));const nodemailer_1=__importDefault(require(a95_0x1996('0x5')));const passport_1=__importDefault(require(a95_0x1996('0x6')));const User_1=__importDefault(require(a95_0x1996('0x7')));const request=require(a95_0x1996('0x8'));exports[a95_0x1996('0x9')]=(_0x2d90f1,_0x44e210)=>{if(_0x2d90f1[a95_0x1996('0xa')]){return _0x44e210[a95_0x1996('0xb')]('/');}_0x44e210['render'](a95_0x1996('0xc'),{'title':a95_0x1996('0xd')});};exports[a95_0x1996('0xe')]=(_0x59b70f,_0x28b2e4,_0x54fb4d)=>{_0x59b70f[a95_0x1996('0xf')](a95_0x1996('0x10'),a95_0x1996('0x11'))[a95_0x1996('0x12')]();_0x59b70f[a95_0x1996('0xf')](a95_0x1996('0x13'),'Password\x20cannot\x20be\x20blank')[a95_0x1996('0x14')]();_0x59b70f[a95_0x1996('0x15')]('email')[a95_0x1996('0x16')]({'gmail_remove_dots':![]});const _0x237323=_0x59b70f[a95_0x1996('0x17')]();if(_0x237323){_0x59b70f[a95_0x1996('0x18')](a95_0x1996('0x19'),_0x237323);return _0x28b2e4[a95_0x1996('0xb')](a95_0x1996('0x1a'));}passport_1[a95_0x1996('0x1b')]['authenticate']('local',(_0x58809f,_0x1cdebe,_0x33c980)=>{if(_0x58809f){return _0x54fb4d(_0x58809f);}if(!_0x1cdebe){_0x59b70f[a95_0x1996('0x18')](a95_0x1996('0x19'),_0x33c980[a95_0x1996('0x1c')]);return _0x28b2e4[a95_0x1996('0xb')]('/login');}_0x59b70f[a95_0x1996('0x1d')](_0x1cdebe,_0x58809f=>{if(_0x58809f){return _0x54fb4d(_0x58809f);}_0x59b70f[a95_0x1996('0x18')]('success',{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x28b2e4['redirect'](_0x59b70f[a95_0x1996('0x1e')][a95_0x1996('0x1f')]||'/');});})(_0x59b70f,_0x28b2e4,_0x54fb4d);};exports[a95_0x1996('0x20')]=(_0x43bada,_0x3587af)=>{_0x43bada[a95_0x1996('0x20')]();_0x3587af[a95_0x1996('0xb')]('/');};exports[a95_0x1996('0x21')]=(_0x255eda,_0x5cb83c)=>{if(_0x255eda[a95_0x1996('0xa')]){return _0x5cb83c['redirect']('/');}_0x5cb83c['render'](a95_0x1996('0x22'),{'title':a95_0x1996('0x23')});};exports[a95_0x1996('0x24')]=(_0x562e98,_0x97bce6,_0x3c2659)=>{_0x562e98[a95_0x1996('0xf')](a95_0x1996('0x10'),a95_0x1996('0x11'))['isEmail']();_0x562e98[a95_0x1996('0xf')](a95_0x1996('0x13'),a95_0x1996('0x25'))[a95_0x1996('0x26')]({'min':0x4});_0x562e98[a95_0x1996('0xf')](a95_0x1996('0x27'),a95_0x1996('0x28'))[a95_0x1996('0x29')](_0x562e98['body']['password']);_0x562e98[a95_0x1996('0x15')](a95_0x1996('0x10'))[a95_0x1996('0x16')]({'gmail_remove_dots':![]});const _0x4c389b=_0x562e98[a95_0x1996('0x17')]();if(_0x4c389b){_0x562e98[a95_0x1996('0x18')]('errors',_0x4c389b);return _0x97bce6[a95_0x1996('0xb')]('/signup');}const _0x5d2eba=new User_1[(a95_0x1996('0x1b'))]({'email':_0x562e98['body']['email'],'password':_0x562e98[a95_0x1996('0x2a')][a95_0x1996('0x13')]});User_1[a95_0x1996('0x1b')][a95_0x1996('0x2b')]({'email':_0x562e98[a95_0x1996('0x2a')]['email']},(_0x2d5011,_0x48d172)=>{if(_0x2d5011){return _0x3c2659(_0x2d5011);}if(_0x48d172){_0x562e98[a95_0x1996('0x18')]('errors',{'msg':a95_0x1996('0x2c')});return _0x97bce6['redirect'](a95_0x1996('0x2d'));}_0x5d2eba[a95_0x1996('0x2e')](_0x2d5011=>{if(_0x2d5011){return _0x3c2659(_0x2d5011);}_0x562e98[a95_0x1996('0x1d')](_0x5d2eba,_0x2d5011=>{if(_0x2d5011){return _0x3c2659(_0x2d5011);}_0x97bce6[a95_0x1996('0xb')]('/');});});});};exports[a95_0x1996('0x2f')]=(_0x3a19dc,_0x16bf53)=>{_0x16bf53[a95_0x1996('0x30')](a95_0x1996('0x31'),{'title':a95_0x1996('0x32')});};exports[a95_0x1996('0x33')]=(_0x41c2a8,_0x4cb20b,_0x451bfc)=>{_0x41c2a8[a95_0x1996('0xf')](a95_0x1996('0x10'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x41c2a8[a95_0x1996('0x15')](a95_0x1996('0x10'))[a95_0x1996('0x16')]({'gmail_remove_dots':![]});const _0x4b4271=_0x41c2a8['validationErrors']();if(_0x4b4271){_0x41c2a8[a95_0x1996('0x18')](a95_0x1996('0x19'),_0x4b4271);return _0x4cb20b[a95_0x1996('0xb')](a95_0x1996('0x34'));}User_1[a95_0x1996('0x1b')]['findById'](_0x41c2a8[a95_0x1996('0xa')]['id'],(_0x1eb825,_0x5552ea)=>{if(_0x1eb825){return _0x451bfc(_0x1eb825);}_0x5552ea[a95_0x1996('0x10')]=_0x41c2a8[a95_0x1996('0x2a')][a95_0x1996('0x10')]||'';_0x5552ea['profile'][a95_0x1996('0x35')]=_0x41c2a8[a95_0x1996('0x2a')][a95_0x1996('0x35')]||'';_0x5552ea[a95_0x1996('0x36')][a95_0x1996('0x37')]=_0x41c2a8[a95_0x1996('0x2a')][a95_0x1996('0x37')]||'';_0x5552ea[a95_0x1996('0x36')][a95_0x1996('0x38')]=_0x41c2a8[a95_0x1996('0x2a')][a95_0x1996('0x38')]||'';_0x5552ea[a95_0x1996('0x36')]['website']=_0x41c2a8[a95_0x1996('0x2a')][a95_0x1996('0x39')]||'';_0x5552ea[a95_0x1996('0x2e')](_0x1eb825=>{if(_0x1eb825){if(_0x1eb825['code']===0x2af8){_0x41c2a8[a95_0x1996('0x18')](a95_0x1996('0x19'),{'msg':a95_0x1996('0x3a')});return _0x4cb20b['redirect'](a95_0x1996('0x34'));}return _0x451bfc(_0x1eb825);}_0x41c2a8['flash']('success',{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x4cb20b[a95_0x1996('0xb')](a95_0x1996('0x34'));});});};exports[a95_0x1996('0x3b')]=(_0x24feaf,_0x5112cc,_0x3ade60)=>{_0x24feaf['assert'](a95_0x1996('0x13'),a95_0x1996('0x25'))[a95_0x1996('0x26')]({'min':0x4});_0x24feaf['assert'](a95_0x1996('0x27'),a95_0x1996('0x28'))[a95_0x1996('0x29')](_0x24feaf[a95_0x1996('0x2a')][a95_0x1996('0x13')]);const _0x5c4bce=_0x24feaf[a95_0x1996('0x17')]();if(_0x5c4bce){_0x24feaf[a95_0x1996('0x18')](a95_0x1996('0x19'),_0x5c4bce);return _0x5112cc[a95_0x1996('0xb')]('/account');}User_1[a95_0x1996('0x1b')][a95_0x1996('0x3c')](_0x24feaf[a95_0x1996('0xa')]['id'],(_0x58c456,_0x4eb35e)=>{if(_0x58c456){return _0x3ade60(_0x58c456);}_0x4eb35e[a95_0x1996('0x13')]=_0x24feaf[a95_0x1996('0x2a')][a95_0x1996('0x13')];_0x4eb35e['save'](_0x58c456=>{if(_0x58c456){return _0x3ade60(_0x58c456);}_0x24feaf[a95_0x1996('0x18')](a95_0x1996('0x3d'),{'msg':a95_0x1996('0x3e')});_0x5112cc[a95_0x1996('0xb')](a95_0x1996('0x34'));});});};exports['postDeleteAccount']=(_0x38d750,_0x193991,_0x50aad5)=>{User_1[a95_0x1996('0x1b')][a95_0x1996('0x3f')]({'_id':_0x38d750[a95_0x1996('0xa')]['id']},_0xb3a840=>{if(_0xb3a840){return _0x50aad5(_0xb3a840);}_0x38d750[a95_0x1996('0x20')]();_0x38d750[a95_0x1996('0x18')](a95_0x1996('0x40'),{'msg':a95_0x1996('0x41')});_0x193991[a95_0x1996('0xb')]('/');});};exports['getOauthUnlink']=(_0x4dc2f7,_0x10349a,_0x248353)=>{const _0x334857=_0x4dc2f7[a95_0x1996('0x42')]['provider'];User_1[a95_0x1996('0x1b')][a95_0x1996('0x3c')](_0x4dc2f7['user']['id'],(_0x14614c,_0x401896)=>{if(_0x14614c){return _0x248353(_0x14614c);}_0x401896[_0x334857]=undefined;_0x401896['tokens']=_0x401896[a95_0x1996('0x43')][a95_0x1996('0x44')](_0x115d99=>_0x115d99['kind']!==_0x334857);_0x401896['save'](_0x14614c=>{if(_0x14614c){return _0x248353(_0x14614c);}_0x4dc2f7[a95_0x1996('0x18')](a95_0x1996('0x40'),{'msg':_0x334857+a95_0x1996('0x45')});_0x10349a['redirect']('/account');});});};exports[a95_0x1996('0x46')]=(_0x2298a1,_0x3bdd69,_0x11ac66)=>{if(_0x2298a1[a95_0x1996('0x47')]()){return _0x3bdd69[a95_0x1996('0xb')]('/');}User_1['default'][a95_0x1996('0x2b')]({'passwordResetToken':_0x2298a1[a95_0x1996('0x42')][a95_0x1996('0x48')]})[a95_0x1996('0x49')](a95_0x1996('0x4a'))['gt'](Date[a95_0x1996('0x4b')]())[a95_0x1996('0x4c')]((_0x536b0b,_0x5e3ac6)=>{if(_0x536b0b){return _0x11ac66(_0x536b0b);}if(!_0x5e3ac6){_0x2298a1[a95_0x1996('0x18')](a95_0x1996('0x19'),{'msg':a95_0x1996('0x4d')});return _0x3bdd69['redirect'](a95_0x1996('0x4e'));}_0x3bdd69[a95_0x1996('0x30')](a95_0x1996('0x4f'),{'title':a95_0x1996('0x50')});});};exports[a95_0x1996('0x51')]=(_0x27dfea,_0x9b953c,_0x4df1ad)=>{_0x27dfea['assert'](a95_0x1996('0x13'),a95_0x1996('0x52'))[a95_0x1996('0x26')]({'min':0x4});_0x27dfea['assert']('confirm','Passwords\x20must\x20match.')[a95_0x1996('0x29')](_0x27dfea[a95_0x1996('0x2a')][a95_0x1996('0x13')]);const _0x14e8bd=_0x27dfea[a95_0x1996('0x17')]();if(_0x14e8bd){_0x27dfea[a95_0x1996('0x18')]('errors',_0x14e8bd);return _0x9b953c['redirect'](a95_0x1996('0x53'));}async_1[a95_0x1996('0x1b')]['waterfall']([function resetPassword(_0xd9a69e){User_1['default'][a95_0x1996('0x2b')]({'passwordResetToken':_0x27dfea['params'][a95_0x1996('0x48')]})[a95_0x1996('0x49')](a95_0x1996('0x4a'))['gt'](Date[a95_0x1996('0x4b')]())[a95_0x1996('0x4c')]((_0x3c7c68,_0x2a78e4)=>{if(_0x3c7c68){return _0x4df1ad(_0x3c7c68);}if(!_0x2a78e4){_0x27dfea['flash'](a95_0x1996('0x19'),{'msg':a95_0x1996('0x4d')});return _0x9b953c[a95_0x1996('0xb')]('back');}_0x2a78e4[a95_0x1996('0x13')]=_0x27dfea[a95_0x1996('0x2a')]['password'];_0x2a78e4[a95_0x1996('0x54')]=undefined;_0x2a78e4[a95_0x1996('0x4a')]=undefined;_0x2a78e4[a95_0x1996('0x2e')](_0x3c7c68=>{if(_0x3c7c68){return _0x4df1ad(_0x3c7c68);}_0x27dfea[a95_0x1996('0x1d')](_0x2a78e4,_0x3c7c68=>{_0xd9a69e(_0x3c7c68,_0x2a78e4);});});});},function sendResetPasswordEmail(_0xa9d7c1,_0x1781c8){const _0x33bcbe=nodemailer_1[a95_0x1996('0x1b')]['createTransport']({'service':'SendGrid','auth':{'user':process['env'][a95_0x1996('0x55')],'pass':process[a95_0x1996('0x56')][a95_0x1996('0x57')]}});const _0x4603bf={'to':_0xa9d7c1[a95_0x1996('0x10')],'from':a95_0x1996('0x58'),'subject':a95_0x1996('0x59'),'text':a95_0x1996('0x5a')+_0xa9d7c1[a95_0x1996('0x10')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x33bcbe[a95_0x1996('0x5b')](_0x4603bf,_0x6ce853=>{_0x27dfea[a95_0x1996('0x18')]('success',{'msg':a95_0x1996('0x5c')});_0x1781c8(_0x6ce853);});}],_0x414509=>{if(_0x414509){return _0x4df1ad(_0x414509);}_0x9b953c[a95_0x1996('0xb')]('/');});};exports['getForgot']=(_0x59f8e3,_0x1eac36)=>{if(_0x59f8e3[a95_0x1996('0x47')]()){return _0x1eac36['redirect']('/');}_0x1eac36[a95_0x1996('0x30')](a95_0x1996('0x5d'),{'title':a95_0x1996('0x5e')});};exports['postForgot']=(_0x2879cf,_0x5144ef,_0x3ed9be)=>{_0x2879cf['assert'](a95_0x1996('0x10'),a95_0x1996('0x5f'))['isEmail']();_0x2879cf[a95_0x1996('0x15')](a95_0x1996('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1dd995=_0x2879cf['validationErrors']();if(_0x1dd995){_0x2879cf[a95_0x1996('0x18')](a95_0x1996('0x19'),_0x1dd995);return _0x5144ef[a95_0x1996('0xb')]('/forgot');}async_1[a95_0x1996('0x1b')][a95_0x1996('0x60')]([function createRandomToken(_0x17bcf9){crypto_1['default'][a95_0x1996('0x61')](0x10,(_0x4f4970,_0x52a3b3)=>{const _0x5a5534=_0x52a3b3[a95_0x1996('0x62')](a95_0x1996('0x63'));_0x17bcf9(_0x4f4970,_0x5a5534);});},function setRandomToken(_0x507fee,_0x4a3329){User_1[a95_0x1996('0x1b')]['findOne']({'email':_0x2879cf[a95_0x1996('0x2a')]['email']},(_0x39552f,_0x1aef68)=>{if(_0x39552f){return _0x4a3329(_0x39552f);}if(!_0x1aef68){_0x2879cf[a95_0x1996('0x18')](a95_0x1996('0x19'),{'msg':a95_0x1996('0x64')});return _0x5144ef[a95_0x1996('0xb')](a95_0x1996('0x4e'));}_0x1aef68['passwordResetToken']=_0x507fee;_0x1aef68[a95_0x1996('0x4a')]=Date[a95_0x1996('0x4b')]()+0x36ee80;_0x1aef68[a95_0x1996('0x2e')](_0x39552f=>{_0x4a3329(_0x39552f,_0x507fee,_0x1aef68);});});},function sendForgotPasswordEmail(_0x4e92e7,_0x4c69fc,_0x3e81e8){const _0x28ad79=nodemailer_1[a95_0x1996('0x1b')][a95_0x1996('0x65')]({'service':a95_0x1996('0x66'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a95_0x1996('0x56')][a95_0x1996('0x57')]}});const _0x412598={'to':_0x4c69fc[a95_0x1996('0x10')],'from':a95_0x1996('0x67'),'subject':a95_0x1996('0x68'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x2879cf[a95_0x1996('0x69')][a95_0x1996('0x6a')]+a95_0x1996('0x6b')+_0x4e92e7+a95_0x1996('0x6c')};_0x28ad79[a95_0x1996('0x5b')](_0x412598,_0x15e4a1=>{_0x2879cf[a95_0x1996('0x18')](a95_0x1996('0x40'),{'msg':a95_0x1996('0x6d')+_0x4c69fc['email']+'\x20with\x20further\x20instructions.'});_0x3e81e8(_0x15e4a1);});}],_0x3b0125=>{if(_0x3b0125){return _0x3ed9be(_0x3b0125);}_0x5144ef[a95_0x1996('0xb')](a95_0x1996('0x4e'));});};