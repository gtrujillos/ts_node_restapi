var a183_0x19a9=['/account','findById','profile','name','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','confirmPassword','equals','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','token','passwordResetToken','logIn','createTransport','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','Forgot\x20Password','postForgot','randomBytes','toString','SendGrid','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__esModule','defineProperty','crypto','nodemailer','getLogin','user','redirect','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','default','authenticate','local','message','/login','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','render','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.'];(function(_0x225c82,_0x5c77a1){var _0x74f681=function(_0x3bce89){while(--_0x3bce89){_0x225c82['push'](_0x225c82['shift']());}};_0x74f681(++_0x5c77a1);}(a183_0x19a9,0x1db));var a183_0x1f73=function(_0x5371a3,_0x4013ef){_0x5371a3=_0x5371a3-0x0;var _0x4e1833=a183_0x19a9[_0x5371a3];return _0x4e1833;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3861cb){return _0x3861cb&&_0x3861cb[a183_0x1f73('0x0')]?_0x3861cb:{'default':_0x3861cb};};Object[a183_0x1f73('0x1')](exports,a183_0x1f73('0x0'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a183_0x1f73('0x2')));const nodemailer_1=__importDefault(require(a183_0x1f73('0x3')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a183_0x1f73('0x4')]=(_0x3719da,_0xc996d1)=>{if(_0x3719da[a183_0x1f73('0x5')]){return _0xc996d1[a183_0x1f73('0x6')]('/');}_0xc996d1['render']('account/login',{'title':a183_0x1f73('0x7')});};exports[a183_0x1f73('0x8')]=(_0x5c614a,_0x1e0277,_0xfa6efd)=>{_0x5c614a[a183_0x1f73('0x9')](a183_0x1f73('0xa'),a183_0x1f73('0xb'))[a183_0x1f73('0xc')]();_0x5c614a[a183_0x1f73('0x9')](a183_0x1f73('0xd'),a183_0x1f73('0xe'))[a183_0x1f73('0xf')]();_0x5c614a[a183_0x1f73('0x10')]('email')[a183_0x1f73('0x11')]({'gmail_remove_dots':![]});const _0x1929d6=_0x5c614a[a183_0x1f73('0x12')]();if(_0x1929d6){_0x5c614a[a183_0x1f73('0x13')](a183_0x1f73('0x14'),_0x1929d6);return _0x1e0277['redirect']('/login');}passport_1[a183_0x1f73('0x15')][a183_0x1f73('0x16')](a183_0x1f73('0x17'),(_0x8d33c8,_0x148d60,_0x581ddc)=>{if(_0x8d33c8){return _0xfa6efd(_0x8d33c8);}if(!_0x148d60){_0x5c614a[a183_0x1f73('0x13')](a183_0x1f73('0x14'),_0x581ddc[a183_0x1f73('0x18')]);return _0x1e0277['redirect'](a183_0x1f73('0x19'));}_0x5c614a['logIn'](_0x148d60,_0x8d33c8=>{if(_0x8d33c8){return _0xfa6efd(_0x8d33c8);}_0x5c614a[a183_0x1f73('0x13')](a183_0x1f73('0x1a'),{'msg':a183_0x1f73('0x1b')});_0x1e0277[a183_0x1f73('0x6')](_0x5c614a[a183_0x1f73('0x1c')]['returnTo']||'/');});})(_0x5c614a,_0x1e0277,_0xfa6efd);};exports[a183_0x1f73('0x1d')]=(_0x342a1d,_0x84c01e)=>{_0x342a1d['logout']();_0x84c01e[a183_0x1f73('0x6')]('/');};exports[a183_0x1f73('0x1e')]=(_0x4fe05f,_0x3481ee)=>{if(_0x4fe05f[a183_0x1f73('0x5')]){return _0x3481ee[a183_0x1f73('0x6')]('/');}_0x3481ee['render']('account/signup',{'title':a183_0x1f73('0x1f')});};exports[a183_0x1f73('0x20')]=(_0x9cb416,_0x42d0f4,_0x5d74b7)=>{_0x9cb416['assert']('email',a183_0x1f73('0xb'))[a183_0x1f73('0xc')]();_0x9cb416[a183_0x1f73('0x9')](a183_0x1f73('0xd'),a183_0x1f73('0x21'))[a183_0x1f73('0x22')]({'min':0x4});_0x9cb416['assert']('confirmPassword',a183_0x1f73('0x23'))['equals'](_0x9cb416[a183_0x1f73('0x24')][a183_0x1f73('0xd')]);_0x9cb416['sanitize']('email')[a183_0x1f73('0x11')]({'gmail_remove_dots':![]});const _0x5396b0=_0x9cb416[a183_0x1f73('0x12')]();if(_0x5396b0){_0x9cb416[a183_0x1f73('0x13')]('errors',_0x5396b0);return _0x42d0f4['redirect'](a183_0x1f73('0x25'));}const _0x6b4960=new User_1[(a183_0x1f73('0x15'))]({'email':_0x9cb416['body'][a183_0x1f73('0xa')],'password':_0x9cb416[a183_0x1f73('0x24')][a183_0x1f73('0xd')]});User_1[a183_0x1f73('0x15')][a183_0x1f73('0x26')]({'email':_0x9cb416['body'][a183_0x1f73('0xa')]},(_0x1d1930,_0xa41d40)=>{if(_0x1d1930){return _0x5d74b7(_0x1d1930);}if(_0xa41d40){_0x9cb416['flash'](a183_0x1f73('0x14'),{'msg':a183_0x1f73('0x27')});return _0x42d0f4['redirect'](a183_0x1f73('0x25'));}_0x6b4960['save'](_0x1d1930=>{if(_0x1d1930){return _0x5d74b7(_0x1d1930);}_0x9cb416['logIn'](_0x6b4960,_0x1d1930=>{if(_0x1d1930){return _0x5d74b7(_0x1d1930);}_0x42d0f4[a183_0x1f73('0x6')]('/');});});});};exports['getAccount']=(_0x2f64f5,_0x38313f)=>{_0x38313f[a183_0x1f73('0x28')](a183_0x1f73('0x29'),{'title':a183_0x1f73('0x2a')});};exports[a183_0x1f73('0x2b')]=(_0x919c24,_0x2e7661,_0x2abc4d)=>{_0x919c24['assert']('email',a183_0x1f73('0x2c'))[a183_0x1f73('0xc')]();_0x919c24[a183_0x1f73('0x10')](a183_0x1f73('0xa'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1c3e43=_0x919c24[a183_0x1f73('0x12')]();if(_0x1c3e43){_0x919c24[a183_0x1f73('0x13')](a183_0x1f73('0x14'),_0x1c3e43);return _0x2e7661[a183_0x1f73('0x6')](a183_0x1f73('0x2d'));}User_1['default'][a183_0x1f73('0x2e')](_0x919c24['user']['id'],(_0x5302b4,_0x34188f)=>{if(_0x5302b4){return _0x2abc4d(_0x5302b4);}_0x34188f[a183_0x1f73('0xa')]=_0x919c24[a183_0x1f73('0x24')][a183_0x1f73('0xa')]||'';_0x34188f[a183_0x1f73('0x2f')]['name']=_0x919c24[a183_0x1f73('0x24')][a183_0x1f73('0x30')]||'';_0x34188f[a183_0x1f73('0x2f')]['gender']=_0x919c24[a183_0x1f73('0x24')]['gender']||'';_0x34188f[a183_0x1f73('0x2f')][a183_0x1f73('0x31')]=_0x919c24[a183_0x1f73('0x24')][a183_0x1f73('0x31')]||'';_0x34188f[a183_0x1f73('0x2f')][a183_0x1f73('0x32')]=_0x919c24[a183_0x1f73('0x24')][a183_0x1f73('0x32')]||'';_0x34188f[a183_0x1f73('0x33')](_0x5302b4=>{if(_0x5302b4){if(_0x5302b4[a183_0x1f73('0x34')]===0x2af8){_0x919c24[a183_0x1f73('0x13')]('errors',{'msg':a183_0x1f73('0x35')});return _0x2e7661[a183_0x1f73('0x6')](a183_0x1f73('0x2d'));}return _0x2abc4d(_0x5302b4);}_0x919c24[a183_0x1f73('0x13')]('success',{'msg':a183_0x1f73('0x36')});_0x2e7661[a183_0x1f73('0x6')](a183_0x1f73('0x2d'));});});};exports['postUpdatePassword']=(_0x2e6fc8,_0x30a211,_0x1084c0)=>{_0x2e6fc8[a183_0x1f73('0x9')](a183_0x1f73('0xd'),a183_0x1f73('0x21'))[a183_0x1f73('0x22')]({'min':0x4});_0x2e6fc8[a183_0x1f73('0x9')](a183_0x1f73('0x37'),a183_0x1f73('0x23'))[a183_0x1f73('0x38')](_0x2e6fc8[a183_0x1f73('0x24')][a183_0x1f73('0xd')]);const _0x9e7093=_0x2e6fc8[a183_0x1f73('0x12')]();if(_0x9e7093){_0x2e6fc8['flash'](a183_0x1f73('0x14'),_0x9e7093);return _0x30a211[a183_0x1f73('0x6')](a183_0x1f73('0x2d'));}User_1[a183_0x1f73('0x15')][a183_0x1f73('0x2e')](_0x2e6fc8[a183_0x1f73('0x5')]['id'],(_0x171817,_0x24b972)=>{if(_0x171817){return _0x1084c0(_0x171817);}_0x24b972[a183_0x1f73('0xd')]=_0x2e6fc8[a183_0x1f73('0x24')][a183_0x1f73('0xd')];_0x24b972[a183_0x1f73('0x33')](_0x171817=>{if(_0x171817){return _0x1084c0(_0x171817);}_0x2e6fc8[a183_0x1f73('0x13')](a183_0x1f73('0x1a'),{'msg':'Password\x20has\x20been\x20changed.'});_0x30a211[a183_0x1f73('0x6')]('/account');});});};exports[a183_0x1f73('0x39')]=(_0x1d017a,_0x59baba,_0x44ef36)=>{User_1[a183_0x1f73('0x15')]['remove']({'_id':_0x1d017a[a183_0x1f73('0x5')]['id']},_0x5d097d=>{if(_0x5d097d){return _0x44ef36(_0x5d097d);}_0x1d017a[a183_0x1f73('0x1d')]();_0x1d017a[a183_0x1f73('0x13')](a183_0x1f73('0x3a'),{'msg':a183_0x1f73('0x3b')});_0x59baba[a183_0x1f73('0x6')]('/');});};exports['getOauthUnlink']=(_0xc1a0f0,_0x55a6bb,_0x3b9eca)=>{const _0xe97a78=_0xc1a0f0['params']['provider'];User_1[a183_0x1f73('0x15')][a183_0x1f73('0x2e')](_0xc1a0f0[a183_0x1f73('0x5')]['id'],(_0x5f12f0,_0x20a099)=>{if(_0x5f12f0){return _0x3b9eca(_0x5f12f0);}_0x20a099[_0xe97a78]=undefined;_0x20a099[a183_0x1f73('0x3c')]=_0x20a099[a183_0x1f73('0x3c')]['filter'](_0xae1f20=>_0xae1f20[a183_0x1f73('0x3d')]!==_0xe97a78);_0x20a099['save'](_0x5f12f0=>{if(_0x5f12f0){return _0x3b9eca(_0x5f12f0);}_0xc1a0f0[a183_0x1f73('0x13')](a183_0x1f73('0x3a'),{'msg':_0xe97a78+a183_0x1f73('0x3e')});_0x55a6bb[a183_0x1f73('0x6')](a183_0x1f73('0x2d'));});});};exports[a183_0x1f73('0x3f')]=(_0x4faef2,_0x2e464c,_0x4deb8a)=>{if(_0x4faef2[a183_0x1f73('0x40')]()){return _0x2e464c[a183_0x1f73('0x6')]('/');}User_1['default']['findOne']({'passwordResetToken':_0x4faef2[a183_0x1f73('0x41')]['token']})[a183_0x1f73('0x42')](a183_0x1f73('0x43'))['gt'](Date[a183_0x1f73('0x44')]())[a183_0x1f73('0x45')]((_0x59a0cc,_0x1f9c6f)=>{if(_0x59a0cc){return _0x4deb8a(_0x59a0cc);}if(!_0x1f9c6f){_0x4faef2[a183_0x1f73('0x13')](a183_0x1f73('0x14'),{'msg':a183_0x1f73('0x46')});return _0x2e464c[a183_0x1f73('0x6')](a183_0x1f73('0x47'));}_0x2e464c[a183_0x1f73('0x28')](a183_0x1f73('0x48'),{'title':'Password\x20Reset'});});};exports[a183_0x1f73('0x49')]=(_0x15a46c,_0x54da41,_0x30fa2d)=>{_0x15a46c[a183_0x1f73('0x9')](a183_0x1f73('0xd'),a183_0x1f73('0x4a'))[a183_0x1f73('0x22')]({'min':0x4});_0x15a46c[a183_0x1f73('0x9')](a183_0x1f73('0x4b'),'Passwords\x20must\x20match.')[a183_0x1f73('0x38')](_0x15a46c['body'][a183_0x1f73('0xd')]);const _0x32739f=_0x15a46c[a183_0x1f73('0x12')]();if(_0x32739f){_0x15a46c[a183_0x1f73('0x13')](a183_0x1f73('0x14'),_0x32739f);return _0x54da41[a183_0x1f73('0x6')](a183_0x1f73('0x4c'));}async_1[a183_0x1f73('0x15')][a183_0x1f73('0x4d')]([function resetPassword(_0x4c4d1c){User_1[a183_0x1f73('0x15')]['findOne']({'passwordResetToken':_0x15a46c[a183_0x1f73('0x41')][a183_0x1f73('0x4e')]})[a183_0x1f73('0x42')](a183_0x1f73('0x43'))['gt'](Date['now']())['exec']((_0x54a5f1,_0xa80fe9)=>{if(_0x54a5f1){return _0x30fa2d(_0x54a5f1);}if(!_0xa80fe9){_0x15a46c[a183_0x1f73('0x13')](a183_0x1f73('0x14'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x54da41[a183_0x1f73('0x6')](a183_0x1f73('0x4c'));}_0xa80fe9[a183_0x1f73('0xd')]=_0x15a46c[a183_0x1f73('0x24')][a183_0x1f73('0xd')];_0xa80fe9[a183_0x1f73('0x4f')]=undefined;_0xa80fe9[a183_0x1f73('0x43')]=undefined;_0xa80fe9['save'](_0x54a5f1=>{if(_0x54a5f1){return _0x30fa2d(_0x54a5f1);}_0x15a46c[a183_0x1f73('0x50')](_0xa80fe9,_0x54a5f1=>{_0x4c4d1c(_0x54a5f1,_0xa80fe9);});});});},function sendResetPasswordEmail(_0x4e6b15,_0x354b0d){const _0x17e3d4=nodemailer_1[a183_0x1f73('0x15')][a183_0x1f73('0x51')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a183_0x1f73('0x52')][a183_0x1f73('0x53')]}});const _0x2843d4={'to':_0x4e6b15[a183_0x1f73('0xa')],'from':a183_0x1f73('0x54'),'subject':a183_0x1f73('0x55'),'text':a183_0x1f73('0x56')+_0x4e6b15['email']+a183_0x1f73('0x57')};_0x17e3d4[a183_0x1f73('0x58')](_0x2843d4,_0x32ba2a=>{_0x15a46c[a183_0x1f73('0x13')](a183_0x1f73('0x1a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x354b0d(_0x32ba2a);});}],_0x312482=>{if(_0x312482){return _0x30fa2d(_0x312482);}_0x54da41[a183_0x1f73('0x6')]('/');});};exports[a183_0x1f73('0x59')]=(_0x3e5caa,_0x4b9acc)=>{if(_0x3e5caa['isAuthenticated']()){return _0x4b9acc['redirect']('/');}_0x4b9acc[a183_0x1f73('0x28')]('account/forgot',{'title':a183_0x1f73('0x5a')});};exports[a183_0x1f73('0x5b')]=(_0x13f31b,_0x42fd02,_0x35b10f)=>{_0x13f31b[a183_0x1f73('0x9')](a183_0x1f73('0xa'),a183_0x1f73('0x2c'))['isEmail']();_0x13f31b[a183_0x1f73('0x10')](a183_0x1f73('0xa'))[a183_0x1f73('0x11')]({'gmail_remove_dots':![]});const _0x4c061=_0x13f31b[a183_0x1f73('0x12')]();if(_0x4c061){_0x13f31b[a183_0x1f73('0x13')](a183_0x1f73('0x14'),_0x4c061);return _0x42fd02[a183_0x1f73('0x6')]('/forgot');}async_1[a183_0x1f73('0x15')][a183_0x1f73('0x4d')]([function createRandomToken(_0x323783){crypto_1[a183_0x1f73('0x15')][a183_0x1f73('0x5c')](0x10,(_0x8b7653,_0x10ffbc)=>{const _0x31e817=_0x10ffbc[a183_0x1f73('0x5d')]('hex');_0x323783(_0x8b7653,_0x31e817);});},function setRandomToken(_0x1c8a7c,_0x266188){User_1[a183_0x1f73('0x15')][a183_0x1f73('0x26')]({'email':_0x13f31b[a183_0x1f73('0x24')]['email']},(_0x81a8ab,_0x420085)=>{if(_0x81a8ab){return _0x266188(_0x81a8ab);}if(!_0x420085){_0x13f31b[a183_0x1f73('0x13')](a183_0x1f73('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x42fd02[a183_0x1f73('0x6')](a183_0x1f73('0x47'));}_0x420085[a183_0x1f73('0x4f')]=_0x1c8a7c;_0x420085['passwordResetExpires']=Date[a183_0x1f73('0x44')]()+0x36ee80;_0x420085[a183_0x1f73('0x33')](_0x81a8ab=>{_0x266188(_0x81a8ab,_0x1c8a7c,_0x420085);});});},function sendForgotPasswordEmail(_0x3730d5,_0xc4ec72,_0x1af6f5){const _0xd97ad=nodemailer_1[a183_0x1f73('0x15')][a183_0x1f73('0x51')]({'service':a183_0x1f73('0x5e'),'auth':{'user':process[a183_0x1f73('0x52')][a183_0x1f73('0x5f')],'pass':process['env'][a183_0x1f73('0x53')]}});const _0x4acaf0={'to':_0xc4ec72[a183_0x1f73('0xa')],'from':a183_0x1f73('0x60'),'subject':a183_0x1f73('0x61'),'text':a183_0x1f73('0x62')+_0x13f31b[a183_0x1f73('0x63')][a183_0x1f73('0x64')]+a183_0x1f73('0x65')+_0x3730d5+a183_0x1f73('0x66')};_0xd97ad[a183_0x1f73('0x58')](_0x4acaf0,_0x14532c=>{_0x13f31b[a183_0x1f73('0x13')](a183_0x1f73('0x3a'),{'msg':a183_0x1f73('0x67')+_0xc4ec72[a183_0x1f73('0xa')]+'\x20with\x20further\x20instructions.'});_0x1af6f5(_0x14532c);});}],_0x588d44=>{if(_0x588d44){return _0x35b10f(_0x588d44);}_0x42fd02[a183_0x1f73('0x6')](a183_0x1f73('0x47'));});};