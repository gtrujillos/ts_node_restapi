var a91_0x3dc4=['/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','../models/User','getLogin','redirect','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','/login','default','authenticate','flash','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','account/signup','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','validationErrors','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','name','profile','gender','location','website','code','errors','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','isAuthenticated','findOne','token','where','passwordResetExpires','now','/forgot','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','postForgot','randomBytes','toString','hex','passwordResetToken','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','host'];(function(_0x2ec5a0,_0x4dd1de){var _0x2ac3fd=function(_0x5ac63d){while(--_0x5ac63d){_0x2ec5a0['push'](_0x2ec5a0['shift']());}};_0x2ac3fd(++_0x4dd1de);}(a91_0x3dc4,0x1bb));var a91_0x2318=function(_0x110d61,_0x13477d){_0x110d61=_0x110d61-0x0;var _0x169527=a91_0x3dc4[_0x110d61];return _0x169527;};'use strict';var __importDefault=this&&this[a91_0x2318('0x0')]||function(_0x528bb8){return _0x528bb8&&_0x528bb8[a91_0x2318('0x1')]?_0x528bb8:{'default':_0x528bb8};};Object[a91_0x2318('0x2')](exports,a91_0x2318('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a91_0x2318('0x3')));const nodemailer_1=__importDefault(require(a91_0x2318('0x4')));const passport_1=__importDefault(require(a91_0x2318('0x5')));const User_1=__importDefault(require(a91_0x2318('0x6')));const request=require('express-validator');exports[a91_0x2318('0x7')]=(_0x16998c,_0x52e0a5)=>{if(_0x16998c['user']){return _0x52e0a5[a91_0x2318('0x8')]('/');}_0x52e0a5[a91_0x2318('0x9')](a91_0x2318('0xa'),{'title':'Login'});};exports[a91_0x2318('0xb')]=(_0x2a91d0,_0x34813f,_0x4ada95)=>{_0x2a91d0[a91_0x2318('0xc')](a91_0x2318('0xd'),a91_0x2318('0xe'))['isEmail']();_0x2a91d0[a91_0x2318('0xc')](a91_0x2318('0xf'),a91_0x2318('0x10'))[a91_0x2318('0x11')]();_0x2a91d0[a91_0x2318('0x12')](a91_0x2318('0xd'))[a91_0x2318('0x13')]({'gmail_remove_dots':![]});const _0x4f6105=_0x2a91d0['validationErrors']();if(_0x4f6105){_0x2a91d0['flash']('errors',_0x4f6105);return _0x34813f[a91_0x2318('0x8')](a91_0x2318('0x14'));}passport_1[a91_0x2318('0x15')][a91_0x2318('0x16')]('local',(_0x3c4cee,_0xd279ed,_0x21672b)=>{if(_0x3c4cee){return _0x4ada95(_0x3c4cee);}if(!_0xd279ed){_0x2a91d0[a91_0x2318('0x17')]('errors',_0x21672b[a91_0x2318('0x18')]);return _0x34813f[a91_0x2318('0x8')](a91_0x2318('0x14'));}_0x2a91d0[a91_0x2318('0x19')](_0xd279ed,_0x3c4cee=>{if(_0x3c4cee){return _0x4ada95(_0x3c4cee);}_0x2a91d0[a91_0x2318('0x17')]('success',{'msg':a91_0x2318('0x1a')});_0x34813f[a91_0x2318('0x8')](_0x2a91d0[a91_0x2318('0x1b')][a91_0x2318('0x1c')]||'/');});})(_0x2a91d0,_0x34813f,_0x4ada95);};exports[a91_0x2318('0x1d')]=(_0x546b26,_0x40cb6)=>{_0x546b26[a91_0x2318('0x1d')]();_0x40cb6['redirect']('/');};exports[a91_0x2318('0x1e')]=(_0x59e9cc,_0x4a1706)=>{if(_0x59e9cc[a91_0x2318('0x1f')]){return _0x4a1706[a91_0x2318('0x8')]('/');}_0x4a1706[a91_0x2318('0x9')](a91_0x2318('0x20'),{'title':'Create\x20Account'});};exports[a91_0x2318('0x21')]=(_0x4b063c,_0x25fb14,_0x19817a)=>{_0x4b063c['assert'](a91_0x2318('0xd'),a91_0x2318('0xe'))[a91_0x2318('0x22')]();_0x4b063c[a91_0x2318('0xc')](a91_0x2318('0xf'),a91_0x2318('0x23'))['len']({'min':0x4});_0x4b063c[a91_0x2318('0xc')](a91_0x2318('0x24'),a91_0x2318('0x25'))[a91_0x2318('0x26')](_0x4b063c[a91_0x2318('0x27')]['password']);_0x4b063c[a91_0x2318('0x12')](a91_0x2318('0xd'))[a91_0x2318('0x13')]({'gmail_remove_dots':![]});const _0x390a93=_0x4b063c[a91_0x2318('0x28')]();if(_0x390a93){_0x4b063c['flash']('errors',_0x390a93);return _0x25fb14[a91_0x2318('0x8')](a91_0x2318('0x29'));}const _0x36739d=new User_1[(a91_0x2318('0x15'))]({'email':_0x4b063c[a91_0x2318('0x27')]['email'],'password':_0x4b063c['body'][a91_0x2318('0xf')]});User_1[a91_0x2318('0x15')]['findOne']({'email':_0x4b063c['body']['email']},(_0x12980e,_0x4c5288)=>{if(_0x12980e){return _0x19817a(_0x12980e);}if(_0x4c5288){_0x4b063c[a91_0x2318('0x17')]('errors',{'msg':a91_0x2318('0x2a')});return _0x25fb14['redirect'](a91_0x2318('0x29'));}_0x36739d[a91_0x2318('0x2b')](_0x12980e=>{if(_0x12980e){return _0x19817a(_0x12980e);}_0x4b063c[a91_0x2318('0x19')](_0x36739d,_0x12980e=>{if(_0x12980e){return _0x19817a(_0x12980e);}_0x25fb14[a91_0x2318('0x8')]('/');});});});};exports[a91_0x2318('0x2c')]=(_0x42a3fe,_0x4b2b8f)=>{_0x4b2b8f[a91_0x2318('0x9')](a91_0x2318('0x2d'),{'title':a91_0x2318('0x2e')});};exports[a91_0x2318('0x2f')]=(_0x4ad69d,_0x33cd05,_0x34c080)=>{_0x4ad69d[a91_0x2318('0xc')](a91_0x2318('0xd'),a91_0x2318('0x30'))[a91_0x2318('0x22')]();_0x4ad69d['sanitize']('email')[a91_0x2318('0x13')]({'gmail_remove_dots':![]});const _0x4c3dac=_0x4ad69d[a91_0x2318('0x28')]();if(_0x4c3dac){_0x4ad69d['flash']('errors',_0x4c3dac);return _0x33cd05[a91_0x2318('0x8')](a91_0x2318('0x31'));}User_1[a91_0x2318('0x15')]['findById'](_0x4ad69d[a91_0x2318('0x1f')]['id'],(_0x11fb2b,_0x4af9d7)=>{if(_0x11fb2b){return _0x34c080(_0x11fb2b);}_0x4af9d7['email']=_0x4ad69d[a91_0x2318('0x27')][a91_0x2318('0xd')]||'';_0x4af9d7['profile'][a91_0x2318('0x32')]=_0x4ad69d[a91_0x2318('0x27')][a91_0x2318('0x32')]||'';_0x4af9d7[a91_0x2318('0x33')][a91_0x2318('0x34')]=_0x4ad69d[a91_0x2318('0x27')][a91_0x2318('0x34')]||'';_0x4af9d7[a91_0x2318('0x33')][a91_0x2318('0x35')]=_0x4ad69d[a91_0x2318('0x27')][a91_0x2318('0x35')]||'';_0x4af9d7[a91_0x2318('0x33')]['website']=_0x4ad69d[a91_0x2318('0x27')][a91_0x2318('0x36')]||'';_0x4af9d7[a91_0x2318('0x2b')](_0x11fb2b=>{if(_0x11fb2b){if(_0x11fb2b[a91_0x2318('0x37')]===0x2af8){_0x4ad69d[a91_0x2318('0x17')](a91_0x2318('0x38'),{'msg':a91_0x2318('0x39')});return _0x33cd05[a91_0x2318('0x8')](a91_0x2318('0x31'));}return _0x34c080(_0x11fb2b);}_0x4ad69d[a91_0x2318('0x17')](a91_0x2318('0x3a'),{'msg':a91_0x2318('0x3b')});_0x33cd05[a91_0x2318('0x8')](a91_0x2318('0x31'));});});};exports[a91_0x2318('0x3c')]=(_0x5787be,_0x3e939b,_0x26bc05)=>{_0x5787be['assert']('password',a91_0x2318('0x23'))[a91_0x2318('0x3d')]({'min':0x4});_0x5787be['assert'](a91_0x2318('0x24'),a91_0x2318('0x25'))['equals'](_0x5787be[a91_0x2318('0x27')][a91_0x2318('0xf')]);const _0x171e41=_0x5787be[a91_0x2318('0x28')]();if(_0x171e41){_0x5787be[a91_0x2318('0x17')](a91_0x2318('0x38'),_0x171e41);return _0x3e939b[a91_0x2318('0x8')](a91_0x2318('0x31'));}User_1[a91_0x2318('0x15')][a91_0x2318('0x3e')](_0x5787be[a91_0x2318('0x1f')]['id'],(_0x136ebd,_0x989395)=>{if(_0x136ebd){return _0x26bc05(_0x136ebd);}_0x989395[a91_0x2318('0xf')]=_0x5787be[a91_0x2318('0x27')]['password'];_0x989395[a91_0x2318('0x2b')](_0x136ebd=>{if(_0x136ebd){return _0x26bc05(_0x136ebd);}_0x5787be['flash'](a91_0x2318('0x3a'),{'msg':a91_0x2318('0x3f')});_0x3e939b[a91_0x2318('0x8')](a91_0x2318('0x31'));});});};exports[a91_0x2318('0x40')]=(_0x22f8db,_0x28960,_0x382b78)=>{User_1[a91_0x2318('0x15')]['remove']({'_id':_0x22f8db[a91_0x2318('0x1f')]['id']},_0x557d07=>{if(_0x557d07){return _0x382b78(_0x557d07);}_0x22f8db[a91_0x2318('0x1d')]();_0x22f8db[a91_0x2318('0x17')](a91_0x2318('0x41'),{'msg':a91_0x2318('0x42')});_0x28960[a91_0x2318('0x8')]('/');});};exports[a91_0x2318('0x43')]=(_0x4f4d5c,_0xc4bd1d,_0x38b6ed)=>{const _0x52db60=_0x4f4d5c[a91_0x2318('0x44')][a91_0x2318('0x45')];User_1[a91_0x2318('0x15')][a91_0x2318('0x3e')](_0x4f4d5c[a91_0x2318('0x1f')]['id'],(_0xc38e6,_0x3b5a97)=>{if(_0xc38e6){return _0x38b6ed(_0xc38e6);}_0x3b5a97[_0x52db60]=undefined;_0x3b5a97[a91_0x2318('0x46')]=_0x3b5a97['tokens'][a91_0x2318('0x47')](_0x87d20a=>_0x87d20a[a91_0x2318('0x48')]!==_0x52db60);_0x3b5a97['save'](_0xc38e6=>{if(_0xc38e6){return _0x38b6ed(_0xc38e6);}_0x4f4d5c['flash'](a91_0x2318('0x41'),{'msg':_0x52db60+'\x20account\x20has\x20been\x20unlinked.'});_0xc4bd1d[a91_0x2318('0x8')](a91_0x2318('0x31'));});});};exports['getReset']=(_0x28247d,_0xa045ef,_0x517df6)=>{if(_0x28247d[a91_0x2318('0x49')]()){return _0xa045ef[a91_0x2318('0x8')]('/');}User_1[a91_0x2318('0x15')][a91_0x2318('0x4a')]({'passwordResetToken':_0x28247d[a91_0x2318('0x44')][a91_0x2318('0x4b')]})[a91_0x2318('0x4c')](a91_0x2318('0x4d'))['gt'](Date[a91_0x2318('0x4e')]())['exec']((_0x42d3de,_0x25b9d4)=>{if(_0x42d3de){return _0x517df6(_0x42d3de);}if(!_0x25b9d4){_0x28247d[a91_0x2318('0x17')](a91_0x2318('0x38'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0xa045ef[a91_0x2318('0x8')](a91_0x2318('0x4f'));}_0xa045ef[a91_0x2318('0x9')]('account/reset',{'title':'Password\x20Reset'});});};exports[a91_0x2318('0x50')]=(_0x36d823,_0x58f099,_0x3a7de1)=>{_0x36d823[a91_0x2318('0xc')]('password',a91_0x2318('0x51'))[a91_0x2318('0x3d')]({'min':0x4});_0x36d823[a91_0x2318('0xc')](a91_0x2318('0x52'),'Passwords\x20must\x20match.')['equals'](_0x36d823[a91_0x2318('0x27')][a91_0x2318('0xf')]);const _0x22d28d=_0x36d823[a91_0x2318('0x28')]();if(_0x22d28d){_0x36d823[a91_0x2318('0x17')](a91_0x2318('0x38'),_0x22d28d);return _0x58f099['redirect'](a91_0x2318('0x53'));}async_1[a91_0x2318('0x15')][a91_0x2318('0x54')]([function resetPassword(_0x3eba4c){User_1[a91_0x2318('0x15')]['findOne']({'passwordResetToken':_0x36d823[a91_0x2318('0x44')][a91_0x2318('0x4b')]})['where']('passwordResetExpires')['gt'](Date[a91_0x2318('0x4e')]())[a91_0x2318('0x55')]((_0x86f1db,_0x389406)=>{if(_0x86f1db){return _0x3a7de1(_0x86f1db);}if(!_0x389406){_0x36d823[a91_0x2318('0x17')](a91_0x2318('0x38'),{'msg':a91_0x2318('0x56')});return _0x58f099[a91_0x2318('0x8')](a91_0x2318('0x53'));}_0x389406['password']=_0x36d823['body'][a91_0x2318('0xf')];_0x389406['passwordResetToken']=undefined;_0x389406[a91_0x2318('0x4d')]=undefined;_0x389406[a91_0x2318('0x2b')](_0x86f1db=>{if(_0x86f1db){return _0x3a7de1(_0x86f1db);}_0x36d823[a91_0x2318('0x19')](_0x389406,_0x86f1db=>{_0x3eba4c(_0x86f1db,_0x389406);});});});},function sendResetPasswordEmail(_0x2d7180,_0x49b3db){const _0x345dbb=nodemailer_1[a91_0x2318('0x15')][a91_0x2318('0x57')]({'service':a91_0x2318('0x58'),'auth':{'user':process[a91_0x2318('0x59')][a91_0x2318('0x5a')],'pass':process[a91_0x2318('0x59')][a91_0x2318('0x5b')]}});const _0x52e817={'to':_0x2d7180[a91_0x2318('0xd')],'from':a91_0x2318('0x5c'),'subject':a91_0x2318('0x5d'),'text':a91_0x2318('0x5e')+_0x2d7180['email']+a91_0x2318('0x5f')};_0x345dbb[a91_0x2318('0x60')](_0x52e817,_0xd29c80=>{_0x36d823[a91_0x2318('0x17')](a91_0x2318('0x3a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x49b3db(_0xd29c80);});}],_0x146a1a=>{if(_0x146a1a){return _0x3a7de1(_0x146a1a);}_0x58f099[a91_0x2318('0x8')]('/');});};exports[a91_0x2318('0x61')]=(_0x31dca4,_0x3acc8b)=>{if(_0x31dca4['isAuthenticated']()){return _0x3acc8b[a91_0x2318('0x8')]('/');}_0x3acc8b['render'](a91_0x2318('0x62'),{'title':'Forgot\x20Password'});};exports[a91_0x2318('0x63')]=(_0x326b38,_0x3e6f06,_0x4598ba)=>{_0x326b38[a91_0x2318('0xc')](a91_0x2318('0xd'),a91_0x2318('0x30'))[a91_0x2318('0x22')]();_0x326b38['sanitize'](a91_0x2318('0xd'))[a91_0x2318('0x13')]({'gmail_remove_dots':![]});const _0x15a794=_0x326b38['validationErrors']();if(_0x15a794){_0x326b38[a91_0x2318('0x17')](a91_0x2318('0x38'),_0x15a794);return _0x3e6f06['redirect'](a91_0x2318('0x4f'));}async_1[a91_0x2318('0x15')]['waterfall']([function createRandomToken(_0x5b1f11){crypto_1['default'][a91_0x2318('0x64')](0x10,(_0x16e55d,_0x1abc55)=>{const _0x290a48=_0x1abc55[a91_0x2318('0x65')](a91_0x2318('0x66'));_0x5b1f11(_0x16e55d,_0x290a48);});},function setRandomToken(_0x31db24,_0xdae252){User_1[a91_0x2318('0x15')][a91_0x2318('0x4a')]({'email':_0x326b38[a91_0x2318('0x27')][a91_0x2318('0xd')]},(_0x2189a7,_0x39da5e)=>{if(_0x2189a7){return _0xdae252(_0x2189a7);}if(!_0x39da5e){_0x326b38[a91_0x2318('0x17')](a91_0x2318('0x38'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x3e6f06['redirect'](a91_0x2318('0x4f'));}_0x39da5e[a91_0x2318('0x67')]=_0x31db24;_0x39da5e[a91_0x2318('0x4d')]=Date[a91_0x2318('0x4e')]()+0x36ee80;_0x39da5e[a91_0x2318('0x2b')](_0x2189a7=>{_0xdae252(_0x2189a7,_0x31db24,_0x39da5e);});});},function sendForgotPasswordEmail(_0xc7262b,_0x97626b,_0x3f42a6){const _0x3e6012=nodemailer_1[a91_0x2318('0x15')][a91_0x2318('0x57')]({'service':a91_0x2318('0x58'),'auth':{'user':process['env'][a91_0x2318('0x5a')],'pass':process[a91_0x2318('0x59')][a91_0x2318('0x5b')]}});const _0x4366e1={'to':_0x97626b[a91_0x2318('0xd')],'from':a91_0x2318('0x68'),'subject':a91_0x2318('0x69'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x326b38['headers'][a91_0x2318('0x6a')]+a91_0x2318('0x6b')+_0xc7262b+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x3e6012[a91_0x2318('0x60')](_0x4366e1,_0x2a0f3c=>{_0x326b38['flash'](a91_0x2318('0x41'),{'msg':a91_0x2318('0x6c')+_0x97626b[a91_0x2318('0xd')]+a91_0x2318('0x6d')});_0x3f42a6(_0x2a0f3c);});}],_0x50ec15=>{if(_0x50ec15){return _0x4598ba(_0x50ec15);}_0x3e6f06[a91_0x2318('0x8')]('/forgot');});};