var a201_0x4061=['len','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','confirm','Passwords\x20must\x20match.','equals','back','passwordResetExpires','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','waterfall','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','user','redirect','render','Login','assert','email','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','success','returnTo','logout','getSignup','account/signup','postSignup','Email\x20is\x20not\x20valid','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','postUpdatePassword'];(function(_0xbd6500,_0x415fc1){var _0x52680c=function(_0x46c2c2){while(--_0x46c2c2){_0xbd6500['push'](_0xbd6500['shift']());}};_0x52680c(++_0x415fc1);}(a201_0x4061,0x16b));var a201_0x3a61=function(_0x4d2c66,_0x27e9eb){_0x4d2c66=_0x4d2c66-0x0;var _0x476fb9=a201_0x4061[_0x4d2c66];return _0x476fb9;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3a6156){return _0x3a6156&&_0x3a6156[a201_0x3a61('0x0')]?_0x3a6156:{'default':_0x3a6156};};Object[a201_0x3a61('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a201_0x3a61('0x2')));const crypto_1=__importDefault(require(a201_0x3a61('0x3')));const nodemailer_1=__importDefault(require(a201_0x3a61('0x4')));const passport_1=__importDefault(require(a201_0x3a61('0x5')));const User_1=__importDefault(require(a201_0x3a61('0x6')));const request=require(a201_0x3a61('0x7'));exports['getLogin']=(_0x380a06,_0x30255c)=>{if(_0x380a06[a201_0x3a61('0x8')]){return _0x30255c[a201_0x3a61('0x9')]('/');}_0x30255c[a201_0x3a61('0xa')]('account/login',{'title':a201_0x3a61('0xb')});};exports['postLogin']=(_0x34e92b,_0x49d49b,_0x48fbc9)=>{_0x34e92b[a201_0x3a61('0xc')](a201_0x3a61('0xd'),'Email\x20is\x20not\x20valid')[a201_0x3a61('0xe')]();_0x34e92b[a201_0x3a61('0xc')]('password',a201_0x3a61('0xf'))[a201_0x3a61('0x10')]();_0x34e92b[a201_0x3a61('0x11')]('email')[a201_0x3a61('0x12')]({'gmail_remove_dots':![]});const _0x1a51d3=_0x34e92b[a201_0x3a61('0x13')]();if(_0x1a51d3){_0x34e92b[a201_0x3a61('0x14')](a201_0x3a61('0x15'),_0x1a51d3);return _0x49d49b[a201_0x3a61('0x9')](a201_0x3a61('0x16'));}passport_1[a201_0x3a61('0x17')][a201_0x3a61('0x18')](a201_0x3a61('0x19'),(_0x553c19,_0x33a6d6,_0x554dbf)=>{if(_0x553c19){return _0x48fbc9(_0x553c19);}if(!_0x33a6d6){_0x34e92b[a201_0x3a61('0x14')](a201_0x3a61('0x15'),_0x554dbf[a201_0x3a61('0x1a')]);return _0x49d49b[a201_0x3a61('0x9')]('/login');}_0x34e92b[a201_0x3a61('0x1b')](_0x33a6d6,_0x553c19=>{if(_0x553c19){return _0x48fbc9(_0x553c19);}_0x34e92b[a201_0x3a61('0x14')](a201_0x3a61('0x1c'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x49d49b[a201_0x3a61('0x9')](_0x34e92b['session'][a201_0x3a61('0x1d')]||'/');});})(_0x34e92b,_0x49d49b,_0x48fbc9);};exports[a201_0x3a61('0x1e')]=(_0x1acb50,_0x55edb5)=>{_0x1acb50[a201_0x3a61('0x1e')]();_0x55edb5[a201_0x3a61('0x9')]('/');};exports[a201_0x3a61('0x1f')]=(_0x58172f,_0x4ec650)=>{if(_0x58172f[a201_0x3a61('0x8')]){return _0x4ec650[a201_0x3a61('0x9')]('/');}_0x4ec650[a201_0x3a61('0xa')](a201_0x3a61('0x20'),{'title':'Create\x20Account'});};exports[a201_0x3a61('0x21')]=(_0x2c3920,_0x3f0fe3,_0x3f8aa8)=>{_0x2c3920['assert'](a201_0x3a61('0xd'),a201_0x3a61('0x22'))[a201_0x3a61('0xe')]();_0x2c3920[a201_0x3a61('0xc')](a201_0x3a61('0x23'),a201_0x3a61('0x24'))['len']({'min':0x4});_0x2c3920[a201_0x3a61('0xc')](a201_0x3a61('0x25'),a201_0x3a61('0x26'))['equals'](_0x2c3920[a201_0x3a61('0x27')][a201_0x3a61('0x23')]);_0x2c3920[a201_0x3a61('0x11')](a201_0x3a61('0xd'))[a201_0x3a61('0x12')]({'gmail_remove_dots':![]});const _0x52ed5e=_0x2c3920[a201_0x3a61('0x13')]();if(_0x52ed5e){_0x2c3920[a201_0x3a61('0x14')](a201_0x3a61('0x15'),_0x52ed5e);return _0x3f0fe3['redirect'](a201_0x3a61('0x28'));}const _0xa9bab0=new User_1[(a201_0x3a61('0x17'))]({'email':_0x2c3920['body'][a201_0x3a61('0xd')],'password':_0x2c3920[a201_0x3a61('0x27')][a201_0x3a61('0x23')]});User_1[a201_0x3a61('0x17')][a201_0x3a61('0x29')]({'email':_0x2c3920['body']['email']},(_0x35c791,_0x47047d)=>{if(_0x35c791){return _0x3f8aa8(_0x35c791);}if(_0x47047d){_0x2c3920[a201_0x3a61('0x14')]('errors',{'msg':a201_0x3a61('0x2a')});return _0x3f0fe3[a201_0x3a61('0x9')](a201_0x3a61('0x28'));}_0xa9bab0[a201_0x3a61('0x2b')](_0x35c791=>{if(_0x35c791){return _0x3f8aa8(_0x35c791);}_0x2c3920['logIn'](_0xa9bab0,_0x35c791=>{if(_0x35c791){return _0x3f8aa8(_0x35c791);}_0x3f0fe3[a201_0x3a61('0x9')]('/');});});});};exports['getAccount']=(_0x5458b2,_0x5bcd09)=>{_0x5bcd09[a201_0x3a61('0xa')](a201_0x3a61('0x2c'),{'title':a201_0x3a61('0x2d')});};exports[a201_0x3a61('0x2e')]=(_0x31e198,_0x2087db,_0x4c5c88)=>{_0x31e198[a201_0x3a61('0xc')](a201_0x3a61('0xd'),a201_0x3a61('0x2f'))[a201_0x3a61('0xe')]();_0x31e198[a201_0x3a61('0x11')](a201_0x3a61('0xd'))[a201_0x3a61('0x12')]({'gmail_remove_dots':![]});const _0x37c073=_0x31e198[a201_0x3a61('0x13')]();if(_0x37c073){_0x31e198['flash'](a201_0x3a61('0x15'),_0x37c073);return _0x2087db[a201_0x3a61('0x9')](a201_0x3a61('0x30'));}User_1[a201_0x3a61('0x17')][a201_0x3a61('0x31')](_0x31e198[a201_0x3a61('0x8')]['id'],(_0x37ebfb,_0x31c788)=>{if(_0x37ebfb){return _0x4c5c88(_0x37ebfb);}_0x31c788['email']=_0x31e198[a201_0x3a61('0x27')][a201_0x3a61('0xd')]||'';_0x31c788[a201_0x3a61('0x32')][a201_0x3a61('0x33')]=_0x31e198[a201_0x3a61('0x27')][a201_0x3a61('0x33')]||'';_0x31c788[a201_0x3a61('0x32')][a201_0x3a61('0x34')]=_0x31e198[a201_0x3a61('0x27')][a201_0x3a61('0x34')]||'';_0x31c788[a201_0x3a61('0x32')][a201_0x3a61('0x35')]=_0x31e198[a201_0x3a61('0x27')][a201_0x3a61('0x35')]||'';_0x31c788[a201_0x3a61('0x32')]['website']=_0x31e198[a201_0x3a61('0x27')][a201_0x3a61('0x36')]||'';_0x31c788['save'](_0x37ebfb=>{if(_0x37ebfb){if(_0x37ebfb[a201_0x3a61('0x37')]===0x2af8){_0x31e198[a201_0x3a61('0x14')](a201_0x3a61('0x15'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x2087db[a201_0x3a61('0x9')](a201_0x3a61('0x30'));}return _0x4c5c88(_0x37ebfb);}_0x31e198[a201_0x3a61('0x14')](a201_0x3a61('0x1c'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x2087db[a201_0x3a61('0x9')]('/account');});});};exports[a201_0x3a61('0x38')]=(_0x28c64e,_0x1c8d8d,_0x308e8b)=>{_0x28c64e['assert'](a201_0x3a61('0x23'),a201_0x3a61('0x24'))[a201_0x3a61('0x39')]({'min':0x4});_0x28c64e[a201_0x3a61('0xc')](a201_0x3a61('0x25'),a201_0x3a61('0x26'))['equals'](_0x28c64e[a201_0x3a61('0x27')]['password']);const _0x2273bc=_0x28c64e[a201_0x3a61('0x13')]();if(_0x2273bc){_0x28c64e['flash'](a201_0x3a61('0x15'),_0x2273bc);return _0x1c8d8d[a201_0x3a61('0x9')](a201_0x3a61('0x30'));}User_1[a201_0x3a61('0x17')][a201_0x3a61('0x31')](_0x28c64e[a201_0x3a61('0x8')]['id'],(_0x35df30,_0x137e85)=>{if(_0x35df30){return _0x308e8b(_0x35df30);}_0x137e85['password']=_0x28c64e[a201_0x3a61('0x27')]['password'];_0x137e85[a201_0x3a61('0x2b')](_0x35df30=>{if(_0x35df30){return _0x308e8b(_0x35df30);}_0x28c64e['flash'](a201_0x3a61('0x1c'),{'msg':'Password\x20has\x20been\x20changed.'});_0x1c8d8d[a201_0x3a61('0x9')](a201_0x3a61('0x30'));});});};exports[a201_0x3a61('0x3a')]=(_0x19bca2,_0x551a68,_0x1518d4)=>{User_1[a201_0x3a61('0x17')][a201_0x3a61('0x3b')]({'_id':_0x19bca2[a201_0x3a61('0x8')]['id']},_0x4a7581=>{if(_0x4a7581){return _0x1518d4(_0x4a7581);}_0x19bca2['logout']();_0x19bca2[a201_0x3a61('0x14')](a201_0x3a61('0x3c'),{'msg':a201_0x3a61('0x3d')});_0x551a68[a201_0x3a61('0x9')]('/');});};exports['getOauthUnlink']=(_0x334538,_0x47bfdf,_0x47ef4d)=>{const _0x14bdbf=_0x334538[a201_0x3a61('0x3e')][a201_0x3a61('0x3f')];User_1['default'][a201_0x3a61('0x31')](_0x334538['user']['id'],(_0x4a2e3e,_0x3b3ccd)=>{if(_0x4a2e3e){return _0x47ef4d(_0x4a2e3e);}_0x3b3ccd[_0x14bdbf]=undefined;_0x3b3ccd[a201_0x3a61('0x40')]=_0x3b3ccd['tokens'][a201_0x3a61('0x41')](_0x3e5bc9=>_0x3e5bc9[a201_0x3a61('0x42')]!==_0x14bdbf);_0x3b3ccd['save'](_0x4a2e3e=>{if(_0x4a2e3e){return _0x47ef4d(_0x4a2e3e);}_0x334538['flash'](a201_0x3a61('0x3c'),{'msg':_0x14bdbf+a201_0x3a61('0x43')});_0x47bfdf[a201_0x3a61('0x9')](a201_0x3a61('0x30'));});});};exports[a201_0x3a61('0x44')]=(_0x64e1f4,_0x4d6de2,_0x7973b7)=>{if(_0x64e1f4[a201_0x3a61('0x45')]()){return _0x4d6de2[a201_0x3a61('0x9')]('/');}User_1['default'][a201_0x3a61('0x29')]({'passwordResetToken':_0x64e1f4[a201_0x3a61('0x3e')][a201_0x3a61('0x46')]})[a201_0x3a61('0x47')]('passwordResetExpires')['gt'](Date[a201_0x3a61('0x48')]())[a201_0x3a61('0x49')]((_0x388932,_0x117e8f)=>{if(_0x388932){return _0x7973b7(_0x388932);}if(!_0x117e8f){_0x64e1f4[a201_0x3a61('0x14')](a201_0x3a61('0x15'),{'msg':a201_0x3a61('0x4a')});return _0x4d6de2['redirect'](a201_0x3a61('0x4b'));}_0x4d6de2[a201_0x3a61('0xa')](a201_0x3a61('0x4c'),{'title':'Password\x20Reset'});});};exports[a201_0x3a61('0x4d')]=(_0x4a40fe,_0x43768e,_0x539e60)=>{_0x4a40fe[a201_0x3a61('0xc')](a201_0x3a61('0x23'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')['len']({'min':0x4});_0x4a40fe[a201_0x3a61('0xc')](a201_0x3a61('0x4e'),a201_0x3a61('0x4f'))[a201_0x3a61('0x50')](_0x4a40fe[a201_0x3a61('0x27')][a201_0x3a61('0x23')]);const _0x5ea096=_0x4a40fe[a201_0x3a61('0x13')]();if(_0x5ea096){_0x4a40fe['flash']('errors',_0x5ea096);return _0x43768e[a201_0x3a61('0x9')](a201_0x3a61('0x51'));}async_1[a201_0x3a61('0x17')]['waterfall']([function resetPassword(_0xd2dcb7){User_1[a201_0x3a61('0x17')][a201_0x3a61('0x29')]({'passwordResetToken':_0x4a40fe[a201_0x3a61('0x3e')][a201_0x3a61('0x46')]})[a201_0x3a61('0x47')](a201_0x3a61('0x52'))['gt'](Date[a201_0x3a61('0x48')]())[a201_0x3a61('0x49')]((_0x33a581,_0x6c555b)=>{if(_0x33a581){return _0x539e60(_0x33a581);}if(!_0x6c555b){_0x4a40fe['flash'](a201_0x3a61('0x15'),{'msg':a201_0x3a61('0x4a')});return _0x43768e[a201_0x3a61('0x9')](a201_0x3a61('0x51'));}_0x6c555b[a201_0x3a61('0x23')]=_0x4a40fe['body']['password'];_0x6c555b['passwordResetToken']=undefined;_0x6c555b['passwordResetExpires']=undefined;_0x6c555b['save'](_0x33a581=>{if(_0x33a581){return _0x539e60(_0x33a581);}_0x4a40fe[a201_0x3a61('0x1b')](_0x6c555b,_0x33a581=>{_0xd2dcb7(_0x33a581,_0x6c555b);});});});},function sendResetPasswordEmail(_0x38730f,_0x54ddca){const _0x5acc71=nodemailer_1[a201_0x3a61('0x17')]['createTransport']({'service':'SendGrid','auth':{'user':process[a201_0x3a61('0x53')]['SENDGRID_USER'],'pass':process[a201_0x3a61('0x53')][a201_0x3a61('0x54')]}});const _0x163370={'to':_0x38730f[a201_0x3a61('0xd')],'from':a201_0x3a61('0x55'),'subject':a201_0x3a61('0x56'),'text':a201_0x3a61('0x57')+_0x38730f[a201_0x3a61('0xd')]+a201_0x3a61('0x58')};_0x5acc71[a201_0x3a61('0x59')](_0x163370,_0x460df5=>{_0x4a40fe[a201_0x3a61('0x14')](a201_0x3a61('0x1c'),{'msg':a201_0x3a61('0x5a')});_0x54ddca(_0x460df5);});}],_0x37decd=>{if(_0x37decd){return _0x539e60(_0x37decd);}_0x43768e[a201_0x3a61('0x9')]('/');});};exports[a201_0x3a61('0x5b')]=(_0x2fa98f,_0x4c4a17)=>{if(_0x2fa98f[a201_0x3a61('0x45')]()){return _0x4c4a17[a201_0x3a61('0x9')]('/');}_0x4c4a17[a201_0x3a61('0xa')](a201_0x3a61('0x5c'),{'title':a201_0x3a61('0x5d')});};exports['postForgot']=(_0x483768,_0x5864aa,_0x249390)=>{_0x483768[a201_0x3a61('0xc')](a201_0x3a61('0xd'),a201_0x3a61('0x2f'))[a201_0x3a61('0xe')]();_0x483768[a201_0x3a61('0x11')](a201_0x3a61('0xd'))[a201_0x3a61('0x12')]({'gmail_remove_dots':![]});const _0x4f2abf=_0x483768[a201_0x3a61('0x13')]();if(_0x4f2abf){_0x483768[a201_0x3a61('0x14')](a201_0x3a61('0x15'),_0x4f2abf);return _0x5864aa['redirect'](a201_0x3a61('0x4b'));}async_1['default'][a201_0x3a61('0x5e')]([function createRandomToken(_0x57bea7){crypto_1['default'][a201_0x3a61('0x5f')](0x10,(_0x9f1dd6,_0x3a7d66)=>{const _0x124c4f=_0x3a7d66[a201_0x3a61('0x60')]('hex');_0x57bea7(_0x9f1dd6,_0x124c4f);});},function setRandomToken(_0x35f5a1,_0x4fee82){User_1[a201_0x3a61('0x17')]['findOne']({'email':_0x483768[a201_0x3a61('0x27')]['email']},(_0x2c8ff6,_0xd479ce)=>{if(_0x2c8ff6){return _0x4fee82(_0x2c8ff6);}if(!_0xd479ce){_0x483768[a201_0x3a61('0x14')](a201_0x3a61('0x15'),{'msg':a201_0x3a61('0x61')});return _0x5864aa['redirect'](a201_0x3a61('0x4b'));}_0xd479ce['passwordResetToken']=_0x35f5a1;_0xd479ce[a201_0x3a61('0x52')]=Date[a201_0x3a61('0x48')]()+0x36ee80;_0xd479ce['save'](_0x2c8ff6=>{_0x4fee82(_0x2c8ff6,_0x35f5a1,_0xd479ce);});});},function sendForgotPasswordEmail(_0x264265,_0x5134a9,_0x392750){const _0x37d58e=nodemailer_1[a201_0x3a61('0x17')][a201_0x3a61('0x62')]({'service':'SendGrid','auth':{'user':process[a201_0x3a61('0x53')]['SENDGRID_USER'],'pass':process[a201_0x3a61('0x53')][a201_0x3a61('0x54')]}});const _0x1d1ab5={'to':_0x5134a9[a201_0x3a61('0xd')],'from':'hackathon@starter.com','subject':a201_0x3a61('0x63'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x483768[a201_0x3a61('0x64')][a201_0x3a61('0x65')]+a201_0x3a61('0x66')+_0x264265+a201_0x3a61('0x67')};_0x37d58e[a201_0x3a61('0x59')](_0x1d1ab5,_0x374a4d=>{_0x483768[a201_0x3a61('0x14')](a201_0x3a61('0x3c'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x5134a9[a201_0x3a61('0xd')]+a201_0x3a61('0x68')});_0x392750(_0x374a4d);});}],_0xfc5dd6=>{if(_0xfc5dd6){return _0x249390(_0xfc5dd6);}_0x5864aa['redirect'](a201_0x3a61('0x4b'));});};