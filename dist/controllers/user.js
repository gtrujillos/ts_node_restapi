var a95_0x150a=['user','redirect','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','validationErrors','errors','/login','default','authenticate','local','flash','logIn','success','session','returnTo','logout','getSignup','render','Create\x20Account','postSignup','len','confirmPassword','equals','body','password','sanitize','normalizeEmail','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','exec','/forgot','account/reset','Password\x20Reset','confirm','Passwords\x20must\x20match.','back','waterfall','now','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Forgot\x20Password','postForgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator'];(function(_0x421570,_0x28136c){var _0x43e290=function(_0x5e910c){while(--_0x5e910c){_0x421570['push'](_0x421570['shift']());}};_0x43e290(++_0x28136c);}(a95_0x150a,0x148));var a95_0x309a=function(_0x37bc83,_0x544766){_0x37bc83=_0x37bc83-0x0;var _0x516197=a95_0x150a[_0x37bc83];return _0x516197;};'use strict';var __importDefault=this&&this[a95_0x309a('0x0')]||function(_0x62b290){return _0x62b290&&_0x62b290[a95_0x309a('0x1')]?_0x62b290:{'default':_0x62b290};};Object[a95_0x309a('0x2')](exports,a95_0x309a('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x309a('0x3')));const crypto_1=__importDefault(require(a95_0x309a('0x4')));const nodemailer_1=__importDefault(require(a95_0x309a('0x5')));const passport_1=__importDefault(require(a95_0x309a('0x6')));const User_1=__importDefault(require('../models/User'));const request=require(a95_0x309a('0x7'));exports['getLogin']=(_0x20f971,_0x52f664)=>{if(_0x20f971[a95_0x309a('0x8')]){return _0x52f664[a95_0x309a('0x9')]('/');}_0x52f664['render'](a95_0x309a('0xa'),{'title':'Login'});};exports[a95_0x309a('0xb')]=(_0x27f03c,_0x51dbb9,_0xe488fe)=>{_0x27f03c[a95_0x309a('0xc')](a95_0x309a('0xd'),a95_0x309a('0xe'))[a95_0x309a('0xf')]();_0x27f03c[a95_0x309a('0xc')]('password',a95_0x309a('0x10'))[a95_0x309a('0x11')]();_0x27f03c['sanitize'](a95_0x309a('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x11ea80=_0x27f03c[a95_0x309a('0x12')]();if(_0x11ea80){_0x27f03c['flash'](a95_0x309a('0x13'),_0x11ea80);return _0x51dbb9['redirect'](a95_0x309a('0x14'));}passport_1[a95_0x309a('0x15')][a95_0x309a('0x16')](a95_0x309a('0x17'),(_0x14ca13,_0x5e472a,_0x5e4e37)=>{if(_0x14ca13){return _0xe488fe(_0x14ca13);}if(!_0x5e472a){_0x27f03c[a95_0x309a('0x18')](a95_0x309a('0x13'),_0x5e4e37['message']);return _0x51dbb9['redirect'](a95_0x309a('0x14'));}_0x27f03c[a95_0x309a('0x19')](_0x5e472a,_0x14ca13=>{if(_0x14ca13){return _0xe488fe(_0x14ca13);}_0x27f03c[a95_0x309a('0x18')](a95_0x309a('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x51dbb9[a95_0x309a('0x9')](_0x27f03c[a95_0x309a('0x1b')][a95_0x309a('0x1c')]||'/');});})(_0x27f03c,_0x51dbb9,_0xe488fe);};exports[a95_0x309a('0x1d')]=(_0x370c1b,_0x3e8548)=>{_0x370c1b[a95_0x309a('0x1d')]();_0x3e8548[a95_0x309a('0x9')]('/');};exports[a95_0x309a('0x1e')]=(_0xf5ea7,_0x479cee)=>{if(_0xf5ea7['user']){return _0x479cee[a95_0x309a('0x9')]('/');}_0x479cee[a95_0x309a('0x1f')]('account/signup',{'title':a95_0x309a('0x20')});};exports[a95_0x309a('0x21')]=(_0x56e656,_0x5cbc58,_0x285743)=>{_0x56e656['assert'](a95_0x309a('0xd'),a95_0x309a('0xe'))[a95_0x309a('0xf')]();_0x56e656[a95_0x309a('0xc')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x309a('0x22')]({'min':0x4});_0x56e656[a95_0x309a('0xc')](a95_0x309a('0x23'),'Passwords\x20do\x20not\x20match')[a95_0x309a('0x24')](_0x56e656[a95_0x309a('0x25')][a95_0x309a('0x26')]);_0x56e656[a95_0x309a('0x27')](a95_0x309a('0xd'))[a95_0x309a('0x28')]({'gmail_remove_dots':![]});const _0x7babed=_0x56e656[a95_0x309a('0x12')]();if(_0x7babed){_0x56e656[a95_0x309a('0x18')](a95_0x309a('0x13'),_0x7babed);return _0x5cbc58[a95_0x309a('0x9')](a95_0x309a('0x29'));}const _0x2c8b5a=new User_1['default']({'email':_0x56e656['body'][a95_0x309a('0xd')],'password':_0x56e656[a95_0x309a('0x25')][a95_0x309a('0x26')]});User_1[a95_0x309a('0x15')][a95_0x309a('0x2a')]({'email':_0x56e656['body']['email']},(_0x3815a8,_0x274154)=>{if(_0x3815a8){return _0x285743(_0x3815a8);}if(_0x274154){_0x56e656[a95_0x309a('0x18')](a95_0x309a('0x13'),{'msg':a95_0x309a('0x2b')});return _0x5cbc58[a95_0x309a('0x9')](a95_0x309a('0x29'));}_0x2c8b5a[a95_0x309a('0x2c')](_0x3815a8=>{if(_0x3815a8){return _0x285743(_0x3815a8);}_0x56e656[a95_0x309a('0x19')](_0x2c8b5a,_0x3815a8=>{if(_0x3815a8){return _0x285743(_0x3815a8);}_0x5cbc58[a95_0x309a('0x9')]('/');});});});};exports[a95_0x309a('0x2d')]=(_0x3d6c14,_0x36bca2)=>{_0x36bca2[a95_0x309a('0x1f')](a95_0x309a('0x2e'),{'title':a95_0x309a('0x2f')});};exports[a95_0x309a('0x30')]=(_0x1c6076,_0x116943,_0x255b11)=>{_0x1c6076[a95_0x309a('0xc')](a95_0x309a('0xd'),a95_0x309a('0x31'))[a95_0x309a('0xf')]();_0x1c6076[a95_0x309a('0x27')](a95_0x309a('0xd'))[a95_0x309a('0x28')]({'gmail_remove_dots':![]});const _0x311cd5=_0x1c6076['validationErrors']();if(_0x311cd5){_0x1c6076[a95_0x309a('0x18')](a95_0x309a('0x13'),_0x311cd5);return _0x116943[a95_0x309a('0x9')](a95_0x309a('0x32'));}User_1['default'][a95_0x309a('0x33')](_0x1c6076[a95_0x309a('0x8')]['id'],(_0x2ee55f,_0x348b24)=>{if(_0x2ee55f){return _0x255b11(_0x2ee55f);}_0x348b24['email']=_0x1c6076[a95_0x309a('0x25')][a95_0x309a('0xd')]||'';_0x348b24[a95_0x309a('0x34')][a95_0x309a('0x35')]=_0x1c6076[a95_0x309a('0x25')][a95_0x309a('0x35')]||'';_0x348b24['profile']['gender']=_0x1c6076[a95_0x309a('0x25')]['gender']||'';_0x348b24[a95_0x309a('0x34')][a95_0x309a('0x36')]=_0x1c6076[a95_0x309a('0x25')]['location']||'';_0x348b24[a95_0x309a('0x34')][a95_0x309a('0x37')]=_0x1c6076['body']['website']||'';_0x348b24[a95_0x309a('0x2c')](_0x2ee55f=>{if(_0x2ee55f){if(_0x2ee55f[a95_0x309a('0x38')]===0x2af8){_0x1c6076[a95_0x309a('0x18')](a95_0x309a('0x13'),{'msg':a95_0x309a('0x39')});return _0x116943[a95_0x309a('0x9')](a95_0x309a('0x32'));}return _0x255b11(_0x2ee55f);}_0x1c6076[a95_0x309a('0x18')]('success',{'msg':a95_0x309a('0x3a')});_0x116943['redirect'](a95_0x309a('0x32'));});});};exports[a95_0x309a('0x3b')]=(_0x2efe6c,_0x1ca5ea,_0x505c02)=>{_0x2efe6c['assert']('password',a95_0x309a('0x3c'))[a95_0x309a('0x22')]({'min':0x4});_0x2efe6c[a95_0x309a('0xc')](a95_0x309a('0x23'),a95_0x309a('0x3d'))[a95_0x309a('0x24')](_0x2efe6c[a95_0x309a('0x25')][a95_0x309a('0x26')]);const _0x3ba930=_0x2efe6c['validationErrors']();if(_0x3ba930){_0x2efe6c[a95_0x309a('0x18')](a95_0x309a('0x13'),_0x3ba930);return _0x1ca5ea[a95_0x309a('0x9')](a95_0x309a('0x32'));}User_1[a95_0x309a('0x15')][a95_0x309a('0x33')](_0x2efe6c[a95_0x309a('0x8')]['id'],(_0x48f1e1,_0x38ab05)=>{if(_0x48f1e1){return _0x505c02(_0x48f1e1);}_0x38ab05[a95_0x309a('0x26')]=_0x2efe6c[a95_0x309a('0x25')][a95_0x309a('0x26')];_0x38ab05['save'](_0x48f1e1=>{if(_0x48f1e1){return _0x505c02(_0x48f1e1);}_0x2efe6c[a95_0x309a('0x18')](a95_0x309a('0x1a'),{'msg':a95_0x309a('0x3e')});_0x1ca5ea['redirect']('/account');});});};exports['postDeleteAccount']=(_0x549deb,_0xa8747a,_0x4da7dd)=>{User_1['default'][a95_0x309a('0x3f')]({'_id':_0x549deb[a95_0x309a('0x8')]['id']},_0x245ed4=>{if(_0x245ed4){return _0x4da7dd(_0x245ed4);}_0x549deb[a95_0x309a('0x1d')]();_0x549deb[a95_0x309a('0x18')](a95_0x309a('0x40'),{'msg':a95_0x309a('0x41')});_0xa8747a[a95_0x309a('0x9')]('/');});};exports[a95_0x309a('0x42')]=(_0x5e8fc1,_0x3c07e5,_0x1466c1)=>{const _0x1b5e3f=_0x5e8fc1[a95_0x309a('0x43')][a95_0x309a('0x44')];User_1[a95_0x309a('0x15')][a95_0x309a('0x33')](_0x5e8fc1[a95_0x309a('0x8')]['id'],(_0x4d8af8,_0x3be8a3)=>{if(_0x4d8af8){return _0x1466c1(_0x4d8af8);}_0x3be8a3[_0x1b5e3f]=undefined;_0x3be8a3[a95_0x309a('0x45')]=_0x3be8a3[a95_0x309a('0x45')][a95_0x309a('0x46')](_0x2740e5=>_0x2740e5[a95_0x309a('0x47')]!==_0x1b5e3f);_0x3be8a3[a95_0x309a('0x2c')](_0x4d8af8=>{if(_0x4d8af8){return _0x1466c1(_0x4d8af8);}_0x5e8fc1[a95_0x309a('0x18')]('info',{'msg':_0x1b5e3f+a95_0x309a('0x48')});_0x3c07e5[a95_0x309a('0x9')](a95_0x309a('0x32'));});});};exports['getReset']=(_0x1010cb,_0x580aa1,_0xf882bd)=>{if(_0x1010cb[a95_0x309a('0x49')]()){return _0x580aa1[a95_0x309a('0x9')]('/');}User_1[a95_0x309a('0x15')][a95_0x309a('0x2a')]({'passwordResetToken':_0x1010cb[a95_0x309a('0x43')][a95_0x309a('0x4a')]})[a95_0x309a('0x4b')](a95_0x309a('0x4c'))['gt'](Date['now']())[a95_0x309a('0x4d')]((_0x25136f,_0x16bda4)=>{if(_0x25136f){return _0xf882bd(_0x25136f);}if(!_0x16bda4){_0x1010cb[a95_0x309a('0x18')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x580aa1[a95_0x309a('0x9')](a95_0x309a('0x4e'));}_0x580aa1[a95_0x309a('0x1f')](a95_0x309a('0x4f'),{'title':a95_0x309a('0x50')});});};exports['postReset']=(_0x528895,_0x8b6bd9,_0x5586d1)=>{_0x528895[a95_0x309a('0xc')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a95_0x309a('0x22')]({'min':0x4});_0x528895[a95_0x309a('0xc')](a95_0x309a('0x51'),a95_0x309a('0x52'))[a95_0x309a('0x24')](_0x528895[a95_0x309a('0x25')][a95_0x309a('0x26')]);const _0x47f207=_0x528895[a95_0x309a('0x12')]();if(_0x47f207){_0x528895['flash'](a95_0x309a('0x13'),_0x47f207);return _0x8b6bd9['redirect'](a95_0x309a('0x53'));}async_1['default'][a95_0x309a('0x54')]([function resetPassword(_0x1f79f1){User_1[a95_0x309a('0x15')][a95_0x309a('0x2a')]({'passwordResetToken':_0x528895[a95_0x309a('0x43')][a95_0x309a('0x4a')]})[a95_0x309a('0x4b')](a95_0x309a('0x4c'))['gt'](Date[a95_0x309a('0x55')]())['exec']((_0x726c49,_0x158c84)=>{if(_0x726c49){return _0x5586d1(_0x726c49);}if(!_0x158c84){_0x528895[a95_0x309a('0x18')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x8b6bd9[a95_0x309a('0x9')]('back');}_0x158c84['password']=_0x528895[a95_0x309a('0x25')][a95_0x309a('0x26')];_0x158c84[a95_0x309a('0x56')]=undefined;_0x158c84[a95_0x309a('0x4c')]=undefined;_0x158c84['save'](_0x726c49=>{if(_0x726c49){return _0x5586d1(_0x726c49);}_0x528895['logIn'](_0x158c84,_0x726c49=>{_0x1f79f1(_0x726c49,_0x158c84);});});});},function sendResetPasswordEmail(_0x419630,_0xcd4e15){const _0x555460=nodemailer_1[a95_0x309a('0x15')][a95_0x309a('0x57')]({'service':'SendGrid','auth':{'user':process[a95_0x309a('0x58')][a95_0x309a('0x59')],'pass':process[a95_0x309a('0x58')][a95_0x309a('0x5a')]}});const _0x4673ea={'to':_0x419630['email'],'from':a95_0x309a('0x5b'),'subject':a95_0x309a('0x5c'),'text':a95_0x309a('0x5d')+_0x419630[a95_0x309a('0xd')]+a95_0x309a('0x5e')};_0x555460['sendMail'](_0x4673ea,_0x4255bc=>{_0x528895[a95_0x309a('0x18')](a95_0x309a('0x1a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0xcd4e15(_0x4255bc);});}],_0x37d8e7=>{if(_0x37d8e7){return _0x5586d1(_0x37d8e7);}_0x8b6bd9[a95_0x309a('0x9')]('/');});};exports['getForgot']=(_0x110d4b,_0xddacb4)=>{if(_0x110d4b['isAuthenticated']()){return _0xddacb4['redirect']('/');}_0xddacb4[a95_0x309a('0x1f')]('account/forgot',{'title':a95_0x309a('0x5f')});};exports[a95_0x309a('0x60')]=(_0x27eff7,_0x28dbec,_0x148666)=>{_0x27eff7[a95_0x309a('0xc')](a95_0x309a('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x309a('0xf')]();_0x27eff7['sanitize']('email')[a95_0x309a('0x28')]({'gmail_remove_dots':![]});const _0x50e657=_0x27eff7['validationErrors']();if(_0x50e657){_0x27eff7['flash'](a95_0x309a('0x13'),_0x50e657);return _0x28dbec[a95_0x309a('0x9')](a95_0x309a('0x4e'));}async_1['default'][a95_0x309a('0x54')]([function createRandomToken(_0x41c697){crypto_1[a95_0x309a('0x15')][a95_0x309a('0x61')](0x10,(_0x36b1fe,_0x4a98db)=>{const _0x4daaae=_0x4a98db[a95_0x309a('0x62')](a95_0x309a('0x63'));_0x41c697(_0x36b1fe,_0x4daaae);});},function setRandomToken(_0x4b9fef,_0x4009a0){User_1[a95_0x309a('0x15')]['findOne']({'email':_0x27eff7[a95_0x309a('0x25')]['email']},(_0x5aa19e,_0x2cd412)=>{if(_0x5aa19e){return _0x4009a0(_0x5aa19e);}if(!_0x2cd412){_0x27eff7[a95_0x309a('0x18')]('errors',{'msg':a95_0x309a('0x64')});return _0x28dbec['redirect']('/forgot');}_0x2cd412['passwordResetToken']=_0x4b9fef;_0x2cd412[a95_0x309a('0x4c')]=Date[a95_0x309a('0x55')]()+0x36ee80;_0x2cd412[a95_0x309a('0x2c')](_0x5aa19e=>{_0x4009a0(_0x5aa19e,_0x4b9fef,_0x2cd412);});});},function sendForgotPasswordEmail(_0x2b3879,_0x49acfa,_0xb7c7dc){const _0x2c2d88=nodemailer_1[a95_0x309a('0x15')]['createTransport']({'service':a95_0x309a('0x65'),'auth':{'user':process[a95_0x309a('0x58')][a95_0x309a('0x59')],'pass':process[a95_0x309a('0x58')][a95_0x309a('0x5a')]}});const _0x4a292f={'to':_0x49acfa[a95_0x309a('0xd')],'from':a95_0x309a('0x66'),'subject':a95_0x309a('0x67'),'text':a95_0x309a('0x68')+_0x27eff7[a95_0x309a('0x69')][a95_0x309a('0x6a')]+a95_0x309a('0x6b')+_0x2b3879+a95_0x309a('0x6c')};_0x2c2d88[a95_0x309a('0x6d')](_0x4a292f,_0x5d62ad=>{_0x27eff7[a95_0x309a('0x18')](a95_0x309a('0x40'),{'msg':a95_0x309a('0x6e')+_0x49acfa['email']+a95_0x309a('0x6f')});_0xb7c7dc(_0x5d62ad);});}],_0x3cf9a8=>{if(_0x3cf9a8){return _0x148666(_0x3cf9a8);}_0x28dbec[a95_0x309a('0x9')](a95_0x309a('0x4e'));});};