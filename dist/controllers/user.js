var a91_0x1c10=['__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','redirect','account/login','assert','email','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','/login','default','local','flash','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','render','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','confirmPassword','equals','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','/account','findById','gender','profile','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Password\x20has\x20been\x20changed.','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','now','exec','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','waterfall','where','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','passwordResetToken','passwordResetExpires','createTransport','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','/forgot','randomBytes','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','__importDefault'];(function(_0x41bdc0,_0x3b9b28){var _0x2f8a0c=function(_0x2436d9){while(--_0x2436d9){_0x41bdc0['push'](_0x41bdc0['shift']());}};_0x2f8a0c(++_0x3b9b28);}(a91_0x1c10,0x140));var a91_0x2907=function(_0xe5942f,_0x3bceaf){_0xe5942f=_0xe5942f-0x0;var _0x271d32=a91_0x1c10[_0xe5942f];return _0x271d32;};'use strict';var __importDefault=this&&this[a91_0x2907('0x0')]||function(_0x5b0140){return _0x5b0140&&_0x5b0140[a91_0x2907('0x1')]?_0x5b0140:{'default':_0x5b0140};};Object[a91_0x2907('0x2')](exports,a91_0x2907('0x1'),{'value':!![]});const async_1=__importDefault(require(a91_0x2907('0x3')));const crypto_1=__importDefault(require(a91_0x2907('0x4')));const nodemailer_1=__importDefault(require(a91_0x2907('0x5')));const passport_1=__importDefault(require(a91_0x2907('0x6')));const User_1=__importDefault(require(a91_0x2907('0x7')));const request=require(a91_0x2907('0x8'));exports[a91_0x2907('0x9')]=(_0x55c43a,_0x4e588d)=>{if(_0x55c43a['user']){return _0x4e588d[a91_0x2907('0xa')]('/');}_0x4e588d['render'](a91_0x2907('0xb'),{'title':'Login'});};exports['postLogin']=(_0x597c8e,_0x101499,_0xa4aab8)=>{_0x597c8e[a91_0x2907('0xc')](a91_0x2907('0xd'),'Email\x20is\x20not\x20valid')[a91_0x2907('0xe')]();_0x597c8e[a91_0x2907('0xc')](a91_0x2907('0xf'),a91_0x2907('0x10'))[a91_0x2907('0x11')]();_0x597c8e[a91_0x2907('0x12')](a91_0x2907('0xd'))[a91_0x2907('0x13')]({'gmail_remove_dots':![]});const _0x498a6c=_0x597c8e[a91_0x2907('0x14')]();if(_0x498a6c){_0x597c8e['flash'](a91_0x2907('0x15'),_0x498a6c);return _0x101499[a91_0x2907('0xa')](a91_0x2907('0x16'));}passport_1[a91_0x2907('0x17')]['authenticate'](a91_0x2907('0x18'),(_0x100db5,_0x2c8a54,_0x3cad3f)=>{if(_0x100db5){return _0xa4aab8(_0x100db5);}if(!_0x2c8a54){_0x597c8e[a91_0x2907('0x19')](a91_0x2907('0x15'),_0x3cad3f[a91_0x2907('0x1a')]);return _0x101499[a91_0x2907('0xa')](a91_0x2907('0x16'));}_0x597c8e[a91_0x2907('0x1b')](_0x2c8a54,_0x100db5=>{if(_0x100db5){return _0xa4aab8(_0x100db5);}_0x597c8e[a91_0x2907('0x19')]('success',{'msg':a91_0x2907('0x1c')});_0x101499['redirect'](_0x597c8e[a91_0x2907('0x1d')][a91_0x2907('0x1e')]||'/');});})(_0x597c8e,_0x101499,_0xa4aab8);};exports[a91_0x2907('0x1f')]=(_0x4e3696,_0x21f248)=>{_0x4e3696['logout']();_0x21f248[a91_0x2907('0xa')]('/');};exports[a91_0x2907('0x20')]=(_0xb60436,_0x59e7e1)=>{if(_0xb60436[a91_0x2907('0x21')]){return _0x59e7e1[a91_0x2907('0xa')]('/');}_0x59e7e1[a91_0x2907('0x22')](a91_0x2907('0x23'),{'title':a91_0x2907('0x24')});};exports[a91_0x2907('0x25')]=(_0x131a0a,_0x4e521f,_0x47fb07)=>{_0x131a0a[a91_0x2907('0xc')](a91_0x2907('0xd'),a91_0x2907('0x26'))[a91_0x2907('0xe')]();_0x131a0a[a91_0x2907('0xc')](a91_0x2907('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x131a0a[a91_0x2907('0xc')](a91_0x2907('0x27'),'Passwords\x20do\x20not\x20match')[a91_0x2907('0x28')](_0x131a0a[a91_0x2907('0x29')][a91_0x2907('0xf')]);_0x131a0a[a91_0x2907('0x12')](a91_0x2907('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x570328=_0x131a0a['validationErrors']();if(_0x570328){_0x131a0a[a91_0x2907('0x19')](a91_0x2907('0x15'),_0x570328);return _0x4e521f[a91_0x2907('0xa')](a91_0x2907('0x2a'));}const _0xf4f0d6=new User_1['default']({'email':_0x131a0a[a91_0x2907('0x29')]['email'],'password':_0x131a0a[a91_0x2907('0x29')][a91_0x2907('0xf')]});User_1[a91_0x2907('0x17')]['findOne']({'email':_0x131a0a[a91_0x2907('0x29')][a91_0x2907('0xd')]},(_0x2ac79e,_0x5f29fb)=>{if(_0x2ac79e){return _0x47fb07(_0x2ac79e);}if(_0x5f29fb){_0x131a0a[a91_0x2907('0x19')](a91_0x2907('0x15'),{'msg':a91_0x2907('0x2b')});return _0x4e521f[a91_0x2907('0xa')]('/signup');}_0xf4f0d6[a91_0x2907('0x2c')](_0x2ac79e=>{if(_0x2ac79e){return _0x47fb07(_0x2ac79e);}_0x131a0a['logIn'](_0xf4f0d6,_0x2ac79e=>{if(_0x2ac79e){return _0x47fb07(_0x2ac79e);}_0x4e521f[a91_0x2907('0xa')]('/');});});});};exports[a91_0x2907('0x2d')]=(_0x2432fd,_0x2f78c3)=>{_0x2f78c3[a91_0x2907('0x22')](a91_0x2907('0x2e'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x56bb27,_0x574cfb,_0x3bedc4)=>{_0x56bb27['assert'](a91_0x2907('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a91_0x2907('0xe')]();_0x56bb27[a91_0x2907('0x12')](a91_0x2907('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x525637=_0x56bb27[a91_0x2907('0x14')]();if(_0x525637){_0x56bb27[a91_0x2907('0x19')](a91_0x2907('0x15'),_0x525637);return _0x574cfb[a91_0x2907('0xa')](a91_0x2907('0x2f'));}User_1[a91_0x2907('0x17')][a91_0x2907('0x30')](_0x56bb27[a91_0x2907('0x21')]['id'],(_0x527a17,_0x40859f)=>{if(_0x527a17){return _0x3bedc4(_0x527a17);}_0x40859f[a91_0x2907('0xd')]=_0x56bb27[a91_0x2907('0x29')][a91_0x2907('0xd')]||'';_0x40859f['profile']['name']=_0x56bb27[a91_0x2907('0x29')]['name']||'';_0x40859f['profile']['gender']=_0x56bb27[a91_0x2907('0x29')][a91_0x2907('0x31')]||'';_0x40859f[a91_0x2907('0x32')][a91_0x2907('0x33')]=_0x56bb27[a91_0x2907('0x29')][a91_0x2907('0x33')]||'';_0x40859f[a91_0x2907('0x32')][a91_0x2907('0x34')]=_0x56bb27[a91_0x2907('0x29')][a91_0x2907('0x34')]||'';_0x40859f['save'](_0x527a17=>{if(_0x527a17){if(_0x527a17[a91_0x2907('0x35')]===0x2af8){_0x56bb27[a91_0x2907('0x19')]('errors',{'msg':a91_0x2907('0x36')});return _0x574cfb[a91_0x2907('0xa')](a91_0x2907('0x2f'));}return _0x3bedc4(_0x527a17);}_0x56bb27[a91_0x2907('0x19')](a91_0x2907('0x37'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x574cfb[a91_0x2907('0xa')]('/account');});});};exports[a91_0x2907('0x38')]=(_0x2f528a,_0x3e970b,_0x43d813)=>{_0x2f528a[a91_0x2907('0xc')](a91_0x2907('0xf'),a91_0x2907('0x39'))['len']({'min':0x4});_0x2f528a[a91_0x2907('0xc')]('confirmPassword','Passwords\x20do\x20not\x20match')[a91_0x2907('0x28')](_0x2f528a[a91_0x2907('0x29')]['password']);const _0x45b36b=_0x2f528a[a91_0x2907('0x14')]();if(_0x45b36b){_0x2f528a[a91_0x2907('0x19')](a91_0x2907('0x15'),_0x45b36b);return _0x3e970b['redirect'](a91_0x2907('0x2f'));}User_1[a91_0x2907('0x17')][a91_0x2907('0x30')](_0x2f528a['user']['id'],(_0xd439,_0x3017dc)=>{if(_0xd439){return _0x43d813(_0xd439);}_0x3017dc[a91_0x2907('0xf')]=_0x2f528a['body'][a91_0x2907('0xf')];_0x3017dc[a91_0x2907('0x2c')](_0xd439=>{if(_0xd439){return _0x43d813(_0xd439);}_0x2f528a[a91_0x2907('0x19')]('success',{'msg':a91_0x2907('0x3a')});_0x3e970b['redirect']('/account');});});};exports['postDeleteAccount']=(_0x3e87f2,_0x595f05,_0xdd7f40)=>{User_1[a91_0x2907('0x17')][a91_0x2907('0x3b')]({'_id':_0x3e87f2[a91_0x2907('0x21')]['id']},_0x2ae940=>{if(_0x2ae940){return _0xdd7f40(_0x2ae940);}_0x3e87f2[a91_0x2907('0x1f')]();_0x3e87f2['flash']('info',{'msg':a91_0x2907('0x3c')});_0x595f05[a91_0x2907('0xa')]('/');});};exports[a91_0x2907('0x3d')]=(_0x2bc0d8,_0x332cb2,_0x4be4d7)=>{const _0x37b753=_0x2bc0d8[a91_0x2907('0x3e')][a91_0x2907('0x3f')];User_1[a91_0x2907('0x17')]['findById'](_0x2bc0d8[a91_0x2907('0x21')]['id'],(_0x58524e,_0x2ef6d5)=>{if(_0x58524e){return _0x4be4d7(_0x58524e);}_0x2ef6d5[_0x37b753]=undefined;_0x2ef6d5[a91_0x2907('0x40')]=_0x2ef6d5['tokens'][a91_0x2907('0x41')](_0x1b302e=>_0x1b302e[a91_0x2907('0x42')]!==_0x37b753);_0x2ef6d5[a91_0x2907('0x2c')](_0x58524e=>{if(_0x58524e){return _0x4be4d7(_0x58524e);}_0x2bc0d8['flash'](a91_0x2907('0x43'),{'msg':_0x37b753+a91_0x2907('0x44')});_0x332cb2['redirect'](a91_0x2907('0x2f'));});});};exports[a91_0x2907('0x45')]=(_0x3d3788,_0x2058dc,_0x228a8d)=>{if(_0x3d3788[a91_0x2907('0x46')]()){return _0x2058dc[a91_0x2907('0xa')]('/');}User_1[a91_0x2907('0x17')][a91_0x2907('0x47')]({'passwordResetToken':_0x3d3788['params'][a91_0x2907('0x48')]})['where']('passwordResetExpires')['gt'](Date[a91_0x2907('0x49')]())[a91_0x2907('0x4a')]((_0x235343,_0x132996)=>{if(_0x235343){return _0x228a8d(_0x235343);}if(!_0x132996){_0x3d3788['flash'](a91_0x2907('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2058dc[a91_0x2907('0xa')]('/forgot');}_0x2058dc[a91_0x2907('0x22')]('account/reset',{'title':a91_0x2907('0x4b')});});};exports[a91_0x2907('0x4c')]=(_0x52c018,_0xfde568,_0x48cc01)=>{_0x52c018[a91_0x2907('0xc')](a91_0x2907('0xf'),a91_0x2907('0x4d'))[a91_0x2907('0x4e')]({'min':0x4});_0x52c018[a91_0x2907('0xc')](a91_0x2907('0x4f'),'Passwords\x20must\x20match.')[a91_0x2907('0x28')](_0x52c018['body'][a91_0x2907('0xf')]);const _0x188571=_0x52c018[a91_0x2907('0x14')]();if(_0x188571){_0x52c018[a91_0x2907('0x19')](a91_0x2907('0x15'),_0x188571);return _0xfde568['redirect']('back');}async_1[a91_0x2907('0x17')][a91_0x2907('0x50')]([function resetPassword(_0x44bd14){User_1[a91_0x2907('0x17')][a91_0x2907('0x47')]({'passwordResetToken':_0x52c018[a91_0x2907('0x3e')][a91_0x2907('0x48')]})[a91_0x2907('0x51')]('passwordResetExpires')['gt'](Date[a91_0x2907('0x49')]())[a91_0x2907('0x4a')]((_0x23207d,_0xebee74)=>{if(_0x23207d){return _0x48cc01(_0x23207d);}if(!_0xebee74){_0x52c018[a91_0x2907('0x19')](a91_0x2907('0x15'),{'msg':a91_0x2907('0x52')});return _0xfde568[a91_0x2907('0xa')](a91_0x2907('0x53'));}_0xebee74[a91_0x2907('0xf')]=_0x52c018[a91_0x2907('0x29')][a91_0x2907('0xf')];_0xebee74[a91_0x2907('0x54')]=undefined;_0xebee74[a91_0x2907('0x55')]=undefined;_0xebee74[a91_0x2907('0x2c')](_0x23207d=>{if(_0x23207d){return _0x48cc01(_0x23207d);}_0x52c018[a91_0x2907('0x1b')](_0xebee74,_0x23207d=>{_0x44bd14(_0x23207d,_0xebee74);});});});},function sendResetPasswordEmail(_0x27af9c,_0x55a873){const _0x1fe9f2=nodemailer_1[a91_0x2907('0x17')][a91_0x2907('0x56')]({'service':a91_0x2907('0x57'),'auth':{'user':process['env'][a91_0x2907('0x58')],'pass':process[a91_0x2907('0x59')][a91_0x2907('0x5a')]}});const _0x59dbf7={'to':_0x27af9c[a91_0x2907('0xd')],'from':a91_0x2907('0x5b'),'subject':a91_0x2907('0x5c'),'text':a91_0x2907('0x5d')+_0x27af9c['email']+a91_0x2907('0x5e')};_0x1fe9f2[a91_0x2907('0x5f')](_0x59dbf7,_0x561ab3=>{_0x52c018[a91_0x2907('0x19')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x55a873(_0x561ab3);});}],_0x12d79a=>{if(_0x12d79a){return _0x48cc01(_0x12d79a);}_0xfde568['redirect']('/');});};exports['getForgot']=(_0x489533,_0x838f02)=>{if(_0x489533[a91_0x2907('0x46')]()){return _0x838f02[a91_0x2907('0xa')]('/');}_0x838f02[a91_0x2907('0x22')](a91_0x2907('0x60'),{'title':a91_0x2907('0x61')});};exports[a91_0x2907('0x62')]=(_0x1dcf9e,_0x2f9364,_0x44eedd)=>{_0x1dcf9e[a91_0x2907('0xc')](a91_0x2907('0xd'),a91_0x2907('0x63'))['isEmail']();_0x1dcf9e[a91_0x2907('0x12')]('email')[a91_0x2907('0x13')]({'gmail_remove_dots':![]});const _0x22bb55=_0x1dcf9e['validationErrors']();if(_0x22bb55){_0x1dcf9e[a91_0x2907('0x19')](a91_0x2907('0x15'),_0x22bb55);return _0x2f9364[a91_0x2907('0xa')](a91_0x2907('0x64'));}async_1[a91_0x2907('0x17')][a91_0x2907('0x50')]([function createRandomToken(_0x12f669){crypto_1[a91_0x2907('0x17')][a91_0x2907('0x65')](0x10,(_0x4b9cec,_0x4ecf22)=>{const _0x5931a9=_0x4ecf22['toString']('hex');_0x12f669(_0x4b9cec,_0x5931a9);});},function setRandomToken(_0x5fb93b,_0x57c591){User_1[a91_0x2907('0x17')][a91_0x2907('0x47')]({'email':_0x1dcf9e['body'][a91_0x2907('0xd')]},(_0x594987,_0x4007cd)=>{if(_0x594987){return _0x57c591(_0x594987);}if(!_0x4007cd){_0x1dcf9e[a91_0x2907('0x19')](a91_0x2907('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x2f9364[a91_0x2907('0xa')](a91_0x2907('0x64'));}_0x4007cd[a91_0x2907('0x54')]=_0x5fb93b;_0x4007cd['passwordResetExpires']=Date['now']()+0x36ee80;_0x4007cd[a91_0x2907('0x2c')](_0x594987=>{_0x57c591(_0x594987,_0x5fb93b,_0x4007cd);});});},function sendForgotPasswordEmail(_0x2b10d4,_0x22b33a,_0x4dd60b){const _0x4dcc97=nodemailer_1[a91_0x2907('0x17')][a91_0x2907('0x56')]({'service':a91_0x2907('0x57'),'auth':{'user':process[a91_0x2907('0x59')]['SENDGRID_USER'],'pass':process[a91_0x2907('0x59')][a91_0x2907('0x5a')]}});const _0x3dcb08={'to':_0x22b33a['email'],'from':a91_0x2907('0x66'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a91_0x2907('0x67')+_0x1dcf9e[a91_0x2907('0x68')][a91_0x2907('0x69')]+a91_0x2907('0x6a')+_0x2b10d4+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x4dcc97[a91_0x2907('0x5f')](_0x3dcb08,_0x1c1db5=>{_0x1dcf9e[a91_0x2907('0x19')]('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x22b33a['email']+'\x20with\x20further\x20instructions.'});_0x4dd60b(_0x1c1db5);});}],_0x4aed46=>{if(_0x4aed46){return _0x44eedd(_0x4aed46);}_0x2f9364[a91_0x2907('0xa')](a91_0x2907('0x64'));});};