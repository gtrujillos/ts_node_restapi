var a201_0x2918=['sanitize','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','website','code','success','postUpdatePassword','equals','Password\x20has\x20been\x20changed.','remove','getOauthUnlink','params','provider','tokens','filter','kind','info','getReset','isAuthenticated','where','passwordResetExpires','now','Password\x20Reset','postReset','confirm','Passwords\x20must\x20match.','waterfall','token','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','getForgot','account/forgot','postForgot','/forgot','randomBytes','toString','hex','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator','getLogin','user','render','account/login','Login','email','Email\x20is\x20not\x20valid','isEmail','assert','notEmpty','normalizeEmail','flash','errors','redirect','default','authenticate','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','body'];(function(_0x164101,_0x175e75){var _0xab0975=function(_0x31ed3a){while(--_0x31ed3a){_0x164101['push'](_0x164101['shift']());}};_0xab0975(++_0x175e75);}(a201_0x2918,0xaf));var a201_0x2b09=function(_0x330af9,_0x27f57d){_0x330af9=_0x330af9-0x0;var _0x15d11c=a201_0x2918[_0x330af9];return _0x15d11c;};'use strict';var __importDefault=this&&this[a201_0x2b09('0x0')]||function(_0x94268f){return _0x94268f&&_0x94268f[a201_0x2b09('0x1')]?_0x94268f:{'default':_0x94268f};};Object[a201_0x2b09('0x2')](exports,a201_0x2b09('0x1'),{'value':!![]});const async_1=__importDefault(require(a201_0x2b09('0x3')));const crypto_1=__importDefault(require(a201_0x2b09('0x4')));const nodemailer_1=__importDefault(require(a201_0x2b09('0x5')));const passport_1=__importDefault(require(a201_0x2b09('0x6')));const User_1=__importDefault(require('../models/User'));const request=require(a201_0x2b09('0x7'));exports[a201_0x2b09('0x8')]=(_0x1831f0,_0xb72ba1)=>{if(_0x1831f0[a201_0x2b09('0x9')]){return _0xb72ba1['redirect']('/');}_0xb72ba1[a201_0x2b09('0xa')](a201_0x2b09('0xb'),{'title':a201_0x2b09('0xc')});};exports['postLogin']=(_0x3a7874,_0x4cdfec,_0x29a74e)=>{_0x3a7874['assert'](a201_0x2b09('0xd'),a201_0x2b09('0xe'))[a201_0x2b09('0xf')]();_0x3a7874[a201_0x2b09('0x10')]('password','Password\x20cannot\x20be\x20blank')[a201_0x2b09('0x11')]();_0x3a7874['sanitize'](a201_0x2b09('0xd'))[a201_0x2b09('0x12')]({'gmail_remove_dots':![]});const _0x49dfef=_0x3a7874['validationErrors']();if(_0x49dfef){_0x3a7874[a201_0x2b09('0x13')](a201_0x2b09('0x14'),_0x49dfef);return _0x4cdfec[a201_0x2b09('0x15')]('/login');}passport_1[a201_0x2b09('0x16')][a201_0x2b09('0x17')]('local',(_0x223249,_0x1dfd35,_0x5305aa)=>{if(_0x223249){return _0x29a74e(_0x223249);}if(!_0x1dfd35){_0x3a7874[a201_0x2b09('0x13')](a201_0x2b09('0x14'),_0x5305aa[a201_0x2b09('0x18')]);return _0x4cdfec[a201_0x2b09('0x15')]('/login');}_0x3a7874[a201_0x2b09('0x19')](_0x1dfd35,_0x223249=>{if(_0x223249){return _0x29a74e(_0x223249);}_0x3a7874[a201_0x2b09('0x13')]('success',{'msg':a201_0x2b09('0x1a')});_0x4cdfec[a201_0x2b09('0x15')](_0x3a7874[a201_0x2b09('0x1b')][a201_0x2b09('0x1c')]||'/');});})(_0x3a7874,_0x4cdfec,_0x29a74e);};exports[a201_0x2b09('0x1d')]=(_0x4ab2ff,_0x27c457)=>{_0x4ab2ff[a201_0x2b09('0x1d')]();_0x27c457[a201_0x2b09('0x15')]('/');};exports[a201_0x2b09('0x1e')]=(_0x43ac61,_0x6b157)=>{if(_0x43ac61['user']){return _0x6b157[a201_0x2b09('0x15')]('/');}_0x6b157['render'](a201_0x2b09('0x1f'),{'title':a201_0x2b09('0x20')});};exports[a201_0x2b09('0x21')]=(_0x5e6ecd,_0x42ca83,_0x1d3f00)=>{_0x5e6ecd[a201_0x2b09('0x10')](a201_0x2b09('0xd'),a201_0x2b09('0xe'))['isEmail']();_0x5e6ecd[a201_0x2b09('0x10')](a201_0x2b09('0x22'),a201_0x2b09('0x23'))['len']({'min':0x4});_0x5e6ecd['assert'](a201_0x2b09('0x24'),a201_0x2b09('0x25'))['equals'](_0x5e6ecd[a201_0x2b09('0x26')]['password']);_0x5e6ecd[a201_0x2b09('0x27')](a201_0x2b09('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2332f3=_0x5e6ecd[a201_0x2b09('0x28')]();if(_0x2332f3){_0x5e6ecd['flash'](a201_0x2b09('0x14'),_0x2332f3);return _0x42ca83[a201_0x2b09('0x15')](a201_0x2b09('0x29'));}const _0x42e29d=new User_1[(a201_0x2b09('0x16'))]({'email':_0x5e6ecd[a201_0x2b09('0x26')][a201_0x2b09('0xd')],'password':_0x5e6ecd['body'][a201_0x2b09('0x22')]});User_1[a201_0x2b09('0x16')][a201_0x2b09('0x2a')]({'email':_0x5e6ecd[a201_0x2b09('0x26')][a201_0x2b09('0xd')]},(_0x28d296,_0x3e847c)=>{if(_0x28d296){return _0x1d3f00(_0x28d296);}if(_0x3e847c){_0x5e6ecd[a201_0x2b09('0x13')](a201_0x2b09('0x14'),{'msg':a201_0x2b09('0x2b')});return _0x42ca83['redirect'](a201_0x2b09('0x29'));}_0x42e29d[a201_0x2b09('0x2c')](_0x28d296=>{if(_0x28d296){return _0x1d3f00(_0x28d296);}_0x5e6ecd[a201_0x2b09('0x19')](_0x42e29d,_0x28d296=>{if(_0x28d296){return _0x1d3f00(_0x28d296);}_0x42ca83[a201_0x2b09('0x15')]('/');});});});};exports[a201_0x2b09('0x2d')]=(_0x453ac2,_0x1aaa2c)=>{_0x1aaa2c[a201_0x2b09('0xa')](a201_0x2b09('0x2e'),{'title':a201_0x2b09('0x2f')});};exports['postUpdateProfile']=(_0x6b22d0,_0x201fd3,_0xb4b0d)=>{_0x6b22d0[a201_0x2b09('0x10')](a201_0x2b09('0xd'),a201_0x2b09('0x30'))[a201_0x2b09('0xf')]();_0x6b22d0[a201_0x2b09('0x27')](a201_0x2b09('0xd'))[a201_0x2b09('0x12')]({'gmail_remove_dots':![]});const _0x1dd354=_0x6b22d0[a201_0x2b09('0x28')]();if(_0x1dd354){_0x6b22d0[a201_0x2b09('0x13')](a201_0x2b09('0x14'),_0x1dd354);return _0x201fd3[a201_0x2b09('0x15')](a201_0x2b09('0x31'));}User_1['default'][a201_0x2b09('0x32')](_0x6b22d0[a201_0x2b09('0x9')]['id'],(_0x562afe,_0x3683ab)=>{if(_0x562afe){return _0xb4b0d(_0x562afe);}_0x3683ab[a201_0x2b09('0xd')]=_0x6b22d0[a201_0x2b09('0x26')][a201_0x2b09('0xd')]||'';_0x3683ab['profile']['name']=_0x6b22d0[a201_0x2b09('0x26')][a201_0x2b09('0x33')]||'';_0x3683ab[a201_0x2b09('0x34')]['gender']=_0x6b22d0[a201_0x2b09('0x26')][a201_0x2b09('0x35')]||'';_0x3683ab[a201_0x2b09('0x34')]['location']=_0x6b22d0[a201_0x2b09('0x26')]['location']||'';_0x3683ab['profile'][a201_0x2b09('0x36')]=_0x6b22d0[a201_0x2b09('0x26')][a201_0x2b09('0x36')]||'';_0x3683ab[a201_0x2b09('0x2c')](_0x562afe=>{if(_0x562afe){if(_0x562afe[a201_0x2b09('0x37')]===0x2af8){_0x6b22d0['flash'](a201_0x2b09('0x14'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x201fd3['redirect'](a201_0x2b09('0x31'));}return _0xb4b0d(_0x562afe);}_0x6b22d0[a201_0x2b09('0x13')](a201_0x2b09('0x38'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x201fd3['redirect'](a201_0x2b09('0x31'));});});};exports[a201_0x2b09('0x39')]=(_0x44225e,_0x24e614,_0x2da5fb)=>{_0x44225e[a201_0x2b09('0x10')](a201_0x2b09('0x22'),a201_0x2b09('0x23'))['len']({'min':0x4});_0x44225e[a201_0x2b09('0x10')](a201_0x2b09('0x24'),a201_0x2b09('0x25'))[a201_0x2b09('0x3a')](_0x44225e[a201_0x2b09('0x26')]['password']);const _0x1ed998=_0x44225e[a201_0x2b09('0x28')]();if(_0x1ed998){_0x44225e['flash'](a201_0x2b09('0x14'),_0x1ed998);return _0x24e614[a201_0x2b09('0x15')](a201_0x2b09('0x31'));}User_1[a201_0x2b09('0x16')][a201_0x2b09('0x32')](_0x44225e['user']['id'],(_0x4fc0f2,_0x5101c3)=>{if(_0x4fc0f2){return _0x2da5fb(_0x4fc0f2);}_0x5101c3[a201_0x2b09('0x22')]=_0x44225e['body'][a201_0x2b09('0x22')];_0x5101c3[a201_0x2b09('0x2c')](_0x4fc0f2=>{if(_0x4fc0f2){return _0x2da5fb(_0x4fc0f2);}_0x44225e[a201_0x2b09('0x13')](a201_0x2b09('0x38'),{'msg':a201_0x2b09('0x3b')});_0x24e614[a201_0x2b09('0x15')](a201_0x2b09('0x31'));});});};exports['postDeleteAccount']=(_0x34b25e,_0x5eaa14,_0x2e4005)=>{User_1['default'][a201_0x2b09('0x3c')]({'_id':_0x34b25e[a201_0x2b09('0x9')]['id']},_0x2de566=>{if(_0x2de566){return _0x2e4005(_0x2de566);}_0x34b25e[a201_0x2b09('0x1d')]();_0x34b25e[a201_0x2b09('0x13')]('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x5eaa14['redirect']('/');});};exports[a201_0x2b09('0x3d')]=(_0x3c7317,_0x37aea7,_0x10f37b)=>{const _0xbf7fd6=_0x3c7317[a201_0x2b09('0x3e')][a201_0x2b09('0x3f')];User_1[a201_0x2b09('0x16')][a201_0x2b09('0x32')](_0x3c7317[a201_0x2b09('0x9')]['id'],(_0x1e3fd0,_0x4f628e)=>{if(_0x1e3fd0){return _0x10f37b(_0x1e3fd0);}_0x4f628e[_0xbf7fd6]=undefined;_0x4f628e[a201_0x2b09('0x40')]=_0x4f628e['tokens'][a201_0x2b09('0x41')](_0x3151a4=>_0x3151a4[a201_0x2b09('0x42')]!==_0xbf7fd6);_0x4f628e[a201_0x2b09('0x2c')](_0x1e3fd0=>{if(_0x1e3fd0){return _0x10f37b(_0x1e3fd0);}_0x3c7317[a201_0x2b09('0x13')](a201_0x2b09('0x43'),{'msg':_0xbf7fd6+'\x20account\x20has\x20been\x20unlinked.'});_0x37aea7['redirect'](a201_0x2b09('0x31'));});});};exports[a201_0x2b09('0x44')]=(_0xad4536,_0x1f6cf0,_0x3a4ed5)=>{if(_0xad4536[a201_0x2b09('0x45')]()){return _0x1f6cf0[a201_0x2b09('0x15')]('/');}User_1[a201_0x2b09('0x16')][a201_0x2b09('0x2a')]({'passwordResetToken':_0xad4536[a201_0x2b09('0x3e')]['token']})[a201_0x2b09('0x46')](a201_0x2b09('0x47'))['gt'](Date[a201_0x2b09('0x48')]())['exec']((_0x54bfe7,_0x4610c4)=>{if(_0x54bfe7){return _0x3a4ed5(_0x54bfe7);}if(!_0x4610c4){_0xad4536[a201_0x2b09('0x13')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x1f6cf0[a201_0x2b09('0x15')]('/forgot');}_0x1f6cf0[a201_0x2b09('0xa')]('account/reset',{'title':a201_0x2b09('0x49')});});};exports[a201_0x2b09('0x4a')]=(_0x32929d,_0x31ca95,_0x13fac3)=>{_0x32929d['assert'](a201_0x2b09('0x22'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')['len']({'min':0x4});_0x32929d[a201_0x2b09('0x10')](a201_0x2b09('0x4b'),a201_0x2b09('0x4c'))[a201_0x2b09('0x3a')](_0x32929d[a201_0x2b09('0x26')][a201_0x2b09('0x22')]);const _0x11e6e3=_0x32929d['validationErrors']();if(_0x11e6e3){_0x32929d['flash'](a201_0x2b09('0x14'),_0x11e6e3);return _0x31ca95[a201_0x2b09('0x15')]('back');}async_1['default'][a201_0x2b09('0x4d')]([function resetPassword(_0x4990a6){User_1[a201_0x2b09('0x16')]['findOne']({'passwordResetToken':_0x32929d[a201_0x2b09('0x3e')][a201_0x2b09('0x4e')]})[a201_0x2b09('0x46')](a201_0x2b09('0x47'))['gt'](Date[a201_0x2b09('0x48')]())[a201_0x2b09('0x4f')]((_0x25fcc9,_0x27d0e7)=>{if(_0x25fcc9){return _0x13fac3(_0x25fcc9);}if(!_0x27d0e7){_0x32929d[a201_0x2b09('0x13')](a201_0x2b09('0x14'),{'msg':a201_0x2b09('0x50')});return _0x31ca95[a201_0x2b09('0x15')](a201_0x2b09('0x51'));}_0x27d0e7[a201_0x2b09('0x22')]=_0x32929d['body'][a201_0x2b09('0x22')];_0x27d0e7[a201_0x2b09('0x52')]=undefined;_0x27d0e7['passwordResetExpires']=undefined;_0x27d0e7[a201_0x2b09('0x2c')](_0x25fcc9=>{if(_0x25fcc9){return _0x13fac3(_0x25fcc9);}_0x32929d[a201_0x2b09('0x19')](_0x27d0e7,_0x25fcc9=>{_0x4990a6(_0x25fcc9,_0x27d0e7);});});});},function sendResetPasswordEmail(_0x35de70,_0x5147c9){const _0x115bc9=nodemailer_1['default'][a201_0x2b09('0x53')]({'service':a201_0x2b09('0x54'),'auth':{'user':process[a201_0x2b09('0x55')]['SENDGRID_USER'],'pass':process['env'][a201_0x2b09('0x56')]}});const _0x22b777={'to':_0x35de70['email'],'from':a201_0x2b09('0x57'),'subject':a201_0x2b09('0x58'),'text':a201_0x2b09('0x59')+_0x35de70[a201_0x2b09('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x115bc9[a201_0x2b09('0x5a')](_0x22b777,_0x10585c=>{_0x32929d[a201_0x2b09('0x13')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x5147c9(_0x10585c);});}],_0x11bd24=>{if(_0x11bd24){return _0x13fac3(_0x11bd24);}_0x31ca95[a201_0x2b09('0x15')]('/');});};exports[a201_0x2b09('0x5b')]=(_0x599974,_0xf4b6c7)=>{if(_0x599974[a201_0x2b09('0x45')]()){return _0xf4b6c7[a201_0x2b09('0x15')]('/');}_0xf4b6c7[a201_0x2b09('0xa')](a201_0x2b09('0x5c'),{'title':'Forgot\x20Password'});};exports[a201_0x2b09('0x5d')]=(_0x128ebc,_0x382e59,_0xf8be8d)=>{_0x128ebc[a201_0x2b09('0x10')](a201_0x2b09('0xd'),a201_0x2b09('0x30'))[a201_0x2b09('0xf')]();_0x128ebc[a201_0x2b09('0x27')](a201_0x2b09('0xd'))[a201_0x2b09('0x12')]({'gmail_remove_dots':![]});const _0x140f92=_0x128ebc['validationErrors']();if(_0x140f92){_0x128ebc[a201_0x2b09('0x13')](a201_0x2b09('0x14'),_0x140f92);return _0x382e59[a201_0x2b09('0x15')](a201_0x2b09('0x5e'));}async_1[a201_0x2b09('0x16')]['waterfall']([function createRandomToken(_0x1eab5d){crypto_1[a201_0x2b09('0x16')][a201_0x2b09('0x5f')](0x10,(_0x49ad98,_0x906c27)=>{const _0x447dc9=_0x906c27[a201_0x2b09('0x60')](a201_0x2b09('0x61'));_0x1eab5d(_0x49ad98,_0x447dc9);});},function setRandomToken(_0x2044ff,_0x521321){User_1[a201_0x2b09('0x16')][a201_0x2b09('0x2a')]({'email':_0x128ebc[a201_0x2b09('0x26')]['email']},(_0x205046,_0x530485)=>{if(_0x205046){return _0x521321(_0x205046);}if(!_0x530485){_0x128ebc[a201_0x2b09('0x13')](a201_0x2b09('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x382e59[a201_0x2b09('0x15')](a201_0x2b09('0x5e'));}_0x530485[a201_0x2b09('0x52')]=_0x2044ff;_0x530485['passwordResetExpires']=Date[a201_0x2b09('0x48')]()+0x36ee80;_0x530485[a201_0x2b09('0x2c')](_0x205046=>{_0x521321(_0x205046,_0x2044ff,_0x530485);});});},function sendForgotPasswordEmail(_0x447da5,_0x2f1021,_0x20bfff){const _0x575bb1=nodemailer_1[a201_0x2b09('0x16')][a201_0x2b09('0x53')]({'service':a201_0x2b09('0x54'),'auth':{'user':process[a201_0x2b09('0x55')][a201_0x2b09('0x62')],'pass':process[a201_0x2b09('0x55')][a201_0x2b09('0x56')]}});const _0x2e126b={'to':_0x2f1021['email'],'from':a201_0x2b09('0x63'),'subject':a201_0x2b09('0x64'),'text':a201_0x2b09('0x65')+_0x128ebc[a201_0x2b09('0x66')]['host']+a201_0x2b09('0x67')+_0x447da5+a201_0x2b09('0x68')};_0x575bb1[a201_0x2b09('0x5a')](_0x2e126b,_0x127184=>{_0x128ebc['flash'](a201_0x2b09('0x43'),{'msg':a201_0x2b09('0x69')+_0x2f1021[a201_0x2b09('0xd')]+a201_0x2b09('0x6a')});_0x20bfff(_0x127184);});}],_0x3ad559=>{if(_0x3ad559){return _0xf8be8d(_0x3ad559);}_0x382e59[a201_0x2b09('0x15')](a201_0x2b09('0x5e'));});};