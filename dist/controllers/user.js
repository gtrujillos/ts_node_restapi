var a95_0x144b=['message','/login','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','email','validationErrors','/signup','findOne','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','isEmail','findById','user','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','crypto','../models/User','getLogin','redirect','render','Login','Email\x20is\x20not\x20valid','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','default','errors'];(function(_0x41b5ff,_0xff9ae8){var _0x3e8ff1=function(_0x567b53){while(--_0x567b53){_0x41b5ff['push'](_0x41b5ff['shift']());}};_0x3e8ff1(++_0xff9ae8);}(a95_0x144b,0x131));var a95_0x3ac0=function(_0x4d012e,_0x102f64){_0x4d012e=_0x4d012e-0x0;var _0x57f766=a95_0x144b[_0x4d012e];return _0x57f766;};'use strict';var __importDefault=this&&this[a95_0x3ac0('0x0')]||function(_0xa21688){return _0xa21688&&_0xa21688[a95_0x3ac0('0x1')]?_0xa21688:{'default':_0xa21688};};Object[a95_0x3ac0('0x2')](exports,a95_0x3ac0('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a95_0x3ac0('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a95_0x3ac0('0x4')));const request=require('express-validator');exports[a95_0x3ac0('0x5')]=(_0x5e1d3d,_0xc03a59)=>{if(_0x5e1d3d['user']){return _0xc03a59[a95_0x3ac0('0x6')]('/');}_0xc03a59[a95_0x3ac0('0x7')]('account/login',{'title':a95_0x3ac0('0x8')});};exports['postLogin']=(_0x3e230d,_0x1d40a8,_0x3d6de9)=>{_0x3e230d['assert']('email',a95_0x3ac0('0x9'))['isEmail']();_0x3e230d[a95_0x3ac0('0xa')](a95_0x3ac0('0xb'),a95_0x3ac0('0xc'))[a95_0x3ac0('0xd')]();_0x3e230d[a95_0x3ac0('0xe')]('email')[a95_0x3ac0('0xf')]({'gmail_remove_dots':![]});const _0x3da4c1=_0x3e230d['validationErrors']();if(_0x3da4c1){_0x3e230d[a95_0x3ac0('0x10')]('errors',_0x3da4c1);return _0x1d40a8['redirect']('/login');}passport_1[a95_0x3ac0('0x11')]['authenticate']('local',(_0x427a18,_0x364108,_0x65743c)=>{if(_0x427a18){return _0x3d6de9(_0x427a18);}if(!_0x364108){_0x3e230d[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),_0x65743c[a95_0x3ac0('0x13')]);return _0x1d40a8[a95_0x3ac0('0x6')](a95_0x3ac0('0x14'));}_0x3e230d[a95_0x3ac0('0x15')](_0x364108,_0x427a18=>{if(_0x427a18){return _0x3d6de9(_0x427a18);}_0x3e230d[a95_0x3ac0('0x10')](a95_0x3ac0('0x16'),{'msg':a95_0x3ac0('0x17')});_0x1d40a8[a95_0x3ac0('0x6')](_0x3e230d[a95_0x3ac0('0x18')][a95_0x3ac0('0x19')]||'/');});})(_0x3e230d,_0x1d40a8,_0x3d6de9);};exports[a95_0x3ac0('0x1a')]=(_0x409163,_0x3e54a0)=>{_0x409163[a95_0x3ac0('0x1a')]();_0x3e54a0[a95_0x3ac0('0x6')]('/');};exports[a95_0x3ac0('0x1b')]=(_0x1f315d,_0x2324cf)=>{if(_0x1f315d['user']){return _0x2324cf[a95_0x3ac0('0x6')]('/');}_0x2324cf[a95_0x3ac0('0x7')](a95_0x3ac0('0x1c'),{'title':a95_0x3ac0('0x1d')});};exports[a95_0x3ac0('0x1e')]=(_0x1e5174,_0x359148,_0xd48965)=>{_0x1e5174['assert']('email',a95_0x3ac0('0x9'))['isEmail']();_0x1e5174[a95_0x3ac0('0xa')]('password',a95_0x3ac0('0x1f'))[a95_0x3ac0('0x20')]({'min':0x4});_0x1e5174[a95_0x3ac0('0xa')](a95_0x3ac0('0x21'),a95_0x3ac0('0x22'))[a95_0x3ac0('0x23')](_0x1e5174[a95_0x3ac0('0x24')][a95_0x3ac0('0xb')]);_0x1e5174['sanitize'](a95_0x3ac0('0x25'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x379045=_0x1e5174[a95_0x3ac0('0x26')]();if(_0x379045){_0x1e5174[a95_0x3ac0('0x10')]('errors',_0x379045);return _0x359148['redirect'](a95_0x3ac0('0x27'));}const _0xe3ca63=new User_1['default']({'email':_0x1e5174[a95_0x3ac0('0x24')][a95_0x3ac0('0x25')],'password':_0x1e5174[a95_0x3ac0('0x24')][a95_0x3ac0('0xb')]});User_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x28')]({'email':_0x1e5174['body'][a95_0x3ac0('0x25')]},(_0x2f8141,_0x9fa963)=>{if(_0x2f8141){return _0xd48965(_0x2f8141);}if(_0x9fa963){_0x1e5174['flash']('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x359148[a95_0x3ac0('0x6')]('/signup');}_0xe3ca63[a95_0x3ac0('0x29')](_0x2f8141=>{if(_0x2f8141){return _0xd48965(_0x2f8141);}_0x1e5174['logIn'](_0xe3ca63,_0x2f8141=>{if(_0x2f8141){return _0xd48965(_0x2f8141);}_0x359148[a95_0x3ac0('0x6')]('/');});});});};exports[a95_0x3ac0('0x2a')]=(_0x26ec07,_0x3b07dd)=>{_0x3b07dd['render'](a95_0x3ac0('0x2b'),{'title':a95_0x3ac0('0x2c')});};exports[a95_0x3ac0('0x2d')]=(_0x30b5ce,_0x5e5352,_0x245573)=>{_0x30b5ce[a95_0x3ac0('0xa')](a95_0x3ac0('0x25'),a95_0x3ac0('0x2e'))[a95_0x3ac0('0x2f')]();_0x30b5ce['sanitize']('email')[a95_0x3ac0('0xf')]({'gmail_remove_dots':![]});const _0x4bcacd=_0x30b5ce[a95_0x3ac0('0x26')]();if(_0x4bcacd){_0x30b5ce[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),_0x4bcacd);return _0x5e5352[a95_0x3ac0('0x6')]('/account');}User_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x30')](_0x30b5ce[a95_0x3ac0('0x31')]['id'],(_0x2c5340,_0x32a0f9)=>{if(_0x2c5340){return _0x245573(_0x2c5340);}_0x32a0f9[a95_0x3ac0('0x25')]=_0x30b5ce[a95_0x3ac0('0x24')]['email']||'';_0x32a0f9[a95_0x3ac0('0x32')][a95_0x3ac0('0x33')]=_0x30b5ce[a95_0x3ac0('0x24')][a95_0x3ac0('0x33')]||'';_0x32a0f9[a95_0x3ac0('0x32')]['gender']=_0x30b5ce[a95_0x3ac0('0x24')][a95_0x3ac0('0x34')]||'';_0x32a0f9['profile']['location']=_0x30b5ce[a95_0x3ac0('0x24')][a95_0x3ac0('0x35')]||'';_0x32a0f9[a95_0x3ac0('0x32')]['website']=_0x30b5ce['body'][a95_0x3ac0('0x36')]||'';_0x32a0f9[a95_0x3ac0('0x29')](_0x2c5340=>{if(_0x2c5340){if(_0x2c5340[a95_0x3ac0('0x37')]===0x2af8){_0x30b5ce['flash']('errors',{'msg':a95_0x3ac0('0x38')});return _0x5e5352[a95_0x3ac0('0x6')](a95_0x3ac0('0x39'));}return _0x245573(_0x2c5340);}_0x30b5ce['flash'](a95_0x3ac0('0x16'),{'msg':a95_0x3ac0('0x3a')});_0x5e5352[a95_0x3ac0('0x6')](a95_0x3ac0('0x39'));});});};exports['postUpdatePassword']=(_0x59b0fd,_0x35d1fd,_0x40d467)=>{_0x59b0fd[a95_0x3ac0('0xa')](a95_0x3ac0('0xb'),a95_0x3ac0('0x1f'))[a95_0x3ac0('0x20')]({'min':0x4});_0x59b0fd[a95_0x3ac0('0xa')](a95_0x3ac0('0x21'),a95_0x3ac0('0x22'))[a95_0x3ac0('0x23')](_0x59b0fd[a95_0x3ac0('0x24')][a95_0x3ac0('0xb')]);const _0x347825=_0x59b0fd[a95_0x3ac0('0x26')]();if(_0x347825){_0x59b0fd[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),_0x347825);return _0x35d1fd[a95_0x3ac0('0x6')]('/account');}User_1['default'][a95_0x3ac0('0x30')](_0x59b0fd[a95_0x3ac0('0x31')]['id'],(_0x56630c,_0x31a4f2)=>{if(_0x56630c){return _0x40d467(_0x56630c);}_0x31a4f2[a95_0x3ac0('0xb')]=_0x59b0fd[a95_0x3ac0('0x24')]['password'];_0x31a4f2['save'](_0x56630c=>{if(_0x56630c){return _0x40d467(_0x56630c);}_0x59b0fd[a95_0x3ac0('0x10')]('success',{'msg':a95_0x3ac0('0x3b')});_0x35d1fd[a95_0x3ac0('0x6')](a95_0x3ac0('0x39'));});});};exports[a95_0x3ac0('0x3c')]=(_0x35e58c,_0x539e52,_0x1a998e)=>{User_1['default'][a95_0x3ac0('0x3d')]({'_id':_0x35e58c['user']['id']},_0x3edcbe=>{if(_0x3edcbe){return _0x1a998e(_0x3edcbe);}_0x35e58c[a95_0x3ac0('0x1a')]();_0x35e58c[a95_0x3ac0('0x10')](a95_0x3ac0('0x3e'),{'msg':a95_0x3ac0('0x3f')});_0x539e52[a95_0x3ac0('0x6')]('/');});};exports[a95_0x3ac0('0x40')]=(_0x488bd0,_0x5807e7,_0x56cbb2)=>{const _0x3356e2=_0x488bd0[a95_0x3ac0('0x41')][a95_0x3ac0('0x42')];User_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x30')](_0x488bd0[a95_0x3ac0('0x31')]['id'],(_0x1c12bb,_0x21cd95)=>{if(_0x1c12bb){return _0x56cbb2(_0x1c12bb);}_0x21cd95[_0x3356e2]=undefined;_0x21cd95[a95_0x3ac0('0x43')]=_0x21cd95[a95_0x3ac0('0x43')]['filter'](_0x5497fc=>_0x5497fc['kind']!==_0x3356e2);_0x21cd95['save'](_0x1c12bb=>{if(_0x1c12bb){return _0x56cbb2(_0x1c12bb);}_0x488bd0['flash']('info',{'msg':_0x3356e2+a95_0x3ac0('0x44')});_0x5807e7[a95_0x3ac0('0x6')]('/account');});});};exports[a95_0x3ac0('0x45')]=(_0x87b05a,_0x12e1b1,_0x1132f3)=>{if(_0x87b05a[a95_0x3ac0('0x46')]()){return _0x12e1b1[a95_0x3ac0('0x6')]('/');}User_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x28')]({'passwordResetToken':_0x87b05a[a95_0x3ac0('0x41')][a95_0x3ac0('0x47')]})[a95_0x3ac0('0x48')](a95_0x3ac0('0x49'))['gt'](Date[a95_0x3ac0('0x4a')]())[a95_0x3ac0('0x4b')]((_0x3e8c5c,_0x5fafea)=>{if(_0x3e8c5c){return _0x1132f3(_0x3e8c5c);}if(!_0x5fafea){_0x87b05a[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),{'msg':a95_0x3ac0('0x4c')});return _0x12e1b1[a95_0x3ac0('0x6')](a95_0x3ac0('0x4d'));}_0x12e1b1[a95_0x3ac0('0x7')](a95_0x3ac0('0x4e'),{'title':a95_0x3ac0('0x4f')});});};exports[a95_0x3ac0('0x50')]=(_0x54b396,_0x2f934a,_0x1f129a)=>{_0x54b396[a95_0x3ac0('0xa')](a95_0x3ac0('0xb'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a95_0x3ac0('0x20')]({'min':0x4});_0x54b396['assert'](a95_0x3ac0('0x51'),a95_0x3ac0('0x52'))[a95_0x3ac0('0x23')](_0x54b396['body']['password']);const _0x4cdac8=_0x54b396['validationErrors']();if(_0x4cdac8){_0x54b396[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),_0x4cdac8);return _0x2f934a[a95_0x3ac0('0x6')](a95_0x3ac0('0x53'));}async_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x54')]([function resetPassword(_0x3b28e9){User_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x28')]({'passwordResetToken':_0x54b396[a95_0x3ac0('0x41')]['token']})[a95_0x3ac0('0x48')](a95_0x3ac0('0x49'))['gt'](Date[a95_0x3ac0('0x4a')]())[a95_0x3ac0('0x4b')]((_0x29d787,_0x4db6ba)=>{if(_0x29d787){return _0x1f129a(_0x29d787);}if(!_0x4db6ba){_0x54b396[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),{'msg':a95_0x3ac0('0x4c')});return _0x2f934a[a95_0x3ac0('0x6')](a95_0x3ac0('0x53'));}_0x4db6ba[a95_0x3ac0('0xb')]=_0x54b396[a95_0x3ac0('0x24')][a95_0x3ac0('0xb')];_0x4db6ba[a95_0x3ac0('0x55')]=undefined;_0x4db6ba[a95_0x3ac0('0x49')]=undefined;_0x4db6ba['save'](_0x29d787=>{if(_0x29d787){return _0x1f129a(_0x29d787);}_0x54b396[a95_0x3ac0('0x15')](_0x4db6ba,_0x29d787=>{_0x3b28e9(_0x29d787,_0x4db6ba);});});});},function sendResetPasswordEmail(_0x3b1bf0,_0x5b7b79){const _0x2fcc13=nodemailer_1[a95_0x3ac0('0x11')]['createTransport']({'service':a95_0x3ac0('0x56'),'auth':{'user':process['env'][a95_0x3ac0('0x57')],'pass':process[a95_0x3ac0('0x58')][a95_0x3ac0('0x59')]}});const _0x3005c5={'to':_0x3b1bf0[a95_0x3ac0('0x25')],'from':a95_0x3ac0('0x5a'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a95_0x3ac0('0x5b')+_0x3b1bf0[a95_0x3ac0('0x25')]+a95_0x3ac0('0x5c')};_0x2fcc13[a95_0x3ac0('0x5d')](_0x3005c5,_0x107f41=>{_0x54b396[a95_0x3ac0('0x10')](a95_0x3ac0('0x16'),{'msg':a95_0x3ac0('0x5e')});_0x5b7b79(_0x107f41);});}],_0x202060=>{if(_0x202060){return _0x1f129a(_0x202060);}_0x2f934a[a95_0x3ac0('0x6')]('/');});};exports[a95_0x3ac0('0x5f')]=(_0x48b419,_0x54e87f)=>{if(_0x48b419[a95_0x3ac0('0x46')]()){return _0x54e87f[a95_0x3ac0('0x6')]('/');}_0x54e87f[a95_0x3ac0('0x7')](a95_0x3ac0('0x60'),{'title':a95_0x3ac0('0x61')});};exports[a95_0x3ac0('0x62')]=(_0x1f06a6,_0x2c6427,_0x146506)=>{_0x1f06a6[a95_0x3ac0('0xa')]('email',a95_0x3ac0('0x2e'))['isEmail']();_0x1f06a6[a95_0x3ac0('0xe')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x51090e=_0x1f06a6['validationErrors']();if(_0x51090e){_0x1f06a6[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),_0x51090e);return _0x2c6427[a95_0x3ac0('0x6')](a95_0x3ac0('0x4d'));}async_1['default'][a95_0x3ac0('0x54')]([function createRandomToken(_0x4dd496){crypto_1['default'][a95_0x3ac0('0x63')](0x10,(_0x12aa57,_0x560a88)=>{const _0x265b1b=_0x560a88['toString'](a95_0x3ac0('0x64'));_0x4dd496(_0x12aa57,_0x265b1b);});},function setRandomToken(_0xbd8063,_0x50f108){User_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x28')]({'email':_0x1f06a6[a95_0x3ac0('0x24')]['email']},(_0xafbd6,_0x45423d)=>{if(_0xafbd6){return _0x50f108(_0xafbd6);}if(!_0x45423d){_0x1f06a6[a95_0x3ac0('0x10')](a95_0x3ac0('0x12'),{'msg':a95_0x3ac0('0x65')});return _0x2c6427['redirect']('/forgot');}_0x45423d[a95_0x3ac0('0x55')]=_0xbd8063;_0x45423d['passwordResetExpires']=Date[a95_0x3ac0('0x4a')]()+0x36ee80;_0x45423d[a95_0x3ac0('0x29')](_0xafbd6=>{_0x50f108(_0xafbd6,_0xbd8063,_0x45423d);});});},function sendForgotPasswordEmail(_0xc094b7,_0x142544,_0x248719){const _0x741ffc=nodemailer_1[a95_0x3ac0('0x11')][a95_0x3ac0('0x66')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process['env'][a95_0x3ac0('0x59')]}});const _0x12d8dd={'to':_0x142544['email'],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x3ac0('0x67')+_0x1f06a6[a95_0x3ac0('0x68')][a95_0x3ac0('0x69')]+'/reset/'+_0xc094b7+a95_0x3ac0('0x6a')};_0x741ffc[a95_0x3ac0('0x5d')](_0x12d8dd,_0x1d2ab4=>{_0x1f06a6[a95_0x3ac0('0x10')]('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x142544[a95_0x3ac0('0x25')]+a95_0x3ac0('0x6b')});_0x248719(_0x1d2ab4);});}],_0x8aa03b=>{if(_0x8aa03b){return _0x146506(_0x8aa03b);}_0x2c6427[a95_0x3ac0('0x6')](a95_0x3ac0('0x4d'));});};