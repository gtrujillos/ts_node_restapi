var a201_0x3b59=['/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','findOne','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','postForgot','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','../models/User','express-validator','getLogin','user','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','redirect','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','Create\x20Account','postSignup','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','location','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','postDeleteAccount','remove','info','getOauthUnlink','tokens','filter','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'];(function(_0x8d5dc3,_0xa4407d){var _0x50c859=function(_0x3a8bbb){while(--_0x3a8bbb){_0x8d5dc3['push'](_0x8d5dc3['shift']());}};_0x50c859(++_0xa4407d);}(a201_0x3b59,0x1c7));var a201_0x4c98=function(_0x3a78fa,_0x9bde2f){_0x3a78fa=_0x3a78fa-0x0;var _0x1046e6=a201_0x3b59[_0x3a78fa];return _0x1046e6;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1c3377){return _0x1c3377&&_0x1c3377[a201_0x4c98('0x0')]?_0x1c3377:{'default':_0x1c3377};};Object[a201_0x4c98('0x1')](exports,a201_0x4c98('0x0'),{'value':!![]});const async_1=__importDefault(require(a201_0x4c98('0x2')));const crypto_1=__importDefault(require(a201_0x4c98('0x3')));const nodemailer_1=__importDefault(require(a201_0x4c98('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a201_0x4c98('0x5')));const request=require(a201_0x4c98('0x6'));exports[a201_0x4c98('0x7')]=(_0x45c1ab,_0x59f711)=>{if(_0x45c1ab[a201_0x4c98('0x8')]){return _0x59f711['redirect']('/');}_0x59f711[a201_0x4c98('0x9')](a201_0x4c98('0xa'),{'title':a201_0x4c98('0xb')});};exports[a201_0x4c98('0xc')]=(_0x3e43da,_0x15ba45,_0x529d1c)=>{_0x3e43da[a201_0x4c98('0xd')](a201_0x4c98('0xe'),a201_0x4c98('0xf'))[a201_0x4c98('0x10')]();_0x3e43da[a201_0x4c98('0xd')](a201_0x4c98('0x11'),a201_0x4c98('0x12'))['notEmpty']();_0x3e43da[a201_0x4c98('0x13')](a201_0x4c98('0xe'))[a201_0x4c98('0x14')]({'gmail_remove_dots':![]});const _0x343dd0=_0x3e43da[a201_0x4c98('0x15')]();if(_0x343dd0){_0x3e43da[a201_0x4c98('0x16')](a201_0x4c98('0x17'),_0x343dd0);return _0x15ba45[a201_0x4c98('0x18')]('/login');}passport_1[a201_0x4c98('0x19')][a201_0x4c98('0x1a')](a201_0x4c98('0x1b'),(_0x2bb406,_0x7c58b1,_0x35556f)=>{if(_0x2bb406){return _0x529d1c(_0x2bb406);}if(!_0x7c58b1){_0x3e43da['flash'](a201_0x4c98('0x17'),_0x35556f[a201_0x4c98('0x1c')]);return _0x15ba45[a201_0x4c98('0x18')]('/login');}_0x3e43da[a201_0x4c98('0x1d')](_0x7c58b1,_0x2bb406=>{if(_0x2bb406){return _0x529d1c(_0x2bb406);}_0x3e43da['flash'](a201_0x4c98('0x1e'),{'msg':a201_0x4c98('0x1f')});_0x15ba45[a201_0x4c98('0x18')](_0x3e43da[a201_0x4c98('0x20')]['returnTo']||'/');});})(_0x3e43da,_0x15ba45,_0x529d1c);};exports[a201_0x4c98('0x21')]=(_0x3ab9bc,_0x402b6e)=>{_0x3ab9bc[a201_0x4c98('0x21')]();_0x402b6e['redirect']('/');};exports['getSignup']=(_0x321b19,_0x48bd80)=>{if(_0x321b19[a201_0x4c98('0x8')]){return _0x48bd80[a201_0x4c98('0x18')]('/');}_0x48bd80[a201_0x4c98('0x9')]('account/signup',{'title':a201_0x4c98('0x22')});};exports[a201_0x4c98('0x23')]=(_0x54c549,_0x1d8207,_0x76482b)=>{_0x54c549['assert'](a201_0x4c98('0xe'),a201_0x4c98('0xf'))['isEmail']();_0x54c549['assert'](a201_0x4c98('0x11'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x54c549[a201_0x4c98('0xd')](a201_0x4c98('0x24'),a201_0x4c98('0x25'))[a201_0x4c98('0x26')](_0x54c549[a201_0x4c98('0x27')][a201_0x4c98('0x11')]);_0x54c549[a201_0x4c98('0x13')](a201_0x4c98('0xe'))[a201_0x4c98('0x14')]({'gmail_remove_dots':![]});const _0x287a39=_0x54c549[a201_0x4c98('0x15')]();if(_0x287a39){_0x54c549[a201_0x4c98('0x16')](a201_0x4c98('0x17'),_0x287a39);return _0x1d8207[a201_0x4c98('0x18')](a201_0x4c98('0x28'));}const _0x2b7d51=new User_1[(a201_0x4c98('0x19'))]({'email':_0x54c549['body']['email'],'password':_0x54c549['body'][a201_0x4c98('0x11')]});User_1['default']['findOne']({'email':_0x54c549[a201_0x4c98('0x27')][a201_0x4c98('0xe')]},(_0x41af3b,_0x246e3a)=>{if(_0x41af3b){return _0x76482b(_0x41af3b);}if(_0x246e3a){_0x54c549[a201_0x4c98('0x16')]('errors',{'msg':a201_0x4c98('0x29')});return _0x1d8207['redirect'](a201_0x4c98('0x28'));}_0x2b7d51[a201_0x4c98('0x2a')](_0x41af3b=>{if(_0x41af3b){return _0x76482b(_0x41af3b);}_0x54c549['logIn'](_0x2b7d51,_0x41af3b=>{if(_0x41af3b){return _0x76482b(_0x41af3b);}_0x1d8207[a201_0x4c98('0x18')]('/');});});});};exports[a201_0x4c98('0x2b')]=(_0x1e8661,_0x2cc865)=>{_0x2cc865[a201_0x4c98('0x9')](a201_0x4c98('0x2c'),{'title':a201_0x4c98('0x2d')});};exports[a201_0x4c98('0x2e')]=(_0x5e00bc,_0x199964,_0x4467b9)=>{_0x5e00bc[a201_0x4c98('0xd')]('email',a201_0x4c98('0x2f'))[a201_0x4c98('0x10')]();_0x5e00bc[a201_0x4c98('0x13')](a201_0x4c98('0xe'))[a201_0x4c98('0x14')]({'gmail_remove_dots':![]});const _0x4d2160=_0x5e00bc[a201_0x4c98('0x15')]();if(_0x4d2160){_0x5e00bc[a201_0x4c98('0x16')](a201_0x4c98('0x17'),_0x4d2160);return _0x199964[a201_0x4c98('0x18')](a201_0x4c98('0x30'));}User_1[a201_0x4c98('0x19')][a201_0x4c98('0x31')](_0x5e00bc[a201_0x4c98('0x8')]['id'],(_0x1888db,_0x5d4e97)=>{if(_0x1888db){return _0x4467b9(_0x1888db);}_0x5d4e97['email']=_0x5e00bc[a201_0x4c98('0x27')]['email']||'';_0x5d4e97['profile']['name']=_0x5e00bc[a201_0x4c98('0x27')][a201_0x4c98('0x32')]||'';_0x5d4e97['profile']['gender']=_0x5e00bc[a201_0x4c98('0x27')]['gender']||'';_0x5d4e97[a201_0x4c98('0x33')][a201_0x4c98('0x34')]=_0x5e00bc['body']['location']||'';_0x5d4e97[a201_0x4c98('0x33')]['website']=_0x5e00bc[a201_0x4c98('0x27')]['website']||'';_0x5d4e97['save'](_0x1888db=>{if(_0x1888db){if(_0x1888db[a201_0x4c98('0x35')]===0x2af8){_0x5e00bc[a201_0x4c98('0x16')](a201_0x4c98('0x17'),{'msg':a201_0x4c98('0x36')});return _0x199964[a201_0x4c98('0x18')](a201_0x4c98('0x30'));}return _0x4467b9(_0x1888db);}_0x5e00bc[a201_0x4c98('0x16')]('success',{'msg':a201_0x4c98('0x37')});_0x199964[a201_0x4c98('0x18')]('/account');});});};exports[a201_0x4c98('0x38')]=(_0x185bdd,_0x41c8d6,_0x3e7012)=>{_0x185bdd[a201_0x4c98('0xd')]('password',a201_0x4c98('0x39'))[a201_0x4c98('0x3a')]({'min':0x4});_0x185bdd[a201_0x4c98('0xd')](a201_0x4c98('0x24'),'Passwords\x20do\x20not\x20match')[a201_0x4c98('0x26')](_0x185bdd[a201_0x4c98('0x27')][a201_0x4c98('0x11')]);const _0x46aedf=_0x185bdd[a201_0x4c98('0x15')]();if(_0x46aedf){_0x185bdd[a201_0x4c98('0x16')](a201_0x4c98('0x17'),_0x46aedf);return _0x41c8d6[a201_0x4c98('0x18')](a201_0x4c98('0x30'));}User_1[a201_0x4c98('0x19')]['findById'](_0x185bdd[a201_0x4c98('0x8')]['id'],(_0x5cdf57,_0xcc76f5)=>{if(_0x5cdf57){return _0x3e7012(_0x5cdf57);}_0xcc76f5[a201_0x4c98('0x11')]=_0x185bdd['body'][a201_0x4c98('0x11')];_0xcc76f5[a201_0x4c98('0x2a')](_0x5cdf57=>{if(_0x5cdf57){return _0x3e7012(_0x5cdf57);}_0x185bdd[a201_0x4c98('0x16')](a201_0x4c98('0x1e'),{'msg':'Password\x20has\x20been\x20changed.'});_0x41c8d6[a201_0x4c98('0x18')]('/account');});});};exports[a201_0x4c98('0x3b')]=(_0x20119b,_0x54480f,_0x28347d)=>{User_1[a201_0x4c98('0x19')][a201_0x4c98('0x3c')]({'_id':_0x20119b[a201_0x4c98('0x8')]['id']},_0x1dad91=>{if(_0x1dad91){return _0x28347d(_0x1dad91);}_0x20119b['logout']();_0x20119b[a201_0x4c98('0x16')](a201_0x4c98('0x3d'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x54480f['redirect']('/');});};exports[a201_0x4c98('0x3e')]=(_0x14ae1b,_0x29b3a2,_0xc5df06)=>{const _0x270467=_0x14ae1b['params']['provider'];User_1[a201_0x4c98('0x19')][a201_0x4c98('0x31')](_0x14ae1b[a201_0x4c98('0x8')]['id'],(_0x3014c0,_0x487af8)=>{if(_0x3014c0){return _0xc5df06(_0x3014c0);}_0x487af8[_0x270467]=undefined;_0x487af8['tokens']=_0x487af8[a201_0x4c98('0x3f')][a201_0x4c98('0x40')](_0x3cd587=>_0x3cd587['kind']!==_0x270467);_0x487af8['save'](_0x3014c0=>{if(_0x3014c0){return _0xc5df06(_0x3014c0);}_0x14ae1b[a201_0x4c98('0x16')]('info',{'msg':_0x270467+a201_0x4c98('0x41')});_0x29b3a2[a201_0x4c98('0x18')](a201_0x4c98('0x30'));});});};exports[a201_0x4c98('0x42')]=(_0x2573fa,_0x9e95b4,_0x6eb27f)=>{if(_0x2573fa[a201_0x4c98('0x43')]()){return _0x9e95b4[a201_0x4c98('0x18')]('/');}User_1[a201_0x4c98('0x19')]['findOne']({'passwordResetToken':_0x2573fa[a201_0x4c98('0x44')][a201_0x4c98('0x45')]})[a201_0x4c98('0x46')](a201_0x4c98('0x47'))['gt'](Date[a201_0x4c98('0x48')]())[a201_0x4c98('0x49')]((_0x2226db,_0x2a211a)=>{if(_0x2226db){return _0x6eb27f(_0x2226db);}if(!_0x2a211a){_0x2573fa[a201_0x4c98('0x16')](a201_0x4c98('0x17'),{'msg':a201_0x4c98('0x4a')});return _0x9e95b4[a201_0x4c98('0x18')](a201_0x4c98('0x4b'));}_0x9e95b4[a201_0x4c98('0x9')](a201_0x4c98('0x4c'),{'title':a201_0x4c98('0x4d')});});};exports[a201_0x4c98('0x4e')]=(_0x5a04c7,_0x47a6c3,_0x12d71e)=>{_0x5a04c7[a201_0x4c98('0xd')]('password',a201_0x4c98('0x4f'))['len']({'min':0x4});_0x5a04c7['assert'](a201_0x4c98('0x50'),a201_0x4c98('0x51'))[a201_0x4c98('0x26')](_0x5a04c7['body'][a201_0x4c98('0x11')]);const _0x1507cb=_0x5a04c7[a201_0x4c98('0x15')]();if(_0x1507cb){_0x5a04c7[a201_0x4c98('0x16')](a201_0x4c98('0x17'),_0x1507cb);return _0x47a6c3[a201_0x4c98('0x18')](a201_0x4c98('0x52'));}async_1['default'][a201_0x4c98('0x53')]([function resetPassword(_0x53cd08){User_1[a201_0x4c98('0x19')][a201_0x4c98('0x54')]({'passwordResetToken':_0x5a04c7[a201_0x4c98('0x44')][a201_0x4c98('0x45')]})[a201_0x4c98('0x46')](a201_0x4c98('0x47'))['gt'](Date[a201_0x4c98('0x48')]())[a201_0x4c98('0x49')]((_0x2d98c9,_0x104214)=>{if(_0x2d98c9){return _0x12d71e(_0x2d98c9);}if(!_0x104214){_0x5a04c7['flash'](a201_0x4c98('0x17'),{'msg':a201_0x4c98('0x4a')});return _0x47a6c3[a201_0x4c98('0x18')](a201_0x4c98('0x52'));}_0x104214[a201_0x4c98('0x11')]=_0x5a04c7['body'][a201_0x4c98('0x11')];_0x104214[a201_0x4c98('0x55')]=undefined;_0x104214[a201_0x4c98('0x47')]=undefined;_0x104214[a201_0x4c98('0x2a')](_0x2d98c9=>{if(_0x2d98c9){return _0x12d71e(_0x2d98c9);}_0x5a04c7[a201_0x4c98('0x1d')](_0x104214,_0x2d98c9=>{_0x53cd08(_0x2d98c9,_0x104214);});});});},function sendResetPasswordEmail(_0xf260a0,_0x29b6d){const _0x5b92ee=nodemailer_1[a201_0x4c98('0x19')][a201_0x4c98('0x56')]({'service':'SendGrid','auth':{'user':process[a201_0x4c98('0x57')][a201_0x4c98('0x58')],'pass':process['env'][a201_0x4c98('0x59')]}});const _0x25a5a7={'to':_0xf260a0[a201_0x4c98('0xe')],'from':'express-ts@starter.com','subject':a201_0x4c98('0x5a'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0xf260a0[a201_0x4c98('0xe')]+a201_0x4c98('0x5b')};_0x5b92ee[a201_0x4c98('0x5c')](_0x25a5a7,_0x16a79e=>{_0x5a04c7[a201_0x4c98('0x16')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x29b6d(_0x16a79e);});}],_0x2bc824=>{if(_0x2bc824){return _0x12d71e(_0x2bc824);}_0x47a6c3[a201_0x4c98('0x18')]('/');});};exports[a201_0x4c98('0x5d')]=(_0x423dc6,_0x30ac8f)=>{if(_0x423dc6[a201_0x4c98('0x43')]()){return _0x30ac8f[a201_0x4c98('0x18')]('/');}_0x30ac8f['render']('account/forgot',{'title':'Forgot\x20Password'});};exports[a201_0x4c98('0x5e')]=(_0x2a830f,_0x537e35,_0x529513)=>{_0x2a830f[a201_0x4c98('0xd')]('email',a201_0x4c98('0x2f'))[a201_0x4c98('0x10')]();_0x2a830f['sanitize'](a201_0x4c98('0xe'))[a201_0x4c98('0x14')]({'gmail_remove_dots':![]});const _0x29f043=_0x2a830f[a201_0x4c98('0x15')]();if(_0x29f043){_0x2a830f[a201_0x4c98('0x16')]('errors',_0x29f043);return _0x537e35[a201_0x4c98('0x18')](a201_0x4c98('0x4b'));}async_1['default'][a201_0x4c98('0x53')]([function createRandomToken(_0xf830e4){crypto_1[a201_0x4c98('0x19')]['randomBytes'](0x10,(_0x468543,_0x422f1d)=>{const _0x2beeb8=_0x422f1d[a201_0x4c98('0x5f')](a201_0x4c98('0x60'));_0xf830e4(_0x468543,_0x2beeb8);});},function setRandomToken(_0x4983c7,_0x302c6d){User_1[a201_0x4c98('0x19')][a201_0x4c98('0x54')]({'email':_0x2a830f[a201_0x4c98('0x27')][a201_0x4c98('0xe')]},(_0x39dc0e,_0x131800)=>{if(_0x39dc0e){return _0x302c6d(_0x39dc0e);}if(!_0x131800){_0x2a830f[a201_0x4c98('0x16')](a201_0x4c98('0x17'),{'msg':a201_0x4c98('0x61')});return _0x537e35[a201_0x4c98('0x18')]('/forgot');}_0x131800[a201_0x4c98('0x55')]=_0x4983c7;_0x131800['passwordResetExpires']=Date[a201_0x4c98('0x48')]()+0x36ee80;_0x131800['save'](_0x39dc0e=>{_0x302c6d(_0x39dc0e,_0x4983c7,_0x131800);});});},function sendForgotPasswordEmail(_0x57a196,_0x2529b0,_0x263366){const _0x2b9683=nodemailer_1[a201_0x4c98('0x19')][a201_0x4c98('0x56')]({'service':a201_0x4c98('0x62'),'auth':{'user':process[a201_0x4c98('0x57')][a201_0x4c98('0x58')],'pass':process[a201_0x4c98('0x57')][a201_0x4c98('0x59')]}});const _0x18e4a8={'to':_0x2529b0['email'],'from':a201_0x4c98('0x63'),'subject':a201_0x4c98('0x64'),'text':a201_0x4c98('0x65')+_0x2a830f['headers'][a201_0x4c98('0x66')]+'/reset/'+_0x57a196+a201_0x4c98('0x67')};_0x2b9683[a201_0x4c98('0x5c')](_0x18e4a8,_0x2783b5=>{_0x2a830f[a201_0x4c98('0x16')](a201_0x4c98('0x3d'),{'msg':a201_0x4c98('0x68')+_0x2529b0[a201_0x4c98('0xe')]+a201_0x4c98('0x69')});_0x263366(_0x2783b5);});}],_0x1c1060=>{if(_0x1c1060){return _0x529513(_0x1c1060);}_0x537e35[a201_0x4c98('0x18')](a201_0x4c98('0x4b'));});};