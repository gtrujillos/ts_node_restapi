var a95_0x50bb=['confirm','back','token','exec','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','isAuthenticated','account/forgot','Forgot\x20Password','postForgot','waterfall','toString','hex','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__esModule','defineProperty','async','crypto','passport','../models/User','express-validator','user','redirect','account/login','postLogin','email','isEmail','assert','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','validationErrors','errors','/login','flash','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','getSignup','render','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','default','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','getAccount','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','info','getOauthUnlink','params','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','findOne','where','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.'];(function(_0x59328f,_0x2429e1){var _0x1f9e77=function(_0x1ebeca){while(--_0x1ebeca){_0x59328f['push'](_0x59328f['shift']());}};_0x1f9e77(++_0x2429e1);}(a95_0x50bb,0xe5));var a95_0x256e=function(_0x58635e,_0x1d53f6){_0x58635e=_0x58635e-0x0;var _0x323a53=a95_0x50bb[_0x58635e];return _0x323a53;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2974c1){return _0x2974c1&&_0x2974c1[a95_0x256e('0x0')]?_0x2974c1:{'default':_0x2974c1};};Object[a95_0x256e('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a95_0x256e('0x2')));const crypto_1=__importDefault(require(a95_0x256e('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a95_0x256e('0x4')));const User_1=__importDefault(require(a95_0x256e('0x5')));const request=require(a95_0x256e('0x6'));exports['getLogin']=(_0x5373a9,_0x49b017)=>{if(_0x5373a9[a95_0x256e('0x7')]){return _0x49b017[a95_0x256e('0x8')]('/');}_0x49b017['render'](a95_0x256e('0x9'),{'title':'Login'});};exports[a95_0x256e('0xa')]=(_0x268943,_0x28f680,_0x360aa8)=>{_0x268943['assert'](a95_0x256e('0xb'),'Email\x20is\x20not\x20valid')[a95_0x256e('0xc')]();_0x268943[a95_0x256e('0xd')]('password',a95_0x256e('0xe'))[a95_0x256e('0xf')]();_0x268943[a95_0x256e('0x10')](a95_0x256e('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xb7be15=_0x268943[a95_0x256e('0x11')]();if(_0xb7be15){_0x268943['flash'](a95_0x256e('0x12'),_0xb7be15);return _0x28f680[a95_0x256e('0x8')](a95_0x256e('0x13'));}passport_1['default']['authenticate']('local',(_0x4871bb,_0x333786,_0x1a75bd)=>{if(_0x4871bb){return _0x360aa8(_0x4871bb);}if(!_0x333786){_0x268943[a95_0x256e('0x14')](a95_0x256e('0x12'),_0x1a75bd[a95_0x256e('0x15')]);return _0x28f680['redirect'](a95_0x256e('0x13'));}_0x268943[a95_0x256e('0x16')](_0x333786,_0x4871bb=>{if(_0x4871bb){return _0x360aa8(_0x4871bb);}_0x268943[a95_0x256e('0x14')](a95_0x256e('0x17'),{'msg':a95_0x256e('0x18')});_0x28f680[a95_0x256e('0x8')](_0x268943['session'][a95_0x256e('0x19')]||'/');});})(_0x268943,_0x28f680,_0x360aa8);};exports['logout']=(_0xadc03,_0x25142e)=>{_0xadc03['logout']();_0x25142e[a95_0x256e('0x8')]('/');};exports[a95_0x256e('0x1a')]=(_0x5852f2,_0x1b2d8a)=>{if(_0x5852f2[a95_0x256e('0x7')]){return _0x1b2d8a[a95_0x256e('0x8')]('/');}_0x1b2d8a[a95_0x256e('0x1b')](a95_0x256e('0x1c'),{'title':a95_0x256e('0x1d')});};exports[a95_0x256e('0x1e')]=(_0x580e55,_0x5b792b,_0x2e9250)=>{_0x580e55[a95_0x256e('0xd')](a95_0x256e('0xb'),a95_0x256e('0x1f'))[a95_0x256e('0xc')]();_0x580e55[a95_0x256e('0xd')](a95_0x256e('0x20'),a95_0x256e('0x21'))[a95_0x256e('0x22')]({'min':0x4});_0x580e55[a95_0x256e('0xd')](a95_0x256e('0x23'),'Passwords\x20do\x20not\x20match')[a95_0x256e('0x24')](_0x580e55['body'][a95_0x256e('0x20')]);_0x580e55[a95_0x256e('0x10')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x494a6f=_0x580e55['validationErrors']();if(_0x494a6f){_0x580e55[a95_0x256e('0x14')](a95_0x256e('0x12'),_0x494a6f);return _0x5b792b[a95_0x256e('0x8')]('/signup');}const _0x5b6a7a=new User_1[(a95_0x256e('0x25'))]({'email':_0x580e55['body'][a95_0x256e('0xb')],'password':_0x580e55[a95_0x256e('0x26')][a95_0x256e('0x20')]});User_1[a95_0x256e('0x25')]['findOne']({'email':_0x580e55[a95_0x256e('0x26')][a95_0x256e('0xb')]},(_0xf33d50,_0xa007fc)=>{if(_0xf33d50){return _0x2e9250(_0xf33d50);}if(_0xa007fc){_0x580e55['flash'](a95_0x256e('0x12'),{'msg':a95_0x256e('0x27')});return _0x5b792b[a95_0x256e('0x8')](a95_0x256e('0x28'));}_0x5b6a7a['save'](_0xf33d50=>{if(_0xf33d50){return _0x2e9250(_0xf33d50);}_0x580e55['logIn'](_0x5b6a7a,_0xf33d50=>{if(_0xf33d50){return _0x2e9250(_0xf33d50);}_0x5b792b[a95_0x256e('0x8')]('/');});});});};exports[a95_0x256e('0x29')]=(_0x193a47,_0x478e49)=>{_0x478e49[a95_0x256e('0x1b')]('account/profile',{'title':a95_0x256e('0x2a')});};exports[a95_0x256e('0x2b')]=(_0x148821,_0x4a4d05,_0x4c5de7)=>{_0x148821[a95_0x256e('0xd')]('email',a95_0x256e('0x2c'))['isEmail']();_0x148821[a95_0x256e('0x10')]('email')[a95_0x256e('0x2d')]({'gmail_remove_dots':![]});const _0x56bcd9=_0x148821[a95_0x256e('0x11')]();if(_0x56bcd9){_0x148821[a95_0x256e('0x14')](a95_0x256e('0x12'),_0x56bcd9);return _0x4a4d05[a95_0x256e('0x8')](a95_0x256e('0x2e'));}User_1['default'][a95_0x256e('0x2f')](_0x148821[a95_0x256e('0x7')]['id'],(_0x5db0ae,_0x23b8b7)=>{if(_0x5db0ae){return _0x4c5de7(_0x5db0ae);}_0x23b8b7[a95_0x256e('0xb')]=_0x148821[a95_0x256e('0x26')]['email']||'';_0x23b8b7[a95_0x256e('0x30')][a95_0x256e('0x31')]=_0x148821[a95_0x256e('0x26')][a95_0x256e('0x31')]||'';_0x23b8b7[a95_0x256e('0x30')][a95_0x256e('0x32')]=_0x148821[a95_0x256e('0x26')]['gender']||'';_0x23b8b7['profile'][a95_0x256e('0x33')]=_0x148821[a95_0x256e('0x26')][a95_0x256e('0x33')]||'';_0x23b8b7[a95_0x256e('0x30')][a95_0x256e('0x34')]=_0x148821[a95_0x256e('0x26')][a95_0x256e('0x34')]||'';_0x23b8b7[a95_0x256e('0x35')](_0x5db0ae=>{if(_0x5db0ae){if(_0x5db0ae[a95_0x256e('0x36')]===0x2af8){_0x148821[a95_0x256e('0x14')](a95_0x256e('0x12'),{'msg':a95_0x256e('0x37')});return _0x4a4d05[a95_0x256e('0x8')]('/account');}return _0x4c5de7(_0x5db0ae);}_0x148821[a95_0x256e('0x14')](a95_0x256e('0x17'),{'msg':a95_0x256e('0x38')});_0x4a4d05[a95_0x256e('0x8')](a95_0x256e('0x2e'));});});};exports[a95_0x256e('0x39')]=(_0x4da749,_0x14399b,_0x1ed351)=>{_0x4da749[a95_0x256e('0xd')]('password',a95_0x256e('0x21'))[a95_0x256e('0x22')]({'min':0x4});_0x4da749[a95_0x256e('0xd')](a95_0x256e('0x23'),a95_0x256e('0x3a'))[a95_0x256e('0x24')](_0x4da749[a95_0x256e('0x26')]['password']);const _0x3dea8b=_0x4da749[a95_0x256e('0x11')]();if(_0x3dea8b){_0x4da749[a95_0x256e('0x14')]('errors',_0x3dea8b);return _0x14399b[a95_0x256e('0x8')](a95_0x256e('0x2e'));}User_1[a95_0x256e('0x25')]['findById'](_0x4da749[a95_0x256e('0x7')]['id'],(_0x13a09e,_0x1252df)=>{if(_0x13a09e){return _0x1ed351(_0x13a09e);}_0x1252df[a95_0x256e('0x20')]=_0x4da749['body'][a95_0x256e('0x20')];_0x1252df[a95_0x256e('0x35')](_0x13a09e=>{if(_0x13a09e){return _0x1ed351(_0x13a09e);}_0x4da749['flash']('success',{'msg':a95_0x256e('0x3b')});_0x14399b['redirect'](a95_0x256e('0x2e'));});});};exports[a95_0x256e('0x3c')]=(_0x534167,_0x2baffa,_0x37f119)=>{User_1[a95_0x256e('0x25')]['remove']({'_id':_0x534167[a95_0x256e('0x7')]['id']},_0x4573ab=>{if(_0x4573ab){return _0x37f119(_0x4573ab);}_0x534167['logout']();_0x534167[a95_0x256e('0x14')](a95_0x256e('0x3d'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x2baffa['redirect']('/');});};exports[a95_0x256e('0x3e')]=(_0x57ff22,_0x567913,_0xe00739)=>{const _0x4b8856=_0x57ff22[a95_0x256e('0x3f')]['provider'];User_1['default'][a95_0x256e('0x2f')](_0x57ff22['user']['id'],(_0x55b97f,_0x2b551c)=>{if(_0x55b97f){return _0xe00739(_0x55b97f);}_0x2b551c[_0x4b8856]=undefined;_0x2b551c[a95_0x256e('0x40')]=_0x2b551c['tokens'][a95_0x256e('0x41')](_0x51dcc1=>_0x51dcc1[a95_0x256e('0x42')]!==_0x4b8856);_0x2b551c['save'](_0x55b97f=>{if(_0x55b97f){return _0xe00739(_0x55b97f);}_0x57ff22[a95_0x256e('0x14')]('info',{'msg':_0x4b8856+a95_0x256e('0x43')});_0x567913[a95_0x256e('0x8')](a95_0x256e('0x2e'));});});};exports[a95_0x256e('0x44')]=(_0x21fbb9,_0x52f14a,_0x31d15c)=>{if(_0x21fbb9['isAuthenticated']()){return _0x52f14a[a95_0x256e('0x8')]('/');}User_1[a95_0x256e('0x25')][a95_0x256e('0x45')]({'passwordResetToken':_0x21fbb9[a95_0x256e('0x3f')]['token']})[a95_0x256e('0x46')](a95_0x256e('0x47'))['gt'](Date[a95_0x256e('0x48')]())['exec']((_0x53db8c,_0x2346d4)=>{if(_0x53db8c){return _0x31d15c(_0x53db8c);}if(!_0x2346d4){_0x21fbb9[a95_0x256e('0x14')](a95_0x256e('0x12'),{'msg':a95_0x256e('0x49')});return _0x52f14a[a95_0x256e('0x8')](a95_0x256e('0x4a'));}_0x52f14a[a95_0x256e('0x1b')]('account/reset',{'title':a95_0x256e('0x4b')});});};exports['postReset']=(_0x50d5b5,_0x1f8e51,_0x54447a)=>{_0x50d5b5['assert'](a95_0x256e('0x20'),a95_0x256e('0x4c'))[a95_0x256e('0x22')]({'min':0x4});_0x50d5b5['assert'](a95_0x256e('0x4d'),'Passwords\x20must\x20match.')[a95_0x256e('0x24')](_0x50d5b5[a95_0x256e('0x26')][a95_0x256e('0x20')]);const _0x3fd6b4=_0x50d5b5[a95_0x256e('0x11')]();if(_0x3fd6b4){_0x50d5b5[a95_0x256e('0x14')](a95_0x256e('0x12'),_0x3fd6b4);return _0x1f8e51[a95_0x256e('0x8')](a95_0x256e('0x4e'));}async_1[a95_0x256e('0x25')]['waterfall']([function resetPassword(_0x356db1){User_1[a95_0x256e('0x25')][a95_0x256e('0x45')]({'passwordResetToken':_0x50d5b5[a95_0x256e('0x3f')][a95_0x256e('0x4f')]})[a95_0x256e('0x46')]('passwordResetExpires')['gt'](Date[a95_0x256e('0x48')]())[a95_0x256e('0x50')]((_0x3138ac,_0x273867)=>{if(_0x3138ac){return _0x54447a(_0x3138ac);}if(!_0x273867){_0x50d5b5[a95_0x256e('0x14')](a95_0x256e('0x12'),{'msg':a95_0x256e('0x49')});return _0x1f8e51[a95_0x256e('0x8')](a95_0x256e('0x4e'));}_0x273867[a95_0x256e('0x20')]=_0x50d5b5['body'][a95_0x256e('0x20')];_0x273867[a95_0x256e('0x51')]=undefined;_0x273867[a95_0x256e('0x47')]=undefined;_0x273867[a95_0x256e('0x35')](_0x3138ac=>{if(_0x3138ac){return _0x54447a(_0x3138ac);}_0x50d5b5[a95_0x256e('0x16')](_0x273867,_0x3138ac=>{_0x356db1(_0x3138ac,_0x273867);});});});},function sendResetPasswordEmail(_0x2734b7,_0x23c2c8){const _0x2f4aa2=nodemailer_1[a95_0x256e('0x25')][a95_0x256e('0x52')]({'service':a95_0x256e('0x53'),'auth':{'user':process[a95_0x256e('0x54')][a95_0x256e('0x55')],'pass':process[a95_0x256e('0x54')]['SENDGRID_PASSWORD']}});const _0x1dd6cb={'to':_0x2734b7[a95_0x256e('0xb')],'from':'express-ts@starter.com','subject':a95_0x256e('0x56'),'text':a95_0x256e('0x57')+_0x2734b7['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0x2f4aa2[a95_0x256e('0x58')](_0x1dd6cb,_0x1c6721=>{_0x50d5b5['flash'](a95_0x256e('0x17'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x23c2c8(_0x1c6721);});}],_0x2862f4=>{if(_0x2862f4){return _0x54447a(_0x2862f4);}_0x1f8e51[a95_0x256e('0x8')]('/');});};exports['getForgot']=(_0x7f84a4,_0x4dfcf4)=>{if(_0x7f84a4[a95_0x256e('0x59')]()){return _0x4dfcf4[a95_0x256e('0x8')]('/');}_0x4dfcf4[a95_0x256e('0x1b')](a95_0x256e('0x5a'),{'title':a95_0x256e('0x5b')});};exports[a95_0x256e('0x5c')]=(_0x32fd21,_0x401ba8,_0x3e9a07)=>{_0x32fd21[a95_0x256e('0xd')](a95_0x256e('0xb'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x256e('0xc')]();_0x32fd21['sanitize']('email')[a95_0x256e('0x2d')]({'gmail_remove_dots':![]});const _0x4c4e1d=_0x32fd21[a95_0x256e('0x11')]();if(_0x4c4e1d){_0x32fd21['flash']('errors',_0x4c4e1d);return _0x401ba8[a95_0x256e('0x8')]('/forgot');}async_1[a95_0x256e('0x25')][a95_0x256e('0x5d')]([function createRandomToken(_0x4314d8){crypto_1[a95_0x256e('0x25')]['randomBytes'](0x10,(_0x5e0fbf,_0x20107c)=>{const _0x256688=_0x20107c[a95_0x256e('0x5e')](a95_0x256e('0x5f'));_0x4314d8(_0x5e0fbf,_0x256688);});},function setRandomToken(_0xbb2e51,_0x3eb065){User_1[a95_0x256e('0x25')][a95_0x256e('0x45')]({'email':_0x32fd21['body'][a95_0x256e('0xb')]},(_0x49bf44,_0x43afdd)=>{if(_0x49bf44){return _0x3eb065(_0x49bf44);}if(!_0x43afdd){_0x32fd21[a95_0x256e('0x14')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x401ba8[a95_0x256e('0x8')](a95_0x256e('0x4a'));}_0x43afdd[a95_0x256e('0x51')]=_0xbb2e51;_0x43afdd[a95_0x256e('0x47')]=Date[a95_0x256e('0x48')]()+0x36ee80;_0x43afdd[a95_0x256e('0x35')](_0x49bf44=>{_0x3eb065(_0x49bf44,_0xbb2e51,_0x43afdd);});});},function sendForgotPasswordEmail(_0xb99f3b,_0x41e0b1,_0x4d2ff8){const _0x3c0d2a=nodemailer_1['default']['createTransport']({'service':a95_0x256e('0x53'),'auth':{'user':process['env'][a95_0x256e('0x55')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x407546={'to':_0x41e0b1[a95_0x256e('0xb')],'from':a95_0x256e('0x60'),'subject':a95_0x256e('0x61'),'text':a95_0x256e('0x62')+_0x32fd21['headers'][a95_0x256e('0x63')]+a95_0x256e('0x64')+_0xb99f3b+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x3c0d2a[a95_0x256e('0x58')](_0x407546,_0x4c7949=>{_0x32fd21[a95_0x256e('0x14')](a95_0x256e('0x3d'),{'msg':a95_0x256e('0x65')+_0x41e0b1[a95_0x256e('0xb')]+'\x20with\x20further\x20instructions.'});_0x4d2ff8(_0x4c7949);});}],_0x21a151=>{if(_0x21a151){return _0x3e9a07(_0x21a151);}_0x401ba8[a95_0x256e('0x8')](a95_0x256e('0x4a'));});};