var a111_0xc10d=['Password\x20cannot\x20be\x20blank','notEmpty','flash','errors','/login','default','authenticate','local','logIn','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','len','confirmPassword','Passwords\x20do\x20not\x20match','body','sanitize','normalizeEmail','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','tokens','filter','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','equals','back','waterfall','token','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','express-validator','getLogin','user','redirect','render','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password'];(function(_0x3c7e8d,_0x5b9fea){var _0x2e0d13=function(_0x3f72bf){while(--_0x3f72bf){_0x3c7e8d['push'](_0x3c7e8d['shift']());}};_0x2e0d13(++_0x5b9fea);}(a111_0xc10d,0x135));var a111_0x41c0=function(_0x256e55,_0x4082af){_0x256e55=_0x256e55-0x0;var _0x5b62aa=a111_0xc10d[_0x256e55];return _0x5b62aa;};'use strict';var __importDefault=this&&this[a111_0x41c0('0x0')]||function(_0x3d4b8b){return _0x3d4b8b&&_0x3d4b8b[a111_0x41c0('0x1')]?_0x3d4b8b:{'default':_0x3d4b8b};};Object[a111_0x41c0('0x2')](exports,a111_0x41c0('0x1'),{'value':!![]});const async_1=__importDefault(require(a111_0x41c0('0x3')));const crypto_1=__importDefault(require(a111_0x41c0('0x4')));const nodemailer_1=__importDefault(require(a111_0x41c0('0x5')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require(a111_0x41c0('0x6'));exports[a111_0x41c0('0x7')]=(_0x4816a2,_0x45a574)=>{if(_0x4816a2[a111_0x41c0('0x8')]){return _0x45a574[a111_0x41c0('0x9')]('/');}_0x45a574[a111_0x41c0('0xa')]('account/login',{'title':a111_0x41c0('0xb')});};exports[a111_0x41c0('0xc')]=(_0x5917fb,_0x181a54,_0x2e804d)=>{_0x5917fb['assert'](a111_0x41c0('0xd'),a111_0x41c0('0xe'))[a111_0x41c0('0xf')]();_0x5917fb[a111_0x41c0('0x10')](a111_0x41c0('0x11'),a111_0x41c0('0x12'))[a111_0x41c0('0x13')]();_0x5917fb['sanitize'](a111_0x41c0('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x52661d=_0x5917fb['validationErrors']();if(_0x52661d){_0x5917fb[a111_0x41c0('0x14')](a111_0x41c0('0x15'),_0x52661d);return _0x181a54['redirect'](a111_0x41c0('0x16'));}passport_1[a111_0x41c0('0x17')][a111_0x41c0('0x18')](a111_0x41c0('0x19'),(_0x5331c4,_0x478633,_0x320780)=>{if(_0x5331c4){return _0x2e804d(_0x5331c4);}if(!_0x478633){_0x5917fb[a111_0x41c0('0x14')](a111_0x41c0('0x15'),_0x320780['message']);return _0x181a54[a111_0x41c0('0x9')](a111_0x41c0('0x16'));}_0x5917fb[a111_0x41c0('0x1a')](_0x478633,_0x5331c4=>{if(_0x5331c4){return _0x2e804d(_0x5331c4);}_0x5917fb[a111_0x41c0('0x14')]('success',{'msg':a111_0x41c0('0x1b')});_0x181a54[a111_0x41c0('0x9')](_0x5917fb['session'][a111_0x41c0('0x1c')]||'/');});})(_0x5917fb,_0x181a54,_0x2e804d);};exports[a111_0x41c0('0x1d')]=(_0x5ce5f1,_0x5ee3c3)=>{_0x5ce5f1[a111_0x41c0('0x1d')]();_0x5ee3c3['redirect']('/');};exports[a111_0x41c0('0x1e')]=(_0x3b3732,_0x5ba050)=>{if(_0x3b3732[a111_0x41c0('0x8')]){return _0x5ba050[a111_0x41c0('0x9')]('/');}_0x5ba050[a111_0x41c0('0xa')](a111_0x41c0('0x1f'),{'title':a111_0x41c0('0x20')});};exports[a111_0x41c0('0x21')]=(_0xcadb5c,_0x1c3a28,_0x2e7412)=>{_0xcadb5c[a111_0x41c0('0x10')]('email','Email\x20is\x20not\x20valid')[a111_0x41c0('0xf')]();_0xcadb5c['assert'](a111_0x41c0('0x11'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a111_0x41c0('0x22')]({'min':0x4});_0xcadb5c[a111_0x41c0('0x10')](a111_0x41c0('0x23'),a111_0x41c0('0x24'))['equals'](_0xcadb5c[a111_0x41c0('0x25')][a111_0x41c0('0x11')]);_0xcadb5c[a111_0x41c0('0x26')](a111_0x41c0('0xd'))[a111_0x41c0('0x27')]({'gmail_remove_dots':![]});const _0x373463=_0xcadb5c[a111_0x41c0('0x28')]();if(_0x373463){_0xcadb5c[a111_0x41c0('0x14')](a111_0x41c0('0x15'),_0x373463);return _0x1c3a28['redirect'](a111_0x41c0('0x29'));}const _0x472bd8=new User_1['default']({'email':_0xcadb5c[a111_0x41c0('0x25')]['email'],'password':_0xcadb5c[a111_0x41c0('0x25')][a111_0x41c0('0x11')]});User_1['default'][a111_0x41c0('0x2a')]({'email':_0xcadb5c[a111_0x41c0('0x25')][a111_0x41c0('0xd')]},(_0x3fd2a9,_0x113f98)=>{if(_0x3fd2a9){return _0x2e7412(_0x3fd2a9);}if(_0x113f98){_0xcadb5c[a111_0x41c0('0x14')](a111_0x41c0('0x15'),{'msg':a111_0x41c0('0x2b')});return _0x1c3a28[a111_0x41c0('0x9')](a111_0x41c0('0x29'));}_0x472bd8[a111_0x41c0('0x2c')](_0x3fd2a9=>{if(_0x3fd2a9){return _0x2e7412(_0x3fd2a9);}_0xcadb5c['logIn'](_0x472bd8,_0x3fd2a9=>{if(_0x3fd2a9){return _0x2e7412(_0x3fd2a9);}_0x1c3a28[a111_0x41c0('0x9')]('/');});});});};exports[a111_0x41c0('0x2d')]=(_0x39be5b,_0x345462)=>{_0x345462['render'](a111_0x41c0('0x2e'),{'title':a111_0x41c0('0x2f')});};exports[a111_0x41c0('0x30')]=(_0xf51dbc,_0x506188,_0x507627)=>{_0xf51dbc['assert'](a111_0x41c0('0xd'),a111_0x41c0('0x31'))['isEmail']();_0xf51dbc['sanitize'](a111_0x41c0('0xd'))[a111_0x41c0('0x27')]({'gmail_remove_dots':![]});const _0xdbd229=_0xf51dbc[a111_0x41c0('0x28')]();if(_0xdbd229){_0xf51dbc['flash']('errors',_0xdbd229);return _0x506188[a111_0x41c0('0x9')](a111_0x41c0('0x32'));}User_1[a111_0x41c0('0x17')][a111_0x41c0('0x33')](_0xf51dbc['user']['id'],(_0x2a66d4,_0x3917b6)=>{if(_0x2a66d4){return _0x507627(_0x2a66d4);}_0x3917b6[a111_0x41c0('0xd')]=_0xf51dbc[a111_0x41c0('0x25')][a111_0x41c0('0xd')]||'';_0x3917b6['profile']['name']=_0xf51dbc[a111_0x41c0('0x25')][a111_0x41c0('0x34')]||'';_0x3917b6[a111_0x41c0('0x35')][a111_0x41c0('0x36')]=_0xf51dbc[a111_0x41c0('0x25')][a111_0x41c0('0x36')]||'';_0x3917b6[a111_0x41c0('0x35')]['location']=_0xf51dbc['body'][a111_0x41c0('0x37')]||'';_0x3917b6[a111_0x41c0('0x35')][a111_0x41c0('0x38')]=_0xf51dbc[a111_0x41c0('0x25')]['website']||'';_0x3917b6[a111_0x41c0('0x2c')](_0x2a66d4=>{if(_0x2a66d4){if(_0x2a66d4['code']===0x2af8){_0xf51dbc['flash'](a111_0x41c0('0x15'),{'msg':a111_0x41c0('0x39')});return _0x506188[a111_0x41c0('0x9')]('/account');}return _0x507627(_0x2a66d4);}_0xf51dbc[a111_0x41c0('0x14')](a111_0x41c0('0x3a'),{'msg':a111_0x41c0('0x3b')});_0x506188[a111_0x41c0('0x9')](a111_0x41c0('0x32'));});});};exports['postUpdatePassword']=(_0x2095f5,_0x4282a6,_0x3298e8)=>{_0x2095f5['assert'](a111_0x41c0('0x11'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a111_0x41c0('0x22')]({'min':0x4});_0x2095f5[a111_0x41c0('0x10')](a111_0x41c0('0x23'),'Passwords\x20do\x20not\x20match')['equals'](_0x2095f5[a111_0x41c0('0x25')][a111_0x41c0('0x11')]);const _0x33e26a=_0x2095f5['validationErrors']();if(_0x33e26a){_0x2095f5[a111_0x41c0('0x14')](a111_0x41c0('0x15'),_0x33e26a);return _0x4282a6[a111_0x41c0('0x9')](a111_0x41c0('0x32'));}User_1[a111_0x41c0('0x17')][a111_0x41c0('0x33')](_0x2095f5['user']['id'],(_0xfd82d8,_0x8f7cdd)=>{if(_0xfd82d8){return _0x3298e8(_0xfd82d8);}_0x8f7cdd[a111_0x41c0('0x11')]=_0x2095f5[a111_0x41c0('0x25')][a111_0x41c0('0x11')];_0x8f7cdd['save'](_0xfd82d8=>{if(_0xfd82d8){return _0x3298e8(_0xfd82d8);}_0x2095f5[a111_0x41c0('0x14')](a111_0x41c0('0x3a'),{'msg':a111_0x41c0('0x3c')});_0x4282a6['redirect'](a111_0x41c0('0x32'));});});};exports[a111_0x41c0('0x3d')]=(_0x486c99,_0x4efc67,_0x4ffb87)=>{User_1['default'][a111_0x41c0('0x3e')]({'_id':_0x486c99['user']['id']},_0x9d103=>{if(_0x9d103){return _0x4ffb87(_0x9d103);}_0x486c99[a111_0x41c0('0x1d')]();_0x486c99[a111_0x41c0('0x14')](a111_0x41c0('0x3f'),{'msg':a111_0x41c0('0x40')});_0x4efc67[a111_0x41c0('0x9')]('/');});};exports['getOauthUnlink']=(_0x36ae74,_0x382244,_0xb19769)=>{const _0x1dfa6d=_0x36ae74['params']['provider'];User_1['default'][a111_0x41c0('0x33')](_0x36ae74[a111_0x41c0('0x8')]['id'],(_0x1a1e4b,_0x3f4f95)=>{if(_0x1a1e4b){return _0xb19769(_0x1a1e4b);}_0x3f4f95[_0x1dfa6d]=undefined;_0x3f4f95['tokens']=_0x3f4f95[a111_0x41c0('0x41')][a111_0x41c0('0x42')](_0x5f4ac4=>_0x5f4ac4['kind']!==_0x1dfa6d);_0x3f4f95[a111_0x41c0('0x2c')](_0x1a1e4b=>{if(_0x1a1e4b){return _0xb19769(_0x1a1e4b);}_0x36ae74['flash']('info',{'msg':_0x1dfa6d+a111_0x41c0('0x43')});_0x382244['redirect'](a111_0x41c0('0x32'));});});};exports[a111_0x41c0('0x44')]=(_0x6e0883,_0x542341,_0x49fdea)=>{if(_0x6e0883[a111_0x41c0('0x45')]()){return _0x542341[a111_0x41c0('0x9')]('/');}User_1[a111_0x41c0('0x17')][a111_0x41c0('0x2a')]({'passwordResetToken':_0x6e0883[a111_0x41c0('0x46')]['token']})[a111_0x41c0('0x47')](a111_0x41c0('0x48'))['gt'](Date[a111_0x41c0('0x49')]())[a111_0x41c0('0x4a')]((_0x5532f2,_0x259a0f)=>{if(_0x5532f2){return _0x49fdea(_0x5532f2);}if(!_0x259a0f){_0x6e0883[a111_0x41c0('0x14')]('errors',{'msg':a111_0x41c0('0x4b')});return _0x542341['redirect'](a111_0x41c0('0x4c'));}_0x542341[a111_0x41c0('0xa')](a111_0x41c0('0x4d'),{'title':a111_0x41c0('0x4e')});});};exports[a111_0x41c0('0x4f')]=(_0x38f66f,_0x9d9e57,_0x42eeac)=>{_0x38f66f[a111_0x41c0('0x10')](a111_0x41c0('0x11'),a111_0x41c0('0x50'))['len']({'min':0x4});_0x38f66f['assert'](a111_0x41c0('0x51'),a111_0x41c0('0x52'))[a111_0x41c0('0x53')](_0x38f66f[a111_0x41c0('0x25')][a111_0x41c0('0x11')]);const _0x547b73=_0x38f66f[a111_0x41c0('0x28')]();if(_0x547b73){_0x38f66f[a111_0x41c0('0x14')]('errors',_0x547b73);return _0x9d9e57[a111_0x41c0('0x9')](a111_0x41c0('0x54'));}async_1[a111_0x41c0('0x17')][a111_0x41c0('0x55')]([function resetPassword(_0x18b41d){User_1[a111_0x41c0('0x17')][a111_0x41c0('0x2a')]({'passwordResetToken':_0x38f66f[a111_0x41c0('0x46')][a111_0x41c0('0x56')]})[a111_0x41c0('0x47')](a111_0x41c0('0x48'))['gt'](Date[a111_0x41c0('0x49')]())['exec']((_0x166253,_0x58e2ea)=>{if(_0x166253){return _0x42eeac(_0x166253);}if(!_0x58e2ea){_0x38f66f['flash'](a111_0x41c0('0x15'),{'msg':a111_0x41c0('0x4b')});return _0x9d9e57[a111_0x41c0('0x9')](a111_0x41c0('0x54'));}_0x58e2ea['password']=_0x38f66f[a111_0x41c0('0x25')][a111_0x41c0('0x11')];_0x58e2ea[a111_0x41c0('0x57')]=undefined;_0x58e2ea['passwordResetExpires']=undefined;_0x58e2ea[a111_0x41c0('0x2c')](_0x166253=>{if(_0x166253){return _0x42eeac(_0x166253);}_0x38f66f['logIn'](_0x58e2ea,_0x166253=>{_0x18b41d(_0x166253,_0x58e2ea);});});});},function sendResetPasswordEmail(_0x4231f8,_0x1c4a9){const _0x211166=nodemailer_1[a111_0x41c0('0x17')][a111_0x41c0('0x58')]({'service':a111_0x41c0('0x59'),'auth':{'user':process[a111_0x41c0('0x5a')]['SENDGRID_USER'],'pass':process['env'][a111_0x41c0('0x5b')]}});const _0x19d694={'to':_0x4231f8[a111_0x41c0('0xd')],'from':a111_0x41c0('0x5c'),'subject':a111_0x41c0('0x5d'),'text':a111_0x41c0('0x5e')+_0x4231f8['email']+a111_0x41c0('0x5f')};_0x211166[a111_0x41c0('0x60')](_0x19d694,_0x54a03d=>{_0x38f66f[a111_0x41c0('0x14')](a111_0x41c0('0x3a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x1c4a9(_0x54a03d);});}],_0x32229b=>{if(_0x32229b){return _0x42eeac(_0x32229b);}_0x9d9e57[a111_0x41c0('0x9')]('/');});};exports[a111_0x41c0('0x61')]=(_0x5f4a22,_0x2b217e)=>{if(_0x5f4a22['isAuthenticated']()){return _0x2b217e[a111_0x41c0('0x9')]('/');}_0x2b217e[a111_0x41c0('0xa')](a111_0x41c0('0x62'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x3383db,_0x2f9c2f,_0x39dc10)=>{_0x3383db[a111_0x41c0('0x10')](a111_0x41c0('0xd'),a111_0x41c0('0x31'))['isEmail']();_0x3383db[a111_0x41c0('0x26')](a111_0x41c0('0xd'))[a111_0x41c0('0x27')]({'gmail_remove_dots':![]});const _0x1ba03d=_0x3383db[a111_0x41c0('0x28')]();if(_0x1ba03d){_0x3383db['flash'](a111_0x41c0('0x15'),_0x1ba03d);return _0x2f9c2f['redirect'](a111_0x41c0('0x4c'));}async_1[a111_0x41c0('0x17')][a111_0x41c0('0x55')]([function createRandomToken(_0x4f19ad){crypto_1[a111_0x41c0('0x17')][a111_0x41c0('0x63')](0x10,(_0x300c40,_0x34e7b5)=>{const _0x547750=_0x34e7b5[a111_0x41c0('0x64')]('hex');_0x4f19ad(_0x300c40,_0x547750);});},function setRandomToken(_0x578afc,_0x5a478c){User_1[a111_0x41c0('0x17')]['findOne']({'email':_0x3383db[a111_0x41c0('0x25')][a111_0x41c0('0xd')]},(_0x1a7e1c,_0x110d07)=>{if(_0x1a7e1c){return _0x5a478c(_0x1a7e1c);}if(!_0x110d07){_0x3383db[a111_0x41c0('0x14')](a111_0x41c0('0x15'),{'msg':a111_0x41c0('0x65')});return _0x2f9c2f['redirect']('/forgot');}_0x110d07[a111_0x41c0('0x57')]=_0x578afc;_0x110d07['passwordResetExpires']=Date['now']()+0x36ee80;_0x110d07[a111_0x41c0('0x2c')](_0x1a7e1c=>{_0x5a478c(_0x1a7e1c,_0x578afc,_0x110d07);});});},function sendForgotPasswordEmail(_0x26b9e2,_0x1bedc7,_0x168db5){const _0x30b374=nodemailer_1[a111_0x41c0('0x17')][a111_0x41c0('0x58')]({'service':a111_0x41c0('0x59'),'auth':{'user':process[a111_0x41c0('0x5a')]['SENDGRID_USER'],'pass':process[a111_0x41c0('0x5a')]['SENDGRID_PASSWORD']}});const _0x62c960={'to':_0x1bedc7[a111_0x41c0('0xd')],'from':'hackathon@starter.com','subject':a111_0x41c0('0x66'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x3383db[a111_0x41c0('0x67')][a111_0x41c0('0x68')]+a111_0x41c0('0x69')+_0x26b9e2+a111_0x41c0('0x6a')};_0x30b374['sendMail'](_0x62c960,_0x57bf24=>{_0x3383db[a111_0x41c0('0x14')]('info',{'msg':a111_0x41c0('0x6b')+_0x1bedc7[a111_0x41c0('0xd')]+a111_0x41c0('0x6c')});_0x168db5(_0x57bf24);});}],_0x45e3de=>{if(_0x45e3de){return _0x39dc10(_0x45e3de);}_0x2f9c2f[a111_0x41c0('0x9')]('/forgot');});};