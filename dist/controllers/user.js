var a95_0x2f03=['logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','user','account/signup','Create\x20Account','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','Passwords\x20do\x20not\x20match','success','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','exec','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','back','waterfall','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','SENDGRID_USER','env','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','Forgot\x20Password','postForgot','/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','../models/User','express-validator','getLogin','redirect','render','account/login','Login','postLogin','assert','isEmail','password','notEmpty','sanitize','email','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local'];(function(_0x232d8e,_0x4a1be2){var _0x179dbb=function(_0x4a0e6e){while(--_0x4a0e6e){_0x232d8e['push'](_0x232d8e['shift']());}};_0x179dbb(++_0x4a1be2);}(a95_0x2f03,0xc1));var a95_0x4545=function(_0x4bd822,_0x2bd6f7){_0x4bd822=_0x4bd822-0x0;var _0xb4bdb3=a95_0x2f03[_0x4bd822];return _0xb4bdb3;};'use strict';var __importDefault=this&&this[a95_0x4545('0x0')]||function(_0x19462c){return _0x19462c&&_0x19462c[a95_0x4545('0x1')]?_0x19462c:{'default':_0x19462c};};Object['defineProperty'](exports,a95_0x4545('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x4545('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a95_0x4545('0x3')));const request=require(a95_0x4545('0x4'));exports[a95_0x4545('0x5')]=(_0x1bfe53,_0x208064)=>{if(_0x1bfe53['user']){return _0x208064[a95_0x4545('0x6')]('/');}_0x208064[a95_0x4545('0x7')](a95_0x4545('0x8'),{'title':a95_0x4545('0x9')});};exports[a95_0x4545('0xa')]=(_0x46933d,_0x1ec759,_0x3fca39)=>{_0x46933d[a95_0x4545('0xb')]('email','Email\x20is\x20not\x20valid')[a95_0x4545('0xc')]();_0x46933d[a95_0x4545('0xb')](a95_0x4545('0xd'),'Password\x20cannot\x20be\x20blank')[a95_0x4545('0xe')]();_0x46933d[a95_0x4545('0xf')](a95_0x4545('0x10'))[a95_0x4545('0x11')]({'gmail_remove_dots':![]});const _0x524e8f=_0x46933d[a95_0x4545('0x12')]();if(_0x524e8f){_0x46933d[a95_0x4545('0x13')](a95_0x4545('0x14'),_0x524e8f);return _0x1ec759[a95_0x4545('0x6')](a95_0x4545('0x15'));}passport_1[a95_0x4545('0x16')][a95_0x4545('0x17')](a95_0x4545('0x18'),(_0x4f94b6,_0x207bc6,_0x29ae80)=>{if(_0x4f94b6){return _0x3fca39(_0x4f94b6);}if(!_0x207bc6){_0x46933d[a95_0x4545('0x13')](a95_0x4545('0x14'),_0x29ae80['message']);return _0x1ec759[a95_0x4545('0x6')](a95_0x4545('0x15'));}_0x46933d[a95_0x4545('0x19')](_0x207bc6,_0x4f94b6=>{if(_0x4f94b6){return _0x3fca39(_0x4f94b6);}_0x46933d[a95_0x4545('0x13')]('success',{'msg':a95_0x4545('0x1a')});_0x1ec759[a95_0x4545('0x6')](_0x46933d[a95_0x4545('0x1b')][a95_0x4545('0x1c')]||'/');});})(_0x46933d,_0x1ec759,_0x3fca39);};exports[a95_0x4545('0x1d')]=(_0x52a5a7,_0x1be99a)=>{_0x52a5a7[a95_0x4545('0x1d')]();_0x1be99a[a95_0x4545('0x6')]('/');};exports['getSignup']=(_0x1502b3,_0x11d46e)=>{if(_0x1502b3[a95_0x4545('0x1e')]){return _0x11d46e['redirect']('/');}_0x11d46e[a95_0x4545('0x7')](a95_0x4545('0x1f'),{'title':a95_0x4545('0x20')});};exports['postSignup']=(_0x4078d7,_0x591950,_0xf0c5dc)=>{_0x4078d7[a95_0x4545('0xb')]('email',a95_0x4545('0x21'))[a95_0x4545('0xc')]();_0x4078d7[a95_0x4545('0xb')](a95_0x4545('0xd'),a95_0x4545('0x22'))['len']({'min':0x4});_0x4078d7[a95_0x4545('0xb')](a95_0x4545('0x23'),'Passwords\x20do\x20not\x20match')[a95_0x4545('0x24')](_0x4078d7[a95_0x4545('0x25')][a95_0x4545('0xd')]);_0x4078d7['sanitize'](a95_0x4545('0x10'))[a95_0x4545('0x11')]({'gmail_remove_dots':![]});const _0x20817f=_0x4078d7[a95_0x4545('0x12')]();if(_0x20817f){_0x4078d7[a95_0x4545('0x13')]('errors',_0x20817f);return _0x591950[a95_0x4545('0x6')](a95_0x4545('0x26'));}const _0x2010b5=new User_1['default']({'email':_0x4078d7[a95_0x4545('0x25')][a95_0x4545('0x10')],'password':_0x4078d7[a95_0x4545('0x25')]['password']});User_1[a95_0x4545('0x16')][a95_0x4545('0x27')]({'email':_0x4078d7[a95_0x4545('0x25')][a95_0x4545('0x10')]},(_0x68f2d9,_0x164a0d)=>{if(_0x68f2d9){return _0xf0c5dc(_0x68f2d9);}if(_0x164a0d){_0x4078d7[a95_0x4545('0x13')](a95_0x4545('0x14'),{'msg':a95_0x4545('0x28')});return _0x591950[a95_0x4545('0x6')](a95_0x4545('0x26'));}_0x2010b5[a95_0x4545('0x29')](_0x68f2d9=>{if(_0x68f2d9){return _0xf0c5dc(_0x68f2d9);}_0x4078d7[a95_0x4545('0x19')](_0x2010b5,_0x68f2d9=>{if(_0x68f2d9){return _0xf0c5dc(_0x68f2d9);}_0x591950[a95_0x4545('0x6')]('/');});});});};exports[a95_0x4545('0x2a')]=(_0x16bfc7,_0x47e1b9)=>{_0x47e1b9[a95_0x4545('0x7')]('account/profile',{'title':'Account\x20Management'});};exports[a95_0x4545('0x2b')]=(_0x19121a,_0x57ea74,_0xaf252)=>{_0x19121a['assert'](a95_0x4545('0x10'),a95_0x4545('0x2c'))[a95_0x4545('0xc')]();_0x19121a[a95_0x4545('0xf')](a95_0x4545('0x10'))[a95_0x4545('0x11')]({'gmail_remove_dots':![]});const _0x48acb5=_0x19121a[a95_0x4545('0x12')]();if(_0x48acb5){_0x19121a[a95_0x4545('0x13')]('errors',_0x48acb5);return _0x57ea74[a95_0x4545('0x6')](a95_0x4545('0x2d'));}User_1[a95_0x4545('0x16')][a95_0x4545('0x2e')](_0x19121a['user']['id'],(_0x357742,_0x41a799)=>{if(_0x357742){return _0xaf252(_0x357742);}_0x41a799[a95_0x4545('0x10')]=_0x19121a[a95_0x4545('0x25')][a95_0x4545('0x10')]||'';_0x41a799['profile'][a95_0x4545('0x2f')]=_0x19121a[a95_0x4545('0x25')][a95_0x4545('0x2f')]||'';_0x41a799[a95_0x4545('0x30')][a95_0x4545('0x31')]=_0x19121a['body'][a95_0x4545('0x31')]||'';_0x41a799[a95_0x4545('0x30')][a95_0x4545('0x32')]=_0x19121a[a95_0x4545('0x25')][a95_0x4545('0x32')]||'';_0x41a799['profile'][a95_0x4545('0x33')]=_0x19121a['body']['website']||'';_0x41a799['save'](_0x357742=>{if(_0x357742){if(_0x357742['code']===0x2af8){_0x19121a[a95_0x4545('0x13')]('errors',{'msg':a95_0x4545('0x34')});return _0x57ea74['redirect'](a95_0x4545('0x2d'));}return _0xaf252(_0x357742);}_0x19121a[a95_0x4545('0x13')]('success',{'msg':a95_0x4545('0x35')});_0x57ea74[a95_0x4545('0x6')]('/account');});});};exports[a95_0x4545('0x36')]=(_0x4d3cfe,_0x1f4ac9,_0x1a8073)=>{_0x4d3cfe[a95_0x4545('0xb')](a95_0x4545('0xd'),a95_0x4545('0x22'))[a95_0x4545('0x37')]({'min':0x4});_0x4d3cfe[a95_0x4545('0xb')](a95_0x4545('0x23'),a95_0x4545('0x38'))[a95_0x4545('0x24')](_0x4d3cfe[a95_0x4545('0x25')][a95_0x4545('0xd')]);const _0xda1b5a=_0x4d3cfe[a95_0x4545('0x12')]();if(_0xda1b5a){_0x4d3cfe[a95_0x4545('0x13')](a95_0x4545('0x14'),_0xda1b5a);return _0x1f4ac9[a95_0x4545('0x6')]('/account');}User_1[a95_0x4545('0x16')]['findById'](_0x4d3cfe[a95_0x4545('0x1e')]['id'],(_0x23089f,_0x54a8e3)=>{if(_0x23089f){return _0x1a8073(_0x23089f);}_0x54a8e3[a95_0x4545('0xd')]=_0x4d3cfe[a95_0x4545('0x25')][a95_0x4545('0xd')];_0x54a8e3[a95_0x4545('0x29')](_0x23089f=>{if(_0x23089f){return _0x1a8073(_0x23089f);}_0x4d3cfe[a95_0x4545('0x13')](a95_0x4545('0x39'),{'msg':a95_0x4545('0x3a')});_0x1f4ac9[a95_0x4545('0x6')](a95_0x4545('0x2d'));});});};exports[a95_0x4545('0x3b')]=(_0x1919d9,_0x1d58ad,_0xf76e24)=>{User_1[a95_0x4545('0x16')][a95_0x4545('0x3c')]({'_id':_0x1919d9[a95_0x4545('0x1e')]['id']},_0x50a57d=>{if(_0x50a57d){return _0xf76e24(_0x50a57d);}_0x1919d9[a95_0x4545('0x1d')]();_0x1919d9[a95_0x4545('0x13')]('info',{'msg':a95_0x4545('0x3d')});_0x1d58ad[a95_0x4545('0x6')]('/');});};exports[a95_0x4545('0x3e')]=(_0x445075,_0x762249,_0x340006)=>{const _0x4ed814=_0x445075[a95_0x4545('0x3f')][a95_0x4545('0x40')];User_1[a95_0x4545('0x16')][a95_0x4545('0x2e')](_0x445075[a95_0x4545('0x1e')]['id'],(_0x551e49,_0x499dff)=>{if(_0x551e49){return _0x340006(_0x551e49);}_0x499dff[_0x4ed814]=undefined;_0x499dff['tokens']=_0x499dff['tokens'][a95_0x4545('0x41')](_0x46a3d5=>_0x46a3d5[a95_0x4545('0x42')]!==_0x4ed814);_0x499dff['save'](_0x551e49=>{if(_0x551e49){return _0x340006(_0x551e49);}_0x445075[a95_0x4545('0x13')](a95_0x4545('0x43'),{'msg':_0x4ed814+a95_0x4545('0x44')});_0x762249['redirect'](a95_0x4545('0x2d'));});});};exports['getReset']=(_0x145caf,_0x2a9337,_0x2b4be3)=>{if(_0x145caf[a95_0x4545('0x45')]()){return _0x2a9337[a95_0x4545('0x6')]('/');}User_1[a95_0x4545('0x16')][a95_0x4545('0x27')]({'passwordResetToken':_0x145caf[a95_0x4545('0x3f')][a95_0x4545('0x46')]})[a95_0x4545('0x47')](a95_0x4545('0x48'))['gt'](Date['now']())[a95_0x4545('0x49')]((_0x58dc63,_0x412297)=>{if(_0x58dc63){return _0x2b4be3(_0x58dc63);}if(!_0x412297){_0x145caf[a95_0x4545('0x13')](a95_0x4545('0x14'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2a9337[a95_0x4545('0x6')]('/forgot');}_0x2a9337['render'](a95_0x4545('0x4a'),{'title':a95_0x4545('0x4b')});});};exports[a95_0x4545('0x4c')]=(_0x5ef60c,_0x48c255,_0x207633)=>{_0x5ef60c[a95_0x4545('0xb')](a95_0x4545('0xd'),a95_0x4545('0x4d'))[a95_0x4545('0x37')]({'min':0x4});_0x5ef60c[a95_0x4545('0xb')]('confirm','Passwords\x20must\x20match.')['equals'](_0x5ef60c[a95_0x4545('0x25')][a95_0x4545('0xd')]);const _0x594707=_0x5ef60c[a95_0x4545('0x12')]();if(_0x594707){_0x5ef60c[a95_0x4545('0x13')]('errors',_0x594707);return _0x48c255[a95_0x4545('0x6')](a95_0x4545('0x4e'));}async_1[a95_0x4545('0x16')][a95_0x4545('0x4f')]([function resetPassword(_0xdbd624){User_1[a95_0x4545('0x16')][a95_0x4545('0x27')]({'passwordResetToken':_0x5ef60c[a95_0x4545('0x3f')]['token']})[a95_0x4545('0x47')](a95_0x4545('0x48'))['gt'](Date[a95_0x4545('0x50')]())[a95_0x4545('0x49')]((_0x2de04a,_0x228357)=>{if(_0x2de04a){return _0x207633(_0x2de04a);}if(!_0x228357){_0x5ef60c[a95_0x4545('0x13')]('errors',{'msg':a95_0x4545('0x51')});return _0x48c255['redirect']('back');}_0x228357[a95_0x4545('0xd')]=_0x5ef60c['body'][a95_0x4545('0xd')];_0x228357[a95_0x4545('0x52')]=undefined;_0x228357['passwordResetExpires']=undefined;_0x228357[a95_0x4545('0x29')](_0x2de04a=>{if(_0x2de04a){return _0x207633(_0x2de04a);}_0x5ef60c[a95_0x4545('0x19')](_0x228357,_0x2de04a=>{_0xdbd624(_0x2de04a,_0x228357);});});});},function sendResetPasswordEmail(_0x542c5c,_0x1da8c9){const _0x2cbcfa=nodemailer_1[a95_0x4545('0x16')][a95_0x4545('0x53')]({'service':a95_0x4545('0x54'),'auth':{'user':process['env'][a95_0x4545('0x55')],'pass':process[a95_0x4545('0x56')]['SENDGRID_PASSWORD']}});const _0x3ad4a5={'to':_0x542c5c[a95_0x4545('0x10')],'from':a95_0x4545('0x57'),'subject':a95_0x4545('0x58'),'text':a95_0x4545('0x59')+_0x542c5c[a95_0x4545('0x10')]+a95_0x4545('0x5a')};_0x2cbcfa[a95_0x4545('0x5b')](_0x3ad4a5,_0x491f5c=>{_0x5ef60c['flash']('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x1da8c9(_0x491f5c);});}],_0x2d0f05=>{if(_0x2d0f05){return _0x207633(_0x2d0f05);}_0x48c255[a95_0x4545('0x6')]('/');});};exports[a95_0x4545('0x5c')]=(_0x4640d1,_0x58708e)=>{if(_0x4640d1['isAuthenticated']()){return _0x58708e[a95_0x4545('0x6')]('/');}_0x58708e['render'](a95_0x4545('0x5d'),{'title':a95_0x4545('0x5e')});};exports[a95_0x4545('0x5f')]=(_0x1faecf,_0x5433e1,_0x59227e)=>{_0x1faecf[a95_0x4545('0xb')](a95_0x4545('0x10'),a95_0x4545('0x2c'))['isEmail']();_0x1faecf[a95_0x4545('0xf')]('email')[a95_0x4545('0x11')]({'gmail_remove_dots':![]});const _0x1b288e=_0x1faecf[a95_0x4545('0x12')]();if(_0x1b288e){_0x1faecf[a95_0x4545('0x13')](a95_0x4545('0x14'),_0x1b288e);return _0x5433e1[a95_0x4545('0x6')](a95_0x4545('0x60'));}async_1['default'][a95_0x4545('0x4f')]([function createRandomToken(_0xe4ffa1){crypto_1[a95_0x4545('0x16')][a95_0x4545('0x61')](0x10,(_0x502297,_0x44c715)=>{const _0x56757a=_0x44c715[a95_0x4545('0x62')](a95_0x4545('0x63'));_0xe4ffa1(_0x502297,_0x56757a);});},function setRandomToken(_0x420782,_0x126cf1){User_1[a95_0x4545('0x16')][a95_0x4545('0x27')]({'email':_0x1faecf[a95_0x4545('0x25')][a95_0x4545('0x10')]},(_0x5120da,_0x3f96db)=>{if(_0x5120da){return _0x126cf1(_0x5120da);}if(!_0x3f96db){_0x1faecf[a95_0x4545('0x13')](a95_0x4545('0x14'),{'msg':a95_0x4545('0x64')});return _0x5433e1[a95_0x4545('0x6')]('/forgot');}_0x3f96db[a95_0x4545('0x52')]=_0x420782;_0x3f96db['passwordResetExpires']=Date[a95_0x4545('0x50')]()+0x36ee80;_0x3f96db[a95_0x4545('0x29')](_0x5120da=>{_0x126cf1(_0x5120da,_0x420782,_0x3f96db);});});},function sendForgotPasswordEmail(_0x404e76,_0x45a988,_0x5c9e14){const _0x2dbb91=nodemailer_1['default'][a95_0x4545('0x53')]({'service':a95_0x4545('0x54'),'auth':{'user':process[a95_0x4545('0x56')][a95_0x4545('0x55')],'pass':process['env'][a95_0x4545('0x65')]}});const _0x1989b8={'to':_0x45a988['email'],'from':a95_0x4545('0x66'),'subject':a95_0x4545('0x67'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x1faecf[a95_0x4545('0x68')][a95_0x4545('0x69')]+a95_0x4545('0x6a')+_0x404e76+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x2dbb91[a95_0x4545('0x5b')](_0x1989b8,_0x178c08=>{_0x1faecf[a95_0x4545('0x13')]('info',{'msg':a95_0x4545('0x6b')+_0x45a988[a95_0x4545('0x10')]+a95_0x4545('0x6c')});_0x5c9e14(_0x178c08);});}],_0x121f59=>{if(_0x121f59){return _0x59227e(_0x121f59);}_0x5433e1[a95_0x4545('0x6')]('/forgot');});};