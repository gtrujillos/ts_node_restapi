var a95_0x1183=['postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','save','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Password\x20has\x20been\x20changed.','postDeleteAccount','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','../models/User','getLogin','user','redirect','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','flash','message','/login','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','assert','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','equals','body','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','Account\x20Management'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a95_0x1183,0x1f1));var a95_0x6328=function(_0x342cd7,_0x2f3a28){_0x342cd7=_0x342cd7-0x0;var _0x336e72=a95_0x1183[_0x342cd7];return _0x336e72;};'use strict';var __importDefault=this&&this[a95_0x6328('0x0')]||function(_0x1c76d1){return _0x1c76d1&&_0x1c76d1[a95_0x6328('0x1')]?_0x1c76d1:{'default':_0x1c76d1};};Object['defineProperty'](exports,a95_0x6328('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x6328('0x2')));const crypto_1=__importDefault(require(a95_0x6328('0x3')));const nodemailer_1=__importDefault(require(a95_0x6328('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a95_0x6328('0x5')));const request=require('express-validator');exports[a95_0x6328('0x6')]=(_0x1b29b6,_0x26c9c9)=>{if(_0x1b29b6[a95_0x6328('0x7')]){return _0x26c9c9[a95_0x6328('0x8')]('/');}_0x26c9c9[a95_0x6328('0x9')](a95_0x6328('0xa'),{'title':a95_0x6328('0xb')});};exports[a95_0x6328('0xc')]=(_0x5e307f,_0x174a1d,_0x14e79e)=>{_0x5e307f['assert'](a95_0x6328('0xd'),a95_0x6328('0xe'))[a95_0x6328('0xf')]();_0x5e307f['assert'](a95_0x6328('0x10'),a95_0x6328('0x11'))[a95_0x6328('0x12')]();_0x5e307f[a95_0x6328('0x13')](a95_0x6328('0xd'))[a95_0x6328('0x14')]({'gmail_remove_dots':![]});const _0x31fc3c=_0x5e307f[a95_0x6328('0x15')]();if(_0x31fc3c){_0x5e307f['flash'](a95_0x6328('0x16'),_0x31fc3c);return _0x174a1d[a95_0x6328('0x8')]('/login');}passport_1['default']['authenticate']('local',(_0x75fe4e,_0x59e0c2,_0x387691)=>{if(_0x75fe4e){return _0x14e79e(_0x75fe4e);}if(!_0x59e0c2){_0x5e307f[a95_0x6328('0x17')](a95_0x6328('0x16'),_0x387691[a95_0x6328('0x18')]);return _0x174a1d['redirect'](a95_0x6328('0x19'));}_0x5e307f[a95_0x6328('0x1a')](_0x59e0c2,_0x75fe4e=>{if(_0x75fe4e){return _0x14e79e(_0x75fe4e);}_0x5e307f[a95_0x6328('0x17')]('success',{'msg':a95_0x6328('0x1b')});_0x174a1d[a95_0x6328('0x8')](_0x5e307f[a95_0x6328('0x1c')][a95_0x6328('0x1d')]||'/');});})(_0x5e307f,_0x174a1d,_0x14e79e);};exports['logout']=(_0xfb164c,_0x54c598)=>{_0xfb164c[a95_0x6328('0x1e')]();_0x54c598[a95_0x6328('0x8')]('/');};exports[a95_0x6328('0x1f')]=(_0x51d9d4,_0x4ec865)=>{if(_0x51d9d4[a95_0x6328('0x7')]){return _0x4ec865[a95_0x6328('0x8')]('/');}_0x4ec865[a95_0x6328('0x9')](a95_0x6328('0x20'),{'title':'Create\x20Account'});};exports['postSignup']=(_0x5a932a,_0xb844c7,_0x1b0751)=>{_0x5a932a[a95_0x6328('0x21')](a95_0x6328('0xd'),'Email\x20is\x20not\x20valid')[a95_0x6328('0xf')]();_0x5a932a[a95_0x6328('0x21')](a95_0x6328('0x10'),a95_0x6328('0x22'))[a95_0x6328('0x23')]({'min':0x4});_0x5a932a[a95_0x6328('0x21')]('confirmPassword','Passwords\x20do\x20not\x20match')[a95_0x6328('0x24')](_0x5a932a[a95_0x6328('0x25')][a95_0x6328('0x10')]);_0x5a932a[a95_0x6328('0x13')](a95_0x6328('0xd'))[a95_0x6328('0x14')]({'gmail_remove_dots':![]});const _0x367a58=_0x5a932a[a95_0x6328('0x15')]();if(_0x367a58){_0x5a932a[a95_0x6328('0x17')](a95_0x6328('0x16'),_0x367a58);return _0xb844c7['redirect'](a95_0x6328('0x26'));}const _0x58e441=new User_1[(a95_0x6328('0x27'))]({'email':_0x5a932a['body'][a95_0x6328('0xd')],'password':_0x5a932a[a95_0x6328('0x25')]['password']});User_1[a95_0x6328('0x27')][a95_0x6328('0x28')]({'email':_0x5a932a[a95_0x6328('0x25')]['email']},(_0x5bd0f1,_0x110af1)=>{if(_0x5bd0f1){return _0x1b0751(_0x5bd0f1);}if(_0x110af1){_0x5a932a[a95_0x6328('0x17')](a95_0x6328('0x16'),{'msg':a95_0x6328('0x29')});return _0xb844c7['redirect'](a95_0x6328('0x26'));}_0x58e441['save'](_0x5bd0f1=>{if(_0x5bd0f1){return _0x1b0751(_0x5bd0f1);}_0x5a932a[a95_0x6328('0x1a')](_0x58e441,_0x5bd0f1=>{if(_0x5bd0f1){return _0x1b0751(_0x5bd0f1);}_0xb844c7['redirect']('/');});});});};exports['getAccount']=(_0x153a6e,_0x4fc645)=>{_0x4fc645[a95_0x6328('0x9')]('account/profile',{'title':a95_0x6328('0x2a')});};exports[a95_0x6328('0x2b')]=(_0x4b79b5,_0x39c59f,_0x44710c)=>{_0x4b79b5[a95_0x6328('0x21')](a95_0x6328('0xd'),a95_0x6328('0x2c'))[a95_0x6328('0xf')]();_0x4b79b5[a95_0x6328('0x13')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x4a1485=_0x4b79b5[a95_0x6328('0x15')]();if(_0x4a1485){_0x4b79b5[a95_0x6328('0x17')]('errors',_0x4a1485);return _0x39c59f[a95_0x6328('0x8')](a95_0x6328('0x2d'));}User_1[a95_0x6328('0x27')][a95_0x6328('0x2e')](_0x4b79b5['user']['id'],(_0x4d1f1a,_0x1bac8c)=>{if(_0x4d1f1a){return _0x44710c(_0x4d1f1a);}_0x1bac8c[a95_0x6328('0xd')]=_0x4b79b5[a95_0x6328('0x25')][a95_0x6328('0xd')]||'';_0x1bac8c[a95_0x6328('0x2f')][a95_0x6328('0x30')]=_0x4b79b5[a95_0x6328('0x25')]['name']||'';_0x1bac8c[a95_0x6328('0x2f')][a95_0x6328('0x31')]=_0x4b79b5['body'][a95_0x6328('0x31')]||'';_0x1bac8c[a95_0x6328('0x2f')]['location']=_0x4b79b5[a95_0x6328('0x25')][a95_0x6328('0x32')]||'';_0x1bac8c[a95_0x6328('0x2f')][a95_0x6328('0x33')]=_0x4b79b5[a95_0x6328('0x25')][a95_0x6328('0x33')]||'';_0x1bac8c[a95_0x6328('0x34')](_0x4d1f1a=>{if(_0x4d1f1a){if(_0x4d1f1a['code']===0x2af8){_0x4b79b5['flash'](a95_0x6328('0x16'),{'msg':a95_0x6328('0x35')});return _0x39c59f[a95_0x6328('0x8')](a95_0x6328('0x2d'));}return _0x44710c(_0x4d1f1a);}_0x4b79b5[a95_0x6328('0x17')](a95_0x6328('0x36'),{'msg':a95_0x6328('0x37')});_0x39c59f[a95_0x6328('0x8')]('/account');});});};exports[a95_0x6328('0x38')]=(_0x143046,_0x4b6784,_0xc53540)=>{_0x143046[a95_0x6328('0x21')](a95_0x6328('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x6328('0x23')]({'min':0x4});_0x143046[a95_0x6328('0x21')](a95_0x6328('0x39'),'Passwords\x20do\x20not\x20match')[a95_0x6328('0x24')](_0x143046['body'][a95_0x6328('0x10')]);const _0xb8212d=_0x143046[a95_0x6328('0x15')]();if(_0xb8212d){_0x143046[a95_0x6328('0x17')](a95_0x6328('0x16'),_0xb8212d);return _0x4b6784['redirect']('/account');}User_1[a95_0x6328('0x27')][a95_0x6328('0x2e')](_0x143046[a95_0x6328('0x7')]['id'],(_0x464f9e,_0x2d0386)=>{if(_0x464f9e){return _0xc53540(_0x464f9e);}_0x2d0386[a95_0x6328('0x10')]=_0x143046[a95_0x6328('0x25')][a95_0x6328('0x10')];_0x2d0386[a95_0x6328('0x34')](_0x464f9e=>{if(_0x464f9e){return _0xc53540(_0x464f9e);}_0x143046[a95_0x6328('0x17')]('success',{'msg':a95_0x6328('0x3a')});_0x4b6784['redirect'](a95_0x6328('0x2d'));});});};exports[a95_0x6328('0x3b')]=(_0x1e61a6,_0x4a894e,_0x2c44c9)=>{User_1[a95_0x6328('0x27')]['remove']({'_id':_0x1e61a6[a95_0x6328('0x7')]['id']},_0x6287e4=>{if(_0x6287e4){return _0x2c44c9(_0x6287e4);}_0x1e61a6[a95_0x6328('0x1e')]();_0x1e61a6[a95_0x6328('0x17')]('info',{'msg':a95_0x6328('0x3c')});_0x4a894e[a95_0x6328('0x8')]('/');});};exports[a95_0x6328('0x3d')]=(_0xf31d95,_0x33089f,_0x52df7f)=>{const _0x2e399e=_0xf31d95['params'][a95_0x6328('0x3e')];User_1['default']['findById'](_0xf31d95[a95_0x6328('0x7')]['id'],(_0x2425a2,_0x388e11)=>{if(_0x2425a2){return _0x52df7f(_0x2425a2);}_0x388e11[_0x2e399e]=undefined;_0x388e11[a95_0x6328('0x3f')]=_0x388e11[a95_0x6328('0x3f')]['filter'](_0x71227c=>_0x71227c[a95_0x6328('0x40')]!==_0x2e399e);_0x388e11['save'](_0x2425a2=>{if(_0x2425a2){return _0x52df7f(_0x2425a2);}_0xf31d95['flash'](a95_0x6328('0x41'),{'msg':_0x2e399e+a95_0x6328('0x42')});_0x33089f[a95_0x6328('0x8')](a95_0x6328('0x2d'));});});};exports[a95_0x6328('0x43')]=(_0x2bcef8,_0x3aaa9d,_0x4830fb)=>{if(_0x2bcef8[a95_0x6328('0x44')]()){return _0x3aaa9d[a95_0x6328('0x8')]('/');}User_1[a95_0x6328('0x27')][a95_0x6328('0x28')]({'passwordResetToken':_0x2bcef8[a95_0x6328('0x45')][a95_0x6328('0x46')]})[a95_0x6328('0x47')](a95_0x6328('0x48'))['gt'](Date[a95_0x6328('0x49')]())[a95_0x6328('0x4a')]((_0x126083,_0x16c920)=>{if(_0x126083){return _0x4830fb(_0x126083);}if(!_0x16c920){_0x2bcef8[a95_0x6328('0x17')]('errors',{'msg':a95_0x6328('0x4b')});return _0x3aaa9d[a95_0x6328('0x8')](a95_0x6328('0x4c'));}_0x3aaa9d[a95_0x6328('0x9')](a95_0x6328('0x4d'),{'title':a95_0x6328('0x4e')});});};exports[a95_0x6328('0x4f')]=(_0x558cdc,_0x3ff9c4,_0x5c0744)=>{_0x558cdc[a95_0x6328('0x21')](a95_0x6328('0x10'),a95_0x6328('0x50'))['len']({'min':0x4});_0x558cdc['assert']('confirm',a95_0x6328('0x51'))['equals'](_0x558cdc[a95_0x6328('0x25')][a95_0x6328('0x10')]);const _0x199c31=_0x558cdc[a95_0x6328('0x15')]();if(_0x199c31){_0x558cdc[a95_0x6328('0x17')](a95_0x6328('0x16'),_0x199c31);return _0x3ff9c4[a95_0x6328('0x8')](a95_0x6328('0x52'));}async_1[a95_0x6328('0x27')]['waterfall']([function resetPassword(_0x5b6a88){User_1['default'][a95_0x6328('0x28')]({'passwordResetToken':_0x558cdc[a95_0x6328('0x45')][a95_0x6328('0x46')]})['where'](a95_0x6328('0x48'))['gt'](Date[a95_0x6328('0x49')]())['exec']((_0x1910c8,_0x21ccea)=>{if(_0x1910c8){return _0x5c0744(_0x1910c8);}if(!_0x21ccea){_0x558cdc['flash'](a95_0x6328('0x16'),{'msg':a95_0x6328('0x4b')});return _0x3ff9c4[a95_0x6328('0x8')](a95_0x6328('0x52'));}_0x21ccea[a95_0x6328('0x10')]=_0x558cdc[a95_0x6328('0x25')][a95_0x6328('0x10')];_0x21ccea[a95_0x6328('0x53')]=undefined;_0x21ccea[a95_0x6328('0x48')]=undefined;_0x21ccea[a95_0x6328('0x34')](_0x1910c8=>{if(_0x1910c8){return _0x5c0744(_0x1910c8);}_0x558cdc[a95_0x6328('0x1a')](_0x21ccea,_0x1910c8=>{_0x5b6a88(_0x1910c8,_0x21ccea);});});});},function sendResetPasswordEmail(_0x10ada4,_0x28b356){const _0x12e8a8=nodemailer_1[a95_0x6328('0x27')][a95_0x6328('0x54')]({'service':a95_0x6328('0x55'),'auth':{'user':process[a95_0x6328('0x56')][a95_0x6328('0x57')],'pass':process[a95_0x6328('0x56')]['SENDGRID_PASSWORD']}});const _0x849a7a={'to':_0x10ada4[a95_0x6328('0xd')],'from':a95_0x6328('0x58'),'subject':a95_0x6328('0x59'),'text':a95_0x6328('0x5a')+_0x10ada4['email']+a95_0x6328('0x5b')};_0x12e8a8[a95_0x6328('0x5c')](_0x849a7a,_0x311872=>{_0x558cdc[a95_0x6328('0x17')]('success',{'msg':a95_0x6328('0x5d')});_0x28b356(_0x311872);});}],_0x30717f=>{if(_0x30717f){return _0x5c0744(_0x30717f);}_0x3ff9c4['redirect']('/');});};exports[a95_0x6328('0x5e')]=(_0xe8d50b,_0x92342b)=>{if(_0xe8d50b[a95_0x6328('0x44')]()){return _0x92342b[a95_0x6328('0x8')]('/');}_0x92342b[a95_0x6328('0x9')]('account/forgot',{'title':a95_0x6328('0x5f')});};exports['postForgot']=(_0x4fe47f,_0x2467e0,_0x1189fc)=>{_0x4fe47f[a95_0x6328('0x21')]('email',a95_0x6328('0x2c'))[a95_0x6328('0xf')]();_0x4fe47f[a95_0x6328('0x13')](a95_0x6328('0xd'))[a95_0x6328('0x14')]({'gmail_remove_dots':![]});const _0x2fca8d=_0x4fe47f['validationErrors']();if(_0x2fca8d){_0x4fe47f[a95_0x6328('0x17')]('errors',_0x2fca8d);return _0x2467e0[a95_0x6328('0x8')]('/forgot');}async_1[a95_0x6328('0x27')]['waterfall']([function createRandomToken(_0x54af47){crypto_1[a95_0x6328('0x27')][a95_0x6328('0x60')](0x10,(_0x2dcd2d,_0x181c0d)=>{const _0x42b957=_0x181c0d[a95_0x6328('0x61')](a95_0x6328('0x62'));_0x54af47(_0x2dcd2d,_0x42b957);});},function setRandomToken(_0x3e6acd,_0x213c23){User_1[a95_0x6328('0x27')]['findOne']({'email':_0x4fe47f[a95_0x6328('0x25')]['email']},(_0x4e0dba,_0x5415d7)=>{if(_0x4e0dba){return _0x213c23(_0x4e0dba);}if(!_0x5415d7){_0x4fe47f[a95_0x6328('0x17')]('errors',{'msg':a95_0x6328('0x63')});return _0x2467e0['redirect'](a95_0x6328('0x4c'));}_0x5415d7['passwordResetToken']=_0x3e6acd;_0x5415d7[a95_0x6328('0x48')]=Date[a95_0x6328('0x49')]()+0x36ee80;_0x5415d7[a95_0x6328('0x34')](_0x4e0dba=>{_0x213c23(_0x4e0dba,_0x3e6acd,_0x5415d7);});});},function sendForgotPasswordEmail(_0xf99c65,_0xfee47b,_0x1f487f){const _0x175eae=nodemailer_1[a95_0x6328('0x27')][a95_0x6328('0x54')]({'service':a95_0x6328('0x55'),'auth':{'user':process['env'][a95_0x6328('0x57')],'pass':process['env'][a95_0x6328('0x64')]}});const _0x4df371={'to':_0xfee47b[a95_0x6328('0xd')],'from':a95_0x6328('0x65'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x6328('0x66')+_0x4fe47f[a95_0x6328('0x67')][a95_0x6328('0x68')]+a95_0x6328('0x69')+_0xf99c65+a95_0x6328('0x6a')};_0x175eae['sendMail'](_0x4df371,_0x3490f0=>{_0x4fe47f[a95_0x6328('0x17')](a95_0x6328('0x41'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0xfee47b['email']+a95_0x6328('0x6b')});_0x1f487f(_0x3490f0);});}],_0x15764b=>{if(_0x15764b){return _0x1189fc(_0x15764b);}_0x2467e0['redirect'](a95_0x6328('0x4c'));});};