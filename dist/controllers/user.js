var a95_0x283f=['\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','__esModule','defineProperty','async','crypto','passport','../models/User','getLogin','user','account/login','Login','postLogin','assert','email','isEmail','password','notEmpty','normalizeEmail','flash','redirect','/login','default','authenticate','local','errors','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','render','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','sanitize','validationErrors','/account','name','gender','profile','location','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','findById','success','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','provider','tokens','filter','getReset','where','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','confirm','Passwords\x20must\x20match.','back','waterfall','token','now','passwordResetToken','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'];(function(_0x5768b3,_0xae9b1c){var _0x56b01d=function(_0x4c15e6){while(--_0x4c15e6){_0x5768b3['push'](_0x5768b3['shift']());}};_0x56b01d(++_0xae9b1c);}(a95_0x283f,0x7d));var a95_0x4ba4=function(_0x570f8f,_0x304aa1){_0x570f8f=_0x570f8f-0x0;var _0xfae5eb=a95_0x283f[_0x570f8f];return _0xfae5eb;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3dba87){return _0x3dba87&&_0x3dba87[a95_0x4ba4('0x0')]?_0x3dba87:{'default':_0x3dba87};};Object[a95_0x4ba4('0x1')](exports,a95_0x4ba4('0x0'),{'value':!![]});const async_1=__importDefault(require(a95_0x4ba4('0x2')));const crypto_1=__importDefault(require(a95_0x4ba4('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a95_0x4ba4('0x4')));const User_1=__importDefault(require(a95_0x4ba4('0x5')));const request=require('express-validator');exports[a95_0x4ba4('0x6')]=(_0x350108,_0x3b1590)=>{if(_0x350108[a95_0x4ba4('0x7')]){return _0x3b1590['redirect']('/');}_0x3b1590['render'](a95_0x4ba4('0x8'),{'title':a95_0x4ba4('0x9')});};exports[a95_0x4ba4('0xa')]=(_0x2deaae,_0x3d3ff9,_0x12d95c)=>{_0x2deaae[a95_0x4ba4('0xb')](a95_0x4ba4('0xc'),'Email\x20is\x20not\x20valid')[a95_0x4ba4('0xd')]();_0x2deaae[a95_0x4ba4('0xb')](a95_0x4ba4('0xe'),'Password\x20cannot\x20be\x20blank')[a95_0x4ba4('0xf')]();_0x2deaae['sanitize'](a95_0x4ba4('0xc'))[a95_0x4ba4('0x10')]({'gmail_remove_dots':![]});const _0x1e4874=_0x2deaae['validationErrors']();if(_0x1e4874){_0x2deaae[a95_0x4ba4('0x11')]('errors',_0x1e4874);return _0x3d3ff9[a95_0x4ba4('0x12')](a95_0x4ba4('0x13'));}passport_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x15')](a95_0x4ba4('0x16'),(_0x2e9d85,_0x5c2216,_0x33d20f)=>{if(_0x2e9d85){return _0x12d95c(_0x2e9d85);}if(!_0x5c2216){_0x2deaae[a95_0x4ba4('0x11')](a95_0x4ba4('0x17'),_0x33d20f[a95_0x4ba4('0x18')]);return _0x3d3ff9['redirect'](a95_0x4ba4('0x13'));}_0x2deaae[a95_0x4ba4('0x19')](_0x5c2216,_0x2e9d85=>{if(_0x2e9d85){return _0x12d95c(_0x2e9d85);}_0x2deaae[a95_0x4ba4('0x11')]('success',{'msg':a95_0x4ba4('0x1a')});_0x3d3ff9[a95_0x4ba4('0x12')](_0x2deaae[a95_0x4ba4('0x1b')]['returnTo']||'/');});})(_0x2deaae,_0x3d3ff9,_0x12d95c);};exports[a95_0x4ba4('0x1c')]=(_0x5bd51e,_0x71fdac)=>{_0x5bd51e[a95_0x4ba4('0x1c')]();_0x71fdac[a95_0x4ba4('0x12')]('/');};exports[a95_0x4ba4('0x1d')]=(_0x2229c4,_0x41ced5)=>{if(_0x2229c4[a95_0x4ba4('0x7')]){return _0x41ced5[a95_0x4ba4('0x12')]('/');}_0x41ced5[a95_0x4ba4('0x1e')](a95_0x4ba4('0x1f'),{'title':a95_0x4ba4('0x20')});};exports[a95_0x4ba4('0x21')]=(_0x360ede,_0x5f37e4,_0x46c21c)=>{_0x360ede[a95_0x4ba4('0xb')](a95_0x4ba4('0xc'),a95_0x4ba4('0x22'))['isEmail']();_0x360ede[a95_0x4ba4('0xb')](a95_0x4ba4('0xe'),a95_0x4ba4('0x23'))['len']({'min':0x4});_0x360ede[a95_0x4ba4('0xb')](a95_0x4ba4('0x24'),a95_0x4ba4('0x25'))[a95_0x4ba4('0x26')](_0x360ede[a95_0x4ba4('0x27')][a95_0x4ba4('0xe')]);_0x360ede['sanitize'](a95_0x4ba4('0xc'))[a95_0x4ba4('0x10')]({'gmail_remove_dots':![]});const _0x41666f=_0x360ede['validationErrors']();if(_0x41666f){_0x360ede[a95_0x4ba4('0x11')](a95_0x4ba4('0x17'),_0x41666f);return _0x5f37e4[a95_0x4ba4('0x12')](a95_0x4ba4('0x28'));}const _0x5b9c1d=new User_1[(a95_0x4ba4('0x14'))]({'email':_0x360ede[a95_0x4ba4('0x27')][a95_0x4ba4('0xc')],'password':_0x360ede['body'][a95_0x4ba4('0xe')]});User_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x29')]({'email':_0x360ede[a95_0x4ba4('0x27')][a95_0x4ba4('0xc')]},(_0x23496a,_0x2fe9ee)=>{if(_0x23496a){return _0x46c21c(_0x23496a);}if(_0x2fe9ee){_0x360ede[a95_0x4ba4('0x11')](a95_0x4ba4('0x17'),{'msg':a95_0x4ba4('0x2a')});return _0x5f37e4[a95_0x4ba4('0x12')](a95_0x4ba4('0x28'));}_0x5b9c1d[a95_0x4ba4('0x2b')](_0x23496a=>{if(_0x23496a){return _0x46c21c(_0x23496a);}_0x360ede['logIn'](_0x5b9c1d,_0x23496a=>{if(_0x23496a){return _0x46c21c(_0x23496a);}_0x5f37e4['redirect']('/');});});});};exports[a95_0x4ba4('0x2c')]=(_0x4bb131,_0x2a2dd5)=>{_0x2a2dd5[a95_0x4ba4('0x1e')](a95_0x4ba4('0x2d'),{'title':a95_0x4ba4('0x2e')});};exports[a95_0x4ba4('0x2f')]=(_0x52be9b,_0x8808aa,_0xd649ed)=>{_0x52be9b[a95_0x4ba4('0xb')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x4ba4('0xd')]();_0x52be9b[a95_0x4ba4('0x30')](a95_0x4ba4('0xc'))[a95_0x4ba4('0x10')]({'gmail_remove_dots':![]});const _0x3a53db=_0x52be9b[a95_0x4ba4('0x31')]();if(_0x3a53db){_0x52be9b[a95_0x4ba4('0x11')](a95_0x4ba4('0x17'),_0x3a53db);return _0x8808aa[a95_0x4ba4('0x12')](a95_0x4ba4('0x32'));}User_1[a95_0x4ba4('0x14')]['findById'](_0x52be9b[a95_0x4ba4('0x7')]['id'],(_0x1917fd,_0x3aeea1)=>{if(_0x1917fd){return _0xd649ed(_0x1917fd);}_0x3aeea1[a95_0x4ba4('0xc')]=_0x52be9b[a95_0x4ba4('0x27')][a95_0x4ba4('0xc')]||'';_0x3aeea1['profile'][a95_0x4ba4('0x33')]=_0x52be9b[a95_0x4ba4('0x27')][a95_0x4ba4('0x33')]||'';_0x3aeea1['profile'][a95_0x4ba4('0x34')]=_0x52be9b[a95_0x4ba4('0x27')][a95_0x4ba4('0x34')]||'';_0x3aeea1[a95_0x4ba4('0x35')][a95_0x4ba4('0x36')]=_0x52be9b[a95_0x4ba4('0x27')][a95_0x4ba4('0x36')]||'';_0x3aeea1[a95_0x4ba4('0x35')]['website']=_0x52be9b[a95_0x4ba4('0x27')]['website']||'';_0x3aeea1[a95_0x4ba4('0x2b')](_0x1917fd=>{if(_0x1917fd){if(_0x1917fd[a95_0x4ba4('0x37')]===0x2af8){_0x52be9b['flash'](a95_0x4ba4('0x17'),{'msg':a95_0x4ba4('0x38')});return _0x8808aa[a95_0x4ba4('0x12')](a95_0x4ba4('0x32'));}return _0xd649ed(_0x1917fd);}_0x52be9b['flash']('success',{'msg':a95_0x4ba4('0x39')});_0x8808aa[a95_0x4ba4('0x12')](a95_0x4ba4('0x32'));});});};exports[a95_0x4ba4('0x3a')]=(_0xa96759,_0x2d6a67,_0x1a3059)=>{_0xa96759[a95_0x4ba4('0xb')](a95_0x4ba4('0xe'),a95_0x4ba4('0x23'))['len']({'min':0x4});_0xa96759[a95_0x4ba4('0xb')](a95_0x4ba4('0x24'),a95_0x4ba4('0x25'))[a95_0x4ba4('0x26')](_0xa96759['body']['password']);const _0x5e9d52=_0xa96759['validationErrors']();if(_0x5e9d52){_0xa96759[a95_0x4ba4('0x11')]('errors',_0x5e9d52);return _0x2d6a67[a95_0x4ba4('0x12')](a95_0x4ba4('0x32'));}User_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x3b')](_0xa96759[a95_0x4ba4('0x7')]['id'],(_0x1b1857,_0x3e4266)=>{if(_0x1b1857){return _0x1a3059(_0x1b1857);}_0x3e4266[a95_0x4ba4('0xe')]=_0xa96759[a95_0x4ba4('0x27')][a95_0x4ba4('0xe')];_0x3e4266[a95_0x4ba4('0x2b')](_0x1b1857=>{if(_0x1b1857){return _0x1a3059(_0x1b1857);}_0xa96759[a95_0x4ba4('0x11')](a95_0x4ba4('0x3c'),{'msg':a95_0x4ba4('0x3d')});_0x2d6a67['redirect'](a95_0x4ba4('0x32'));});});};exports[a95_0x4ba4('0x3e')]=(_0x3f2ca6,_0x2c915e,_0x4a9194)=>{User_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x3f')]({'_id':_0x3f2ca6[a95_0x4ba4('0x7')]['id']},_0x40af62=>{if(_0x40af62){return _0x4a9194(_0x40af62);}_0x3f2ca6[a95_0x4ba4('0x1c')]();_0x3f2ca6[a95_0x4ba4('0x11')](a95_0x4ba4('0x40'),{'msg':a95_0x4ba4('0x41')});_0x2c915e[a95_0x4ba4('0x12')]('/');});};exports['getOauthUnlink']=(_0x550ecb,_0x50015f,_0x2d3115)=>{const _0x4592b5=_0x550ecb['params'][a95_0x4ba4('0x42')];User_1['default']['findById'](_0x550ecb[a95_0x4ba4('0x7')]['id'],(_0x525c86,_0x232867)=>{if(_0x525c86){return _0x2d3115(_0x525c86);}_0x232867[_0x4592b5]=undefined;_0x232867[a95_0x4ba4('0x43')]=_0x232867[a95_0x4ba4('0x43')][a95_0x4ba4('0x44')](_0x4e1899=>_0x4e1899['kind']!==_0x4592b5);_0x232867[a95_0x4ba4('0x2b')](_0x525c86=>{if(_0x525c86){return _0x2d3115(_0x525c86);}_0x550ecb[a95_0x4ba4('0x11')]('info',{'msg':_0x4592b5+'\x20account\x20has\x20been\x20unlinked.'});_0x50015f[a95_0x4ba4('0x12')](a95_0x4ba4('0x32'));});});};exports[a95_0x4ba4('0x45')]=(_0x200c32,_0x39b26d,_0x2ee547)=>{if(_0x200c32['isAuthenticated']()){return _0x39b26d['redirect']('/');}User_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x29')]({'passwordResetToken':_0x200c32['params']['token']})[a95_0x4ba4('0x46')](a95_0x4ba4('0x47'))['gt'](Date['now']())['exec']((_0x25cb7e,_0x3787ce)=>{if(_0x25cb7e){return _0x2ee547(_0x25cb7e);}if(!_0x3787ce){_0x200c32[a95_0x4ba4('0x11')](a95_0x4ba4('0x17'),{'msg':a95_0x4ba4('0x48')});return _0x39b26d[a95_0x4ba4('0x12')](a95_0x4ba4('0x49'));}_0x39b26d['render'](a95_0x4ba4('0x4a'),{'title':'Password\x20Reset'});});};exports[a95_0x4ba4('0x4b')]=(_0xd8aa2,_0x5d0a5b,_0xb1a3b7)=>{_0xd8aa2['assert'](a95_0x4ba4('0xe'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')['len']({'min':0x4});_0xd8aa2[a95_0x4ba4('0xb')](a95_0x4ba4('0x4c'),a95_0x4ba4('0x4d'))[a95_0x4ba4('0x26')](_0xd8aa2[a95_0x4ba4('0x27')][a95_0x4ba4('0xe')]);const _0x403a3b=_0xd8aa2[a95_0x4ba4('0x31')]();if(_0x403a3b){_0xd8aa2[a95_0x4ba4('0x11')]('errors',_0x403a3b);return _0x5d0a5b[a95_0x4ba4('0x12')](a95_0x4ba4('0x4e'));}async_1['default'][a95_0x4ba4('0x4f')]([function resetPassword(_0x4c1f22){User_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x29')]({'passwordResetToken':_0xd8aa2['params'][a95_0x4ba4('0x50')]})[a95_0x4ba4('0x46')]('passwordResetExpires')['gt'](Date[a95_0x4ba4('0x51')]())['exec']((_0x2496af,_0x1a8822)=>{if(_0x2496af){return _0xb1a3b7(_0x2496af);}if(!_0x1a8822){_0xd8aa2[a95_0x4ba4('0x11')]('errors',{'msg':a95_0x4ba4('0x48')});return _0x5d0a5b[a95_0x4ba4('0x12')]('back');}_0x1a8822[a95_0x4ba4('0xe')]=_0xd8aa2[a95_0x4ba4('0x27')]['password'];_0x1a8822[a95_0x4ba4('0x52')]=undefined;_0x1a8822['passwordResetExpires']=undefined;_0x1a8822[a95_0x4ba4('0x2b')](_0x2496af=>{if(_0x2496af){return _0xb1a3b7(_0x2496af);}_0xd8aa2[a95_0x4ba4('0x19')](_0x1a8822,_0x2496af=>{_0x4c1f22(_0x2496af,_0x1a8822);});});});},function sendResetPasswordEmail(_0x1c97ad,_0xdc4e1d){const _0x4143fa=nodemailer_1[a95_0x4ba4('0x14')]['createTransport']({'service':a95_0x4ba4('0x53'),'auth':{'user':process[a95_0x4ba4('0x54')][a95_0x4ba4('0x55')],'pass':process[a95_0x4ba4('0x54')]['SENDGRID_PASSWORD']}});const _0x5ef06a={'to':_0x1c97ad[a95_0x4ba4('0xc')],'from':a95_0x4ba4('0x56'),'subject':a95_0x4ba4('0x57'),'text':a95_0x4ba4('0x58')+_0x1c97ad[a95_0x4ba4('0xc')]+a95_0x4ba4('0x59')};_0x4143fa[a95_0x4ba4('0x5a')](_0x5ef06a,_0x4fa11e=>{_0xd8aa2['flash']('success',{'msg':a95_0x4ba4('0x5b')});_0xdc4e1d(_0x4fa11e);});}],_0x1d336c=>{if(_0x1d336c){return _0xb1a3b7(_0x1d336c);}_0x5d0a5b[a95_0x4ba4('0x12')]('/');});};exports[a95_0x4ba4('0x5c')]=(_0x2a7491,_0x4de80a)=>{if(_0x2a7491[a95_0x4ba4('0x5d')]()){return _0x4de80a[a95_0x4ba4('0x12')]('/');}_0x4de80a[a95_0x4ba4('0x1e')]('account/forgot',{'title':a95_0x4ba4('0x5e')});};exports[a95_0x4ba4('0x5f')]=(_0x425720,_0x17d79a,_0x376777)=>{_0x425720['assert'](a95_0x4ba4('0xc'),a95_0x4ba4('0x60'))[a95_0x4ba4('0xd')]();_0x425720['sanitize'](a95_0x4ba4('0xc'))[a95_0x4ba4('0x10')]({'gmail_remove_dots':![]});const _0x372db0=_0x425720[a95_0x4ba4('0x31')]();if(_0x372db0){_0x425720['flash'](a95_0x4ba4('0x17'),_0x372db0);return _0x17d79a[a95_0x4ba4('0x12')](a95_0x4ba4('0x49'));}async_1['default'][a95_0x4ba4('0x4f')]([function createRandomToken(_0x43a99e){crypto_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x61')](0x10,(_0xce4a19,_0x4d9dbb)=>{const _0x2f5538=_0x4d9dbb[a95_0x4ba4('0x62')]('hex');_0x43a99e(_0xce4a19,_0x2f5538);});},function setRandomToken(_0x443cfc,_0x38bc29){User_1[a95_0x4ba4('0x14')][a95_0x4ba4('0x29')]({'email':_0x425720['body']['email']},(_0x41be26,_0x5f2958)=>{if(_0x41be26){return _0x38bc29(_0x41be26);}if(!_0x5f2958){_0x425720[a95_0x4ba4('0x11')](a95_0x4ba4('0x17'),{'msg':a95_0x4ba4('0x63')});return _0x17d79a[a95_0x4ba4('0x12')](a95_0x4ba4('0x49'));}_0x5f2958['passwordResetToken']=_0x443cfc;_0x5f2958[a95_0x4ba4('0x47')]=Date['now']()+0x36ee80;_0x5f2958[a95_0x4ba4('0x2b')](_0x41be26=>{_0x38bc29(_0x41be26,_0x443cfc,_0x5f2958);});});},function sendForgotPasswordEmail(_0x562126,_0x57d283,_0x21c1ba){const _0x5a2559=nodemailer_1[a95_0x4ba4('0x14')]['createTransport']({'service':'SendGrid','auth':{'user':process[a95_0x4ba4('0x54')][a95_0x4ba4('0x55')],'pass':process[a95_0x4ba4('0x54')][a95_0x4ba4('0x64')]}});const _0x644708={'to':_0x57d283[a95_0x4ba4('0xc')],'from':a95_0x4ba4('0x65'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x4ba4('0x66')+_0x425720[a95_0x4ba4('0x67')][a95_0x4ba4('0x68')]+a95_0x4ba4('0x69')+_0x562126+a95_0x4ba4('0x6a')};_0x5a2559[a95_0x4ba4('0x5a')](_0x644708,_0xedfd58=>{_0x425720[a95_0x4ba4('0x11')]('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x57d283[a95_0x4ba4('0xc')]+'\x20with\x20further\x20instructions.'});_0x21c1ba(_0xedfd58);});}],_0x2a79b1=>{if(_0x2a79b1){return _0x376777(_0x2a79b1);}_0x17d79a['redirect'](a95_0x4ba4('0x49'));});};