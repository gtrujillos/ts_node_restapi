var a201_0x5575=['account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','Profile\x20information\x20has\x20been\x20updated.','Passwords\x20do\x20not\x20match','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','equals','back','now','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','defineProperty','__esModule','async','crypto','nodemailer','../models/User','express-validator','user','redirect','render','account/login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','flash','authenticate','local','errors','message','/login','success','session','returnTo','logout','getSignup','account/signup','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','body','validationErrors','/signup','default','findOne','save','logIn'];(function(_0x1929fe,_0x3927c4){var _0x451126=function(_0x20c31f){while(--_0x20c31f){_0x1929fe['push'](_0x1929fe['shift']());}};_0x451126(++_0x3927c4);}(a201_0x5575,0x1ec));var a201_0x11b8=function(_0x15c8c5,_0x160a32){_0x15c8c5=_0x15c8c5-0x0;var _0x17c9c8=a201_0x5575[_0x15c8c5];return _0x17c9c8;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1534d5){return _0x1534d5&&_0x1534d5['__esModule']?_0x1534d5:{'default':_0x1534d5};};Object[a201_0x11b8('0x0')](exports,a201_0x11b8('0x1'),{'value':!![]});const async_1=__importDefault(require(a201_0x11b8('0x2')));const crypto_1=__importDefault(require(a201_0x11b8('0x3')));const nodemailer_1=__importDefault(require(a201_0x11b8('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a201_0x11b8('0x5')));const request=require(a201_0x11b8('0x6'));exports['getLogin']=(_0x962b5,_0x5998cf)=>{if(_0x962b5[a201_0x11b8('0x7')]){return _0x5998cf[a201_0x11b8('0x8')]('/');}_0x5998cf[a201_0x11b8('0x9')](a201_0x11b8('0xa'),{'title':'Login'});};exports[a201_0x11b8('0xb')]=(_0x284a54,_0x3bef2e,_0x3f6885)=>{_0x284a54[a201_0x11b8('0xc')]('email',a201_0x11b8('0xd'))[a201_0x11b8('0xe')]();_0x284a54[a201_0x11b8('0xc')](a201_0x11b8('0xf'),a201_0x11b8('0x10'))[a201_0x11b8('0x11')]();_0x284a54[a201_0x11b8('0x12')](a201_0x11b8('0x13'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x251454=_0x284a54['validationErrors']();if(_0x251454){_0x284a54[a201_0x11b8('0x14')]('errors',_0x251454);return _0x3bef2e[a201_0x11b8('0x8')]('/login');}passport_1['default'][a201_0x11b8('0x15')](a201_0x11b8('0x16'),(_0x3671a0,_0x40b910,_0x26e8f4)=>{if(_0x3671a0){return _0x3f6885(_0x3671a0);}if(!_0x40b910){_0x284a54['flash'](a201_0x11b8('0x17'),_0x26e8f4[a201_0x11b8('0x18')]);return _0x3bef2e[a201_0x11b8('0x8')](a201_0x11b8('0x19'));}_0x284a54['logIn'](_0x40b910,_0x3671a0=>{if(_0x3671a0){return _0x3f6885(_0x3671a0);}_0x284a54[a201_0x11b8('0x14')](a201_0x11b8('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x3bef2e[a201_0x11b8('0x8')](_0x284a54[a201_0x11b8('0x1b')][a201_0x11b8('0x1c')]||'/');});})(_0x284a54,_0x3bef2e,_0x3f6885);};exports[a201_0x11b8('0x1d')]=(_0x4a39e8,_0x18b445)=>{_0x4a39e8['logout']();_0x18b445[a201_0x11b8('0x8')]('/');};exports[a201_0x11b8('0x1e')]=(_0x513beb,_0x427c22)=>{if(_0x513beb[a201_0x11b8('0x7')]){return _0x427c22[a201_0x11b8('0x8')]('/');}_0x427c22[a201_0x11b8('0x9')](a201_0x11b8('0x1f'),{'title':'Create\x20Account'});};exports[a201_0x11b8('0x20')]=(_0x1daee0,_0x3ee87f,_0x3fe9db)=>{_0x1daee0[a201_0x11b8('0xc')](a201_0x11b8('0x13'),a201_0x11b8('0xd'))['isEmail']();_0x1daee0[a201_0x11b8('0xc')]('password',a201_0x11b8('0x21'))[a201_0x11b8('0x22')]({'min':0x4});_0x1daee0[a201_0x11b8('0xc')](a201_0x11b8('0x23'),'Passwords\x20do\x20not\x20match')['equals'](_0x1daee0[a201_0x11b8('0x24')][a201_0x11b8('0xf')]);_0x1daee0[a201_0x11b8('0x12')](a201_0x11b8('0x13'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1ff622=_0x1daee0[a201_0x11b8('0x25')]();if(_0x1ff622){_0x1daee0[a201_0x11b8('0x14')](a201_0x11b8('0x17'),_0x1ff622);return _0x3ee87f[a201_0x11b8('0x8')](a201_0x11b8('0x26'));}const _0x467cae=new User_1[(a201_0x11b8('0x27'))]({'email':_0x1daee0[a201_0x11b8('0x24')][a201_0x11b8('0x13')],'password':_0x1daee0[a201_0x11b8('0x24')][a201_0x11b8('0xf')]});User_1[a201_0x11b8('0x27')][a201_0x11b8('0x28')]({'email':_0x1daee0[a201_0x11b8('0x24')][a201_0x11b8('0x13')]},(_0x922227,_0x53ea6c)=>{if(_0x922227){return _0x3fe9db(_0x922227);}if(_0x53ea6c){_0x1daee0[a201_0x11b8('0x14')](a201_0x11b8('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x3ee87f[a201_0x11b8('0x8')]('/signup');}_0x467cae[a201_0x11b8('0x29')](_0x922227=>{if(_0x922227){return _0x3fe9db(_0x922227);}_0x1daee0[a201_0x11b8('0x2a')](_0x467cae,_0x922227=>{if(_0x922227){return _0x3fe9db(_0x922227);}_0x3ee87f[a201_0x11b8('0x8')]('/');});});});};exports['getAccount']=(_0x1e5ea0,_0x3d255f)=>{_0x3d255f[a201_0x11b8('0x9')](a201_0x11b8('0x2b'),{'title':'Account\x20Management'});};exports[a201_0x11b8('0x2c')]=(_0x2a695a,_0x43ecbe,_0x4da24d)=>{_0x2a695a[a201_0x11b8('0xc')](a201_0x11b8('0x13'),a201_0x11b8('0x2d'))[a201_0x11b8('0xe')]();_0x2a695a[a201_0x11b8('0x12')](a201_0x11b8('0x13'))[a201_0x11b8('0x2e')]({'gmail_remove_dots':![]});const _0x4d6ef7=_0x2a695a[a201_0x11b8('0x25')]();if(_0x4d6ef7){_0x2a695a['flash'](a201_0x11b8('0x17'),_0x4d6ef7);return _0x43ecbe[a201_0x11b8('0x8')](a201_0x11b8('0x2f'));}User_1['default'][a201_0x11b8('0x30')](_0x2a695a['user']['id'],(_0x18135c,_0xa0f0b6)=>{if(_0x18135c){return _0x4da24d(_0x18135c);}_0xa0f0b6[a201_0x11b8('0x13')]=_0x2a695a[a201_0x11b8('0x24')][a201_0x11b8('0x13')]||'';_0xa0f0b6[a201_0x11b8('0x31')][a201_0x11b8('0x32')]=_0x2a695a['body'][a201_0x11b8('0x32')]||'';_0xa0f0b6[a201_0x11b8('0x31')][a201_0x11b8('0x33')]=_0x2a695a[a201_0x11b8('0x24')][a201_0x11b8('0x33')]||'';_0xa0f0b6[a201_0x11b8('0x31')][a201_0x11b8('0x34')]=_0x2a695a[a201_0x11b8('0x24')][a201_0x11b8('0x34')]||'';_0xa0f0b6[a201_0x11b8('0x31')][a201_0x11b8('0x35')]=_0x2a695a[a201_0x11b8('0x24')][a201_0x11b8('0x35')]||'';_0xa0f0b6['save'](_0x18135c=>{if(_0x18135c){if(_0x18135c['code']===0x2af8){_0x2a695a[a201_0x11b8('0x14')](a201_0x11b8('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x43ecbe[a201_0x11b8('0x8')](a201_0x11b8('0x2f'));}return _0x4da24d(_0x18135c);}_0x2a695a[a201_0x11b8('0x14')](a201_0x11b8('0x1a'),{'msg':a201_0x11b8('0x36')});_0x43ecbe[a201_0x11b8('0x8')]('/account');});});};exports['postUpdatePassword']=(_0x591034,_0x1935db,_0x2494b8)=>{_0x591034['assert'](a201_0x11b8('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x591034[a201_0x11b8('0xc')](a201_0x11b8('0x23'),a201_0x11b8('0x37'))['equals'](_0x591034[a201_0x11b8('0x24')][a201_0x11b8('0xf')]);const _0x269469=_0x591034[a201_0x11b8('0x25')]();if(_0x269469){_0x591034[a201_0x11b8('0x14')](a201_0x11b8('0x17'),_0x269469);return _0x1935db['redirect']('/account');}User_1['default'][a201_0x11b8('0x30')](_0x591034['user']['id'],(_0x118757,_0x88b4a6)=>{if(_0x118757){return _0x2494b8(_0x118757);}_0x88b4a6['password']=_0x591034[a201_0x11b8('0x24')]['password'];_0x88b4a6[a201_0x11b8('0x29')](_0x118757=>{if(_0x118757){return _0x2494b8(_0x118757);}_0x591034[a201_0x11b8('0x14')](a201_0x11b8('0x1a'),{'msg':'Password\x20has\x20been\x20changed.'});_0x1935db[a201_0x11b8('0x8')](a201_0x11b8('0x2f'));});});};exports[a201_0x11b8('0x38')]=(_0x294e59,_0x5111d1,_0x27518b)=>{User_1[a201_0x11b8('0x27')][a201_0x11b8('0x39')]({'_id':_0x294e59[a201_0x11b8('0x7')]['id']},_0x1c495f=>{if(_0x1c495f){return _0x27518b(_0x1c495f);}_0x294e59[a201_0x11b8('0x1d')]();_0x294e59[a201_0x11b8('0x14')](a201_0x11b8('0x3a'),{'msg':a201_0x11b8('0x3b')});_0x5111d1[a201_0x11b8('0x8')]('/');});};exports[a201_0x11b8('0x3c')]=(_0x355204,_0x30d0f1,_0x5c7d77)=>{const _0x5166f7=_0x355204[a201_0x11b8('0x3d')][a201_0x11b8('0x3e')];User_1['default']['findById'](_0x355204[a201_0x11b8('0x7')]['id'],(_0x1b99c9,_0x4b2f75)=>{if(_0x1b99c9){return _0x5c7d77(_0x1b99c9);}_0x4b2f75[_0x5166f7]=undefined;_0x4b2f75[a201_0x11b8('0x3f')]=_0x4b2f75[a201_0x11b8('0x3f')][a201_0x11b8('0x40')](_0x5bac40=>_0x5bac40[a201_0x11b8('0x41')]!==_0x5166f7);_0x4b2f75[a201_0x11b8('0x29')](_0x1b99c9=>{if(_0x1b99c9){return _0x5c7d77(_0x1b99c9);}_0x355204['flash'](a201_0x11b8('0x3a'),{'msg':_0x5166f7+a201_0x11b8('0x42')});_0x30d0f1['redirect'](a201_0x11b8('0x2f'));});});};exports[a201_0x11b8('0x43')]=(_0x5b8a55,_0x4c5485,_0x2e6847)=>{if(_0x5b8a55[a201_0x11b8('0x44')]()){return _0x4c5485[a201_0x11b8('0x8')]('/');}User_1[a201_0x11b8('0x27')]['findOne']({'passwordResetToken':_0x5b8a55['params'][a201_0x11b8('0x45')]})[a201_0x11b8('0x46')](a201_0x11b8('0x47'))['gt'](Date['now']())[a201_0x11b8('0x48')]((_0x55d013,_0x46f55a)=>{if(_0x55d013){return _0x2e6847(_0x55d013);}if(!_0x46f55a){_0x5b8a55['flash'](a201_0x11b8('0x17'),{'msg':a201_0x11b8('0x49')});return _0x4c5485[a201_0x11b8('0x8')](a201_0x11b8('0x4a'));}_0x4c5485[a201_0x11b8('0x9')](a201_0x11b8('0x4b'),{'title':'Password\x20Reset'});});};exports[a201_0x11b8('0x4c')]=(_0x4b5a6d,_0x1a5141,_0x5d9047)=>{_0x4b5a6d['assert'](a201_0x11b8('0xf'),a201_0x11b8('0x4d'))[a201_0x11b8('0x22')]({'min':0x4});_0x4b5a6d[a201_0x11b8('0xc')](a201_0x11b8('0x4e'),a201_0x11b8('0x4f'))[a201_0x11b8('0x50')](_0x4b5a6d[a201_0x11b8('0x24')]['password']);const _0x591431=_0x4b5a6d[a201_0x11b8('0x25')]();if(_0x591431){_0x4b5a6d[a201_0x11b8('0x14')](a201_0x11b8('0x17'),_0x591431);return _0x1a5141[a201_0x11b8('0x8')](a201_0x11b8('0x51'));}async_1['default']['waterfall']([function resetPassword(_0x4b806e){User_1[a201_0x11b8('0x27')][a201_0x11b8('0x28')]({'passwordResetToken':_0x4b5a6d[a201_0x11b8('0x3d')][a201_0x11b8('0x45')]})[a201_0x11b8('0x46')]('passwordResetExpires')['gt'](Date[a201_0x11b8('0x52')]())[a201_0x11b8('0x48')]((_0x15a4c8,_0x318782)=>{if(_0x15a4c8){return _0x5d9047(_0x15a4c8);}if(!_0x318782){_0x4b5a6d[a201_0x11b8('0x14')](a201_0x11b8('0x17'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x1a5141[a201_0x11b8('0x8')]('back');}_0x318782['password']=_0x4b5a6d[a201_0x11b8('0x24')][a201_0x11b8('0xf')];_0x318782[a201_0x11b8('0x53')]=undefined;_0x318782['passwordResetExpires']=undefined;_0x318782['save'](_0x15a4c8=>{if(_0x15a4c8){return _0x5d9047(_0x15a4c8);}_0x4b5a6d[a201_0x11b8('0x2a')](_0x318782,_0x15a4c8=>{_0x4b806e(_0x15a4c8,_0x318782);});});});},function sendResetPasswordEmail(_0x182bcb,_0x37fdce){const _0x3f60e7=nodemailer_1[a201_0x11b8('0x27')][a201_0x11b8('0x54')]({'service':a201_0x11b8('0x55'),'auth':{'user':process[a201_0x11b8('0x56')][a201_0x11b8('0x57')],'pass':process[a201_0x11b8('0x56')]['SENDGRID_PASSWORD']}});const _0x493cde={'to':_0x182bcb[a201_0x11b8('0x13')],'from':a201_0x11b8('0x58'),'subject':a201_0x11b8('0x59'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x182bcb[a201_0x11b8('0x13')]+a201_0x11b8('0x5a')};_0x3f60e7[a201_0x11b8('0x5b')](_0x493cde,_0x5e644c=>{_0x4b5a6d['flash'](a201_0x11b8('0x1a'),{'msg':a201_0x11b8('0x5c')});_0x37fdce(_0x5e644c);});}],_0x404f85=>{if(_0x404f85){return _0x5d9047(_0x404f85);}_0x1a5141[a201_0x11b8('0x8')]('/');});};exports['getForgot']=(_0x4cbfa8,_0x5c3395)=>{if(_0x4cbfa8[a201_0x11b8('0x44')]()){return _0x5c3395[a201_0x11b8('0x8')]('/');}_0x5c3395[a201_0x11b8('0x9')](a201_0x11b8('0x5d'),{'title':a201_0x11b8('0x5e')});};exports[a201_0x11b8('0x5f')]=(_0x1c1a69,_0x592940,_0x4bf93a)=>{_0x1c1a69[a201_0x11b8('0xc')](a201_0x11b8('0x13'),a201_0x11b8('0x2d'))['isEmail']();_0x1c1a69[a201_0x11b8('0x12')](a201_0x11b8('0x13'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4c08b0=_0x1c1a69[a201_0x11b8('0x25')]();if(_0x4c08b0){_0x1c1a69[a201_0x11b8('0x14')](a201_0x11b8('0x17'),_0x4c08b0);return _0x592940[a201_0x11b8('0x8')](a201_0x11b8('0x4a'));}async_1[a201_0x11b8('0x27')][a201_0x11b8('0x60')]([function createRandomToken(_0x2c8666){crypto_1[a201_0x11b8('0x27')][a201_0x11b8('0x61')](0x10,(_0x2ca3c9,_0xbf8403)=>{const _0x344b9a=_0xbf8403[a201_0x11b8('0x62')](a201_0x11b8('0x63'));_0x2c8666(_0x2ca3c9,_0x344b9a);});},function setRandomToken(_0x1dd603,_0x2d02e1){User_1[a201_0x11b8('0x27')][a201_0x11b8('0x28')]({'email':_0x1c1a69[a201_0x11b8('0x24')]['email']},(_0x1492a3,_0x4bc792)=>{if(_0x1492a3){return _0x2d02e1(_0x1492a3);}if(!_0x4bc792){_0x1c1a69['flash']('errors',{'msg':a201_0x11b8('0x64')});return _0x592940[a201_0x11b8('0x8')](a201_0x11b8('0x4a'));}_0x4bc792[a201_0x11b8('0x53')]=_0x1dd603;_0x4bc792[a201_0x11b8('0x47')]=Date[a201_0x11b8('0x52')]()+0x36ee80;_0x4bc792[a201_0x11b8('0x29')](_0x1492a3=>{_0x2d02e1(_0x1492a3,_0x1dd603,_0x4bc792);});});},function sendForgotPasswordEmail(_0x48f3d9,_0x43a461,_0x1fe435){const _0xce399=nodemailer_1[a201_0x11b8('0x27')][a201_0x11b8('0x54')]({'service':a201_0x11b8('0x55'),'auth':{'user':process[a201_0x11b8('0x56')]['SENDGRID_USER'],'pass':process[a201_0x11b8('0x56')][a201_0x11b8('0x65')]}});const _0x3ae0d9={'to':_0x43a461[a201_0x11b8('0x13')],'from':a201_0x11b8('0x66'),'subject':a201_0x11b8('0x67'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x1c1a69[a201_0x11b8('0x68')]['host']+'/reset/'+_0x48f3d9+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0xce399[a201_0x11b8('0x5b')](_0x3ae0d9,_0x4b8c1d=>{_0x1c1a69['flash'](a201_0x11b8('0x3a'),{'msg':a201_0x11b8('0x69')+_0x43a461[a201_0x11b8('0x13')]+a201_0x11b8('0x6a')});_0x1fe435(_0x4b8c1d);});}],_0x589d6d=>{if(_0x589d6d){return _0x4bf93a(_0x589d6d);}_0x592940[a201_0x11b8('0x8')](a201_0x11b8('0x4a'));});};