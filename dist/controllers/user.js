var a88_0x2335=['postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','account/profile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','params','provider','findById','tokens','kind','info','getReset','isAuthenticated','token','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','postReset','confirm','back','waterfall','where','passwordResetExpires','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','randomBytes','toString','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','/reset/','\x20with\x20further\x20instructions.','__importDefault','defineProperty','__esModule','async','nodemailer','../models/User','express-validator','user','redirect','render','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','/login','default','authenticate','local','errors','success','session','returnTo','logout','getSignup','account/signup','Create\x20Account'];(function(_0x4b315c,_0x2d152c){var _0x35a9d1=function(_0x151d7f){while(--_0x151d7f){_0x4b315c['push'](_0x4b315c['shift']());}};_0x35a9d1(++_0x2d152c);}(a88_0x2335,0x109));var a88_0x2768=function(_0x10382f,_0x52ae91){_0x10382f=_0x10382f-0x0;var _0x452068=a88_0x2335[_0x10382f];return _0x452068;};'use strict';var __importDefault=this&&this[a88_0x2768('0x0')]||function(_0x1d1e35){return _0x1d1e35&&_0x1d1e35['__esModule']?_0x1d1e35:{'default':_0x1d1e35};};Object[a88_0x2768('0x1')](exports,a88_0x2768('0x2'),{'value':!![]});const async_1=__importDefault(require(a88_0x2768('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a88_0x2768('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a88_0x2768('0x5')));const request=require(a88_0x2768('0x6'));exports['getLogin']=(_0x5cceee,_0x2a6d5c)=>{if(_0x5cceee[a88_0x2768('0x7')]){return _0x2a6d5c[a88_0x2768('0x8')]('/');}_0x2a6d5c[a88_0x2768('0x9')]('account/login',{'title':a88_0x2768('0xa')});};exports[a88_0x2768('0xb')]=(_0x37be6f,_0x1257ba,_0x1d2f77)=>{_0x37be6f['assert'](a88_0x2768('0xc'),a88_0x2768('0xd'))[a88_0x2768('0xe')]();_0x37be6f[a88_0x2768('0xf')](a88_0x2768('0x10'),a88_0x2768('0x11'))[a88_0x2768('0x12')]();_0x37be6f[a88_0x2768('0x13')](a88_0x2768('0xc'))[a88_0x2768('0x14')]({'gmail_remove_dots':![]});const _0x165616=_0x37be6f[a88_0x2768('0x15')]();if(_0x165616){_0x37be6f[a88_0x2768('0x16')]('errors',_0x165616);return _0x1257ba['redirect'](a88_0x2768('0x17'));}passport_1[a88_0x2768('0x18')][a88_0x2768('0x19')](a88_0x2768('0x1a'),(_0x5f1971,_0x24270f,_0x536e9f)=>{if(_0x5f1971){return _0x1d2f77(_0x5f1971);}if(!_0x24270f){_0x37be6f[a88_0x2768('0x16')](a88_0x2768('0x1b'),_0x536e9f['message']);return _0x1257ba['redirect'](a88_0x2768('0x17'));}_0x37be6f['logIn'](_0x24270f,_0x5f1971=>{if(_0x5f1971){return _0x1d2f77(_0x5f1971);}_0x37be6f[a88_0x2768('0x16')](a88_0x2768('0x1c'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x1257ba[a88_0x2768('0x8')](_0x37be6f[a88_0x2768('0x1d')][a88_0x2768('0x1e')]||'/');});})(_0x37be6f,_0x1257ba,_0x1d2f77);};exports['logout']=(_0x520314,_0x20b43d)=>{_0x520314[a88_0x2768('0x1f')]();_0x20b43d[a88_0x2768('0x8')]('/');};exports[a88_0x2768('0x20')]=(_0x103210,_0x2b99ad)=>{if(_0x103210[a88_0x2768('0x7')]){return _0x2b99ad['redirect']('/');}_0x2b99ad[a88_0x2768('0x9')](a88_0x2768('0x21'),{'title':a88_0x2768('0x22')});};exports[a88_0x2768('0x23')]=(_0x351f6f,_0x3be462,_0x480a5c)=>{_0x351f6f[a88_0x2768('0xf')]('email',a88_0x2768('0xd'))[a88_0x2768('0xe')]();_0x351f6f['assert'](a88_0x2768('0x10'),a88_0x2768('0x24'))[a88_0x2768('0x25')]({'min':0x4});_0x351f6f[a88_0x2768('0xf')](a88_0x2768('0x26'),a88_0x2768('0x27'))[a88_0x2768('0x28')](_0x351f6f[a88_0x2768('0x29')][a88_0x2768('0x10')]);_0x351f6f[a88_0x2768('0x13')]('email')[a88_0x2768('0x14')]({'gmail_remove_dots':![]});const _0x28869c=_0x351f6f[a88_0x2768('0x15')]();if(_0x28869c){_0x351f6f['flash']('errors',_0x28869c);return _0x3be462[a88_0x2768('0x8')](a88_0x2768('0x2a'));}const _0x23d5ff=new User_1['default']({'email':_0x351f6f[a88_0x2768('0x29')][a88_0x2768('0xc')],'password':_0x351f6f['body']['password']});User_1[a88_0x2768('0x18')][a88_0x2768('0x2b')]({'email':_0x351f6f['body'][a88_0x2768('0xc')]},(_0x3968c7,_0x4e8a2c)=>{if(_0x3968c7){return _0x480a5c(_0x3968c7);}if(_0x4e8a2c){_0x351f6f[a88_0x2768('0x16')]('errors',{'msg':a88_0x2768('0x2c')});return _0x3be462[a88_0x2768('0x8')](a88_0x2768('0x2a'));}_0x23d5ff[a88_0x2768('0x2d')](_0x3968c7=>{if(_0x3968c7){return _0x480a5c(_0x3968c7);}_0x351f6f[a88_0x2768('0x2e')](_0x23d5ff,_0x3968c7=>{if(_0x3968c7){return _0x480a5c(_0x3968c7);}_0x3be462[a88_0x2768('0x8')]('/');});});});};exports[a88_0x2768('0x2f')]=(_0xb17b7c,_0x1faa0f)=>{_0x1faa0f[a88_0x2768('0x9')](a88_0x2768('0x30'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x452945,_0x427e54,_0x10d876)=>{_0x452945[a88_0x2768('0xf')](a88_0x2768('0xc'),a88_0x2768('0x31'))['isEmail']();_0x452945[a88_0x2768('0x13')](a88_0x2768('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1dfbc2=_0x452945[a88_0x2768('0x15')]();if(_0x1dfbc2){_0x452945[a88_0x2768('0x16')](a88_0x2768('0x1b'),_0x1dfbc2);return _0x427e54[a88_0x2768('0x8')](a88_0x2768('0x32'));}User_1[a88_0x2768('0x18')]['findById'](_0x452945[a88_0x2768('0x7')]['id'],(_0x19dc57,_0x3c864e)=>{if(_0x19dc57){return _0x10d876(_0x19dc57);}_0x3c864e[a88_0x2768('0xc')]=_0x452945['body'][a88_0x2768('0xc')]||'';_0x3c864e[a88_0x2768('0x33')][a88_0x2768('0x34')]=_0x452945['body']['name']||'';_0x3c864e[a88_0x2768('0x33')][a88_0x2768('0x35')]=_0x452945[a88_0x2768('0x29')][a88_0x2768('0x35')]||'';_0x3c864e[a88_0x2768('0x33')][a88_0x2768('0x36')]=_0x452945[a88_0x2768('0x29')][a88_0x2768('0x36')]||'';_0x3c864e['profile'][a88_0x2768('0x37')]=_0x452945[a88_0x2768('0x29')][a88_0x2768('0x37')]||'';_0x3c864e[a88_0x2768('0x2d')](_0x19dc57=>{if(_0x19dc57){if(_0x19dc57['code']===0x2af8){_0x452945[a88_0x2768('0x16')](a88_0x2768('0x1b'),{'msg':a88_0x2768('0x38')});return _0x427e54[a88_0x2768('0x8')](a88_0x2768('0x32'));}return _0x10d876(_0x19dc57);}_0x452945['flash'](a88_0x2768('0x1c'),{'msg':a88_0x2768('0x39')});_0x427e54[a88_0x2768('0x8')](a88_0x2768('0x32'));});});};exports[a88_0x2768('0x3a')]=(_0x1945d2,_0x48f43e,_0x13d552)=>{_0x1945d2[a88_0x2768('0xf')](a88_0x2768('0x10'),a88_0x2768('0x24'))[a88_0x2768('0x25')]({'min':0x4});_0x1945d2[a88_0x2768('0xf')](a88_0x2768('0x26'),a88_0x2768('0x27'))[a88_0x2768('0x28')](_0x1945d2[a88_0x2768('0x29')][a88_0x2768('0x10')]);const _0x36badf=_0x1945d2['validationErrors']();if(_0x36badf){_0x1945d2[a88_0x2768('0x16')](a88_0x2768('0x1b'),_0x36badf);return _0x48f43e['redirect'](a88_0x2768('0x32'));}User_1[a88_0x2768('0x18')]['findById'](_0x1945d2[a88_0x2768('0x7')]['id'],(_0x2c584a,_0x486fa0)=>{if(_0x2c584a){return _0x13d552(_0x2c584a);}_0x486fa0[a88_0x2768('0x10')]=_0x1945d2['body'][a88_0x2768('0x10')];_0x486fa0['save'](_0x2c584a=>{if(_0x2c584a){return _0x13d552(_0x2c584a);}_0x1945d2['flash'](a88_0x2768('0x1c'),{'msg':a88_0x2768('0x3b')});_0x48f43e[a88_0x2768('0x8')](a88_0x2768('0x32'));});});};exports[a88_0x2768('0x3c')]=(_0x47d501,_0x32dad2,_0x31398c)=>{User_1[a88_0x2768('0x18')][a88_0x2768('0x3d')]({'_id':_0x47d501['user']['id']},_0xa92b84=>{if(_0xa92b84){return _0x31398c(_0xa92b84);}_0x47d501[a88_0x2768('0x1f')]();_0x47d501[a88_0x2768('0x16')]('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x32dad2[a88_0x2768('0x8')]('/');});};exports['getOauthUnlink']=(_0x1b0bde,_0xa3222a,_0x20969a)=>{const _0x12c0f5=_0x1b0bde[a88_0x2768('0x3e')][a88_0x2768('0x3f')];User_1[a88_0x2768('0x18')][a88_0x2768('0x40')](_0x1b0bde[a88_0x2768('0x7')]['id'],(_0x19a3aa,_0x4ac95b)=>{if(_0x19a3aa){return _0x20969a(_0x19a3aa);}_0x4ac95b[_0x12c0f5]=undefined;_0x4ac95b[a88_0x2768('0x41')]=_0x4ac95b[a88_0x2768('0x41')]['filter'](_0x4e52ab=>_0x4e52ab[a88_0x2768('0x42')]!==_0x12c0f5);_0x4ac95b[a88_0x2768('0x2d')](_0x19a3aa=>{if(_0x19a3aa){return _0x20969a(_0x19a3aa);}_0x1b0bde[a88_0x2768('0x16')](a88_0x2768('0x43'),{'msg':_0x12c0f5+'\x20account\x20has\x20been\x20unlinked.'});_0xa3222a[a88_0x2768('0x8')](a88_0x2768('0x32'));});});};exports[a88_0x2768('0x44')]=(_0x8a40eb,_0x33f0fb,_0x22a0ba)=>{if(_0x8a40eb[a88_0x2768('0x45')]()){return _0x33f0fb[a88_0x2768('0x8')]('/');}User_1[a88_0x2768('0x18')]['findOne']({'passwordResetToken':_0x8a40eb[a88_0x2768('0x3e')][a88_0x2768('0x46')]})['where']('passwordResetExpires')['gt'](Date[a88_0x2768('0x47')]())[a88_0x2768('0x48')]((_0x5558f8,_0xf7cc9a)=>{if(_0x5558f8){return _0x22a0ba(_0x5558f8);}if(!_0xf7cc9a){_0x8a40eb[a88_0x2768('0x16')](a88_0x2768('0x1b'),{'msg':a88_0x2768('0x49')});return _0x33f0fb[a88_0x2768('0x8')](a88_0x2768('0x4a'));}_0x33f0fb[a88_0x2768('0x9')]('account/reset',{'title':'Password\x20Reset'});});};exports[a88_0x2768('0x4b')]=(_0x353ac5,_0x5d0364,_0x149ff6)=>{_0x353ac5['assert'](a88_0x2768('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a88_0x2768('0x25')]({'min':0x4});_0x353ac5[a88_0x2768('0xf')](a88_0x2768('0x4c'),'Passwords\x20must\x20match.')[a88_0x2768('0x28')](_0x353ac5[a88_0x2768('0x29')][a88_0x2768('0x10')]);const _0xbdf2b5=_0x353ac5['validationErrors']();if(_0xbdf2b5){_0x353ac5[a88_0x2768('0x16')]('errors',_0xbdf2b5);return _0x5d0364[a88_0x2768('0x8')](a88_0x2768('0x4d'));}async_1[a88_0x2768('0x18')][a88_0x2768('0x4e')]([function resetPassword(_0x18a321){User_1[a88_0x2768('0x18')][a88_0x2768('0x2b')]({'passwordResetToken':_0x353ac5[a88_0x2768('0x3e')][a88_0x2768('0x46')]})[a88_0x2768('0x4f')](a88_0x2768('0x50'))['gt'](Date[a88_0x2768('0x47')]())[a88_0x2768('0x48')]((_0x3c1273,_0x28f2f3)=>{if(_0x3c1273){return _0x149ff6(_0x3c1273);}if(!_0x28f2f3){_0x353ac5[a88_0x2768('0x16')](a88_0x2768('0x1b'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x5d0364[a88_0x2768('0x8')](a88_0x2768('0x4d'));}_0x28f2f3[a88_0x2768('0x10')]=_0x353ac5[a88_0x2768('0x29')][a88_0x2768('0x10')];_0x28f2f3[a88_0x2768('0x51')]=undefined;_0x28f2f3[a88_0x2768('0x50')]=undefined;_0x28f2f3['save'](_0x3c1273=>{if(_0x3c1273){return _0x149ff6(_0x3c1273);}_0x353ac5[a88_0x2768('0x2e')](_0x28f2f3,_0x3c1273=>{_0x18a321(_0x3c1273,_0x28f2f3);});});});},function sendResetPasswordEmail(_0x11cf64,_0x59bf9e){const _0x383157=nodemailer_1[a88_0x2768('0x18')][a88_0x2768('0x52')]({'service':a88_0x2768('0x53'),'auth':{'user':process[a88_0x2768('0x54')][a88_0x2768('0x55')],'pass':process[a88_0x2768('0x54')][a88_0x2768('0x56')]}});const _0x7ce080={'to':_0x11cf64['email'],'from':'express-ts@starter.com','subject':a88_0x2768('0x57'),'text':a88_0x2768('0x58')+_0x11cf64[a88_0x2768('0xc')]+a88_0x2768('0x59')};_0x383157[a88_0x2768('0x5a')](_0x7ce080,_0xdf05fb=>{_0x353ac5['flash'](a88_0x2768('0x1c'),{'msg':a88_0x2768('0x5b')});_0x59bf9e(_0xdf05fb);});}],_0xd42ce6=>{if(_0xd42ce6){return _0x149ff6(_0xd42ce6);}_0x5d0364[a88_0x2768('0x8')]('/');});};exports[a88_0x2768('0x5c')]=(_0x172bbe,_0x111965)=>{if(_0x172bbe[a88_0x2768('0x45')]()){return _0x111965[a88_0x2768('0x8')]('/');}_0x111965['render']('account/forgot',{'title':a88_0x2768('0x5d')});};exports['postForgot']=(_0x215254,_0x32fb6e,_0x160b11)=>{_0x215254[a88_0x2768('0xf')](a88_0x2768('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a88_0x2768('0xe')]();_0x215254[a88_0x2768('0x13')](a88_0x2768('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1ac132=_0x215254[a88_0x2768('0x15')]();if(_0x1ac132){_0x215254[a88_0x2768('0x16')](a88_0x2768('0x1b'),_0x1ac132);return _0x32fb6e[a88_0x2768('0x8')](a88_0x2768('0x4a'));}async_1[a88_0x2768('0x18')][a88_0x2768('0x4e')]([function createRandomToken(_0x342bb3){crypto_1[a88_0x2768('0x18')][a88_0x2768('0x5e')](0x10,(_0x336af9,_0x7ebab0)=>{const _0x40307c=_0x7ebab0[a88_0x2768('0x5f')]('hex');_0x342bb3(_0x336af9,_0x40307c);});},function setRandomToken(_0xb2005c,_0x59fbde){User_1[a88_0x2768('0x18')][a88_0x2768('0x2b')]({'email':_0x215254['body'][a88_0x2768('0xc')]},(_0x1d3532,_0x3d12fd)=>{if(_0x1d3532){return _0x59fbde(_0x1d3532);}if(!_0x3d12fd){_0x215254[a88_0x2768('0x16')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x32fb6e[a88_0x2768('0x8')](a88_0x2768('0x4a'));}_0x3d12fd[a88_0x2768('0x51')]=_0xb2005c;_0x3d12fd['passwordResetExpires']=Date[a88_0x2768('0x47')]()+0x36ee80;_0x3d12fd['save'](_0x1d3532=>{_0x59fbde(_0x1d3532,_0xb2005c,_0x3d12fd);});});},function sendForgotPasswordEmail(_0x1843c4,_0x2a648d,_0xc30db0){const _0x1c8c0b=nodemailer_1['default'][a88_0x2768('0x52')]({'service':a88_0x2768('0x53'),'auth':{'user':process[a88_0x2768('0x54')]['SENDGRID_USER'],'pass':process[a88_0x2768('0x54')][a88_0x2768('0x56')]}});const _0x3cd8d6={'to':_0x2a648d[a88_0x2768('0xc')],'from':'hackathon@starter.com','subject':a88_0x2768('0x60'),'text':a88_0x2768('0x61')+_0x215254['headers']['host']+a88_0x2768('0x62')+_0x1843c4+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x1c8c0b['sendMail'](_0x3cd8d6,_0x34d4b5=>{_0x215254['flash'](a88_0x2768('0x43'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x2a648d[a88_0x2768('0xc')]+a88_0x2768('0x63')});_0xc30db0(_0x34d4b5);});}],_0x104c27=>{if(_0x104c27){return _0x160b11(_0x104c27);}_0x32fb6e[a88_0x2768('0x8')]('/forgot');});};