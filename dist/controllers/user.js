var a95_0x709a=['flash','errors','/login','default','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','redirect','session','returnTo','logout','getSignup','account/signup','Create\x20Account','email','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','name','gender','profile','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','Password\x20has\x20been\x20changed.','remove','info','getOauthUnlink','params','findById','tokens','filter','kind','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hex','passwordResetToken','createTransport','hackathon@starter.com','host','/reset/','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','nodemailer','passport','../models/User','express-validator','getLogin','user','render','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail'];(function(_0x556e79,_0x56234b){var _0x1c6ad8=function(_0x399778){while(--_0x399778){_0x556e79['push'](_0x556e79['shift']());}};_0x1c6ad8(++_0x56234b);}(a95_0x709a,0x19d));var a95_0x4846=function(_0x16083a,_0x154360){_0x16083a=_0x16083a-0x0;var _0x4b2c6d=a95_0x709a[_0x16083a];return _0x4b2c6d;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1d1992){return _0x1d1992&&_0x1d1992[a95_0x4846('0x0')]?_0x1d1992:{'default':_0x1d1992};};Object[a95_0x4846('0x1')](exports,a95_0x4846('0x0'),{'value':!![]});const async_1=__importDefault(require(a95_0x4846('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a95_0x4846('0x3')));const passport_1=__importDefault(require(a95_0x4846('0x4')));const User_1=__importDefault(require(a95_0x4846('0x5')));const request=require(a95_0x4846('0x6'));exports[a95_0x4846('0x7')]=(_0x53b7bf,_0x290f92)=>{if(_0x53b7bf[a95_0x4846('0x8')]){return _0x290f92['redirect']('/');}_0x290f92[a95_0x4846('0x9')]('account/login',{'title':a95_0x4846('0xa')});};exports[a95_0x4846('0xb')]=(_0x55fcd8,_0x35fde1,_0x15bc53)=>{_0x55fcd8[a95_0x4846('0xc')]('email',a95_0x4846('0xd'))[a95_0x4846('0xe')]();_0x55fcd8['assert']('password',a95_0x4846('0xf'))[a95_0x4846('0x10')]();_0x55fcd8[a95_0x4846('0x11')]('email')[a95_0x4846('0x12')]({'gmail_remove_dots':![]});const _0x3f486b=_0x55fcd8['validationErrors']();if(_0x3f486b){_0x55fcd8[a95_0x4846('0x13')](a95_0x4846('0x14'),_0x3f486b);return _0x35fde1['redirect'](a95_0x4846('0x15'));}passport_1[a95_0x4846('0x16')]['authenticate'](a95_0x4846('0x17'),(_0x500f93,_0x1e1e52,_0x32cb42)=>{if(_0x500f93){return _0x15bc53(_0x500f93);}if(!_0x1e1e52){_0x55fcd8[a95_0x4846('0x13')](a95_0x4846('0x14'),_0x32cb42[a95_0x4846('0x18')]);return _0x35fde1['redirect'](a95_0x4846('0x15'));}_0x55fcd8[a95_0x4846('0x19')](_0x1e1e52,_0x500f93=>{if(_0x500f93){return _0x15bc53(_0x500f93);}_0x55fcd8[a95_0x4846('0x13')](a95_0x4846('0x1a'),{'msg':a95_0x4846('0x1b')});_0x35fde1[a95_0x4846('0x1c')](_0x55fcd8[a95_0x4846('0x1d')][a95_0x4846('0x1e')]||'/');});})(_0x55fcd8,_0x35fde1,_0x15bc53);};exports['logout']=(_0x7dcbe9,_0x71593b)=>{_0x7dcbe9[a95_0x4846('0x1f')]();_0x71593b['redirect']('/');};exports[a95_0x4846('0x20')]=(_0x19fc2a,_0x4952a8)=>{if(_0x19fc2a[a95_0x4846('0x8')]){return _0x4952a8['redirect']('/');}_0x4952a8['render'](a95_0x4846('0x21'),{'title':a95_0x4846('0x22')});};exports['postSignup']=(_0x5cd7c2,_0x1c3ece,_0x58d4ba)=>{_0x5cd7c2[a95_0x4846('0xc')](a95_0x4846('0x23'),'Email\x20is\x20not\x20valid')[a95_0x4846('0xe')]();_0x5cd7c2[a95_0x4846('0xc')](a95_0x4846('0x24'),a95_0x4846('0x25'))[a95_0x4846('0x26')]({'min':0x4});_0x5cd7c2[a95_0x4846('0xc')](a95_0x4846('0x27'),a95_0x4846('0x28'))[a95_0x4846('0x29')](_0x5cd7c2[a95_0x4846('0x2a')][a95_0x4846('0x24')]);_0x5cd7c2[a95_0x4846('0x11')](a95_0x4846('0x23'))[a95_0x4846('0x12')]({'gmail_remove_dots':![]});const _0x2bcce9=_0x5cd7c2[a95_0x4846('0x2b')]();if(_0x2bcce9){_0x5cd7c2[a95_0x4846('0x13')]('errors',_0x2bcce9);return _0x1c3ece[a95_0x4846('0x1c')](a95_0x4846('0x2c'));}const _0x1eabe9=new User_1[(a95_0x4846('0x16'))]({'email':_0x5cd7c2[a95_0x4846('0x2a')][a95_0x4846('0x23')],'password':_0x5cd7c2[a95_0x4846('0x2a')][a95_0x4846('0x24')]});User_1[a95_0x4846('0x16')][a95_0x4846('0x2d')]({'email':_0x5cd7c2['body']['email']},(_0x8e872a,_0x108195)=>{if(_0x8e872a){return _0x58d4ba(_0x8e872a);}if(_0x108195){_0x5cd7c2['flash'](a95_0x4846('0x14'),{'msg':a95_0x4846('0x2e')});return _0x1c3ece[a95_0x4846('0x1c')](a95_0x4846('0x2c'));}_0x1eabe9[a95_0x4846('0x2f')](_0x8e872a=>{if(_0x8e872a){return _0x58d4ba(_0x8e872a);}_0x5cd7c2[a95_0x4846('0x19')](_0x1eabe9,_0x8e872a=>{if(_0x8e872a){return _0x58d4ba(_0x8e872a);}_0x1c3ece[a95_0x4846('0x1c')]('/');});});});};exports[a95_0x4846('0x30')]=(_0x539a68,_0x4290fd)=>{_0x4290fd[a95_0x4846('0x9')](a95_0x4846('0x31'),{'title':a95_0x4846('0x32')});};exports[a95_0x4846('0x33')]=(_0xa12b3f,_0x334938,_0x425420)=>{_0xa12b3f[a95_0x4846('0xc')]('email',a95_0x4846('0x34'))[a95_0x4846('0xe')]();_0xa12b3f[a95_0x4846('0x11')](a95_0x4846('0x23'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3851b3=_0xa12b3f[a95_0x4846('0x2b')]();if(_0x3851b3){_0xa12b3f[a95_0x4846('0x13')](a95_0x4846('0x14'),_0x3851b3);return _0x334938[a95_0x4846('0x1c')](a95_0x4846('0x35'));}User_1[a95_0x4846('0x16')]['findById'](_0xa12b3f['user']['id'],(_0x5f5c64,_0x285fba)=>{if(_0x5f5c64){return _0x425420(_0x5f5c64);}_0x285fba[a95_0x4846('0x23')]=_0xa12b3f[a95_0x4846('0x2a')][a95_0x4846('0x23')]||'';_0x285fba['profile'][a95_0x4846('0x36')]=_0xa12b3f[a95_0x4846('0x2a')][a95_0x4846('0x36')]||'';_0x285fba['profile'][a95_0x4846('0x37')]=_0xa12b3f[a95_0x4846('0x2a')]['gender']||'';_0x285fba[a95_0x4846('0x38')]['location']=_0xa12b3f[a95_0x4846('0x2a')]['location']||'';_0x285fba[a95_0x4846('0x38')]['website']=_0xa12b3f[a95_0x4846('0x2a')][a95_0x4846('0x39')]||'';_0x285fba[a95_0x4846('0x2f')](_0x5f5c64=>{if(_0x5f5c64){if(_0x5f5c64[a95_0x4846('0x3a')]===0x2af8){_0xa12b3f[a95_0x4846('0x13')](a95_0x4846('0x14'),{'msg':a95_0x4846('0x3b')});return _0x334938['redirect']('/account');}return _0x425420(_0x5f5c64);}_0xa12b3f[a95_0x4846('0x13')](a95_0x4846('0x1a'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x334938[a95_0x4846('0x1c')]('/account');});});};exports[a95_0x4846('0x3c')]=(_0x2cd2cf,_0x5583d0,_0x41393d)=>{_0x2cd2cf[a95_0x4846('0xc')](a95_0x4846('0x24'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x4846('0x26')]({'min':0x4});_0x2cd2cf[a95_0x4846('0xc')](a95_0x4846('0x27'),a95_0x4846('0x28'))[a95_0x4846('0x29')](_0x2cd2cf[a95_0x4846('0x2a')][a95_0x4846('0x24')]);const _0x45cccb=_0x2cd2cf[a95_0x4846('0x2b')]();if(_0x45cccb){_0x2cd2cf[a95_0x4846('0x13')]('errors',_0x45cccb);return _0x5583d0[a95_0x4846('0x1c')](a95_0x4846('0x35'));}User_1[a95_0x4846('0x16')]['findById'](_0x2cd2cf[a95_0x4846('0x8')]['id'],(_0x56a8c,_0x349e1d)=>{if(_0x56a8c){return _0x41393d(_0x56a8c);}_0x349e1d[a95_0x4846('0x24')]=_0x2cd2cf[a95_0x4846('0x2a')][a95_0x4846('0x24')];_0x349e1d['save'](_0x56a8c=>{if(_0x56a8c){return _0x41393d(_0x56a8c);}_0x2cd2cf[a95_0x4846('0x13')]('success',{'msg':a95_0x4846('0x3d')});_0x5583d0[a95_0x4846('0x1c')](a95_0x4846('0x35'));});});};exports['postDeleteAccount']=(_0x1c6bc6,_0x324c9d,_0x1e1629)=>{User_1[a95_0x4846('0x16')][a95_0x4846('0x3e')]({'_id':_0x1c6bc6['user']['id']},_0x111c3a=>{if(_0x111c3a){return _0x1e1629(_0x111c3a);}_0x1c6bc6['logout']();_0x1c6bc6[a95_0x4846('0x13')](a95_0x4846('0x3f'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x324c9d[a95_0x4846('0x1c')]('/');});};exports[a95_0x4846('0x40')]=(_0x2d33ef,_0x513063,_0x2d9da1)=>{const _0x351f5c=_0x2d33ef[a95_0x4846('0x41')]['provider'];User_1[a95_0x4846('0x16')][a95_0x4846('0x42')](_0x2d33ef[a95_0x4846('0x8')]['id'],(_0x5deed8,_0x23da9c)=>{if(_0x5deed8){return _0x2d9da1(_0x5deed8);}_0x23da9c[_0x351f5c]=undefined;_0x23da9c['tokens']=_0x23da9c[a95_0x4846('0x43')][a95_0x4846('0x44')](_0x4c9825=>_0x4c9825[a95_0x4846('0x45')]!==_0x351f5c);_0x23da9c[a95_0x4846('0x2f')](_0x5deed8=>{if(_0x5deed8){return _0x2d9da1(_0x5deed8);}_0x2d33ef[a95_0x4846('0x13')]('info',{'msg':_0x351f5c+'\x20account\x20has\x20been\x20unlinked.'});_0x513063[a95_0x4846('0x1c')](a95_0x4846('0x35'));});});};exports[a95_0x4846('0x46')]=(_0x553af3,_0x1747ee,_0x1e427b)=>{if(_0x553af3[a95_0x4846('0x47')]()){return _0x1747ee['redirect']('/');}User_1[a95_0x4846('0x16')][a95_0x4846('0x2d')]({'passwordResetToken':_0x553af3['params'][a95_0x4846('0x48')]})[a95_0x4846('0x49')](a95_0x4846('0x4a'))['gt'](Date[a95_0x4846('0x4b')]())[a95_0x4846('0x4c')]((_0x43dcfe,_0x4c9f56)=>{if(_0x43dcfe){return _0x1e427b(_0x43dcfe);}if(!_0x4c9f56){_0x553af3[a95_0x4846('0x13')]('errors',{'msg':a95_0x4846('0x4d')});return _0x1747ee[a95_0x4846('0x1c')](a95_0x4846('0x4e'));}_0x1747ee['render'](a95_0x4846('0x4f'),{'title':'Password\x20Reset'});});};exports[a95_0x4846('0x50')]=(_0x5d8dcb,_0x1b02df,_0x4128f8)=>{_0x5d8dcb[a95_0x4846('0xc')](a95_0x4846('0x24'),a95_0x4846('0x51'))[a95_0x4846('0x26')]({'min':0x4});_0x5d8dcb['assert'](a95_0x4846('0x52'),a95_0x4846('0x53'))[a95_0x4846('0x29')](_0x5d8dcb['body'][a95_0x4846('0x24')]);const _0x19b9e4=_0x5d8dcb[a95_0x4846('0x2b')]();if(_0x19b9e4){_0x5d8dcb['flash'](a95_0x4846('0x14'),_0x19b9e4);return _0x1b02df[a95_0x4846('0x1c')](a95_0x4846('0x54'));}async_1[a95_0x4846('0x16')]['waterfall']([function resetPassword(_0x5e68c3){User_1[a95_0x4846('0x16')][a95_0x4846('0x2d')]({'passwordResetToken':_0x5d8dcb[a95_0x4846('0x41')]['token']})['where'](a95_0x4846('0x4a'))['gt'](Date[a95_0x4846('0x4b')]())[a95_0x4846('0x4c')]((_0x4e2d84,_0x4d1c1a)=>{if(_0x4e2d84){return _0x4128f8(_0x4e2d84);}if(!_0x4d1c1a){_0x5d8dcb[a95_0x4846('0x13')](a95_0x4846('0x14'),{'msg':a95_0x4846('0x4d')});return _0x1b02df[a95_0x4846('0x1c')](a95_0x4846('0x54'));}_0x4d1c1a[a95_0x4846('0x24')]=_0x5d8dcb[a95_0x4846('0x2a')][a95_0x4846('0x24')];_0x4d1c1a['passwordResetToken']=undefined;_0x4d1c1a[a95_0x4846('0x4a')]=undefined;_0x4d1c1a['save'](_0x4e2d84=>{if(_0x4e2d84){return _0x4128f8(_0x4e2d84);}_0x5d8dcb[a95_0x4846('0x19')](_0x4d1c1a,_0x4e2d84=>{_0x5e68c3(_0x4e2d84,_0x4d1c1a);});});});},function sendResetPasswordEmail(_0x199e34,_0x50c835){const _0x40d921=nodemailer_1[a95_0x4846('0x16')]['createTransport']({'service':a95_0x4846('0x55'),'auth':{'user':process[a95_0x4846('0x56')][a95_0x4846('0x57')],'pass':process[a95_0x4846('0x56')]['SENDGRID_PASSWORD']}});const _0x3b295a={'to':_0x199e34[a95_0x4846('0x23')],'from':a95_0x4846('0x58'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a95_0x4846('0x59')+_0x199e34[a95_0x4846('0x23')]+a95_0x4846('0x5a')};_0x40d921['sendMail'](_0x3b295a,_0x3fbbb0=>{_0x5d8dcb[a95_0x4846('0x13')]('success',{'msg':a95_0x4846('0x5b')});_0x50c835(_0x3fbbb0);});}],_0x2bb592=>{if(_0x2bb592){return _0x4128f8(_0x2bb592);}_0x1b02df[a95_0x4846('0x1c')]('/');});};exports[a95_0x4846('0x5c')]=(_0x1a5528,_0x4cf8e5)=>{if(_0x1a5528[a95_0x4846('0x47')]()){return _0x4cf8e5['redirect']('/');}_0x4cf8e5[a95_0x4846('0x9')](a95_0x4846('0x5d'),{'title':a95_0x4846('0x5e')});};exports[a95_0x4846('0x5f')]=(_0x574177,_0x5b0be3,_0x430434)=>{_0x574177['assert']('email',a95_0x4846('0x34'))[a95_0x4846('0xe')]();_0x574177[a95_0x4846('0x11')]('email')[a95_0x4846('0x12')]({'gmail_remove_dots':![]});const _0x2c0a93=_0x574177[a95_0x4846('0x2b')]();if(_0x2c0a93){_0x574177[a95_0x4846('0x13')](a95_0x4846('0x14'),_0x2c0a93);return _0x5b0be3[a95_0x4846('0x1c')](a95_0x4846('0x4e'));}async_1[a95_0x4846('0x16')][a95_0x4846('0x60')]([function createRandomToken(_0x4f47f2){crypto_1[a95_0x4846('0x16')][a95_0x4846('0x61')](0x10,(_0x43f7f8,_0x17c824)=>{const _0x250d96=_0x17c824[a95_0x4846('0x62')](a95_0x4846('0x63'));_0x4f47f2(_0x43f7f8,_0x250d96);});},function setRandomToken(_0x518ef8,_0x243edb){User_1['default']['findOne']({'email':_0x574177[a95_0x4846('0x2a')][a95_0x4846('0x23')]},(_0x2f78c7,_0x42fd1c)=>{if(_0x2f78c7){return _0x243edb(_0x2f78c7);}if(!_0x42fd1c){_0x574177[a95_0x4846('0x13')](a95_0x4846('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x5b0be3['redirect']('/forgot');}_0x42fd1c[a95_0x4846('0x64')]=_0x518ef8;_0x42fd1c[a95_0x4846('0x4a')]=Date[a95_0x4846('0x4b')]()+0x36ee80;_0x42fd1c[a95_0x4846('0x2f')](_0x2f78c7=>{_0x243edb(_0x2f78c7,_0x518ef8,_0x42fd1c);});});},function sendForgotPasswordEmail(_0x4e4986,_0x5c6766,_0x36baa1){const _0x338106=nodemailer_1['default'][a95_0x4846('0x65')]({'service':a95_0x4846('0x55'),'auth':{'user':process[a95_0x4846('0x56')][a95_0x4846('0x57')],'pass':process[a95_0x4846('0x56')]['SENDGRID_PASSWORD']}});const _0x4340e9={'to':_0x5c6766[a95_0x4846('0x23')],'from':a95_0x4846('0x66'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x574177['headers'][a95_0x4846('0x67')]+a95_0x4846('0x68')+_0x4e4986+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x338106[a95_0x4846('0x69')](_0x4340e9,_0x49dbac=>{_0x574177[a95_0x4846('0x13')]('info',{'msg':a95_0x4846('0x6a')+_0x5c6766['email']+a95_0x4846('0x6b')});_0x36baa1(_0x49dbac);});}],_0x5d9771=>{if(_0x5d9771){return _0x430434(_0x5d9771);}_0x5b0be3[a95_0x4846('0x1c')]('/forgot');});};