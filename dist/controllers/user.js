var a183_0x4fd8=['returnTo','getSignup','user','Create\x20Account','postSignup','password','len','confirmPassword','Passwords\x20do\x20not\x20match','default','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','logout','info','getOauthUnlink','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','now','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','params','passwordResetExpires','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','async','nodemailer','passport','../models/User','express-validator','redirect','render','account/login','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','normalizeEmail','validationErrors','errors','authenticate','flash','message','/login','success','Success!\x20You\x20are\x20logged\x20in.','session'];(function(_0x2f3e31,_0x3a89c9){var _0x2c6db2=function(_0x1fa352){while(--_0x1fa352){_0x2f3e31['push'](_0x2f3e31['shift']());}};_0x2c6db2(++_0x3a89c9);}(a183_0x4fd8,0x12d));var a183_0x281e=function(_0xfcb6d1,_0x34248f){_0xfcb6d1=_0xfcb6d1-0x0;var _0x4b4292=a183_0x4fd8[_0xfcb6d1];return _0x4b4292;};'use strict';var __importDefault=this&&this[a183_0x281e('0x0')]||function(_0x92684c){return _0x92684c&&_0x92684c['__esModule']?_0x92684c:{'default':_0x92684c};};Object[a183_0x281e('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a183_0x281e('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a183_0x281e('0x3')));const passport_1=__importDefault(require(a183_0x281e('0x4')));const User_1=__importDefault(require(a183_0x281e('0x5')));const request=require(a183_0x281e('0x6'));exports['getLogin']=(_0x2533f5,_0x186b69)=>{if(_0x2533f5['user']){return _0x186b69[a183_0x281e('0x7')]('/');}_0x186b69[a183_0x281e('0x8')](a183_0x281e('0x9'),{'title':a183_0x281e('0xa')});};exports[a183_0x281e('0xb')]=(_0x5f5521,_0x5ea4d6,_0x34bd90)=>{_0x5f5521[a183_0x281e('0xc')]('email',a183_0x281e('0xd'))[a183_0x281e('0xe')]();_0x5f5521['assert']('password',a183_0x281e('0xf'))[a183_0x281e('0x10')]();_0x5f5521[a183_0x281e('0x11')](a183_0x281e('0x12'))[a183_0x281e('0x13')]({'gmail_remove_dots':![]});const _0x23bfaa=_0x5f5521[a183_0x281e('0x14')]();if(_0x23bfaa){_0x5f5521['flash'](a183_0x281e('0x15'),_0x23bfaa);return _0x5ea4d6[a183_0x281e('0x7')]('/login');}passport_1['default'][a183_0x281e('0x16')]('local',(_0x5819af,_0x240e4f,_0x247af8)=>{if(_0x5819af){return _0x34bd90(_0x5819af);}if(!_0x240e4f){_0x5f5521[a183_0x281e('0x17')](a183_0x281e('0x15'),_0x247af8[a183_0x281e('0x18')]);return _0x5ea4d6['redirect'](a183_0x281e('0x19'));}_0x5f5521['logIn'](_0x240e4f,_0x5819af=>{if(_0x5819af){return _0x34bd90(_0x5819af);}_0x5f5521[a183_0x281e('0x17')](a183_0x281e('0x1a'),{'msg':a183_0x281e('0x1b')});_0x5ea4d6[a183_0x281e('0x7')](_0x5f5521[a183_0x281e('0x1c')][a183_0x281e('0x1d')]||'/');});})(_0x5f5521,_0x5ea4d6,_0x34bd90);};exports['logout']=(_0x3e0350,_0x556e14)=>{_0x3e0350['logout']();_0x556e14[a183_0x281e('0x7')]('/');};exports[a183_0x281e('0x1e')]=(_0x1568ee,_0x43e4c4)=>{if(_0x1568ee[a183_0x281e('0x1f')]){return _0x43e4c4[a183_0x281e('0x7')]('/');}_0x43e4c4['render']('account/signup',{'title':a183_0x281e('0x20')});};exports[a183_0x281e('0x21')]=(_0x3eb322,_0x4fe7ca,_0x48fc2c)=>{_0x3eb322['assert'](a183_0x281e('0x12'),a183_0x281e('0xd'))[a183_0x281e('0xe')]();_0x3eb322[a183_0x281e('0xc')](a183_0x281e('0x22'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a183_0x281e('0x23')]({'min':0x4});_0x3eb322[a183_0x281e('0xc')](a183_0x281e('0x24'),a183_0x281e('0x25'))['equals'](_0x3eb322['body'][a183_0x281e('0x22')]);_0x3eb322['sanitize'](a183_0x281e('0x12'))[a183_0x281e('0x13')]({'gmail_remove_dots':![]});const _0x1dcd58=_0x3eb322[a183_0x281e('0x14')]();if(_0x1dcd58){_0x3eb322[a183_0x281e('0x17')](a183_0x281e('0x15'),_0x1dcd58);return _0x4fe7ca[a183_0x281e('0x7')]('/signup');}const _0x5bb3a2=new User_1[(a183_0x281e('0x26'))]({'email':_0x3eb322[a183_0x281e('0x27')][a183_0x281e('0x12')],'password':_0x3eb322['body']['password']});User_1[a183_0x281e('0x26')][a183_0x281e('0x28')]({'email':_0x3eb322['body']['email']},(_0x210f64,_0x3c9ec1)=>{if(_0x210f64){return _0x48fc2c(_0x210f64);}if(_0x3c9ec1){_0x3eb322[a183_0x281e('0x17')](a183_0x281e('0x15'),{'msg':a183_0x281e('0x29')});return _0x4fe7ca[a183_0x281e('0x7')]('/signup');}_0x5bb3a2[a183_0x281e('0x2a')](_0x210f64=>{if(_0x210f64){return _0x48fc2c(_0x210f64);}_0x3eb322[a183_0x281e('0x2b')](_0x5bb3a2,_0x210f64=>{if(_0x210f64){return _0x48fc2c(_0x210f64);}_0x4fe7ca[a183_0x281e('0x7')]('/');});});});};exports[a183_0x281e('0x2c')]=(_0x48f1ea,_0x13b47b)=>{_0x13b47b['render']('account/profile',{'title':a183_0x281e('0x2d')});};exports['postUpdateProfile']=(_0xb61b5d,_0xefe63e,_0x255e9c)=>{_0xb61b5d[a183_0x281e('0xc')](a183_0x281e('0x12'),a183_0x281e('0x2e'))[a183_0x281e('0xe')]();_0xb61b5d[a183_0x281e('0x11')](a183_0x281e('0x12'))[a183_0x281e('0x13')]({'gmail_remove_dots':![]});const _0x1d9cb6=_0xb61b5d[a183_0x281e('0x14')]();if(_0x1d9cb6){_0xb61b5d[a183_0x281e('0x17')](a183_0x281e('0x15'),_0x1d9cb6);return _0xefe63e[a183_0x281e('0x7')](a183_0x281e('0x2f'));}User_1[a183_0x281e('0x26')]['findById'](_0xb61b5d[a183_0x281e('0x1f')]['id'],(_0x55aa84,_0xaceb0d)=>{if(_0x55aa84){return _0x255e9c(_0x55aa84);}_0xaceb0d[a183_0x281e('0x12')]=_0xb61b5d[a183_0x281e('0x27')][a183_0x281e('0x12')]||'';_0xaceb0d['profile'][a183_0x281e('0x30')]=_0xb61b5d[a183_0x281e('0x27')][a183_0x281e('0x30')]||'';_0xaceb0d[a183_0x281e('0x31')][a183_0x281e('0x32')]=_0xb61b5d[a183_0x281e('0x27')]['gender']||'';_0xaceb0d['profile'][a183_0x281e('0x33')]=_0xb61b5d[a183_0x281e('0x27')][a183_0x281e('0x33')]||'';_0xaceb0d[a183_0x281e('0x31')]['website']=_0xb61b5d['body'][a183_0x281e('0x34')]||'';_0xaceb0d['save'](_0x55aa84=>{if(_0x55aa84){if(_0x55aa84['code']===0x2af8){_0xb61b5d[a183_0x281e('0x17')](a183_0x281e('0x15'),{'msg':a183_0x281e('0x35')});return _0xefe63e[a183_0x281e('0x7')](a183_0x281e('0x2f'));}return _0x255e9c(_0x55aa84);}_0xb61b5d[a183_0x281e('0x17')](a183_0x281e('0x1a'),{'msg':a183_0x281e('0x36')});_0xefe63e[a183_0x281e('0x7')](a183_0x281e('0x2f'));});});};exports[a183_0x281e('0x37')]=(_0xabacb3,_0x29c002,_0x4ca25b)=>{_0xabacb3[a183_0x281e('0xc')](a183_0x281e('0x22'),a183_0x281e('0x38'))[a183_0x281e('0x23')]({'min':0x4});_0xabacb3[a183_0x281e('0xc')](a183_0x281e('0x24'),a183_0x281e('0x25'))['equals'](_0xabacb3[a183_0x281e('0x27')][a183_0x281e('0x22')]);const _0x4c52d8=_0xabacb3[a183_0x281e('0x14')]();if(_0x4c52d8){_0xabacb3['flash'](a183_0x281e('0x15'),_0x4c52d8);return _0x29c002[a183_0x281e('0x7')](a183_0x281e('0x2f'));}User_1[a183_0x281e('0x26')][a183_0x281e('0x39')](_0xabacb3[a183_0x281e('0x1f')]['id'],(_0x1bbf28,_0x3eae84)=>{if(_0x1bbf28){return _0x4ca25b(_0x1bbf28);}_0x3eae84['password']=_0xabacb3[a183_0x281e('0x27')][a183_0x281e('0x22')];_0x3eae84['save'](_0x1bbf28=>{if(_0x1bbf28){return _0x4ca25b(_0x1bbf28);}_0xabacb3['flash'](a183_0x281e('0x1a'),{'msg':a183_0x281e('0x3a')});_0x29c002[a183_0x281e('0x7')]('/account');});});};exports[a183_0x281e('0x3b')]=(_0xe88bc6,_0xeae19d,_0x3466bd)=>{User_1['default'][a183_0x281e('0x3c')]({'_id':_0xe88bc6[a183_0x281e('0x1f')]['id']},_0x44da06=>{if(_0x44da06){return _0x3466bd(_0x44da06);}_0xe88bc6[a183_0x281e('0x3d')]();_0xe88bc6[a183_0x281e('0x17')](a183_0x281e('0x3e'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0xeae19d['redirect']('/');});};exports[a183_0x281e('0x3f')]=(_0x5878b2,_0x386c24,_0x1a835e)=>{const _0x504580=_0x5878b2['params']['provider'];User_1[a183_0x281e('0x26')]['findById'](_0x5878b2[a183_0x281e('0x1f')]['id'],(_0xf9cab,_0x1775df)=>{if(_0xf9cab){return _0x1a835e(_0xf9cab);}_0x1775df[_0x504580]=undefined;_0x1775df['tokens']=_0x1775df[a183_0x281e('0x40')][a183_0x281e('0x41')](_0x542473=>_0x542473[a183_0x281e('0x42')]!==_0x504580);_0x1775df[a183_0x281e('0x2a')](_0xf9cab=>{if(_0xf9cab){return _0x1a835e(_0xf9cab);}_0x5878b2[a183_0x281e('0x17')]('info',{'msg':_0x504580+a183_0x281e('0x43')});_0x386c24['redirect'](a183_0x281e('0x2f'));});});};exports[a183_0x281e('0x44')]=(_0x30d61d,_0x4fc35e,_0x57d234)=>{if(_0x30d61d[a183_0x281e('0x45')]()){return _0x4fc35e[a183_0x281e('0x7')]('/');}User_1[a183_0x281e('0x26')]['findOne']({'passwordResetToken':_0x30d61d['params'][a183_0x281e('0x46')]})[a183_0x281e('0x47')]('passwordResetExpires')['gt'](Date[a183_0x281e('0x48')]())[a183_0x281e('0x49')]((_0x41d8c5,_0x27e484)=>{if(_0x41d8c5){return _0x57d234(_0x41d8c5);}if(!_0x27e484){_0x30d61d[a183_0x281e('0x17')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4fc35e[a183_0x281e('0x7')](a183_0x281e('0x4a'));}_0x4fc35e[a183_0x281e('0x8')](a183_0x281e('0x4b'),{'title':a183_0x281e('0x4c')});});};exports[a183_0x281e('0x4d')]=(_0x592847,_0x442d31,_0x56600d)=>{_0x592847[a183_0x281e('0xc')]('password',a183_0x281e('0x4e'))[a183_0x281e('0x23')]({'min':0x4});_0x592847[a183_0x281e('0xc')](a183_0x281e('0x4f'),a183_0x281e('0x50'))['equals'](_0x592847['body']['password']);const _0x381c15=_0x592847[a183_0x281e('0x14')]();if(_0x381c15){_0x592847['flash'](a183_0x281e('0x15'),_0x381c15);return _0x442d31[a183_0x281e('0x7')](a183_0x281e('0x51'));}async_1[a183_0x281e('0x26')][a183_0x281e('0x52')]([function resetPassword(_0xc9b7c){User_1[a183_0x281e('0x26')][a183_0x281e('0x28')]({'passwordResetToken':_0x592847[a183_0x281e('0x53')]['token']})[a183_0x281e('0x47')](a183_0x281e('0x54'))['gt'](Date[a183_0x281e('0x48')]())[a183_0x281e('0x49')]((_0x167816,_0x1fbcc9)=>{if(_0x167816){return _0x56600d(_0x167816);}if(!_0x1fbcc9){_0x592847[a183_0x281e('0x17')](a183_0x281e('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x442d31[a183_0x281e('0x7')]('back');}_0x1fbcc9[a183_0x281e('0x22')]=_0x592847[a183_0x281e('0x27')][a183_0x281e('0x22')];_0x1fbcc9[a183_0x281e('0x55')]=undefined;_0x1fbcc9['passwordResetExpires']=undefined;_0x1fbcc9['save'](_0x167816=>{if(_0x167816){return _0x56600d(_0x167816);}_0x592847[a183_0x281e('0x2b')](_0x1fbcc9,_0x167816=>{_0xc9b7c(_0x167816,_0x1fbcc9);});});});},function sendResetPasswordEmail(_0x3d961f,_0x5407cb){const _0x1ae677=nodemailer_1[a183_0x281e('0x26')][a183_0x281e('0x56')]({'service':a183_0x281e('0x57'),'auth':{'user':process[a183_0x281e('0x58')][a183_0x281e('0x59')],'pass':process['env'][a183_0x281e('0x5a')]}});const _0x49441f={'to':_0x3d961f['email'],'from':a183_0x281e('0x5b'),'subject':a183_0x281e('0x5c'),'text':a183_0x281e('0x5d')+_0x3d961f[a183_0x281e('0x12')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x1ae677['sendMail'](_0x49441f,_0xe248b7=>{_0x592847[a183_0x281e('0x17')](a183_0x281e('0x1a'),{'msg':a183_0x281e('0x5e')});_0x5407cb(_0xe248b7);});}],_0x47dda5=>{if(_0x47dda5){return _0x56600d(_0x47dda5);}_0x442d31[a183_0x281e('0x7')]('/');});};exports[a183_0x281e('0x5f')]=(_0x386129,_0xb9fd12)=>{if(_0x386129[a183_0x281e('0x45')]()){return _0xb9fd12[a183_0x281e('0x7')]('/');}_0xb9fd12['render'](a183_0x281e('0x60'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x45e76a,_0x400e80,_0x2fa000)=>{_0x45e76a[a183_0x281e('0xc')](a183_0x281e('0x12'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x45e76a[a183_0x281e('0x11')](a183_0x281e('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2e9815=_0x45e76a[a183_0x281e('0x14')]();if(_0x2e9815){_0x45e76a['flash']('errors',_0x2e9815);return _0x400e80[a183_0x281e('0x7')](a183_0x281e('0x4a'));}async_1[a183_0x281e('0x26')][a183_0x281e('0x52')]([function createRandomToken(_0x4cc609){crypto_1[a183_0x281e('0x26')][a183_0x281e('0x61')](0x10,(_0x5f354a,_0x366ca9)=>{const _0x215562=_0x366ca9[a183_0x281e('0x62')](a183_0x281e('0x63'));_0x4cc609(_0x5f354a,_0x215562);});},function setRandomToken(_0x42c0ec,_0x74e894){User_1[a183_0x281e('0x26')]['findOne']({'email':_0x45e76a[a183_0x281e('0x27')][a183_0x281e('0x12')]},(_0x3794f9,_0x259a10)=>{if(_0x3794f9){return _0x74e894(_0x3794f9);}if(!_0x259a10){_0x45e76a[a183_0x281e('0x17')]('errors',{'msg':a183_0x281e('0x64')});return _0x400e80[a183_0x281e('0x7')](a183_0x281e('0x4a'));}_0x259a10['passwordResetToken']=_0x42c0ec;_0x259a10[a183_0x281e('0x54')]=Date[a183_0x281e('0x48')]()+0x36ee80;_0x259a10[a183_0x281e('0x2a')](_0x3794f9=>{_0x74e894(_0x3794f9,_0x42c0ec,_0x259a10);});});},function sendForgotPasswordEmail(_0x1e9565,_0x15f6eb,_0x504b0a){const _0x53a9ec=nodemailer_1[a183_0x281e('0x26')][a183_0x281e('0x56')]({'service':a183_0x281e('0x57'),'auth':{'user':process[a183_0x281e('0x58')][a183_0x281e('0x59')],'pass':process['env'][a183_0x281e('0x5a')]}});const _0x2f830e={'to':_0x15f6eb['email'],'from':a183_0x281e('0x65'),'subject':a183_0x281e('0x66'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x45e76a[a183_0x281e('0x67')][a183_0x281e('0x68')]+a183_0x281e('0x69')+_0x1e9565+a183_0x281e('0x6a')};_0x53a9ec[a183_0x281e('0x6b')](_0x2f830e,_0x3c3b61=>{_0x45e76a['flash']('info',{'msg':a183_0x281e('0x6c')+_0x15f6eb[a183_0x281e('0x12')]+a183_0x281e('0x6d')});_0x504b0a(_0x3c3b61);});}],_0x36ca19=>{if(_0x36ca19){return _0x2fa000(_0x36ca19);}_0x400e80[a183_0x281e('0x7')](a183_0x281e('0x4a'));});};