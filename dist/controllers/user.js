var a201_0x4de0=['where','passwordResetExpires','now','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','findOne','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','account/forgot','Forgot\x20Password','postForgot','toString','hex','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','nodemailer','passport','../models/User','express-validator','user','redirect','render','account/login','Login','postLogin','assert','email','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','/login','default','flash','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','gender','profile','website','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','Password\x20has\x20been\x20changed.','postDeleteAccount','info','getOauthUnlink','params','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token'];(function(_0x48f295,_0xe6d276){var _0x298fc8=function(_0x166228){while(--_0x166228){_0x48f295['push'](_0x48f295['shift']());}};_0x298fc8(++_0xe6d276);}(a201_0x4de0,0x8a));var a201_0xd24b=function(_0x72aad7,_0x5bad9b){_0x72aad7=_0x72aad7-0x0;var _0x73b35b=a201_0x4de0[_0x72aad7];return _0x73b35b;};'use strict';var __importDefault=this&&this[a201_0xd24b('0x0')]||function(_0x3b7243){return _0x3b7243&&_0x3b7243[a201_0xd24b('0x1')]?_0x3b7243:{'default':_0x3b7243};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a201_0xd24b('0x2')));const passport_1=__importDefault(require(a201_0xd24b('0x3')));const User_1=__importDefault(require(a201_0xd24b('0x4')));const request=require(a201_0xd24b('0x5'));exports['getLogin']=(_0x9680b8,_0x24e6a4)=>{if(_0x9680b8[a201_0xd24b('0x6')]){return _0x24e6a4[a201_0xd24b('0x7')]('/');}_0x24e6a4[a201_0xd24b('0x8')](a201_0xd24b('0x9'),{'title':a201_0xd24b('0xa')});};exports[a201_0xd24b('0xb')]=(_0x4b00fe,_0x39ba79,_0x538b90)=>{_0x4b00fe[a201_0xd24b('0xc')](a201_0xd24b('0xd'),'Email\x20is\x20not\x20valid')[a201_0xd24b('0xe')]();_0x4b00fe[a201_0xd24b('0xc')](a201_0xd24b('0xf'),a201_0xd24b('0x10'))[a201_0xd24b('0x11')]();_0x4b00fe[a201_0xd24b('0x12')]('email')[a201_0xd24b('0x13')]({'gmail_remove_dots':![]});const _0x3e18c0=_0x4b00fe[a201_0xd24b('0x14')]();if(_0x3e18c0){_0x4b00fe['flash'](a201_0xd24b('0x15'),_0x3e18c0);return _0x39ba79['redirect'](a201_0xd24b('0x16'));}passport_1[a201_0xd24b('0x17')]['authenticate']('local',(_0x4fc6cf,_0xd6df7b,_0x1f8b2f)=>{if(_0x4fc6cf){return _0x538b90(_0x4fc6cf);}if(!_0xd6df7b){_0x4b00fe[a201_0xd24b('0x18')](a201_0xd24b('0x15'),_0x1f8b2f[a201_0xd24b('0x19')]);return _0x39ba79['redirect']('/login');}_0x4b00fe[a201_0xd24b('0x1a')](_0xd6df7b,_0x4fc6cf=>{if(_0x4fc6cf){return _0x538b90(_0x4fc6cf);}_0x4b00fe['flash']('success',{'msg':a201_0xd24b('0x1b')});_0x39ba79['redirect'](_0x4b00fe[a201_0xd24b('0x1c')][a201_0xd24b('0x1d')]||'/');});})(_0x4b00fe,_0x39ba79,_0x538b90);};exports[a201_0xd24b('0x1e')]=(_0x383627,_0x82b4b1)=>{_0x383627[a201_0xd24b('0x1e')]();_0x82b4b1[a201_0xd24b('0x7')]('/');};exports[a201_0xd24b('0x1f')]=(_0x1a83d3,_0xbc02a0)=>{if(_0x1a83d3[a201_0xd24b('0x6')]){return _0xbc02a0[a201_0xd24b('0x7')]('/');}_0xbc02a0[a201_0xd24b('0x8')](a201_0xd24b('0x20'),{'title':a201_0xd24b('0x21')});};exports[a201_0xd24b('0x22')]=(_0x8a749d,_0x2a459d,_0x27fc6e)=>{_0x8a749d[a201_0xd24b('0xc')]('email',a201_0xd24b('0x23'))[a201_0xd24b('0xe')]();_0x8a749d[a201_0xd24b('0xc')](a201_0xd24b('0xf'),a201_0xd24b('0x24'))['len']({'min':0x4});_0x8a749d['assert'](a201_0xd24b('0x25'),a201_0xd24b('0x26'))[a201_0xd24b('0x27')](_0x8a749d[a201_0xd24b('0x28')]['password']);_0x8a749d[a201_0xd24b('0x12')](a201_0xd24b('0xd'))[a201_0xd24b('0x13')]({'gmail_remove_dots':![]});const _0xda6678=_0x8a749d['validationErrors']();if(_0xda6678){_0x8a749d[a201_0xd24b('0x18')](a201_0xd24b('0x15'),_0xda6678);return _0x2a459d['redirect']('/signup');}const _0x3b26fb=new User_1[(a201_0xd24b('0x17'))]({'email':_0x8a749d[a201_0xd24b('0x28')][a201_0xd24b('0xd')],'password':_0x8a749d['body'][a201_0xd24b('0xf')]});User_1[a201_0xd24b('0x17')]['findOne']({'email':_0x8a749d[a201_0xd24b('0x28')][a201_0xd24b('0xd')]},(_0x35b3b3,_0x4b7f5b)=>{if(_0x35b3b3){return _0x27fc6e(_0x35b3b3);}if(_0x4b7f5b){_0x8a749d[a201_0xd24b('0x18')](a201_0xd24b('0x15'),{'msg':a201_0xd24b('0x29')});return _0x2a459d['redirect']('/signup');}_0x3b26fb[a201_0xd24b('0x2a')](_0x35b3b3=>{if(_0x35b3b3){return _0x27fc6e(_0x35b3b3);}_0x8a749d[a201_0xd24b('0x1a')](_0x3b26fb,_0x35b3b3=>{if(_0x35b3b3){return _0x27fc6e(_0x35b3b3);}_0x2a459d[a201_0xd24b('0x7')]('/');});});});};exports[a201_0xd24b('0x2b')]=(_0x42e2fc,_0x1e4f29)=>{_0x1e4f29['render'](a201_0xd24b('0x2c'),{'title':a201_0xd24b('0x2d')});};exports['postUpdateProfile']=(_0x4434c1,_0x20a2d3,_0x5a1c33)=>{_0x4434c1[a201_0xd24b('0xc')](a201_0xd24b('0xd'),a201_0xd24b('0x2e'))['isEmail']();_0x4434c1['sanitize'](a201_0xd24b('0xd'))[a201_0xd24b('0x13')]({'gmail_remove_dots':![]});const _0x15295f=_0x4434c1[a201_0xd24b('0x14')]();if(_0x15295f){_0x4434c1['flash'](a201_0xd24b('0x15'),_0x15295f);return _0x20a2d3[a201_0xd24b('0x7')](a201_0xd24b('0x2f'));}User_1['default'][a201_0xd24b('0x30')](_0x4434c1[a201_0xd24b('0x6')]['id'],(_0xc1f7c0,_0x5401b1)=>{if(_0xc1f7c0){return _0x5a1c33(_0xc1f7c0);}_0x5401b1[a201_0xd24b('0xd')]=_0x4434c1[a201_0xd24b('0x28')][a201_0xd24b('0xd')]||'';_0x5401b1['profile'][a201_0xd24b('0x31')]=_0x4434c1['body'][a201_0xd24b('0x31')]||'';_0x5401b1['profile'][a201_0xd24b('0x32')]=_0x4434c1[a201_0xd24b('0x28')]['gender']||'';_0x5401b1[a201_0xd24b('0x33')]['location']=_0x4434c1[a201_0xd24b('0x28')]['location']||'';_0x5401b1[a201_0xd24b('0x33')][a201_0xd24b('0x34')]=_0x4434c1[a201_0xd24b('0x28')]['website']||'';_0x5401b1['save'](_0xc1f7c0=>{if(_0xc1f7c0){if(_0xc1f7c0['code']===0x2af8){_0x4434c1[a201_0xd24b('0x18')](a201_0xd24b('0x15'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x20a2d3[a201_0xd24b('0x7')]('/account');}return _0x5a1c33(_0xc1f7c0);}_0x4434c1['flash'](a201_0xd24b('0x35'),{'msg':a201_0xd24b('0x36')});_0x20a2d3[a201_0xd24b('0x7')](a201_0xd24b('0x2f'));});});};exports[a201_0xd24b('0x37')]=(_0x44cae1,_0x3de177,_0x5e9be5)=>{_0x44cae1[a201_0xd24b('0xc')](a201_0xd24b('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a201_0xd24b('0x38')]({'min':0x4});_0x44cae1[a201_0xd24b('0xc')](a201_0xd24b('0x25'),a201_0xd24b('0x26'))[a201_0xd24b('0x27')](_0x44cae1[a201_0xd24b('0x28')][a201_0xd24b('0xf')]);const _0x34c889=_0x44cae1['validationErrors']();if(_0x34c889){_0x44cae1[a201_0xd24b('0x18')](a201_0xd24b('0x15'),_0x34c889);return _0x3de177[a201_0xd24b('0x7')](a201_0xd24b('0x2f'));}User_1[a201_0xd24b('0x17')]['findById'](_0x44cae1[a201_0xd24b('0x6')]['id'],(_0x22cd2c,_0x3c4655)=>{if(_0x22cd2c){return _0x5e9be5(_0x22cd2c);}_0x3c4655[a201_0xd24b('0xf')]=_0x44cae1[a201_0xd24b('0x28')][a201_0xd24b('0xf')];_0x3c4655[a201_0xd24b('0x2a')](_0x22cd2c=>{if(_0x22cd2c){return _0x5e9be5(_0x22cd2c);}_0x44cae1[a201_0xd24b('0x18')](a201_0xd24b('0x35'),{'msg':a201_0xd24b('0x39')});_0x3de177[a201_0xd24b('0x7')](a201_0xd24b('0x2f'));});});};exports[a201_0xd24b('0x3a')]=(_0x53a375,_0x2bb2cc,_0x84e5e7)=>{User_1['default']['remove']({'_id':_0x53a375['user']['id']},_0x10562c=>{if(_0x10562c){return _0x84e5e7(_0x10562c);}_0x53a375['logout']();_0x53a375[a201_0xd24b('0x18')](a201_0xd24b('0x3b'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x2bb2cc[a201_0xd24b('0x7')]('/');});};exports[a201_0xd24b('0x3c')]=(_0x4409cd,_0x51456d,_0x1d5648)=>{const _0x3886ca=_0x4409cd[a201_0xd24b('0x3d')]['provider'];User_1[a201_0xd24b('0x17')][a201_0xd24b('0x30')](_0x4409cd['user']['id'],(_0x5282de,_0x41590f)=>{if(_0x5282de){return _0x1d5648(_0x5282de);}_0x41590f[_0x3886ca]=undefined;_0x41590f['tokens']=_0x41590f[a201_0xd24b('0x3e')]['filter'](_0x20cc22=>_0x20cc22[a201_0xd24b('0x3f')]!==_0x3886ca);_0x41590f['save'](_0x5282de=>{if(_0x5282de){return _0x1d5648(_0x5282de);}_0x4409cd['flash'](a201_0xd24b('0x3b'),{'msg':_0x3886ca+a201_0xd24b('0x40')});_0x51456d[a201_0xd24b('0x7')](a201_0xd24b('0x2f'));});});};exports[a201_0xd24b('0x41')]=(_0x211de1,_0x32cc7d,_0x2ccbfa)=>{if(_0x211de1[a201_0xd24b('0x42')]()){return _0x32cc7d['redirect']('/');}User_1[a201_0xd24b('0x17')]['findOne']({'passwordResetToken':_0x211de1[a201_0xd24b('0x3d')][a201_0xd24b('0x43')]})[a201_0xd24b('0x44')](a201_0xd24b('0x45'))['gt'](Date[a201_0xd24b('0x46')]())['exec']((_0x6429e1,_0x128f4b)=>{if(_0x6429e1){return _0x2ccbfa(_0x6429e1);}if(!_0x128f4b){_0x211de1[a201_0xd24b('0x18')](a201_0xd24b('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x32cc7d['redirect'](a201_0xd24b('0x47'));}_0x32cc7d[a201_0xd24b('0x8')](a201_0xd24b('0x48'),{'title':a201_0xd24b('0x49')});});};exports[a201_0xd24b('0x4a')]=(_0x402c85,_0x45b5b0,_0x1c8089)=>{_0x402c85['assert'](a201_0xd24b('0xf'),a201_0xd24b('0x4b'))['len']({'min':0x4});_0x402c85[a201_0xd24b('0xc')](a201_0xd24b('0x4c'),a201_0xd24b('0x4d'))[a201_0xd24b('0x27')](_0x402c85[a201_0xd24b('0x28')][a201_0xd24b('0xf')]);const _0x1cb290=_0x402c85[a201_0xd24b('0x14')]();if(_0x1cb290){_0x402c85[a201_0xd24b('0x18')](a201_0xd24b('0x15'),_0x1cb290);return _0x45b5b0[a201_0xd24b('0x7')](a201_0xd24b('0x4e'));}async_1[a201_0xd24b('0x17')]['waterfall']([function resetPassword(_0x55b40a){User_1[a201_0xd24b('0x17')][a201_0xd24b('0x4f')]({'passwordResetToken':_0x402c85[a201_0xd24b('0x3d')][a201_0xd24b('0x43')]})[a201_0xd24b('0x44')](a201_0xd24b('0x45'))['gt'](Date['now']())['exec']((_0x196721,_0x1a8707)=>{if(_0x196721){return _0x1c8089(_0x196721);}if(!_0x1a8707){_0x402c85[a201_0xd24b('0x18')](a201_0xd24b('0x15'),{'msg':a201_0xd24b('0x50')});return _0x45b5b0['redirect'](a201_0xd24b('0x4e'));}_0x1a8707[a201_0xd24b('0xf')]=_0x402c85[a201_0xd24b('0x28')]['password'];_0x1a8707[a201_0xd24b('0x51')]=undefined;_0x1a8707[a201_0xd24b('0x45')]=undefined;_0x1a8707[a201_0xd24b('0x2a')](_0x196721=>{if(_0x196721){return _0x1c8089(_0x196721);}_0x402c85[a201_0xd24b('0x1a')](_0x1a8707,_0x196721=>{_0x55b40a(_0x196721,_0x1a8707);});});});},function sendResetPasswordEmail(_0x51ba65,_0x21ef70){const _0x14aa26=nodemailer_1['default'][a201_0xd24b('0x52')]({'service':a201_0xd24b('0x53'),'auth':{'user':process[a201_0xd24b('0x54')]['SENDGRID_USER'],'pass':process['env'][a201_0xd24b('0x55')]}});const _0x265947={'to':_0x51ba65['email'],'from':a201_0xd24b('0x56'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a201_0xd24b('0x57')+_0x51ba65[a201_0xd24b('0xd')]+a201_0xd24b('0x58')};_0x14aa26[a201_0xd24b('0x59')](_0x265947,_0xa9801b=>{_0x402c85[a201_0xd24b('0x18')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x21ef70(_0xa9801b);});}],_0x222f89=>{if(_0x222f89){return _0x1c8089(_0x222f89);}_0x45b5b0[a201_0xd24b('0x7')]('/');});};exports['getForgot']=(_0x2b0072,_0x1900cd)=>{if(_0x2b0072[a201_0xd24b('0x42')]()){return _0x1900cd[a201_0xd24b('0x7')]('/');}_0x1900cd[a201_0xd24b('0x8')](a201_0xd24b('0x5a'),{'title':a201_0xd24b('0x5b')});};exports[a201_0xd24b('0x5c')]=(_0x3ac63f,_0x3cb744,_0x2c50c0)=>{_0x3ac63f[a201_0xd24b('0xc')](a201_0xd24b('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a201_0xd24b('0xe')]();_0x3ac63f[a201_0xd24b('0x12')](a201_0xd24b('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3ff030=_0x3ac63f[a201_0xd24b('0x14')]();if(_0x3ff030){_0x3ac63f[a201_0xd24b('0x18')]('errors',_0x3ff030);return _0x3cb744[a201_0xd24b('0x7')](a201_0xd24b('0x47'));}async_1['default']['waterfall']([function createRandomToken(_0x290c4b){crypto_1[a201_0xd24b('0x17')]['randomBytes'](0x10,(_0x26735d,_0x49917e)=>{const _0x137133=_0x49917e[a201_0xd24b('0x5d')](a201_0xd24b('0x5e'));_0x290c4b(_0x26735d,_0x137133);});},function setRandomToken(_0x303a6e,_0x4a5720){User_1[a201_0xd24b('0x17')]['findOne']({'email':_0x3ac63f['body'][a201_0xd24b('0xd')]},(_0x43ff08,_0x41f429)=>{if(_0x43ff08){return _0x4a5720(_0x43ff08);}if(!_0x41f429){_0x3ac63f[a201_0xd24b('0x18')](a201_0xd24b('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x3cb744[a201_0xd24b('0x7')](a201_0xd24b('0x47'));}_0x41f429[a201_0xd24b('0x51')]=_0x303a6e;_0x41f429[a201_0xd24b('0x45')]=Date['now']()+0x36ee80;_0x41f429['save'](_0x43ff08=>{_0x4a5720(_0x43ff08,_0x303a6e,_0x41f429);});});},function sendForgotPasswordEmail(_0x47272b,_0x1a5216,_0x1ef4cf){const _0xc159b5=nodemailer_1[a201_0xd24b('0x17')][a201_0xd24b('0x52')]({'service':a201_0xd24b('0x53'),'auth':{'user':process[a201_0xd24b('0x54')][a201_0xd24b('0x5f')],'pass':process['env'][a201_0xd24b('0x55')]}});const _0x5b43e7={'to':_0x1a5216[a201_0xd24b('0xd')],'from':a201_0xd24b('0x60'),'subject':a201_0xd24b('0x61'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x3ac63f[a201_0xd24b('0x62')][a201_0xd24b('0x63')]+a201_0xd24b('0x64')+_0x47272b+a201_0xd24b('0x65')};_0xc159b5[a201_0xd24b('0x59')](_0x5b43e7,_0x4a66ba=>{_0x3ac63f[a201_0xd24b('0x18')](a201_0xd24b('0x3b'),{'msg':a201_0xd24b('0x66')+_0x1a5216['email']+'\x20with\x20further\x20instructions.'});_0x1ef4cf(_0x4a66ba);});}],_0xdb97fc=>{if(_0xdb97fc){return _0x2c50c0(_0xdb97fc);}_0x3cb744[a201_0xd24b('0x7')](a201_0xd24b('0x47'));});};