var a95_0x4f2f=['randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','passport','../models/User','express-validator','getLogin','redirect','render','account/login','Login','email','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','/login','default','authenticate','errors','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','Create\x20Account','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','isAuthenticated','where','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','token','exec','passwordResetToken','createTransport','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot'];(function(_0x1d2076,_0x2a7e5a){var _0x6ffefc=function(_0x3ddd21){while(--_0x3ddd21){_0x1d2076['push'](_0x1d2076['shift']());}};_0x6ffefc(++_0x2a7e5a);}(a95_0x4f2f,0xd0));var a95_0x319d=function(_0x340342,_0x536be7){_0x340342=_0x340342-0x0;var _0x42e540=a95_0x4f2f[_0x340342];return _0x42e540;};'use strict';var __importDefault=this&&this[a95_0x319d('0x0')]||function(_0xe1ad1f){return _0xe1ad1f&&_0xe1ad1f[a95_0x319d('0x1')]?_0xe1ad1f:{'default':_0xe1ad1f};};Object['defineProperty'](exports,a95_0x319d('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x319d('0x2')));const crypto_1=__importDefault(require(a95_0x319d('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a95_0x319d('0x4')));const User_1=__importDefault(require(a95_0x319d('0x5')));const request=require(a95_0x319d('0x6'));exports[a95_0x319d('0x7')]=(_0x9d8209,_0xdddb4)=>{if(_0x9d8209['user']){return _0xdddb4[a95_0x319d('0x8')]('/');}_0xdddb4[a95_0x319d('0x9')](a95_0x319d('0xa'),{'title':a95_0x319d('0xb')});};exports['postLogin']=(_0x46f2da,_0x6deb04,_0x2d8fae)=>{_0x46f2da['assert'](a95_0x319d('0xc'),'Email\x20is\x20not\x20valid')[a95_0x319d('0xd')]();_0x46f2da[a95_0x319d('0xe')](a95_0x319d('0xf'),a95_0x319d('0x10'))[a95_0x319d('0x11')]();_0x46f2da[a95_0x319d('0x12')](a95_0x319d('0xc'))[a95_0x319d('0x13')]({'gmail_remove_dots':![]});const _0x2b3c4a=_0x46f2da[a95_0x319d('0x14')]();if(_0x2b3c4a){_0x46f2da[a95_0x319d('0x15')]('errors',_0x2b3c4a);return _0x6deb04['redirect'](a95_0x319d('0x16'));}passport_1[a95_0x319d('0x17')][a95_0x319d('0x18')]('local',(_0x4ea0b2,_0x56d620,_0x3adb51)=>{if(_0x4ea0b2){return _0x2d8fae(_0x4ea0b2);}if(!_0x56d620){_0x46f2da[a95_0x319d('0x15')](a95_0x319d('0x19'),_0x3adb51[a95_0x319d('0x1a')]);return _0x6deb04[a95_0x319d('0x8')]('/login');}_0x46f2da[a95_0x319d('0x1b')](_0x56d620,_0x4ea0b2=>{if(_0x4ea0b2){return _0x2d8fae(_0x4ea0b2);}_0x46f2da[a95_0x319d('0x15')](a95_0x319d('0x1c'),{'msg':a95_0x319d('0x1d')});_0x6deb04[a95_0x319d('0x8')](_0x46f2da[a95_0x319d('0x1e')][a95_0x319d('0x1f')]||'/');});})(_0x46f2da,_0x6deb04,_0x2d8fae);};exports['logout']=(_0x2d1bd2,_0x4f783f)=>{_0x2d1bd2[a95_0x319d('0x20')]();_0x4f783f['redirect']('/');};exports[a95_0x319d('0x21')]=(_0x257cca,_0x325fe7)=>{if(_0x257cca[a95_0x319d('0x22')]){return _0x325fe7['redirect']('/');}_0x325fe7[a95_0x319d('0x9')]('account/signup',{'title':a95_0x319d('0x23')});};exports['postSignup']=(_0x46dbf4,_0x1c0ccb,_0x242865)=>{_0x46dbf4[a95_0x319d('0xe')](a95_0x319d('0xc'),a95_0x319d('0x24'))[a95_0x319d('0xd')]();_0x46dbf4['assert'](a95_0x319d('0xf'),a95_0x319d('0x25'))[a95_0x319d('0x26')]({'min':0x4});_0x46dbf4[a95_0x319d('0xe')](a95_0x319d('0x27'),a95_0x319d('0x28'))[a95_0x319d('0x29')](_0x46dbf4[a95_0x319d('0x2a')][a95_0x319d('0xf')]);_0x46dbf4['sanitize']('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x4cb097=_0x46dbf4['validationErrors']();if(_0x4cb097){_0x46dbf4[a95_0x319d('0x15')](a95_0x319d('0x19'),_0x4cb097);return _0x1c0ccb['redirect'](a95_0x319d('0x2b'));}const _0x58980f=new User_1['default']({'email':_0x46dbf4[a95_0x319d('0x2a')][a95_0x319d('0xc')],'password':_0x46dbf4[a95_0x319d('0x2a')][a95_0x319d('0xf')]});User_1['default'][a95_0x319d('0x2c')]({'email':_0x46dbf4[a95_0x319d('0x2a')]['email']},(_0x59b1d6,_0x5b3ddd)=>{if(_0x59b1d6){return _0x242865(_0x59b1d6);}if(_0x5b3ddd){_0x46dbf4[a95_0x319d('0x15')](a95_0x319d('0x19'),{'msg':a95_0x319d('0x2d')});return _0x1c0ccb[a95_0x319d('0x8')](a95_0x319d('0x2b'));}_0x58980f[a95_0x319d('0x2e')](_0x59b1d6=>{if(_0x59b1d6){return _0x242865(_0x59b1d6);}_0x46dbf4[a95_0x319d('0x1b')](_0x58980f,_0x59b1d6=>{if(_0x59b1d6){return _0x242865(_0x59b1d6);}_0x1c0ccb[a95_0x319d('0x8')]('/');});});});};exports[a95_0x319d('0x2f')]=(_0x30e301,_0x2a37e7)=>{_0x2a37e7['render'](a95_0x319d('0x30'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x4cd2a4,_0x36e18e,_0x55c479)=>{_0x4cd2a4['assert'](a95_0x319d('0xc'),a95_0x319d('0x31'))['isEmail']();_0x4cd2a4['sanitize'](a95_0x319d('0xc'))[a95_0x319d('0x13')]({'gmail_remove_dots':![]});const _0x5041b7=_0x4cd2a4[a95_0x319d('0x14')]();if(_0x5041b7){_0x4cd2a4['flash'](a95_0x319d('0x19'),_0x5041b7);return _0x36e18e[a95_0x319d('0x8')](a95_0x319d('0x32'));}User_1['default'][a95_0x319d('0x33')](_0x4cd2a4[a95_0x319d('0x22')]['id'],(_0x4950e0,_0x521a58)=>{if(_0x4950e0){return _0x55c479(_0x4950e0);}_0x521a58[a95_0x319d('0xc')]=_0x4cd2a4[a95_0x319d('0x2a')][a95_0x319d('0xc')]||'';_0x521a58['profile'][a95_0x319d('0x34')]=_0x4cd2a4[a95_0x319d('0x2a')][a95_0x319d('0x34')]||'';_0x521a58[a95_0x319d('0x35')][a95_0x319d('0x36')]=_0x4cd2a4[a95_0x319d('0x2a')][a95_0x319d('0x36')]||'';_0x521a58['profile'][a95_0x319d('0x37')]=_0x4cd2a4['body'][a95_0x319d('0x37')]||'';_0x521a58[a95_0x319d('0x35')][a95_0x319d('0x38')]=_0x4cd2a4[a95_0x319d('0x2a')][a95_0x319d('0x38')]||'';_0x521a58[a95_0x319d('0x2e')](_0x4950e0=>{if(_0x4950e0){if(_0x4950e0[a95_0x319d('0x39')]===0x2af8){_0x4cd2a4[a95_0x319d('0x15')](a95_0x319d('0x19'),{'msg':a95_0x319d('0x3a')});return _0x36e18e['redirect'](a95_0x319d('0x32'));}return _0x55c479(_0x4950e0);}_0x4cd2a4['flash'](a95_0x319d('0x1c'),{'msg':a95_0x319d('0x3b')});_0x36e18e['redirect'](a95_0x319d('0x32'));});});};exports['postUpdatePassword']=(_0x46a31d,_0x237a6e,_0x52deef)=>{_0x46a31d[a95_0x319d('0xe')](a95_0x319d('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x319d('0x26')]({'min':0x4});_0x46a31d['assert'](a95_0x319d('0x27'),a95_0x319d('0x28'))['equals'](_0x46a31d[a95_0x319d('0x2a')][a95_0x319d('0xf')]);const _0x4e8bf8=_0x46a31d[a95_0x319d('0x14')]();if(_0x4e8bf8){_0x46a31d[a95_0x319d('0x15')]('errors',_0x4e8bf8);return _0x237a6e['redirect'](a95_0x319d('0x32'));}User_1['default']['findById'](_0x46a31d['user']['id'],(_0x6a819c,_0x496a59)=>{if(_0x6a819c){return _0x52deef(_0x6a819c);}_0x496a59[a95_0x319d('0xf')]=_0x46a31d['body'][a95_0x319d('0xf')];_0x496a59[a95_0x319d('0x2e')](_0x6a819c=>{if(_0x6a819c){return _0x52deef(_0x6a819c);}_0x46a31d[a95_0x319d('0x15')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x237a6e[a95_0x319d('0x8')](a95_0x319d('0x32'));});});};exports['postDeleteAccount']=(_0x27950d,_0x39a9fb,_0x5ab42e)=>{User_1['default']['remove']({'_id':_0x27950d[a95_0x319d('0x22')]['id']},_0x3c5790=>{if(_0x3c5790){return _0x5ab42e(_0x3c5790);}_0x27950d[a95_0x319d('0x20')]();_0x27950d[a95_0x319d('0x15')](a95_0x319d('0x3c'),{'msg':a95_0x319d('0x3d')});_0x39a9fb['redirect']('/');});};exports[a95_0x319d('0x3e')]=(_0x2dcce2,_0x514895,_0x4e5e5c)=>{const _0xcaae57=_0x2dcce2[a95_0x319d('0x3f')][a95_0x319d('0x40')];User_1[a95_0x319d('0x17')][a95_0x319d('0x33')](_0x2dcce2['user']['id'],(_0x1016a7,_0x4d0e94)=>{if(_0x1016a7){return _0x4e5e5c(_0x1016a7);}_0x4d0e94[_0xcaae57]=undefined;_0x4d0e94[a95_0x319d('0x41')]=_0x4d0e94[a95_0x319d('0x41')][a95_0x319d('0x42')](_0xda8df9=>_0xda8df9['kind']!==_0xcaae57);_0x4d0e94[a95_0x319d('0x2e')](_0x1016a7=>{if(_0x1016a7){return _0x4e5e5c(_0x1016a7);}_0x2dcce2['flash']('info',{'msg':_0xcaae57+'\x20account\x20has\x20been\x20unlinked.'});_0x514895[a95_0x319d('0x8')]('/account');});});};exports['getReset']=(_0x14f41b,_0xe0d7bf,_0x321bc7)=>{if(_0x14f41b[a95_0x319d('0x43')]()){return _0xe0d7bf['redirect']('/');}User_1[a95_0x319d('0x17')][a95_0x319d('0x2c')]({'passwordResetToken':_0x14f41b[a95_0x319d('0x3f')]['token']})[a95_0x319d('0x44')](a95_0x319d('0x45'))['gt'](Date[a95_0x319d('0x46')]())['exec']((_0x21051f,_0x39471d)=>{if(_0x21051f){return _0x321bc7(_0x21051f);}if(!_0x39471d){_0x14f41b['flash'](a95_0x319d('0x19'),{'msg':a95_0x319d('0x47')});return _0xe0d7bf[a95_0x319d('0x8')](a95_0x319d('0x48'));}_0xe0d7bf[a95_0x319d('0x9')](a95_0x319d('0x49'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x332fa8,_0x3807bb,_0x33b5cc)=>{_0x332fa8[a95_0x319d('0xe')](a95_0x319d('0xf'),a95_0x319d('0x4a'))[a95_0x319d('0x26')]({'min':0x4});_0x332fa8[a95_0x319d('0xe')](a95_0x319d('0x4b'),a95_0x319d('0x4c'))[a95_0x319d('0x29')](_0x332fa8[a95_0x319d('0x2a')]['password']);const _0x2be109=_0x332fa8[a95_0x319d('0x14')]();if(_0x2be109){_0x332fa8[a95_0x319d('0x15')](a95_0x319d('0x19'),_0x2be109);return _0x3807bb[a95_0x319d('0x8')](a95_0x319d('0x4d'));}async_1[a95_0x319d('0x17')][a95_0x319d('0x4e')]([function resetPassword(_0x14b279){User_1[a95_0x319d('0x17')]['findOne']({'passwordResetToken':_0x332fa8[a95_0x319d('0x3f')][a95_0x319d('0x4f')]})['where'](a95_0x319d('0x45'))['gt'](Date[a95_0x319d('0x46')]())[a95_0x319d('0x50')]((_0x2f80bc,_0x295e51)=>{if(_0x2f80bc){return _0x33b5cc(_0x2f80bc);}if(!_0x295e51){_0x332fa8[a95_0x319d('0x15')](a95_0x319d('0x19'),{'msg':a95_0x319d('0x47')});return _0x3807bb['redirect'](a95_0x319d('0x4d'));}_0x295e51[a95_0x319d('0xf')]=_0x332fa8[a95_0x319d('0x2a')][a95_0x319d('0xf')];_0x295e51[a95_0x319d('0x51')]=undefined;_0x295e51['passwordResetExpires']=undefined;_0x295e51[a95_0x319d('0x2e')](_0x2f80bc=>{if(_0x2f80bc){return _0x33b5cc(_0x2f80bc);}_0x332fa8[a95_0x319d('0x1b')](_0x295e51,_0x2f80bc=>{_0x14b279(_0x2f80bc,_0x295e51);});});});},function sendResetPasswordEmail(_0x3d8dff,_0x19f493){const _0x8e7d04=nodemailer_1['default'][a95_0x319d('0x52')]({'service':'SendGrid','auth':{'user':process['env'][a95_0x319d('0x53')],'pass':process[a95_0x319d('0x54')][a95_0x319d('0x55')]}});const _0x444ee5={'to':_0x3d8dff[a95_0x319d('0xc')],'from':a95_0x319d('0x56'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a95_0x319d('0x57')+_0x3d8dff[a95_0x319d('0xc')]+a95_0x319d('0x58')};_0x8e7d04['sendMail'](_0x444ee5,_0x31842b=>{_0x332fa8[a95_0x319d('0x15')](a95_0x319d('0x1c'),{'msg':a95_0x319d('0x59')});_0x19f493(_0x31842b);});}],_0x32f974=>{if(_0x32f974){return _0x33b5cc(_0x32f974);}_0x3807bb[a95_0x319d('0x8')]('/');});};exports[a95_0x319d('0x5a')]=(_0x367795,_0x4033d8)=>{if(_0x367795['isAuthenticated']()){return _0x4033d8[a95_0x319d('0x8')]('/');}_0x4033d8['render'](a95_0x319d('0x5b'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x3825e5,_0x28c9b8,_0x4480a4)=>{_0x3825e5[a95_0x319d('0xe')](a95_0x319d('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x3825e5['sanitize'](a95_0x319d('0xc'))[a95_0x319d('0x13')]({'gmail_remove_dots':![]});const _0x30fcae=_0x3825e5[a95_0x319d('0x14')]();if(_0x30fcae){_0x3825e5[a95_0x319d('0x15')](a95_0x319d('0x19'),_0x30fcae);return _0x28c9b8[a95_0x319d('0x8')](a95_0x319d('0x48'));}async_1[a95_0x319d('0x17')]['waterfall']([function createRandomToken(_0x40170f){crypto_1['default'][a95_0x319d('0x5c')](0x10,(_0x5145d4,_0xa19684)=>{const _0x41c3cb=_0xa19684['toString']('hex');_0x40170f(_0x5145d4,_0x41c3cb);});},function setRandomToken(_0x599096,_0x24312c){User_1[a95_0x319d('0x17')]['findOne']({'email':_0x3825e5['body'][a95_0x319d('0xc')]},(_0x5172da,_0x35394a)=>{if(_0x5172da){return _0x24312c(_0x5172da);}if(!_0x35394a){_0x3825e5['flash'](a95_0x319d('0x19'),{'msg':a95_0x319d('0x5d')});return _0x28c9b8['redirect'](a95_0x319d('0x48'));}_0x35394a[a95_0x319d('0x51')]=_0x599096;_0x35394a[a95_0x319d('0x45')]=Date[a95_0x319d('0x46')]()+0x36ee80;_0x35394a[a95_0x319d('0x2e')](_0x5172da=>{_0x24312c(_0x5172da,_0x599096,_0x35394a);});});},function sendForgotPasswordEmail(_0x4937d0,_0x5d58a4,_0x3185ea){const _0x152f21=nodemailer_1['default'][a95_0x319d('0x52')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a95_0x319d('0x54')][a95_0x319d('0x55')]}});const _0x4aa498={'to':_0x5d58a4[a95_0x319d('0xc')],'from':a95_0x319d('0x5e'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x3825e5[a95_0x319d('0x5f')]['host']+a95_0x319d('0x60')+_0x4937d0+a95_0x319d('0x61')};_0x152f21[a95_0x319d('0x62')](_0x4aa498,_0x393b6b=>{_0x3825e5[a95_0x319d('0x15')](a95_0x319d('0x3c'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x5d58a4[a95_0x319d('0xc')]+a95_0x319d('0x63')});_0x3185ea(_0x393b6b);});}],_0x3bfae6=>{if(_0x3bfae6){return _0x4480a4(_0x3bfae6);}_0x28c9b8[a95_0x319d('0x8')](a95_0x319d('0x48'));});};