var a201_0x380f=['token','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','nodemailer','passport','../models/User','express-validator','redirect','render','Login','postLogin','email','isEmail','assert','password','notEmpty','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','sanitize','/signup','save','logIn','getAccount','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','getReset','isAuthenticated','findOne','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','confirm','waterfall'];(function(_0x17569c,_0x3e4a26){var _0x41f38e=function(_0x1479dd){while(--_0x1479dd){_0x17569c['push'](_0x17569c['shift']());}};_0x41f38e(++_0x3e4a26);}(a201_0x380f,0x82));var a201_0x2452=function(_0x170e40,_0x19d8c9){_0x170e40=_0x170e40-0x0;var _0x533dd0=a201_0x380f[_0x170e40];return _0x533dd0;};'use strict';var __importDefault=this&&this[a201_0x2452('0x0')]||function(_0x3a2854){return _0x3a2854&&_0x3a2854[a201_0x2452('0x1')]?_0x3a2854:{'default':_0x3a2854};};Object[a201_0x2452('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a201_0x2452('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a201_0x2452('0x4')));const passport_1=__importDefault(require(a201_0x2452('0x5')));const User_1=__importDefault(require(a201_0x2452('0x6')));const request=require(a201_0x2452('0x7'));exports['getLogin']=(_0x3b3e62,_0x4ae5aa)=>{if(_0x3b3e62['user']){return _0x4ae5aa[a201_0x2452('0x8')]('/');}_0x4ae5aa[a201_0x2452('0x9')]('account/login',{'title':a201_0x2452('0xa')});};exports[a201_0x2452('0xb')]=(_0x208b1d,_0xf49c2b,_0x345710)=>{_0x208b1d['assert'](a201_0x2452('0xc'),'Email\x20is\x20not\x20valid')[a201_0x2452('0xd')]();_0x208b1d[a201_0x2452('0xe')](a201_0x2452('0xf'),'Password\x20cannot\x20be\x20blank')[a201_0x2452('0x10')]();_0x208b1d['sanitize'](a201_0x2452('0xc'))[a201_0x2452('0x11')]({'gmail_remove_dots':![]});const _0x2fb861=_0x208b1d[a201_0x2452('0x12')]();if(_0x2fb861){_0x208b1d[a201_0x2452('0x13')](a201_0x2452('0x14'),_0x2fb861);return _0xf49c2b[a201_0x2452('0x8')](a201_0x2452('0x15'));}passport_1[a201_0x2452('0x16')][a201_0x2452('0x17')]('local',(_0x2698ac,_0x5ba478,_0x7098aa)=>{if(_0x2698ac){return _0x345710(_0x2698ac);}if(!_0x5ba478){_0x208b1d[a201_0x2452('0x13')](a201_0x2452('0x14'),_0x7098aa['message']);return _0xf49c2b[a201_0x2452('0x8')]('/login');}_0x208b1d['logIn'](_0x5ba478,_0x2698ac=>{if(_0x2698ac){return _0x345710(_0x2698ac);}_0x208b1d['flash'](a201_0x2452('0x18'),{'msg':a201_0x2452('0x19')});_0xf49c2b['redirect'](_0x208b1d[a201_0x2452('0x1a')][a201_0x2452('0x1b')]||'/');});})(_0x208b1d,_0xf49c2b,_0x345710);};exports['logout']=(_0x195916,_0x82580c)=>{_0x195916[a201_0x2452('0x1c')]();_0x82580c[a201_0x2452('0x8')]('/');};exports[a201_0x2452('0x1d')]=(_0x1467c7,_0x14895f)=>{if(_0x1467c7[a201_0x2452('0x1e')]){return _0x14895f[a201_0x2452('0x8')]('/');}_0x14895f[a201_0x2452('0x9')](a201_0x2452('0x1f'),{'title':a201_0x2452('0x20')});};exports[a201_0x2452('0x21')]=(_0x2e7aff,_0x193576,_0x4045b3)=>{_0x2e7aff[a201_0x2452('0xe')](a201_0x2452('0xc'),a201_0x2452('0x22'))[a201_0x2452('0xd')]();_0x2e7aff['assert'](a201_0x2452('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a201_0x2452('0x23')]({'min':0x4});_0x2e7aff[a201_0x2452('0xe')](a201_0x2452('0x24'),a201_0x2452('0x25'))[a201_0x2452('0x26')](_0x2e7aff[a201_0x2452('0x27')][a201_0x2452('0xf')]);_0x2e7aff[a201_0x2452('0x28')]('email')[a201_0x2452('0x11')]({'gmail_remove_dots':![]});const _0x2f0767=_0x2e7aff[a201_0x2452('0x12')]();if(_0x2f0767){_0x2e7aff['flash']('errors',_0x2f0767);return _0x193576[a201_0x2452('0x8')](a201_0x2452('0x29'));}const _0x40e789=new User_1[(a201_0x2452('0x16'))]({'email':_0x2e7aff['body']['email'],'password':_0x2e7aff[a201_0x2452('0x27')][a201_0x2452('0xf')]});User_1[a201_0x2452('0x16')]['findOne']({'email':_0x2e7aff[a201_0x2452('0x27')]['email']},(_0x96bcdb,_0xb71e1d)=>{if(_0x96bcdb){return _0x4045b3(_0x96bcdb);}if(_0xb71e1d){_0x2e7aff[a201_0x2452('0x13')](a201_0x2452('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x193576[a201_0x2452('0x8')](a201_0x2452('0x29'));}_0x40e789[a201_0x2452('0x2a')](_0x96bcdb=>{if(_0x96bcdb){return _0x4045b3(_0x96bcdb);}_0x2e7aff[a201_0x2452('0x2b')](_0x40e789,_0x96bcdb=>{if(_0x96bcdb){return _0x4045b3(_0x96bcdb);}_0x193576[a201_0x2452('0x8')]('/');});});});};exports[a201_0x2452('0x2c')]=(_0x185292,_0x402df8)=>{_0x402df8[a201_0x2452('0x9')]('account/profile',{'title':a201_0x2452('0x2d')});};exports[a201_0x2452('0x2e')]=(_0x38b0b1,_0x32b1ec,_0x1a6829)=>{_0x38b0b1[a201_0x2452('0xe')]('email',a201_0x2452('0x2f'))[a201_0x2452('0xd')]();_0x38b0b1['sanitize'](a201_0x2452('0xc'))[a201_0x2452('0x11')]({'gmail_remove_dots':![]});const _0x5e3da3=_0x38b0b1['validationErrors']();if(_0x5e3da3){_0x38b0b1[a201_0x2452('0x13')]('errors',_0x5e3da3);return _0x32b1ec[a201_0x2452('0x8')]('/account');}User_1[a201_0x2452('0x16')][a201_0x2452('0x30')](_0x38b0b1[a201_0x2452('0x1e')]['id'],(_0x1a4848,_0x49356d)=>{if(_0x1a4848){return _0x1a6829(_0x1a4848);}_0x49356d['email']=_0x38b0b1['body'][a201_0x2452('0xc')]||'';_0x49356d['profile'][a201_0x2452('0x31')]=_0x38b0b1['body'][a201_0x2452('0x31')]||'';_0x49356d[a201_0x2452('0x32')][a201_0x2452('0x33')]=_0x38b0b1[a201_0x2452('0x27')][a201_0x2452('0x33')]||'';_0x49356d['profile']['location']=_0x38b0b1[a201_0x2452('0x27')][a201_0x2452('0x34')]||'';_0x49356d[a201_0x2452('0x32')][a201_0x2452('0x35')]=_0x38b0b1[a201_0x2452('0x27')][a201_0x2452('0x35')]||'';_0x49356d[a201_0x2452('0x2a')](_0x1a4848=>{if(_0x1a4848){if(_0x1a4848['code']===0x2af8){_0x38b0b1[a201_0x2452('0x13')]('errors',{'msg':a201_0x2452('0x36')});return _0x32b1ec['redirect'](a201_0x2452('0x37'));}return _0x1a6829(_0x1a4848);}_0x38b0b1[a201_0x2452('0x13')](a201_0x2452('0x18'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x32b1ec[a201_0x2452('0x8')](a201_0x2452('0x37'));});});};exports['postUpdatePassword']=(_0x25371c,_0x49b719,_0xef0c58)=>{_0x25371c['assert'](a201_0x2452('0xf'),a201_0x2452('0x38'))['len']({'min':0x4});_0x25371c[a201_0x2452('0xe')](a201_0x2452('0x24'),a201_0x2452('0x25'))[a201_0x2452('0x26')](_0x25371c[a201_0x2452('0x27')]['password']);const _0x47ad5d=_0x25371c['validationErrors']();if(_0x47ad5d){_0x25371c[a201_0x2452('0x13')](a201_0x2452('0x14'),_0x47ad5d);return _0x49b719[a201_0x2452('0x8')]('/account');}User_1['default'][a201_0x2452('0x30')](_0x25371c[a201_0x2452('0x1e')]['id'],(_0x311d8c,_0xfd9525)=>{if(_0x311d8c){return _0xef0c58(_0x311d8c);}_0xfd9525['password']=_0x25371c[a201_0x2452('0x27')][a201_0x2452('0xf')];_0xfd9525[a201_0x2452('0x2a')](_0x311d8c=>{if(_0x311d8c){return _0xef0c58(_0x311d8c);}_0x25371c[a201_0x2452('0x13')](a201_0x2452('0x18'),{'msg':'Password\x20has\x20been\x20changed.'});_0x49b719[a201_0x2452('0x8')](a201_0x2452('0x37'));});});};exports[a201_0x2452('0x39')]=(_0x4e891e,_0x6c1145,_0xdadaae)=>{User_1[a201_0x2452('0x16')][a201_0x2452('0x3a')]({'_id':_0x4e891e[a201_0x2452('0x1e')]['id']},_0xd21b92=>{if(_0xd21b92){return _0xdadaae(_0xd21b92);}_0x4e891e[a201_0x2452('0x1c')]();_0x4e891e[a201_0x2452('0x13')](a201_0x2452('0x3b'),{'msg':a201_0x2452('0x3c')});_0x6c1145[a201_0x2452('0x8')]('/');});};exports[a201_0x2452('0x3d')]=(_0x523d2d,_0x406b77,_0x3f386b)=>{const _0x5d474b=_0x523d2d[a201_0x2452('0x3e')][a201_0x2452('0x3f')];User_1['default'][a201_0x2452('0x30')](_0x523d2d[a201_0x2452('0x1e')]['id'],(_0x46be60,_0x13ef04)=>{if(_0x46be60){return _0x3f386b(_0x46be60);}_0x13ef04[_0x5d474b]=undefined;_0x13ef04['tokens']=_0x13ef04[a201_0x2452('0x40')][a201_0x2452('0x41')](_0x61189e=>_0x61189e[a201_0x2452('0x42')]!==_0x5d474b);_0x13ef04[a201_0x2452('0x2a')](_0x46be60=>{if(_0x46be60){return _0x3f386b(_0x46be60);}_0x523d2d[a201_0x2452('0x13')](a201_0x2452('0x3b'),{'msg':_0x5d474b+'\x20account\x20has\x20been\x20unlinked.'});_0x406b77[a201_0x2452('0x8')]('/account');});});};exports[a201_0x2452('0x43')]=(_0x901a5a,_0x223074,_0x21fb8c)=>{if(_0x901a5a[a201_0x2452('0x44')]()){return _0x223074['redirect']('/');}User_1[a201_0x2452('0x16')][a201_0x2452('0x45')]({'passwordResetToken':_0x901a5a[a201_0x2452('0x3e')]['token']})['where'](a201_0x2452('0x46'))['gt'](Date[a201_0x2452('0x47')]())[a201_0x2452('0x48')]((_0x3539ff,_0x2a5242)=>{if(_0x3539ff){return _0x21fb8c(_0x3539ff);}if(!_0x2a5242){_0x901a5a[a201_0x2452('0x13')]('errors',{'msg':a201_0x2452('0x49')});return _0x223074[a201_0x2452('0x8')](a201_0x2452('0x4a'));}_0x223074[a201_0x2452('0x9')](a201_0x2452('0x4b'),{'title':a201_0x2452('0x4c')});});};exports[a201_0x2452('0x4d')]=(_0x29dee0,_0x42eae7,_0x225ebf)=>{_0x29dee0[a201_0x2452('0xe')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a201_0x2452('0x23')]({'min':0x4});_0x29dee0[a201_0x2452('0xe')](a201_0x2452('0x4e'),'Passwords\x20must\x20match.')[a201_0x2452('0x26')](_0x29dee0[a201_0x2452('0x27')][a201_0x2452('0xf')]);const _0x32adae=_0x29dee0['validationErrors']();if(_0x32adae){_0x29dee0[a201_0x2452('0x13')](a201_0x2452('0x14'),_0x32adae);return _0x42eae7[a201_0x2452('0x8')]('back');}async_1['default'][a201_0x2452('0x4f')]([function resetPassword(_0x4935ac){User_1['default']['findOne']({'passwordResetToken':_0x29dee0['params'][a201_0x2452('0x50')]})['where']('passwordResetExpires')['gt'](Date[a201_0x2452('0x47')]())[a201_0x2452('0x48')]((_0x2a91fe,_0x483770)=>{if(_0x2a91fe){return _0x225ebf(_0x2a91fe);}if(!_0x483770){_0x29dee0[a201_0x2452('0x13')](a201_0x2452('0x14'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x42eae7['redirect'](a201_0x2452('0x51'));}_0x483770[a201_0x2452('0xf')]=_0x29dee0['body'][a201_0x2452('0xf')];_0x483770[a201_0x2452('0x52')]=undefined;_0x483770['passwordResetExpires']=undefined;_0x483770['save'](_0x2a91fe=>{if(_0x2a91fe){return _0x225ebf(_0x2a91fe);}_0x29dee0[a201_0x2452('0x2b')](_0x483770,_0x2a91fe=>{_0x4935ac(_0x2a91fe,_0x483770);});});});},function sendResetPasswordEmail(_0x2183ee,_0x1981f6){const _0x56eb11=nodemailer_1[a201_0x2452('0x16')][a201_0x2452('0x53')]({'service':a201_0x2452('0x54'),'auth':{'user':process[a201_0x2452('0x55')][a201_0x2452('0x56')],'pass':process['env'][a201_0x2452('0x57')]}});const _0x419df6={'to':_0x2183ee[a201_0x2452('0xc')],'from':'express-ts@starter.com','subject':a201_0x2452('0x58'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x2183ee[a201_0x2452('0xc')]+a201_0x2452('0x59')};_0x56eb11[a201_0x2452('0x5a')](_0x419df6,_0x6d5cbd=>{_0x29dee0[a201_0x2452('0x13')]('success',{'msg':a201_0x2452('0x5b')});_0x1981f6(_0x6d5cbd);});}],_0x50ed79=>{if(_0x50ed79){return _0x225ebf(_0x50ed79);}_0x42eae7[a201_0x2452('0x8')]('/');});};exports[a201_0x2452('0x5c')]=(_0x252ec7,_0xf24a6b)=>{if(_0x252ec7[a201_0x2452('0x44')]()){return _0xf24a6b[a201_0x2452('0x8')]('/');}_0xf24a6b[a201_0x2452('0x9')](a201_0x2452('0x5d'),{'title':a201_0x2452('0x5e')});};exports['postForgot']=(_0x488a25,_0x2b2ce3,_0x10bf5)=>{_0x488a25[a201_0x2452('0xe')](a201_0x2452('0xc'),a201_0x2452('0x2f'))[a201_0x2452('0xd')]();_0x488a25[a201_0x2452('0x28')](a201_0x2452('0xc'))[a201_0x2452('0x11')]({'gmail_remove_dots':![]});const _0x2ac8ee=_0x488a25['validationErrors']();if(_0x2ac8ee){_0x488a25[a201_0x2452('0x13')](a201_0x2452('0x14'),_0x2ac8ee);return _0x2b2ce3[a201_0x2452('0x8')](a201_0x2452('0x4a'));}async_1['default'][a201_0x2452('0x4f')]([function createRandomToken(_0x12e65e){crypto_1[a201_0x2452('0x16')][a201_0x2452('0x5f')](0x10,(_0x27c7d0,_0x464411)=>{const _0x1598ad=_0x464411[a201_0x2452('0x60')]('hex');_0x12e65e(_0x27c7d0,_0x1598ad);});},function setRandomToken(_0x8bc77b,_0x278be2){User_1[a201_0x2452('0x16')][a201_0x2452('0x45')]({'email':_0x488a25[a201_0x2452('0x27')][a201_0x2452('0xc')]},(_0x19141b,_0x346ca7)=>{if(_0x19141b){return _0x278be2(_0x19141b);}if(!_0x346ca7){_0x488a25[a201_0x2452('0x13')](a201_0x2452('0x14'),{'msg':a201_0x2452('0x61')});return _0x2b2ce3[a201_0x2452('0x8')](a201_0x2452('0x4a'));}_0x346ca7['passwordResetToken']=_0x8bc77b;_0x346ca7[a201_0x2452('0x46')]=Date[a201_0x2452('0x47')]()+0x36ee80;_0x346ca7[a201_0x2452('0x2a')](_0x19141b=>{_0x278be2(_0x19141b,_0x8bc77b,_0x346ca7);});});},function sendForgotPasswordEmail(_0x3e80f3,_0xb97982,_0x4700a0){const _0x3a514d=nodemailer_1[a201_0x2452('0x16')][a201_0x2452('0x53')]({'service':a201_0x2452('0x54'),'auth':{'user':process[a201_0x2452('0x55')][a201_0x2452('0x56')],'pass':process[a201_0x2452('0x55')][a201_0x2452('0x57')]}});const _0x4fad6c={'to':_0xb97982['email'],'from':'hackathon@starter.com','subject':a201_0x2452('0x62'),'text':a201_0x2452('0x63')+_0x488a25[a201_0x2452('0x64')]['host']+a201_0x2452('0x65')+_0x3e80f3+a201_0x2452('0x66')};_0x3a514d[a201_0x2452('0x5a')](_0x4fad6c,_0x1b4cfe=>{_0x488a25[a201_0x2452('0x13')](a201_0x2452('0x3b'),{'msg':a201_0x2452('0x67')+_0xb97982[a201_0x2452('0xc')]+a201_0x2452('0x68')});_0x4700a0(_0x1b4cfe);});}],_0x501c0c=>{if(_0x501c0c){return _0x10bf5(_0x501c0c);}_0x2b2ce3[a201_0x2452('0x8')]('/forgot');});};