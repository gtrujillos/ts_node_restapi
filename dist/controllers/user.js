var a95_0x3dc9=['redirect','render','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','errors','/login','default','authenticate','local','message','flash','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','validationErrors','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','postUpdatePassword','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','Passwords\x20must\x20match.','back','waterfall','token','passwordResetToken','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','../models/User','express-validator','getLogin','user'];(function(_0x25c16b,_0x122a0a){var _0x34f634=function(_0x46dc60){while(--_0x46dc60){_0x25c16b['push'](_0x25c16b['shift']());}};_0x34f634(++_0x122a0a);}(a95_0x3dc9,0xdd));var a95_0x26ce=function(_0x2cb802,_0x5edf84){_0x2cb802=_0x2cb802-0x0;var _0x165603=a95_0x3dc9[_0x2cb802];return _0x165603;};'use strict';var __importDefault=this&&this[a95_0x26ce('0x0')]||function(_0x1145f3){return _0x1145f3&&_0x1145f3[a95_0x26ce('0x1')]?_0x1145f3:{'default':_0x1145f3};};Object['defineProperty'](exports,a95_0x26ce('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x26ce('0x2')));const crypto_1=__importDefault(require(a95_0x26ce('0x3')));const nodemailer_1=__importDefault(require(a95_0x26ce('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a95_0x26ce('0x5')));const request=require(a95_0x26ce('0x6'));exports[a95_0x26ce('0x7')]=(_0x27b7c7,_0x444279)=>{if(_0x27b7c7[a95_0x26ce('0x8')]){return _0x444279[a95_0x26ce('0x9')]('/');}_0x444279[a95_0x26ce('0xa')]('account/login',{'title':'Login'});};exports[a95_0x26ce('0xb')]=(_0x13db9a,_0x42e9e2,_0xd13345)=>{_0x13db9a[a95_0x26ce('0xc')](a95_0x26ce('0xd'),a95_0x26ce('0xe'))[a95_0x26ce('0xf')]();_0x13db9a[a95_0x26ce('0xc')](a95_0x26ce('0x10'),a95_0x26ce('0x11'))['notEmpty']();_0x13db9a[a95_0x26ce('0x12')]('email')[a95_0x26ce('0x13')]({'gmail_remove_dots':![]});const _0x3c457d=_0x13db9a['validationErrors']();if(_0x3c457d){_0x13db9a['flash'](a95_0x26ce('0x14'),_0x3c457d);return _0x42e9e2[a95_0x26ce('0x9')](a95_0x26ce('0x15'));}passport_1[a95_0x26ce('0x16')][a95_0x26ce('0x17')](a95_0x26ce('0x18'),(_0x3107be,_0xd4d83b,_0x844084)=>{if(_0x3107be){return _0xd13345(_0x3107be);}if(!_0xd4d83b){_0x13db9a['flash'](a95_0x26ce('0x14'),_0x844084[a95_0x26ce('0x19')]);return _0x42e9e2['redirect']('/login');}_0x13db9a['logIn'](_0xd4d83b,_0x3107be=>{if(_0x3107be){return _0xd13345(_0x3107be);}_0x13db9a[a95_0x26ce('0x1a')]('success',{'msg':a95_0x26ce('0x1b')});_0x42e9e2[a95_0x26ce('0x9')](_0x13db9a[a95_0x26ce('0x1c')][a95_0x26ce('0x1d')]||'/');});})(_0x13db9a,_0x42e9e2,_0xd13345);};exports[a95_0x26ce('0x1e')]=(_0x1f84dc,_0x555ce3)=>{_0x1f84dc[a95_0x26ce('0x1e')]();_0x555ce3[a95_0x26ce('0x9')]('/');};exports[a95_0x26ce('0x1f')]=(_0x506f37,_0x4c215e)=>{if(_0x506f37['user']){return _0x4c215e['redirect']('/');}_0x4c215e['render'](a95_0x26ce('0x20'),{'title':a95_0x26ce('0x21')});};exports[a95_0x26ce('0x22')]=(_0x288026,_0x3cd028,_0x2c17de)=>{_0x288026[a95_0x26ce('0xc')]('email','Email\x20is\x20not\x20valid')['isEmail']();_0x288026[a95_0x26ce('0xc')](a95_0x26ce('0x10'),a95_0x26ce('0x23'))['len']({'min':0x4});_0x288026[a95_0x26ce('0xc')](a95_0x26ce('0x24'),a95_0x26ce('0x25'))['equals'](_0x288026[a95_0x26ce('0x26')][a95_0x26ce('0x10')]);_0x288026[a95_0x26ce('0x12')](a95_0x26ce('0xd'))[a95_0x26ce('0x13')]({'gmail_remove_dots':![]});const _0xf524fc=_0x288026['validationErrors']();if(_0xf524fc){_0x288026[a95_0x26ce('0x1a')](a95_0x26ce('0x14'),_0xf524fc);return _0x3cd028['redirect'](a95_0x26ce('0x27'));}const _0x392b2e=new User_1['default']({'email':_0x288026[a95_0x26ce('0x26')][a95_0x26ce('0xd')],'password':_0x288026[a95_0x26ce('0x26')][a95_0x26ce('0x10')]});User_1[a95_0x26ce('0x16')]['findOne']({'email':_0x288026[a95_0x26ce('0x26')][a95_0x26ce('0xd')]},(_0x11bb7d,_0x2d585e)=>{if(_0x11bb7d){return _0x2c17de(_0x11bb7d);}if(_0x2d585e){_0x288026['flash']('errors',{'msg':a95_0x26ce('0x28')});return _0x3cd028[a95_0x26ce('0x9')](a95_0x26ce('0x27'));}_0x392b2e[a95_0x26ce('0x29')](_0x11bb7d=>{if(_0x11bb7d){return _0x2c17de(_0x11bb7d);}_0x288026[a95_0x26ce('0x2a')](_0x392b2e,_0x11bb7d=>{if(_0x11bb7d){return _0x2c17de(_0x11bb7d);}_0x3cd028[a95_0x26ce('0x9')]('/');});});});};exports[a95_0x26ce('0x2b')]=(_0xf16567,_0x43b29c)=>{_0x43b29c[a95_0x26ce('0xa')](a95_0x26ce('0x2c'),{'title':a95_0x26ce('0x2d')});};exports[a95_0x26ce('0x2e')]=(_0x1aa087,_0xe9a13f,_0x2fd176)=>{_0x1aa087[a95_0x26ce('0xc')](a95_0x26ce('0xd'),a95_0x26ce('0x2f'))[a95_0x26ce('0xf')]();_0x1aa087[a95_0x26ce('0x12')]('email')[a95_0x26ce('0x13')]({'gmail_remove_dots':![]});const _0x1286d6=_0x1aa087[a95_0x26ce('0x30')]();if(_0x1286d6){_0x1aa087[a95_0x26ce('0x1a')](a95_0x26ce('0x14'),_0x1286d6);return _0xe9a13f['redirect'](a95_0x26ce('0x31'));}User_1[a95_0x26ce('0x16')][a95_0x26ce('0x32')](_0x1aa087[a95_0x26ce('0x8')]['id'],(_0x4f610a,_0x5ad8b0)=>{if(_0x4f610a){return _0x2fd176(_0x4f610a);}_0x5ad8b0[a95_0x26ce('0xd')]=_0x1aa087[a95_0x26ce('0x26')][a95_0x26ce('0xd')]||'';_0x5ad8b0[a95_0x26ce('0x33')][a95_0x26ce('0x34')]=_0x1aa087[a95_0x26ce('0x26')]['name']||'';_0x5ad8b0['profile'][a95_0x26ce('0x35')]=_0x1aa087['body'][a95_0x26ce('0x35')]||'';_0x5ad8b0[a95_0x26ce('0x33')]['location']=_0x1aa087[a95_0x26ce('0x26')][a95_0x26ce('0x36')]||'';_0x5ad8b0[a95_0x26ce('0x33')][a95_0x26ce('0x37')]=_0x1aa087[a95_0x26ce('0x26')][a95_0x26ce('0x37')]||'';_0x5ad8b0[a95_0x26ce('0x29')](_0x4f610a=>{if(_0x4f610a){if(_0x4f610a['code']===0x2af8){_0x1aa087[a95_0x26ce('0x1a')](a95_0x26ce('0x14'),{'msg':a95_0x26ce('0x38')});return _0xe9a13f[a95_0x26ce('0x9')](a95_0x26ce('0x31'));}return _0x2fd176(_0x4f610a);}_0x1aa087['flash'](a95_0x26ce('0x39'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0xe9a13f[a95_0x26ce('0x9')](a95_0x26ce('0x31'));});});};exports[a95_0x26ce('0x3a')]=(_0x2d708d,_0x2fec11,_0x285f88)=>{_0x2d708d['assert'](a95_0x26ce('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x2d708d['assert']('confirmPassword','Passwords\x20do\x20not\x20match')[a95_0x26ce('0x3b')](_0x2d708d[a95_0x26ce('0x26')][a95_0x26ce('0x10')]);const _0x366401=_0x2d708d['validationErrors']();if(_0x366401){_0x2d708d[a95_0x26ce('0x1a')]('errors',_0x366401);return _0x2fec11[a95_0x26ce('0x9')]('/account');}User_1[a95_0x26ce('0x16')][a95_0x26ce('0x32')](_0x2d708d['user']['id'],(_0x2d2574,_0x3a5924)=>{if(_0x2d2574){return _0x285f88(_0x2d2574);}_0x3a5924[a95_0x26ce('0x10')]=_0x2d708d[a95_0x26ce('0x26')][a95_0x26ce('0x10')];_0x3a5924[a95_0x26ce('0x29')](_0x2d2574=>{if(_0x2d2574){return _0x285f88(_0x2d2574);}_0x2d708d[a95_0x26ce('0x1a')](a95_0x26ce('0x39'),{'msg':a95_0x26ce('0x3c')});_0x2fec11[a95_0x26ce('0x9')](a95_0x26ce('0x31'));});});};exports[a95_0x26ce('0x3d')]=(_0x49e223,_0x456a72,_0x3c13bf)=>{User_1['default'][a95_0x26ce('0x3e')]({'_id':_0x49e223['user']['id']},_0x1fccc8=>{if(_0x1fccc8){return _0x3c13bf(_0x1fccc8);}_0x49e223['logout']();_0x49e223['flash']('info',{'msg':a95_0x26ce('0x3f')});_0x456a72[a95_0x26ce('0x9')]('/');});};exports[a95_0x26ce('0x40')]=(_0x440001,_0x361b02,_0x5bea74)=>{const _0x3a4a1a=_0x440001[a95_0x26ce('0x41')][a95_0x26ce('0x42')];User_1[a95_0x26ce('0x16')]['findById'](_0x440001['user']['id'],(_0x38114a,_0x2cb9ea)=>{if(_0x38114a){return _0x5bea74(_0x38114a);}_0x2cb9ea[_0x3a4a1a]=undefined;_0x2cb9ea['tokens']=_0x2cb9ea[a95_0x26ce('0x43')][a95_0x26ce('0x44')](_0x491add=>_0x491add['kind']!==_0x3a4a1a);_0x2cb9ea[a95_0x26ce('0x29')](_0x38114a=>{if(_0x38114a){return _0x5bea74(_0x38114a);}_0x440001[a95_0x26ce('0x1a')](a95_0x26ce('0x45'),{'msg':_0x3a4a1a+a95_0x26ce('0x46')});_0x361b02[a95_0x26ce('0x9')](a95_0x26ce('0x31'));});});};exports[a95_0x26ce('0x47')]=(_0x2daf16,_0x590964,_0x268c0b)=>{if(_0x2daf16[a95_0x26ce('0x48')]()){return _0x590964[a95_0x26ce('0x9')]('/');}User_1['default'][a95_0x26ce('0x49')]({'passwordResetToken':_0x2daf16[a95_0x26ce('0x41')]['token']})[a95_0x26ce('0x4a')](a95_0x26ce('0x4b'))['gt'](Date[a95_0x26ce('0x4c')]())[a95_0x26ce('0x4d')]((_0x20c398,_0x24866d)=>{if(_0x20c398){return _0x268c0b(_0x20c398);}if(!_0x24866d){_0x2daf16[a95_0x26ce('0x1a')](a95_0x26ce('0x14'),{'msg':a95_0x26ce('0x4e')});return _0x590964[a95_0x26ce('0x9')](a95_0x26ce('0x4f'));}_0x590964['render'](a95_0x26ce('0x50'),{'title':a95_0x26ce('0x51')});});};exports[a95_0x26ce('0x52')]=(_0x1d03f7,_0x32b2eb,_0x268a5c)=>{_0x1d03f7[a95_0x26ce('0xc')](a95_0x26ce('0x10'),a95_0x26ce('0x53'))[a95_0x26ce('0x54')]({'min':0x4});_0x1d03f7[a95_0x26ce('0xc')](a95_0x26ce('0x55'),a95_0x26ce('0x56'))[a95_0x26ce('0x3b')](_0x1d03f7['body'][a95_0x26ce('0x10')]);const _0x16b8c4=_0x1d03f7[a95_0x26ce('0x30')]();if(_0x16b8c4){_0x1d03f7['flash'](a95_0x26ce('0x14'),_0x16b8c4);return _0x32b2eb[a95_0x26ce('0x9')](a95_0x26ce('0x57'));}async_1[a95_0x26ce('0x16')][a95_0x26ce('0x58')]([function resetPassword(_0x4fa9df){User_1[a95_0x26ce('0x16')][a95_0x26ce('0x49')]({'passwordResetToken':_0x1d03f7['params'][a95_0x26ce('0x59')]})['where'](a95_0x26ce('0x4b'))['gt'](Date['now']())[a95_0x26ce('0x4d')]((_0xde4713,_0x43ac9a)=>{if(_0xde4713){return _0x268a5c(_0xde4713);}if(!_0x43ac9a){_0x1d03f7[a95_0x26ce('0x1a')](a95_0x26ce('0x14'),{'msg':a95_0x26ce('0x4e')});return _0x32b2eb['redirect']('back');}_0x43ac9a['password']=_0x1d03f7['body'][a95_0x26ce('0x10')];_0x43ac9a[a95_0x26ce('0x5a')]=undefined;_0x43ac9a[a95_0x26ce('0x4b')]=undefined;_0x43ac9a[a95_0x26ce('0x29')](_0xde4713=>{if(_0xde4713){return _0x268a5c(_0xde4713);}_0x1d03f7['logIn'](_0x43ac9a,_0xde4713=>{_0x4fa9df(_0xde4713,_0x43ac9a);});});});},function sendResetPasswordEmail(_0x11d170,_0x24e372){const _0x406201=nodemailer_1[a95_0x26ce('0x16')]['createTransport']({'service':a95_0x26ce('0x5b'),'auth':{'user':process[a95_0x26ce('0x5c')][a95_0x26ce('0x5d')],'pass':process[a95_0x26ce('0x5c')][a95_0x26ce('0x5e')]}});const _0x176921={'to':_0x11d170[a95_0x26ce('0xd')],'from':a95_0x26ce('0x5f'),'subject':a95_0x26ce('0x60'),'text':a95_0x26ce('0x61')+_0x11d170[a95_0x26ce('0xd')]+a95_0x26ce('0x62')};_0x406201['sendMail'](_0x176921,_0xff2615=>{_0x1d03f7['flash']('success',{'msg':a95_0x26ce('0x63')});_0x24e372(_0xff2615);});}],_0x34722c=>{if(_0x34722c){return _0x268a5c(_0x34722c);}_0x32b2eb[a95_0x26ce('0x9')]('/');});};exports[a95_0x26ce('0x64')]=(_0x44e309,_0x34cb9c)=>{if(_0x44e309[a95_0x26ce('0x48')]()){return _0x34cb9c[a95_0x26ce('0x9')]('/');}_0x34cb9c[a95_0x26ce('0xa')]('account/forgot',{'title':a95_0x26ce('0x65')});};exports[a95_0x26ce('0x66')]=(_0xc9553d,_0x5a5f9b,_0x10daf5)=>{_0xc9553d[a95_0x26ce('0xc')](a95_0x26ce('0xd'),a95_0x26ce('0x2f'))[a95_0x26ce('0xf')]();_0xc9553d[a95_0x26ce('0x12')](a95_0x26ce('0xd'))[a95_0x26ce('0x13')]({'gmail_remove_dots':![]});const _0x426219=_0xc9553d[a95_0x26ce('0x30')]();if(_0x426219){_0xc9553d[a95_0x26ce('0x1a')]('errors',_0x426219);return _0x5a5f9b[a95_0x26ce('0x9')](a95_0x26ce('0x4f'));}async_1[a95_0x26ce('0x16')][a95_0x26ce('0x58')]([function createRandomToken(_0x17cc37){crypto_1[a95_0x26ce('0x16')][a95_0x26ce('0x67')](0x10,(_0x40dfa0,_0x21df7a)=>{const _0x314e0e=_0x21df7a[a95_0x26ce('0x68')]('hex');_0x17cc37(_0x40dfa0,_0x314e0e);});},function setRandomToken(_0x5cbfdc,_0x52a533){User_1[a95_0x26ce('0x16')][a95_0x26ce('0x49')]({'email':_0xc9553d[a95_0x26ce('0x26')][a95_0x26ce('0xd')]},(_0x129bb5,_0x418b29)=>{if(_0x129bb5){return _0x52a533(_0x129bb5);}if(!_0x418b29){_0xc9553d[a95_0x26ce('0x1a')]('errors',{'msg':a95_0x26ce('0x69')});return _0x5a5f9b[a95_0x26ce('0x9')](a95_0x26ce('0x4f'));}_0x418b29[a95_0x26ce('0x5a')]=_0x5cbfdc;_0x418b29[a95_0x26ce('0x4b')]=Date[a95_0x26ce('0x4c')]()+0x36ee80;_0x418b29[a95_0x26ce('0x29')](_0x129bb5=>{_0x52a533(_0x129bb5,_0x5cbfdc,_0x418b29);});});},function sendForgotPasswordEmail(_0x51c61a,_0x3081da,_0x85ef1b){const _0x143495=nodemailer_1[a95_0x26ce('0x16')][a95_0x26ce('0x6a')]({'service':'SendGrid','auth':{'user':process[a95_0x26ce('0x5c')][a95_0x26ce('0x5d')],'pass':process[a95_0x26ce('0x5c')][a95_0x26ce('0x5e')]}});const _0x42378e={'to':_0x3081da[a95_0x26ce('0xd')],'from':a95_0x26ce('0x6b'),'subject':a95_0x26ce('0x6c'),'text':a95_0x26ce('0x6d')+_0xc9553d['headers'][a95_0x26ce('0x6e')]+a95_0x26ce('0x6f')+_0x51c61a+a95_0x26ce('0x70')};_0x143495['sendMail'](_0x42378e,_0x25d97d=>{_0xc9553d[a95_0x26ce('0x1a')](a95_0x26ce('0x45'),{'msg':a95_0x26ce('0x71')+_0x3081da[a95_0x26ce('0xd')]+a95_0x26ce('0x72')});_0x85ef1b(_0x25d97d);});}],_0x56a453=>{if(_0x56a453){return _0x10daf5(_0x56a453);}_0x5a5f9b[a95_0x26ce('0x9')]('/forgot');});};