var a101_0x415f=['Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','/forgot','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','now','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','passport','express-validator','user','render','Login','assert','email','password','notEmpty','sanitize','validationErrors','flash','errors','redirect','default','authenticate','local','/login','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','normalizeEmail','/account','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','equals','findById','postDeleteAccount','remove','info','getOauthUnlink','params','provider','tokens','filter','getReset','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','logIn','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com'];(function(_0x3bdebb,_0x26b970){var _0x4ec723=function(_0x55eaaf){while(--_0x55eaaf){_0x3bdebb['push'](_0x3bdebb['shift']());}};_0x4ec723(++_0x26b970);}(a101_0x415f,0x151));var a101_0x236d=function(_0x345f42,_0x35d665){_0x345f42=_0x345f42-0x0;var _0x2e7b9f=a101_0x415f[_0x345f42];return _0x2e7b9f;};'use strict';var __importDefault=this&&this[a101_0x236d('0x0')]||function(_0xd2e575){return _0xd2e575&&_0xd2e575[a101_0x236d('0x1')]?_0xd2e575:{'default':_0xd2e575};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a101_0x236d('0x2')));const crypto_1=__importDefault(require(a101_0x236d('0x3')));const nodemailer_1=__importDefault(require(a101_0x236d('0x4')));const passport_1=__importDefault(require(a101_0x236d('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a101_0x236d('0x6'));exports['getLogin']=(_0xe06b8a,_0x3c69ed)=>{if(_0xe06b8a[a101_0x236d('0x7')]){return _0x3c69ed['redirect']('/');}_0x3c69ed[a101_0x236d('0x8')]('account/login',{'title':a101_0x236d('0x9')});};exports['postLogin']=(_0x6d30fd,_0x36d887,_0x1ae8b0)=>{_0x6d30fd[a101_0x236d('0xa')](a101_0x236d('0xb'),'Email\x20is\x20not\x20valid')['isEmail']();_0x6d30fd[a101_0x236d('0xa')](a101_0x236d('0xc'),'Password\x20cannot\x20be\x20blank')[a101_0x236d('0xd')]();_0x6d30fd[a101_0x236d('0xe')](a101_0x236d('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x5da565=_0x6d30fd[a101_0x236d('0xf')]();if(_0x5da565){_0x6d30fd[a101_0x236d('0x10')](a101_0x236d('0x11'),_0x5da565);return _0x36d887[a101_0x236d('0x12')]('/login');}passport_1[a101_0x236d('0x13')][a101_0x236d('0x14')](a101_0x236d('0x15'),(_0x327853,_0xc2e59f,_0x201348)=>{if(_0x327853){return _0x1ae8b0(_0x327853);}if(!_0xc2e59f){_0x6d30fd[a101_0x236d('0x10')](a101_0x236d('0x11'),_0x201348['message']);return _0x36d887[a101_0x236d('0x12')](a101_0x236d('0x16'));}_0x6d30fd['logIn'](_0xc2e59f,_0x327853=>{if(_0x327853){return _0x1ae8b0(_0x327853);}_0x6d30fd['flash'](a101_0x236d('0x17'),{'msg':a101_0x236d('0x18')});_0x36d887[a101_0x236d('0x12')](_0x6d30fd[a101_0x236d('0x19')]['returnTo']||'/');});})(_0x6d30fd,_0x36d887,_0x1ae8b0);};exports[a101_0x236d('0x1a')]=(_0x4119b4,_0x3353cb)=>{_0x4119b4[a101_0x236d('0x1a')]();_0x3353cb['redirect']('/');};exports[a101_0x236d('0x1b')]=(_0x2ae943,_0x1ae55e)=>{if(_0x2ae943[a101_0x236d('0x7')]){return _0x1ae55e[a101_0x236d('0x12')]('/');}_0x1ae55e[a101_0x236d('0x8')](a101_0x236d('0x1c'),{'title':a101_0x236d('0x1d')});};exports['postSignup']=(_0x2e2463,_0x53b9df,_0x1123f7)=>{_0x2e2463[a101_0x236d('0xa')]('email','Email\x20is\x20not\x20valid')[a101_0x236d('0x1e')]();_0x2e2463[a101_0x236d('0xa')](a101_0x236d('0xc'),a101_0x236d('0x1f'))[a101_0x236d('0x20')]({'min':0x4});_0x2e2463[a101_0x236d('0xa')](a101_0x236d('0x21'),a101_0x236d('0x22'))['equals'](_0x2e2463[a101_0x236d('0x23')]['password']);_0x2e2463[a101_0x236d('0xe')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x5516fb=_0x2e2463[a101_0x236d('0xf')]();if(_0x5516fb){_0x2e2463[a101_0x236d('0x10')](a101_0x236d('0x11'),_0x5516fb);return _0x53b9df['redirect'](a101_0x236d('0x24'));}const _0x2334a5=new User_1[(a101_0x236d('0x13'))]({'email':_0x2e2463[a101_0x236d('0x23')][a101_0x236d('0xb')],'password':_0x2e2463['body'][a101_0x236d('0xc')]});User_1[a101_0x236d('0x13')][a101_0x236d('0x25')]({'email':_0x2e2463[a101_0x236d('0x23')]['email']},(_0x503ea7,_0x296360)=>{if(_0x503ea7){return _0x1123f7(_0x503ea7);}if(_0x296360){_0x2e2463[a101_0x236d('0x10')](a101_0x236d('0x11'),{'msg':a101_0x236d('0x26')});return _0x53b9df[a101_0x236d('0x12')](a101_0x236d('0x24'));}_0x2334a5[a101_0x236d('0x27')](_0x503ea7=>{if(_0x503ea7){return _0x1123f7(_0x503ea7);}_0x2e2463['logIn'](_0x2334a5,_0x503ea7=>{if(_0x503ea7){return _0x1123f7(_0x503ea7);}_0x53b9df[a101_0x236d('0x12')]('/');});});});};exports[a101_0x236d('0x28')]=(_0x1162f6,_0x3de9dc)=>{_0x3de9dc[a101_0x236d('0x8')](a101_0x236d('0x29'),{'title':a101_0x236d('0x2a')});};exports['postUpdateProfile']=(_0x42178f,_0x3401e6,_0xa7e7e8)=>{_0x42178f[a101_0x236d('0xa')](a101_0x236d('0xb'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a101_0x236d('0x1e')]();_0x42178f['sanitize'](a101_0x236d('0xb'))[a101_0x236d('0x2b')]({'gmail_remove_dots':![]});const _0x2ab9fb=_0x42178f[a101_0x236d('0xf')]();if(_0x2ab9fb){_0x42178f[a101_0x236d('0x10')](a101_0x236d('0x11'),_0x2ab9fb);return _0x3401e6[a101_0x236d('0x12')](a101_0x236d('0x2c'));}User_1[a101_0x236d('0x13')]['findById'](_0x42178f[a101_0x236d('0x7')]['id'],(_0x529d36,_0x23be28)=>{if(_0x529d36){return _0xa7e7e8(_0x529d36);}_0x23be28['email']=_0x42178f[a101_0x236d('0x23')][a101_0x236d('0xb')]||'';_0x23be28[a101_0x236d('0x2d')][a101_0x236d('0x2e')]=_0x42178f['body'][a101_0x236d('0x2e')]||'';_0x23be28['profile'][a101_0x236d('0x2f')]=_0x42178f[a101_0x236d('0x23')][a101_0x236d('0x2f')]||'';_0x23be28['profile']['location']=_0x42178f[a101_0x236d('0x23')][a101_0x236d('0x30')]||'';_0x23be28['profile'][a101_0x236d('0x31')]=_0x42178f[a101_0x236d('0x23')][a101_0x236d('0x31')]||'';_0x23be28['save'](_0x529d36=>{if(_0x529d36){if(_0x529d36[a101_0x236d('0x32')]===0x2af8){_0x42178f[a101_0x236d('0x10')]('errors',{'msg':a101_0x236d('0x33')});return _0x3401e6[a101_0x236d('0x12')](a101_0x236d('0x2c'));}return _0xa7e7e8(_0x529d36);}_0x42178f['flash'](a101_0x236d('0x17'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x3401e6[a101_0x236d('0x12')](a101_0x236d('0x2c'));});});};exports[a101_0x236d('0x34')]=(_0x2f4a2d,_0x4421a8,_0x3794ae)=>{_0x2f4a2d[a101_0x236d('0xa')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x2f4a2d[a101_0x236d('0xa')](a101_0x236d('0x21'),a101_0x236d('0x22'))[a101_0x236d('0x35')](_0x2f4a2d['body'][a101_0x236d('0xc')]);const _0x501678=_0x2f4a2d[a101_0x236d('0xf')]();if(_0x501678){_0x2f4a2d[a101_0x236d('0x10')]('errors',_0x501678);return _0x4421a8[a101_0x236d('0x12')](a101_0x236d('0x2c'));}User_1[a101_0x236d('0x13')][a101_0x236d('0x36')](_0x2f4a2d['user']['id'],(_0x1a04d8,_0x2fa88d)=>{if(_0x1a04d8){return _0x3794ae(_0x1a04d8);}_0x2fa88d[a101_0x236d('0xc')]=_0x2f4a2d[a101_0x236d('0x23')]['password'];_0x2fa88d[a101_0x236d('0x27')](_0x1a04d8=>{if(_0x1a04d8){return _0x3794ae(_0x1a04d8);}_0x2f4a2d[a101_0x236d('0x10')](a101_0x236d('0x17'),{'msg':'Password\x20has\x20been\x20changed.'});_0x4421a8[a101_0x236d('0x12')](a101_0x236d('0x2c'));});});};exports[a101_0x236d('0x37')]=(_0x242097,_0x16d6d8,_0x46dd11)=>{User_1[a101_0x236d('0x13')][a101_0x236d('0x38')]({'_id':_0x242097['user']['id']},_0x4c35c3=>{if(_0x4c35c3){return _0x46dd11(_0x4c35c3);}_0x242097[a101_0x236d('0x1a')]();_0x242097[a101_0x236d('0x10')](a101_0x236d('0x39'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x16d6d8[a101_0x236d('0x12')]('/');});};exports[a101_0x236d('0x3a')]=(_0x3bfbda,_0x20612c,_0x4d56e3)=>{const _0x5dbad6=_0x3bfbda[a101_0x236d('0x3b')][a101_0x236d('0x3c')];User_1[a101_0x236d('0x13')][a101_0x236d('0x36')](_0x3bfbda['user']['id'],(_0xf2d198,_0x45af8c)=>{if(_0xf2d198){return _0x4d56e3(_0xf2d198);}_0x45af8c[_0x5dbad6]=undefined;_0x45af8c[a101_0x236d('0x3d')]=_0x45af8c[a101_0x236d('0x3d')][a101_0x236d('0x3e')](_0x1242e4=>_0x1242e4['kind']!==_0x5dbad6);_0x45af8c[a101_0x236d('0x27')](_0xf2d198=>{if(_0xf2d198){return _0x4d56e3(_0xf2d198);}_0x3bfbda[a101_0x236d('0x10')](a101_0x236d('0x39'),{'msg':_0x5dbad6+'\x20account\x20has\x20been\x20unlinked.'});_0x20612c[a101_0x236d('0x12')](a101_0x236d('0x2c'));});});};exports[a101_0x236d('0x3f')]=(_0x19fcc1,_0x4cc56e,_0x4c9535)=>{if(_0x19fcc1[a101_0x236d('0x40')]()){return _0x4cc56e[a101_0x236d('0x12')]('/');}User_1[a101_0x236d('0x13')]['findOne']({'passwordResetToken':_0x19fcc1[a101_0x236d('0x3b')][a101_0x236d('0x41')]})[a101_0x236d('0x42')](a101_0x236d('0x43'))['gt'](Date['now']())[a101_0x236d('0x44')]((_0xae68b3,_0x5d894f)=>{if(_0xae68b3){return _0x4c9535(_0xae68b3);}if(!_0x5d894f){_0x19fcc1['flash'](a101_0x236d('0x11'),{'msg':a101_0x236d('0x45')});return _0x4cc56e[a101_0x236d('0x12')]('/forgot');}_0x4cc56e[a101_0x236d('0x8')]('account/reset',{'title':'Password\x20Reset'});});};exports[a101_0x236d('0x46')]=(_0x4eecba,_0x18e887,_0x505a99)=>{_0x4eecba['assert'](a101_0x236d('0xc'),a101_0x236d('0x47'))['len']({'min':0x4});_0x4eecba[a101_0x236d('0xa')](a101_0x236d('0x48'),a101_0x236d('0x49'))[a101_0x236d('0x35')](_0x4eecba['body'][a101_0x236d('0xc')]);const _0x5505fc=_0x4eecba[a101_0x236d('0xf')]();if(_0x5505fc){_0x4eecba['flash']('errors',_0x5505fc);return _0x18e887[a101_0x236d('0x12')](a101_0x236d('0x4a'));}async_1[a101_0x236d('0x13')][a101_0x236d('0x4b')]([function resetPassword(_0x699d55){User_1[a101_0x236d('0x13')]['findOne']({'passwordResetToken':_0x4eecba[a101_0x236d('0x3b')][a101_0x236d('0x41')]})[a101_0x236d('0x42')](a101_0x236d('0x43'))['gt'](Date['now']())[a101_0x236d('0x44')]((_0x4554a5,_0x12c06d)=>{if(_0x4554a5){return _0x505a99(_0x4554a5);}if(!_0x12c06d){_0x4eecba[a101_0x236d('0x10')](a101_0x236d('0x11'),{'msg':a101_0x236d('0x45')});return _0x18e887[a101_0x236d('0x12')](a101_0x236d('0x4a'));}_0x12c06d['password']=_0x4eecba[a101_0x236d('0x23')][a101_0x236d('0xc')];_0x12c06d['passwordResetToken']=undefined;_0x12c06d[a101_0x236d('0x43')]=undefined;_0x12c06d[a101_0x236d('0x27')](_0x4554a5=>{if(_0x4554a5){return _0x505a99(_0x4554a5);}_0x4eecba[a101_0x236d('0x4c')](_0x12c06d,_0x4554a5=>{_0x699d55(_0x4554a5,_0x12c06d);});});});},function sendResetPasswordEmail(_0x4afcd6,_0x13eac7){const _0xf483bc=nodemailer_1[a101_0x236d('0x13')][a101_0x236d('0x4d')]({'service':a101_0x236d('0x4e'),'auth':{'user':process[a101_0x236d('0x4f')][a101_0x236d('0x50')],'pass':process[a101_0x236d('0x4f')][a101_0x236d('0x51')]}});const _0x400291={'to':_0x4afcd6[a101_0x236d('0xb')],'from':a101_0x236d('0x52'),'subject':a101_0x236d('0x53'),'text':a101_0x236d('0x54')+_0x4afcd6[a101_0x236d('0xb')]+a101_0x236d('0x55')};_0xf483bc[a101_0x236d('0x56')](_0x400291,_0x422190=>{_0x4eecba[a101_0x236d('0x10')](a101_0x236d('0x17'),{'msg':a101_0x236d('0x57')});_0x13eac7(_0x422190);});}],_0x2571bb=>{if(_0x2571bb){return _0x505a99(_0x2571bb);}_0x18e887['redirect']('/');});};exports[a101_0x236d('0x58')]=(_0x35d910,_0x498c1d)=>{if(_0x35d910[a101_0x236d('0x40')]()){return _0x498c1d[a101_0x236d('0x12')]('/');}_0x498c1d[a101_0x236d('0x8')](a101_0x236d('0x59'),{'title':'Forgot\x20Password'});};exports[a101_0x236d('0x5a')]=(_0x4c48e3,_0x9747eb,_0x564d66)=>{_0x4c48e3['assert'](a101_0x236d('0xb'),a101_0x236d('0x5b'))['isEmail']();_0x4c48e3[a101_0x236d('0xe')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x66df24=_0x4c48e3['validationErrors']();if(_0x66df24){_0x4c48e3['flash'](a101_0x236d('0x11'),_0x66df24);return _0x9747eb['redirect'](a101_0x236d('0x5c'));}async_1[a101_0x236d('0x13')]['waterfall']([function createRandomToken(_0x20ceb6){crypto_1[a101_0x236d('0x13')]['randomBytes'](0x10,(_0x1e8090,_0x23e579)=>{const _0x1811dc=_0x23e579[a101_0x236d('0x5d')](a101_0x236d('0x5e'));_0x20ceb6(_0x1e8090,_0x1811dc);});},function setRandomToken(_0x13f0ab,_0x2d10fd){User_1[a101_0x236d('0x13')][a101_0x236d('0x25')]({'email':_0x4c48e3[a101_0x236d('0x23')][a101_0x236d('0xb')]},(_0x8e6bd5,_0x2a8b53)=>{if(_0x8e6bd5){return _0x2d10fd(_0x8e6bd5);}if(!_0x2a8b53){_0x4c48e3[a101_0x236d('0x10')](a101_0x236d('0x11'),{'msg':a101_0x236d('0x5f')});return _0x9747eb[a101_0x236d('0x12')](a101_0x236d('0x5c'));}_0x2a8b53[a101_0x236d('0x60')]=_0x13f0ab;_0x2a8b53[a101_0x236d('0x43')]=Date[a101_0x236d('0x61')]()+0x36ee80;_0x2a8b53[a101_0x236d('0x27')](_0x8e6bd5=>{_0x2d10fd(_0x8e6bd5,_0x13f0ab,_0x2a8b53);});});},function sendForgotPasswordEmail(_0x1ee662,_0x31c735,_0x530fb0){const _0x421a12=nodemailer_1['default'][a101_0x236d('0x4d')]({'service':a101_0x236d('0x4e'),'auth':{'user':process[a101_0x236d('0x4f')][a101_0x236d('0x50')],'pass':process[a101_0x236d('0x4f')][a101_0x236d('0x51')]}});const _0xa40c21={'to':_0x31c735['email'],'from':a101_0x236d('0x62'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a101_0x236d('0x63')+_0x4c48e3['headers'][a101_0x236d('0x64')]+a101_0x236d('0x65')+_0x1ee662+a101_0x236d('0x66')};_0x421a12[a101_0x236d('0x56')](_0xa40c21,_0x2eaa9a=>{_0x4c48e3[a101_0x236d('0x10')](a101_0x236d('0x39'),{'msg':a101_0x236d('0x67')+_0x31c735[a101_0x236d('0xb')]+a101_0x236d('0x68')});_0x530fb0(_0x2eaa9a);});}],_0xbaef7c=>{if(_0xbaef7c){return _0x564d66(_0xbaef7c);}_0x9747eb[a101_0x236d('0x12')](a101_0x236d('0x5c'));});};