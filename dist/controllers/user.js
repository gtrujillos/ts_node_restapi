var a201_0x6a00=['normalizeEmail','validationErrors','flash','errors','default','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','logout','getSignup','user','render','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','/signup','findOne','save','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','name','location','website','code','Profile\x20information\x20has\x20been\x20updated.','equals','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','where','back','createTransport','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','toString','hex','passwordResetToken','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','__esModule','async','nodemailer','passport','../models/User','express-validator','getLogin','redirect','account/login','Login','postLogin','email','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize'];(function(_0x349c21,_0x888f51){var _0x237f86=function(_0x295fe4){while(--_0x295fe4){_0x349c21['push'](_0x349c21['shift']());}};_0x237f86(++_0x888f51);}(a201_0x6a00,0x19c));var a201_0xfe18=function(_0x1188c4,_0x590bd2){_0x1188c4=_0x1188c4-0x0;var _0x195cc1=a201_0x6a00[_0x1188c4];return _0x195cc1;};'use strict';var __importDefault=this&&this[a201_0xfe18('0x0')]||function(_0x46341e){return _0x46341e&&_0x46341e['__esModule']?_0x46341e:{'default':_0x46341e};};Object[a201_0xfe18('0x1')](exports,a201_0xfe18('0x2'),{'value':!![]});const async_1=__importDefault(require(a201_0xfe18('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a201_0xfe18('0x4')));const passport_1=__importDefault(require(a201_0xfe18('0x5')));const User_1=__importDefault(require(a201_0xfe18('0x6')));const request=require(a201_0xfe18('0x7'));exports[a201_0xfe18('0x8')]=(_0x2e046f,_0x2a7a4e)=>{if(_0x2e046f['user']){return _0x2a7a4e[a201_0xfe18('0x9')]('/');}_0x2a7a4e['render'](a201_0xfe18('0xa'),{'title':a201_0xfe18('0xb')});};exports[a201_0xfe18('0xc')]=(_0x423847,_0x177f10,_0xac14c6)=>{_0x423847['assert'](a201_0xfe18('0xd'),'Email\x20is\x20not\x20valid')[a201_0xfe18('0xe')]();_0x423847[a201_0xfe18('0xf')](a201_0xfe18('0x10'),a201_0xfe18('0x11'))[a201_0xfe18('0x12')]();_0x423847[a201_0xfe18('0x13')]('email')[a201_0xfe18('0x14')]({'gmail_remove_dots':![]});const _0x19269d=_0x423847[a201_0xfe18('0x15')]();if(_0x19269d){_0x423847[a201_0xfe18('0x16')](a201_0xfe18('0x17'),_0x19269d);return _0x177f10[a201_0xfe18('0x9')]('/login');}passport_1[a201_0xfe18('0x18')]['authenticate'](a201_0xfe18('0x19'),(_0x18685f,_0x471ab6,_0x240f1c)=>{if(_0x18685f){return _0xac14c6(_0x18685f);}if(!_0x471ab6){_0x423847['flash']('errors',_0x240f1c[a201_0xfe18('0x1a')]);return _0x177f10['redirect']('/login');}_0x423847[a201_0xfe18('0x1b')](_0x471ab6,_0x18685f=>{if(_0x18685f){return _0xac14c6(_0x18685f);}_0x423847[a201_0xfe18('0x16')](a201_0xfe18('0x1c'),{'msg':a201_0xfe18('0x1d')});_0x177f10[a201_0xfe18('0x9')](_0x423847['session']['returnTo']||'/');});})(_0x423847,_0x177f10,_0xac14c6);};exports['logout']=(_0x576a35,_0x59b12d)=>{_0x576a35[a201_0xfe18('0x1e')]();_0x59b12d[a201_0xfe18('0x9')]('/');};exports[a201_0xfe18('0x1f')]=(_0x267591,_0x3cd590)=>{if(_0x267591[a201_0xfe18('0x20')]){return _0x3cd590[a201_0xfe18('0x9')]('/');}_0x3cd590[a201_0xfe18('0x21')]('account/signup',{'title':'Create\x20Account'});};exports[a201_0xfe18('0x22')]=(_0x57a25d,_0x35b6d5,_0x50313a)=>{_0x57a25d[a201_0xfe18('0xf')](a201_0xfe18('0xd'),a201_0xfe18('0x23'))[a201_0xfe18('0xe')]();_0x57a25d[a201_0xfe18('0xf')]('password',a201_0xfe18('0x24'))[a201_0xfe18('0x25')]({'min':0x4});_0x57a25d[a201_0xfe18('0xf')](a201_0xfe18('0x26'),a201_0xfe18('0x27'))['equals'](_0x57a25d[a201_0xfe18('0x28')]['password']);_0x57a25d['sanitize'](a201_0xfe18('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4f93e9=_0x57a25d[a201_0xfe18('0x15')]();if(_0x4f93e9){_0x57a25d['flash']('errors',_0x4f93e9);return _0x35b6d5['redirect'](a201_0xfe18('0x29'));}const _0x4a823b=new User_1['default']({'email':_0x57a25d['body']['email'],'password':_0x57a25d['body'][a201_0xfe18('0x10')]});User_1['default'][a201_0xfe18('0x2a')]({'email':_0x57a25d[a201_0xfe18('0x28')]['email']},(_0x471b73,_0x20b92e)=>{if(_0x471b73){return _0x50313a(_0x471b73);}if(_0x20b92e){_0x57a25d[a201_0xfe18('0x16')](a201_0xfe18('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x35b6d5[a201_0xfe18('0x9')](a201_0xfe18('0x29'));}_0x4a823b[a201_0xfe18('0x2b')](_0x471b73=>{if(_0x471b73){return _0x50313a(_0x471b73);}_0x57a25d[a201_0xfe18('0x1b')](_0x4a823b,_0x471b73=>{if(_0x471b73){return _0x50313a(_0x471b73);}_0x35b6d5[a201_0xfe18('0x9')]('/');});});});};exports['getAccount']=(_0x4341ab,_0x231da7)=>{_0x231da7[a201_0xfe18('0x21')](a201_0xfe18('0x2c'),{'title':a201_0xfe18('0x2d')});};exports['postUpdateProfile']=(_0x1c44bb,_0x5e4de3,_0x305546)=>{_0x1c44bb[a201_0xfe18('0xf')](a201_0xfe18('0xd'),a201_0xfe18('0x2e'))[a201_0xfe18('0xe')]();_0x1c44bb[a201_0xfe18('0x13')](a201_0xfe18('0xd'))[a201_0xfe18('0x14')]({'gmail_remove_dots':![]});const _0x42965d=_0x1c44bb[a201_0xfe18('0x15')]();if(_0x42965d){_0x1c44bb[a201_0xfe18('0x16')](a201_0xfe18('0x17'),_0x42965d);return _0x5e4de3[a201_0xfe18('0x9')](a201_0xfe18('0x2f'));}User_1[a201_0xfe18('0x18')]['findById'](_0x1c44bb[a201_0xfe18('0x20')]['id'],(_0x5538a,_0x3c2607)=>{if(_0x5538a){return _0x305546(_0x5538a);}_0x3c2607[a201_0xfe18('0xd')]=_0x1c44bb[a201_0xfe18('0x28')][a201_0xfe18('0xd')]||'';_0x3c2607[a201_0xfe18('0x30')][a201_0xfe18('0x31')]=_0x1c44bb['body'][a201_0xfe18('0x31')]||'';_0x3c2607[a201_0xfe18('0x30')]['gender']=_0x1c44bb[a201_0xfe18('0x28')]['gender']||'';_0x3c2607[a201_0xfe18('0x30')][a201_0xfe18('0x32')]=_0x1c44bb[a201_0xfe18('0x28')]['location']||'';_0x3c2607[a201_0xfe18('0x30')][a201_0xfe18('0x33')]=_0x1c44bb[a201_0xfe18('0x28')][a201_0xfe18('0x33')]||'';_0x3c2607['save'](_0x5538a=>{if(_0x5538a){if(_0x5538a[a201_0xfe18('0x34')]===0x2af8){_0x1c44bb[a201_0xfe18('0x16')](a201_0xfe18('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x5e4de3[a201_0xfe18('0x9')]('/account');}return _0x305546(_0x5538a);}_0x1c44bb[a201_0xfe18('0x16')](a201_0xfe18('0x1c'),{'msg':a201_0xfe18('0x35')});_0x5e4de3[a201_0xfe18('0x9')](a201_0xfe18('0x2f'));});});};exports['postUpdatePassword']=(_0x50cb44,_0x527db5,_0x3ed52b)=>{_0x50cb44[a201_0xfe18('0xf')](a201_0xfe18('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a201_0xfe18('0x25')]({'min':0x4});_0x50cb44[a201_0xfe18('0xf')](a201_0xfe18('0x26'),a201_0xfe18('0x27'))[a201_0xfe18('0x36')](_0x50cb44['body'][a201_0xfe18('0x10')]);const _0x20bc9c=_0x50cb44[a201_0xfe18('0x15')]();if(_0x20bc9c){_0x50cb44[a201_0xfe18('0x16')]('errors',_0x20bc9c);return _0x527db5['redirect'](a201_0xfe18('0x2f'));}User_1[a201_0xfe18('0x18')][a201_0xfe18('0x37')](_0x50cb44[a201_0xfe18('0x20')]['id'],(_0x391e08,_0x543045)=>{if(_0x391e08){return _0x3ed52b(_0x391e08);}_0x543045[a201_0xfe18('0x10')]=_0x50cb44[a201_0xfe18('0x28')]['password'];_0x543045[a201_0xfe18('0x2b')](_0x391e08=>{if(_0x391e08){return _0x3ed52b(_0x391e08);}_0x50cb44[a201_0xfe18('0x16')](a201_0xfe18('0x1c'),{'msg':a201_0xfe18('0x38')});_0x527db5[a201_0xfe18('0x9')]('/account');});});};exports[a201_0xfe18('0x39')]=(_0x4911e2,_0x361572,_0x542dff)=>{User_1[a201_0xfe18('0x18')]['remove']({'_id':_0x4911e2['user']['id']},_0x14bdb7=>{if(_0x14bdb7){return _0x542dff(_0x14bdb7);}_0x4911e2['logout']();_0x4911e2[a201_0xfe18('0x16')](a201_0xfe18('0x3a'),{'msg':a201_0xfe18('0x3b')});_0x361572[a201_0xfe18('0x9')]('/');});};exports[a201_0xfe18('0x3c')]=(_0x1dae36,_0xc8a363,_0x35565f)=>{const _0x395711=_0x1dae36[a201_0xfe18('0x3d')][a201_0xfe18('0x3e')];User_1[a201_0xfe18('0x18')][a201_0xfe18('0x37')](_0x1dae36[a201_0xfe18('0x20')]['id'],(_0x300544,_0x5c42d4)=>{if(_0x300544){return _0x35565f(_0x300544);}_0x5c42d4[_0x395711]=undefined;_0x5c42d4[a201_0xfe18('0x3f')]=_0x5c42d4[a201_0xfe18('0x3f')]['filter'](_0x5cb131=>_0x5cb131[a201_0xfe18('0x40')]!==_0x395711);_0x5c42d4[a201_0xfe18('0x2b')](_0x300544=>{if(_0x300544){return _0x35565f(_0x300544);}_0x1dae36[a201_0xfe18('0x16')]('info',{'msg':_0x395711+a201_0xfe18('0x41')});_0xc8a363[a201_0xfe18('0x9')]('/account');});});};exports[a201_0xfe18('0x42')]=(_0x3bec63,_0x5f490e,_0x25626e)=>{if(_0x3bec63[a201_0xfe18('0x43')]()){return _0x5f490e[a201_0xfe18('0x9')]('/');}User_1[a201_0xfe18('0x18')][a201_0xfe18('0x2a')]({'passwordResetToken':_0x3bec63[a201_0xfe18('0x3d')][a201_0xfe18('0x44')]})['where'](a201_0xfe18('0x45'))['gt'](Date[a201_0xfe18('0x46')]())[a201_0xfe18('0x47')]((_0x4765de,_0xfec9aa)=>{if(_0x4765de){return _0x25626e(_0x4765de);}if(!_0xfec9aa){_0x3bec63['flash'](a201_0xfe18('0x17'),{'msg':a201_0xfe18('0x48')});return _0x5f490e[a201_0xfe18('0x9')](a201_0xfe18('0x49'));}_0x5f490e[a201_0xfe18('0x21')](a201_0xfe18('0x4a'),{'title':a201_0xfe18('0x4b')});});};exports[a201_0xfe18('0x4c')]=(_0x46b3f4,_0x236cb8,_0x4c5c0b)=>{_0x46b3f4[a201_0xfe18('0xf')](a201_0xfe18('0x10'),a201_0xfe18('0x4d'))[a201_0xfe18('0x25')]({'min':0x4});_0x46b3f4[a201_0xfe18('0xf')](a201_0xfe18('0x4e'),a201_0xfe18('0x4f'))[a201_0xfe18('0x36')](_0x46b3f4[a201_0xfe18('0x28')][a201_0xfe18('0x10')]);const _0x2f4bfb=_0x46b3f4[a201_0xfe18('0x15')]();if(_0x2f4bfb){_0x46b3f4['flash'](a201_0xfe18('0x17'),_0x2f4bfb);return _0x236cb8[a201_0xfe18('0x9')]('back');}async_1[a201_0xfe18('0x18')][a201_0xfe18('0x50')]([function resetPassword(_0x12eb7f){User_1[a201_0xfe18('0x18')][a201_0xfe18('0x2a')]({'passwordResetToken':_0x46b3f4['params'][a201_0xfe18('0x44')]})[a201_0xfe18('0x51')](a201_0xfe18('0x45'))['gt'](Date[a201_0xfe18('0x46')]())[a201_0xfe18('0x47')]((_0x24611f,_0x15cd84)=>{if(_0x24611f){return _0x4c5c0b(_0x24611f);}if(!_0x15cd84){_0x46b3f4[a201_0xfe18('0x16')]('errors',{'msg':a201_0xfe18('0x48')});return _0x236cb8[a201_0xfe18('0x9')](a201_0xfe18('0x52'));}_0x15cd84[a201_0xfe18('0x10')]=_0x46b3f4[a201_0xfe18('0x28')]['password'];_0x15cd84['passwordResetToken']=undefined;_0x15cd84[a201_0xfe18('0x45')]=undefined;_0x15cd84[a201_0xfe18('0x2b')](_0x24611f=>{if(_0x24611f){return _0x4c5c0b(_0x24611f);}_0x46b3f4[a201_0xfe18('0x1b')](_0x15cd84,_0x24611f=>{_0x12eb7f(_0x24611f,_0x15cd84);});});});},function sendResetPasswordEmail(_0x1e4b93,_0x26b0e4){const _0x34b038=nodemailer_1[a201_0xfe18('0x18')][a201_0xfe18('0x53')]({'service':'SendGrid','auth':{'user':process['env'][a201_0xfe18('0x54')],'pass':process[a201_0xfe18('0x55')][a201_0xfe18('0x56')]}});const _0x19f5bd={'to':_0x1e4b93[a201_0xfe18('0xd')],'from':a201_0xfe18('0x57'),'subject':a201_0xfe18('0x58'),'text':a201_0xfe18('0x59')+_0x1e4b93[a201_0xfe18('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x34b038[a201_0xfe18('0x5a')](_0x19f5bd,_0x27880a=>{_0x46b3f4[a201_0xfe18('0x16')](a201_0xfe18('0x1c'),{'msg':a201_0xfe18('0x5b')});_0x26b0e4(_0x27880a);});}],_0x395771=>{if(_0x395771){return _0x4c5c0b(_0x395771);}_0x236cb8[a201_0xfe18('0x9')]('/');});};exports[a201_0xfe18('0x5c')]=(_0xe816a3,_0x5e5c4e)=>{if(_0xe816a3[a201_0xfe18('0x43')]()){return _0x5e5c4e[a201_0xfe18('0x9')]('/');}_0x5e5c4e[a201_0xfe18('0x21')](a201_0xfe18('0x5d'),{'title':a201_0xfe18('0x5e')});};exports[a201_0xfe18('0x5f')]=(_0x1785c5,_0x786039,_0x19788e)=>{_0x1785c5[a201_0xfe18('0xf')]('email',a201_0xfe18('0x2e'))[a201_0xfe18('0xe')]();_0x1785c5[a201_0xfe18('0x13')](a201_0xfe18('0xd'))[a201_0xfe18('0x14')]({'gmail_remove_dots':![]});const _0x16f9da=_0x1785c5[a201_0xfe18('0x15')]();if(_0x16f9da){_0x1785c5[a201_0xfe18('0x16')](a201_0xfe18('0x17'),_0x16f9da);return _0x786039[a201_0xfe18('0x9')]('/forgot');}async_1[a201_0xfe18('0x18')][a201_0xfe18('0x50')]([function createRandomToken(_0x3bed19){crypto_1['default']['randomBytes'](0x10,(_0x15672e,_0x1f5650)=>{const _0x799a92=_0x1f5650[a201_0xfe18('0x60')](a201_0xfe18('0x61'));_0x3bed19(_0x15672e,_0x799a92);});},function setRandomToken(_0x5a18ab,_0x223b0e){User_1['default'][a201_0xfe18('0x2a')]({'email':_0x1785c5[a201_0xfe18('0x28')][a201_0xfe18('0xd')]},(_0x14ce63,_0x17cdf4)=>{if(_0x14ce63){return _0x223b0e(_0x14ce63);}if(!_0x17cdf4){_0x1785c5['flash'](a201_0xfe18('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x786039[a201_0xfe18('0x9')](a201_0xfe18('0x49'));}_0x17cdf4[a201_0xfe18('0x62')]=_0x5a18ab;_0x17cdf4['passwordResetExpires']=Date[a201_0xfe18('0x46')]()+0x36ee80;_0x17cdf4[a201_0xfe18('0x2b')](_0x14ce63=>{_0x223b0e(_0x14ce63,_0x5a18ab,_0x17cdf4);});});},function sendForgotPasswordEmail(_0x4ebdcd,_0x32721d,_0x5196ef){const _0x52e62e=nodemailer_1[a201_0xfe18('0x18')][a201_0xfe18('0x53')]({'service':a201_0xfe18('0x63'),'auth':{'user':process[a201_0xfe18('0x55')]['SENDGRID_USER'],'pass':process[a201_0xfe18('0x55')]['SENDGRID_PASSWORD']}});const _0x2cd6d4={'to':_0x32721d[a201_0xfe18('0xd')],'from':a201_0xfe18('0x64'),'subject':a201_0xfe18('0x65'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x1785c5[a201_0xfe18('0x66')][a201_0xfe18('0x67')]+a201_0xfe18('0x68')+_0x4ebdcd+a201_0xfe18('0x69')};_0x52e62e[a201_0xfe18('0x5a')](_0x2cd6d4,_0x45fc4a=>{_0x1785c5['flash'](a201_0xfe18('0x3a'),{'msg':a201_0xfe18('0x6a')+_0x32721d[a201_0xfe18('0xd')]+a201_0xfe18('0x6b')});_0x5196ef(_0x45fc4a);});}],_0x536ada=>{if(_0x536ada){return _0x19788e(_0x536ada);}_0x786039['redirect'](a201_0xfe18('0x49'));});};