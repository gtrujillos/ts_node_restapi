var a95_0x49c6=['back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','nodemailer','passport','../models/User','express-validator','user','redirect','render','account/login','postLogin','isEmail','assert','password','notEmpty','email','normalizeEmail','validationErrors','flash','errors','/login','default','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','getAccount','Account\x20Management','postUpdateProfile','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','now'];(function(_0x31183b,_0x2fd526){var _0x2e47d8=function(_0x2fe3d3){while(--_0x2fe3d3){_0x31183b['push'](_0x31183b['shift']());}};_0x2e47d8(++_0x2fd526);}(a95_0x49c6,0x82));var a95_0x517f=function(_0x3a1515,_0xc4cc07){_0x3a1515=_0x3a1515-0x0;var _0x1c57ab=a95_0x49c6[_0x3a1515];return _0x1c57ab;};'use strict';var __importDefault=this&&this[a95_0x517f('0x0')]||function(_0x14622a){return _0x14622a&&_0x14622a[a95_0x517f('0x1')]?_0x14622a:{'default':_0x14622a};};Object[a95_0x517f('0x2')](exports,a95_0x517f('0x1'),{'value':!![]});const async_1=__importDefault(require(a95_0x517f('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a95_0x517f('0x4')));const passport_1=__importDefault(require(a95_0x517f('0x5')));const User_1=__importDefault(require(a95_0x517f('0x6')));const request=require(a95_0x517f('0x7'));exports['getLogin']=(_0x317df4,_0x33b52b)=>{if(_0x317df4[a95_0x517f('0x8')]){return _0x33b52b[a95_0x517f('0x9')]('/');}_0x33b52b[a95_0x517f('0xa')](a95_0x517f('0xb'),{'title':'Login'});};exports[a95_0x517f('0xc')]=(_0x1040fd,_0x243dec,_0x423da6)=>{_0x1040fd['assert']('email','Email\x20is\x20not\x20valid')[a95_0x517f('0xd')]();_0x1040fd[a95_0x517f('0xe')](a95_0x517f('0xf'),'Password\x20cannot\x20be\x20blank')[a95_0x517f('0x10')]();_0x1040fd['sanitize'](a95_0x517f('0x11'))[a95_0x517f('0x12')]({'gmail_remove_dots':![]});const _0x268973=_0x1040fd[a95_0x517f('0x13')]();if(_0x268973){_0x1040fd[a95_0x517f('0x14')](a95_0x517f('0x15'),_0x268973);return _0x243dec['redirect'](a95_0x517f('0x16'));}passport_1[a95_0x517f('0x17')]['authenticate'](a95_0x517f('0x18'),(_0x497442,_0x16221b,_0xe91dd7)=>{if(_0x497442){return _0x423da6(_0x497442);}if(!_0x16221b){_0x1040fd[a95_0x517f('0x14')]('errors',_0xe91dd7[a95_0x517f('0x19')]);return _0x243dec[a95_0x517f('0x9')](a95_0x517f('0x16'));}_0x1040fd[a95_0x517f('0x1a')](_0x16221b,_0x497442=>{if(_0x497442){return _0x423da6(_0x497442);}_0x1040fd[a95_0x517f('0x14')](a95_0x517f('0x1b'),{'msg':a95_0x517f('0x1c')});_0x243dec[a95_0x517f('0x9')](_0x1040fd[a95_0x517f('0x1d')]['returnTo']||'/');});})(_0x1040fd,_0x243dec,_0x423da6);};exports[a95_0x517f('0x1e')]=(_0x407928,_0x3cec22)=>{_0x407928[a95_0x517f('0x1e')]();_0x3cec22[a95_0x517f('0x9')]('/');};exports[a95_0x517f('0x1f')]=(_0x581970,_0x21124e)=>{if(_0x581970[a95_0x517f('0x8')]){return _0x21124e[a95_0x517f('0x9')]('/');}_0x21124e[a95_0x517f('0xa')](a95_0x517f('0x20'),{'title':'Create\x20Account'});};exports[a95_0x517f('0x21')]=(_0x57a788,_0x2a8242,_0x315c73)=>{_0x57a788[a95_0x517f('0xe')](a95_0x517f('0x11'),a95_0x517f('0x22'))[a95_0x517f('0xd')]();_0x57a788['assert'](a95_0x517f('0xf'),a95_0x517f('0x23'))[a95_0x517f('0x24')]({'min':0x4});_0x57a788[a95_0x517f('0xe')](a95_0x517f('0x25'),a95_0x517f('0x26'))[a95_0x517f('0x27')](_0x57a788['body'][a95_0x517f('0xf')]);_0x57a788['sanitize']('email')[a95_0x517f('0x12')]({'gmail_remove_dots':![]});const _0x4c6a1f=_0x57a788[a95_0x517f('0x13')]();if(_0x4c6a1f){_0x57a788[a95_0x517f('0x14')](a95_0x517f('0x15'),_0x4c6a1f);return _0x2a8242[a95_0x517f('0x9')]('/signup');}const _0x21111b=new User_1[(a95_0x517f('0x17'))]({'email':_0x57a788['body'][a95_0x517f('0x11')],'password':_0x57a788[a95_0x517f('0x28')][a95_0x517f('0xf')]});User_1['default'][a95_0x517f('0x29')]({'email':_0x57a788[a95_0x517f('0x28')][a95_0x517f('0x11')]},(_0x29894b,_0x49f198)=>{if(_0x29894b){return _0x315c73(_0x29894b);}if(_0x49f198){_0x57a788['flash'](a95_0x517f('0x15'),{'msg':a95_0x517f('0x2a')});return _0x2a8242[a95_0x517f('0x9')](a95_0x517f('0x2b'));}_0x21111b[a95_0x517f('0x2c')](_0x29894b=>{if(_0x29894b){return _0x315c73(_0x29894b);}_0x57a788[a95_0x517f('0x1a')](_0x21111b,_0x29894b=>{if(_0x29894b){return _0x315c73(_0x29894b);}_0x2a8242[a95_0x517f('0x9')]('/');});});});};exports[a95_0x517f('0x2d')]=(_0x3e7fe3,_0x160925)=>{_0x160925['render']('account/profile',{'title':a95_0x517f('0x2e')});};exports[a95_0x517f('0x2f')]=(_0x5002c1,_0x2a67ed,_0x287e1e)=>{_0x5002c1['assert'](a95_0x517f('0x11'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x5002c1['sanitize']('email')[a95_0x517f('0x12')]({'gmail_remove_dots':![]});const _0x1aba13=_0x5002c1[a95_0x517f('0x13')]();if(_0x1aba13){_0x5002c1['flash'](a95_0x517f('0x15'),_0x1aba13);return _0x2a67ed[a95_0x517f('0x9')](a95_0x517f('0x30'));}User_1[a95_0x517f('0x17')][a95_0x517f('0x31')](_0x5002c1[a95_0x517f('0x8')]['id'],(_0x2a9a67,_0x25a6ac)=>{if(_0x2a9a67){return _0x287e1e(_0x2a9a67);}_0x25a6ac['email']=_0x5002c1[a95_0x517f('0x28')][a95_0x517f('0x11')]||'';_0x25a6ac[a95_0x517f('0x32')][a95_0x517f('0x33')]=_0x5002c1[a95_0x517f('0x28')]['name']||'';_0x25a6ac[a95_0x517f('0x32')][a95_0x517f('0x34')]=_0x5002c1[a95_0x517f('0x28')][a95_0x517f('0x34')]||'';_0x25a6ac['profile'][a95_0x517f('0x35')]=_0x5002c1[a95_0x517f('0x28')][a95_0x517f('0x35')]||'';_0x25a6ac['profile'][a95_0x517f('0x36')]=_0x5002c1[a95_0x517f('0x28')][a95_0x517f('0x36')]||'';_0x25a6ac[a95_0x517f('0x2c')](_0x2a9a67=>{if(_0x2a9a67){if(_0x2a9a67['code']===0x2af8){_0x5002c1[a95_0x517f('0x14')](a95_0x517f('0x15'),{'msg':a95_0x517f('0x37')});return _0x2a67ed[a95_0x517f('0x9')]('/account');}return _0x287e1e(_0x2a9a67);}_0x5002c1[a95_0x517f('0x14')](a95_0x517f('0x1b'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x2a67ed[a95_0x517f('0x9')](a95_0x517f('0x30'));});});};exports[a95_0x517f('0x38')]=(_0x28e655,_0x5972ec,_0x468677)=>{_0x28e655['assert'](a95_0x517f('0xf'),a95_0x517f('0x23'))[a95_0x517f('0x24')]({'min':0x4});_0x28e655[a95_0x517f('0xe')](a95_0x517f('0x25'),a95_0x517f('0x26'))[a95_0x517f('0x27')](_0x28e655[a95_0x517f('0x28')][a95_0x517f('0xf')]);const _0x3859f8=_0x28e655[a95_0x517f('0x13')]();if(_0x3859f8){_0x28e655[a95_0x517f('0x14')]('errors',_0x3859f8);return _0x5972ec[a95_0x517f('0x9')]('/account');}User_1[a95_0x517f('0x17')][a95_0x517f('0x31')](_0x28e655['user']['id'],(_0x19a3d3,_0x2fd9b3)=>{if(_0x19a3d3){return _0x468677(_0x19a3d3);}_0x2fd9b3[a95_0x517f('0xf')]=_0x28e655[a95_0x517f('0x28')][a95_0x517f('0xf')];_0x2fd9b3[a95_0x517f('0x2c')](_0x19a3d3=>{if(_0x19a3d3){return _0x468677(_0x19a3d3);}_0x28e655['flash']('success',{'msg':a95_0x517f('0x39')});_0x5972ec[a95_0x517f('0x9')](a95_0x517f('0x30'));});});};exports[a95_0x517f('0x3a')]=(_0x20de39,_0x49bd02,_0x50d07b)=>{User_1[a95_0x517f('0x17')]['remove']({'_id':_0x20de39[a95_0x517f('0x8')]['id']},_0x58728a=>{if(_0x58728a){return _0x50d07b(_0x58728a);}_0x20de39[a95_0x517f('0x1e')]();_0x20de39[a95_0x517f('0x14')](a95_0x517f('0x3b'),{'msg':a95_0x517f('0x3c')});_0x49bd02[a95_0x517f('0x9')]('/');});};exports[a95_0x517f('0x3d')]=(_0x1dce92,_0x4337c8,_0x55ac34)=>{const _0x32321b=_0x1dce92[a95_0x517f('0x3e')]['provider'];User_1['default'][a95_0x517f('0x31')](_0x1dce92[a95_0x517f('0x8')]['id'],(_0x3c38f3,_0x100604)=>{if(_0x3c38f3){return _0x55ac34(_0x3c38f3);}_0x100604[_0x32321b]=undefined;_0x100604[a95_0x517f('0x3f')]=_0x100604[a95_0x517f('0x3f')][a95_0x517f('0x40')](_0x13cf94=>_0x13cf94['kind']!==_0x32321b);_0x100604[a95_0x517f('0x2c')](_0x3c38f3=>{if(_0x3c38f3){return _0x55ac34(_0x3c38f3);}_0x1dce92[a95_0x517f('0x14')](a95_0x517f('0x3b'),{'msg':_0x32321b+a95_0x517f('0x41')});_0x4337c8[a95_0x517f('0x9')](a95_0x517f('0x30'));});});};exports['getReset']=(_0x31159e,_0x40ae12,_0x498bbc)=>{if(_0x31159e[a95_0x517f('0x42')]()){return _0x40ae12['redirect']('/');}User_1[a95_0x517f('0x17')][a95_0x517f('0x29')]({'passwordResetToken':_0x31159e[a95_0x517f('0x3e')][a95_0x517f('0x43')]})[a95_0x517f('0x44')](a95_0x517f('0x45'))['gt'](Date['now']())[a95_0x517f('0x46')]((_0x3b8a33,_0x1130d2)=>{if(_0x3b8a33){return _0x498bbc(_0x3b8a33);}if(!_0x1130d2){_0x31159e[a95_0x517f('0x14')](a95_0x517f('0x15'),{'msg':a95_0x517f('0x47')});return _0x40ae12[a95_0x517f('0x9')](a95_0x517f('0x48'));}_0x40ae12['render'](a95_0x517f('0x49'),{'title':a95_0x517f('0x4a')});});};exports['postReset']=(_0x574589,_0x524420,_0x1635ff)=>{_0x574589[a95_0x517f('0xe')](a95_0x517f('0xf'),a95_0x517f('0x4b'))[a95_0x517f('0x24')]({'min':0x4});_0x574589[a95_0x517f('0xe')](a95_0x517f('0x4c'),a95_0x517f('0x4d'))[a95_0x517f('0x27')](_0x574589[a95_0x517f('0x28')][a95_0x517f('0xf')]);const _0x107c24=_0x574589[a95_0x517f('0x13')]();if(_0x107c24){_0x574589[a95_0x517f('0x14')](a95_0x517f('0x15'),_0x107c24);return _0x524420[a95_0x517f('0x9')]('back');}async_1[a95_0x517f('0x17')][a95_0x517f('0x4e')]([function resetPassword(_0x57b3d3){User_1['default'][a95_0x517f('0x29')]({'passwordResetToken':_0x574589[a95_0x517f('0x3e')]['token']})['where'](a95_0x517f('0x45'))['gt'](Date[a95_0x517f('0x4f')]())['exec']((_0x4e531d,_0x5d51ca)=>{if(_0x4e531d){return _0x1635ff(_0x4e531d);}if(!_0x5d51ca){_0x574589[a95_0x517f('0x14')](a95_0x517f('0x15'),{'msg':a95_0x517f('0x47')});return _0x524420['redirect'](a95_0x517f('0x50'));}_0x5d51ca[a95_0x517f('0xf')]=_0x574589[a95_0x517f('0x28')][a95_0x517f('0xf')];_0x5d51ca[a95_0x517f('0x51')]=undefined;_0x5d51ca['passwordResetExpires']=undefined;_0x5d51ca[a95_0x517f('0x2c')](_0x4e531d=>{if(_0x4e531d){return _0x1635ff(_0x4e531d);}_0x574589['logIn'](_0x5d51ca,_0x4e531d=>{_0x57b3d3(_0x4e531d,_0x5d51ca);});});});},function sendResetPasswordEmail(_0x5453b4,_0x598d4a){const _0x1cf4fd=nodemailer_1[a95_0x517f('0x17')][a95_0x517f('0x52')]({'service':a95_0x517f('0x53'),'auth':{'user':process[a95_0x517f('0x54')][a95_0x517f('0x55')],'pass':process[a95_0x517f('0x54')]['SENDGRID_PASSWORD']}});const _0x5bc013={'to':_0x5453b4[a95_0x517f('0x11')],'from':a95_0x517f('0x56'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a95_0x517f('0x57')+_0x5453b4[a95_0x517f('0x11')]+a95_0x517f('0x58')};_0x1cf4fd[a95_0x517f('0x59')](_0x5bc013,_0x3dc903=>{_0x574589[a95_0x517f('0x14')](a95_0x517f('0x1b'),{'msg':a95_0x517f('0x5a')});_0x598d4a(_0x3dc903);});}],_0xa14fca=>{if(_0xa14fca){return _0x1635ff(_0xa14fca);}_0x524420['redirect']('/');});};exports[a95_0x517f('0x5b')]=(_0x30dc80,_0x1e423c)=>{if(_0x30dc80[a95_0x517f('0x42')]()){return _0x1e423c[a95_0x517f('0x9')]('/');}_0x1e423c[a95_0x517f('0xa')](a95_0x517f('0x5c'),{'title':a95_0x517f('0x5d')});};exports['postForgot']=(_0x5edb8a,_0x44a6ce,_0x17fd2a)=>{_0x5edb8a['assert'](a95_0x517f('0x11'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x517f('0xd')]();_0x5edb8a['sanitize'](a95_0x517f('0x11'))[a95_0x517f('0x12')]({'gmail_remove_dots':![]});const _0x3eea86=_0x5edb8a['validationErrors']();if(_0x3eea86){_0x5edb8a[a95_0x517f('0x14')]('errors',_0x3eea86);return _0x44a6ce[a95_0x517f('0x9')](a95_0x517f('0x48'));}async_1[a95_0x517f('0x17')][a95_0x517f('0x4e')]([function createRandomToken(_0x41b82a){crypto_1[a95_0x517f('0x17')][a95_0x517f('0x5e')](0x10,(_0x4cc462,_0x3db04f)=>{const _0x32cf1e=_0x3db04f[a95_0x517f('0x5f')](a95_0x517f('0x60'));_0x41b82a(_0x4cc462,_0x32cf1e);});},function setRandomToken(_0x5ff147,_0x5a9d02){User_1['default']['findOne']({'email':_0x5edb8a['body'][a95_0x517f('0x11')]},(_0xc338f0,_0x5b6867)=>{if(_0xc338f0){return _0x5a9d02(_0xc338f0);}if(!_0x5b6867){_0x5edb8a[a95_0x517f('0x14')](a95_0x517f('0x15'),{'msg':a95_0x517f('0x61')});return _0x44a6ce['redirect'](a95_0x517f('0x48'));}_0x5b6867['passwordResetToken']=_0x5ff147;_0x5b6867[a95_0x517f('0x45')]=Date[a95_0x517f('0x4f')]()+0x36ee80;_0x5b6867[a95_0x517f('0x2c')](_0xc338f0=>{_0x5a9d02(_0xc338f0,_0x5ff147,_0x5b6867);});});},function sendForgotPasswordEmail(_0x27f268,_0x263b6c,_0x1df33a){const _0x15ac3c=nodemailer_1[a95_0x517f('0x17')][a95_0x517f('0x52')]({'service':a95_0x517f('0x53'),'auth':{'user':process[a95_0x517f('0x54')][a95_0x517f('0x55')],'pass':process[a95_0x517f('0x54')]['SENDGRID_PASSWORD']}});const _0x4920ca={'to':_0x263b6c[a95_0x517f('0x11')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x517f('0x62')+_0x5edb8a[a95_0x517f('0x63')][a95_0x517f('0x64')]+a95_0x517f('0x65')+_0x27f268+a95_0x517f('0x66')};_0x15ac3c['sendMail'](_0x4920ca,_0x55d1ec=>{_0x5edb8a[a95_0x517f('0x14')](a95_0x517f('0x3b'),{'msg':a95_0x517f('0x67')+_0x263b6c[a95_0x517f('0x11')]+a95_0x517f('0x68')});_0x1df33a(_0x55d1ec);});}],_0x2a9a10=>{if(_0x2a9a10){return _0x17fd2a(_0x2a9a10);}_0x44a6ce[a95_0x517f('0x9')](a95_0x517f('0x48'));});};