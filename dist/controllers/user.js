var a183_0x5d0b=['validationErrors','flash','/login','default','local','errors','logIn','success','session','returnTo','logout','getSignup','account/signup','Create\x20Account','Email\x20is\x20not\x20valid','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','findById','profile','name','gender','location','website','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','info','findOne','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','now','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','Forgot\x20Password','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','defineProperty','__esModule','crypto','passport','../models/User','express-validator','user','redirect','render','account/login','assert','email','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize'];(function(_0x1bf9f6,_0x25d0dc){var _0x58f008=function(_0x2f5955){while(--_0x2f5955){_0x1bf9f6['push'](_0x1bf9f6['shift']());}};_0x58f008(++_0x25d0dc);}(a183_0x5d0b,0x130));var a183_0x497a=function(_0x11e5a9,_0x355ec4){_0x11e5a9=_0x11e5a9-0x0;var _0x41b57a=a183_0x5d0b[_0x11e5a9];return _0x41b57a;};'use strict';var __importDefault=this&&this[a183_0x497a('0x0')]||function(_0x521772){return _0x521772&&_0x521772['__esModule']?_0x521772:{'default':_0x521772};};Object[a183_0x497a('0x1')](exports,a183_0x497a('0x2'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a183_0x497a('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a183_0x497a('0x4')));const User_1=__importDefault(require(a183_0x497a('0x5')));const request=require(a183_0x497a('0x6'));exports['getLogin']=(_0x3f6117,_0x3e340c)=>{if(_0x3f6117[a183_0x497a('0x7')]){return _0x3e340c[a183_0x497a('0x8')]('/');}_0x3e340c[a183_0x497a('0x9')](a183_0x497a('0xa'),{'title':'Login'});};exports['postLogin']=(_0x580e52,_0x2759e2,_0xe5e043)=>{_0x580e52[a183_0x497a('0xb')](a183_0x497a('0xc'),'Email\x20is\x20not\x20valid')['isEmail']();_0x580e52[a183_0x497a('0xb')](a183_0x497a('0xd'),a183_0x497a('0xe'))[a183_0x497a('0xf')]();_0x580e52[a183_0x497a('0x10')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x4d3cc7=_0x580e52[a183_0x497a('0x11')]();if(_0x4d3cc7){_0x580e52[a183_0x497a('0x12')]('errors',_0x4d3cc7);return _0x2759e2[a183_0x497a('0x8')](a183_0x497a('0x13'));}passport_1[a183_0x497a('0x14')]['authenticate'](a183_0x497a('0x15'),(_0x5e7fef,_0x2607fe,_0x5db178)=>{if(_0x5e7fef){return _0xe5e043(_0x5e7fef);}if(!_0x2607fe){_0x580e52[a183_0x497a('0x12')](a183_0x497a('0x16'),_0x5db178['message']);return _0x2759e2[a183_0x497a('0x8')](a183_0x497a('0x13'));}_0x580e52[a183_0x497a('0x17')](_0x2607fe,_0x5e7fef=>{if(_0x5e7fef){return _0xe5e043(_0x5e7fef);}_0x580e52[a183_0x497a('0x12')](a183_0x497a('0x18'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x2759e2[a183_0x497a('0x8')](_0x580e52[a183_0x497a('0x19')][a183_0x497a('0x1a')]||'/');});})(_0x580e52,_0x2759e2,_0xe5e043);};exports[a183_0x497a('0x1b')]=(_0x475ff3,_0x2cdce4)=>{_0x475ff3['logout']();_0x2cdce4['redirect']('/');};exports[a183_0x497a('0x1c')]=(_0x465f5f,_0x3ed8f1)=>{if(_0x465f5f[a183_0x497a('0x7')]){return _0x3ed8f1['redirect']('/');}_0x3ed8f1[a183_0x497a('0x9')](a183_0x497a('0x1d'),{'title':a183_0x497a('0x1e')});};exports['postSignup']=(_0x271b40,_0x4e0b7c,_0x53a7a2)=>{_0x271b40[a183_0x497a('0xb')]('email',a183_0x497a('0x1f'))[a183_0x497a('0x20')]();_0x271b40['assert'](a183_0x497a('0xd'),a183_0x497a('0x21'))[a183_0x497a('0x22')]({'min':0x4});_0x271b40[a183_0x497a('0xb')](a183_0x497a('0x23'),a183_0x497a('0x24'))[a183_0x497a('0x25')](_0x271b40[a183_0x497a('0x26')][a183_0x497a('0xd')]);_0x271b40[a183_0x497a('0x10')](a183_0x497a('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x58f202=_0x271b40[a183_0x497a('0x11')]();if(_0x58f202){_0x271b40['flash'](a183_0x497a('0x16'),_0x58f202);return _0x4e0b7c[a183_0x497a('0x8')](a183_0x497a('0x27'));}const _0x3984dc=new User_1['default']({'email':_0x271b40[a183_0x497a('0x26')][a183_0x497a('0xc')],'password':_0x271b40[a183_0x497a('0x26')][a183_0x497a('0xd')]});User_1[a183_0x497a('0x14')]['findOne']({'email':_0x271b40[a183_0x497a('0x26')][a183_0x497a('0xc')]},(_0x2b76ca,_0x2a6848)=>{if(_0x2b76ca){return _0x53a7a2(_0x2b76ca);}if(_0x2a6848){_0x271b40[a183_0x497a('0x12')](a183_0x497a('0x16'),{'msg':a183_0x497a('0x28')});return _0x4e0b7c[a183_0x497a('0x8')](a183_0x497a('0x27'));}_0x3984dc[a183_0x497a('0x29')](_0x2b76ca=>{if(_0x2b76ca){return _0x53a7a2(_0x2b76ca);}_0x271b40[a183_0x497a('0x17')](_0x3984dc,_0x2b76ca=>{if(_0x2b76ca){return _0x53a7a2(_0x2b76ca);}_0x4e0b7c[a183_0x497a('0x8')]('/');});});});};exports[a183_0x497a('0x2a')]=(_0x1a63c4,_0x2714d4)=>{_0x2714d4[a183_0x497a('0x9')]('account/profile',{'title':a183_0x497a('0x2b')});};exports[a183_0x497a('0x2c')]=(_0x41de6c,_0x3a306b,_0x34c7a7)=>{_0x41de6c['assert'](a183_0x497a('0xc'),a183_0x497a('0x2d'))[a183_0x497a('0x20')]();_0x41de6c[a183_0x497a('0x10')](a183_0x497a('0xc'))[a183_0x497a('0x2e')]({'gmail_remove_dots':![]});const _0x2e12b5=_0x41de6c[a183_0x497a('0x11')]();if(_0x2e12b5){_0x41de6c[a183_0x497a('0x12')](a183_0x497a('0x16'),_0x2e12b5);return _0x3a306b[a183_0x497a('0x8')]('/account');}User_1[a183_0x497a('0x14')][a183_0x497a('0x2f')](_0x41de6c[a183_0x497a('0x7')]['id'],(_0x2d858a,_0x514726)=>{if(_0x2d858a){return _0x34c7a7(_0x2d858a);}_0x514726['email']=_0x41de6c['body'][a183_0x497a('0xc')]||'';_0x514726[a183_0x497a('0x30')][a183_0x497a('0x31')]=_0x41de6c[a183_0x497a('0x26')][a183_0x497a('0x31')]||'';_0x514726['profile'][a183_0x497a('0x32')]=_0x41de6c[a183_0x497a('0x26')][a183_0x497a('0x32')]||'';_0x514726[a183_0x497a('0x30')][a183_0x497a('0x33')]=_0x41de6c[a183_0x497a('0x26')][a183_0x497a('0x33')]||'';_0x514726[a183_0x497a('0x30')][a183_0x497a('0x34')]=_0x41de6c[a183_0x497a('0x26')]['website']||'';_0x514726['save'](_0x2d858a=>{if(_0x2d858a){if(_0x2d858a['code']===0x2af8){_0x41de6c[a183_0x497a('0x12')](a183_0x497a('0x16'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x3a306b[a183_0x497a('0x8')](a183_0x497a('0x35'));}return _0x34c7a7(_0x2d858a);}_0x41de6c['flash'](a183_0x497a('0x18'),{'msg':a183_0x497a('0x36')});_0x3a306b[a183_0x497a('0x8')](a183_0x497a('0x35'));});});};exports[a183_0x497a('0x37')]=(_0x4b6f7e,_0x3dd6e0,_0x26f4cc)=>{_0x4b6f7e[a183_0x497a('0xb')](a183_0x497a('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a183_0x497a('0x22')]({'min':0x4});_0x4b6f7e['assert']('confirmPassword',a183_0x497a('0x24'))['equals'](_0x4b6f7e[a183_0x497a('0x26')][a183_0x497a('0xd')]);const _0x4d4a2b=_0x4b6f7e[a183_0x497a('0x11')]();if(_0x4d4a2b){_0x4b6f7e[a183_0x497a('0x12')](a183_0x497a('0x16'),_0x4d4a2b);return _0x3dd6e0[a183_0x497a('0x8')]('/account');}User_1[a183_0x497a('0x14')][a183_0x497a('0x2f')](_0x4b6f7e[a183_0x497a('0x7')]['id'],(_0x56416c,_0x1dd7ce)=>{if(_0x56416c){return _0x26f4cc(_0x56416c);}_0x1dd7ce['password']=_0x4b6f7e[a183_0x497a('0x26')][a183_0x497a('0xd')];_0x1dd7ce[a183_0x497a('0x29')](_0x56416c=>{if(_0x56416c){return _0x26f4cc(_0x56416c);}_0x4b6f7e[a183_0x497a('0x12')](a183_0x497a('0x18'),{'msg':a183_0x497a('0x38')});_0x3dd6e0[a183_0x497a('0x8')](a183_0x497a('0x35'));});});};exports[a183_0x497a('0x39')]=(_0x554566,_0x1716b6,_0x20bbfd)=>{User_1[a183_0x497a('0x14')][a183_0x497a('0x3a')]({'_id':_0x554566[a183_0x497a('0x7')]['id']},_0x4be9ed=>{if(_0x4be9ed){return _0x20bbfd(_0x4be9ed);}_0x554566[a183_0x497a('0x1b')]();_0x554566[a183_0x497a('0x12')]('info',{'msg':a183_0x497a('0x3b')});_0x1716b6[a183_0x497a('0x8')]('/');});};exports['getOauthUnlink']=(_0x3cac8e,_0x119b69,_0x4c04af)=>{const _0x5646d9=_0x3cac8e[a183_0x497a('0x3c')][a183_0x497a('0x3d')];User_1[a183_0x497a('0x14')][a183_0x497a('0x2f')](_0x3cac8e[a183_0x497a('0x7')]['id'],(_0x151f49,_0x3f76e4)=>{if(_0x151f49){return _0x4c04af(_0x151f49);}_0x3f76e4[_0x5646d9]=undefined;_0x3f76e4[a183_0x497a('0x3e')]=_0x3f76e4[a183_0x497a('0x3e')][a183_0x497a('0x3f')](_0x59b0b7=>_0x59b0b7[a183_0x497a('0x40')]!==_0x5646d9);_0x3f76e4['save'](_0x151f49=>{if(_0x151f49){return _0x4c04af(_0x151f49);}_0x3cac8e[a183_0x497a('0x12')](a183_0x497a('0x41'),{'msg':_0x5646d9+'\x20account\x20has\x20been\x20unlinked.'});_0x119b69[a183_0x497a('0x8')](a183_0x497a('0x35'));});});};exports['getReset']=(_0x547c5d,_0x2876a1,_0x29feae)=>{if(_0x547c5d['isAuthenticated']()){return _0x2876a1[a183_0x497a('0x8')]('/');}User_1['default'][a183_0x497a('0x42')]({'passwordResetToken':_0x547c5d[a183_0x497a('0x3c')][a183_0x497a('0x43')]})[a183_0x497a('0x44')](a183_0x497a('0x45'))['gt'](Date['now']())[a183_0x497a('0x46')]((_0x433056,_0x1a3a89)=>{if(_0x433056){return _0x29feae(_0x433056);}if(!_0x1a3a89){_0x547c5d[a183_0x497a('0x12')](a183_0x497a('0x16'),{'msg':a183_0x497a('0x47')});return _0x2876a1[a183_0x497a('0x8')](a183_0x497a('0x48'));}_0x2876a1[a183_0x497a('0x9')](a183_0x497a('0x49'),{'title':a183_0x497a('0x4a')});});};exports[a183_0x497a('0x4b')]=(_0x3cf4a1,_0x45e25b,_0x3edfd2)=>{_0x3cf4a1[a183_0x497a('0xb')]('password',a183_0x497a('0x4c'))['len']({'min':0x4});_0x3cf4a1['assert'](a183_0x497a('0x4d'),a183_0x497a('0x4e'))[a183_0x497a('0x25')](_0x3cf4a1['body']['password']);const _0x27e05b=_0x3cf4a1[a183_0x497a('0x11')]();if(_0x27e05b){_0x3cf4a1[a183_0x497a('0x12')]('errors',_0x27e05b);return _0x45e25b[a183_0x497a('0x8')](a183_0x497a('0x4f'));}async_1[a183_0x497a('0x14')][a183_0x497a('0x50')]([function resetPassword(_0x39e3a4){User_1['default']['findOne']({'passwordResetToken':_0x3cf4a1[a183_0x497a('0x3c')]['token']})[a183_0x497a('0x44')](a183_0x497a('0x45'))['gt'](Date[a183_0x497a('0x51')]())[a183_0x497a('0x46')]((_0x31de65,_0x24ce36)=>{if(_0x31de65){return _0x3edfd2(_0x31de65);}if(!_0x24ce36){_0x3cf4a1[a183_0x497a('0x12')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x45e25b[a183_0x497a('0x8')](a183_0x497a('0x4f'));}_0x24ce36[a183_0x497a('0xd')]=_0x3cf4a1[a183_0x497a('0x26')][a183_0x497a('0xd')];_0x24ce36[a183_0x497a('0x52')]=undefined;_0x24ce36['passwordResetExpires']=undefined;_0x24ce36['save'](_0x31de65=>{if(_0x31de65){return _0x3edfd2(_0x31de65);}_0x3cf4a1['logIn'](_0x24ce36,_0x31de65=>{_0x39e3a4(_0x31de65,_0x24ce36);});});});},function sendResetPasswordEmail(_0x3da265,_0x461ad2){const _0x343616=nodemailer_1['default'][a183_0x497a('0x53')]({'service':a183_0x497a('0x54'),'auth':{'user':process[a183_0x497a('0x55')][a183_0x497a('0x56')],'pass':process['env'][a183_0x497a('0x57')]}});const _0x249462={'to':_0x3da265[a183_0x497a('0xc')],'from':a183_0x497a('0x58'),'subject':a183_0x497a('0x59'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x3da265['email']+a183_0x497a('0x5a')};_0x343616['sendMail'](_0x249462,_0x3cc5a8=>{_0x3cf4a1[a183_0x497a('0x12')]('success',{'msg':a183_0x497a('0x5b')});_0x461ad2(_0x3cc5a8);});}],_0x47ea50=>{if(_0x47ea50){return _0x3edfd2(_0x47ea50);}_0x45e25b['redirect']('/');});};exports[a183_0x497a('0x5c')]=(_0x55cd76,_0x15e3d9)=>{if(_0x55cd76[a183_0x497a('0x5d')]()){return _0x15e3d9[a183_0x497a('0x8')]('/');}_0x15e3d9[a183_0x497a('0x9')](a183_0x497a('0x5e'),{'title':a183_0x497a('0x5f')});};exports[a183_0x497a('0x60')]=(_0x49487e,_0x1b7330,_0x63430e)=>{_0x49487e[a183_0x497a('0xb')](a183_0x497a('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x49487e[a183_0x497a('0x10')](a183_0x497a('0xc'))[a183_0x497a('0x2e')]({'gmail_remove_dots':![]});const _0x175bea=_0x49487e[a183_0x497a('0x11')]();if(_0x175bea){_0x49487e[a183_0x497a('0x12')]('errors',_0x175bea);return _0x1b7330['redirect']('/forgot');}async_1[a183_0x497a('0x14')][a183_0x497a('0x50')]([function createRandomToken(_0x1730fb){crypto_1[a183_0x497a('0x14')][a183_0x497a('0x61')](0x10,(_0x39d966,_0x38ca80)=>{const _0x2429c0=_0x38ca80['toString'](a183_0x497a('0x62'));_0x1730fb(_0x39d966,_0x2429c0);});},function setRandomToken(_0x1fee25,_0x11264d){User_1[a183_0x497a('0x14')]['findOne']({'email':_0x49487e[a183_0x497a('0x26')][a183_0x497a('0xc')]},(_0x3e4440,_0x2c96a5)=>{if(_0x3e4440){return _0x11264d(_0x3e4440);}if(!_0x2c96a5){_0x49487e['flash'](a183_0x497a('0x16'),{'msg':a183_0x497a('0x63')});return _0x1b7330['redirect'](a183_0x497a('0x48'));}_0x2c96a5[a183_0x497a('0x52')]=_0x1fee25;_0x2c96a5['passwordResetExpires']=Date[a183_0x497a('0x51')]()+0x36ee80;_0x2c96a5[a183_0x497a('0x29')](_0x3e4440=>{_0x11264d(_0x3e4440,_0x1fee25,_0x2c96a5);});});},function sendForgotPasswordEmail(_0x4ce376,_0x2f0461,_0x29cba0){const _0x40407b=nodemailer_1[a183_0x497a('0x14')]['createTransport']({'service':a183_0x497a('0x54'),'auth':{'user':process[a183_0x497a('0x55')][a183_0x497a('0x56')],'pass':process[a183_0x497a('0x55')][a183_0x497a('0x57')]}});const _0x42d2e9={'to':_0x2f0461[a183_0x497a('0xc')],'from':a183_0x497a('0x64'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a183_0x497a('0x65')+_0x49487e[a183_0x497a('0x66')][a183_0x497a('0x67')]+a183_0x497a('0x68')+_0x4ce376+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x40407b[a183_0x497a('0x69')](_0x42d2e9,_0x1f7a93=>{_0x49487e[a183_0x497a('0x12')](a183_0x497a('0x41'),{'msg':a183_0x497a('0x6a')+_0x2f0461[a183_0x497a('0xc')]+'\x20with\x20further\x20instructions.'});_0x29cba0(_0x1f7a93);});}],_0x3f3ab1=>{if(_0x3f3ab1){return _0x63430e(_0x3f3ab1);}_0x1b7330['redirect']('/forgot');});};