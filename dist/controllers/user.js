var a95_0x24e9=['SendGrid','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','/forgot','__importDefault','defineProperty','async','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','sanitize','email','flash','errors','/login','default','authenticate','local','message','logIn','success','session','returnTo','logout','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','equals','body','validationErrors','/signup','findOne','save','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','confirmPassword','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','now','exec','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','passwordResetExpires','back','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'];(function(_0x4d14cc,_0x1e968a){var _0x54443d=function(_0x12d471){while(--_0x12d471){_0x4d14cc['push'](_0x4d14cc['shift']());}};_0x54443d(++_0x1e968a);}(a95_0x24e9,0x152));var a95_0x1f83=function(_0x201b02,_0x17314c){_0x201b02=_0x201b02-0x0;var _0x3ef1cc=a95_0x24e9[_0x201b02];return _0x3ef1cc;};'use strict';var __importDefault=this&&this[a95_0x1f83('0x0')]||function(_0x51b251){return _0x51b251&&_0x51b251['__esModule']?_0x51b251:{'default':_0x51b251};};Object[a95_0x1f83('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a95_0x1f83('0x2')));const crypto_1=__importDefault(require(a95_0x1f83('0x3')));const nodemailer_1=__importDefault(require(a95_0x1f83('0x4')));const passport_1=__importDefault(require(a95_0x1f83('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a95_0x1f83('0x6'));exports[a95_0x1f83('0x7')]=(_0x4b4949,_0x50e0fb)=>{if(_0x4b4949[a95_0x1f83('0x8')]){return _0x50e0fb[a95_0x1f83('0x9')]('/');}_0x50e0fb[a95_0x1f83('0xa')]('account/login',{'title':a95_0x1f83('0xb')});};exports[a95_0x1f83('0xc')]=(_0x3be9d4,_0x32d3e8,_0xba14f8)=>{_0x3be9d4[a95_0x1f83('0xd')]('email',a95_0x1f83('0xe'))[a95_0x1f83('0xf')]();_0x3be9d4['assert'](a95_0x1f83('0x10'),'Password\x20cannot\x20be\x20blank')[a95_0x1f83('0x11')]();_0x3be9d4[a95_0x1f83('0x12')](a95_0x1f83('0x13'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xd2dd94=_0x3be9d4['validationErrors']();if(_0xd2dd94){_0x3be9d4[a95_0x1f83('0x14')](a95_0x1f83('0x15'),_0xd2dd94);return _0x32d3e8[a95_0x1f83('0x9')](a95_0x1f83('0x16'));}passport_1[a95_0x1f83('0x17')][a95_0x1f83('0x18')](a95_0x1f83('0x19'),(_0x30d2d5,_0x1c384b,_0x12b7de)=>{if(_0x30d2d5){return _0xba14f8(_0x30d2d5);}if(!_0x1c384b){_0x3be9d4[a95_0x1f83('0x14')]('errors',_0x12b7de[a95_0x1f83('0x1a')]);return _0x32d3e8[a95_0x1f83('0x9')](a95_0x1f83('0x16'));}_0x3be9d4[a95_0x1f83('0x1b')](_0x1c384b,_0x30d2d5=>{if(_0x30d2d5){return _0xba14f8(_0x30d2d5);}_0x3be9d4['flash'](a95_0x1f83('0x1c'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x32d3e8['redirect'](_0x3be9d4[a95_0x1f83('0x1d')][a95_0x1f83('0x1e')]||'/');});})(_0x3be9d4,_0x32d3e8,_0xba14f8);};exports[a95_0x1f83('0x1f')]=(_0x35d9b7,_0x204311)=>{_0x35d9b7[a95_0x1f83('0x1f')]();_0x204311['redirect']('/');};exports['getSignup']=(_0x301199,_0x4917ec)=>{if(_0x301199['user']){return _0x4917ec[a95_0x1f83('0x9')]('/');}_0x4917ec['render'](a95_0x1f83('0x20'),{'title':a95_0x1f83('0x21')});};exports[a95_0x1f83('0x22')]=(_0x4f05c2,_0x5b2447,_0x5666cc)=>{_0x4f05c2[a95_0x1f83('0xd')]('email',a95_0x1f83('0xe'))['isEmail']();_0x4f05c2['assert']('password',a95_0x1f83('0x23'))[a95_0x1f83('0x24')]({'min':0x4});_0x4f05c2[a95_0x1f83('0xd')]('confirmPassword','Passwords\x20do\x20not\x20match')[a95_0x1f83('0x25')](_0x4f05c2[a95_0x1f83('0x26')][a95_0x1f83('0x10')]);_0x4f05c2[a95_0x1f83('0x12')](a95_0x1f83('0x13'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x435cae=_0x4f05c2[a95_0x1f83('0x27')]();if(_0x435cae){_0x4f05c2[a95_0x1f83('0x14')](a95_0x1f83('0x15'),_0x435cae);return _0x5b2447['redirect'](a95_0x1f83('0x28'));}const _0x398084=new User_1[(a95_0x1f83('0x17'))]({'email':_0x4f05c2[a95_0x1f83('0x26')][a95_0x1f83('0x13')],'password':_0x4f05c2[a95_0x1f83('0x26')]['password']});User_1[a95_0x1f83('0x17')][a95_0x1f83('0x29')]({'email':_0x4f05c2[a95_0x1f83('0x26')]['email']},(_0x57fe23,_0x488a23)=>{if(_0x57fe23){return _0x5666cc(_0x57fe23);}if(_0x488a23){_0x4f05c2['flash'](a95_0x1f83('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x5b2447[a95_0x1f83('0x9')](a95_0x1f83('0x28'));}_0x398084[a95_0x1f83('0x2a')](_0x57fe23=>{if(_0x57fe23){return _0x5666cc(_0x57fe23);}_0x4f05c2[a95_0x1f83('0x1b')](_0x398084,_0x57fe23=>{if(_0x57fe23){return _0x5666cc(_0x57fe23);}_0x5b2447[a95_0x1f83('0x9')]('/');});});});};exports[a95_0x1f83('0x2b')]=(_0x28837d,_0x17c882)=>{_0x17c882['render'](a95_0x1f83('0x2c'),{'title':a95_0x1f83('0x2d')});};exports['postUpdateProfile']=(_0x55d782,_0x3c338c,_0x44e222)=>{_0x55d782['assert'](a95_0x1f83('0x13'),a95_0x1f83('0x2e'))[a95_0x1f83('0xf')]();_0x55d782[a95_0x1f83('0x12')](a95_0x1f83('0x13'))[a95_0x1f83('0x2f')]({'gmail_remove_dots':![]});const _0x23bc2f=_0x55d782[a95_0x1f83('0x27')]();if(_0x23bc2f){_0x55d782[a95_0x1f83('0x14')](a95_0x1f83('0x15'),_0x23bc2f);return _0x3c338c[a95_0x1f83('0x9')](a95_0x1f83('0x30'));}User_1[a95_0x1f83('0x17')][a95_0x1f83('0x31')](_0x55d782['user']['id'],(_0x8b9b3,_0x20269d)=>{if(_0x8b9b3){return _0x44e222(_0x8b9b3);}_0x20269d[a95_0x1f83('0x13')]=_0x55d782[a95_0x1f83('0x26')][a95_0x1f83('0x13')]||'';_0x20269d[a95_0x1f83('0x32')]['name']=_0x55d782['body'][a95_0x1f83('0x33')]||'';_0x20269d['profile']['gender']=_0x55d782[a95_0x1f83('0x26')][a95_0x1f83('0x34')]||'';_0x20269d[a95_0x1f83('0x32')][a95_0x1f83('0x35')]=_0x55d782[a95_0x1f83('0x26')][a95_0x1f83('0x35')]||'';_0x20269d['profile'][a95_0x1f83('0x36')]=_0x55d782[a95_0x1f83('0x26')][a95_0x1f83('0x36')]||'';_0x20269d['save'](_0x8b9b3=>{if(_0x8b9b3){if(_0x8b9b3['code']===0x2af8){_0x55d782[a95_0x1f83('0x14')](a95_0x1f83('0x15'),{'msg':a95_0x1f83('0x37')});return _0x3c338c[a95_0x1f83('0x9')](a95_0x1f83('0x30'));}return _0x44e222(_0x8b9b3);}_0x55d782[a95_0x1f83('0x14')](a95_0x1f83('0x1c'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x3c338c['redirect']('/account');});});};exports[a95_0x1f83('0x38')]=(_0x567c01,_0x26c8bb,_0x3b5da6)=>{_0x567c01[a95_0x1f83('0xd')](a95_0x1f83('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a95_0x1f83('0x24')]({'min':0x4});_0x567c01[a95_0x1f83('0xd')](a95_0x1f83('0x39'),a95_0x1f83('0x3a'))['equals'](_0x567c01[a95_0x1f83('0x26')]['password']);const _0x58ad02=_0x567c01[a95_0x1f83('0x27')]();if(_0x58ad02){_0x567c01[a95_0x1f83('0x14')](a95_0x1f83('0x15'),_0x58ad02);return _0x26c8bb[a95_0x1f83('0x9')](a95_0x1f83('0x30'));}User_1[a95_0x1f83('0x17')][a95_0x1f83('0x31')](_0x567c01['user']['id'],(_0x1f9f55,_0x486048)=>{if(_0x1f9f55){return _0x3b5da6(_0x1f9f55);}_0x486048['password']=_0x567c01[a95_0x1f83('0x26')]['password'];_0x486048[a95_0x1f83('0x2a')](_0x1f9f55=>{if(_0x1f9f55){return _0x3b5da6(_0x1f9f55);}_0x567c01[a95_0x1f83('0x14')](a95_0x1f83('0x1c'),{'msg':a95_0x1f83('0x3b')});_0x26c8bb[a95_0x1f83('0x9')](a95_0x1f83('0x30'));});});};exports[a95_0x1f83('0x3c')]=(_0x367e9d,_0x202dad,_0x168137)=>{User_1['default'][a95_0x1f83('0x3d')]({'_id':_0x367e9d[a95_0x1f83('0x8')]['id']},_0x49b3d4=>{if(_0x49b3d4){return _0x168137(_0x49b3d4);}_0x367e9d['logout']();_0x367e9d['flash'](a95_0x1f83('0x3e'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x202dad[a95_0x1f83('0x9')]('/');});};exports[a95_0x1f83('0x3f')]=(_0x5dc8af,_0x1743cc,_0x48ccfb)=>{const _0x4e985e=_0x5dc8af[a95_0x1f83('0x40')][a95_0x1f83('0x41')];User_1['default']['findById'](_0x5dc8af[a95_0x1f83('0x8')]['id'],(_0xb045c5,_0x341721)=>{if(_0xb045c5){return _0x48ccfb(_0xb045c5);}_0x341721[_0x4e985e]=undefined;_0x341721[a95_0x1f83('0x42')]=_0x341721[a95_0x1f83('0x42')][a95_0x1f83('0x43')](_0x45054e=>_0x45054e[a95_0x1f83('0x44')]!==_0x4e985e);_0x341721[a95_0x1f83('0x2a')](_0xb045c5=>{if(_0xb045c5){return _0x48ccfb(_0xb045c5);}_0x5dc8af[a95_0x1f83('0x14')](a95_0x1f83('0x3e'),{'msg':_0x4e985e+a95_0x1f83('0x45')});_0x1743cc[a95_0x1f83('0x9')](a95_0x1f83('0x30'));});});};exports[a95_0x1f83('0x46')]=(_0x18a3d8,_0x1f0107,_0x185922)=>{if(_0x18a3d8[a95_0x1f83('0x47')]()){return _0x1f0107[a95_0x1f83('0x9')]('/');}User_1[a95_0x1f83('0x17')][a95_0x1f83('0x29')]({'passwordResetToken':_0x18a3d8['params'][a95_0x1f83('0x48')]})[a95_0x1f83('0x49')]('passwordResetExpires')['gt'](Date[a95_0x1f83('0x4a')]())[a95_0x1f83('0x4b')]((_0x1b5b44,_0x3d6d08)=>{if(_0x1b5b44){return _0x185922(_0x1b5b44);}if(!_0x3d6d08){_0x18a3d8[a95_0x1f83('0x14')](a95_0x1f83('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x1f0107[a95_0x1f83('0x9')]('/forgot');}_0x1f0107[a95_0x1f83('0xa')]('account/reset',{'title':'Password\x20Reset'});});};exports[a95_0x1f83('0x4c')]=(_0x4f9492,_0x4e40db,_0x20bdd0)=>{_0x4f9492[a95_0x1f83('0xd')](a95_0x1f83('0x10'),a95_0x1f83('0x4d'))[a95_0x1f83('0x24')]({'min':0x4});_0x4f9492[a95_0x1f83('0xd')](a95_0x1f83('0x4e'),a95_0x1f83('0x4f'))[a95_0x1f83('0x25')](_0x4f9492[a95_0x1f83('0x26')][a95_0x1f83('0x10')]);const _0x3c79ca=_0x4f9492[a95_0x1f83('0x27')]();if(_0x3c79ca){_0x4f9492[a95_0x1f83('0x14')](a95_0x1f83('0x15'),_0x3c79ca);return _0x4e40db[a95_0x1f83('0x9')]('back');}async_1['default'][a95_0x1f83('0x50')]([function resetPassword(_0x344239){User_1[a95_0x1f83('0x17')][a95_0x1f83('0x29')]({'passwordResetToken':_0x4f9492[a95_0x1f83('0x40')][a95_0x1f83('0x48')]})[a95_0x1f83('0x49')](a95_0x1f83('0x51'))['gt'](Date[a95_0x1f83('0x4a')]())[a95_0x1f83('0x4b')]((_0x201090,_0x34f0a7)=>{if(_0x201090){return _0x20bdd0(_0x201090);}if(!_0x34f0a7){_0x4f9492[a95_0x1f83('0x14')](a95_0x1f83('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4e40db[a95_0x1f83('0x9')](a95_0x1f83('0x52'));}_0x34f0a7[a95_0x1f83('0x10')]=_0x4f9492['body'][a95_0x1f83('0x10')];_0x34f0a7[a95_0x1f83('0x53')]=undefined;_0x34f0a7[a95_0x1f83('0x51')]=undefined;_0x34f0a7['save'](_0x201090=>{if(_0x201090){return _0x20bdd0(_0x201090);}_0x4f9492[a95_0x1f83('0x1b')](_0x34f0a7,_0x201090=>{_0x344239(_0x201090,_0x34f0a7);});});});},function sendResetPasswordEmail(_0x11067e,_0x4de27d){const _0x3e2e92=nodemailer_1[a95_0x1f83('0x17')][a95_0x1f83('0x54')]({'service':'SendGrid','auth':{'user':process[a95_0x1f83('0x55')][a95_0x1f83('0x56')],'pass':process['env'][a95_0x1f83('0x57')]}});const _0x2ac2a3={'to':_0x11067e[a95_0x1f83('0x13')],'from':a95_0x1f83('0x58'),'subject':a95_0x1f83('0x59'),'text':a95_0x1f83('0x5a')+_0x11067e[a95_0x1f83('0x13')]+a95_0x1f83('0x5b')};_0x3e2e92['sendMail'](_0x2ac2a3,_0x2ee9f4=>{_0x4f9492['flash'](a95_0x1f83('0x1c'),{'msg':a95_0x1f83('0x5c')});_0x4de27d(_0x2ee9f4);});}],_0x3eba4c=>{if(_0x3eba4c){return _0x20bdd0(_0x3eba4c);}_0x4e40db[a95_0x1f83('0x9')]('/');});};exports[a95_0x1f83('0x5d')]=(_0x156aba,_0x21b326)=>{if(_0x156aba[a95_0x1f83('0x47')]()){return _0x21b326['redirect']('/');}_0x21b326[a95_0x1f83('0xa')](a95_0x1f83('0x5e'),{'title':a95_0x1f83('0x5f')});};exports['postForgot']=(_0x33277b,_0x2da63f,_0x3ced69)=>{_0x33277b[a95_0x1f83('0xd')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x1f83('0xf')]();_0x33277b[a95_0x1f83('0x12')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x34c361=_0x33277b[a95_0x1f83('0x27')]();if(_0x34c361){_0x33277b['flash']('errors',_0x34c361);return _0x2da63f[a95_0x1f83('0x9')]('/forgot');}async_1['default']['waterfall']([function createRandomToken(_0x31f264){crypto_1[a95_0x1f83('0x17')][a95_0x1f83('0x60')](0x10,(_0x3d128c,_0x4c703c)=>{const _0x5d274d=_0x4c703c['toString']('hex');_0x31f264(_0x3d128c,_0x5d274d);});},function setRandomToken(_0x38894e,_0x325026){User_1[a95_0x1f83('0x17')]['findOne']({'email':_0x33277b[a95_0x1f83('0x26')][a95_0x1f83('0x13')]},(_0x9053f3,_0x4ab0cc)=>{if(_0x9053f3){return _0x325026(_0x9053f3);}if(!_0x4ab0cc){_0x33277b['flash'](a95_0x1f83('0x15'),{'msg':a95_0x1f83('0x61')});return _0x2da63f[a95_0x1f83('0x9')]('/forgot');}_0x4ab0cc['passwordResetToken']=_0x38894e;_0x4ab0cc[a95_0x1f83('0x51')]=Date[a95_0x1f83('0x4a')]()+0x36ee80;_0x4ab0cc[a95_0x1f83('0x2a')](_0x9053f3=>{_0x325026(_0x9053f3,_0x38894e,_0x4ab0cc);});});},function sendForgotPasswordEmail(_0x535195,_0x31feb8,_0x1ab027){const _0x31a716=nodemailer_1[a95_0x1f83('0x17')][a95_0x1f83('0x54')]({'service':a95_0x1f83('0x62'),'auth':{'user':process['env'][a95_0x1f83('0x56')],'pass':process['env'][a95_0x1f83('0x57')]}});const _0x1ebc55={'to':_0x31feb8[a95_0x1f83('0x13')],'from':a95_0x1f83('0x63'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x1f83('0x64')+_0x33277b[a95_0x1f83('0x65')][a95_0x1f83('0x66')]+a95_0x1f83('0x67')+_0x535195+a95_0x1f83('0x68')};_0x31a716[a95_0x1f83('0x69')](_0x1ebc55,_0x377f84=>{_0x33277b['flash'](a95_0x1f83('0x3e'),{'msg':a95_0x1f83('0x6a')+_0x31feb8[a95_0x1f83('0x13')]+a95_0x1f83('0x6b')});_0x1ab027(_0x377f84);});}],_0x457c06=>{if(_0x457c06){return _0x3ced69(_0x457c06);}_0x2da63f[a95_0x1f83('0x9')](a95_0x1f83('0x6c'));});};