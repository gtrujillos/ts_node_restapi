var a95_0x20fb=['/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Passwords\x20do\x20not\x20match','success','postDeleteAccount','remove','info','getOauthUnlink','params','tokens','filter','kind','getReset','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','confirm','back','now','createTransport','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','postForgot','isEmail','waterfall','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','SendGrid','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','render','account/login','Login','email','Email\x20is\x20not\x20valid','assert','notEmpty','sanitize','validationErrors','flash','errors','redirect','default','local','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','equals','body','normalizeEmail','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','name','profile','gender','location','website','code'];(function(_0x249626,_0x16ebb5){var _0x3a24fc=function(_0x1e73b2){while(--_0x1e73b2){_0x249626['push'](_0x249626['shift']());}};_0x3a24fc(++_0x16ebb5);}(a95_0x20fb,0x10a));var a95_0x3c7a=function(_0x15f79c,_0x5205fe){_0x15f79c=_0x15f79c-0x0;var _0x672cdf=a95_0x20fb[_0x15f79c];return _0x672cdf;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x22eb15){return _0x22eb15&&_0x22eb15[a95_0x3c7a('0x0')]?_0x22eb15:{'default':_0x22eb15};};Object[a95_0x3c7a('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a95_0x3c7a('0x2')));const crypto_1=__importDefault(require(a95_0x3c7a('0x3')));const nodemailer_1=__importDefault(require(a95_0x3c7a('0x4')));const passport_1=__importDefault(require(a95_0x3c7a('0x5')));const User_1=__importDefault(require(a95_0x3c7a('0x6')));const request=require(a95_0x3c7a('0x7'));exports[a95_0x3c7a('0x8')]=(_0x1edaca,_0x31db16)=>{if(_0x1edaca[a95_0x3c7a('0x9')]){return _0x31db16['redirect']('/');}_0x31db16[a95_0x3c7a('0xa')](a95_0x3c7a('0xb'),{'title':a95_0x3c7a('0xc')});};exports['postLogin']=(_0x47216c,_0x290f72,_0x584750)=>{_0x47216c['assert'](a95_0x3c7a('0xd'),a95_0x3c7a('0xe'))['isEmail']();_0x47216c[a95_0x3c7a('0xf')]('password','Password\x20cannot\x20be\x20blank')[a95_0x3c7a('0x10')]();_0x47216c[a95_0x3c7a('0x11')](a95_0x3c7a('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x381f37=_0x47216c[a95_0x3c7a('0x12')]();if(_0x381f37){_0x47216c[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),_0x381f37);return _0x290f72[a95_0x3c7a('0x15')]('/login');}passport_1[a95_0x3c7a('0x16')]['authenticate'](a95_0x3c7a('0x17'),(_0x41143e,_0x526f5a,_0x1c9204)=>{if(_0x41143e){return _0x584750(_0x41143e);}if(!_0x526f5a){_0x47216c[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),_0x1c9204[a95_0x3c7a('0x18')]);return _0x290f72[a95_0x3c7a('0x15')]('/login');}_0x47216c[a95_0x3c7a('0x19')](_0x526f5a,_0x41143e=>{if(_0x41143e){return _0x584750(_0x41143e);}_0x47216c[a95_0x3c7a('0x13')]('success',{'msg':a95_0x3c7a('0x1a')});_0x290f72[a95_0x3c7a('0x15')](_0x47216c[a95_0x3c7a('0x1b')][a95_0x3c7a('0x1c')]||'/');});})(_0x47216c,_0x290f72,_0x584750);};exports[a95_0x3c7a('0x1d')]=(_0x2fb0c3,_0x5eb3b1)=>{_0x2fb0c3['logout']();_0x5eb3b1[a95_0x3c7a('0x15')]('/');};exports[a95_0x3c7a('0x1e')]=(_0xe5f0df,_0x98b5ac)=>{if(_0xe5f0df[a95_0x3c7a('0x9')]){return _0x98b5ac[a95_0x3c7a('0x15')]('/');}_0x98b5ac['render'](a95_0x3c7a('0x1f'),{'title':'Create\x20Account'});};exports[a95_0x3c7a('0x20')]=(_0x1420dc,_0x130f62,_0x2f44b3)=>{_0x1420dc[a95_0x3c7a('0xf')](a95_0x3c7a('0xd'),a95_0x3c7a('0xe'))['isEmail']();_0x1420dc['assert'](a95_0x3c7a('0x21'),a95_0x3c7a('0x22'))[a95_0x3c7a('0x23')]({'min':0x4});_0x1420dc['assert']('confirmPassword','Passwords\x20do\x20not\x20match')[a95_0x3c7a('0x24')](_0x1420dc[a95_0x3c7a('0x25')][a95_0x3c7a('0x21')]);_0x1420dc[a95_0x3c7a('0x11')](a95_0x3c7a('0xd'))[a95_0x3c7a('0x26')]({'gmail_remove_dots':![]});const _0x73edf5=_0x1420dc[a95_0x3c7a('0x12')]();if(_0x73edf5){_0x1420dc[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),_0x73edf5);return _0x130f62[a95_0x3c7a('0x15')](a95_0x3c7a('0x27'));}const _0x352bfd=new User_1[(a95_0x3c7a('0x16'))]({'email':_0x1420dc[a95_0x3c7a('0x25')]['email'],'password':_0x1420dc[a95_0x3c7a('0x25')][a95_0x3c7a('0x21')]});User_1[a95_0x3c7a('0x16')][a95_0x3c7a('0x28')]({'email':_0x1420dc['body'][a95_0x3c7a('0xd')]},(_0xd66ce5,_0x4dac62)=>{if(_0xd66ce5){return _0x2f44b3(_0xd66ce5);}if(_0x4dac62){_0x1420dc[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),{'msg':a95_0x3c7a('0x29')});return _0x130f62['redirect']('/signup');}_0x352bfd[a95_0x3c7a('0x2a')](_0xd66ce5=>{if(_0xd66ce5){return _0x2f44b3(_0xd66ce5);}_0x1420dc[a95_0x3c7a('0x19')](_0x352bfd,_0xd66ce5=>{if(_0xd66ce5){return _0x2f44b3(_0xd66ce5);}_0x130f62['redirect']('/');});});});};exports[a95_0x3c7a('0x2b')]=(_0x1f8727,_0x5acacf)=>{_0x5acacf['render'](a95_0x3c7a('0x2c'),{'title':a95_0x3c7a('0x2d')});};exports[a95_0x3c7a('0x2e')]=(_0x3b9353,_0x371bce,_0x4e03b0)=>{_0x3b9353[a95_0x3c7a('0xf')](a95_0x3c7a('0xd'),a95_0x3c7a('0x2f'))['isEmail']();_0x3b9353[a95_0x3c7a('0x11')]('email')[a95_0x3c7a('0x26')]({'gmail_remove_dots':![]});const _0x5631f5=_0x3b9353[a95_0x3c7a('0x12')]();if(_0x5631f5){_0x3b9353[a95_0x3c7a('0x13')]('errors',_0x5631f5);return _0x371bce['redirect']('/account');}User_1[a95_0x3c7a('0x16')][a95_0x3c7a('0x30')](_0x3b9353['user']['id'],(_0x5acf95,_0xb4c596)=>{if(_0x5acf95){return _0x4e03b0(_0x5acf95);}_0xb4c596['email']=_0x3b9353[a95_0x3c7a('0x25')][a95_0x3c7a('0xd')]||'';_0xb4c596['profile'][a95_0x3c7a('0x31')]=_0x3b9353[a95_0x3c7a('0x25')][a95_0x3c7a('0x31')]||'';_0xb4c596[a95_0x3c7a('0x32')][a95_0x3c7a('0x33')]=_0x3b9353[a95_0x3c7a('0x25')]['gender']||'';_0xb4c596[a95_0x3c7a('0x32')]['location']=_0x3b9353['body'][a95_0x3c7a('0x34')]||'';_0xb4c596['profile'][a95_0x3c7a('0x35')]=_0x3b9353[a95_0x3c7a('0x25')][a95_0x3c7a('0x35')]||'';_0xb4c596[a95_0x3c7a('0x2a')](_0x5acf95=>{if(_0x5acf95){if(_0x5acf95[a95_0x3c7a('0x36')]===0x2af8){_0x3b9353[a95_0x3c7a('0x13')]('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x371bce[a95_0x3c7a('0x15')](a95_0x3c7a('0x37'));}return _0x4e03b0(_0x5acf95);}_0x3b9353['flash']('success',{'msg':a95_0x3c7a('0x38')});_0x371bce['redirect'](a95_0x3c7a('0x37'));});});};exports[a95_0x3c7a('0x39')]=(_0x43c9e1,_0x3950c3,_0x53edcb)=>{_0x43c9e1['assert'](a95_0x3c7a('0x21'),a95_0x3c7a('0x22'))['len']({'min':0x4});_0x43c9e1[a95_0x3c7a('0xf')](a95_0x3c7a('0x3a'),a95_0x3c7a('0x3b'))[a95_0x3c7a('0x24')](_0x43c9e1[a95_0x3c7a('0x25')][a95_0x3c7a('0x21')]);const _0x35ec1b=_0x43c9e1['validationErrors']();if(_0x35ec1b){_0x43c9e1[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),_0x35ec1b);return _0x3950c3['redirect'](a95_0x3c7a('0x37'));}User_1[a95_0x3c7a('0x16')]['findById'](_0x43c9e1[a95_0x3c7a('0x9')]['id'],(_0x55f518,_0x26e3c2)=>{if(_0x55f518){return _0x53edcb(_0x55f518);}_0x26e3c2['password']=_0x43c9e1[a95_0x3c7a('0x25')][a95_0x3c7a('0x21')];_0x26e3c2[a95_0x3c7a('0x2a')](_0x55f518=>{if(_0x55f518){return _0x53edcb(_0x55f518);}_0x43c9e1[a95_0x3c7a('0x13')](a95_0x3c7a('0x3c'),{'msg':'Password\x20has\x20been\x20changed.'});_0x3950c3['redirect'](a95_0x3c7a('0x37'));});});};exports[a95_0x3c7a('0x3d')]=(_0x5db1ed,_0x52c681,_0x10d3aa)=>{User_1['default'][a95_0x3c7a('0x3e')]({'_id':_0x5db1ed[a95_0x3c7a('0x9')]['id']},_0x2a61aa=>{if(_0x2a61aa){return _0x10d3aa(_0x2a61aa);}_0x5db1ed[a95_0x3c7a('0x1d')]();_0x5db1ed[a95_0x3c7a('0x13')](a95_0x3c7a('0x3f'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x52c681[a95_0x3c7a('0x15')]('/');});};exports[a95_0x3c7a('0x40')]=(_0x127c5b,_0x45ff02,_0x40fcbc)=>{const _0x5e7222=_0x127c5b[a95_0x3c7a('0x41')]['provider'];User_1[a95_0x3c7a('0x16')][a95_0x3c7a('0x30')](_0x127c5b[a95_0x3c7a('0x9')]['id'],(_0x8a5612,_0x5ee061)=>{if(_0x8a5612){return _0x40fcbc(_0x8a5612);}_0x5ee061[_0x5e7222]=undefined;_0x5ee061[a95_0x3c7a('0x42')]=_0x5ee061[a95_0x3c7a('0x42')][a95_0x3c7a('0x43')](_0x424835=>_0x424835[a95_0x3c7a('0x44')]!==_0x5e7222);_0x5ee061[a95_0x3c7a('0x2a')](_0x8a5612=>{if(_0x8a5612){return _0x40fcbc(_0x8a5612);}_0x127c5b[a95_0x3c7a('0x13')](a95_0x3c7a('0x3f'),{'msg':_0x5e7222+'\x20account\x20has\x20been\x20unlinked.'});_0x45ff02[a95_0x3c7a('0x15')](a95_0x3c7a('0x37'));});});};exports[a95_0x3c7a('0x45')]=(_0x881f93,_0x11c0fb,_0x538424)=>{if(_0x881f93['isAuthenticated']()){return _0x11c0fb[a95_0x3c7a('0x15')]('/');}User_1['default']['findOne']({'passwordResetToken':_0x881f93[a95_0x3c7a('0x41')][a95_0x3c7a('0x46')]})[a95_0x3c7a('0x47')](a95_0x3c7a('0x48'))['gt'](Date['now']())[a95_0x3c7a('0x49')]((_0xf093bf,_0x31f0c8)=>{if(_0xf093bf){return _0x538424(_0xf093bf);}if(!_0x31f0c8){_0x881f93[a95_0x3c7a('0x13')]('errors',{'msg':a95_0x3c7a('0x4a')});return _0x11c0fb[a95_0x3c7a('0x15')](a95_0x3c7a('0x4b'));}_0x11c0fb[a95_0x3c7a('0xa')](a95_0x3c7a('0x4c'),{'title':a95_0x3c7a('0x4d')});});};exports[a95_0x3c7a('0x4e')]=(_0x131a02,_0x2dd84f,_0x269d45)=>{_0x131a02[a95_0x3c7a('0xf')](a95_0x3c7a('0x21'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a95_0x3c7a('0x23')]({'min':0x4});_0x131a02[a95_0x3c7a('0xf')](a95_0x3c7a('0x4f'),'Passwords\x20must\x20match.')[a95_0x3c7a('0x24')](_0x131a02[a95_0x3c7a('0x25')][a95_0x3c7a('0x21')]);const _0x8da1f4=_0x131a02[a95_0x3c7a('0x12')]();if(_0x8da1f4){_0x131a02[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),_0x8da1f4);return _0x2dd84f[a95_0x3c7a('0x15')](a95_0x3c7a('0x50'));}async_1[a95_0x3c7a('0x16')]['waterfall']([function resetPassword(_0x30b2fb){User_1['default'][a95_0x3c7a('0x28')]({'passwordResetToken':_0x131a02[a95_0x3c7a('0x41')]['token']})[a95_0x3c7a('0x47')](a95_0x3c7a('0x48'))['gt'](Date[a95_0x3c7a('0x51')]())[a95_0x3c7a('0x49')]((_0x52130d,_0x4d9064)=>{if(_0x52130d){return _0x269d45(_0x52130d);}if(!_0x4d9064){_0x131a02[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2dd84f[a95_0x3c7a('0x15')]('back');}_0x4d9064[a95_0x3c7a('0x21')]=_0x131a02[a95_0x3c7a('0x25')][a95_0x3c7a('0x21')];_0x4d9064['passwordResetToken']=undefined;_0x4d9064[a95_0x3c7a('0x48')]=undefined;_0x4d9064[a95_0x3c7a('0x2a')](_0x52130d=>{if(_0x52130d){return _0x269d45(_0x52130d);}_0x131a02[a95_0x3c7a('0x19')](_0x4d9064,_0x52130d=>{_0x30b2fb(_0x52130d,_0x4d9064);});});});},function sendResetPasswordEmail(_0x28e710,_0x14ac3d){const _0x412745=nodemailer_1[a95_0x3c7a('0x16')][a95_0x3c7a('0x52')]({'service':'SendGrid','auth':{'user':process[a95_0x3c7a('0x53')][a95_0x3c7a('0x54')],'pass':process[a95_0x3c7a('0x53')]['SENDGRID_PASSWORD']}});const _0x14c1f2={'to':_0x28e710[a95_0x3c7a('0xd')],'from':a95_0x3c7a('0x55'),'subject':a95_0x3c7a('0x56'),'text':a95_0x3c7a('0x57')+_0x28e710[a95_0x3c7a('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x412745[a95_0x3c7a('0x58')](_0x14c1f2,_0x1b2aa3=>{_0x131a02[a95_0x3c7a('0x13')](a95_0x3c7a('0x3c'),{'msg':a95_0x3c7a('0x59')});_0x14ac3d(_0x1b2aa3);});}],_0x176758=>{if(_0x176758){return _0x269d45(_0x176758);}_0x2dd84f[a95_0x3c7a('0x15')]('/');});};exports[a95_0x3c7a('0x5a')]=(_0x24e019,_0x17f793)=>{if(_0x24e019[a95_0x3c7a('0x5b')]()){return _0x17f793[a95_0x3c7a('0x15')]('/');}_0x17f793[a95_0x3c7a('0xa')]('account/forgot',{'title':'Forgot\x20Password'});};exports[a95_0x3c7a('0x5c')]=(_0x5f2754,_0x439015,_0x20f91a)=>{_0x5f2754[a95_0x3c7a('0xf')](a95_0x3c7a('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a95_0x3c7a('0x5d')]();_0x5f2754[a95_0x3c7a('0x11')](a95_0x3c7a('0xd'))[a95_0x3c7a('0x26')]({'gmail_remove_dots':![]});const _0x449700=_0x5f2754[a95_0x3c7a('0x12')]();if(_0x449700){_0x5f2754[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),_0x449700);return _0x439015[a95_0x3c7a('0x15')](a95_0x3c7a('0x4b'));}async_1[a95_0x3c7a('0x16')][a95_0x3c7a('0x5e')]([function createRandomToken(_0x12a206){crypto_1[a95_0x3c7a('0x16')][a95_0x3c7a('0x5f')](0x10,(_0x332f36,_0x19eccc)=>{const _0xb39b72=_0x19eccc[a95_0x3c7a('0x60')]('hex');_0x12a206(_0x332f36,_0xb39b72);});},function setRandomToken(_0x5cfe27,_0x13e978){User_1[a95_0x3c7a('0x16')][a95_0x3c7a('0x28')]({'email':_0x5f2754[a95_0x3c7a('0x25')][a95_0x3c7a('0xd')]},(_0x3ebeed,_0x22de05)=>{if(_0x3ebeed){return _0x13e978(_0x3ebeed);}if(!_0x22de05){_0x5f2754[a95_0x3c7a('0x13')](a95_0x3c7a('0x14'),{'msg':a95_0x3c7a('0x61')});return _0x439015[a95_0x3c7a('0x15')]('/forgot');}_0x22de05[a95_0x3c7a('0x62')]=_0x5cfe27;_0x22de05['passwordResetExpires']=Date[a95_0x3c7a('0x51')]()+0x36ee80;_0x22de05[a95_0x3c7a('0x2a')](_0x3ebeed=>{_0x13e978(_0x3ebeed,_0x5cfe27,_0x22de05);});});},function sendForgotPasswordEmail(_0x164134,_0xa5a08e,_0x5d1b9a){const _0x3b26e8=nodemailer_1['default']['createTransport']({'service':a95_0x3c7a('0x63'),'auth':{'user':process['env'][a95_0x3c7a('0x54')],'pass':process[a95_0x3c7a('0x53')]['SENDGRID_PASSWORD']}});const _0x4aeace={'to':_0xa5a08e[a95_0x3c7a('0xd')],'from':a95_0x3c7a('0x64'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a95_0x3c7a('0x65')+_0x5f2754[a95_0x3c7a('0x66')][a95_0x3c7a('0x67')]+a95_0x3c7a('0x68')+_0x164134+a95_0x3c7a('0x69')};_0x3b26e8[a95_0x3c7a('0x58')](_0x4aeace,_0x300bc8=>{_0x5f2754[a95_0x3c7a('0x13')]('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0xa5a08e[a95_0x3c7a('0xd')]+a95_0x3c7a('0x6a')});_0x5d1b9a(_0x300bc8);});}],_0x6bc192=>{if(_0x6bc192){return _0x20f91a(_0x6bc192);}_0x439015[a95_0x3c7a('0x15')](a95_0x3c7a('0x4b'));});};