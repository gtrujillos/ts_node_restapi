var a201_0x1893=['/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','getOauthUnlink','provider','tokens','filter','kind','getReset','isAuthenticated','params','token','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','where','passwordResetToken','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','../models/User','express-validator','getLogin','user','redirect','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','notEmpty','sanitize','flash','/login','default','authenticate','errors','message','success','session','returnTo','logout','render','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','account/profile','postUpdateProfile','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'];(function(_0x2c3d67,_0x50973c){var _0x1ecda5=function(_0x1041fe){while(--_0x1041fe){_0x2c3d67['push'](_0x2c3d67['shift']());}};_0x1ecda5(++_0x50973c);}(a201_0x1893,0x17a));var a201_0x4224=function(_0x159819,_0x297c53){_0x159819=_0x159819-0x0;var _0x3d2e83=a201_0x1893[_0x159819];return _0x3d2e83;};'use strict';var __importDefault=this&&this[a201_0x4224('0x0')]||function(_0x4f0897){return _0x4f0897&&_0x4f0897[a201_0x4224('0x1')]?_0x4f0897:{'default':_0x4f0897};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a201_0x4224('0x2')));const crypto_1=__importDefault(require(a201_0x4224('0x3')));const nodemailer_1=__importDefault(require(a201_0x4224('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a201_0x4224('0x5')));const request=require(a201_0x4224('0x6'));exports[a201_0x4224('0x7')]=(_0x3b33c1,_0x9d838b)=>{if(_0x3b33c1[a201_0x4224('0x8')]){return _0x9d838b[a201_0x4224('0x9')]('/');}_0x9d838b['render']('account/login',{'title':a201_0x4224('0xa')});};exports[a201_0x4224('0xb')]=(_0xa56aa0,_0x3713ef,_0x2f34a2)=>{_0xa56aa0[a201_0x4224('0xc')](a201_0x4224('0xd'),a201_0x4224('0xe'))['isEmail']();_0xa56aa0[a201_0x4224('0xc')](a201_0x4224('0xf'),'Password\x20cannot\x20be\x20blank')[a201_0x4224('0x10')]();_0xa56aa0[a201_0x4224('0x11')](a201_0x4224('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x24728e=_0xa56aa0['validationErrors']();if(_0x24728e){_0xa56aa0[a201_0x4224('0x12')]('errors',_0x24728e);return _0x3713ef[a201_0x4224('0x9')](a201_0x4224('0x13'));}passport_1[a201_0x4224('0x14')][a201_0x4224('0x15')]('local',(_0x4f523b,_0x423012,_0x412811)=>{if(_0x4f523b){return _0x2f34a2(_0x4f523b);}if(!_0x423012){_0xa56aa0[a201_0x4224('0x12')](a201_0x4224('0x16'),_0x412811[a201_0x4224('0x17')]);return _0x3713ef['redirect'](a201_0x4224('0x13'));}_0xa56aa0['logIn'](_0x423012,_0x4f523b=>{if(_0x4f523b){return _0x2f34a2(_0x4f523b);}_0xa56aa0[a201_0x4224('0x12')](a201_0x4224('0x18'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x3713ef[a201_0x4224('0x9')](_0xa56aa0[a201_0x4224('0x19')][a201_0x4224('0x1a')]||'/');});})(_0xa56aa0,_0x3713ef,_0x2f34a2);};exports[a201_0x4224('0x1b')]=(_0x513c08,_0x287711)=>{_0x513c08['logout']();_0x287711[a201_0x4224('0x9')]('/');};exports['getSignup']=(_0x3cc67e,_0x42d261)=>{if(_0x3cc67e[a201_0x4224('0x8')]){return _0x42d261[a201_0x4224('0x9')]('/');}_0x42d261[a201_0x4224('0x1c')]('account/signup',{'title':a201_0x4224('0x1d')});};exports[a201_0x4224('0x1e')]=(_0x1b0fec,_0x11fbe9,_0x3a09fb)=>{_0x1b0fec[a201_0x4224('0xc')](a201_0x4224('0xd'),'Email\x20is\x20not\x20valid')[a201_0x4224('0x1f')]();_0x1b0fec[a201_0x4224('0xc')](a201_0x4224('0xf'),a201_0x4224('0x20'))[a201_0x4224('0x21')]({'min':0x4});_0x1b0fec[a201_0x4224('0xc')](a201_0x4224('0x22'),a201_0x4224('0x23'))[a201_0x4224('0x24')](_0x1b0fec[a201_0x4224('0x25')][a201_0x4224('0xf')]);_0x1b0fec[a201_0x4224('0x11')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x7c5923=_0x1b0fec[a201_0x4224('0x26')]();if(_0x7c5923){_0x1b0fec[a201_0x4224('0x12')](a201_0x4224('0x16'),_0x7c5923);return _0x11fbe9[a201_0x4224('0x9')](a201_0x4224('0x27'));}const _0x477cb0=new User_1[(a201_0x4224('0x14'))]({'email':_0x1b0fec[a201_0x4224('0x25')][a201_0x4224('0xd')],'password':_0x1b0fec[a201_0x4224('0x25')][a201_0x4224('0xf')]});User_1['default'][a201_0x4224('0x28')]({'email':_0x1b0fec[a201_0x4224('0x25')][a201_0x4224('0xd')]},(_0x2c40ca,_0x52b6cc)=>{if(_0x2c40ca){return _0x3a09fb(_0x2c40ca);}if(_0x52b6cc){_0x1b0fec[a201_0x4224('0x12')](a201_0x4224('0x16'),{'msg':a201_0x4224('0x29')});return _0x11fbe9['redirect']('/signup');}_0x477cb0[a201_0x4224('0x2a')](_0x2c40ca=>{if(_0x2c40ca){return _0x3a09fb(_0x2c40ca);}_0x1b0fec[a201_0x4224('0x2b')](_0x477cb0,_0x2c40ca=>{if(_0x2c40ca){return _0x3a09fb(_0x2c40ca);}_0x11fbe9[a201_0x4224('0x9')]('/');});});});};exports[a201_0x4224('0x2c')]=(_0x23f98d,_0x502886)=>{_0x502886[a201_0x4224('0x1c')](a201_0x4224('0x2d'),{'title':'Account\x20Management'});};exports[a201_0x4224('0x2e')]=(_0x105af9,_0x1097ee,_0x2ea851)=>{_0x105af9[a201_0x4224('0xc')](a201_0x4224('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x105af9[a201_0x4224('0x11')](a201_0x4224('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x58692b=_0x105af9[a201_0x4224('0x26')]();if(_0x58692b){_0x105af9['flash'](a201_0x4224('0x16'),_0x58692b);return _0x1097ee[a201_0x4224('0x9')]('/account');}User_1[a201_0x4224('0x14')][a201_0x4224('0x2f')](_0x105af9[a201_0x4224('0x8')]['id'],(_0x8aad8b,_0x310285)=>{if(_0x8aad8b){return _0x2ea851(_0x8aad8b);}_0x310285[a201_0x4224('0xd')]=_0x105af9[a201_0x4224('0x25')][a201_0x4224('0xd')]||'';_0x310285[a201_0x4224('0x30')][a201_0x4224('0x31')]=_0x105af9[a201_0x4224('0x25')]['name']||'';_0x310285[a201_0x4224('0x30')][a201_0x4224('0x32')]=_0x105af9['body']['gender']||'';_0x310285[a201_0x4224('0x30')][a201_0x4224('0x33')]=_0x105af9['body'][a201_0x4224('0x33')]||'';_0x310285[a201_0x4224('0x30')][a201_0x4224('0x34')]=_0x105af9[a201_0x4224('0x25')]['website']||'';_0x310285[a201_0x4224('0x2a')](_0x8aad8b=>{if(_0x8aad8b){if(_0x8aad8b['code']===0x2af8){_0x105af9[a201_0x4224('0x12')](a201_0x4224('0x16'),{'msg':a201_0x4224('0x35')});return _0x1097ee['redirect'](a201_0x4224('0x36'));}return _0x2ea851(_0x8aad8b);}_0x105af9[a201_0x4224('0x12')](a201_0x4224('0x18'),{'msg':a201_0x4224('0x37')});_0x1097ee[a201_0x4224('0x9')](a201_0x4224('0x36'));});});};exports[a201_0x4224('0x38')]=(_0x281693,_0x18fcdf,_0x26de3c)=>{_0x281693['assert'](a201_0x4224('0xf'),a201_0x4224('0x20'))[a201_0x4224('0x21')]({'min':0x4});_0x281693['assert']('confirmPassword',a201_0x4224('0x23'))[a201_0x4224('0x24')](_0x281693[a201_0x4224('0x25')][a201_0x4224('0xf')]);const _0x4e25aa=_0x281693[a201_0x4224('0x26')]();if(_0x4e25aa){_0x281693[a201_0x4224('0x12')]('errors',_0x4e25aa);return _0x18fcdf[a201_0x4224('0x9')](a201_0x4224('0x36'));}User_1[a201_0x4224('0x14')][a201_0x4224('0x2f')](_0x281693[a201_0x4224('0x8')]['id'],(_0xfc9e1e,_0x411b4d)=>{if(_0xfc9e1e){return _0x26de3c(_0xfc9e1e);}_0x411b4d['password']=_0x281693[a201_0x4224('0x25')][a201_0x4224('0xf')];_0x411b4d['save'](_0xfc9e1e=>{if(_0xfc9e1e){return _0x26de3c(_0xfc9e1e);}_0x281693[a201_0x4224('0x12')](a201_0x4224('0x18'),{'msg':a201_0x4224('0x39')});_0x18fcdf[a201_0x4224('0x9')]('/account');});});};exports[a201_0x4224('0x3a')]=(_0x24ba07,_0x208d37,_0x10cf11)=>{User_1[a201_0x4224('0x14')][a201_0x4224('0x3b')]({'_id':_0x24ba07[a201_0x4224('0x8')]['id']},_0x51ef7d=>{if(_0x51ef7d){return _0x10cf11(_0x51ef7d);}_0x24ba07['logout']();_0x24ba07[a201_0x4224('0x12')](a201_0x4224('0x3c'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x208d37[a201_0x4224('0x9')]('/');});};exports[a201_0x4224('0x3d')]=(_0x40b32d,_0x136318,_0x2f242e)=>{const _0x491efe=_0x40b32d['params'][a201_0x4224('0x3e')];User_1[a201_0x4224('0x14')][a201_0x4224('0x2f')](_0x40b32d[a201_0x4224('0x8')]['id'],(_0x201536,_0x38d2d4)=>{if(_0x201536){return _0x2f242e(_0x201536);}_0x38d2d4[_0x491efe]=undefined;_0x38d2d4[a201_0x4224('0x3f')]=_0x38d2d4[a201_0x4224('0x3f')][a201_0x4224('0x40')](_0x38a879=>_0x38a879[a201_0x4224('0x41')]!==_0x491efe);_0x38d2d4[a201_0x4224('0x2a')](_0x201536=>{if(_0x201536){return _0x2f242e(_0x201536);}_0x40b32d[a201_0x4224('0x12')](a201_0x4224('0x3c'),{'msg':_0x491efe+'\x20account\x20has\x20been\x20unlinked.'});_0x136318['redirect'](a201_0x4224('0x36'));});});};exports[a201_0x4224('0x42')]=(_0xdc34ed,_0x191248,_0x430a04)=>{if(_0xdc34ed[a201_0x4224('0x43')]()){return _0x191248['redirect']('/');}User_1['default'][a201_0x4224('0x28')]({'passwordResetToken':_0xdc34ed[a201_0x4224('0x44')][a201_0x4224('0x45')]})['where'](a201_0x4224('0x46'))['gt'](Date[a201_0x4224('0x47')]())['exec']((_0x2001f0,_0x1fcc91)=>{if(_0x2001f0){return _0x430a04(_0x2001f0);}if(!_0x1fcc91){_0xdc34ed['flash'](a201_0x4224('0x16'),{'msg':a201_0x4224('0x48')});return _0x191248[a201_0x4224('0x9')](a201_0x4224('0x49'));}_0x191248[a201_0x4224('0x1c')](a201_0x4224('0x4a'),{'title':a201_0x4224('0x4b')});});};exports[a201_0x4224('0x4c')]=(_0x1e1aa4,_0x2f02f6,_0x52d68f)=>{_0x1e1aa4[a201_0x4224('0xc')](a201_0x4224('0xf'),a201_0x4224('0x4d'))['len']({'min':0x4});_0x1e1aa4[a201_0x4224('0xc')](a201_0x4224('0x4e'),'Passwords\x20must\x20match.')['equals'](_0x1e1aa4['body'][a201_0x4224('0xf')]);const _0x2eb853=_0x1e1aa4['validationErrors']();if(_0x2eb853){_0x1e1aa4[a201_0x4224('0x12')](a201_0x4224('0x16'),_0x2eb853);return _0x2f02f6[a201_0x4224('0x9')](a201_0x4224('0x4f'));}async_1[a201_0x4224('0x14')][a201_0x4224('0x50')]([function resetPassword(_0x875481){User_1[a201_0x4224('0x14')][a201_0x4224('0x28')]({'passwordResetToken':_0x1e1aa4[a201_0x4224('0x44')]['token']})[a201_0x4224('0x51')](a201_0x4224('0x46'))['gt'](Date[a201_0x4224('0x47')]())['exec']((_0x3a82e9,_0x294f86)=>{if(_0x3a82e9){return _0x52d68f(_0x3a82e9);}if(!_0x294f86){_0x1e1aa4[a201_0x4224('0x12')](a201_0x4224('0x16'),{'msg':a201_0x4224('0x48')});return _0x2f02f6[a201_0x4224('0x9')](a201_0x4224('0x4f'));}_0x294f86[a201_0x4224('0xf')]=_0x1e1aa4[a201_0x4224('0x25')]['password'];_0x294f86[a201_0x4224('0x52')]=undefined;_0x294f86[a201_0x4224('0x46')]=undefined;_0x294f86[a201_0x4224('0x2a')](_0x3a82e9=>{if(_0x3a82e9){return _0x52d68f(_0x3a82e9);}_0x1e1aa4[a201_0x4224('0x2b')](_0x294f86,_0x3a82e9=>{_0x875481(_0x3a82e9,_0x294f86);});});});},function sendResetPasswordEmail(_0x8b76e0,_0x18f183){const _0x530e91=nodemailer_1[a201_0x4224('0x14')]['createTransport']({'service':a201_0x4224('0x53'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a201_0x4224('0x54')][a201_0x4224('0x55')]}});const _0x34414a={'to':_0x8b76e0['email'],'from':a201_0x4224('0x56'),'subject':a201_0x4224('0x57'),'text':a201_0x4224('0x58')+_0x8b76e0[a201_0x4224('0xd')]+a201_0x4224('0x59')};_0x530e91[a201_0x4224('0x5a')](_0x34414a,_0x2685e8=>{_0x1e1aa4[a201_0x4224('0x12')](a201_0x4224('0x18'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x18f183(_0x2685e8);});}],_0x58072e=>{if(_0x58072e){return _0x52d68f(_0x58072e);}_0x2f02f6[a201_0x4224('0x9')]('/');});};exports['getForgot']=(_0x1cffd9,_0x1541a6)=>{if(_0x1cffd9[a201_0x4224('0x43')]()){return _0x1541a6['redirect']('/');}_0x1541a6[a201_0x4224('0x1c')](a201_0x4224('0x5b'),{'title':a201_0x4224('0x5c')});};exports[a201_0x4224('0x5d')]=(_0x25ee19,_0x4b8d36,_0x59410d)=>{_0x25ee19[a201_0x4224('0xc')](a201_0x4224('0xd'),a201_0x4224('0x5e'))[a201_0x4224('0x1f')]();_0x25ee19[a201_0x4224('0x11')](a201_0x4224('0xd'))[a201_0x4224('0x5f')]({'gmail_remove_dots':![]});const _0x19afbb=_0x25ee19['validationErrors']();if(_0x19afbb){_0x25ee19[a201_0x4224('0x12')](a201_0x4224('0x16'),_0x19afbb);return _0x4b8d36[a201_0x4224('0x9')](a201_0x4224('0x49'));}async_1[a201_0x4224('0x14')][a201_0x4224('0x50')]([function createRandomToken(_0x41efa0){crypto_1[a201_0x4224('0x14')][a201_0x4224('0x60')](0x10,(_0x4cc230,_0x3456bf)=>{const _0x41e8e6=_0x3456bf[a201_0x4224('0x61')]('hex');_0x41efa0(_0x4cc230,_0x41e8e6);});},function setRandomToken(_0x16a3bc,_0x43f989){User_1[a201_0x4224('0x14')][a201_0x4224('0x28')]({'email':_0x25ee19[a201_0x4224('0x25')][a201_0x4224('0xd')]},(_0x1665d7,_0x4c4ebe)=>{if(_0x1665d7){return _0x43f989(_0x1665d7);}if(!_0x4c4ebe){_0x25ee19[a201_0x4224('0x12')]('errors',{'msg':a201_0x4224('0x62')});return _0x4b8d36['redirect'](a201_0x4224('0x49'));}_0x4c4ebe['passwordResetToken']=_0x16a3bc;_0x4c4ebe[a201_0x4224('0x46')]=Date[a201_0x4224('0x47')]()+0x36ee80;_0x4c4ebe[a201_0x4224('0x2a')](_0x1665d7=>{_0x43f989(_0x1665d7,_0x16a3bc,_0x4c4ebe);});});},function sendForgotPasswordEmail(_0x30630a,_0x17ad8c,_0x3be0dc){const _0x5cf14e=nodemailer_1[a201_0x4224('0x14')][a201_0x4224('0x63')]({'service':a201_0x4224('0x53'),'auth':{'user':process[a201_0x4224('0x54')][a201_0x4224('0x64')],'pass':process[a201_0x4224('0x54')][a201_0x4224('0x55')]}});const _0x2ef7f8={'to':_0x17ad8c[a201_0x4224('0xd')],'from':a201_0x4224('0x65'),'subject':a201_0x4224('0x66'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x25ee19['headers'][a201_0x4224('0x67')]+a201_0x4224('0x68')+_0x30630a+a201_0x4224('0x69')};_0x5cf14e[a201_0x4224('0x5a')](_0x2ef7f8,_0x521dff=>{_0x25ee19[a201_0x4224('0x12')](a201_0x4224('0x3c'),{'msg':a201_0x4224('0x6a')+_0x17ad8c['email']+a201_0x4224('0x6b')});_0x3be0dc(_0x521dff);});}],_0x2db859=>{if(_0x2db859){return _0x59410d(_0x2db859);}_0x4b8d36[a201_0x4224('0x9')](a201_0x4224('0x49'));});};