var a110_0x3525=['CONNECTED:\x20','remoteAddress','remotePort','data','close','findIndex','splice','startsWith','ST910','alarm','indexOf','parse','infoplate','controllers','vehiclesCountController','report','then','dataValues','writeFile','uuid','img','fullData:\x20','CLOSED:\x20','__importDefault','defineProperty','__esModule','errorhandler','./app','fs-extra','default','use','env','EXPRESS_SERVICE_ENABLED','true','FILE_OPTIMIZATION_SERVICE_ENABLED','listen','get','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','media/vehiclesCount/','ensureDir','connection'];(function(_0x591885,_0x1389c4){var _0x545ec8=function(_0x37a119){while(--_0x37a119){_0x591885['push'](_0x591885['shift']());}};_0x545ec8(++_0x1389c4);}(a110_0x3525,0x77));var a110_0x1c9a=function(_0x188789,_0x3fc5bd){_0x188789=_0x188789-0x0;var _0x37fe3d=a110_0x3525[_0x188789];return _0x37fe3d;};'use strict';var __importDefault=this&&this[a110_0x1c9a('0x0')]||function(_0x4feb23){return _0x4feb23&&_0x4feb23['__esModule']?_0x4feb23:{'default':_0x4feb23};};Object[a110_0x1c9a('0x1')](exports,a110_0x1c9a('0x2'),{'value':!![]});const errorhandler_1=__importDefault(require(a110_0x1c9a('0x3')));const app_1=__importDefault(require(a110_0x1c9a('0x4')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const fileOptimizationDemon_1=__importDefault(require('./tasks/fileOptimizationDemon'));const fsExtra=require(a110_0x1c9a('0x5'));app_1[a110_0x1c9a('0x6')][a110_0x1c9a('0x7')](errorhandler_1[a110_0x1c9a('0x6')]());const expressServiceEnabled=process[a110_0x1c9a('0x8')][a110_0x1c9a('0x9')]==a110_0x1c9a('0xa');const fileOptimizationEnabled=process[a110_0x1c9a('0x8')][a110_0x1c9a('0xb')]==a110_0x1c9a('0xa');const socketServiceEnabled=process[a110_0x1c9a('0x8')]['SOCKET_SERVICE_ENABLED']==a110_0x1c9a('0xa');if(expressServiceEnabled){const server=app_1[a110_0x1c9a('0x6')][a110_0x1c9a('0xc')](app_1['default'][a110_0x1c9a('0xd')](a110_0x1c9a('0xe')),()=>{console[a110_0x1c9a('0xf')](a110_0x1c9a('0x10'),app_1[a110_0x1c9a('0x6')][a110_0x1c9a('0xd')](a110_0x1c9a('0xe')),app_1[a110_0x1c9a('0x6')][a110_0x1c9a('0xd')](a110_0x1c9a('0x8')));console[a110_0x1c9a('0xf')](a110_0x1c9a('0x11'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1['default']();fileOptimizationTask['start']();}if(socketServiceEnabled){const net=require(a110_0x1c9a('0x12'));const port=0x46;const host=a110_0x1c9a('0x13');const fs=require('fs');const socketServer=net[a110_0x1c9a('0x14')]();socketServer['listen'](port,host,()=>{console[a110_0x1c9a('0xf')](a110_0x1c9a('0x15')+port+'.');});const imageFolder=a110_0x1c9a('0x16');fsExtra[a110_0x1c9a('0x17')](imageFolder,_0xe47c0e=>{console['log'](_0xe47c0e);});const sockets=[];socketServer['on'](a110_0x1c9a('0x18'),function(_0x553154){console['log'](a110_0x1c9a('0x19')+_0x553154[a110_0x1c9a('0x1a')]+':'+_0x553154[a110_0x1c9a('0x1b')]);let _0x78669a='';_0x553154['on'](a110_0x1c9a('0x1c'),function(_0xbb9bd1){const _0x3cff96=String(_0xbb9bd1);_0x78669a+=_0x3cff96;});_0x553154['on'](a110_0x1c9a('0x1d'),function(_0x474873){const _0x396aab=sockets[a110_0x1c9a('0x1e')](function(_0x1c1715){return _0x1c1715[a110_0x1c9a('0x1a')]===_0x553154[a110_0x1c9a('0x1a')]&&_0x1c1715[a110_0x1c9a('0x1b')]===_0x553154[a110_0x1c9a('0x1b')];});if(_0x396aab!==-0x1)sockets[a110_0x1c9a('0x1f')](_0x396aab,0x1);if(_0x78669a[a110_0x1c9a('0x20')](a110_0x1c9a('0x21'))){console[a110_0x1c9a('0xf')](a110_0x1c9a('0x22'));}else{console[a110_0x1c9a('0xf')]('LPR');_0x78669a=_0x78669a['substr'](_0x78669a[a110_0x1c9a('0x23')]('{'));let _0x248c18={};try{_0x248c18=JSON[a110_0x1c9a('0x24')](_0x78669a);}catch(_0x5ebc04){console[a110_0x1c9a('0xf')](_0x5ebc04);}if(_0x248c18[a110_0x1c9a('0x25')]!=null&&_0x248c18['infoplate']!=''){sequelize_utils_1[a110_0x1c9a('0x6')][a110_0x1c9a('0x26')][a110_0x1c9a('0x27')][a110_0x1c9a('0x28')]({'body':_0x248c18},null,null)[a110_0x1c9a('0x29')](_0xe5c943=>{console[a110_0x1c9a('0xf')](_0xe5c943[a110_0x1c9a('0x2a')]);if(_0x248c18[a110_0x1c9a('0x25')]['img']!=null&&_0x248c18[a110_0x1c9a('0x25')]['img']!='')fsExtra[a110_0x1c9a('0x2b')](imageFolder+_0xe5c943[a110_0x1c9a('0x2a')][a110_0x1c9a('0x2c')]+'.png',_0x248c18['infoplate'][a110_0x1c9a('0x2d')],'base64',function(_0x200a49){console['log'](_0x200a49);});});}}console[a110_0x1c9a('0xf')](a110_0x1c9a('0x2e')+_0x78669a);console[a110_0x1c9a('0xf')](a110_0x1c9a('0x2f')+_0x553154['remoteAddress']+'\x20'+_0x553154['remotePort']);});});}exports[a110_0x1c9a('0x6')]=null;