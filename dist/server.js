var a110_0x3ab6=['./app','./infrastructure/sequelize-utils','./tasks/fileOptimizationDemon','fs-extra','default','use','EXPRESS_SERVICE_ENABLED','true','env','FILE_OPTIMIZATION_SERVICE_ENABLED','listen','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','media/vehiclesCount/','ensureDir','connection','CONNECTED:\x20','remotePort','data','close','findIndex','remoteAddress','splice','startsWith','ST910','indexOf','parse','Plate','controllers','then','img','writeFile','.png','base64','fullData:\x20','__importDefault','__esModule','defineProperty','errorhandler'];(function(_0x4bd822,_0x2bd6f7){var _0xb4bdb3=function(_0x1d68f6){while(--_0x1d68f6){_0x4bd822['push'](_0x4bd822['shift']());}};_0xb4bdb3(++_0x2bd6f7);}(a110_0x3ab6,0x110));var a110_0x4ddf=function(_0x256550,_0x4b65a6){_0x256550=_0x256550-0x0;var _0x390c65=a110_0x3ab6[_0x256550];return _0x390c65;};'use strict';var __importDefault=this&&this[a110_0x4ddf('0x0')]||function(_0x18d26b){return _0x18d26b&&_0x18d26b[a110_0x4ddf('0x1')]?_0x18d26b:{'default':_0x18d26b};};Object[a110_0x4ddf('0x2')](exports,a110_0x4ddf('0x1'),{'value':!![]});const errorhandler_1=__importDefault(require(a110_0x4ddf('0x3')));const app_1=__importDefault(require(a110_0x4ddf('0x4')));const sequelize_utils_1=__importDefault(require(a110_0x4ddf('0x5')));const fileOptimizationDemon_1=__importDefault(require(a110_0x4ddf('0x6')));const fsExtra=require(a110_0x4ddf('0x7'));app_1[a110_0x4ddf('0x8')][a110_0x4ddf('0x9')](errorhandler_1[a110_0x4ddf('0x8')]());const expressServiceEnabled=process['env'][a110_0x4ddf('0xa')]==a110_0x4ddf('0xb');const fileOptimizationEnabled=process[a110_0x4ddf('0xc')][a110_0x4ddf('0xd')]==a110_0x4ddf('0xb');const socketServiceEnabled=process[a110_0x4ddf('0xc')]['SOCKET_SERVICE_ENABLED']==a110_0x4ddf('0xb');if(expressServiceEnabled){const server=app_1[a110_0x4ddf('0x8')][a110_0x4ddf('0xe')](app_1[a110_0x4ddf('0x8')]['get'](a110_0x4ddf('0xf')),()=>{console[a110_0x4ddf('0x10')](a110_0x4ddf('0x11'),app_1[a110_0x4ddf('0x8')]['get'](a110_0x4ddf('0xf')),app_1[a110_0x4ddf('0x8')]['get']('env'));console[a110_0x4ddf('0x10')](a110_0x4ddf('0x12'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x4ddf('0x8'))]();fileOptimizationTask[a110_0x4ddf('0x13')]();}if(socketServiceEnabled){const net=require(a110_0x4ddf('0x14'));const port=0x46;const host=a110_0x4ddf('0x15');const fs=require('fs');const socketServer=net[a110_0x4ddf('0x16')]();socketServer[a110_0x4ddf('0xe')](port,host,()=>{console['log'](a110_0x4ddf('0x17')+port+'.');});const imageFolder=a110_0x4ddf('0x18');fsExtra[a110_0x4ddf('0x19')](imageFolder,_0x1c958c=>{console[a110_0x4ddf('0x10')](_0x1c958c);});const sockets=[];socketServer['on'](a110_0x4ddf('0x1a'),function(_0x4d61e0){console['log'](a110_0x4ddf('0x1b')+_0x4d61e0['remoteAddress']+':'+_0x4d61e0[a110_0x4ddf('0x1c')]);let _0x323586='';_0x4d61e0['on'](a110_0x4ddf('0x1d'),function(_0x45dc1d){const _0x1913df=String(_0x45dc1d);_0x323586+=_0x1913df;});_0x4d61e0['on'](a110_0x4ddf('0x1e'),function(_0x55571c){const _0x578e19=sockets[a110_0x4ddf('0x1f')](function(_0x143c20){return _0x143c20[a110_0x4ddf('0x20')]===_0x4d61e0[a110_0x4ddf('0x20')]&&_0x143c20[a110_0x4ddf('0x1c')]===_0x4d61e0[a110_0x4ddf('0x1c')];});if(_0x578e19!==-0x1)sockets[a110_0x4ddf('0x21')](_0x578e19,0x1);if(_0x323586[a110_0x4ddf('0x22')](a110_0x4ddf('0x23'))){console[a110_0x4ddf('0x10')]('alarm');}else{console[a110_0x4ddf('0x10')]('LPR');_0x323586=_0x323586['substr'](_0x323586[a110_0x4ddf('0x24')]('{'));let _0x58660f={};try{_0x58660f=JSON[a110_0x4ddf('0x25')](_0x323586);}catch(_0xc7f7db){console['log'](_0xc7f7db);}if(_0x58660f[a110_0x4ddf('0x26')]!=null)sequelize_utils_1['default'][a110_0x4ddf('0x27')]['vehiclesCountController']['report']({'body':_0x58660f},null,null)[a110_0x4ddf('0x28')](_0x49a40a=>{console[a110_0x4ddf('0x10')](_0x49a40a['dataValues']);if(_0x58660f[a110_0x4ddf('0x29')]!=null&&_0x58660f['img']!='')fsExtra[a110_0x4ddf('0x2a')](imageFolder+_0x49a40a['id']+a110_0x4ddf('0x2b'),_0x58660f[a110_0x4ddf('0x29')],a110_0x4ddf('0x2c'),function(_0xa5947c){console[a110_0x4ddf('0x10')](_0xa5947c);});});}console['log'](a110_0x4ddf('0x2d')+_0x323586);console[a110_0x4ddf('0x10')]('CLOSED:\x20'+_0x4d61e0[a110_0x4ddf('0x20')]+'\x20'+_0x4d61e0[a110_0x4ddf('0x1c')]);});});}exports['default']=null;