var a198_0x1456=['\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','FILES_FOLDER','vehiclesCount/','ensureDir','CONNECTED:\x20','remotePort','******result:\x20','ST910','alarm','getInstance','reportEvent','then','alarm:\x20','close','findIndex','remoteAddress','splice','LPR','substr','indexOf','infoplate','vehiclesCountController','report','dataValues','img','uuid','.png','fullData:\x20','CLOSED:\x20','__importDefault','defineProperty','__esModule','errorhandler','./app','./tasks/fileOptimizationTask','fs-extra','default','use','env','EXPRESS_SERVICE_ENABLED','true','SOCKET_SERVICE_ENABLED','listen','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','get'];(function(_0x34e0c2,_0x39dac8){var _0x44038f=function(_0x18e5be){while(--_0x18e5be){_0x34e0c2['push'](_0x34e0c2['shift']());}};_0x44038f(++_0x39dac8);}(a198_0x1456,0xf2));var a198_0x5546=function(_0x554a1e,_0xb31313){_0x554a1e=_0x554a1e-0x0;var _0x30b76f=a198_0x1456[_0x554a1e];return _0x30b76f;};'use strict';var __importDefault=this&&this[a198_0x5546('0x0')]||function(_0x4bc261){return _0x4bc261&&_0x4bc261['__esModule']?_0x4bc261:{'default':_0x4bc261};};Object[a198_0x5546('0x1')](exports,a198_0x5546('0x2'),{'value':!![]});const errorhandler_1=__importDefault(require(a198_0x5546('0x3')));const app_1=__importDefault(require(a198_0x5546('0x4')));const fileOptimizationTask_1=__importDefault(require(a198_0x5546('0x5')));const controllers_1=__importDefault(require('./app/controllers'));const fsExtra=require(a198_0x5546('0x6'));app_1[a198_0x5546('0x7')][a198_0x5546('0x8')](errorhandler_1[a198_0x5546('0x7')]());const expressServiceEnabled=process[a198_0x5546('0x9')][a198_0x5546('0xa')]==a198_0x5546('0xb');const fileOptimizationEnabled=process['env']['FILE_OPTIMIZATION_SERVICE_ENABLED']==a198_0x5546('0xb');const socketServiceEnabled=process[a198_0x5546('0x9')][a198_0x5546('0xc')]==a198_0x5546('0xb');if(expressServiceEnabled){const server=app_1[a198_0x5546('0x7')][a198_0x5546('0xd')](app_1['default']['get'](a198_0x5546('0xe')),()=>{console[a198_0x5546('0xf')](a198_0x5546('0x10'),app_1[a198_0x5546('0x7')]['get'](a198_0x5546('0xe')),app_1[a198_0x5546('0x7')][a198_0x5546('0x11')]('env'));console[a198_0x5546('0xf')](a198_0x5546('0x12'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1[(a198_0x5546('0x7'))]();fileOptimizationTask[a198_0x5546('0x13')]();}if(socketServiceEnabled){const net=require(a198_0x5546('0x14'));const port=0x46;const host=a198_0x5546('0x15');const fs=require('fs');const socketServer=net[a198_0x5546('0x16')]();socketServer[a198_0x5546('0xd')](port,host,()=>{console['log'](a198_0x5546('0x17')+port+'.');});const imageFolder=process[a198_0x5546('0x9')][a198_0x5546('0x18')]+a198_0x5546('0x19');fsExtra[a198_0x5546('0x1a')](imageFolder,_0x342a8d=>{console[a198_0x5546('0xf')](_0x342a8d);});const sockets=[];socketServer['on']('connection',function(_0x39f3f5){console[a198_0x5546('0xf')](a198_0x5546('0x1b')+_0x39f3f5['remoteAddress']+':'+_0x39f3f5[a198_0x5546('0x1c')]);let _0x2391a5='';_0x39f3f5['on']('data',function(_0x27f746){const _0x48f7e3=String(_0x27f746);console[a198_0x5546('0xf')](a198_0x5546('0x1d'));console[a198_0x5546('0xf')](_0x48f7e3);_0x2391a5+=_0x48f7e3;if(_0x48f7e3['startsWith'](a198_0x5546('0x1e'))){console['log'](a198_0x5546('0x1f'));const _0x57df44={};controllers_1[a198_0x5546('0x7')][a198_0x5546('0x20')]()['eventsController'][a198_0x5546('0x21')]({'body':{'data':''}},null,null)[a198_0x5546('0x22')](_0x35845c=>{console[a198_0x5546('0xf')](a198_0x5546('0x23'));console[a198_0x5546('0xf')](_0x35845c);});}});_0x39f3f5['on'](a198_0x5546('0x24'),function(_0xa5a4f6){const _0x374245=sockets[a198_0x5546('0x25')](function(_0x13a55e){return _0x13a55e[a198_0x5546('0x26')]===_0x39f3f5[a198_0x5546('0x26')]&&_0x13a55e[a198_0x5546('0x1c')]===_0x39f3f5[a198_0x5546('0x1c')];});if(_0x374245!==-0x1)sockets[a198_0x5546('0x27')](_0x374245,0x1);if(_0x2391a5['startsWith'](a198_0x5546('0x1e'))){}else{console['log'](a198_0x5546('0x28'));_0x2391a5=_0x2391a5[a198_0x5546('0x29')](_0x2391a5[a198_0x5546('0x2a')]('{'));let _0x71d27a={};try{_0x71d27a=JSON['parse'](_0x2391a5);}catch(_0x3a4fe0){console[a198_0x5546('0xf')](_0x3a4fe0);}if(_0x71d27a[a198_0x5546('0x2b')]!=null&&_0x71d27a[a198_0x5546('0x2b')]!=''){controllers_1[a198_0x5546('0x7')][a198_0x5546('0x20')]()[a198_0x5546('0x2c')][a198_0x5546('0x2d')]({'body':_0x71d27a},null,null)['then'](_0xbc816b=>{console['log'](_0xbc816b[a198_0x5546('0x2e')]);if(_0x71d27a['infoplate'][a198_0x5546('0x2f')]!=null&&_0x71d27a[a198_0x5546('0x2b')][a198_0x5546('0x2f')]!='')fsExtra['writeFile'](imageFolder+_0xbc816b[a198_0x5546('0x2e')][a198_0x5546('0x30')]+a198_0x5546('0x31'),_0x71d27a[a198_0x5546('0x2b')][a198_0x5546('0x2f')],'base64',function(_0x3fff2a){console[a198_0x5546('0xf')](_0x3fff2a);});});}}console[a198_0x5546('0xf')](a198_0x5546('0x32')+_0x2391a5);console[a198_0x5546('0xf')](a198_0x5546('0x33')+_0x39f3f5[a198_0x5546('0x26')]+'\x20'+_0x39f3f5[a198_0x5546('0x1c')]);});});}exports[a198_0x5546('0x7')]=null;