var a110_0x4eed=['port','start','0.0.0.0','TCP\x20Server\x20is\x20running\x20on\x20port\x20','CONNECTED:\x20','remoteAddress','close','findIndex','remotePort','splice','startsWith','alarm','substr','indexOf','parse','Plate','controllers','vehiclesCountController','report','then','img','writeFile','media/vehiclesCount/','.png','base64','CLOSED:\x20','__esModule','defineProperty','errorhandler','./app','./infrastructure/sequelize-utils','default','true','env','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','listen','get','log'];(function(_0x1bef0f,_0x264ac9){var _0x1a2989=function(_0x5a7599){while(--_0x5a7599){_0x1bef0f['push'](_0x1bef0f['shift']());}};_0x1a2989(++_0x264ac9);}(a110_0x4eed,0x1ee));var a110_0x2370=function(_0x162a84,_0x3cb4f3){_0x162a84=_0x162a84-0x0;var _0x68d0f=a110_0x4eed[_0x162a84];return _0x68d0f;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0xa8b7b3){return _0xa8b7b3&&_0xa8b7b3[a110_0x2370('0x0')]?_0xa8b7b3:{'default':_0xa8b7b3};};Object[a110_0x2370('0x1')](exports,'__esModule',{'value':!![]});const errorhandler_1=__importDefault(require(a110_0x2370('0x2')));const app_1=__importDefault(require(a110_0x2370('0x3')));const sequelize_utils_1=__importDefault(require(a110_0x2370('0x4')));const fileOptimizationDemon_1=__importDefault(require('./tasks/fileOptimizationDemon'));app_1[a110_0x2370('0x5')]['use'](errorhandler_1['default']());const expressServiceEnabled=process['env']['EXPRESS_SERVICE_ENABLED']==a110_0x2370('0x6');const fileOptimizationEnabled=process[a110_0x2370('0x7')][a110_0x2370('0x8')]==a110_0x2370('0x6');const socketServiceEnabled=process['env'][a110_0x2370('0x9')]==a110_0x2370('0x6');if(expressServiceEnabled){const server=app_1[a110_0x2370('0x5')][a110_0x2370('0xa')](app_1[a110_0x2370('0x5')][a110_0x2370('0xb')]('port'),()=>{console[a110_0x2370('0xc')]('\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode',app_1[a110_0x2370('0x5')][a110_0x2370('0xb')](a110_0x2370('0xd')),app_1[a110_0x2370('0x5')]['get'](a110_0x2370('0x7')));console[a110_0x2370('0xc')]('\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a');});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x2370('0x5'))]();fileOptimizationTask[a110_0x2370('0xe')]();}if(socketServiceEnabled){const net=require('net');const port=0x46;const host=a110_0x2370('0xf');const fs=require('fs');const socketServer=net['createServer']();socketServer[a110_0x2370('0xa')](port,host,()=>{console[a110_0x2370('0xc')](a110_0x2370('0x10')+port+'.');});const sockets=[];socketServer['on']('connection',function(_0x2d6963){console[a110_0x2370('0xc')](a110_0x2370('0x11')+_0x2d6963[a110_0x2370('0x12')]+':'+_0x2d6963['remotePort']);let _0x58fae8='';_0x2d6963['on']('data',function(_0x54d914){const _0xb0ce13=String(_0x54d914);_0x58fae8+=_0xb0ce13;});_0x2d6963['on'](a110_0x2370('0x13'),function(_0x297f74){const _0x165e39=sockets[a110_0x2370('0x14')](function(_0x2a8580){return _0x2a8580[a110_0x2370('0x12')]===_0x2d6963['remoteAddress']&&_0x2a8580[a110_0x2370('0x15')]===_0x2d6963[a110_0x2370('0x15')];});if(_0x165e39!==-0x1)sockets[a110_0x2370('0x16')](_0x165e39,0x1);if(_0x58fae8[a110_0x2370('0x17')]('ST910')){console[a110_0x2370('0xc')](a110_0x2370('0x18'));}else{console[a110_0x2370('0xc')]('LPR');_0x58fae8=_0x58fae8[a110_0x2370('0x19')](_0x58fae8[a110_0x2370('0x1a')]('{'));let _0x221990={};try{_0x221990=JSON[a110_0x2370('0x1b')](_0x58fae8);}catch(_0x2b5fd8){console[a110_0x2370('0xc')](_0x2b5fd8);}if(_0x221990[a110_0x2370('0x1c')]!=null)sequelize_utils_1[a110_0x2370('0x5')][a110_0x2370('0x1d')][a110_0x2370('0x1e')][a110_0x2370('0x1f')]({'body':_0x221990},null,null)[a110_0x2370('0x20')](_0x545d86=>{if(_0x221990[a110_0x2370('0x21')]!=null&&_0x221990['img']!='')require('fs')[a110_0x2370('0x22')](a110_0x2370('0x23')+_0x545d86['id']+a110_0x2370('0x24'),_0x221990['img'],a110_0x2370('0x25'),function(_0x53578d){console[a110_0x2370('0xc')](_0x53578d);});console[a110_0x2370('0xc')](_0x545d86['dataValues']);});}console[a110_0x2370('0xc')]('fullData:\x20'+_0x58fae8);console[a110_0x2370('0xc')](a110_0x2370('0x26')+_0x2d6963['remoteAddress']+'\x20'+_0x2d6963[a110_0x2370('0x15')]);});});}exports[a110_0x2370('0x5')]=null;