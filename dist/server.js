var a110_0x1f69=['data','******result:\x20','startsWith','ST910','alarm','controllers','then','alarm:\x20','close','findIndex','LPR','indexOf','parse','infoplate','report','dataValues','img','uuid','.png','base64','fullData:\x20','CLOSED:\x20','__importDefault','defineProperty','__esModule','errorhandler','./app','./infrastructure/sequelize-utils','./tasks/fileOptimizationDemon','default','use','EXPRESS_SERVICE_ENABLED','true','env','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','listen','get','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','0.0.0.0','createServer','CONNECTED:\x20','remoteAddress','remotePort'];(function(_0x11cc36,_0x5148e0){var _0x1b5b71=function(_0xb32061){while(--_0xb32061){_0x11cc36['push'](_0x11cc36['shift']());}};_0x1b5b71(++_0x5148e0);}(a110_0x1f69,0xda));var a110_0x2bdf=function(_0x414c07,_0x1edd17){_0x414c07=_0x414c07-0x0;var _0x1f1311=a110_0x1f69[_0x414c07];return _0x1f1311;};'use strict';var __importDefault=this&&this[a110_0x2bdf('0x0')]||function(_0x15e203){return _0x15e203&&_0x15e203['__esModule']?_0x15e203:{'default':_0x15e203};};Object[a110_0x2bdf('0x1')](exports,a110_0x2bdf('0x2'),{'value':!![]});const errorhandler_1=__importDefault(require(a110_0x2bdf('0x3')));const app_1=__importDefault(require(a110_0x2bdf('0x4')));const sequelize_utils_1=__importDefault(require(a110_0x2bdf('0x5')));const fileOptimizationDemon_1=__importDefault(require(a110_0x2bdf('0x6')));const fsExtra=require('fs-extra');app_1[a110_0x2bdf('0x7')][a110_0x2bdf('0x8')](errorhandler_1[a110_0x2bdf('0x7')]());const expressServiceEnabled=process['env'][a110_0x2bdf('0x9')]==a110_0x2bdf('0xa');const fileOptimizationEnabled=process[a110_0x2bdf('0xb')][a110_0x2bdf('0xc')]=='true';const socketServiceEnabled=process[a110_0x2bdf('0xb')][a110_0x2bdf('0xd')]==a110_0x2bdf('0xa');if(expressServiceEnabled){const server=app_1[a110_0x2bdf('0x7')][a110_0x2bdf('0xe')](app_1[a110_0x2bdf('0x7')][a110_0x2bdf('0xf')](a110_0x2bdf('0x10')),()=>{console[a110_0x2bdf('0x11')](a110_0x2bdf('0x12'),app_1[a110_0x2bdf('0x7')][a110_0x2bdf('0xf')](a110_0x2bdf('0x10')),app_1[a110_0x2bdf('0x7')][a110_0x2bdf('0xf')]('env'));console[a110_0x2bdf('0x11')](a110_0x2bdf('0x13'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x2bdf('0x7'))]();fileOptimizationTask[a110_0x2bdf('0x14')]();}if(socketServiceEnabled){const net=require(a110_0x2bdf('0x15'));const port=0x46;const host=a110_0x2bdf('0x16');const fs=require('fs');const socketServer=net[a110_0x2bdf('0x17')]();socketServer[a110_0x2bdf('0xe')](port,host,()=>{console[a110_0x2bdf('0x11')]('TCP\x20Server\x20is\x20running\x20on\x20port\x20'+port+'.');});const imageFolder=process[a110_0x2bdf('0xb')]['IMAGE_FILES_FOLDER']+'vehiclesCount/';fsExtra['ensureDir'](imageFolder,_0x467458=>{console[a110_0x2bdf('0x11')](_0x467458);});const sockets=[];socketServer['on']('connection',function(_0x4cfe9b){console[a110_0x2bdf('0x11')](a110_0x2bdf('0x18')+_0x4cfe9b[a110_0x2bdf('0x19')]+':'+_0x4cfe9b[a110_0x2bdf('0x1a')]);let _0x1d4de4='';_0x4cfe9b['on'](a110_0x2bdf('0x1b'),function(_0x573274){const _0x477df3=String(_0x573274);console[a110_0x2bdf('0x11')](a110_0x2bdf('0x1c'));console['log'](_0x477df3);_0x1d4de4+=_0x477df3;if(_0x477df3[a110_0x2bdf('0x1d')](a110_0x2bdf('0x1e'))){console['log'](a110_0x2bdf('0x1f'));const _0x3646cd={};sequelize_utils_1['default'][a110_0x2bdf('0x20')]['alarmsController']['reportAlarm']({'body':{'data':''}},null,null)[a110_0x2bdf('0x21')](_0x5522e2=>{console[a110_0x2bdf('0x11')](a110_0x2bdf('0x22'));console[a110_0x2bdf('0x11')](_0x5522e2);});}});_0x4cfe9b['on'](a110_0x2bdf('0x23'),function(_0xd866a4){const _0x3b67fb=sockets[a110_0x2bdf('0x24')](function(_0x4994dc){return _0x4994dc[a110_0x2bdf('0x19')]===_0x4cfe9b[a110_0x2bdf('0x19')]&&_0x4994dc['remotePort']===_0x4cfe9b['remotePort'];});if(_0x3b67fb!==-0x1)sockets['splice'](_0x3b67fb,0x1);if(_0x1d4de4[a110_0x2bdf('0x1d')](a110_0x2bdf('0x1e'))){}else{console['log'](a110_0x2bdf('0x25'));_0x1d4de4=_0x1d4de4['substr'](_0x1d4de4[a110_0x2bdf('0x26')]('{'));let _0x421b0a={};try{_0x421b0a=JSON[a110_0x2bdf('0x27')](_0x1d4de4);}catch(_0xb14e2e){console['log'](_0xb14e2e);}if(_0x421b0a[a110_0x2bdf('0x28')]!=null&&_0x421b0a['infoplate']!=''){sequelize_utils_1['default'][a110_0x2bdf('0x20')]['vehiclesCountController'][a110_0x2bdf('0x29')]({'body':_0x421b0a},null,null)[a110_0x2bdf('0x21')](_0x24bd49=>{console[a110_0x2bdf('0x11')](_0x24bd49[a110_0x2bdf('0x2a')]);if(_0x421b0a[a110_0x2bdf('0x28')][a110_0x2bdf('0x2b')]!=null&&_0x421b0a[a110_0x2bdf('0x28')][a110_0x2bdf('0x2b')]!='')fsExtra['writeFile'](imageFolder+_0x24bd49['dataValues'][a110_0x2bdf('0x2c')]+a110_0x2bdf('0x2d'),_0x421b0a[a110_0x2bdf('0x28')][a110_0x2bdf('0x2b')],a110_0x2bdf('0x2e'),function(_0x53426e){console['log'](_0x53426e);});});}}console[a110_0x2bdf('0x11')](a110_0x2bdf('0x2f')+_0x1d4de4);console[a110_0x2bdf('0x11')](a110_0x2bdf('0x30')+_0x4cfe9b[a110_0x2bdf('0x19')]+'\x20'+_0x4cfe9b[a110_0x2bdf('0x1a')]);});});}exports[a110_0x2bdf('0x7')]=null;