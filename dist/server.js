var a110_0xfc58=['ensureDir','connection','remoteAddress','data','close','remotePort','splice','ST910','alarm','LPR','substr','indexOf','infoplate','controllers','report','img','writeFile','dataValues','uuid','.png','base64','fullData:\x20','CLOSED:\x20','__importDefault','__esModule','errorhandler','./app','./tasks/fileOptimizationDemon','fs-extra','EXPRESS_SERVICE_ENABLED','true','env','SOCKET_SERVICE_ENABLED','listen','get','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','default','start','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','IMAGE_FILES_FOLDER','vehiclesCount/'];(function(_0x4d43fb,_0x7b8c0b){var _0xc6e9bf=function(_0x38b829){while(--_0x38b829){_0x4d43fb['push'](_0x4d43fb['shift']());}};_0xc6e9bf(++_0x7b8c0b);}(a110_0xfc58,0x73));var a110_0x2cec=function(_0x4752f8,_0x1d519b){_0x4752f8=_0x4752f8-0x0;var _0x4c2bd3=a110_0xfc58[_0x4752f8];return _0x4c2bd3;};'use strict';var __importDefault=this&&this[a110_0x2cec('0x0')]||function(_0x3b0c8f){return _0x3b0c8f&&_0x3b0c8f['__esModule']?_0x3b0c8f:{'default':_0x3b0c8f};};Object['defineProperty'](exports,a110_0x2cec('0x1'),{'value':!![]});const errorhandler_1=__importDefault(require(a110_0x2cec('0x2')));const app_1=__importDefault(require(a110_0x2cec('0x3')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const fileOptimizationDemon_1=__importDefault(require(a110_0x2cec('0x4')));const fsExtra=require(a110_0x2cec('0x5'));app_1['default']['use'](errorhandler_1['default']());const expressServiceEnabled=process['env'][a110_0x2cec('0x6')]==a110_0x2cec('0x7');const fileOptimizationEnabled=process[a110_0x2cec('0x8')]['FILE_OPTIMIZATION_SERVICE_ENABLED']=='true';const socketServiceEnabled=process[a110_0x2cec('0x8')][a110_0x2cec('0x9')]==a110_0x2cec('0x7');if(expressServiceEnabled){const server=app_1['default'][a110_0x2cec('0xa')](app_1['default'][a110_0x2cec('0xb')]('port'),()=>{console[a110_0x2cec('0xc')](a110_0x2cec('0xd'),app_1['default'][a110_0x2cec('0xb')]('port'),app_1['default'][a110_0x2cec('0xb')](a110_0x2cec('0x8')));console[a110_0x2cec('0xc')](a110_0x2cec('0xe'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x2cec('0xf'))]();fileOptimizationTask[a110_0x2cec('0x10')]();}if(socketServiceEnabled){const net=require(a110_0x2cec('0x11'));const port=0x46;const host=a110_0x2cec('0x12');const fs=require('fs');const socketServer=net[a110_0x2cec('0x13')]();socketServer[a110_0x2cec('0xa')](port,host,()=>{console[a110_0x2cec('0xc')](a110_0x2cec('0x14')+port+'.');});const imageFolder=process[a110_0x2cec('0x8')][a110_0x2cec('0x15')]+a110_0x2cec('0x16');fsExtra[a110_0x2cec('0x17')](imageFolder,_0x2de2f9=>{console['log'](_0x2de2f9);});const sockets=[];socketServer['on'](a110_0x2cec('0x18'),function(_0x7a4c36){console[a110_0x2cec('0xc')]('CONNECTED:\x20'+_0x7a4c36[a110_0x2cec('0x19')]+':'+_0x7a4c36['remotePort']);let _0x10584b='';_0x7a4c36['on'](a110_0x2cec('0x1a'),function(_0x39cd45){const _0x2b0521=String(_0x39cd45);_0x10584b+=_0x2b0521;});_0x7a4c36['on'](a110_0x2cec('0x1b'),function(_0x3e0603){const _0x1f49ee=sockets['findIndex'](function(_0x1c2f25){return _0x1c2f25[a110_0x2cec('0x19')]===_0x7a4c36[a110_0x2cec('0x19')]&&_0x1c2f25[a110_0x2cec('0x1c')]===_0x7a4c36[a110_0x2cec('0x1c')];});if(_0x1f49ee!==-0x1)sockets[a110_0x2cec('0x1d')](_0x1f49ee,0x1);if(_0x10584b['startsWith'](a110_0x2cec('0x1e'))){console[a110_0x2cec('0xc')](a110_0x2cec('0x1f'));}else{console[a110_0x2cec('0xc')](a110_0x2cec('0x20'));_0x10584b=_0x10584b[a110_0x2cec('0x21')](_0x10584b[a110_0x2cec('0x22')]('{'));let _0x3bf5b6={};try{_0x3bf5b6=JSON['parse'](_0x10584b);}catch(_0xf80fa9){console['log'](_0xf80fa9);}if(_0x3bf5b6[a110_0x2cec('0x23')]!=null&&_0x3bf5b6[a110_0x2cec('0x23')]!=''){sequelize_utils_1[a110_0x2cec('0xf')][a110_0x2cec('0x24')]['vehiclesCountController'][a110_0x2cec('0x25')]({'body':_0x3bf5b6},null,null)['then'](_0x47f063=>{console[a110_0x2cec('0xc')](_0x47f063['dataValues']);if(_0x3bf5b6[a110_0x2cec('0x23')][a110_0x2cec('0x26')]!=null&&_0x3bf5b6[a110_0x2cec('0x23')][a110_0x2cec('0x26')]!='')fsExtra[a110_0x2cec('0x27')](imageFolder+_0x47f063[a110_0x2cec('0x28')][a110_0x2cec('0x29')]+a110_0x2cec('0x2a'),_0x3bf5b6['infoplate'][a110_0x2cec('0x26')],a110_0x2cec('0x2b'),function(_0xca5746){console[a110_0x2cec('0xc')](_0xca5746);});});}}console[a110_0x2cec('0xc')](a110_0x2cec('0x2c')+_0x10584b);console[a110_0x2cec('0xc')](a110_0x2cec('0x2d')+_0x7a4c36[a110_0x2cec('0x19')]+'\x20'+_0x7a4c36[a110_0x2cec('0x1c')]);});});}exports[a110_0x2cec('0xf')]=null;