var a110_0x2e14=['.png','base64','fullData:\x20','__importDefault','__esModule','defineProperty','./app','./tasks/fileOptimizationDemon','use','env','EXPRESS_SERVICE_ENABLED','true','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','default','listen','get','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','media/vehiclesCount/','ensureDir','CONNECTED:\x20','remoteAddress','remotePort','data','findIndex','ST910','alarm','LPR','substr','indexOf','*******jsonData:\x20','*******jsonData.Plate:\x20','Plate','controllers','vehiclesCountController','then','dataValues','img','writeFile'];(function(_0x3ee174,_0x22475){var _0x20da95=function(_0x13f992){while(--_0x13f992){_0x3ee174['push'](_0x3ee174['shift']());}};_0x20da95(++_0x22475);}(a110_0x2e14,0xe4));var a110_0x1471=function(_0x18a8c6,_0x5e22b3){_0x18a8c6=_0x18a8c6-0x0;var _0x5832f9=a110_0x2e14[_0x18a8c6];return _0x5832f9;};'use strict';var __importDefault=this&&this[a110_0x1471('0x0')]||function(_0x5e356d){return _0x5e356d&&_0x5e356d[a110_0x1471('0x1')]?_0x5e356d:{'default':_0x5e356d};};Object[a110_0x1471('0x2')](exports,'__esModule',{'value':!![]});const errorhandler_1=__importDefault(require('errorhandler'));const app_1=__importDefault(require(a110_0x1471('0x3')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const fileOptimizationDemon_1=__importDefault(require(a110_0x1471('0x4')));const fsExtra=require('fs-extra');app_1['default'][a110_0x1471('0x5')](errorhandler_1['default']());const expressServiceEnabled=process[a110_0x1471('0x6')][a110_0x1471('0x7')]==a110_0x1471('0x8');const fileOptimizationEnabled=process['env'][a110_0x1471('0x9')]==a110_0x1471('0x8');const socketServiceEnabled=process['env'][a110_0x1471('0xa')]==a110_0x1471('0x8');if(expressServiceEnabled){const server=app_1[a110_0x1471('0xb')][a110_0x1471('0xc')](app_1['default'][a110_0x1471('0xd')](a110_0x1471('0xe')),()=>{console[a110_0x1471('0xf')](a110_0x1471('0x10'),app_1[a110_0x1471('0xb')]['get']('port'),app_1[a110_0x1471('0xb')][a110_0x1471('0xd')](a110_0x1471('0x6')));console[a110_0x1471('0xf')](a110_0x1471('0x11'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x1471('0xb'))]();fileOptimizationTask[a110_0x1471('0x12')]();}if(socketServiceEnabled){const net=require('net');const port=0x46;const host='0.0.0.0';const fs=require('fs');const socketServer=net[a110_0x1471('0x13')]();socketServer['listen'](port,host,()=>{console[a110_0x1471('0xf')](a110_0x1471('0x14')+port+'.');});const imageFolder=a110_0x1471('0x15');fsExtra[a110_0x1471('0x16')](imageFolder,_0x1183f8=>{console[a110_0x1471('0xf')](_0x1183f8);});const sockets=[];socketServer['on']('connection',function(_0x26eeea){console[a110_0x1471('0xf')](a110_0x1471('0x17')+_0x26eeea[a110_0x1471('0x18')]+':'+_0x26eeea[a110_0x1471('0x19')]);let _0x14798d='';_0x26eeea['on'](a110_0x1471('0x1a'),function(_0x34952d){const _0x14c9b2=String(_0x34952d);_0x14798d+=_0x14c9b2;});_0x26eeea['on']('close',function(_0x1c3b3e){const _0x38294d=sockets[a110_0x1471('0x1b')](function(_0x14b29a){return _0x14b29a[a110_0x1471('0x18')]===_0x26eeea[a110_0x1471('0x18')]&&_0x14b29a['remotePort']===_0x26eeea['remotePort'];});if(_0x38294d!==-0x1)sockets['splice'](_0x38294d,0x1);if(_0x14798d['startsWith'](a110_0x1471('0x1c'))){console['log'](a110_0x1471('0x1d'));}else{console[a110_0x1471('0xf')](a110_0x1471('0x1e'));_0x14798d=_0x14798d[a110_0x1471('0x1f')](_0x14798d[a110_0x1471('0x20')]('{'));let _0x4a8b55={};try{_0x4a8b55=JSON['parse'](_0x14798d);}catch(_0x1880ed){console[a110_0x1471('0xf')](_0x1880ed);}console[a110_0x1471('0xf')](a110_0x1471('0x21')+_0x4a8b55);console[a110_0x1471('0xf')](_0x4a8b55);console['log'](a110_0x1471('0x22')+_0x4a8b55[a110_0x1471('0x23')]);console[a110_0x1471('0xf')](_0x4a8b55[a110_0x1471('0x23')]);if(_0x4a8b55['Plate']!=null)sequelize_utils_1['default'][a110_0x1471('0x24')][a110_0x1471('0x25')]['report']({'body':_0x4a8b55},null,null)[a110_0x1471('0x26')](_0x5e5c63=>{console['log'](_0x5e5c63[a110_0x1471('0x27')]);if(_0x4a8b55[a110_0x1471('0x28')]!=null&&_0x4a8b55[a110_0x1471('0x28')]!='')fsExtra[a110_0x1471('0x29')](imageFolder+_0x5e5c63['id']+a110_0x1471('0x2a'),_0x4a8b55[a110_0x1471('0x28')],a110_0x1471('0x2b'),function(_0x36722a){console['log'](_0x36722a);});});}console['log'](a110_0x1471('0x2c')+_0x14798d);console[a110_0x1471('0xf')]('CLOSED:\x20'+_0x26eeea[a110_0x1471('0x18')]+'\x20'+_0x26eeea[a110_0x1471('0x19')]);});});}exports[a110_0x1471('0xb')]=null;