var a110_0x48c7=['remoteAddress','remotePort','splice','startsWith','ST910','alarm','LPR','parse','infoplate','controllers','vehiclesCountController','report','then','img','writeFile','dataValues','uuid','.png','fullData:\x20','__importDefault','__esModule','defineProperty','errorhandler','./app','./infrastructure/sequelize-utils','fs-extra','env','EXPRESS_SERVICE_ENABLED','true','SOCKET_SERVICE_ENABLED','listen','default','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','get','port','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','IMAGE_FILES_FOLDER','ensureDir','CONNECTED:\x20','data','close','findIndex'];(function(_0x1b88d5,_0x55b913){var _0x9cbd5d=function(_0x55cb08){while(--_0x55cb08){_0x1b88d5['push'](_0x1b88d5['shift']());}};_0x9cbd5d(++_0x55b913);}(a110_0x48c7,0x71));var a110_0x1213=function(_0x434ce6,_0xbcc853){_0x434ce6=_0x434ce6-0x0;var _0x2893e4=a110_0x48c7[_0x434ce6];return _0x2893e4;};'use strict';var __importDefault=this&&this[a110_0x1213('0x0')]||function(_0x37e7a3){return _0x37e7a3&&_0x37e7a3[a110_0x1213('0x1')]?_0x37e7a3:{'default':_0x37e7a3};};Object[a110_0x1213('0x2')](exports,a110_0x1213('0x1'),{'value':!![]});const errorhandler_1=__importDefault(require(a110_0x1213('0x3')));const app_1=__importDefault(require(a110_0x1213('0x4')));const sequelize_utils_1=__importDefault(require(a110_0x1213('0x5')));const fileOptimizationDemon_1=__importDefault(require('./tasks/fileOptimizationDemon'));const fsExtra=require(a110_0x1213('0x6'));app_1['default']['use'](errorhandler_1['default']());const expressServiceEnabled=process[a110_0x1213('0x7')][a110_0x1213('0x8')]=='true';const fileOptimizationEnabled=process['env']['FILE_OPTIMIZATION_SERVICE_ENABLED']==a110_0x1213('0x9');const socketServiceEnabled=process['env'][a110_0x1213('0xa')]==a110_0x1213('0x9');if(expressServiceEnabled){const server=app_1['default'][a110_0x1213('0xb')](app_1[a110_0x1213('0xc')]['get']('port'),()=>{console[a110_0x1213('0xd')](a110_0x1213('0xe'),app_1[a110_0x1213('0xc')][a110_0x1213('0xf')](a110_0x1213('0x10')),app_1[a110_0x1213('0xc')][a110_0x1213('0xf')](a110_0x1213('0x7')));console[a110_0x1213('0xd')](a110_0x1213('0x11'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x1213('0xc'))]();fileOptimizationTask[a110_0x1213('0x12')]();}if(socketServiceEnabled){const net=require('net');const port=0x46;const host=a110_0x1213('0x13');const fs=require('fs');const socketServer=net[a110_0x1213('0x14')]();socketServer[a110_0x1213('0xb')](port,host,()=>{console[a110_0x1213('0xd')](a110_0x1213('0x15')+port+'.');});const imageFolder=process['env'][a110_0x1213('0x16')]+'vehiclesCount/';fsExtra[a110_0x1213('0x17')](imageFolder,_0x1e7a55=>{console['log'](_0x1e7a55);});const sockets=[];socketServer['on']('connection',function(_0x587e9b){console[a110_0x1213('0xd')](a110_0x1213('0x18')+_0x587e9b['remoteAddress']+':'+_0x587e9b['remotePort']);let _0x533365='';_0x587e9b['on'](a110_0x1213('0x19'),function(_0x474707){const _0x249dc6=String(_0x474707);_0x533365+=_0x249dc6;});_0x587e9b['on'](a110_0x1213('0x1a'),function(_0x34900d){const _0x40d702=sockets[a110_0x1213('0x1b')](function(_0x93c8ef){return _0x93c8ef[a110_0x1213('0x1c')]===_0x587e9b[a110_0x1213('0x1c')]&&_0x93c8ef['remotePort']===_0x587e9b[a110_0x1213('0x1d')];});if(_0x40d702!==-0x1)sockets[a110_0x1213('0x1e')](_0x40d702,0x1);if(_0x533365[a110_0x1213('0x1f')](a110_0x1213('0x20'))){console['log'](a110_0x1213('0x21'));}else{console[a110_0x1213('0xd')](a110_0x1213('0x22'));_0x533365=_0x533365['substr'](_0x533365['indexOf']('{'));let _0xa0449d={};try{_0xa0449d=JSON[a110_0x1213('0x23')](_0x533365);}catch(_0x4ea9f5){console['log'](_0x4ea9f5);}if(_0xa0449d[a110_0x1213('0x24')]!=null&&_0xa0449d[a110_0x1213('0x24')]!=''){sequelize_utils_1[a110_0x1213('0xc')][a110_0x1213('0x25')][a110_0x1213('0x26')][a110_0x1213('0x27')]({'body':_0xa0449d},null,null)[a110_0x1213('0x28')](_0xc6fb9a=>{console[a110_0x1213('0xd')](_0xc6fb9a['dataValues']);if(_0xa0449d[a110_0x1213('0x24')][a110_0x1213('0x29')]!=null&&_0xa0449d[a110_0x1213('0x24')]['img']!='')fsExtra[a110_0x1213('0x2a')](imageFolder+_0xc6fb9a[a110_0x1213('0x2b')][a110_0x1213('0x2c')]+a110_0x1213('0x2d'),_0xa0449d[a110_0x1213('0x24')][a110_0x1213('0x29')],'base64',function(_0x3c6d7d){console[a110_0x1213('0xd')](_0x3c6d7d);});});}}console[a110_0x1213('0xd')](a110_0x1213('0x2e')+_0x533365);console[a110_0x1213('0xd')]('CLOSED:\x20'+_0x587e9b[a110_0x1213('0x1c')]+'\x20'+_0x587e9b[a110_0x1213('0x1d')]);});});}exports[a110_0x1213('0xc')]=null;