var a110_0x314e=['controllers','vehiclesCountController','report','then','img','uuid','.png','base64','__esModule','defineProperty','errorhandler','./infrastructure/sequelize-utils','./tasks/fileOptimizationDemon','fs-extra','default','use','EXPRESS_SERVICE_ENABLED','env','true','SOCKET_SERVICE_ENABLED','get','port','log','start','net','0.0.0.0','createServer','listen','TCP\x20Server\x20is\x20running\x20on\x20port\x20','vehiclesCount/','ensureDir','CONNECTED:\x20','remoteAddress','remotePort','close','findIndex','splice','startsWith','ST910','alarm','LPR','indexOf','parse','infoplate'];(function(_0x516d65,_0x59cc06){var _0x5a731e=function(_0x3d9273){while(--_0x3d9273){_0x516d65['push'](_0x516d65['shift']());}};_0x5a731e(++_0x59cc06);}(a110_0x314e,0x1c0));var a110_0xb708=function(_0x13b08d,_0x5c8acc){_0x13b08d=_0x13b08d-0x0;var _0xb6f2f5=a110_0x314e[_0x13b08d];return _0xb6f2f5;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3ebae6){return _0x3ebae6&&_0x3ebae6[a110_0xb708('0x0')]?_0x3ebae6:{'default':_0x3ebae6};};Object[a110_0xb708('0x1')](exports,a110_0xb708('0x0'),{'value':!![]});const errorhandler_1=__importDefault(require(a110_0xb708('0x2')));const app_1=__importDefault(require('./app'));const sequelize_utils_1=__importDefault(require(a110_0xb708('0x3')));const fileOptimizationDemon_1=__importDefault(require(a110_0xb708('0x4')));const fsExtra=require(a110_0xb708('0x5'));app_1[a110_0xb708('0x6')][a110_0xb708('0x7')](errorhandler_1[a110_0xb708('0x6')]());const expressServiceEnabled=process['env'][a110_0xb708('0x8')]=='true';const fileOptimizationEnabled=process[a110_0xb708('0x9')]['FILE_OPTIMIZATION_SERVICE_ENABLED']==a110_0xb708('0xa');const socketServiceEnabled=process['env'][a110_0xb708('0xb')]==a110_0xb708('0xa');if(expressServiceEnabled){const server=app_1[a110_0xb708('0x6')]['listen'](app_1['default'][a110_0xb708('0xc')](a110_0xb708('0xd')),()=>{console[a110_0xb708('0xe')]('\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode',app_1[a110_0xb708('0x6')][a110_0xb708('0xc')](a110_0xb708('0xd')),app_1[a110_0xb708('0x6')][a110_0xb708('0xc')](a110_0xb708('0x9')));console[a110_0xb708('0xe')]('\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a');});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0xb708('0x6'))]();fileOptimizationTask[a110_0xb708('0xf')]();}if(socketServiceEnabled){const net=require(a110_0xb708('0x10'));const port=0x46;const host=a110_0xb708('0x11');const fs=require('fs');const socketServer=net[a110_0xb708('0x12')]();socketServer[a110_0xb708('0x13')](port,host,()=>{console[a110_0xb708('0xe')](a110_0xb708('0x14')+port+'.');});const imageFolder=process[a110_0xb708('0x9')]['IMAGE_FILES_FOLDER']+a110_0xb708('0x15');fsExtra[a110_0xb708('0x16')](imageFolder,_0x50d7d2=>{console[a110_0xb708('0xe')](_0x50d7d2);});const sockets=[];socketServer['on']('connection',function(_0x4c6011){console[a110_0xb708('0xe')](a110_0xb708('0x17')+_0x4c6011[a110_0xb708('0x18')]+':'+_0x4c6011[a110_0xb708('0x19')]);let _0x3d2fb2='';_0x4c6011['on']('data',function(_0x51baf6){const _0xc7f087=String(_0x51baf6);_0x3d2fb2+=_0xc7f087;});_0x4c6011['on'](a110_0xb708('0x1a'),function(_0x27f999){const _0x26aaec=sockets[a110_0xb708('0x1b')](function(_0x3bf2f0){return _0x3bf2f0[a110_0xb708('0x18')]===_0x4c6011[a110_0xb708('0x18')]&&_0x3bf2f0[a110_0xb708('0x19')]===_0x4c6011[a110_0xb708('0x19')];});if(_0x26aaec!==-0x1)sockets[a110_0xb708('0x1c')](_0x26aaec,0x1);if(_0x3d2fb2[a110_0xb708('0x1d')](a110_0xb708('0x1e'))){console[a110_0xb708('0xe')](a110_0xb708('0x1f'));}else{console[a110_0xb708('0xe')](a110_0xb708('0x20'));_0x3d2fb2=_0x3d2fb2['substr'](_0x3d2fb2[a110_0xb708('0x21')]('{'));let _0x43db4f={};try{_0x43db4f=JSON[a110_0xb708('0x22')](_0x3d2fb2);}catch(_0x4c0647){console[a110_0xb708('0xe')](_0x4c0647);}if(_0x43db4f[a110_0xb708('0x23')]!=null&&_0x43db4f[a110_0xb708('0x23')]!=''){sequelize_utils_1[a110_0xb708('0x6')][a110_0xb708('0x24')][a110_0xb708('0x25')][a110_0xb708('0x26')]({'body':_0x43db4f},null,null)[a110_0xb708('0x27')](_0x53bbb3=>{console['log'](_0x53bbb3['dataValues']);if(_0x43db4f[a110_0xb708('0x23')][a110_0xb708('0x28')]!=null&&_0x43db4f[a110_0xb708('0x23')]['img']!='')fsExtra['writeFile'](imageFolder+_0x53bbb3['dataValues'][a110_0xb708('0x29')]+a110_0xb708('0x2a'),_0x43db4f[a110_0xb708('0x23')][a110_0xb708('0x28')],a110_0xb708('0x2b'),function(_0x48fad1){console[a110_0xb708('0xe')](_0x48fad1);});});}}console[a110_0xb708('0xe')]('fullData:\x20'+_0x3d2fb2);console['log']('CLOSED:\x20'+_0x4c6011[a110_0xb708('0x18')]+'\x20'+_0x4c6011[a110_0xb708('0x19')]);});});}exports['default']=null;