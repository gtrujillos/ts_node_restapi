var a126_0x1bac=['writeFile','uuid','base64','fullData:\x20','CLOSED:\x20','__importDefault','__esModule','defineProperty','errorhandler','./app','./tasks/fileOptimizationTask','./app/controllers','use','default','env','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','true','listen','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','get','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','IMAGE_FILES_FOLDER','vehiclesCount/','ensureDir','connection','CONNECTED:\x20','remoteAddress','remotePort','******result:\x20','startsWith','eventsController','reportEvent','then','alarm:\x20','close','findIndex','ST910','LPR','substr','parse','infoplate','getInstance','vehiclesCountController','report','dataValues','img'];(function(_0x3daa95,_0xa6f69){var _0x122008=function(_0x13c31e){while(--_0x13c31e){_0x3daa95['push'](_0x3daa95['shift']());}};_0x122008(++_0xa6f69);}(a126_0x1bac,0xa7));var a126_0x5bb4=function(_0xe63e6f,_0x1a4cb5){_0xe63e6f=_0xe63e6f-0x0;var _0x1e2176=a126_0x1bac[_0xe63e6f];return _0x1e2176;};'use strict';var __importDefault=this&&this[a126_0x5bb4('0x0')]||function(_0x3ba84c){return _0x3ba84c&&_0x3ba84c[a126_0x5bb4('0x1')]?_0x3ba84c:{'default':_0x3ba84c};};Object[a126_0x5bb4('0x2')](exports,'__esModule',{'value':!![]});const errorhandler_1=__importDefault(require(a126_0x5bb4('0x3')));const app_1=__importDefault(require(a126_0x5bb4('0x4')));const fileOptimizationTask_1=__importDefault(require(a126_0x5bb4('0x5')));const controllers_1=__importDefault(require(a126_0x5bb4('0x6')));const fsExtra=require('fs-extra');app_1['default'][a126_0x5bb4('0x7')](errorhandler_1[a126_0x5bb4('0x8')]());const expressServiceEnabled=process[a126_0x5bb4('0x9')]['EXPRESS_SERVICE_ENABLED']=='true';const fileOptimizationEnabled=process[a126_0x5bb4('0x9')][a126_0x5bb4('0xa')]=='true';const socketServiceEnabled=process[a126_0x5bb4('0x9')][a126_0x5bb4('0xb')]==a126_0x5bb4('0xc');if(expressServiceEnabled){const server=app_1[a126_0x5bb4('0x8')][a126_0x5bb4('0xd')](app_1['default']['get'](a126_0x5bb4('0xe')),()=>{console[a126_0x5bb4('0xf')](a126_0x5bb4('0x10'),app_1[a126_0x5bb4('0x8')][a126_0x5bb4('0x11')]('port'),app_1[a126_0x5bb4('0x8')][a126_0x5bb4('0x11')](a126_0x5bb4('0x9')));console[a126_0x5bb4('0xf')](a126_0x5bb4('0x12'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1[(a126_0x5bb4('0x8'))]();fileOptimizationTask[a126_0x5bb4('0x13')]();}if(socketServiceEnabled){const net=require(a126_0x5bb4('0x14'));const port=0x46;const host=a126_0x5bb4('0x15');const fs=require('fs');const socketServer=net[a126_0x5bb4('0x16')]();socketServer[a126_0x5bb4('0xd')](port,host,()=>{console[a126_0x5bb4('0xf')](a126_0x5bb4('0x17')+port+'.');});const imageFolder=process[a126_0x5bb4('0x9')][a126_0x5bb4('0x18')]+a126_0x5bb4('0x19');fsExtra[a126_0x5bb4('0x1a')](imageFolder,_0x2a86da=>{console[a126_0x5bb4('0xf')](_0x2a86da);});const sockets=[];socketServer['on'](a126_0x5bb4('0x1b'),function(_0x16e490){console[a126_0x5bb4('0xf')](a126_0x5bb4('0x1c')+_0x16e490[a126_0x5bb4('0x1d')]+':'+_0x16e490[a126_0x5bb4('0x1e')]);let _0x2fdf11='';_0x16e490['on']('data',function(_0x590129){const _0x558b4f=String(_0x590129);console[a126_0x5bb4('0xf')](a126_0x5bb4('0x1f'));console[a126_0x5bb4('0xf')](_0x558b4f);_0x2fdf11+=_0x558b4f;if(_0x558b4f[a126_0x5bb4('0x20')]('ST910')){console[a126_0x5bb4('0xf')]('alarm');const _0x4c29a7={};controllers_1[a126_0x5bb4('0x8')]['getInstance']()[a126_0x5bb4('0x21')][a126_0x5bb4('0x22')]({'body':{'data':''}},null,null)[a126_0x5bb4('0x23')](_0x49064c=>{console[a126_0x5bb4('0xf')](a126_0x5bb4('0x24'));console[a126_0x5bb4('0xf')](_0x49064c);});}});_0x16e490['on'](a126_0x5bb4('0x25'),function(_0x12bba7){const _0xa5d16f=sockets[a126_0x5bb4('0x26')](function(_0x5d5391){return _0x5d5391[a126_0x5bb4('0x1d')]===_0x16e490[a126_0x5bb4('0x1d')]&&_0x5d5391[a126_0x5bb4('0x1e')]===_0x16e490[a126_0x5bb4('0x1e')];});if(_0xa5d16f!==-0x1)sockets['splice'](_0xa5d16f,0x1);if(_0x2fdf11['startsWith'](a126_0x5bb4('0x27'))){}else{console[a126_0x5bb4('0xf')](a126_0x5bb4('0x28'));_0x2fdf11=_0x2fdf11[a126_0x5bb4('0x29')](_0x2fdf11['indexOf']('{'));let _0x42ebfc={};try{_0x42ebfc=JSON[a126_0x5bb4('0x2a')](_0x2fdf11);}catch(_0x56d883){console[a126_0x5bb4('0xf')](_0x56d883);}if(_0x42ebfc[a126_0x5bb4('0x2b')]!=null&&_0x42ebfc[a126_0x5bb4('0x2b')]!=''){controllers_1[a126_0x5bb4('0x8')][a126_0x5bb4('0x2c')]()[a126_0x5bb4('0x2d')][a126_0x5bb4('0x2e')]({'body':_0x42ebfc},null,null)[a126_0x5bb4('0x23')](_0x1ea951=>{console[a126_0x5bb4('0xf')](_0x1ea951[a126_0x5bb4('0x2f')]);if(_0x42ebfc['infoplate'][a126_0x5bb4('0x30')]!=null&&_0x42ebfc[a126_0x5bb4('0x2b')]['img']!='')fsExtra[a126_0x5bb4('0x31')](imageFolder+_0x1ea951['dataValues'][a126_0x5bb4('0x32')]+'.png',_0x42ebfc[a126_0x5bb4('0x2b')][a126_0x5bb4('0x30')],a126_0x5bb4('0x33'),function(_0x4159bc){console['log'](_0x4159bc);});});}}console['log'](a126_0x5bb4('0x34')+_0x2fdf11);console[a126_0x5bb4('0xf')](a126_0x5bb4('0x35')+_0x16e490['remoteAddress']+'\x20'+_0x16e490[a126_0x5bb4('0x1e')]);});});}exports['default']=null;