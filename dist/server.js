var a221_0x264c=['infoplate','vehiclesCountController','report','writeFile','dataValues','uuid','.png','base64','fullData:\x20','CLOSED:\x20','__esModule','defineProperty','./app','./infrastructure/sequelize-utils','fs-extra','default','use','EXPRESS_SERVICE_ENABLED','true','env','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','get','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','createServer','listen','TCP\x20Server\x20is\x20running\x20on\x20port\x20','IMAGE_FILES_FOLDER','ensureDir','connection','CONNECTED:\x20','remoteAddress','remotePort','data','******result:\x20','startsWith','ST910','alarm','controllers','eventsController','reportEvent','then','close','findIndex','LPR','substr','indexOf'];(function(_0x5e704a,_0x2fa3dd){var _0x1da083=function(_0x356fc7){while(--_0x356fc7){_0x5e704a['push'](_0x5e704a['shift']());}};_0x1da083(++_0x2fa3dd);}(a221_0x264c,0xda));var a221_0x1c9d=function(_0x5aeba1,_0x108c3e){_0x5aeba1=_0x5aeba1-0x0;var _0x34b6a1=a221_0x264c[_0x5aeba1];return _0x34b6a1;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4c9c7d){return _0x4c9c7d&&_0x4c9c7d[a221_0x1c9d('0x0')]?_0x4c9c7d:{'default':_0x4c9c7d};};Object[a221_0x1c9d('0x1')](exports,a221_0x1c9d('0x0'),{'value':!![]});const errorhandler_1=__importDefault(require('errorhandler'));const app_1=__importDefault(require(a221_0x1c9d('0x2')));const sequelize_utils_1=__importDefault(require(a221_0x1c9d('0x3')));const fileOptimizationTask_1=__importDefault(require('./tasks/fileOptimizationTask'));const fsExtra=require(a221_0x1c9d('0x4'));app_1[a221_0x1c9d('0x5')][a221_0x1c9d('0x6')](errorhandler_1['default']());const expressServiceEnabled=process['env'][a221_0x1c9d('0x7')]==a221_0x1c9d('0x8');const fileOptimizationEnabled=process[a221_0x1c9d('0x9')][a221_0x1c9d('0xa')]==a221_0x1c9d('0x8');const socketServiceEnabled=process[a221_0x1c9d('0x9')][a221_0x1c9d('0xb')]==a221_0x1c9d('0x8');if(expressServiceEnabled){const server=app_1[a221_0x1c9d('0x5')]['listen'](app_1[a221_0x1c9d('0x5')]['get'](a221_0x1c9d('0xc')),()=>{console[a221_0x1c9d('0xd')](a221_0x1c9d('0xe'),app_1[a221_0x1c9d('0x5')][a221_0x1c9d('0xf')](a221_0x1c9d('0xc')),app_1['default'][a221_0x1c9d('0xf')](a221_0x1c9d('0x9')));console['log'](a221_0x1c9d('0x10'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1[(a221_0x1c9d('0x5'))]();fileOptimizationTask[a221_0x1c9d('0x11')]();}if(socketServiceEnabled){const net=require(a221_0x1c9d('0x12'));const port=0x46;const host='0.0.0.0';const fs=require('fs');const socketServer=net[a221_0x1c9d('0x13')]();socketServer[a221_0x1c9d('0x14')](port,host,()=>{console[a221_0x1c9d('0xd')](a221_0x1c9d('0x15')+port+'.');});const imageFolder=process[a221_0x1c9d('0x9')][a221_0x1c9d('0x16')]+'vehiclesCount/';fsExtra[a221_0x1c9d('0x17')](imageFolder,_0x461f99=>{console[a221_0x1c9d('0xd')](_0x461f99);});const sockets=[];socketServer['on'](a221_0x1c9d('0x18'),function(_0x46d2c2){console[a221_0x1c9d('0xd')](a221_0x1c9d('0x19')+_0x46d2c2[a221_0x1c9d('0x1a')]+':'+_0x46d2c2[a221_0x1c9d('0x1b')]);let _0x4e3490='';_0x46d2c2['on'](a221_0x1c9d('0x1c'),function(_0x38008f){const _0x34651b=String(_0x38008f);console[a221_0x1c9d('0xd')](a221_0x1c9d('0x1d'));console[a221_0x1c9d('0xd')](_0x34651b);_0x4e3490+=_0x34651b;if(_0x34651b[a221_0x1c9d('0x1e')](a221_0x1c9d('0x1f'))){console[a221_0x1c9d('0xd')](a221_0x1c9d('0x20'));const _0x274de5={};sequelize_utils_1['default'][a221_0x1c9d('0x21')][a221_0x1c9d('0x22')][a221_0x1c9d('0x23')]({'body':{'data':''}},null,null)[a221_0x1c9d('0x24')](_0x43f9a2=>{console[a221_0x1c9d('0xd')]('alarm:\x20');console[a221_0x1c9d('0xd')](_0x43f9a2);});}});_0x46d2c2['on'](a221_0x1c9d('0x25'),function(_0x46611a){const _0x3f0d59=sockets[a221_0x1c9d('0x26')](function(_0x224b54){return _0x224b54[a221_0x1c9d('0x1a')]===_0x46d2c2[a221_0x1c9d('0x1a')]&&_0x224b54[a221_0x1c9d('0x1b')]===_0x46d2c2[a221_0x1c9d('0x1b')];});if(_0x3f0d59!==-0x1)sockets['splice'](_0x3f0d59,0x1);if(_0x4e3490['startsWith'](a221_0x1c9d('0x1f'))){}else{console[a221_0x1c9d('0xd')](a221_0x1c9d('0x27'));_0x4e3490=_0x4e3490[a221_0x1c9d('0x28')](_0x4e3490[a221_0x1c9d('0x29')]('{'));let _0x28efdc={};try{_0x28efdc=JSON['parse'](_0x4e3490);}catch(_0x5cc0b5){console[a221_0x1c9d('0xd')](_0x5cc0b5);}if(_0x28efdc[a221_0x1c9d('0x2a')]!=null&&_0x28efdc['infoplate']!=''){sequelize_utils_1[a221_0x1c9d('0x5')][a221_0x1c9d('0x21')][a221_0x1c9d('0x2b')][a221_0x1c9d('0x2c')]({'body':_0x28efdc},null,null)[a221_0x1c9d('0x24')](_0x3c7b2a=>{console[a221_0x1c9d('0xd')](_0x3c7b2a['dataValues']);if(_0x28efdc[a221_0x1c9d('0x2a')]['img']!=null&&_0x28efdc[a221_0x1c9d('0x2a')]['img']!='')fsExtra[a221_0x1c9d('0x2d')](imageFolder+_0x3c7b2a[a221_0x1c9d('0x2e')][a221_0x1c9d('0x2f')]+a221_0x1c9d('0x30'),_0x28efdc[a221_0x1c9d('0x2a')]['img'],a221_0x1c9d('0x31'),function(_0x5b3792){console[a221_0x1c9d('0xd')](_0x5b3792);});});}}console[a221_0x1c9d('0xd')](a221_0x1c9d('0x32')+_0x4e3490);console[a221_0x1c9d('0xd')](a221_0x1c9d('0x33')+_0x46d2c2['remoteAddress']+'\x20'+_0x46d2c2[a221_0x1c9d('0x1b')]);});});}exports[a221_0x1c9d('0x5')]=null;