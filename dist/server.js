var a221_0x1afd=['controllers','vehiclesCountController','report','dataValues','writeFile','uuid','.png','img','base64','CLOSED:\x20','defineProperty','errorhandler','./app','./infrastructure/sequelize-utils','fs-extra','default','use','EXPRESS_SERVICE_ENABLED','true','env','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','get','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','0.0.0.0','createServer','listen','vehiclesCount/','ensureDir','connection','CONNECTED:\x20','remotePort','startsWith','ST910','alarm','eventsController','reportEvent','then','alarm:\x20','close','findIndex','remoteAddress','splice','LPR','substr','indexOf','parse','infoplate'];(function(_0x5d04c4,_0x166fce){var _0x567306=function(_0x28f612){while(--_0x28f612){_0x5d04c4['push'](_0x5d04c4['shift']());}};_0x567306(++_0x166fce);}(a221_0x1afd,0x74));var a221_0x4ba8=function(_0x502cdc,_0x2eb7e8){_0x502cdc=_0x502cdc-0x0;var _0x2324bd=a221_0x1afd[_0x502cdc];return _0x2324bd;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x59a589){return _0x59a589&&_0x59a589['__esModule']?_0x59a589:{'default':_0x59a589};};Object[a221_0x4ba8('0x0')](exports,'__esModule',{'value':!![]});const errorhandler_1=__importDefault(require(a221_0x4ba8('0x1')));const app_1=__importDefault(require(a221_0x4ba8('0x2')));const sequelize_utils_1=__importDefault(require(a221_0x4ba8('0x3')));const fileOptimizationTask_1=__importDefault(require('./tasks/fileOptimizationTask'));const fsExtra=require(a221_0x4ba8('0x4'));app_1[a221_0x4ba8('0x5')][a221_0x4ba8('0x6')](errorhandler_1[a221_0x4ba8('0x5')]());const expressServiceEnabled=process['env'][a221_0x4ba8('0x7')]==a221_0x4ba8('0x8');const fileOptimizationEnabled=process[a221_0x4ba8('0x9')][a221_0x4ba8('0xa')]=='true';const socketServiceEnabled=process[a221_0x4ba8('0x9')][a221_0x4ba8('0xb')]==a221_0x4ba8('0x8');if(expressServiceEnabled){const server=app_1['default']['listen'](app_1[a221_0x4ba8('0x5')]['get'](a221_0x4ba8('0xc')),()=>{console[a221_0x4ba8('0xd')](a221_0x4ba8('0xe'),app_1['default'][a221_0x4ba8('0xf')](a221_0x4ba8('0xc')),app_1[a221_0x4ba8('0x5')]['get'](a221_0x4ba8('0x9')));console[a221_0x4ba8('0xd')](a221_0x4ba8('0x10'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1[(a221_0x4ba8('0x5'))]();fileOptimizationTask[a221_0x4ba8('0x11')]();}if(socketServiceEnabled){const net=require(a221_0x4ba8('0x12'));const port=0x46;const host=a221_0x4ba8('0x13');const fs=require('fs');const socketServer=net[a221_0x4ba8('0x14')]();socketServer[a221_0x4ba8('0x15')](port,host,()=>{console[a221_0x4ba8('0xd')]('TCP\x20Server\x20is\x20running\x20on\x20port\x20'+port+'.');});const imageFolder=process[a221_0x4ba8('0x9')]['IMAGE_FILES_FOLDER']+a221_0x4ba8('0x16');fsExtra[a221_0x4ba8('0x17')](imageFolder,_0x3f8f6b=>{console[a221_0x4ba8('0xd')](_0x3f8f6b);});const sockets=[];socketServer['on'](a221_0x4ba8('0x18'),function(_0x4e309f){console['log'](a221_0x4ba8('0x19')+_0x4e309f['remoteAddress']+':'+_0x4e309f[a221_0x4ba8('0x1a')]);let _0x319bf1='';_0x4e309f['on']('data',function(_0x2111c7){const _0x550d9a=String(_0x2111c7);console[a221_0x4ba8('0xd')]('******result:\x20');console[a221_0x4ba8('0xd')](_0x550d9a);_0x319bf1+=_0x550d9a;if(_0x550d9a[a221_0x4ba8('0x1b')](a221_0x4ba8('0x1c'))){console[a221_0x4ba8('0xd')](a221_0x4ba8('0x1d'));const _0x3ead3f={};sequelize_utils_1['default']['controllers'][a221_0x4ba8('0x1e')][a221_0x4ba8('0x1f')]({'body':{'data':''}},null,null)[a221_0x4ba8('0x20')](_0x15b931=>{console[a221_0x4ba8('0xd')](a221_0x4ba8('0x21'));console[a221_0x4ba8('0xd')](_0x15b931);});}});_0x4e309f['on'](a221_0x4ba8('0x22'),function(_0x385157){const _0x5990c1=sockets[a221_0x4ba8('0x23')](function(_0x21064c){return _0x21064c[a221_0x4ba8('0x24')]===_0x4e309f['remoteAddress']&&_0x21064c[a221_0x4ba8('0x1a')]===_0x4e309f[a221_0x4ba8('0x1a')];});if(_0x5990c1!==-0x1)sockets[a221_0x4ba8('0x25')](_0x5990c1,0x1);if(_0x319bf1[a221_0x4ba8('0x1b')](a221_0x4ba8('0x1c'))){}else{console[a221_0x4ba8('0xd')](a221_0x4ba8('0x26'));_0x319bf1=_0x319bf1[a221_0x4ba8('0x27')](_0x319bf1[a221_0x4ba8('0x28')]('{'));let _0x2cba6d={};try{_0x2cba6d=JSON[a221_0x4ba8('0x29')](_0x319bf1);}catch(_0x26b75e){console[a221_0x4ba8('0xd')](_0x26b75e);}if(_0x2cba6d['infoplate']!=null&&_0x2cba6d[a221_0x4ba8('0x2a')]!=''){sequelize_utils_1[a221_0x4ba8('0x5')][a221_0x4ba8('0x2b')][a221_0x4ba8('0x2c')][a221_0x4ba8('0x2d')]({'body':_0x2cba6d},null,null)[a221_0x4ba8('0x20')](_0x25a803=>{console[a221_0x4ba8('0xd')](_0x25a803[a221_0x4ba8('0x2e')]);if(_0x2cba6d[a221_0x4ba8('0x2a')]['img']!=null&&_0x2cba6d[a221_0x4ba8('0x2a')]['img']!='')fsExtra[a221_0x4ba8('0x2f')](imageFolder+_0x25a803[a221_0x4ba8('0x2e')][a221_0x4ba8('0x30')]+a221_0x4ba8('0x31'),_0x2cba6d[a221_0x4ba8('0x2a')][a221_0x4ba8('0x32')],a221_0x4ba8('0x33'),function(_0x3827ec){console[a221_0x4ba8('0xd')](_0x3827ec);});});}}console[a221_0x4ba8('0xd')]('fullData:\x20'+_0x319bf1);console[a221_0x4ba8('0xd')](a221_0x4ba8('0x34')+_0x4e309f[a221_0x4ba8('0x24')]+'\x20'+_0x4e309f[a221_0x4ba8('0x1a')]);});});}exports[a221_0x4ba8('0x5')]=null;