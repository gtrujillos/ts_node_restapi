var a116_0xa4f1=['infoplate','controllers','report','then','dataValues','img','writeFile','uuid','.png','base64','fullData:\x20','CLOSED:\x20','__importDefault','__esModule','defineProperty','errorhandler','./app','./infrastructure/sequelize-utils','fs-extra','use','env','EXPRESS_SERVICE_ENABLED','FILE_OPTIMIZATION_SERVICE_ENABLED','true','default','listen','get','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','log','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','vehiclesCount/','ensureDir','remoteAddress','******result:\x20','startsWith','ST910','alarmsController','alarm:\x20','findIndex','remotePort','splice','LPR','indexOf'];(function(_0x50a737,_0xff7723){var _0x128fab=function(_0x1fc0df){while(--_0x1fc0df){_0x50a737['push'](_0x50a737['shift']());}};_0x128fab(++_0xff7723);}(a116_0xa4f1,0x99));var a116_0x130e=function(_0x49b344,_0x2525ad){_0x49b344=_0x49b344-0x0;var _0x4eeae2=a116_0xa4f1[_0x49b344];return _0x4eeae2;};'use strict';var __importDefault=this&&this[a116_0x130e('0x0')]||function(_0x312022){return _0x312022&&_0x312022[a116_0x130e('0x1')]?_0x312022:{'default':_0x312022};};Object[a116_0x130e('0x2')](exports,a116_0x130e('0x1'),{'value':!![]});const errorhandler_1=__importDefault(require(a116_0x130e('0x3')));const app_1=__importDefault(require(a116_0x130e('0x4')));const sequelize_utils_1=__importDefault(require(a116_0x130e('0x5')));const fileOptimizationTask_1=__importDefault(require('./tasks/fileOptimizationTask'));const fsExtra=require(a116_0x130e('0x6'));app_1['default'][a116_0x130e('0x7')](errorhandler_1['default']());const expressServiceEnabled=process[a116_0x130e('0x8')][a116_0x130e('0x9')]=='true';const fileOptimizationEnabled=process['env'][a116_0x130e('0xa')]==a116_0x130e('0xb');const socketServiceEnabled=process[a116_0x130e('0x8')]['SOCKET_SERVICE_ENABLED']==a116_0x130e('0xb');if(expressServiceEnabled){const server=app_1[a116_0x130e('0xc')][a116_0x130e('0xd')](app_1['default'][a116_0x130e('0xe')]('port'),()=>{console['log'](a116_0x130e('0xf'),app_1['default'][a116_0x130e('0xe')]('port'),app_1[a116_0x130e('0xc')][a116_0x130e('0xe')](a116_0x130e('0x8')));console[a116_0x130e('0x10')](a116_0x130e('0x11'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1[(a116_0x130e('0xc'))]();fileOptimizationTask[a116_0x130e('0x12')]();}if(socketServiceEnabled){const net=require('net');const port=0x46;const host=a116_0x130e('0x13');const fs=require('fs');const socketServer=net[a116_0x130e('0x14')]();socketServer[a116_0x130e('0xd')](port,host,()=>{console[a116_0x130e('0x10')](a116_0x130e('0x15')+port+'.');});const imageFolder=process['env']['IMAGE_FILES_FOLDER']+a116_0x130e('0x16');fsExtra[a116_0x130e('0x17')](imageFolder,_0x45ef23=>{console[a116_0x130e('0x10')](_0x45ef23);});const sockets=[];socketServer['on']('connection',function(_0x179bab){console[a116_0x130e('0x10')]('CONNECTED:\x20'+_0x179bab[a116_0x130e('0x18')]+':'+_0x179bab['remotePort']);let _0x3f6124='';_0x179bab['on']('data',function(_0x2e376c){const _0x5973f0=String(_0x2e376c);console[a116_0x130e('0x10')](a116_0x130e('0x19'));console[a116_0x130e('0x10')](_0x5973f0);_0x3f6124+=_0x5973f0;if(_0x5973f0[a116_0x130e('0x1a')](a116_0x130e('0x1b'))){console[a116_0x130e('0x10')]('alarm');const _0x212ad8={};sequelize_utils_1[a116_0x130e('0xc')]['controllers'][a116_0x130e('0x1c')]['reportAlarm']({'body':{'data':''}},null,null)['then'](_0x374035=>{console[a116_0x130e('0x10')](a116_0x130e('0x1d'));console[a116_0x130e('0x10')](_0x374035);});}});_0x179bab['on']('close',function(_0x4f2dde){const _0x56cbeb=sockets[a116_0x130e('0x1e')](function(_0x517ce6){return _0x517ce6[a116_0x130e('0x18')]===_0x179bab[a116_0x130e('0x18')]&&_0x517ce6['remotePort']===_0x179bab[a116_0x130e('0x1f')];});if(_0x56cbeb!==-0x1)sockets[a116_0x130e('0x20')](_0x56cbeb,0x1);if(_0x3f6124['startsWith']('ST910')){}else{console['log'](a116_0x130e('0x21'));_0x3f6124=_0x3f6124['substr'](_0x3f6124[a116_0x130e('0x22')]('{'));let _0x30b4d2={};try{_0x30b4d2=JSON['parse'](_0x3f6124);}catch(_0x9bcd40){console['log'](_0x9bcd40);}if(_0x30b4d2['infoplate']!=null&&_0x30b4d2[a116_0x130e('0x23')]!=''){sequelize_utils_1[a116_0x130e('0xc')][a116_0x130e('0x24')]['vehiclesCountController'][a116_0x130e('0x25')]({'body':_0x30b4d2},null,null)[a116_0x130e('0x26')](_0x963eb9=>{console[a116_0x130e('0x10')](_0x963eb9[a116_0x130e('0x27')]);if(_0x30b4d2[a116_0x130e('0x23')][a116_0x130e('0x28')]!=null&&_0x30b4d2[a116_0x130e('0x23')][a116_0x130e('0x28')]!='')fsExtra[a116_0x130e('0x29')](imageFolder+_0x963eb9[a116_0x130e('0x27')][a116_0x130e('0x2a')]+a116_0x130e('0x2b'),_0x30b4d2[a116_0x130e('0x23')]['img'],a116_0x130e('0x2c'),function(_0x1ade3d){console['log'](_0x1ade3d);});});}}console['log'](a116_0x130e('0x2d')+_0x3f6124);console['log'](a116_0x130e('0x2e')+_0x179bab['remoteAddress']+'\x20'+_0x179bab[a116_0x130e('0x1f')]);});});}exports['default']=null;