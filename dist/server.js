var a198_0x5e6e=['CONNECTED:\x20','remoteAddress','remotePort','data','******result:\x20','startsWith','ST910','getInstance','eventsController','alarm:\x20','close','splice','LPR','substr','parse','infoplate','report','then','writeFile','dataValues','uuid','.png','img','base64','fullData:\x20','CLOSED:\x20','__importDefault','defineProperty','errorhandler','./tasks/fileOptimizationTask','./app/controllers','default','use','env','true','SOCKET_SERVICE_ENABLED','listen','get','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','TCP\x20Server\x20is\x20running\x20on\x20port\x20','FILES_FOLDER','vehiclesCount/','connection'];(function(_0x267048,_0x5b675b){var _0x363e7f=function(_0x1d676e){while(--_0x1d676e){_0x267048['push'](_0x267048['shift']());}};_0x363e7f(++_0x5b675b);}(a198_0x5e6e,0x7a));var a198_0x3795=function(_0x5ccfba,_0x1c1f54){_0x5ccfba=_0x5ccfba-0x0;var _0x355ed9=a198_0x5e6e[_0x5ccfba];return _0x355ed9;};'use strict';var __importDefault=this&&this[a198_0x3795('0x0')]||function(_0x211394){return _0x211394&&_0x211394['__esModule']?_0x211394:{'default':_0x211394};};Object[a198_0x3795('0x1')](exports,'__esModule',{'value':!![]});const errorhandler_1=__importDefault(require(a198_0x3795('0x2')));const app_1=__importDefault(require('./app'));const fileOptimizationTask_1=__importDefault(require(a198_0x3795('0x3')));const controllers_1=__importDefault(require(a198_0x3795('0x4')));const fsExtra=require('fs-extra');app_1[a198_0x3795('0x5')][a198_0x3795('0x6')](errorhandler_1[a198_0x3795('0x5')]());const expressServiceEnabled=process[a198_0x3795('0x7')]['EXPRESS_SERVICE_ENABLED']==a198_0x3795('0x8');const fileOptimizationEnabled=process['env']['FILE_OPTIMIZATION_SERVICE_ENABLED']==a198_0x3795('0x8');const socketServiceEnabled=process[a198_0x3795('0x7')][a198_0x3795('0x9')]==a198_0x3795('0x8');if(expressServiceEnabled){const server=app_1[a198_0x3795('0x5')][a198_0x3795('0xa')](app_1[a198_0x3795('0x5')][a198_0x3795('0xb')](a198_0x3795('0xc')),()=>{console[a198_0x3795('0xd')](a198_0x3795('0xe'),app_1[a198_0x3795('0x5')]['get'](a198_0x3795('0xc')),app_1['default'][a198_0x3795('0xb')](a198_0x3795('0x7')));console['log'](a198_0x3795('0xf'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1[(a198_0x3795('0x5'))]();fileOptimizationTask[a198_0x3795('0x10')]();}if(socketServiceEnabled){const net=require(a198_0x3795('0x11'));const port=0x46;const host='0.0.0.0';const fs=require('fs');const socketServer=net['createServer']();socketServer[a198_0x3795('0xa')](port,host,()=>{console[a198_0x3795('0xd')](a198_0x3795('0x12')+port+'.');});const imageFolder=process[a198_0x3795('0x7')][a198_0x3795('0x13')]+a198_0x3795('0x14');fsExtra['ensureDir'](imageFolder,_0x19a48b=>{console[a198_0x3795('0xd')](_0x19a48b);});const sockets=[];socketServer['on'](a198_0x3795('0x15'),function(_0x82e686){console[a198_0x3795('0xd')](a198_0x3795('0x16')+_0x82e686[a198_0x3795('0x17')]+':'+_0x82e686[a198_0x3795('0x18')]);let _0x17675e='';_0x82e686['on'](a198_0x3795('0x19'),function(_0x2cc8d4){const _0x37cfe2=String(_0x2cc8d4);console[a198_0x3795('0xd')](a198_0x3795('0x1a'));console[a198_0x3795('0xd')](_0x37cfe2);_0x17675e+=_0x37cfe2;if(_0x37cfe2[a198_0x3795('0x1b')](a198_0x3795('0x1c'))){console[a198_0x3795('0xd')]('alarm');const _0x44436b={};controllers_1[a198_0x3795('0x5')][a198_0x3795('0x1d')]()[a198_0x3795('0x1e')]['reportEvent']({'body':{'data':''}},null,null)['then'](_0x9bc520=>{console[a198_0x3795('0xd')](a198_0x3795('0x1f'));console[a198_0x3795('0xd')](_0x9bc520);});}});_0x82e686['on'](a198_0x3795('0x20'),function(_0xed4ec7){const _0x24331b=sockets['findIndex'](function(_0x2dcf91){return _0x2dcf91[a198_0x3795('0x17')]===_0x82e686[a198_0x3795('0x17')]&&_0x2dcf91[a198_0x3795('0x18')]===_0x82e686[a198_0x3795('0x18')];});if(_0x24331b!==-0x1)sockets[a198_0x3795('0x21')](_0x24331b,0x1);if(_0x17675e[a198_0x3795('0x1b')](a198_0x3795('0x1c'))){}else{console[a198_0x3795('0xd')](a198_0x3795('0x22'));_0x17675e=_0x17675e[a198_0x3795('0x23')](_0x17675e['indexOf']('{'));let _0x522a3e={};try{_0x522a3e=JSON[a198_0x3795('0x24')](_0x17675e);}catch(_0x321800){console[a198_0x3795('0xd')](_0x321800);}if(_0x522a3e['infoplate']!=null&&_0x522a3e[a198_0x3795('0x25')]!=''){controllers_1[a198_0x3795('0x5')][a198_0x3795('0x1d')]()['vehiclesCountController'][a198_0x3795('0x26')]({'body':_0x522a3e},null,null)[a198_0x3795('0x27')](_0x24ecd0=>{console['log'](_0x24ecd0['dataValues']);if(_0x522a3e[a198_0x3795('0x25')]['img']!=null&&_0x522a3e['infoplate']['img']!='')fsExtra[a198_0x3795('0x28')](imageFolder+_0x24ecd0[a198_0x3795('0x29')][a198_0x3795('0x2a')]+a198_0x3795('0x2b'),_0x522a3e[a198_0x3795('0x25')][a198_0x3795('0x2c')],a198_0x3795('0x2d'),function(_0x345666){console[a198_0x3795('0xd')](_0x345666);});});}}console['log'](a198_0x3795('0x2e')+_0x17675e);console[a198_0x3795('0xd')](a198_0x3795('0x2f')+_0x82e686['remoteAddress']+'\x20'+_0x82e686[a198_0x3795('0x18')]);});});}exports[a198_0x3795('0x5')]=null;