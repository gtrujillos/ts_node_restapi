var a110_0x225a=['data','******result:\x20','close','findIndex','remotePort','startsWith','ST910','alarm','LPR','substr','indexOf','parse','infoplate','controllers','report','then','dataValues','img','writeFile','.png','base64','CLOSED:\x20','__esModule','defineProperty','./app','fs-extra','default','use','env','true','listen','get','port','log','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','IMAGE_FILES_FOLDER','vehiclesCount/','ensureDir','connection','remoteAddress'];(function(_0x4b8eb7,_0x597eb0){var _0xb690c8=function(_0x42f0d9){while(--_0x42f0d9){_0x4b8eb7['push'](_0x4b8eb7['shift']());}};_0xb690c8(++_0x597eb0);}(a110_0x225a,0x9d));var a110_0x3968=function(_0x28e975,_0x3fa5b0){_0x28e975=_0x28e975-0x0;var _0x487a8a=a110_0x225a[_0x28e975];return _0x487a8a;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x481393){return _0x481393&&_0x481393[a110_0x3968('0x0')]?_0x481393:{'default':_0x481393};};Object[a110_0x3968('0x1')](exports,a110_0x3968('0x0'),{'value':!![]});const errorhandler_1=__importDefault(require('errorhandler'));const app_1=__importDefault(require(a110_0x3968('0x2')));const sequelize_utils_1=__importDefault(require('./infrastructure/sequelize-utils'));const fileOptimizationDemon_1=__importDefault(require('./tasks/fileOptimizationDemon'));const fsExtra=require(a110_0x3968('0x3'));app_1[a110_0x3968('0x4')][a110_0x3968('0x5')](errorhandler_1[a110_0x3968('0x4')]());const expressServiceEnabled=process[a110_0x3968('0x6')]['EXPRESS_SERVICE_ENABLED']==a110_0x3968('0x7');const fileOptimizationEnabled=process[a110_0x3968('0x6')]['FILE_OPTIMIZATION_SERVICE_ENABLED']=='true';const socketServiceEnabled=process['env']['SOCKET_SERVICE_ENABLED']==a110_0x3968('0x7');if(expressServiceEnabled){const server=app_1[a110_0x3968('0x4')][a110_0x3968('0x8')](app_1[a110_0x3968('0x4')][a110_0x3968('0x9')](a110_0x3968('0xa')),()=>{console[a110_0x3968('0xb')]('\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode',app_1[a110_0x3968('0x4')]['get'](a110_0x3968('0xa')),app_1[a110_0x3968('0x4')][a110_0x3968('0x9')](a110_0x3968('0x6')));console[a110_0x3968('0xb')](a110_0x3968('0xc'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x3968('0x4'))]();fileOptimizationTask[a110_0x3968('0xd')]();}if(socketServiceEnabled){const net=require(a110_0x3968('0xe'));const port=0x46;const host=a110_0x3968('0xf');const fs=require('fs');const socketServer=net[a110_0x3968('0x10')]();socketServer[a110_0x3968('0x8')](port,host,()=>{console[a110_0x3968('0xb')](a110_0x3968('0x11')+port+'.');});const imageFolder=process['env'][a110_0x3968('0x12')]+a110_0x3968('0x13');fsExtra[a110_0x3968('0x14')](imageFolder,_0x1f9b6f=>{console['log'](_0x1f9b6f);});const sockets=[];socketServer['on'](a110_0x3968('0x15'),function(_0x515681){console['log']('CONNECTED:\x20'+_0x515681[a110_0x3968('0x16')]+':'+_0x515681['remotePort']);let _0x337397='';_0x515681['on'](a110_0x3968('0x17'),function(_0x23f64e){const _0x7cbfb=String(_0x23f64e);console['log'](a110_0x3968('0x18'));console[a110_0x3968('0xb')](_0x7cbfb);_0x337397+=_0x7cbfb;});_0x515681['on'](a110_0x3968('0x19'),function(_0x3bc5a9){const _0xce1ad2=sockets[a110_0x3968('0x1a')](function(_0x346417){return _0x346417[a110_0x3968('0x16')]===_0x515681[a110_0x3968('0x16')]&&_0x346417[a110_0x3968('0x1b')]===_0x515681[a110_0x3968('0x1b')];});if(_0xce1ad2!==-0x1)sockets['splice'](_0xce1ad2,0x1);if(_0x337397[a110_0x3968('0x1c')](a110_0x3968('0x1d'))){console[a110_0x3968('0xb')](a110_0x3968('0x1e'));}else{console['log'](a110_0x3968('0x1f'));_0x337397=_0x337397[a110_0x3968('0x20')](_0x337397[a110_0x3968('0x21')]('{'));let _0x1f60ed={};try{_0x1f60ed=JSON[a110_0x3968('0x22')](_0x337397);}catch(_0x2fc123){console['log'](_0x2fc123);}if(_0x1f60ed[a110_0x3968('0x23')]!=null&&_0x1f60ed[a110_0x3968('0x23')]!=''){sequelize_utils_1[a110_0x3968('0x4')][a110_0x3968('0x24')]['vehiclesCountController'][a110_0x3968('0x25')]({'body':_0x1f60ed},null,null)[a110_0x3968('0x26')](_0x4e392f=>{console['log'](_0x4e392f[a110_0x3968('0x27')]);if(_0x1f60ed[a110_0x3968('0x23')]['img']!=null&&_0x1f60ed['infoplate'][a110_0x3968('0x28')]!='')fsExtra[a110_0x3968('0x29')](imageFolder+_0x4e392f['dataValues']['uuid']+a110_0x3968('0x2a'),_0x1f60ed['infoplate']['img'],a110_0x3968('0x2b'),function(_0x6c2dc8){console[a110_0x3968('0xb')](_0x6c2dc8);});});}}console['log']('fullData:\x20'+_0x337397);console[a110_0x3968('0xb')](a110_0x3968('0x2c')+_0x515681[a110_0x3968('0x16')]+'\x20'+_0x515681[a110_0x3968('0x1b')]);});});}exports[a110_0x3968('0x4')]=null;