var a198_0x5dc8=['CLOSED:\x20','__importDefault','__esModule','defineProperty','errorhandler','./tasks/fileOptimizationTask','./app/controllers','fs-extra','default','use','env','EXPRESS_SERVICE_ENABLED','true','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','listen','get','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','start','net','0.0.0.0','FILES_FOLDER','vehiclesCount/','connection','CONNECTED:\x20','remoteAddress','******result:\x20','startsWith','ST910','getInstance','eventsController','reportEvent','close','findIndex','remotePort','LPR','substr','indexOf','parse','infoplate','vehiclesCountController','dataValues','img','writeFile','.png','base64','fullData:\x20'];(function(_0x437834,_0x456582){var _0x3ee8a0=function(_0x2ad40f){while(--_0x2ad40f){_0x437834['push'](_0x437834['shift']());}};_0x3ee8a0(++_0x456582);}(a198_0x5dc8,0xc9));var a198_0x2b46=function(_0x58347d,_0x29364c){_0x58347d=_0x58347d-0x0;var _0x1c8b31=a198_0x5dc8[_0x58347d];return _0x1c8b31;};'use strict';var __importDefault=this&&this[a198_0x2b46('0x0')]||function(_0x3ecda8){return _0x3ecda8&&_0x3ecda8[a198_0x2b46('0x1')]?_0x3ecda8:{'default':_0x3ecda8};};Object[a198_0x2b46('0x2')](exports,a198_0x2b46('0x1'),{'value':!![]});const errorhandler_1=__importDefault(require(a198_0x2b46('0x3')));const app_1=__importDefault(require('./app'));const fileOptimizationTask_1=__importDefault(require(a198_0x2b46('0x4')));const controllers_1=__importDefault(require(a198_0x2b46('0x5')));const fsExtra=require(a198_0x2b46('0x6'));app_1[a198_0x2b46('0x7')][a198_0x2b46('0x8')](errorhandler_1[a198_0x2b46('0x7')]());const expressServiceEnabled=process[a198_0x2b46('0x9')][a198_0x2b46('0xa')]==a198_0x2b46('0xb');const fileOptimizationEnabled=process['env'][a198_0x2b46('0xc')]=='true';const socketServiceEnabled=process[a198_0x2b46('0x9')][a198_0x2b46('0xd')]==a198_0x2b46('0xb');if(expressServiceEnabled){const server=app_1[a198_0x2b46('0x7')][a198_0x2b46('0xe')](app_1[a198_0x2b46('0x7')][a198_0x2b46('0xf')](a198_0x2b46('0x10')),()=>{console[a198_0x2b46('0x11')](a198_0x2b46('0x12'),app_1[a198_0x2b46('0x7')][a198_0x2b46('0xf')](a198_0x2b46('0x10')),app_1[a198_0x2b46('0x7')]['get'](a198_0x2b46('0x9')));console[a198_0x2b46('0x11')](a198_0x2b46('0x13'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1['default']();fileOptimizationTask[a198_0x2b46('0x14')]();}if(socketServiceEnabled){const net=require(a198_0x2b46('0x15'));const port=0x46;const host=a198_0x2b46('0x16');const fs=require('fs');const socketServer=net['createServer']();socketServer['listen'](port,host,()=>{console['log']('TCP\x20Server\x20is\x20running\x20on\x20port\x20'+port+'.');});const imageFolder=process[a198_0x2b46('0x9')][a198_0x2b46('0x17')]+a198_0x2b46('0x18');fsExtra['ensureDir'](imageFolder,_0xa9f7ec=>{console[a198_0x2b46('0x11')](_0xa9f7ec);});const sockets=[];socketServer['on'](a198_0x2b46('0x19'),function(_0x20cc60){console['log'](a198_0x2b46('0x1a')+_0x20cc60[a198_0x2b46('0x1b')]+':'+_0x20cc60['remotePort']);let _0x5cf4ba='';_0x20cc60['on']('data',function(_0x5dbcbd){const _0x1405ee=String(_0x5dbcbd);console[a198_0x2b46('0x11')](a198_0x2b46('0x1c'));console[a198_0x2b46('0x11')](_0x1405ee);_0x5cf4ba+=_0x1405ee;if(_0x1405ee[a198_0x2b46('0x1d')](a198_0x2b46('0x1e'))){console[a198_0x2b46('0x11')]('alarm');const _0xfdedb={};controllers_1[a198_0x2b46('0x7')][a198_0x2b46('0x1f')]()[a198_0x2b46('0x20')][a198_0x2b46('0x21')]({'body':{'data':''}},null,null)['then'](_0x493859=>{console[a198_0x2b46('0x11')]('alarm:\x20');console['log'](_0x493859);});}});_0x20cc60['on'](a198_0x2b46('0x22'),function(_0x4bf7f4){const _0x2d6b3c=sockets[a198_0x2b46('0x23')](function(_0x3f28c8){return _0x3f28c8[a198_0x2b46('0x1b')]===_0x20cc60[a198_0x2b46('0x1b')]&&_0x3f28c8[a198_0x2b46('0x24')]===_0x20cc60['remotePort'];});if(_0x2d6b3c!==-0x1)sockets['splice'](_0x2d6b3c,0x1);if(_0x5cf4ba[a198_0x2b46('0x1d')](a198_0x2b46('0x1e'))){}else{console[a198_0x2b46('0x11')](a198_0x2b46('0x25'));_0x5cf4ba=_0x5cf4ba[a198_0x2b46('0x26')](_0x5cf4ba[a198_0x2b46('0x27')]('{'));let _0x2a5913={};try{_0x2a5913=JSON[a198_0x2b46('0x28')](_0x5cf4ba);}catch(_0x44ecb8){console[a198_0x2b46('0x11')](_0x44ecb8);}if(_0x2a5913[a198_0x2b46('0x29')]!=null&&_0x2a5913[a198_0x2b46('0x29')]!=''){controllers_1[a198_0x2b46('0x7')][a198_0x2b46('0x1f')]()[a198_0x2b46('0x2a')]['report']({'body':_0x2a5913},null,null)['then'](_0x2f12c0=>{console['log'](_0x2f12c0[a198_0x2b46('0x2b')]);if(_0x2a5913[a198_0x2b46('0x29')][a198_0x2b46('0x2c')]!=null&&_0x2a5913[a198_0x2b46('0x29')][a198_0x2b46('0x2c')]!='')fsExtra[a198_0x2b46('0x2d')](imageFolder+_0x2f12c0[a198_0x2b46('0x2b')]['uuid']+a198_0x2b46('0x2e'),_0x2a5913[a198_0x2b46('0x29')][a198_0x2b46('0x2c')],a198_0x2b46('0x2f'),function(_0x27857b){console['log'](_0x27857b);});});}}console[a198_0x2b46('0x11')](a198_0x2b46('0x30')+_0x5cf4ba);console['log'](a198_0x2b46('0x31')+_0x20cc60['remoteAddress']+'\x20'+_0x20cc60[a198_0x2b46('0x24')]);});});}exports[a198_0x2b46('0x7')]=null;