var a221_0x823e=['dataValues','img','writeFile','uuid','base64','fullData:\x20','__importDefault','__esModule','defineProperty','errorhandler','./app','./infrastructure/sequelize-utils','./tasks/fileOptimizationTask','fs-extra','default','env','true','FILE_OPTIMIZATION_SERVICE_ENABLED','SOCKET_SERVICE_ENABLED','listen','get','port','log','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','IMAGE_FILES_FOLDER','vehiclesCount/','ensureDir','connection','CONNECTED:\x20','remoteAddress','remotePort','data','******result:\x20','ST910','alarm','controllers','eventsController','reportEvent','then','alarm:\x20','close','splice','LPR','indexOf','parse','infoplate','vehiclesCountController'];(function(_0x1b95af,_0x1a6d8f){var _0x31fcc7=function(_0x4fb10e){while(--_0x4fb10e){_0x1b95af['push'](_0x1b95af['shift']());}};_0x31fcc7(++_0x1a6d8f);}(a221_0x823e,0x9f));var a221_0x5eb8=function(_0xc01507,_0x1aa72c){_0xc01507=_0xc01507-0x0;var _0x374fcd=a221_0x823e[_0xc01507];return _0x374fcd;};'use strict';var __importDefault=this&&this[a221_0x5eb8('0x0')]||function(_0x37cbce){return _0x37cbce&&_0x37cbce[a221_0x5eb8('0x1')]?_0x37cbce:{'default':_0x37cbce};};Object[a221_0x5eb8('0x2')](exports,a221_0x5eb8('0x1'),{'value':!![]});const errorhandler_1=__importDefault(require(a221_0x5eb8('0x3')));const app_1=__importDefault(require(a221_0x5eb8('0x4')));const sequelize_utils_1=__importDefault(require(a221_0x5eb8('0x5')));const fileOptimizationTask_1=__importDefault(require(a221_0x5eb8('0x6')));const fsExtra=require(a221_0x5eb8('0x7'));app_1[a221_0x5eb8('0x8')]['use'](errorhandler_1[a221_0x5eb8('0x8')]());const expressServiceEnabled=process[a221_0x5eb8('0x9')]['EXPRESS_SERVICE_ENABLED']==a221_0x5eb8('0xa');const fileOptimizationEnabled=process[a221_0x5eb8('0x9')][a221_0x5eb8('0xb')]==a221_0x5eb8('0xa');const socketServiceEnabled=process['env'][a221_0x5eb8('0xc')]==a221_0x5eb8('0xa');if(expressServiceEnabled){const server=app_1['default'][a221_0x5eb8('0xd')](app_1['default'][a221_0x5eb8('0xe')](a221_0x5eb8('0xf')),()=>{console['log']('\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode',app_1[a221_0x5eb8('0x8')][a221_0x5eb8('0xe')]('port'),app_1[a221_0x5eb8('0x8')][a221_0x5eb8('0xe')]('env'));console[a221_0x5eb8('0x10')](a221_0x5eb8('0x11'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationTask_1['default']();fileOptimizationTask['start']();}if(socketServiceEnabled){const net=require(a221_0x5eb8('0x12'));const port=0x46;const host=a221_0x5eb8('0x13');const fs=require('fs');const socketServer=net[a221_0x5eb8('0x14')]();socketServer[a221_0x5eb8('0xd')](port,host,()=>{console[a221_0x5eb8('0x10')](a221_0x5eb8('0x15')+port+'.');});const imageFolder=process[a221_0x5eb8('0x9')][a221_0x5eb8('0x16')]+a221_0x5eb8('0x17');fsExtra[a221_0x5eb8('0x18')](imageFolder,_0x5915ad=>{console[a221_0x5eb8('0x10')](_0x5915ad);});const sockets=[];socketServer['on'](a221_0x5eb8('0x19'),function(_0x7df76d){console[a221_0x5eb8('0x10')](a221_0x5eb8('0x1a')+_0x7df76d[a221_0x5eb8('0x1b')]+':'+_0x7df76d[a221_0x5eb8('0x1c')]);let _0x40b001='';_0x7df76d['on'](a221_0x5eb8('0x1d'),function(_0xcf13f2){const _0x4bb57e=String(_0xcf13f2);console[a221_0x5eb8('0x10')](a221_0x5eb8('0x1e'));console[a221_0x5eb8('0x10')](_0x4bb57e);_0x40b001+=_0x4bb57e;if(_0x4bb57e['startsWith'](a221_0x5eb8('0x1f'))){console[a221_0x5eb8('0x10')](a221_0x5eb8('0x20'));const _0x3b8cf7={};sequelize_utils_1[a221_0x5eb8('0x8')][a221_0x5eb8('0x21')][a221_0x5eb8('0x22')][a221_0x5eb8('0x23')]({'body':{'data':''}},null,null)[a221_0x5eb8('0x24')](_0x36c486=>{console[a221_0x5eb8('0x10')](a221_0x5eb8('0x25'));console['log'](_0x36c486);});}});_0x7df76d['on'](a221_0x5eb8('0x26'),function(_0x21ab50){const _0x541c77=sockets['findIndex'](function(_0xce9af6){return _0xce9af6[a221_0x5eb8('0x1b')]===_0x7df76d[a221_0x5eb8('0x1b')]&&_0xce9af6[a221_0x5eb8('0x1c')]===_0x7df76d[a221_0x5eb8('0x1c')];});if(_0x541c77!==-0x1)sockets[a221_0x5eb8('0x27')](_0x541c77,0x1);if(_0x40b001['startsWith']('ST910')){}else{console[a221_0x5eb8('0x10')](a221_0x5eb8('0x28'));_0x40b001=_0x40b001['substr'](_0x40b001[a221_0x5eb8('0x29')]('{'));let _0x424b4c={};try{_0x424b4c=JSON[a221_0x5eb8('0x2a')](_0x40b001);}catch(_0x32fc7d){console[a221_0x5eb8('0x10')](_0x32fc7d);}if(_0x424b4c[a221_0x5eb8('0x2b')]!=null&&_0x424b4c[a221_0x5eb8('0x2b')]!=''){sequelize_utils_1['default']['controllers'][a221_0x5eb8('0x2c')]['report']({'body':_0x424b4c},null,null)[a221_0x5eb8('0x24')](_0x830bad=>{console['log'](_0x830bad[a221_0x5eb8('0x2d')]);if(_0x424b4c[a221_0x5eb8('0x2b')]['img']!=null&&_0x424b4c[a221_0x5eb8('0x2b')][a221_0x5eb8('0x2e')]!='')fsExtra[a221_0x5eb8('0x2f')](imageFolder+_0x830bad[a221_0x5eb8('0x2d')][a221_0x5eb8('0x30')]+'.png',_0x424b4c[a221_0x5eb8('0x2b')]['img'],a221_0x5eb8('0x31'),function(_0x1ef388){console[a221_0x5eb8('0x10')](_0x1ef388);});});}}console['log'](a221_0x5eb8('0x32')+_0x40b001);console[a221_0x5eb8('0x10')]('CLOSED:\x20'+_0x7df76d[a221_0x5eb8('0x1b')]+'\x20'+_0x7df76d[a221_0x5eb8('0x1c')]);});});}exports[a221_0x5eb8('0x8')]=null;