var a110_0x24d6=['start','net','0.0.0.0','createServer','TCP\x20Server\x20is\x20running\x20on\x20port\x20','media/vehiclesCount/','ensureDir','CONNECTED:\x20','remoteAddress','remotePort','data','close','findIndex','splice','startsWith','ST910','LPR','indexOf','infoplate','controllers','report','then','dataValues','img','writeFile','.png','base64','fullData:\x20','__importDefault','__esModule','errorhandler','./app','./infrastructure/sequelize-utils','./tasks/fileOptimizationDemon','fs-extra','use','default','env','EXPRESS_SERVICE_ENABLED','FILE_OPTIMIZATION_SERVICE_ENABLED','true','SOCKET_SERVICE_ENABLED','get','port','log','\x20\x20App\x20is\x20running\x20at\x20http://localhost:%d\x20in\x20%s\x20mode','\x20\x20Press\x20CTRL-C\x20to\x20stop\x0a'];(function(_0x583c26,_0x2beec7){var _0x3f1149=function(_0x55733a){while(--_0x55733a){_0x583c26['push'](_0x583c26['shift']());}};_0x3f1149(++_0x2beec7);}(a110_0x24d6,0xa9));var a110_0x203a=function(_0x41f991,_0x5b203e){_0x41f991=_0x41f991-0x0;var _0x2b09d3=a110_0x24d6[_0x41f991];return _0x2b09d3;};'use strict';var __importDefault=this&&this[a110_0x203a('0x0')]||function(_0x56696d){return _0x56696d&&_0x56696d[a110_0x203a('0x1')]?_0x56696d:{'default':_0x56696d};};Object['defineProperty'](exports,a110_0x203a('0x1'),{'value':!![]});const errorhandler_1=__importDefault(require(a110_0x203a('0x2')));const app_1=__importDefault(require(a110_0x203a('0x3')));const sequelize_utils_1=__importDefault(require(a110_0x203a('0x4')));const fileOptimizationDemon_1=__importDefault(require(a110_0x203a('0x5')));const fsExtra=require(a110_0x203a('0x6'));app_1['default'][a110_0x203a('0x7')](errorhandler_1[a110_0x203a('0x8')]());const expressServiceEnabled=process[a110_0x203a('0x9')][a110_0x203a('0xa')]=='true';const fileOptimizationEnabled=process['env'][a110_0x203a('0xb')]==a110_0x203a('0xc');const socketServiceEnabled=process[a110_0x203a('0x9')][a110_0x203a('0xd')]==a110_0x203a('0xc');if(expressServiceEnabled){const server=app_1['default']['listen'](app_1[a110_0x203a('0x8')][a110_0x203a('0xe')](a110_0x203a('0xf')),()=>{console[a110_0x203a('0x10')](a110_0x203a('0x11'),app_1[a110_0x203a('0x8')][a110_0x203a('0xe')]('port'),app_1[a110_0x203a('0x8')][a110_0x203a('0xe')](a110_0x203a('0x9')));console['log'](a110_0x203a('0x12'));});}if(fileOptimizationEnabled){const fileOptimizationTask=new fileOptimizationDemon_1[(a110_0x203a('0x8'))]();fileOptimizationTask[a110_0x203a('0x13')]();}if(socketServiceEnabled){const net=require(a110_0x203a('0x14'));const port=0x46;const host=a110_0x203a('0x15');const fs=require('fs');const socketServer=net[a110_0x203a('0x16')]();socketServer['listen'](port,host,()=>{console[a110_0x203a('0x10')](a110_0x203a('0x17')+port+'.');});const imageFolder=a110_0x203a('0x18');fsExtra[a110_0x203a('0x19')](imageFolder,_0x4ba4f1=>{console[a110_0x203a('0x10')](_0x4ba4f1);});const sockets=[];socketServer['on']('connection',function(_0x211a30){console[a110_0x203a('0x10')](a110_0x203a('0x1a')+_0x211a30[a110_0x203a('0x1b')]+':'+_0x211a30[a110_0x203a('0x1c')]);let _0xe47707='';_0x211a30['on'](a110_0x203a('0x1d'),function(_0x2d314a){const _0x90ed8c=String(_0x2d314a);_0xe47707+=_0x90ed8c;});_0x211a30['on'](a110_0x203a('0x1e'),function(_0x2c4a85){const _0x3f847f=sockets[a110_0x203a('0x1f')](function(_0x41dc15){return _0x41dc15[a110_0x203a('0x1b')]===_0x211a30[a110_0x203a('0x1b')]&&_0x41dc15[a110_0x203a('0x1c')]===_0x211a30[a110_0x203a('0x1c')];});if(_0x3f847f!==-0x1)sockets[a110_0x203a('0x20')](_0x3f847f,0x1);if(_0xe47707[a110_0x203a('0x21')](a110_0x203a('0x22'))){console[a110_0x203a('0x10')]('alarm');}else{console[a110_0x203a('0x10')](a110_0x203a('0x23'));_0xe47707=_0xe47707['substr'](_0xe47707[a110_0x203a('0x24')]('{'));let _0x1a7225={};try{_0x1a7225=JSON['parse'](_0xe47707);}catch(_0x58f16b){console[a110_0x203a('0x10')](_0x58f16b);}if(_0x1a7225[a110_0x203a('0x25')]!=null&&_0x1a7225[a110_0x203a('0x25')]!=''){sequelize_utils_1[a110_0x203a('0x8')][a110_0x203a('0x26')]['vehiclesCountController'][a110_0x203a('0x27')]({'body':_0x1a7225},null,null)[a110_0x203a('0x28')](_0x2d9288=>{console[a110_0x203a('0x10')](_0x2d9288[a110_0x203a('0x29')]);if(_0x1a7225[a110_0x203a('0x2a')]!=null&&_0x1a7225[a110_0x203a('0x2a')]!='')fsExtra[a110_0x203a('0x2b')](imageFolder+_0x2d9288['id']+a110_0x203a('0x2c'),_0x1a7225[a110_0x203a('0x2a')],a110_0x203a('0x2d'),function(_0xf6dbb7){console[a110_0x203a('0x10')](_0xf6dbb7);});});}}console[a110_0x203a('0x10')](a110_0x203a('0x2e')+_0xe47707);console[a110_0x203a('0x10')]('CLOSED:\x20'+_0x211a30[a110_0x203a('0x1b')]+'\x20'+_0x211a30[a110_0x203a('0x1c')]);});});}exports['default']=null;