var a105_0x7164=['email','&d=retro','md5','update','hex','https://gravatar.com/avatar/','model','__importDefault','__esModule','defineProperty','bcrypt-nodejs','crypto','mongoose','Schema','save','isModified','default','genSalt','hash','password','compare','methods','comparePassword'];(function(_0x454fe4,_0x2b4d7a){var _0x2cf053=function(_0x41ce4a){while(--_0x41ce4a){_0x454fe4['push'](_0x454fe4['shift']());}};_0x2cf053(++_0x2b4d7a);}(a105_0x7164,0x149));var a105_0x363c=function(_0x2e56ce,_0x27ba19){_0x2e56ce=_0x2e56ce-0x0;var _0x3673e5=a105_0x7164[_0x2e56ce];return _0x3673e5;};'use strict';var __importDefault=this&&this[a105_0x363c('0x0')]||function(_0x6d991a){return _0x6d991a&&_0x6d991a[a105_0x363c('0x1')]?_0x6d991a:{'default':_0x6d991a};};Object[a105_0x363c('0x2')](exports,a105_0x363c('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a105_0x363c('0x3')));const crypto_1=__importDefault(require(a105_0x363c('0x4')));const mongoose_1=__importDefault(require(a105_0x363c('0x5')));const userSchema=new mongoose_1['default'][(a105_0x363c('0x6'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre'](a105_0x363c('0x7'),function save(_0xe16342){const _0x50999a=this;if(!_0x50999a[a105_0x363c('0x8')]('password')){return _0xe16342();}bcrypt_nodejs_1[a105_0x363c('0x9')][a105_0x363c('0xa')](0xa,(_0x49b50e,_0xf9af25)=>{if(_0x49b50e){return _0xe16342(_0x49b50e);}bcrypt_nodejs_1[a105_0x363c('0x9')][a105_0x363c('0xb')](_0x50999a[a105_0x363c('0xc')],_0xf9af25,undefined,(_0x49b50e,_0x2b7182)=>{if(_0x49b50e){return _0xe16342(_0x49b50e);}_0x50999a[a105_0x363c('0xc')]=_0x2b7182;_0xe16342();});});});const comparePassword=function(_0xebb62a,_0x2f2545){bcrypt_nodejs_1[a105_0x363c('0x9')][a105_0x363c('0xd')](_0xebb62a,this['password'],(_0x1c360c,_0x861c98)=>{_0x2f2545(_0x1c360c,_0x861c98);});};userSchema[a105_0x363c('0xe')][a105_0x363c('0xf')]=comparePassword;userSchema[a105_0x363c('0xe')]['gravatar']=function(_0x2f1301){if(!_0x2f1301){_0x2f1301=0xc8;}if(!this[a105_0x363c('0x10')]){return'https://gravatar.com/avatar/?s='+_0x2f1301+a105_0x363c('0x11');}const _0x3c41b4=crypto_1['default']['createHash'](a105_0x363c('0x12'))[a105_0x363c('0x13')](this['email'])['digest'](a105_0x363c('0x14'));return a105_0x363c('0x15')+_0x3c41b4+'?s='+_0x2f1301+a105_0x363c('0x11');};const User=mongoose_1[a105_0x363c('0x9')][a105_0x363c('0x16')]('User',userSchema);exports['default']=User;