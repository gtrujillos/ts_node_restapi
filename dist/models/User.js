var a97_0x5473=['https://gravatar.com/avatar/?s=','&d=retro','createHash','md5','update','digest','hex','?s=','User','__importDefault','defineProperty','__esModule','bcrypt-nodejs','mongoose','Schema','pre','save','isModified','password','default','genSalt','hash','compare','methods','gravatar','email'];(function(_0x4ee025,_0x5f1755){var _0x5ef862=function(_0x38e9ae){while(--_0x38e9ae){_0x4ee025['push'](_0x4ee025['shift']());}};_0x5ef862(++_0x5f1755);}(a97_0x5473,0x1a9));var a97_0x27ad=function(_0x7c1e56,_0x59b661){_0x7c1e56=_0x7c1e56-0x0;var _0x172b12=a97_0x5473[_0x7c1e56];return _0x172b12;};'use strict';var __importDefault=this&&this[a97_0x27ad('0x0')]||function(_0x3a9293){return _0x3a9293&&_0x3a9293['__esModule']?_0x3a9293:{'default':_0x3a9293};};Object[a97_0x27ad('0x1')](exports,a97_0x27ad('0x2'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a97_0x27ad('0x3')));const crypto_1=__importDefault(require('crypto'));const mongoose_1=__importDefault(require(a97_0x27ad('0x4')));const userSchema=new mongoose_1['default'][(a97_0x27ad('0x5'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a97_0x27ad('0x6')](a97_0x27ad('0x7'),function save(_0x6907dd){const _0x163b66=this;if(!_0x163b66[a97_0x27ad('0x8')](a97_0x27ad('0x9'))){return _0x6907dd();}bcrypt_nodejs_1[a97_0x27ad('0xa')][a97_0x27ad('0xb')](0xa,(_0x29388b,_0x7cf106)=>{if(_0x29388b){return _0x6907dd(_0x29388b);}bcrypt_nodejs_1['default'][a97_0x27ad('0xc')](_0x163b66[a97_0x27ad('0x9')],_0x7cf106,undefined,(_0x29388b,_0x375ef7)=>{if(_0x29388b){return _0x6907dd(_0x29388b);}_0x163b66['password']=_0x375ef7;_0x6907dd();});});});const comparePassword=function(_0x4e1424,_0x4c977a){bcrypt_nodejs_1[a97_0x27ad('0xa')][a97_0x27ad('0xd')](_0x4e1424,this['password'],(_0x1900f3,_0x405493)=>{_0x4c977a(_0x1900f3,_0x405493);});};userSchema[a97_0x27ad('0xe')]['comparePassword']=comparePassword;userSchema[a97_0x27ad('0xe')][a97_0x27ad('0xf')]=function(_0x3ab3bd){if(!_0x3ab3bd){_0x3ab3bd=0xc8;}if(!this[a97_0x27ad('0x10')]){return a97_0x27ad('0x11')+_0x3ab3bd+a97_0x27ad('0x12');}const _0x2bd32f=crypto_1['default'][a97_0x27ad('0x13')](a97_0x27ad('0x14'))[a97_0x27ad('0x15')](this['email'])[a97_0x27ad('0x16')](a97_0x27ad('0x17'));return'https://gravatar.com/avatar/'+_0x2bd32f+a97_0x27ad('0x18')+_0x3ab3bd+a97_0x27ad('0x12');};const User=mongoose_1[a97_0x27ad('0xa')]['model'](a97_0x27ad('0x19'),userSchema);exports[a97_0x27ad('0xa')]=User;