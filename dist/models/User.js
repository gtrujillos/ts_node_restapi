var a104_0x5754=['pre','isModified','default','genSalt','hash','password','email','&d=retro','createHash','md5','update','digest','https://gravatar.com/avatar/','?s=','model','User','__importDefault','__esModule','defineProperty','bcrypt-nodejs','crypto','mongoose'];(function(_0x3de74d,_0x2b0193){var _0x299e03=function(_0x1850ef){while(--_0x1850ef){_0x3de74d['push'](_0x3de74d['shift']());}};_0x299e03(++_0x2b0193);}(a104_0x5754,0xc0));var a104_0x413c=function(_0x3babb8,_0x5ef1d7){_0x3babb8=_0x3babb8-0x0;var _0x5d39de=a104_0x5754[_0x3babb8];return _0x5d39de;};'use strict';var __importDefault=this&&this[a104_0x413c('0x0')]||function(_0x2245e5){return _0x2245e5&&_0x2245e5[a104_0x413c('0x1')]?_0x2245e5:{'default':_0x2245e5};};Object[a104_0x413c('0x2')](exports,a104_0x413c('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a104_0x413c('0x3')));const crypto_1=__importDefault(require(a104_0x413c('0x4')));const mongoose_1=__importDefault(require(a104_0x413c('0x5')));const userSchema=new mongoose_1['default']['Schema']({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a104_0x413c('0x6')]('save',function save(_0x22ae81){const _0x40e4b1=this;if(!_0x40e4b1[a104_0x413c('0x7')]('password')){return _0x22ae81();}bcrypt_nodejs_1[a104_0x413c('0x8')][a104_0x413c('0x9')](0xa,(_0xefad97,_0x110e43)=>{if(_0xefad97){return _0x22ae81(_0xefad97);}bcrypt_nodejs_1[a104_0x413c('0x8')][a104_0x413c('0xa')](_0x40e4b1[a104_0x413c('0xb')],_0x110e43,undefined,(_0xefad97,_0x52cf86)=>{if(_0xefad97){return _0x22ae81(_0xefad97);}_0x40e4b1[a104_0x413c('0xb')]=_0x52cf86;_0x22ae81();});});});const comparePassword=function(_0x431df6,_0x516384){bcrypt_nodejs_1[a104_0x413c('0x8')]['compare'](_0x431df6,this['password'],(_0x4ef35e,_0x341fce)=>{_0x516384(_0x4ef35e,_0x341fce);});};userSchema['methods']['comparePassword']=comparePassword;userSchema['methods']['gravatar']=function(_0x2e01e2){if(!_0x2e01e2){_0x2e01e2=0xc8;}if(!this[a104_0x413c('0xc')]){return'https://gravatar.com/avatar/?s='+_0x2e01e2+a104_0x413c('0xd');}const _0x49269a=crypto_1[a104_0x413c('0x8')][a104_0x413c('0xe')](a104_0x413c('0xf'))[a104_0x413c('0x10')](this[a104_0x413c('0xc')])[a104_0x413c('0x11')]('hex');return a104_0x413c('0x12')+_0x49269a+a104_0x413c('0x13')+_0x2e01e2+a104_0x413c('0xd');};const User=mongoose_1['default'][a104_0x413c('0x14')](a104_0x413c('0x15'),userSchema);exports[a104_0x413c('0x8')]=User;