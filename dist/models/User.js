var a216_0x48ab=['model','User','__esModule','defineProperty','bcrypt-nodejs','pre','save','password','default','methods','gravatar','email','https://gravatar.com/avatar/?s=','&d=retro','createHash','md5','digest','hex','https://gravatar.com/avatar/'];(function(_0x16a834,_0x276c99){var _0x2bce2b=function(_0x2d7cf1){while(--_0x2d7cf1){_0x16a834['push'](_0x16a834['shift']());}};_0x2bce2b(++_0x276c99);}(a216_0x48ab,0x74));var a216_0x5b2a=function(_0x3acdf2,_0x2953cd){_0x3acdf2=_0x3acdf2-0x0;var _0x22dec2=a216_0x48ab[_0x3acdf2];return _0x22dec2;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x46093e){return _0x46093e&&_0x46093e[a216_0x5b2a('0x0')]?_0x46093e:{'default':_0x46093e};};Object[a216_0x5b2a('0x1')](exports,a216_0x5b2a('0x0'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a216_0x5b2a('0x2')));const crypto_1=__importDefault(require('crypto'));const mongoose_1=__importDefault(require('mongoose'));const userSchema=new mongoose_1['default']['Schema']({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a216_0x5b2a('0x3')](a216_0x5b2a('0x4'),function save(_0x180a4c){const _0x9c03df=this;if(!_0x9c03df['isModified'](a216_0x5b2a('0x5'))){return _0x180a4c();}bcrypt_nodejs_1[a216_0x5b2a('0x6')]['genSalt'](0xa,(_0x3ddad0,_0xdc803a)=>{if(_0x3ddad0){return _0x180a4c(_0x3ddad0);}bcrypt_nodejs_1[a216_0x5b2a('0x6')]['hash'](_0x9c03df[a216_0x5b2a('0x5')],_0xdc803a,undefined,(_0x3ddad0,_0x5cb09)=>{if(_0x3ddad0){return _0x180a4c(_0x3ddad0);}_0x9c03df[a216_0x5b2a('0x5')]=_0x5cb09;_0x180a4c();});});});const comparePassword=function(_0x5598d1,_0xf7c285){bcrypt_nodejs_1['default']['compare'](_0x5598d1,this['password'],(_0x57ba6d,_0x948c6f)=>{_0xf7c285(_0x57ba6d,_0x948c6f);});};userSchema['methods']['comparePassword']=comparePassword;userSchema[a216_0x5b2a('0x7')][a216_0x5b2a('0x8')]=function(_0x2b7f8a){if(!_0x2b7f8a){_0x2b7f8a=0xc8;}if(!this[a216_0x5b2a('0x9')]){return a216_0x5b2a('0xa')+_0x2b7f8a+a216_0x5b2a('0xb');}const _0x50a855=crypto_1['default'][a216_0x5b2a('0xc')](a216_0x5b2a('0xd'))['update'](this['email'])[a216_0x5b2a('0xe')](a216_0x5b2a('0xf'));return a216_0x5b2a('0x10')+_0x50a855+'?s='+_0x2b7f8a+a216_0x5b2a('0xb');};const User=mongoose_1['default'][a216_0x5b2a('0x11')](a216_0x5b2a('0x12'),userSchema);exports[a216_0x5b2a('0x6')]=User;