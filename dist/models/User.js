var a105_0x46fe=['digest','hex','User','__importDefault','__esModule','defineProperty','bcrypt-nodejs','mongoose','default','Schema','hash','password','compare','methods','comparePassword','gravatar','https://gravatar.com/avatar/?s=','&d=retro','createHash','update','email'];(function(_0xdada4a,_0xeea62){var _0x449f96=function(_0x2ea272){while(--_0x2ea272){_0xdada4a['push'](_0xdada4a['shift']());}};_0x449f96(++_0xeea62);}(a105_0x46fe,0x96));var a105_0x49c3=function(_0x2f3e31,_0x3a89c9){_0x2f3e31=_0x2f3e31-0x0;var _0x2c6db2=a105_0x46fe[_0x2f3e31];return _0x2c6db2;};'use strict';var __importDefault=this&&this[a105_0x49c3('0x0')]||function(_0xa98c1c){return _0xa98c1c&&_0xa98c1c[a105_0x49c3('0x1')]?_0xa98c1c:{'default':_0xa98c1c};};Object[a105_0x49c3('0x2')](exports,a105_0x49c3('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a105_0x49c3('0x3')));const crypto_1=__importDefault(require('crypto'));const mongoose_1=__importDefault(require(a105_0x49c3('0x4')));const userSchema=new mongoose_1[(a105_0x49c3('0x5'))][(a105_0x49c3('0x6'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre']('save',function save(_0x490f13){const _0x4af497=this;if(!_0x4af497['isModified']('password')){return _0x490f13();}bcrypt_nodejs_1[a105_0x49c3('0x5')]['genSalt'](0xa,(_0x18ad23,_0x7a746c)=>{if(_0x18ad23){return _0x490f13(_0x18ad23);}bcrypt_nodejs_1[a105_0x49c3('0x5')][a105_0x49c3('0x7')](_0x4af497[a105_0x49c3('0x8')],_0x7a746c,undefined,(_0x18ad23,_0x33e991)=>{if(_0x18ad23){return _0x490f13(_0x18ad23);}_0x4af497['password']=_0x33e991;_0x490f13();});});});const comparePassword=function(_0x5549d1,_0x5b36af){bcrypt_nodejs_1['default'][a105_0x49c3('0x9')](_0x5549d1,this['password'],(_0x260c8c,_0x369006)=>{_0x5b36af(_0x260c8c,_0x369006);});};userSchema[a105_0x49c3('0xa')][a105_0x49c3('0xb')]=comparePassword;userSchema[a105_0x49c3('0xa')][a105_0x49c3('0xc')]=function(_0x5c0161){if(!_0x5c0161){_0x5c0161=0xc8;}if(!this['email']){return a105_0x49c3('0xd')+_0x5c0161+a105_0x49c3('0xe');}const _0x155d15=crypto_1[a105_0x49c3('0x5')][a105_0x49c3('0xf')]('md5')[a105_0x49c3('0x10')](this[a105_0x49c3('0x11')])[a105_0x49c3('0x12')](a105_0x49c3('0x13'));return'https://gravatar.com/avatar/'+_0x155d15+'?s='+_0x5c0161+a105_0x49c3('0xe');};const User=mongoose_1[a105_0x49c3('0x5')]['model'](a105_0x49c3('0x14'),userSchema);exports[a105_0x49c3('0x5')]=User;