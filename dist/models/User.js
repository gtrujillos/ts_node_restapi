var a105_0x1d54=['&d=retro','md5','update','email','digest','hex','https://gravatar.com/avatar/','model','User','__importDefault','__esModule','defineProperty','crypto','default','Schema','pre','isModified','password','genSalt','hash','methods','comparePassword'];(function(_0x205a1d,_0x284438){var _0x101c53=function(_0x3ff042){while(--_0x3ff042){_0x205a1d['push'](_0x205a1d['shift']());}};_0x101c53(++_0x284438);}(a105_0x1d54,0x195));var a105_0x5ae5=function(_0x1929fe,_0x3927c4){_0x1929fe=_0x1929fe-0x0;var _0x451126=a105_0x1d54[_0x1929fe];return _0x451126;};'use strict';var __importDefault=this&&this[a105_0x5ae5('0x0')]||function(_0xe884d2){return _0xe884d2&&_0xe884d2[a105_0x5ae5('0x1')]?_0xe884d2:{'default':_0xe884d2};};Object[a105_0x5ae5('0x2')](exports,a105_0x5ae5('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require('bcrypt-nodejs'));const crypto_1=__importDefault(require(a105_0x5ae5('0x3')));const mongoose_1=__importDefault(require('mongoose'));const userSchema=new mongoose_1[(a105_0x5ae5('0x4'))][(a105_0x5ae5('0x5'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a105_0x5ae5('0x6')]('save',function save(_0x5d1877){const _0x505242=this;if(!_0x505242[a105_0x5ae5('0x7')](a105_0x5ae5('0x8'))){return _0x5d1877();}bcrypt_nodejs_1['default'][a105_0x5ae5('0x9')](0xa,(_0x4d4dad,_0x2cd363)=>{if(_0x4d4dad){return _0x5d1877(_0x4d4dad);}bcrypt_nodejs_1[a105_0x5ae5('0x4')][a105_0x5ae5('0xa')](_0x505242[a105_0x5ae5('0x8')],_0x2cd363,undefined,(_0x4d4dad,_0x3aff47)=>{if(_0x4d4dad){return _0x5d1877(_0x4d4dad);}_0x505242[a105_0x5ae5('0x8')]=_0x3aff47;_0x5d1877();});});});const comparePassword=function(_0x324d2e,_0x184d62){bcrypt_nodejs_1[a105_0x5ae5('0x4')]['compare'](_0x324d2e,this['password'],(_0x33e97c,_0x3e617f)=>{_0x184d62(_0x33e97c,_0x3e617f);});};userSchema[a105_0x5ae5('0xb')][a105_0x5ae5('0xc')]=comparePassword;userSchema[a105_0x5ae5('0xb')]['gravatar']=function(_0x160d3d){if(!_0x160d3d){_0x160d3d=0xc8;}if(!this['email']){return'https://gravatar.com/avatar/?s='+_0x160d3d+a105_0x5ae5('0xd');}const _0x456448=crypto_1['default']['createHash'](a105_0x5ae5('0xe'))[a105_0x5ae5('0xf')](this[a105_0x5ae5('0x10')])[a105_0x5ae5('0x11')](a105_0x5ae5('0x12'));return a105_0x5ae5('0x13')+_0x456448+'?s='+_0x160d3d+a105_0x5ae5('0xd');};const User=mongoose_1[a105_0x5ae5('0x4')][a105_0x5ae5('0x14')](a105_0x5ae5('0x15'),userSchema);exports[a105_0x5ae5('0x4')]=User;