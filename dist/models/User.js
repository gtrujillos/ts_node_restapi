var a105_0x2860=['defineProperty','bcrypt-nodejs','default','Schema','save','genSalt','password','compare','methods','comparePassword','gravatar','&d=retro','createHash','md5','update','digest','hex','https://gravatar.com/avatar/','User','__esModule'];(function(_0x211169,_0x503574){var _0x4b1149=function(_0xa7d321){while(--_0xa7d321){_0x211169['push'](_0x211169['shift']());}};_0x4b1149(++_0x503574);}(a105_0x2860,0xef));var a105_0x5271=function(_0x105655,_0x48a0a2){_0x105655=_0x105655-0x0;var _0x1cb2c0=a105_0x2860[_0x105655];return _0x1cb2c0;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5f275c){return _0x5f275c&&_0x5f275c[a105_0x5271('0x0')]?_0x5f275c:{'default':_0x5f275c};};Object[a105_0x5271('0x1')](exports,a105_0x5271('0x0'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a105_0x5271('0x2')));const crypto_1=__importDefault(require('crypto'));const mongoose_1=__importDefault(require('mongoose'));const userSchema=new mongoose_1[(a105_0x5271('0x3'))][(a105_0x5271('0x4'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre'](a105_0x5271('0x5'),function save(_0x5b39db){const _0x387fa6=this;if(!_0x387fa6['isModified']('password')){return _0x5b39db();}bcrypt_nodejs_1['default'][a105_0x5271('0x6')](0xa,(_0x554c5f,_0x18b213)=>{if(_0x554c5f){return _0x5b39db(_0x554c5f);}bcrypt_nodejs_1[a105_0x5271('0x3')]['hash'](_0x387fa6[a105_0x5271('0x7')],_0x18b213,undefined,(_0x554c5f,_0x40cde2)=>{if(_0x554c5f){return _0x5b39db(_0x554c5f);}_0x387fa6[a105_0x5271('0x7')]=_0x40cde2;_0x5b39db();});});});const comparePassword=function(_0x433c2c,_0x4b9cf8){bcrypt_nodejs_1[a105_0x5271('0x3')][a105_0x5271('0x8')](_0x433c2c,this['password'],(_0x4dbfaa,_0x505cab)=>{_0x4b9cf8(_0x4dbfaa,_0x505cab);});};userSchema[a105_0x5271('0x9')][a105_0x5271('0xa')]=comparePassword;userSchema[a105_0x5271('0x9')][a105_0x5271('0xb')]=function(_0x247403){if(!_0x247403){_0x247403=0xc8;}if(!this['email']){return'https://gravatar.com/avatar/?s='+_0x247403+a105_0x5271('0xc');}const _0x55875b=crypto_1[a105_0x5271('0x3')][a105_0x5271('0xd')](a105_0x5271('0xe'))[a105_0x5271('0xf')](this['email'])[a105_0x5271('0x10')](a105_0x5271('0x11'));return a105_0x5271('0x12')+_0x55875b+'?s='+_0x247403+a105_0x5271('0xc');};const User=mongoose_1['default']['model'](a105_0x5271('0x13'),userSchema);exports['default']=User;