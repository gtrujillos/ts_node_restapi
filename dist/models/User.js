var a104_0x517a=['createHash','md5','digest','?s=','&d=retro','model','User','__importDefault','defineProperty','__esModule','bcrypt-nodejs','crypto','default','Schema','pre','password','genSalt','hash','compare','methods','comparePassword','gravatar','email','https://gravatar.com/avatar/?s='];(function(_0x462c28,_0x2c180a){var _0x1954b3=function(_0x412a72){while(--_0x412a72){_0x462c28['push'](_0x462c28['shift']());}};_0x1954b3(++_0x2c180a);}(a104_0x517a,0x187));var a104_0x3471=function(_0x22ab49,_0x5f3280){_0x22ab49=_0x22ab49-0x0;var _0x3c13a4=a104_0x517a[_0x22ab49];return _0x3c13a4;};'use strict';var __importDefault=this&&this[a104_0x3471('0x0')]||function(_0x17244f){return _0x17244f&&_0x17244f['__esModule']?_0x17244f:{'default':_0x17244f};};Object[a104_0x3471('0x1')](exports,a104_0x3471('0x2'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a104_0x3471('0x3')));const crypto_1=__importDefault(require(a104_0x3471('0x4')));const mongoose_1=__importDefault(require('mongoose'));const userSchema=new mongoose_1[(a104_0x3471('0x5'))][(a104_0x3471('0x6'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a104_0x3471('0x7')]('save',function save(_0x52341b){const _0x3129c8=this;if(!_0x3129c8['isModified'](a104_0x3471('0x8'))){return _0x52341b();}bcrypt_nodejs_1[a104_0x3471('0x5')][a104_0x3471('0x9')](0xa,(_0x4bcbff,_0x154e87)=>{if(_0x4bcbff){return _0x52341b(_0x4bcbff);}bcrypt_nodejs_1['default'][a104_0x3471('0xa')](_0x3129c8[a104_0x3471('0x8')],_0x154e87,undefined,(_0x4bcbff,_0x567821)=>{if(_0x4bcbff){return _0x52341b(_0x4bcbff);}_0x3129c8[a104_0x3471('0x8')]=_0x567821;_0x52341b();});});});const comparePassword=function(_0x2cdaf7,_0x2fcd43){bcrypt_nodejs_1[a104_0x3471('0x5')][a104_0x3471('0xb')](_0x2cdaf7,this[a104_0x3471('0x8')],(_0x3f237e,_0x3a9840)=>{_0x2fcd43(_0x3f237e,_0x3a9840);});};userSchema[a104_0x3471('0xc')][a104_0x3471('0xd')]=comparePassword;userSchema[a104_0x3471('0xc')][a104_0x3471('0xe')]=function(_0x2a16d3){if(!_0x2a16d3){_0x2a16d3=0xc8;}if(!this[a104_0x3471('0xf')]){return a104_0x3471('0x10')+_0x2a16d3+'&d=retro';}const _0x4eeadd=crypto_1[a104_0x3471('0x5')][a104_0x3471('0x11')](a104_0x3471('0x12'))['update'](this['email'])[a104_0x3471('0x13')]('hex');return'https://gravatar.com/avatar/'+_0x4eeadd+a104_0x3471('0x14')+_0x2a16d3+a104_0x3471('0x15');};const User=mongoose_1['default'][a104_0x3471('0x16')](a104_0x3471('0x17'),userSchema);exports[a104_0x3471('0x5')]=User;