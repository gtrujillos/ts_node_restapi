var a99_0x4fc1=['created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','then','i18n','default','toJSONLocalizedOnly','headers','lang','json','catch','status','stack','findById','authentication\x20failed','params','uuid','body','create','dataValues','send','findByPk','bind','updateOrCreate','update','toJSON','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','find','user','length','model','findAll'];(function(_0x2652de,_0x4a37e8){var _0x1e03c3=function(_0x2af425){while(--_0x2af425){_0x2652de['push'](_0x2652de['shift']());}};_0x1e03c3(++_0x4a37e8);}(a99_0x4fc1,0xc4));var a99_0xbc3a=function(_0x1d2076,_0x2a7e5a){_0x1d2076=_0x1d2076-0x0;var _0x6ffefc=a99_0x4fc1[_0x1d2076];return _0x6ffefc;};'use strict';var __importDefault=this&&this[a99_0xbc3a('0x0')]||function(_0x451f51){return _0x451f51&&_0x451f51[a99_0xbc3a('0x1')]?_0x451f51:{'default':_0x451f51};};Object[a99_0xbc3a('0x2')](exports,a99_0xbc3a('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0xbc3a('0x3')));class CrudUtils{constructor(_0x3e97ac,_0x289e69){this['model']=_0x3e97ac;this['i18n']=_0x289e69;}[a99_0xbc3a('0x4')](_0x5caa3b,_0x3d2d5e,_0x3a9075,_0x361c8a=![],_0x23e6a6=[]){if(!_0x5caa3b['user']||_0x5caa3b[a99_0xbc3a('0x5')][a99_0xbc3a('0x6')]==0x0){}return this[a99_0xbc3a('0x7')][a99_0xbc3a('0x8')]({'attributes':{'exclude':_0x361c8a?[]:['id',a99_0xbc3a('0x9'),a99_0xbc3a('0xa'),a99_0xbc3a('0xb'),a99_0xbc3a('0xc'),a99_0xbc3a('0xd'),a99_0xbc3a('0xe')]},'where':_0x5caa3b['params'],'include':_0x23e6a6})[a99_0xbc3a('0xf')](_0x29dfcc=>{const _0x248129=this[a99_0xbc3a('0x10')]?sequelize_utils_1[a99_0xbc3a('0x11')][a99_0xbc3a('0x12')](_0x29dfcc,_0x5caa3b[a99_0xbc3a('0x13')][a99_0xbc3a('0x14')]):sequelize_utils_1['default']['toJSON'](_0x29dfcc);if(_0x3d2d5e){return _0x3d2d5e[a99_0xbc3a('0x15')]({'success':!![],'data':_0x248129});}else{return _0x248129;}})[a99_0xbc3a('0x16')](_0x327972=>{if(_0x3d2d5e){return _0x3d2d5e[a99_0xbc3a('0x17')](0x1f4)['send']({'success':![],'data':_0x327972[a99_0xbc3a('0x18')]});}else{return _0x327972[a99_0xbc3a('0x18')];}});}[a99_0xbc3a('0x19')](_0x2c1428,_0x59b56d,_0x5d4162){if(!_0x2c1428[a99_0xbc3a('0x5')]||_0x2c1428[a99_0xbc3a('0x5')][a99_0xbc3a('0x6')]==0x0){return _0x59b56d['status'](0x191)['send']({'success':![],'data':a99_0xbc3a('0x1a')});}this[a99_0xbc3a('0x7')][a99_0xbc3a('0x19')](_0x2c1428[a99_0xbc3a('0x1b')]['id'])[a99_0xbc3a('0xf')](_0x11b079=>{const _0x4ad580=this[a99_0xbc3a('0x10')]?sequelize_utils_1['default'][a99_0xbc3a('0x12')](_0x11b079,_0x2c1428['headers'][a99_0xbc3a('0x14')]):_0x11b079;return _0x59b56d[a99_0xbc3a('0x15')]({'success':!![],'data':_0x4ad580});})[a99_0xbc3a('0x16')](_0x4de458=>{return _0x59b56d['status'](0x1f4)['send']({'success':![],'data':_0x4de458[a99_0xbc3a('0x18')]});});}['findByUUId'](_0x3eb98e,_0x338813,_0x27cdb4){if(!_0x3eb98e[a99_0xbc3a('0x5')]||_0x3eb98e[a99_0xbc3a('0x5')]['length']==0x0){}return this[a99_0xbc3a('0x7')][a99_0xbc3a('0x8')]({'where':{'uuid':_0x3eb98e['params'][a99_0xbc3a('0x1c')]}})[a99_0xbc3a('0xf')](_0x3f2832=>{const _0x5b3bfa=this[a99_0xbc3a('0x10')]?sequelize_utils_1['default'][a99_0xbc3a('0x12')](_0x3f2832,_0x3eb98e[a99_0xbc3a('0x13')][a99_0xbc3a('0x14')]):sequelize_utils_1[a99_0xbc3a('0x11')]['toJSON'](_0x3f2832);return _0x5b3bfa;})[a99_0xbc3a('0x16')](_0x186158=>{return _0x186158[a99_0xbc3a('0x18')];});}['save'](_0x50baba,_0x29049d,_0x503462){if(!_0x50baba['user']||_0x50baba[a99_0xbc3a('0x5')]['length']==0x0){}if(_0x50baba[a99_0xbc3a('0x5')]&&_0x50baba['user'][a99_0xbc3a('0x6')]>0x0){_0x50baba[a99_0xbc3a('0x1d')][a99_0xbc3a('0x9')]=_0x50baba[a99_0xbc3a('0x5')][0x0]['id'];}return this[a99_0xbc3a('0x7')][a99_0xbc3a('0x1e')](_0x50baba[a99_0xbc3a('0x1d')],this[a99_0xbc3a('0x10')]?{'language_id':_0x50baba[a99_0xbc3a('0x13')][a99_0xbc3a('0x14')]}:{})[a99_0xbc3a('0xf')](_0x1ab119=>{const _0x36ca1a=this['i18n']?sequelize_utils_1[a99_0xbc3a('0x11')][a99_0xbc3a('0x12')](_0x1ab119,_0x50baba[a99_0xbc3a('0x13')]['lang']):_0x1ab119;delete _0x36ca1a[a99_0xbc3a('0x1f')]['id'];delete _0x36ca1a['dataValues'][a99_0xbc3a('0x9')];delete _0x36ca1a['dataValues'][a99_0xbc3a('0xa')];delete _0x36ca1a[a99_0xbc3a('0x1f')][a99_0xbc3a('0xb')];delete _0x36ca1a[a99_0xbc3a('0x1f')]['created_at'];delete _0x36ca1a[a99_0xbc3a('0x1f')]['updated_at'];delete _0x36ca1a[a99_0xbc3a('0x1f')][a99_0xbc3a('0xe')];if(_0x29049d){return _0x29049d[a99_0xbc3a('0x15')]({'success':!![],'data':_0x36ca1a});}else{return _0x36ca1a;}})[a99_0xbc3a('0x16')](_0xcadbac=>{if(_0x29049d){return _0x29049d[a99_0xbc3a('0x17')](0x1f4)[a99_0xbc3a('0x20')]({'success':![],'data':_0xcadbac[a99_0xbc3a('0x18')]});}else{return _0xcadbac[a99_0xbc3a('0x18')];}});}['findOneAndUpdate'](_0x1b5add,_0x4ae5a6,_0x12c27d){if(!_0x1b5add[a99_0xbc3a('0x5')]||_0x1b5add['user']['length']==0x0){}if(_0x1b5add['user']&&_0x1b5add[a99_0xbc3a('0x5')][a99_0xbc3a('0x6')]>0x0){}this[a99_0xbc3a('0x7')][a99_0xbc3a('0x21')](_0x1b5add[a99_0xbc3a('0x1d')]['id'])['then'](_0x8311c2=>{if(_0x8311c2==null)return _0x4ae5a6[a99_0xbc3a('0x15')]({'success':!![],'data':_0x8311c2});_0x8311c2['update'](_0x1b5add[a99_0xbc3a('0x1d')],{'language_id':_0x1b5add[a99_0xbc3a('0x13')][a99_0xbc3a('0x14')]})['then'](function(_0x4f8944){const _0x13802d=this[a99_0xbc3a('0x10')]?sequelize_utils_1[a99_0xbc3a('0x11')]['toJSONLocalizedOnly'](_0x8311c2,_0x1b5add[a99_0xbc3a('0x13')][a99_0xbc3a('0x14')]):_0x8311c2;return _0x4ae5a6[a99_0xbc3a('0x15')]({'success':!![],'data':_0x13802d});}[a99_0xbc3a('0x22')](this))[a99_0xbc3a('0x16')](_0x28a49d=>{return _0x4ae5a6[a99_0xbc3a('0x17')](0x1f4)['send']({'success':![],'data':_0x28a49d['stack']});});})[a99_0xbc3a('0x16')](_0x4de757=>{return _0x4ae5a6['status'](0x1f4)[a99_0xbc3a('0x20')]({'success':![],'data':_0x4de757[a99_0xbc3a('0x18')]});});}[a99_0xbc3a('0x23')](_0x4736e6,_0x5e801f,_0x363820,_0x90c4cb=![]){if(!_0x4736e6[a99_0xbc3a('0x5')]||_0x4736e6['user'][a99_0xbc3a('0x6')]==0x0){}if(_0x4736e6[a99_0xbc3a('0x5')]&&_0x4736e6[a99_0xbc3a('0x5')]['length']>0x0){}return this[a99_0xbc3a('0x7')]['findOne']({'where':_0x4736e6[a99_0xbc3a('0x1b')]})[a99_0xbc3a('0xf')](function(_0x7445e1){if(_0x7445e1){return _0x7445e1[a99_0xbc3a('0x24')](_0x4736e6[a99_0xbc3a('0x1d')])[a99_0xbc3a('0xf')](function(_0x6dd77b){const _0x3506c0=_0x6dd77b[a99_0xbc3a('0x1f')];if(_0x90c4cb){delete _0x3506c0['id'];}if(_0x5e801f){return _0x5e801f[a99_0xbc3a('0x15')]({'success':!![],'data':_0x3506c0});}else{return _0x3506c0;}}['bind'](this));}else{return this['model'][a99_0xbc3a('0x1e')](_0x4736e6[a99_0xbc3a('0x1d')])[a99_0xbc3a('0xf')](function(_0x328135){if(_0x5e801f){return _0x5e801f[a99_0xbc3a('0x15')]({'success':!![],'data':_0x328135[a99_0xbc3a('0x25')]()});}else{return _0x328135;}});}}[a99_0xbc3a('0x22')](this))[a99_0xbc3a('0x16')](_0x18871=>{if(_0x5e801f){return _0x5e801f[a99_0xbc3a('0x17')](0x1f4)[a99_0xbc3a('0x20')]({'success':![],'data':_0x18871['stack']});}else{return _0x18871[a99_0xbc3a('0x18')];}});}[a99_0xbc3a('0x26')](_0x3843ef,_0x133fba,_0x2907a6){if(!_0x3843ef[a99_0xbc3a('0x5')]||_0x3843ef[a99_0xbc3a('0x5')][a99_0xbc3a('0x6')]==0x0){}if(_0x3843ef[a99_0xbc3a('0x5')]&&_0x3843ef[a99_0xbc3a('0x5')]['length']>0x0){}return this[a99_0xbc3a('0x7')][a99_0xbc3a('0x26')]({'where':{'uuid':_0x3843ef[a99_0xbc3a('0x1d')][a99_0xbc3a('0x1c')]},'defaults':_0x3843ef[a99_0xbc3a('0x1d')]})['then']((_0x5609c4,_0x2125c7)=>{if(_0x2125c7){}else{}return _0x133fba['json']({'success':!![],'data':_0x5609c4});})[a99_0xbc3a('0x16')](_0x2bf58c=>{return _0x133fba[a99_0xbc3a('0x17')](0x1f4)[a99_0xbc3a('0x20')]({'success':![],'data':_0x2bf58c[a99_0xbc3a('0x18')]});});}[a99_0xbc3a('0x27')](_0x491a5b,_0x333c16,_0x11af21){if(!_0x491a5b[a99_0xbc3a('0x5')]||_0x491a5b[a99_0xbc3a('0x5')][a99_0xbc3a('0x6')]==0x0){return _0x333c16[a99_0xbc3a('0x17')](0x191)[a99_0xbc3a('0x20')]({'success':![],'data':a99_0xbc3a('0x1a')});}if(_0x491a5b[a99_0xbc3a('0x5')]&&_0x491a5b[a99_0xbc3a('0x5')]['length']>0x0){_0x491a5b[a99_0xbc3a('0x1d')][a99_0xbc3a('0x9')]=_0x491a5b[a99_0xbc3a('0x5')][0x0]['id'];}this[a99_0xbc3a('0x7')]['findById'](_0x491a5b[a99_0xbc3a('0x1b')]['id'])[a99_0xbc3a('0xf')](_0x3b9037=>{if(_0x3b9037==null)return _0x333c16[a99_0xbc3a('0x15')]({'success':!![],'data':_0x3b9037});_0x3b9037[a99_0xbc3a('0x28')]()[a99_0xbc3a('0xf')](function(_0x36786b){const _0x6aa61f=this[a99_0xbc3a('0x10')]?sequelize_utils_1[a99_0xbc3a('0x11')][a99_0xbc3a('0x12')](_0x3b9037,_0x491a5b['headers'][a99_0xbc3a('0x14')]):_0x3b9037;return _0x333c16[a99_0xbc3a('0x15')]({'success':!![],'data':_0x6aa61f});})['catch'](_0x2c7b60=>{return _0x333c16[a99_0xbc3a('0x17')](0x1f4)['send']({'success':![],'data':_0x2c7b60[a99_0xbc3a('0x18')]});});})[a99_0xbc3a('0x16')](_0x1b356=>{return _0x333c16[a99_0xbc3a('0x17')](0x1f4)[a99_0xbc3a('0x20')]({'success':![],'data':_0x1b356['stack']});});}}exports['default']=CrudUtils;