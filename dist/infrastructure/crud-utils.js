var a99_0x3d71=['count','user','length','params','then','status','send','stack','query','offset','limit','findAll','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','default','toJSONLocalizedOnly','headers','lang','toJSON','catch','findById','authentication\x20failed','json','save','created_by_user_id','create','body','dataValues','findOneAndUpdate','bind','findOne','findOrCreate','uuid','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n'];(function(_0x40a5c0,_0x41d4ff){var _0x478af2=function(_0x50f1fe){while(--_0x50f1fe){_0x40a5c0['push'](_0x40a5c0['shift']());}};_0x478af2(++_0x41d4ff);}(a99_0x3d71,0x102));var a99_0x457a=function(_0x26d6da,_0x12b54d){_0x26d6da=_0x26d6da-0x0;var _0x18c900=a99_0x3d71[_0x26d6da];return _0x18c900;};'use strict';var __importDefault=this&&this[a99_0x457a('0x0')]||function(_0x3c7a98){return _0x3c7a98&&_0x3c7a98[a99_0x457a('0x1')]?_0x3c7a98:{'default':_0x3c7a98};};Object[a99_0x457a('0x2')](exports,a99_0x457a('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x457a('0x3')));class CrudUtils{constructor(_0x3fb731,_0x3ebc0e){this[a99_0x457a('0x4')]=_0x3fb731;this[a99_0x457a('0x5')]=_0x3ebc0e;}[a99_0x457a('0x6')](_0x5c3e1c,_0x4b4dc6,_0x2cf7f7){if(!_0x5c3e1c[a99_0x457a('0x7')]||_0x5c3e1c['user'][a99_0x457a('0x8')]==0x0){}return this[a99_0x457a('0x4')][a99_0x457a('0x6')]({'where':_0x5c3e1c[a99_0x457a('0x9')]})[a99_0x457a('0xa')](_0x533cf3=>{const _0x2a219e=_0x533cf3;if(_0x4b4dc6){return _0x4b4dc6['json']({'success':!![],'data':{'total':_0x533cf3}});}else{return _0x2a219e;}})['catch'](_0x304208=>{if(_0x4b4dc6){return _0x4b4dc6[a99_0x457a('0xb')](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x304208[a99_0x457a('0xd')]});}else{return _0x304208[a99_0x457a('0xd')];}});}['find'](_0xe9b1bb,_0x25a50d,_0x2ce9e7,_0x441ddb=![],_0x1fe0a0=[],_0xbd4999=null){const _0x57de28=_0xe9b1bb[a99_0x457a('0xe')][a99_0x457a('0xf')]?Number(_0xe9b1bb['query'][a99_0x457a('0xf')]):null;const _0x1b42cd=_0xe9b1bb[a99_0x457a('0xe')][a99_0x457a('0x10')]?Number(_0xe9b1bb['query'][a99_0x457a('0x10')]):null;if(!_0xe9b1bb[a99_0x457a('0x7')]||_0xe9b1bb[a99_0x457a('0x7')][a99_0x457a('0x8')]==0x0){}return this[a99_0x457a('0x4')][a99_0x457a('0x11')]({'attributes':{'exclude':_0x441ddb?[]:['id','created_by_user_id',a99_0x457a('0x12'),a99_0x457a('0x13'),a99_0x457a('0x14'),a99_0x457a('0x15'),a99_0x457a('0x16')]},'where':_0xe9b1bb['params'],'offset':_0x57de28,'limit':_0x1b42cd,'include':_0x1fe0a0,'order':_0xbd4999})[a99_0x457a('0xa')](_0x22704c=>{const _0x187369=this[a99_0x457a('0x5')]?sequelize_utils_1[a99_0x457a('0x17')][a99_0x457a('0x18')](_0x22704c,_0xe9b1bb[a99_0x457a('0x19')][a99_0x457a('0x1a')]):sequelize_utils_1[a99_0x457a('0x17')][a99_0x457a('0x1b')](_0x22704c);if(_0x25a50d){return _0x25a50d['json']({'success':!![],'data':_0x187369});}else{return _0x187369;}})[a99_0x457a('0x1c')](_0x419161=>{if(_0x25a50d){return _0x25a50d[a99_0x457a('0xb')](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x419161[a99_0x457a('0xd')]});}else{return _0x419161[a99_0x457a('0xd')];}});}[a99_0x457a('0x1d')](_0x423ac9,_0x338cc7,_0x179d3e){if(!_0x423ac9[a99_0x457a('0x7')]||_0x423ac9[a99_0x457a('0x7')][a99_0x457a('0x8')]==0x0){return _0x338cc7[a99_0x457a('0xb')](0x191)[a99_0x457a('0xc')]({'success':![],'data':a99_0x457a('0x1e')});}this[a99_0x457a('0x4')][a99_0x457a('0x1d')](_0x423ac9[a99_0x457a('0x9')]['id'])[a99_0x457a('0xa')](_0x1afe50=>{const _0x5edf25=this[a99_0x457a('0x5')]?sequelize_utils_1['default'][a99_0x457a('0x18')](_0x1afe50,_0x423ac9[a99_0x457a('0x19')][a99_0x457a('0x1a')]):_0x1afe50;return _0x338cc7[a99_0x457a('0x1f')]({'success':!![],'data':_0x5edf25});})[a99_0x457a('0x1c')](_0x30fed2=>{return _0x338cc7['status'](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x30fed2[a99_0x457a('0xd')]});});}['findByUUId'](_0x5712b3,_0xb43ffb,_0x35e020){if(!_0x5712b3['user']||_0x5712b3['user']['length']==0x0){}return this[a99_0x457a('0x4')]['findAll']({'where':{'uuid':_0x5712b3['params']['uuid']}})[a99_0x457a('0xa')](_0x43af9b=>{const _0x30cf5a=this[a99_0x457a('0x5')]?sequelize_utils_1[a99_0x457a('0x17')][a99_0x457a('0x18')](_0x43af9b,_0x5712b3[a99_0x457a('0x19')][a99_0x457a('0x1a')]):sequelize_utils_1['default'][a99_0x457a('0x1b')](_0x43af9b);return _0x30cf5a;})['catch'](_0x227d9a=>{return _0x227d9a[a99_0x457a('0xd')];});}[a99_0x457a('0x20')](_0x14d98f,_0x3c03a7,_0x99081d){if(!_0x14d98f[a99_0x457a('0x7')]||_0x14d98f[a99_0x457a('0x7')]['length']==0x0){}if(_0x14d98f[a99_0x457a('0x7')]&&_0x14d98f[a99_0x457a('0x7')][a99_0x457a('0x8')]>0x0){_0x14d98f['body'][a99_0x457a('0x21')]=_0x14d98f[a99_0x457a('0x7')][0x0]['id'];}return this['model'][a99_0x457a('0x22')](_0x14d98f[a99_0x457a('0x23')],this[a99_0x457a('0x5')]?{'language_id':_0x14d98f[a99_0x457a('0x19')][a99_0x457a('0x1a')]}:{})[a99_0x457a('0xa')](_0x2367f8=>{const _0x371b7a=this[a99_0x457a('0x5')]?sequelize_utils_1[a99_0x457a('0x17')][a99_0x457a('0x18')](_0x2367f8,_0x14d98f['headers'][a99_0x457a('0x1a')]):_0x2367f8;delete _0x371b7a[a99_0x457a('0x24')]['id'];delete _0x371b7a['dataValues'][a99_0x457a('0x21')];delete _0x371b7a[a99_0x457a('0x24')][a99_0x457a('0x12')];delete _0x371b7a[a99_0x457a('0x24')][a99_0x457a('0x13')];delete _0x371b7a[a99_0x457a('0x24')][a99_0x457a('0x14')];delete _0x371b7a[a99_0x457a('0x24')][a99_0x457a('0x15')];delete _0x371b7a[a99_0x457a('0x24')][a99_0x457a('0x16')];if(_0x3c03a7){return _0x3c03a7[a99_0x457a('0x1f')]({'success':!![],'data':_0x371b7a});}else{return _0x371b7a;}})[a99_0x457a('0x1c')](_0x505ffa=>{if(_0x3c03a7){return _0x3c03a7[a99_0x457a('0xb')](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x505ffa[a99_0x457a('0xd')]});}else{return _0x505ffa[a99_0x457a('0xd')];}});}[a99_0x457a('0x25')](_0x5ad556,_0x52d386,_0x4575a7){if(!_0x5ad556['user']||_0x5ad556[a99_0x457a('0x7')][a99_0x457a('0x8')]==0x0){}if(_0x5ad556[a99_0x457a('0x7')]&&_0x5ad556[a99_0x457a('0x7')][a99_0x457a('0x8')]>0x0){}this['model']['findByPk'](_0x5ad556[a99_0x457a('0x23')]['id'])[a99_0x457a('0xa')](_0x44e3a3=>{if(_0x44e3a3==null)return _0x52d386[a99_0x457a('0x1f')]({'success':!![],'data':_0x44e3a3});_0x44e3a3['update'](_0x5ad556[a99_0x457a('0x23')],{'language_id':_0x5ad556[a99_0x457a('0x19')][a99_0x457a('0x1a')]})[a99_0x457a('0xa')](function(_0x34649b){const _0x6f70be=this[a99_0x457a('0x5')]?sequelize_utils_1[a99_0x457a('0x17')][a99_0x457a('0x18')](_0x44e3a3,_0x5ad556[a99_0x457a('0x19')]['lang']):_0x44e3a3;return _0x52d386[a99_0x457a('0x1f')]({'success':!![],'data':_0x6f70be});}[a99_0x457a('0x26')](this))[a99_0x457a('0x1c')](_0x63be4d=>{return _0x52d386[a99_0x457a('0xb')](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x63be4d['stack']});});})[a99_0x457a('0x1c')](_0x3a1bae=>{return _0x52d386[a99_0x457a('0xb')](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x3a1bae[a99_0x457a('0xd')]});});}['updateOrCreate'](_0x4d07cb,_0x4d6b1a,_0x5136d7,_0x39fb08=![]){if(!_0x4d07cb[a99_0x457a('0x7')]||_0x4d07cb[a99_0x457a('0x7')][a99_0x457a('0x8')]==0x0){}if(_0x4d07cb[a99_0x457a('0x7')]&&_0x4d07cb[a99_0x457a('0x7')][a99_0x457a('0x8')]>0x0){}return this[a99_0x457a('0x4')][a99_0x457a('0x27')]({'where':_0x4d07cb['params']})[a99_0x457a('0xa')](function(_0x17dd6e){if(_0x17dd6e){return _0x17dd6e['update'](_0x4d07cb[a99_0x457a('0x23')])[a99_0x457a('0xa')](function(_0x1389ae){const _0x24ac12=_0x1389ae['dataValues'];if(_0x39fb08){delete _0x24ac12['id'];}if(_0x4d6b1a){return _0x4d6b1a[a99_0x457a('0x1f')]({'success':!![],'data':_0x24ac12});}else{return _0x24ac12;}}[a99_0x457a('0x26')](this));}else{return this[a99_0x457a('0x4')]['create'](_0x4d07cb[a99_0x457a('0x23')])[a99_0x457a('0xa')](function(_0x288e27){if(_0x4d6b1a){return _0x4d6b1a[a99_0x457a('0x1f')]({'success':!![],'data':_0x288e27[a99_0x457a('0x1b')]()});}else{return _0x288e27;}});}}[a99_0x457a('0x26')](this))[a99_0x457a('0x1c')](_0x35c174=>{if(_0x4d6b1a){return _0x4d6b1a[a99_0x457a('0xb')](0x1f4)['send']({'success':![],'data':_0x35c174[a99_0x457a('0xd')]});}else{return _0x35c174[a99_0x457a('0xd')];}});}['findOrCreate'](_0x17f7b0,_0x2f5597,_0x301fc7){if(!_0x17f7b0[a99_0x457a('0x7')]||_0x17f7b0[a99_0x457a('0x7')][a99_0x457a('0x8')]==0x0){}if(_0x17f7b0['user']&&_0x17f7b0['user'][a99_0x457a('0x8')]>0x0){}return this['model'][a99_0x457a('0x28')]({'where':{'uuid':_0x17f7b0['body'][a99_0x457a('0x29')]},'defaults':_0x17f7b0['body']})[a99_0x457a('0xa')]((_0x557d77,_0x1fcf8c)=>{if(_0x1fcf8c){}else{}return _0x2f5597['json']({'success':!![],'data':_0x557d77});})['catch'](_0x15b25c=>{return _0x2f5597[a99_0x457a('0xb')](0x1f4)['send']({'success':![],'data':_0x15b25c[a99_0x457a('0xd')]});});}[a99_0x457a('0x2a')](_0x2a0431,_0x33df32,_0xafd869){if(!_0x2a0431['user']||_0x2a0431['user'][a99_0x457a('0x8')]==0x0){return _0x33df32[a99_0x457a('0xb')](0x191)[a99_0x457a('0xc')]({'success':![],'data':'authentication\x20failed'});}if(_0x2a0431[a99_0x457a('0x7')]&&_0x2a0431['user'][a99_0x457a('0x8')]>0x0){_0x2a0431['body'][a99_0x457a('0x21')]=_0x2a0431[a99_0x457a('0x7')][0x0]['id'];}this[a99_0x457a('0x4')][a99_0x457a('0x1d')](_0x2a0431[a99_0x457a('0x9')]['id'])[a99_0x457a('0xa')](_0x87b6b1=>{if(_0x87b6b1==null)return _0x33df32[a99_0x457a('0x1f')]({'success':!![],'data':_0x87b6b1});_0x87b6b1[a99_0x457a('0x2b')]()[a99_0x457a('0xa')](function(_0x2d24ea){const _0x1a67a4=this['i18n']?sequelize_utils_1[a99_0x457a('0x17')][a99_0x457a('0x18')](_0x87b6b1,_0x2a0431['headers'][a99_0x457a('0x1a')]):_0x87b6b1;return _0x33df32[a99_0x457a('0x1f')]({'success':!![],'data':_0x1a67a4});})[a99_0x457a('0x1c')](_0x10313e=>{return _0x33df32[a99_0x457a('0xb')](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x10313e['stack']});});})[a99_0x457a('0x1c')](_0x2cf676=>{return _0x33df32['status'](0x1f4)[a99_0x457a('0xc')]({'success':![],'data':_0x2cf676[a99_0x457a('0xd')]});});}}exports[a99_0x457a('0x17')]=CrudUtils;