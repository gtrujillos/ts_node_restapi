var a99_0x771b=['created_by_user_id','deleted_by_user_id','updated_at','deleted_at','params','default','toJSONLocalizedOnly','headers','lang','toJSON','json','catch','status','send','stack','findById','authentication\x20failed','then','findByUUId','findAll','uuid','save','body','create','dataValues','created_at','findOneAndUpdate','findByPk','updateOrCreate','findOne','update','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','find','user','length'];(function(_0x416a27,_0x3aec91){var _0x585134=function(_0x298637){while(--_0x298637){_0x416a27['push'](_0x416a27['shift']());}};_0x585134(++_0x3aec91);}(a99_0x771b,0x124));var a99_0x3151=function(_0x2c8a18,_0x152b54){_0x2c8a18=_0x2c8a18-0x0;var _0x4bb96c=a99_0x771b[_0x2c8a18];return _0x4bb96c;};'use strict';var __importDefault=this&&this[a99_0x3151('0x0')]||function(_0x42355a){return _0x42355a&&_0x42355a[a99_0x3151('0x1')]?_0x42355a:{'default':_0x42355a};};Object[a99_0x3151('0x2')](exports,a99_0x3151('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x3151('0x3')));class CrudUtils{constructor(_0x382dea,_0x1f0444){this[a99_0x3151('0x4')]=_0x382dea;this[a99_0x3151('0x5')]=_0x1f0444;}[a99_0x3151('0x6')](_0x5a0074,_0xa4721f,_0x3f31e3,_0x18e96f=![],_0x57d014=[]){if(!_0x5a0074[a99_0x3151('0x7')]||_0x5a0074[a99_0x3151('0x7')][a99_0x3151('0x8')]==0x0){}return this[a99_0x3151('0x4')]['findAll']({'attributes':{'exclude':_0x18e96f?[]:['id',a99_0x3151('0x9'),'updated_by_user_id',a99_0x3151('0xa'),'created_at',a99_0x3151('0xb'),a99_0x3151('0xc')]},'where':_0x5a0074[a99_0x3151('0xd')],'include':_0x57d014})['then'](_0xd964e8=>{const _0x1a3ef8=this['i18n']?sequelize_utils_1[a99_0x3151('0xe')][a99_0x3151('0xf')](_0xd964e8,_0x5a0074[a99_0x3151('0x10')][a99_0x3151('0x11')]):sequelize_utils_1[a99_0x3151('0xe')][a99_0x3151('0x12')](_0xd964e8);if(_0xa4721f){return _0xa4721f[a99_0x3151('0x13')]({'success':!![],'data':_0x1a3ef8});}else{return _0x1a3ef8;}})[a99_0x3151('0x14')](_0x3a55a3=>{if(_0xa4721f){return _0xa4721f[a99_0x3151('0x15')](0x1f4)[a99_0x3151('0x16')]({'success':![],'data':_0x3a55a3[a99_0x3151('0x17')]});}else{return _0x3a55a3[a99_0x3151('0x17')];}});}[a99_0x3151('0x18')](_0x2813f4,_0x2f358c,_0x3b6c6d){if(!_0x2813f4[a99_0x3151('0x7')]||_0x2813f4['user'][a99_0x3151('0x8')]==0x0){return _0x2f358c[a99_0x3151('0x15')](0x191)[a99_0x3151('0x16')]({'success':![],'data':a99_0x3151('0x19')});}this[a99_0x3151('0x4')]['findById'](_0x2813f4[a99_0x3151('0xd')]['id'])[a99_0x3151('0x1a')](_0x493f3c=>{const _0x13e400=this[a99_0x3151('0x5')]?sequelize_utils_1[a99_0x3151('0xe')][a99_0x3151('0xf')](_0x493f3c,_0x2813f4['headers']['lang']):_0x493f3c;return _0x2f358c[a99_0x3151('0x13')]({'success':!![],'data':_0x13e400});})[a99_0x3151('0x14')](_0x29302d=>{return _0x2f358c['status'](0x1f4)['send']({'success':![],'data':_0x29302d[a99_0x3151('0x17')]});});}[a99_0x3151('0x1b')](_0xb5d75,_0x15e58f,_0x1bd473){if(!_0xb5d75[a99_0x3151('0x7')]||_0xb5d75[a99_0x3151('0x7')][a99_0x3151('0x8')]==0x0){}return this[a99_0x3151('0x4')][a99_0x3151('0x1c')]({'where':{'uuid':_0xb5d75[a99_0x3151('0xd')][a99_0x3151('0x1d')]}})[a99_0x3151('0x1a')](_0x44a821=>{const _0x19c90d=this['i18n']?sequelize_utils_1[a99_0x3151('0xe')]['toJSONLocalizedOnly'](_0x44a821,_0xb5d75[a99_0x3151('0x10')][a99_0x3151('0x11')]):sequelize_utils_1[a99_0x3151('0xe')][a99_0x3151('0x12')](_0x44a821);return _0x19c90d;})[a99_0x3151('0x14')](_0x37ae13=>{return _0x37ae13[a99_0x3151('0x17')];});}[a99_0x3151('0x1e')](_0x5916fd,_0x347da3,_0x314cac){if(!_0x5916fd[a99_0x3151('0x7')]||_0x5916fd[a99_0x3151('0x7')][a99_0x3151('0x8')]==0x0){}if(_0x5916fd[a99_0x3151('0x7')]&&_0x5916fd[a99_0x3151('0x7')]['length']>0x0){_0x5916fd[a99_0x3151('0x1f')][a99_0x3151('0x9')]=_0x5916fd[a99_0x3151('0x7')][0x0]['id'];}return this[a99_0x3151('0x4')][a99_0x3151('0x20')](_0x5916fd[a99_0x3151('0x1f')],this[a99_0x3151('0x5')]?{'language_id':_0x5916fd['headers']['lang']}:{})[a99_0x3151('0x1a')](_0x3b74aa=>{const _0x59c50f=this['i18n']?sequelize_utils_1[a99_0x3151('0xe')][a99_0x3151('0xf')](_0x3b74aa,_0x5916fd[a99_0x3151('0x10')][a99_0x3151('0x11')]):_0x3b74aa;delete _0x59c50f[a99_0x3151('0x21')]['id'];delete _0x59c50f['dataValues'][a99_0x3151('0x9')];delete _0x59c50f[a99_0x3151('0x21')]['updated_by_user_id'];delete _0x59c50f[a99_0x3151('0x21')][a99_0x3151('0xa')];delete _0x59c50f[a99_0x3151('0x21')][a99_0x3151('0x22')];delete _0x59c50f[a99_0x3151('0x21')][a99_0x3151('0xb')];delete _0x59c50f[a99_0x3151('0x21')][a99_0x3151('0xc')];if(_0x347da3){return _0x347da3[a99_0x3151('0x13')]({'success':!![],'data':_0x59c50f});}else{return _0x59c50f;}})['catch'](_0x3c6fc7=>{if(_0x347da3){return _0x347da3[a99_0x3151('0x15')](0x1f4)[a99_0x3151('0x16')]({'success':![],'data':_0x3c6fc7[a99_0x3151('0x17')]});}else{return _0x3c6fc7[a99_0x3151('0x17')];}});}[a99_0x3151('0x23')](_0x3146cf,_0x559542,_0x1145f2){if(!_0x3146cf[a99_0x3151('0x7')]||_0x3146cf['user'][a99_0x3151('0x8')]==0x0){}if(_0x3146cf[a99_0x3151('0x7')]&&_0x3146cf[a99_0x3151('0x7')][a99_0x3151('0x8')]>0x0){}this[a99_0x3151('0x4')][a99_0x3151('0x24')](_0x3146cf[a99_0x3151('0x1f')]['id'])[a99_0x3151('0x1a')](_0x21c74e=>{if(_0x21c74e==null)return _0x559542[a99_0x3151('0x13')]({'success':!![],'data':_0x21c74e});_0x21c74e['update'](_0x3146cf['body'],{'language_id':_0x3146cf['headers'][a99_0x3151('0x11')]})[a99_0x3151('0x1a')](function(_0x1b52c4){const _0x58ea76=this[a99_0x3151('0x5')]?sequelize_utils_1[a99_0x3151('0xe')][a99_0x3151('0xf')](_0x21c74e,_0x3146cf[a99_0x3151('0x10')][a99_0x3151('0x11')]):_0x21c74e;return _0x559542[a99_0x3151('0x13')]({'success':!![],'data':_0x58ea76});}['bind'](this))[a99_0x3151('0x14')](_0x492b1e=>{return _0x559542[a99_0x3151('0x15')](0x1f4)['send']({'success':![],'data':_0x492b1e[a99_0x3151('0x17')]});});})[a99_0x3151('0x14')](_0x898d7c=>{return _0x559542[a99_0x3151('0x15')](0x1f4)[a99_0x3151('0x16')]({'success':![],'data':_0x898d7c['stack']});});}[a99_0x3151('0x25')](_0x514b91,_0xedfb1c,_0x25fe3e,_0x211db5=![]){if(!_0x514b91[a99_0x3151('0x7')]||_0x514b91['user']['length']==0x0){}if(_0x514b91[a99_0x3151('0x7')]&&_0x514b91[a99_0x3151('0x7')][a99_0x3151('0x8')]>0x0){}return this['model'][a99_0x3151('0x26')]({'where':_0x514b91[a99_0x3151('0xd')]})[a99_0x3151('0x1a')](function(_0x189d54){if(_0x189d54){return _0x189d54[a99_0x3151('0x27')](_0x514b91[a99_0x3151('0x1f')])[a99_0x3151('0x1a')](function(_0x2fbdde){const _0x51720e=_0x2fbdde['dataValues'];if(_0x211db5){delete _0x51720e['id'];}if(_0xedfb1c){return _0xedfb1c[a99_0x3151('0x13')]({'success':!![],'data':_0x51720e});}else{return _0x51720e;}}['bind'](this));}else{return this[a99_0x3151('0x4')][a99_0x3151('0x20')](_0x514b91[a99_0x3151('0x1f')])['then'](function(_0xa8cc4a){if(_0xedfb1c){return _0xedfb1c[a99_0x3151('0x13')]({'success':!![],'data':_0xa8cc4a['toJSON']()});}else{return _0xa8cc4a;}});}}['bind'](this))[a99_0x3151('0x14')](_0xa21ea=>{if(_0xedfb1c){return _0xedfb1c['status'](0x1f4)['send']({'success':![],'data':_0xa21ea['stack']});}else{return _0xa21ea[a99_0x3151('0x17')];}});}['findOrCreate'](_0x1f9659,_0x33d98a,_0x5e7b54){if(!_0x1f9659[a99_0x3151('0x7')]||_0x1f9659['user']['length']==0x0){}if(_0x1f9659[a99_0x3151('0x7')]&&_0x1f9659[a99_0x3151('0x7')][a99_0x3151('0x8')]>0x0){}return this[a99_0x3151('0x4')][a99_0x3151('0x28')]({'where':{'uuid':_0x1f9659[a99_0x3151('0x1f')]['uuid']},'defaults':_0x1f9659[a99_0x3151('0x1f')]})[a99_0x3151('0x1a')]((_0x4223ed,_0x402143)=>{if(_0x402143){}else{}return _0x33d98a[a99_0x3151('0x13')]({'success':!![],'data':_0x4223ed});})[a99_0x3151('0x14')](_0x41fd7e=>{return _0x33d98a[a99_0x3151('0x15')](0x1f4)[a99_0x3151('0x16')]({'success':![],'data':_0x41fd7e[a99_0x3151('0x17')]});});}[a99_0x3151('0x29')](_0x1a7b33,_0x3a81ee,_0x25f9e7){if(!_0x1a7b33[a99_0x3151('0x7')]||_0x1a7b33[a99_0x3151('0x7')]['length']==0x0){return _0x3a81ee['status'](0x191)[a99_0x3151('0x16')]({'success':![],'data':a99_0x3151('0x19')});}if(_0x1a7b33[a99_0x3151('0x7')]&&_0x1a7b33[a99_0x3151('0x7')]['length']>0x0){_0x1a7b33[a99_0x3151('0x1f')][a99_0x3151('0x9')]=_0x1a7b33[a99_0x3151('0x7')][0x0]['id'];}this[a99_0x3151('0x4')][a99_0x3151('0x18')](_0x1a7b33[a99_0x3151('0xd')]['id'])['then'](_0x288dad=>{if(_0x288dad==null)return _0x3a81ee[a99_0x3151('0x13')]({'success':!![],'data':_0x288dad});_0x288dad[a99_0x3151('0x2a')]()['then'](function(_0x349d1c){const _0x580692=this[a99_0x3151('0x5')]?sequelize_utils_1[a99_0x3151('0xe')]['toJSONLocalizedOnly'](_0x288dad,_0x1a7b33[a99_0x3151('0x10')]['lang']):_0x288dad;return _0x3a81ee['json']({'success':!![],'data':_0x580692});})[a99_0x3151('0x14')](_0x49e543=>{return _0x3a81ee['status'](0x1f4)['send']({'success':![],'data':_0x49e543['stack']});});})[a99_0x3151('0x14')](_0x219412=>{return _0x3a81ee[a99_0x3151('0x15')](0x1f4)[a99_0x3151('0x16')]({'success':![],'data':_0x219412[a99_0x3151('0x17')]});});}}exports[a99_0x3151('0xe')]=CrudUtils;