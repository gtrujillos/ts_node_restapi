var a99_0x2da4=['length','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','i18n','default','lang','toJSON','catch','findById','authentication\x20failed','toJSONLocalizedOnly','headers','findByUUId','findAll','save','body','created_by_user_id','create','dataValues','findOneAndUpdate','findByPk','bind','findOne','update','findOrCreate','remove','__importDefault','__esModule','defineProperty','./sequelize-utils','model','count','user','params','then','json','status','send','stack','find','offset','limit','query'];(function(_0x4d8aee,_0x20c2be){var _0x11cd77=function(_0x5f5d0d){while(--_0x5f5d0d){_0x4d8aee['push'](_0x4d8aee['shift']());}};_0x11cd77(++_0x20c2be);}(a99_0x2da4,0x15f));var a99_0x3caa=function(_0x4d697b,_0x412f5d){_0x4d697b=_0x4d697b-0x0;var _0x13a220=a99_0x2da4[_0x4d697b];return _0x13a220;};'use strict';var __importDefault=this&&this[a99_0x3caa('0x0')]||function(_0x31022e){return _0x31022e&&_0x31022e[a99_0x3caa('0x1')]?_0x31022e:{'default':_0x31022e};};Object[a99_0x3caa('0x2')](exports,a99_0x3caa('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x3caa('0x3')));class CrudUtils{constructor(_0x188f79,_0x23c296){this[a99_0x3caa('0x4')]=_0x188f79;this['i18n']=_0x23c296;}[a99_0x3caa('0x5')](_0x2f711a,_0x24e734,_0x2c9f2e){if(!_0x2f711a[a99_0x3caa('0x6')]||_0x2f711a[a99_0x3caa('0x6')]['length']==0x0){}return this[a99_0x3caa('0x4')]['count']({'where':_0x2f711a[a99_0x3caa('0x7')]})[a99_0x3caa('0x8')](_0x5ed59e=>{const _0xbbec9a=_0x5ed59e;if(_0x24e734){return _0x24e734[a99_0x3caa('0x9')]({'success':!![],'data':{'total':_0x5ed59e}});}else{return _0xbbec9a;}})['catch'](_0x3cf6f=>{if(_0x24e734){return _0x24e734[a99_0x3caa('0xa')](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x3cf6f['stack']});}else{return _0x3cf6f[a99_0x3caa('0xc')];}});}[a99_0x3caa('0xd')](_0x1a964c,_0x496463,_0x3d858a,_0x663b00=![],_0x20b58d=[],_0x2700b2=null){const _0x522596=_0x1a964c['query'][a99_0x3caa('0xe')]?Number(_0x1a964c['query']['offset']):null;const _0x50e8dd=_0x1a964c['query'][a99_0x3caa('0xf')]?Number(_0x1a964c[a99_0x3caa('0x10')][a99_0x3caa('0xf')]):null;if(!_0x1a964c[a99_0x3caa('0x6')]||_0x1a964c[a99_0x3caa('0x6')][a99_0x3caa('0x11')]==0x0){}return this[a99_0x3caa('0x4')]['findAll']({'attributes':{'exclude':_0x663b00?[]:['id','created_by_user_id',a99_0x3caa('0x12'),a99_0x3caa('0x13'),a99_0x3caa('0x14'),a99_0x3caa('0x15'),a99_0x3caa('0x16')]},'where':_0x1a964c[a99_0x3caa('0x7')],'offset':_0x522596,'limit':_0x50e8dd,'include':_0x20b58d,'order':_0x2700b2})[a99_0x3caa('0x8')](_0x4bef32=>{const _0x49fcff=this[a99_0x3caa('0x17')]?sequelize_utils_1[a99_0x3caa('0x18')]['toJSONLocalizedOnly'](_0x4bef32,_0x1a964c['headers'][a99_0x3caa('0x19')]):sequelize_utils_1[a99_0x3caa('0x18')][a99_0x3caa('0x1a')](_0x4bef32);if(_0x496463){return _0x496463[a99_0x3caa('0x9')]({'success':!![],'data':_0x49fcff});}else{return _0x49fcff;}})[a99_0x3caa('0x1b')](_0xba887e=>{if(_0x496463){return _0x496463[a99_0x3caa('0xa')](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0xba887e[a99_0x3caa('0xc')]});}else{return _0xba887e[a99_0x3caa('0xc')];}});}[a99_0x3caa('0x1c')](_0x45e0dd,_0x5a0a67,_0x305311){if(!_0x45e0dd[a99_0x3caa('0x6')]||_0x45e0dd[a99_0x3caa('0x6')]['length']==0x0){return _0x5a0a67['status'](0x191)['send']({'success':![],'data':a99_0x3caa('0x1d')});}this['model'][a99_0x3caa('0x1c')](_0x45e0dd[a99_0x3caa('0x7')]['id'])[a99_0x3caa('0x8')](_0x5110ae=>{const _0x14807=this[a99_0x3caa('0x17')]?sequelize_utils_1[a99_0x3caa('0x18')][a99_0x3caa('0x1e')](_0x5110ae,_0x45e0dd[a99_0x3caa('0x1f')]['lang']):_0x5110ae;return _0x5a0a67[a99_0x3caa('0x9')]({'success':!![],'data':_0x14807});})[a99_0x3caa('0x1b')](_0x3cd509=>{return _0x5a0a67[a99_0x3caa('0xa')](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x3cd509[a99_0x3caa('0xc')]});});}[a99_0x3caa('0x20')](_0x3f0f74,_0x430594,_0x29735e){if(!_0x3f0f74[a99_0x3caa('0x6')]||_0x3f0f74[a99_0x3caa('0x6')][a99_0x3caa('0x11')]==0x0){}return this['model'][a99_0x3caa('0x21')]({'where':{'uuid':_0x3f0f74[a99_0x3caa('0x7')]['uuid']}})['then'](_0x1a9120=>{const _0x21b948=this[a99_0x3caa('0x17')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0x1a9120,_0x3f0f74['headers'][a99_0x3caa('0x19')]):sequelize_utils_1[a99_0x3caa('0x18')][a99_0x3caa('0x1a')](_0x1a9120);return _0x21b948;})[a99_0x3caa('0x1b')](_0x573f44=>{return _0x573f44[a99_0x3caa('0xc')];});}[a99_0x3caa('0x22')](_0x123f64,_0x3a2d55,_0x4550a4){if(!_0x123f64[a99_0x3caa('0x6')]||_0x123f64[a99_0x3caa('0x6')][a99_0x3caa('0x11')]==0x0){}if(_0x123f64[a99_0x3caa('0x6')]&&_0x123f64[a99_0x3caa('0x6')]['length']>0x0){_0x123f64[a99_0x3caa('0x23')][a99_0x3caa('0x24')]=_0x123f64['user'][0x0]['id'];}return this[a99_0x3caa('0x4')][a99_0x3caa('0x25')](_0x123f64['body'],this[a99_0x3caa('0x17')]?{'language_id':_0x123f64[a99_0x3caa('0x1f')][a99_0x3caa('0x19')]}:{})['then'](_0x3d91d6=>{const _0xe6e389=this['i18n']?sequelize_utils_1['default'][a99_0x3caa('0x1e')](_0x3d91d6,_0x123f64[a99_0x3caa('0x1f')]['lang']):_0x3d91d6;delete _0xe6e389['dataValues']['id'];delete _0xe6e389[a99_0x3caa('0x26')][a99_0x3caa('0x24')];delete _0xe6e389[a99_0x3caa('0x26')][a99_0x3caa('0x12')];delete _0xe6e389[a99_0x3caa('0x26')][a99_0x3caa('0x13')];delete _0xe6e389[a99_0x3caa('0x26')]['created_at'];delete _0xe6e389[a99_0x3caa('0x26')][a99_0x3caa('0x15')];delete _0xe6e389['dataValues'][a99_0x3caa('0x16')];if(_0x3a2d55){return _0x3a2d55[a99_0x3caa('0x9')]({'success':!![],'data':_0xe6e389});}else{return _0xe6e389;}})['catch'](_0x1093c2=>{if(_0x3a2d55){return _0x3a2d55['status'](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x1093c2['stack']});}else{return _0x1093c2['stack'];}});}[a99_0x3caa('0x27')](_0x23134b,_0x2dcc91,_0x2ea2ae){if(!_0x23134b[a99_0x3caa('0x6')]||_0x23134b[a99_0x3caa('0x6')]['length']==0x0){}if(_0x23134b[a99_0x3caa('0x6')]&&_0x23134b['user']['length']>0x0){}this[a99_0x3caa('0x4')][a99_0x3caa('0x28')](_0x23134b[a99_0x3caa('0x23')]['id'])['then'](_0x227fd8=>{if(_0x227fd8==null)return _0x2dcc91[a99_0x3caa('0x9')]({'success':!![],'data':_0x227fd8});_0x227fd8['update'](_0x23134b[a99_0x3caa('0x23')],{'language_id':_0x23134b[a99_0x3caa('0x1f')][a99_0x3caa('0x19')]})[a99_0x3caa('0x8')](function(_0x46502f){const _0x379e72=this['i18n']?sequelize_utils_1[a99_0x3caa('0x18')]['toJSONLocalizedOnly'](_0x227fd8,_0x23134b[a99_0x3caa('0x1f')]['lang']):_0x227fd8;return _0x2dcc91['json']({'success':!![],'data':_0x379e72});}[a99_0x3caa('0x29')](this))[a99_0x3caa('0x1b')](_0x9036f3=>{return _0x2dcc91['status'](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x9036f3[a99_0x3caa('0xc')]});});})[a99_0x3caa('0x1b')](_0x364361=>{return _0x2dcc91['status'](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x364361[a99_0x3caa('0xc')]});});}['updateOrCreate'](_0x36d853,_0x410252,_0x227d0c,_0x4363b2=![]){if(!_0x36d853['user']||_0x36d853[a99_0x3caa('0x6')][a99_0x3caa('0x11')]==0x0){}if(_0x36d853[a99_0x3caa('0x6')]&&_0x36d853[a99_0x3caa('0x6')][a99_0x3caa('0x11')]>0x0){}return this[a99_0x3caa('0x4')][a99_0x3caa('0x2a')]({'where':_0x36d853['params']})[a99_0x3caa('0x8')](function(_0x5b8d32){if(_0x5b8d32){return _0x5b8d32[a99_0x3caa('0x2b')](_0x36d853[a99_0x3caa('0x23')])[a99_0x3caa('0x8')](function(_0x46b385){const _0x460e93=_0x46b385['dataValues'];if(_0x4363b2){delete _0x460e93['id'];}if(_0x410252){return _0x410252[a99_0x3caa('0x9')]({'success':!![],'data':_0x460e93});}else{return _0x460e93;}}[a99_0x3caa('0x29')](this));}else{return this['model'][a99_0x3caa('0x25')](_0x36d853['body'])[a99_0x3caa('0x8')](function(_0x2029f5){if(_0x410252){return _0x410252[a99_0x3caa('0x9')]({'success':!![],'data':_0x2029f5[a99_0x3caa('0x1a')]()});}else{return _0x2029f5;}});}}['bind'](this))[a99_0x3caa('0x1b')](_0x51c583=>{if(_0x410252){return _0x410252[a99_0x3caa('0xa')](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x51c583['stack']});}else{return _0x51c583[a99_0x3caa('0xc')];}});}[a99_0x3caa('0x2c')](_0x117490,_0x2256a2,_0x5a970f){if(!_0x117490['user']||_0x117490[a99_0x3caa('0x6')][a99_0x3caa('0x11')]==0x0){}if(_0x117490[a99_0x3caa('0x6')]&&_0x117490[a99_0x3caa('0x6')]['length']>0x0){}return this[a99_0x3caa('0x4')][a99_0x3caa('0x2c')]({'where':{'uuid':_0x117490[a99_0x3caa('0x23')]['uuid']},'defaults':_0x117490['body']})['then']((_0x2c1955,_0x10fcf5)=>{if(_0x10fcf5){}else{}return _0x2256a2[a99_0x3caa('0x9')]({'success':!![],'data':_0x2c1955});})[a99_0x3caa('0x1b')](_0x286ce8=>{return _0x2256a2[a99_0x3caa('0xa')](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x286ce8[a99_0x3caa('0xc')]});});}[a99_0x3caa('0x2d')](_0x1e3385,_0x11dbb8,_0x326c1e){if(!_0x1e3385['user']||_0x1e3385[a99_0x3caa('0x6')][a99_0x3caa('0x11')]==0x0){return _0x11dbb8[a99_0x3caa('0xa')](0x191)[a99_0x3caa('0xb')]({'success':![],'data':'authentication\x20failed'});}if(_0x1e3385[a99_0x3caa('0x6')]&&_0x1e3385[a99_0x3caa('0x6')][a99_0x3caa('0x11')]>0x0){_0x1e3385[a99_0x3caa('0x23')][a99_0x3caa('0x24')]=_0x1e3385[a99_0x3caa('0x6')][0x0]['id'];}this[a99_0x3caa('0x4')]['findById'](_0x1e3385[a99_0x3caa('0x7')]['id'])[a99_0x3caa('0x8')](_0x2d6ba6=>{if(_0x2d6ba6==null)return _0x11dbb8[a99_0x3caa('0x9')]({'success':!![],'data':_0x2d6ba6});_0x2d6ba6['destroy']()[a99_0x3caa('0x8')](function(_0x56cd49){const _0x2365f2=this['i18n']?sequelize_utils_1[a99_0x3caa('0x18')][a99_0x3caa('0x1e')](_0x2d6ba6,_0x1e3385['headers'][a99_0x3caa('0x19')]):_0x2d6ba6;return _0x11dbb8[a99_0x3caa('0x9')]({'success':!![],'data':_0x2365f2});})[a99_0x3caa('0x1b')](_0x2565d0=>{return _0x11dbb8['status'](0x1f4)['send']({'success':![],'data':_0x2565d0['stack']});});})[a99_0x3caa('0x1b')](_0x3ee2fa=>{return _0x11dbb8['status'](0x1f4)[a99_0x3caa('0xb')]({'success':![],'data':_0x3ee2fa['stack']});});}}exports[a99_0x3caa('0x18')]=CrudUtils;