var a99_0x523a=['findOneAndUpdate','update','updateOrCreate','findOne','bind','create','findOrCreate','remove','authentication\x20failed','destroy','__importDefault','__esModule','./sequelize-utils','model','find','user','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','params','then','i18n','default','toJSONLocalizedOnly','toJSON','json','catch','status','send','stack','findById','length','lang','uuid','save','body','headers','dataValues'];(function(_0x181a63,_0x16cb6d){var _0x28e5cf=function(_0x24e606){while(--_0x24e606){_0x181a63['push'](_0x181a63['shift']());}};_0x28e5cf(++_0x16cb6d);}(a99_0x523a,0xd7));var a99_0xcc2d=function(_0x112826,_0x3eb073){_0x112826=_0x112826-0x0;var _0x76cd01=a99_0x523a[_0x112826];return _0x76cd01;};'use strict';var __importDefault=this&&this[a99_0xcc2d('0x0')]||function(_0xad1ea){return _0xad1ea&&_0xad1ea[a99_0xcc2d('0x1')]?_0xad1ea:{'default':_0xad1ea};};Object['defineProperty'](exports,a99_0xcc2d('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0xcc2d('0x2')));class CrudUtils{constructor(_0x5a199e,_0x959f5a){this[a99_0xcc2d('0x3')]=_0x5a199e;this['i18n']=_0x959f5a;}[a99_0xcc2d('0x4')](_0x29a6c2,_0x3c2ef4,_0x211881,_0x486db2=![],_0xeea9bb=[]){if(!_0x29a6c2[a99_0xcc2d('0x5')]||_0x29a6c2[a99_0xcc2d('0x5')]['length']==0x0){}return this['model'][a99_0xcc2d('0x6')]({'attributes':{'exclude':_0x486db2?[]:['id',a99_0xcc2d('0x7'),a99_0xcc2d('0x8'),a99_0xcc2d('0x9'),a99_0xcc2d('0xa'),a99_0xcc2d('0xb'),'deleted_at']},'where':_0x29a6c2[a99_0xcc2d('0xc')],'include':_0xeea9bb})[a99_0xcc2d('0xd')](_0x15d00c=>{const _0x563da2=this[a99_0xcc2d('0xe')]?sequelize_utils_1[a99_0xcc2d('0xf')][a99_0xcc2d('0x10')](_0x15d00c,_0x29a6c2['headers']['lang']):sequelize_utils_1[a99_0xcc2d('0xf')][a99_0xcc2d('0x11')](_0x15d00c);if(_0x3c2ef4){return _0x3c2ef4[a99_0xcc2d('0x12')]({'success':!![],'data':_0x563da2});}else{return _0x563da2;}})[a99_0xcc2d('0x13')](_0x2d9d1e=>{if(_0x3c2ef4){return _0x3c2ef4[a99_0xcc2d('0x14')](0x1f4)[a99_0xcc2d('0x15')]({'success':![],'data':_0x2d9d1e[a99_0xcc2d('0x16')]});}else{return _0x2d9d1e[a99_0xcc2d('0x16')];}});}[a99_0xcc2d('0x17')](_0x43ebad,_0x55c810,_0xa150aa){if(!_0x43ebad['user']||_0x43ebad['user'][a99_0xcc2d('0x18')]==0x0){return _0x55c810['status'](0x191)[a99_0xcc2d('0x15')]({'success':![],'data':'authentication\x20failed'});}this[a99_0xcc2d('0x3')][a99_0xcc2d('0x17')](_0x43ebad[a99_0xcc2d('0xc')]['id'])[a99_0xcc2d('0xd')](_0x14619f=>{const _0x1cdcad=this[a99_0xcc2d('0xe')]?sequelize_utils_1[a99_0xcc2d('0xf')][a99_0xcc2d('0x10')](_0x14619f,_0x43ebad['headers'][a99_0xcc2d('0x19')]):_0x14619f;return _0x55c810[a99_0xcc2d('0x12')]({'success':!![],'data':_0x1cdcad});})[a99_0xcc2d('0x13')](_0x2d065e=>{return _0x55c810[a99_0xcc2d('0x14')](0x1f4)['send']({'success':![],'data':_0x2d065e[a99_0xcc2d('0x16')]});});}['findByUUId'](_0x43b758,_0x30e7d9,_0x530299){if(!_0x43b758['user']||_0x43b758[a99_0xcc2d('0x5')][a99_0xcc2d('0x18')]==0x0){}return this[a99_0xcc2d('0x3')][a99_0xcc2d('0x6')]({'where':{'uuid':_0x43b758[a99_0xcc2d('0xc')][a99_0xcc2d('0x1a')]}})[a99_0xcc2d('0xd')](_0x2fbc51=>{const _0x4f3ef2=this['i18n']?sequelize_utils_1['default'][a99_0xcc2d('0x10')](_0x2fbc51,_0x43b758['headers'][a99_0xcc2d('0x19')]):sequelize_utils_1[a99_0xcc2d('0xf')][a99_0xcc2d('0x11')](_0x2fbc51);return _0x4f3ef2;})['catch'](_0x416405=>{return _0x416405[a99_0xcc2d('0x16')];});}[a99_0xcc2d('0x1b')](_0x207df7,_0x436383,_0x175676){if(!_0x207df7[a99_0xcc2d('0x5')]||_0x207df7['user'][a99_0xcc2d('0x18')]==0x0){}if(_0x207df7[a99_0xcc2d('0x5')]&&_0x207df7[a99_0xcc2d('0x5')][a99_0xcc2d('0x18')]>0x0){_0x207df7[a99_0xcc2d('0x1c')][a99_0xcc2d('0x7')]=_0x207df7['user'][0x0]['id'];}return this[a99_0xcc2d('0x3')]['create'](_0x207df7['body'],this['i18n']?{'language_id':_0x207df7[a99_0xcc2d('0x1d')][a99_0xcc2d('0x19')]}:{})[a99_0xcc2d('0xd')](_0x1cafb5=>{const _0x3a42e2=this[a99_0xcc2d('0xe')]?sequelize_utils_1['default'][a99_0xcc2d('0x10')](_0x1cafb5,_0x207df7['headers']['lang']):_0x1cafb5;delete _0x3a42e2[a99_0xcc2d('0x1e')]['id'];delete _0x3a42e2[a99_0xcc2d('0x1e')][a99_0xcc2d('0x7')];delete _0x3a42e2[a99_0xcc2d('0x1e')][a99_0xcc2d('0x8')];delete _0x3a42e2['dataValues']['deleted_by_user_id'];delete _0x3a42e2[a99_0xcc2d('0x1e')]['created_at'];delete _0x3a42e2[a99_0xcc2d('0x1e')][a99_0xcc2d('0xb')];delete _0x3a42e2[a99_0xcc2d('0x1e')]['deleted_at'];if(_0x436383){return _0x436383[a99_0xcc2d('0x12')]({'success':!![],'data':_0x3a42e2});}else{return _0x3a42e2;}})['catch'](_0x134285=>{if(_0x436383){return _0x436383[a99_0xcc2d('0x14')](0x1f4)[a99_0xcc2d('0x15')]({'success':![],'data':_0x134285[a99_0xcc2d('0x16')]});}else{return _0x134285['stack'];}});}[a99_0xcc2d('0x1f')](_0x48cb74,_0x5881e2,_0x17b47f){if(!_0x48cb74[a99_0xcc2d('0x5')]||_0x48cb74['user'][a99_0xcc2d('0x18')]==0x0){}if(_0x48cb74[a99_0xcc2d('0x5')]&&_0x48cb74[a99_0xcc2d('0x5')][a99_0xcc2d('0x18')]>0x0){}this['model']['findByPk'](_0x48cb74['body']['id'])['then'](_0x19473f=>{if(_0x19473f==null)return _0x5881e2[a99_0xcc2d('0x12')]({'success':!![],'data':_0x19473f});_0x19473f[a99_0xcc2d('0x20')](_0x48cb74[a99_0xcc2d('0x1c')],{'language_id':_0x48cb74[a99_0xcc2d('0x1d')]['lang']})['then'](function(_0x57ee34){const _0x15505f=this[a99_0xcc2d('0xe')]?sequelize_utils_1[a99_0xcc2d('0xf')][a99_0xcc2d('0x10')](_0x19473f,_0x48cb74[a99_0xcc2d('0x1d')][a99_0xcc2d('0x19')]):_0x19473f;return _0x5881e2[a99_0xcc2d('0x12')]({'success':!![],'data':_0x15505f});}['bind'](this))[a99_0xcc2d('0x13')](_0x39a1c4=>{return _0x5881e2['status'](0x1f4)[a99_0xcc2d('0x15')]({'success':![],'data':_0x39a1c4[a99_0xcc2d('0x16')]});});})[a99_0xcc2d('0x13')](_0x36adef=>{return _0x5881e2[a99_0xcc2d('0x14')](0x1f4)[a99_0xcc2d('0x15')]({'success':![],'data':_0x36adef['stack']});});}[a99_0xcc2d('0x21')](_0x147f64,_0x252fd7,_0x50eab6,_0x54fa46=![]){if(!_0x147f64[a99_0xcc2d('0x5')]||_0x147f64[a99_0xcc2d('0x5')][a99_0xcc2d('0x18')]==0x0){}if(_0x147f64[a99_0xcc2d('0x5')]&&_0x147f64[a99_0xcc2d('0x5')]['length']>0x0){}return this[a99_0xcc2d('0x3')][a99_0xcc2d('0x22')]({'where':_0x147f64['params']})[a99_0xcc2d('0xd')](function(_0x27b744){if(_0x27b744){return _0x27b744[a99_0xcc2d('0x20')](_0x147f64[a99_0xcc2d('0x1c')])['then'](function(_0x2db80c){const _0x34004d=_0x2db80c[a99_0xcc2d('0x1e')];if(_0x54fa46){delete _0x34004d['id'];}if(_0x252fd7){return _0x252fd7[a99_0xcc2d('0x12')]({'success':!![],'data':_0x34004d});}else{return _0x34004d;}}[a99_0xcc2d('0x23')](this));}else{return this[a99_0xcc2d('0x3')][a99_0xcc2d('0x24')](_0x147f64[a99_0xcc2d('0x1c')])['then'](function(_0x2001cc){if(_0x252fd7){return _0x252fd7[a99_0xcc2d('0x12')]({'success':!![],'data':_0x2001cc['toJSON']()});}else{return _0x2001cc;}});}}['bind'](this))[a99_0xcc2d('0x13')](_0x203276=>{if(_0x252fd7){return _0x252fd7['status'](0x1f4)['send']({'success':![],'data':_0x203276[a99_0xcc2d('0x16')]});}else{return _0x203276[a99_0xcc2d('0x16')];}});}[a99_0xcc2d('0x25')](_0x11c73a,_0x56bb89,_0x3aad6b){if(!_0x11c73a[a99_0xcc2d('0x5')]||_0x11c73a[a99_0xcc2d('0x5')][a99_0xcc2d('0x18')]==0x0){}if(_0x11c73a['user']&&_0x11c73a['user'][a99_0xcc2d('0x18')]>0x0){}return this[a99_0xcc2d('0x3')][a99_0xcc2d('0x25')]({'where':{'uuid':_0x11c73a[a99_0xcc2d('0x1c')][a99_0xcc2d('0x1a')]},'defaults':_0x11c73a[a99_0xcc2d('0x1c')]})[a99_0xcc2d('0xd')]((_0x5627eb,_0x344e43)=>{if(_0x344e43){}else{}return _0x56bb89[a99_0xcc2d('0x12')]({'success':!![],'data':_0x5627eb});})[a99_0xcc2d('0x13')](_0x797e00=>{return _0x56bb89['status'](0x1f4)[a99_0xcc2d('0x15')]({'success':![],'data':_0x797e00['stack']});});}[a99_0xcc2d('0x26')](_0x3e2b7c,_0x2c85ce,_0x3e8c2e){if(!_0x3e2b7c[a99_0xcc2d('0x5')]||_0x3e2b7c[a99_0xcc2d('0x5')][a99_0xcc2d('0x18')]==0x0){return _0x2c85ce[a99_0xcc2d('0x14')](0x191)[a99_0xcc2d('0x15')]({'success':![],'data':a99_0xcc2d('0x27')});}if(_0x3e2b7c[a99_0xcc2d('0x5')]&&_0x3e2b7c['user'][a99_0xcc2d('0x18')]>0x0){_0x3e2b7c[a99_0xcc2d('0x1c')][a99_0xcc2d('0x7')]=_0x3e2b7c[a99_0xcc2d('0x5')][0x0]['id'];}this[a99_0xcc2d('0x3')][a99_0xcc2d('0x17')](_0x3e2b7c[a99_0xcc2d('0xc')]['id'])['then'](_0x35f67e=>{if(_0x35f67e==null)return _0x2c85ce[a99_0xcc2d('0x12')]({'success':!![],'data':_0x35f67e});_0x35f67e[a99_0xcc2d('0x28')]()['then'](function(_0x455a20){const _0x38ea19=this[a99_0xcc2d('0xe')]?sequelize_utils_1[a99_0xcc2d('0xf')][a99_0xcc2d('0x10')](_0x35f67e,_0x3e2b7c[a99_0xcc2d('0x1d')][a99_0xcc2d('0x19')]):_0x35f67e;return _0x2c85ce['json']({'success':!![],'data':_0x38ea19});})[a99_0xcc2d('0x13')](_0x31f38a=>{return _0x2c85ce[a99_0xcc2d('0x14')](0x1f4)[a99_0xcc2d('0x15')]({'success':![],'data':_0x31f38a['stack']});});})[a99_0xcc2d('0x13')](_0x30e4d7=>{return _0x2c85ce[a99_0xcc2d('0x14')](0x1f4)[a99_0xcc2d('0x15')]({'success':![],'data':_0x30e4d7[a99_0xcc2d('0x16')]});});}}exports[a99_0xcc2d('0xf')]=CrudUtils;