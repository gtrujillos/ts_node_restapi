var a98_0x3e7c=['__importDefault','__esModule','./sequelize-utils','model','i18n','find','log','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','then','default','toJSONLocalizedOnly','headers','lang','toJSON','catch','status','send','stack','authentication\x20failed','json','findByUUId','save','body','create','dataValues','findOneAndUpdate','update','bind','updateOrCreate','params','findOne','findOrCreate','remove','findById'];(function(_0x1fc046,_0x24d073){var _0x518eb5=function(_0x23c96f){while(--_0x23c96f){_0x1fc046['push'](_0x1fc046['shift']());}};_0x518eb5(++_0x24d073);}(a98_0x3e7c,0x7e));var a98_0x1a55=function(_0x954745,_0xe89b08){_0x954745=_0x954745-0x0;var _0x1e3047=a98_0x3e7c[_0x954745];return _0x1e3047;};'use strict';var __importDefault=this&&this[a98_0x1a55('0x0')]||function(_0xa4de85){return _0xa4de85&&_0xa4de85[a98_0x1a55('0x1')]?_0xa4de85:{'default':_0xa4de85};};Object['defineProperty'](exports,a98_0x1a55('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a98_0x1a55('0x2')));class CrudUtils{constructor(_0x4e4472,_0x1978f3){this[a98_0x1a55('0x3')]=_0x4e4472;this[a98_0x1a55('0x4')]=_0x1978f3;}[a98_0x1a55('0x5')](_0x265993,_0x2960dd,_0x1c8267,_0x30dae=![]){console[a98_0x1a55('0x6')]('find');if(!_0x265993[a98_0x1a55('0x7')]||_0x265993[a98_0x1a55('0x7')][a98_0x1a55('0x8')]==0x0){}return this['model'][a98_0x1a55('0x9')]({'attributes':{'exclude':_0x30dae?[]:['id',a98_0x1a55('0xa'),a98_0x1a55('0xb'),a98_0x1a55('0xc'),a98_0x1a55('0xd'),a98_0x1a55('0xe'),a98_0x1a55('0xf')]},'where':{}})[a98_0x1a55('0x10')](_0x422691=>{console[a98_0x1a55('0x6')](_0x422691);const _0xb315e7=this[a98_0x1a55('0x4')]?sequelize_utils_1[a98_0x1a55('0x11')][a98_0x1a55('0x12')](_0x422691,_0x265993[a98_0x1a55('0x13')][a98_0x1a55('0x14')]):sequelize_utils_1[a98_0x1a55('0x11')][a98_0x1a55('0x15')](_0x422691);if(_0x2960dd){return _0x2960dd['json']({'success':!![],'data':_0xb315e7});}else{return _0xb315e7;}})[a98_0x1a55('0x16')](_0x4930f9=>{if(_0x2960dd){return _0x2960dd[a98_0x1a55('0x17')](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x4930f9['stack']});}else{return _0x4930f9[a98_0x1a55('0x19')];}});}['findById'](_0x55fd8e,_0x1b60fb,_0x368fd2){if(!_0x55fd8e[a98_0x1a55('0x7')]||_0x55fd8e[a98_0x1a55('0x7')]['length']==0x0){return _0x1b60fb[a98_0x1a55('0x17')](0x191)[a98_0x1a55('0x18')]({'success':![],'data':a98_0x1a55('0x1a')});}this[a98_0x1a55('0x3')]['findById'](_0x55fd8e['params']['id'])['then'](_0x4751b6=>{const _0x348770=this[a98_0x1a55('0x4')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0x4751b6,_0x55fd8e[a98_0x1a55('0x13')][a98_0x1a55('0x14')]):_0x4751b6;return _0x1b60fb[a98_0x1a55('0x1b')]({'success':!![],'data':_0x348770});})[a98_0x1a55('0x16')](_0x2ce07a=>{return _0x1b60fb['status'](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x2ce07a[a98_0x1a55('0x19')]});});}[a98_0x1a55('0x1c')](_0x4bb13e,_0x24f1b0,_0x56f9c4){if(!_0x4bb13e['user']||_0x4bb13e[a98_0x1a55('0x7')][a98_0x1a55('0x8')]==0x0){}return this[a98_0x1a55('0x3')][a98_0x1a55('0x9')]({'where':{'uuid':_0x4bb13e['params']['uuid']}})['then'](_0x58497f=>{const _0x4f797e=this['i18n']?sequelize_utils_1[a98_0x1a55('0x11')][a98_0x1a55('0x12')](_0x58497f,_0x4bb13e[a98_0x1a55('0x13')][a98_0x1a55('0x14')]):sequelize_utils_1[a98_0x1a55('0x11')][a98_0x1a55('0x15')](_0x58497f);return _0x4f797e;})[a98_0x1a55('0x16')](_0x1edc4a=>{return _0x1edc4a[a98_0x1a55('0x19')];});}[a98_0x1a55('0x1d')](_0x2894be,_0x475534,_0x4a5a4e){if(!_0x2894be['user']||_0x2894be[a98_0x1a55('0x7')][a98_0x1a55('0x8')]==0x0){}if(_0x2894be[a98_0x1a55('0x7')]&&_0x2894be[a98_0x1a55('0x7')][a98_0x1a55('0x8')]>0x0){_0x2894be[a98_0x1a55('0x1e')][a98_0x1a55('0xa')]=_0x2894be[a98_0x1a55('0x7')][0x0]['id'];}return this[a98_0x1a55('0x3')][a98_0x1a55('0x1f')](_0x2894be[a98_0x1a55('0x1e')],this[a98_0x1a55('0x4')]?{'language_id':_0x2894be[a98_0x1a55('0x13')][a98_0x1a55('0x14')]}:{})[a98_0x1a55('0x10')](_0x5cd500=>{const _0x1e82b9=this['i18n']?sequelize_utils_1[a98_0x1a55('0x11')][a98_0x1a55('0x12')](_0x5cd500,_0x2894be[a98_0x1a55('0x13')][a98_0x1a55('0x14')]):_0x5cd500;delete _0x1e82b9[a98_0x1a55('0x20')]['id'];delete _0x1e82b9['dataValues']['created_by_user_id'];delete _0x1e82b9['dataValues']['updated_by_user_id'];delete _0x1e82b9['dataValues']['deleted_by_user_id'];delete _0x1e82b9[a98_0x1a55('0x20')][a98_0x1a55('0xd')];delete _0x1e82b9[a98_0x1a55('0x20')][a98_0x1a55('0xe')];delete _0x1e82b9[a98_0x1a55('0x20')]['deleted_at'];if(_0x475534){return _0x475534[a98_0x1a55('0x1b')]({'success':!![],'data':_0x1e82b9});}else{return _0x1e82b9;}})[a98_0x1a55('0x16')](_0x31d799=>{if(_0x475534){return _0x475534[a98_0x1a55('0x17')](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x31d799[a98_0x1a55('0x19')]});}else{return _0x31d799[a98_0x1a55('0x19')];}});}[a98_0x1a55('0x21')](_0x5d37fe,_0x5db6de,_0x118d7e){if(!_0x5d37fe[a98_0x1a55('0x7')]||_0x5d37fe[a98_0x1a55('0x7')][a98_0x1a55('0x8')]==0x0){}if(_0x5d37fe['user']&&_0x5d37fe['user'][a98_0x1a55('0x8')]>0x0){_0x5d37fe['body'][a98_0x1a55('0xa')]=_0x5d37fe[a98_0x1a55('0x7')][0x0]['id'];}this[a98_0x1a55('0x3')]['findByPk'](_0x5d37fe[a98_0x1a55('0x1e')]['id'])[a98_0x1a55('0x10')](_0x5c2856=>{if(_0x5c2856==null)return _0x5db6de[a98_0x1a55('0x1b')]({'success':!![],'data':_0x5c2856});_0x5c2856[a98_0x1a55('0x22')](_0x5d37fe[a98_0x1a55('0x1e')],{'language_id':_0x5d37fe[a98_0x1a55('0x13')][a98_0x1a55('0x14')]})[a98_0x1a55('0x10')](function(_0x379dc7){const _0x4463c8=this[a98_0x1a55('0x4')]?sequelize_utils_1[a98_0x1a55('0x11')]['toJSONLocalizedOnly'](_0x5c2856,_0x5d37fe[a98_0x1a55('0x13')][a98_0x1a55('0x14')]):_0x5c2856;return _0x5db6de['json']({'success':!![],'data':_0x4463c8});}[a98_0x1a55('0x23')](this))[a98_0x1a55('0x16')](_0x1da7cd=>{return _0x5db6de[a98_0x1a55('0x17')](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x1da7cd['stack']});});})[a98_0x1a55('0x16')](_0x189250=>{return _0x5db6de['status'](0x1f4)['send']({'success':![],'data':_0x189250[a98_0x1a55('0x19')]});});}[a98_0x1a55('0x24')](_0x765f8a,_0x2d914d,_0x30e7b8,_0x45a606=![]){if(!_0x765f8a[a98_0x1a55('0x7')]||_0x765f8a[a98_0x1a55('0x7')][a98_0x1a55('0x8')]==0x0){}if(_0x765f8a['user']&&_0x765f8a[a98_0x1a55('0x7')][a98_0x1a55('0x8')]>0x0){_0x765f8a[a98_0x1a55('0x1e')][a98_0x1a55('0xa')]=_0x765f8a[a98_0x1a55('0x7')][0x0]['id'];}console['log'](_0x765f8a[a98_0x1a55('0x25')]);return this[a98_0x1a55('0x3')][a98_0x1a55('0x26')]({'where':_0x765f8a[a98_0x1a55('0x25')]})[a98_0x1a55('0x10')](function(_0x5c9e51){if(_0x5c9e51){return _0x5c9e51['update'](_0x765f8a[a98_0x1a55('0x1e')])[a98_0x1a55('0x10')](function(_0x529337){const _0x36d7cf=_0x529337[a98_0x1a55('0x20')];if(_0x45a606){delete _0x36d7cf['id'];}if(_0x2d914d){return _0x2d914d[a98_0x1a55('0x1b')]({'success':!![],'data':_0x36d7cf});}else{return _0x36d7cf;}}[a98_0x1a55('0x23')](this));}else{return this[a98_0x1a55('0x3')][a98_0x1a55('0x1f')](_0x765f8a[a98_0x1a55('0x1e')])[a98_0x1a55('0x10')](function(_0x42f91f){if(_0x2d914d){return _0x2d914d[a98_0x1a55('0x1b')]({'success':!![],'data':_0x42f91f[a98_0x1a55('0x15')]()});}else{return _0x42f91f;}});}}['bind'](this))[a98_0x1a55('0x16')](_0x37a41c=>{if(_0x2d914d){return _0x2d914d[a98_0x1a55('0x17')](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x37a41c[a98_0x1a55('0x19')]});}else{return _0x37a41c[a98_0x1a55('0x19')];}});}['findOrCreate'](_0xe529ac,_0x49dd88,_0x5a97d8){if(!_0xe529ac[a98_0x1a55('0x7')]||_0xe529ac[a98_0x1a55('0x7')][a98_0x1a55('0x8')]==0x0){}if(_0xe529ac[a98_0x1a55('0x7')]&&_0xe529ac[a98_0x1a55('0x7')]['length']>0x0){_0xe529ac[a98_0x1a55('0x1e')][a98_0x1a55('0xa')]=_0xe529ac[a98_0x1a55('0x7')][0x0]['id'];}return this[a98_0x1a55('0x3')][a98_0x1a55('0x27')]({'where':{'uuid':_0xe529ac[a98_0x1a55('0x1e')]['uuid']},'defaults':_0xe529ac['body']})[a98_0x1a55('0x10')]((_0x397952,_0x11b6ad)=>{if(_0x11b6ad){}else{}return _0x49dd88[a98_0x1a55('0x1b')]({'success':!![],'data':_0x397952});})['catch'](_0x1775e7=>{return _0x49dd88[a98_0x1a55('0x17')](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x1775e7[a98_0x1a55('0x19')]});});}[a98_0x1a55('0x28')](_0x4bb0fc,_0x23f7c0,_0x38459c){if(!_0x4bb0fc[a98_0x1a55('0x7')]||_0x4bb0fc[a98_0x1a55('0x7')][a98_0x1a55('0x8')]==0x0){return _0x23f7c0[a98_0x1a55('0x17')](0x191)[a98_0x1a55('0x18')]({'success':![],'data':'authentication\x20failed'});}if(_0x4bb0fc['user']&&_0x4bb0fc['user']['length']>0x0){_0x4bb0fc[a98_0x1a55('0x1e')][a98_0x1a55('0xa')]=_0x4bb0fc[a98_0x1a55('0x7')][0x0]['id'];}this[a98_0x1a55('0x3')][a98_0x1a55('0x29')](_0x4bb0fc[a98_0x1a55('0x25')]['id'])[a98_0x1a55('0x10')](_0x358b88=>{if(_0x358b88==null)return _0x23f7c0[a98_0x1a55('0x1b')]({'success':!![],'data':_0x358b88});_0x358b88['destroy']()[a98_0x1a55('0x10')](function(_0x2b6cb9){const _0x3e0798=this[a98_0x1a55('0x4')]?sequelize_utils_1[a98_0x1a55('0x11')]['toJSONLocalizedOnly'](_0x358b88,_0x4bb0fc[a98_0x1a55('0x13')][a98_0x1a55('0x14')]):_0x358b88;return _0x23f7c0[a98_0x1a55('0x1b')]({'success':!![],'data':_0x3e0798});})[a98_0x1a55('0x16')](_0x4b2f2a=>{return _0x23f7c0[a98_0x1a55('0x17')](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x4b2f2a[a98_0x1a55('0x19')]});});})[a98_0x1a55('0x16')](_0x2f6eaa=>{return _0x23f7c0['status'](0x1f4)[a98_0x1a55('0x18')]({'success':![],'data':_0x2f6eaa[a98_0x1a55('0x19')]});});}}exports[a98_0x1a55('0x11')]=CrudUtils;