var a105_0x120f=['create','dataValues','deleted_by_user_id','findOneAndUpdate','findByPk','bind','findOne','update','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','model','i18n','count','user','length','params','then','catch','send','stack','find','offset','query','limit','findAll','created_at','updated_at','deleted_at','default','toJSON','json','status','authentication\x20failed','findById','toJSONLocalizedOnly','uuid','headers','lang','save','body','created_by_user_id'];(function(_0x5739f3,_0x408f08){var _0x3c072f=function(_0x3754c2){while(--_0x3754c2){_0x5739f3['push'](_0x5739f3['shift']());}};_0x3c072f(++_0x408f08);}(a105_0x120f,0x1a0));var a105_0x1c65=function(_0x4a43a0,_0x5f07c2){_0x4a43a0=_0x4a43a0-0x0;var _0x3226ad=a105_0x120f[_0x4a43a0];return _0x3226ad;};'use strict';var __importDefault=this&&this[a105_0x1c65('0x0')]||function(_0x4c68dc){return _0x4c68dc&&_0x4c68dc[a105_0x1c65('0x1')]?_0x4c68dc:{'default':_0x4c68dc};};Object[a105_0x1c65('0x2')](exports,a105_0x1c65('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require('./sequelize-utils'));class CrudUtils{constructor(_0x1061d4,_0x4f2282){this[a105_0x1c65('0x3')]=_0x1061d4;this[a105_0x1c65('0x4')]=_0x4f2282;}[a105_0x1c65('0x5')](_0x46c6aa,_0x398875,_0x273d4d){if(!_0x46c6aa[a105_0x1c65('0x6')]||_0x46c6aa[a105_0x1c65('0x6')][a105_0x1c65('0x7')]==0x0){}return this[a105_0x1c65('0x3')]['count']({'where':_0x46c6aa[a105_0x1c65('0x8')]})[a105_0x1c65('0x9')](_0x380558=>{const _0x3b3d05=_0x380558;if(_0x398875){return _0x398875['json']({'success':!![],'data':{'total':_0x380558}});}else{return _0x3b3d05;}})[a105_0x1c65('0xa')](_0x234b4c=>{if(_0x398875){return _0x398875['status'](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x234b4c['stack']});}else{return _0x234b4c[a105_0x1c65('0xc')];}});}[a105_0x1c65('0xd')](_0x3356a3,_0x3b91dd,_0x308dc4,_0x1751e9=![],_0x3c5f2e=[],_0x5cf930=null){const _0x552d1a=_0x3356a3['query'][a105_0x1c65('0xe')]?Number(_0x3356a3[a105_0x1c65('0xf')][a105_0x1c65('0xe')]):null;const _0x2004f3=_0x3356a3[a105_0x1c65('0xf')]['limit']?Number(_0x3356a3[a105_0x1c65('0xf')][a105_0x1c65('0x10')]):null;if(!_0x3356a3[a105_0x1c65('0x6')]||_0x3356a3['user'][a105_0x1c65('0x7')]==0x0){}return this[a105_0x1c65('0x3')][a105_0x1c65('0x11')]({'attributes':{'exclude':_0x1751e9?[]:['id','created_by_user_id','updated_by_user_id','deleted_by_user_id',a105_0x1c65('0x12'),a105_0x1c65('0x13'),a105_0x1c65('0x14')]},'where':_0x3356a3[a105_0x1c65('0x8')],'offset':_0x552d1a,'limit':_0x2004f3,'include':_0x3c5f2e,'order':_0x5cf930})[a105_0x1c65('0x9')](_0x30fcb2=>{const _0x43e3d0=this[a105_0x1c65('0x4')]?sequelize_utils_1[a105_0x1c65('0x15')]['toJSONLocalizedOnly'](_0x30fcb2,_0x3356a3['headers']['lang']):sequelize_utils_1[a105_0x1c65('0x15')][a105_0x1c65('0x16')](_0x30fcb2);if(_0x3b91dd){return _0x3b91dd[a105_0x1c65('0x17')]({'success':!![],'data':_0x43e3d0});}else{return _0x43e3d0;}})['catch'](_0x425ddc=>{if(_0x3b91dd){return _0x3b91dd[a105_0x1c65('0x18')](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x425ddc['stack']});}else{return _0x425ddc[a105_0x1c65('0xc')];}});}['findById'](_0x307a82,_0x5e351f,_0x2ff003){if(!_0x307a82[a105_0x1c65('0x6')]||_0x307a82[a105_0x1c65('0x6')][a105_0x1c65('0x7')]==0x0){return _0x5e351f['status'](0x191)[a105_0x1c65('0xb')]({'success':![],'data':a105_0x1c65('0x19')});}this[a105_0x1c65('0x3')][a105_0x1c65('0x1a')](_0x307a82[a105_0x1c65('0x8')]['id'])['then'](_0x5c564f=>{const _0x40c0ed=this[a105_0x1c65('0x4')]?sequelize_utils_1[a105_0x1c65('0x15')][a105_0x1c65('0x1b')](_0x5c564f,_0x307a82['headers']['lang']):_0x5c564f;return _0x5e351f[a105_0x1c65('0x17')]({'success':!![],'data':_0x40c0ed});})[a105_0x1c65('0xa')](_0x30195c=>{return _0x5e351f[a105_0x1c65('0x18')](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x30195c[a105_0x1c65('0xc')]});});}['findByUUId'](_0x2cc42c,_0x36db1d,_0x5d8989){if(!_0x2cc42c[a105_0x1c65('0x6')]||_0x2cc42c[a105_0x1c65('0x6')][a105_0x1c65('0x7')]==0x0){}return this[a105_0x1c65('0x3')][a105_0x1c65('0x11')]({'where':{'uuid':_0x2cc42c[a105_0x1c65('0x8')][a105_0x1c65('0x1c')]}})[a105_0x1c65('0x9')](_0x38a77b=>{const _0x36002d=this['i18n']?sequelize_utils_1[a105_0x1c65('0x15')]['toJSONLocalizedOnly'](_0x38a77b,_0x2cc42c[a105_0x1c65('0x1d')][a105_0x1c65('0x1e')]):sequelize_utils_1[a105_0x1c65('0x15')][a105_0x1c65('0x16')](_0x38a77b);return _0x36002d;})[a105_0x1c65('0xa')](_0x21372f=>{return _0x21372f[a105_0x1c65('0xc')];});}[a105_0x1c65('0x1f')](_0x566ad5,_0x4e3d30,_0x3b31de){if(!_0x566ad5[a105_0x1c65('0x6')]||_0x566ad5['user'][a105_0x1c65('0x7')]==0x0){}if(_0x566ad5[a105_0x1c65('0x6')]&&_0x566ad5[a105_0x1c65('0x6')][a105_0x1c65('0x7')]>0x0){_0x566ad5[a105_0x1c65('0x20')][a105_0x1c65('0x21')]=_0x566ad5[a105_0x1c65('0x6')][0x0]['id'];}return this[a105_0x1c65('0x3')][a105_0x1c65('0x22')](_0x566ad5[a105_0x1c65('0x20')],this[a105_0x1c65('0x4')]?{'language_id':_0x566ad5[a105_0x1c65('0x1d')][a105_0x1c65('0x1e')]}:{})[a105_0x1c65('0x9')](_0x35f983=>{const _0x237de4=this[a105_0x1c65('0x4')]?sequelize_utils_1[a105_0x1c65('0x15')][a105_0x1c65('0x1b')](_0x35f983,_0x566ad5['headers'][a105_0x1c65('0x1e')]):_0x35f983;delete _0x237de4[a105_0x1c65('0x23')]['id'];delete _0x237de4[a105_0x1c65('0x23')]['created_by_user_id'];delete _0x237de4[a105_0x1c65('0x23')]['updated_by_user_id'];delete _0x237de4[a105_0x1c65('0x23')][a105_0x1c65('0x24')];delete _0x237de4['dataValues'][a105_0x1c65('0x12')];delete _0x237de4[a105_0x1c65('0x23')][a105_0x1c65('0x13')];delete _0x237de4[a105_0x1c65('0x23')]['deleted_at'];if(_0x4e3d30){return _0x4e3d30[a105_0x1c65('0x17')]({'success':!![],'data':_0x237de4});}else{return _0x237de4;}})[a105_0x1c65('0xa')](_0x238a8c=>{if(_0x4e3d30){return _0x4e3d30[a105_0x1c65('0x18')](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x238a8c[a105_0x1c65('0xc')]});}else{return _0x238a8c['stack'];}});}[a105_0x1c65('0x25')](_0x284d0c,_0x39aa0c,_0x5460cf){if(!_0x284d0c['user']||_0x284d0c[a105_0x1c65('0x6')][a105_0x1c65('0x7')]==0x0){}if(_0x284d0c[a105_0x1c65('0x6')]&&_0x284d0c[a105_0x1c65('0x6')]['length']>0x0){}this['model'][a105_0x1c65('0x26')](_0x284d0c[a105_0x1c65('0x20')]['id'])[a105_0x1c65('0x9')](_0xa9991e=>{if(_0xa9991e==null)return _0x39aa0c[a105_0x1c65('0x17')]({'success':!![],'data':_0xa9991e});_0xa9991e['update'](_0x284d0c[a105_0x1c65('0x20')],{'language_id':_0x284d0c[a105_0x1c65('0x1d')][a105_0x1c65('0x1e')]})[a105_0x1c65('0x9')](function(_0x3d28b){const _0x4dcd28=this[a105_0x1c65('0x4')]?sequelize_utils_1[a105_0x1c65('0x15')][a105_0x1c65('0x1b')](_0xa9991e,_0x284d0c['headers'][a105_0x1c65('0x1e')]):_0xa9991e;return _0x39aa0c[a105_0x1c65('0x17')]({'success':!![],'data':_0x4dcd28});}[a105_0x1c65('0x27')](this))[a105_0x1c65('0xa')](_0x29ecf5=>{return _0x39aa0c['status'](0x1f4)['send']({'success':![],'data':_0x29ecf5[a105_0x1c65('0xc')]});});})['catch'](_0x49690c=>{return _0x39aa0c[a105_0x1c65('0x18')](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x49690c['stack']});});}['updateOrCreate'](_0x3e3927,_0x3ae26b,_0x209c32,_0x490d14=![]){if(!_0x3e3927[a105_0x1c65('0x6')]||_0x3e3927['user']['length']==0x0){}if(_0x3e3927[a105_0x1c65('0x6')]&&_0x3e3927['user'][a105_0x1c65('0x7')]>0x0){}return this[a105_0x1c65('0x3')][a105_0x1c65('0x28')]({'where':_0x3e3927[a105_0x1c65('0x8')]})['then'](function(_0x2a81a0){if(_0x2a81a0){return _0x2a81a0[a105_0x1c65('0x29')](_0x3e3927[a105_0x1c65('0x20')])[a105_0x1c65('0x9')](function(_0x124718){const _0x425a54=_0x124718[a105_0x1c65('0x23')];if(_0x490d14){delete _0x425a54['id'];}if(_0x3ae26b){return _0x3ae26b['json']({'success':!![],'data':_0x425a54});}else{return _0x425a54;}}[a105_0x1c65('0x27')](this));}else{return this[a105_0x1c65('0x3')][a105_0x1c65('0x22')](_0x3e3927[a105_0x1c65('0x20')])[a105_0x1c65('0x9')](function(_0x1cd7b1){if(_0x3ae26b){return _0x3ae26b[a105_0x1c65('0x17')]({'success':!![],'data':_0x1cd7b1[a105_0x1c65('0x16')]()});}else{return _0x1cd7b1;}});}}[a105_0x1c65('0x27')](this))[a105_0x1c65('0xa')](_0x5a86ec=>{if(_0x3ae26b){return _0x3ae26b[a105_0x1c65('0x18')](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x5a86ec[a105_0x1c65('0xc')]});}else{return _0x5a86ec[a105_0x1c65('0xc')];}});}['findOrCreate'](_0x5e7c07,_0x20b795,_0x25bfaf){if(!_0x5e7c07['user']||_0x5e7c07[a105_0x1c65('0x6')][a105_0x1c65('0x7')]==0x0){}if(_0x5e7c07[a105_0x1c65('0x6')]&&_0x5e7c07[a105_0x1c65('0x6')][a105_0x1c65('0x7')]>0x0){}return this[a105_0x1c65('0x3')][a105_0x1c65('0x2a')]({'where':{'uuid':_0x5e7c07[a105_0x1c65('0x20')]['uuid']},'defaults':_0x5e7c07[a105_0x1c65('0x20')]})[a105_0x1c65('0x9')]((_0x37aa07,_0x4f8b94)=>{if(_0x4f8b94){}else{}return _0x20b795[a105_0x1c65('0x17')]({'success':!![],'data':_0x37aa07});})['catch'](_0x3d116c=>{return _0x20b795['status'](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x3d116c[a105_0x1c65('0xc')]});});}[a105_0x1c65('0x2b')](_0x3fe412,_0x5b7023,_0x4cfd4b){if(!_0x3fe412[a105_0x1c65('0x6')]||_0x3fe412[a105_0x1c65('0x6')][a105_0x1c65('0x7')]==0x0){return _0x5b7023[a105_0x1c65('0x18')](0x191)['send']({'success':![],'data':'authentication\x20failed'});}if(_0x3fe412['user']&&_0x3fe412[a105_0x1c65('0x6')][a105_0x1c65('0x7')]>0x0){_0x3fe412[a105_0x1c65('0x20')][a105_0x1c65('0x21')]=_0x3fe412[a105_0x1c65('0x6')][0x0]['id'];}this[a105_0x1c65('0x3')]['findById'](_0x3fe412[a105_0x1c65('0x8')]['id'])[a105_0x1c65('0x9')](_0x3640ef=>{if(_0x3640ef==null)return _0x5b7023['json']({'success':!![],'data':_0x3640ef});_0x3640ef[a105_0x1c65('0x2c')]()[a105_0x1c65('0x9')](function(_0x114b7d){const _0x3c9c60=this[a105_0x1c65('0x4')]?sequelize_utils_1[a105_0x1c65('0x15')][a105_0x1c65('0x1b')](_0x3640ef,_0x3fe412[a105_0x1c65('0x1d')][a105_0x1c65('0x1e')]):_0x3640ef;return _0x5b7023['json']({'success':!![],'data':_0x3c9c60});})[a105_0x1c65('0xa')](_0x39ff13=>{return _0x5b7023[a105_0x1c65('0x18')](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x39ff13[a105_0x1c65('0xc')]});});})[a105_0x1c65('0xa')](_0x17bd0b=>{return _0x5b7023[a105_0x1c65('0x18')](0x1f4)[a105_0x1c65('0xb')]({'success':![],'data':_0x17bd0b[a105_0x1c65('0xc')]});});}}exports[a105_0x1c65('0x15')]=CrudUtils;