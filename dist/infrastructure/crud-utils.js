var a99_0x598b=['status','authentication\x20failed','findById','findByUUId','body','then','created_by_user_id','dataValues','findByPk','update','bind','updateOrCreate','findOne','findOrCreate','uuid','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','user','length','findAll','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','params','default','toJSONLocalizedOnly','headers','lang','toJSON','json','catch','send','stack'];(function(_0x1dedfd,_0x30f7d0){var _0x2d3bfb=function(_0x36d5d2){while(--_0x36d5d2){_0x1dedfd['push'](_0x1dedfd['shift']());}};_0x2d3bfb(++_0x30f7d0);}(a99_0x598b,0xb5));var a99_0x4792=function(_0x3372f0,_0x2b97e8){_0x3372f0=_0x3372f0-0x0;var _0x17b6ad=a99_0x598b[_0x3372f0];return _0x17b6ad;};'use strict';var __importDefault=this&&this[a99_0x4792('0x0')]||function(_0x484bf5){return _0x484bf5&&_0x484bf5[a99_0x4792('0x1')]?_0x484bf5:{'default':_0x484bf5};};Object[a99_0x4792('0x2')](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x4792('0x3')));class CrudUtils{constructor(_0x3a0ac3,_0x915bf0){this[a99_0x4792('0x4')]=_0x3a0ac3;this[a99_0x4792('0x5')]=_0x915bf0;}['find'](_0x3f5809,_0x228eff,_0x1c6247,_0x2cfe40=![],_0x234a64=[]){if(!_0x3f5809['user']||_0x3f5809[a99_0x4792('0x6')][a99_0x4792('0x7')]==0x0){}return this['model'][a99_0x4792('0x8')]({'attributes':{'exclude':_0x2cfe40?[]:['id','created_by_user_id',a99_0x4792('0x9'),a99_0x4792('0xa'),a99_0x4792('0xb'),a99_0x4792('0xc'),a99_0x4792('0xd')]},'where':_0x3f5809[a99_0x4792('0xe')],'include':_0x234a64})['then'](_0x32324f=>{const _0x519d5f=this[a99_0x4792('0x5')]?sequelize_utils_1[a99_0x4792('0xf')][a99_0x4792('0x10')](_0x32324f,_0x3f5809[a99_0x4792('0x11')][a99_0x4792('0x12')]):sequelize_utils_1[a99_0x4792('0xf')][a99_0x4792('0x13')](_0x32324f);if(_0x228eff){return _0x228eff[a99_0x4792('0x14')]({'success':!![],'data':_0x519d5f});}else{return _0x519d5f;}})[a99_0x4792('0x15')](_0x2fcf62=>{if(_0x228eff){return _0x228eff['status'](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x2fcf62[a99_0x4792('0x17')]});}else{return _0x2fcf62[a99_0x4792('0x17')];}});}['findById'](_0xe5c39e,_0x509cee,_0x4a4b6a){if(!_0xe5c39e['user']||_0xe5c39e[a99_0x4792('0x6')][a99_0x4792('0x7')]==0x0){return _0x509cee[a99_0x4792('0x18')](0x191)['send']({'success':![],'data':a99_0x4792('0x19')});}this[a99_0x4792('0x4')][a99_0x4792('0x1a')](_0xe5c39e['params']['id'])['then'](_0x448930=>{const _0x1730cc=this['i18n']?sequelize_utils_1[a99_0x4792('0xf')]['toJSONLocalizedOnly'](_0x448930,_0xe5c39e[a99_0x4792('0x11')][a99_0x4792('0x12')]):_0x448930;return _0x509cee[a99_0x4792('0x14')]({'success':!![],'data':_0x1730cc});})[a99_0x4792('0x15')](_0x184c0d=>{return _0x509cee[a99_0x4792('0x18')](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x184c0d[a99_0x4792('0x17')]});});}[a99_0x4792('0x1b')](_0x24bcf8,_0x2cefe7,_0x55b68b){if(!_0x24bcf8[a99_0x4792('0x6')]||_0x24bcf8['user'][a99_0x4792('0x7')]==0x0){}return this[a99_0x4792('0x4')][a99_0x4792('0x8')]({'where':{'uuid':_0x24bcf8['params']['uuid']}})['then'](_0x2484fd=>{const _0x58cfcc=this[a99_0x4792('0x5')]?sequelize_utils_1[a99_0x4792('0xf')][a99_0x4792('0x10')](_0x2484fd,_0x24bcf8[a99_0x4792('0x11')]['lang']):sequelize_utils_1[a99_0x4792('0xf')]['toJSON'](_0x2484fd);return _0x58cfcc;})[a99_0x4792('0x15')](_0x4f3de3=>{return _0x4f3de3['stack'];});}['save'](_0x1ceea9,_0x26e2ee,_0x415690){if(!_0x1ceea9['user']||_0x1ceea9['user'][a99_0x4792('0x7')]==0x0){}if(_0x1ceea9[a99_0x4792('0x6')]&&_0x1ceea9[a99_0x4792('0x6')]['length']>0x0){_0x1ceea9[a99_0x4792('0x1c')]['created_by_user_id']=_0x1ceea9['user'][0x0]['id'];}return this[a99_0x4792('0x4')]['create'](_0x1ceea9['body'],this['i18n']?{'language_id':_0x1ceea9[a99_0x4792('0x11')]['lang']}:{})[a99_0x4792('0x1d')](_0x58d963=>{const _0x5a21ca=this[a99_0x4792('0x5')]?sequelize_utils_1[a99_0x4792('0xf')][a99_0x4792('0x10')](_0x58d963,_0x1ceea9[a99_0x4792('0x11')][a99_0x4792('0x12')]):_0x58d963;delete _0x5a21ca['dataValues']['id'];delete _0x5a21ca['dataValues'][a99_0x4792('0x1e')];delete _0x5a21ca[a99_0x4792('0x1f')][a99_0x4792('0x9')];delete _0x5a21ca[a99_0x4792('0x1f')][a99_0x4792('0xa')];delete _0x5a21ca[a99_0x4792('0x1f')][a99_0x4792('0xb')];delete _0x5a21ca[a99_0x4792('0x1f')][a99_0x4792('0xc')];delete _0x5a21ca[a99_0x4792('0x1f')][a99_0x4792('0xd')];if(_0x26e2ee){return _0x26e2ee[a99_0x4792('0x14')]({'success':!![],'data':_0x5a21ca});}else{return _0x5a21ca;}})[a99_0x4792('0x15')](_0x1f8374=>{if(_0x26e2ee){return _0x26e2ee[a99_0x4792('0x18')](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x1f8374[a99_0x4792('0x17')]});}else{return _0x1f8374['stack'];}});}['findOneAndUpdate'](_0x30a0a4,_0x58d061,_0x275047){if(!_0x30a0a4[a99_0x4792('0x6')]||_0x30a0a4[a99_0x4792('0x6')]['length']==0x0){}if(_0x30a0a4[a99_0x4792('0x6')]&&_0x30a0a4[a99_0x4792('0x6')]['length']>0x0){}this[a99_0x4792('0x4')][a99_0x4792('0x20')](_0x30a0a4[a99_0x4792('0x1c')]['id'])[a99_0x4792('0x1d')](_0xa54dd9=>{if(_0xa54dd9==null)return _0x58d061['json']({'success':!![],'data':_0xa54dd9});_0xa54dd9[a99_0x4792('0x21')](_0x30a0a4[a99_0x4792('0x1c')],{'language_id':_0x30a0a4['headers'][a99_0x4792('0x12')]})[a99_0x4792('0x1d')](function(_0x260081){const _0x331875=this['i18n']?sequelize_utils_1['default'][a99_0x4792('0x10')](_0xa54dd9,_0x30a0a4[a99_0x4792('0x11')][a99_0x4792('0x12')]):_0xa54dd9;return _0x58d061['json']({'success':!![],'data':_0x331875});}[a99_0x4792('0x22')](this))[a99_0x4792('0x15')](_0x256eef=>{return _0x58d061[a99_0x4792('0x18')](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x256eef[a99_0x4792('0x17')]});});})[a99_0x4792('0x15')](_0x453418=>{return _0x58d061[a99_0x4792('0x18')](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x453418['stack']});});}[a99_0x4792('0x23')](_0x5bafc9,_0xf9477,_0x2d4614,_0x250373=![]){if(!_0x5bafc9[a99_0x4792('0x6')]||_0x5bafc9[a99_0x4792('0x6')][a99_0x4792('0x7')]==0x0){}if(_0x5bafc9['user']&&_0x5bafc9[a99_0x4792('0x6')]['length']>0x0){}return this[a99_0x4792('0x4')][a99_0x4792('0x24')]({'where':_0x5bafc9[a99_0x4792('0xe')]})[a99_0x4792('0x1d')](function(_0x308aa8){if(_0x308aa8){return _0x308aa8[a99_0x4792('0x21')](_0x5bafc9[a99_0x4792('0x1c')])[a99_0x4792('0x1d')](function(_0x418730){const _0x28f572=_0x418730[a99_0x4792('0x1f')];if(_0x250373){delete _0x28f572['id'];}if(_0xf9477){return _0xf9477[a99_0x4792('0x14')]({'success':!![],'data':_0x28f572});}else{return _0x28f572;}}[a99_0x4792('0x22')](this));}else{return this['model']['create'](_0x5bafc9[a99_0x4792('0x1c')])['then'](function(_0x5066ca){if(_0xf9477){return _0xf9477[a99_0x4792('0x14')]({'success':!![],'data':_0x5066ca[a99_0x4792('0x13')]()});}else{return _0x5066ca;}});}}[a99_0x4792('0x22')](this))[a99_0x4792('0x15')](_0x5d39c4=>{if(_0xf9477){return _0xf9477['status'](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x5d39c4[a99_0x4792('0x17')]});}else{return _0x5d39c4[a99_0x4792('0x17')];}});}[a99_0x4792('0x25')](_0x4beef6,_0x57cb37,_0x6201c){if(!_0x4beef6[a99_0x4792('0x6')]||_0x4beef6[a99_0x4792('0x6')][a99_0x4792('0x7')]==0x0){}if(_0x4beef6[a99_0x4792('0x6')]&&_0x4beef6[a99_0x4792('0x6')]['length']>0x0){}return this[a99_0x4792('0x4')][a99_0x4792('0x25')]({'where':{'uuid':_0x4beef6[a99_0x4792('0x1c')][a99_0x4792('0x26')]},'defaults':_0x4beef6[a99_0x4792('0x1c')]})[a99_0x4792('0x1d')]((_0x53ef8e,_0x4c586e)=>{if(_0x4c586e){}else{}return _0x57cb37[a99_0x4792('0x14')]({'success':!![],'data':_0x53ef8e});})[a99_0x4792('0x15')](_0x1c1051=>{return _0x57cb37[a99_0x4792('0x18')](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x1c1051[a99_0x4792('0x17')]});});}[a99_0x4792('0x27')](_0x3c29d5,_0x1ae9bd,_0xe29f6b){if(!_0x3c29d5['user']||_0x3c29d5[a99_0x4792('0x6')][a99_0x4792('0x7')]==0x0){return _0x1ae9bd[a99_0x4792('0x18')](0x191)['send']({'success':![],'data':a99_0x4792('0x19')});}if(_0x3c29d5[a99_0x4792('0x6')]&&_0x3c29d5[a99_0x4792('0x6')]['length']>0x0){_0x3c29d5['body'][a99_0x4792('0x1e')]=_0x3c29d5[a99_0x4792('0x6')][0x0]['id'];}this['model']['findById'](_0x3c29d5[a99_0x4792('0xe')]['id'])[a99_0x4792('0x1d')](_0x5e599f=>{if(_0x5e599f==null)return _0x1ae9bd[a99_0x4792('0x14')]({'success':!![],'data':_0x5e599f});_0x5e599f[a99_0x4792('0x28')]()[a99_0x4792('0x1d')](function(_0x1c7c48){const _0x496b8b=this['i18n']?sequelize_utils_1[a99_0x4792('0xf')][a99_0x4792('0x10')](_0x5e599f,_0x3c29d5[a99_0x4792('0x11')][a99_0x4792('0x12')]):_0x5e599f;return _0x1ae9bd['json']({'success':!![],'data':_0x496b8b});})['catch'](_0x1435fa=>{return _0x1ae9bd[a99_0x4792('0x18')](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x1435fa[a99_0x4792('0x17')]});});})[a99_0x4792('0x15')](_0x24e29f=>{return _0x1ae9bd[a99_0x4792('0x18')](0x1f4)[a99_0x4792('0x16')]({'success':![],'data':_0x24e29f[a99_0x4792('0x17')]});});}}exports[a99_0x4792('0xf')]=CrudUtils;