var a99_0x5c1e=['./sequelize-utils','model','i18n','find','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','updated_at','deleted_at','params','then','default','toJSONLocalizedOnly','headers','lang','json','catch','send','stack','findById','status','authentication\x20failed','findByUUId','toJSON','body','create','dataValues','findOneAndUpdate','bind','updateOrCreate','update','findOrCreate','uuid','remove','destroy','__importDefault','defineProperty'];(function(_0x441adf,_0x1436f9){var _0x5781f4=function(_0x29b13a){while(--_0x29b13a){_0x441adf['push'](_0x441adf['shift']());}};_0x5781f4(++_0x1436f9);}(a99_0x5c1e,0xee));var a99_0x55a8=function(_0x25d00d,_0x5773e8){_0x25d00d=_0x25d00d-0x0;var _0xb7d2a3=a99_0x5c1e[_0x25d00d];return _0xb7d2a3;};'use strict';var __importDefault=this&&this[a99_0x55a8('0x0')]||function(_0x570ff2){return _0x570ff2&&_0x570ff2['__esModule']?_0x570ff2:{'default':_0x570ff2};};Object[a99_0x55a8('0x1')](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x55a8('0x2')));class CrudUtils{constructor(_0x3a054d,_0x11e0dc){this[a99_0x55a8('0x3')]=_0x3a054d;this[a99_0x55a8('0x4')]=_0x11e0dc;}[a99_0x55a8('0x5')](_0x2ec20a,_0x15518d,_0x3fa287,_0x5c03b7=![],_0xb4d3=[]){if(!_0x2ec20a['user']||_0x2ec20a[a99_0x55a8('0x6')][a99_0x55a8('0x7')]==0x0){}return this['model'][a99_0x55a8('0x8')]({'attributes':{'exclude':_0x5c03b7?[]:['id',a99_0x55a8('0x9'),a99_0x55a8('0xa'),a99_0x55a8('0xb'),'created_at',a99_0x55a8('0xc'),a99_0x55a8('0xd')]},'where':_0x2ec20a[a99_0x55a8('0xe')],'include':_0xb4d3})[a99_0x55a8('0xf')](_0x51ed04=>{const _0x2dda5d=this[a99_0x55a8('0x4')]?sequelize_utils_1[a99_0x55a8('0x10')][a99_0x55a8('0x11')](_0x51ed04,_0x2ec20a[a99_0x55a8('0x12')][a99_0x55a8('0x13')]):sequelize_utils_1[a99_0x55a8('0x10')]['toJSON'](_0x51ed04);if(_0x15518d){return _0x15518d[a99_0x55a8('0x14')]({'success':!![],'data':_0x2dda5d});}else{return _0x2dda5d;}})[a99_0x55a8('0x15')](_0xd1d432=>{if(_0x15518d){return _0x15518d['status'](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0xd1d432[a99_0x55a8('0x17')]});}else{return _0xd1d432[a99_0x55a8('0x17')];}});}[a99_0x55a8('0x18')](_0x2655f7,_0x539da0,_0x5c50c0){if(!_0x2655f7[a99_0x55a8('0x6')]||_0x2655f7[a99_0x55a8('0x6')]['length']==0x0){return _0x539da0[a99_0x55a8('0x19')](0x191)['send']({'success':![],'data':a99_0x55a8('0x1a')});}this[a99_0x55a8('0x3')][a99_0x55a8('0x18')](_0x2655f7['params']['id'])[a99_0x55a8('0xf')](_0xd58043=>{const _0x135672=this[a99_0x55a8('0x4')]?sequelize_utils_1[a99_0x55a8('0x10')][a99_0x55a8('0x11')](_0xd58043,_0x2655f7[a99_0x55a8('0x12')][a99_0x55a8('0x13')]):_0xd58043;return _0x539da0[a99_0x55a8('0x14')]({'success':!![],'data':_0x135672});})[a99_0x55a8('0x15')](_0xb3e65b=>{return _0x539da0[a99_0x55a8('0x19')](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0xb3e65b[a99_0x55a8('0x17')]});});}[a99_0x55a8('0x1b')](_0x4a86e8,_0x5d6789,_0x561139){if(!_0x4a86e8[a99_0x55a8('0x6')]||_0x4a86e8['user'][a99_0x55a8('0x7')]==0x0){}return this[a99_0x55a8('0x3')][a99_0x55a8('0x8')]({'where':{'uuid':_0x4a86e8[a99_0x55a8('0xe')]['uuid']}})[a99_0x55a8('0xf')](_0x379326=>{const _0x2d4326=this[a99_0x55a8('0x4')]?sequelize_utils_1['default'][a99_0x55a8('0x11')](_0x379326,_0x4a86e8[a99_0x55a8('0x12')]['lang']):sequelize_utils_1[a99_0x55a8('0x10')][a99_0x55a8('0x1c')](_0x379326);return _0x2d4326;})[a99_0x55a8('0x15')](_0x2c375c=>{return _0x2c375c[a99_0x55a8('0x17')];});}['save'](_0x3f77c8,_0x19d285,_0x100162){if(!_0x3f77c8[a99_0x55a8('0x6')]||_0x3f77c8[a99_0x55a8('0x6')][a99_0x55a8('0x7')]==0x0){}if(_0x3f77c8[a99_0x55a8('0x6')]&&_0x3f77c8[a99_0x55a8('0x6')][a99_0x55a8('0x7')]>0x0){_0x3f77c8[a99_0x55a8('0x1d')]['created_by_user_id']=_0x3f77c8[a99_0x55a8('0x6')][0x0]['id'];}return this['model'][a99_0x55a8('0x1e')](_0x3f77c8[a99_0x55a8('0x1d')],this[a99_0x55a8('0x4')]?{'language_id':_0x3f77c8[a99_0x55a8('0x12')][a99_0x55a8('0x13')]}:{})[a99_0x55a8('0xf')](_0x52f9fd=>{const _0x4750aa=this[a99_0x55a8('0x4')]?sequelize_utils_1[a99_0x55a8('0x10')][a99_0x55a8('0x11')](_0x52f9fd,_0x3f77c8['headers'][a99_0x55a8('0x13')]):_0x52f9fd;delete _0x4750aa[a99_0x55a8('0x1f')]['id'];delete _0x4750aa[a99_0x55a8('0x1f')]['created_by_user_id'];delete _0x4750aa[a99_0x55a8('0x1f')][a99_0x55a8('0xa')];delete _0x4750aa[a99_0x55a8('0x1f')][a99_0x55a8('0xb')];delete _0x4750aa[a99_0x55a8('0x1f')]['created_at'];delete _0x4750aa['dataValues']['updated_at'];delete _0x4750aa[a99_0x55a8('0x1f')][a99_0x55a8('0xd')];if(_0x19d285){return _0x19d285[a99_0x55a8('0x14')]({'success':!![],'data':_0x4750aa});}else{return _0x4750aa;}})['catch'](_0x4cc228=>{if(_0x19d285){return _0x19d285[a99_0x55a8('0x19')](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0x4cc228[a99_0x55a8('0x17')]});}else{return _0x4cc228[a99_0x55a8('0x17')];}});}[a99_0x55a8('0x20')](_0x155b98,_0x1eb22c,_0x5dc4cb){if(!_0x155b98[a99_0x55a8('0x6')]||_0x155b98['user']['length']==0x0){}if(_0x155b98[a99_0x55a8('0x6')]&&_0x155b98[a99_0x55a8('0x6')][a99_0x55a8('0x7')]>0x0){}this[a99_0x55a8('0x3')]['findByPk'](_0x155b98[a99_0x55a8('0x1d')]['id'])[a99_0x55a8('0xf')](_0x31a3df=>{if(_0x31a3df==null)return _0x1eb22c['json']({'success':!![],'data':_0x31a3df});_0x31a3df['update'](_0x155b98['body'],{'language_id':_0x155b98[a99_0x55a8('0x12')][a99_0x55a8('0x13')]})[a99_0x55a8('0xf')](function(_0x2c6bdf){const _0x48994d=this['i18n']?sequelize_utils_1[a99_0x55a8('0x10')][a99_0x55a8('0x11')](_0x31a3df,_0x155b98[a99_0x55a8('0x12')]['lang']):_0x31a3df;return _0x1eb22c['json']({'success':!![],'data':_0x48994d});}[a99_0x55a8('0x21')](this))[a99_0x55a8('0x15')](_0xa99797=>{return _0x1eb22c[a99_0x55a8('0x19')](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0xa99797[a99_0x55a8('0x17')]});});})[a99_0x55a8('0x15')](_0x1b61a=>{return _0x1eb22c['status'](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0x1b61a[a99_0x55a8('0x17')]});});}[a99_0x55a8('0x22')](_0x472462,_0x5f608e,_0x2f3c31,_0x1b8deb=![]){if(!_0x472462[a99_0x55a8('0x6')]||_0x472462[a99_0x55a8('0x6')]['length']==0x0){}if(_0x472462[a99_0x55a8('0x6')]&&_0x472462[a99_0x55a8('0x6')][a99_0x55a8('0x7')]>0x0){}return this[a99_0x55a8('0x3')]['findOne']({'where':_0x472462[a99_0x55a8('0xe')]})['then'](function(_0x571c82){if(_0x571c82){return _0x571c82[a99_0x55a8('0x23')](_0x472462[a99_0x55a8('0x1d')])[a99_0x55a8('0xf')](function(_0x4ba49c){const _0x2753df=_0x4ba49c['dataValues'];if(_0x1b8deb){delete _0x2753df['id'];}if(_0x5f608e){return _0x5f608e[a99_0x55a8('0x14')]({'success':!![],'data':_0x2753df});}else{return _0x2753df;}}['bind'](this));}else{return this[a99_0x55a8('0x3')][a99_0x55a8('0x1e')](_0x472462[a99_0x55a8('0x1d')])['then'](function(_0x3b1600){if(_0x5f608e){return _0x5f608e[a99_0x55a8('0x14')]({'success':!![],'data':_0x3b1600[a99_0x55a8('0x1c')]()});}else{return _0x3b1600;}});}}[a99_0x55a8('0x21')](this))[a99_0x55a8('0x15')](_0x4dabe3=>{if(_0x5f608e){return _0x5f608e['status'](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0x4dabe3['stack']});}else{return _0x4dabe3['stack'];}});}[a99_0x55a8('0x24')](_0x4ccd7d,_0x5003f5,_0x386f5c){if(!_0x4ccd7d[a99_0x55a8('0x6')]||_0x4ccd7d[a99_0x55a8('0x6')][a99_0x55a8('0x7')]==0x0){}if(_0x4ccd7d[a99_0x55a8('0x6')]&&_0x4ccd7d[a99_0x55a8('0x6')][a99_0x55a8('0x7')]>0x0){}return this[a99_0x55a8('0x3')][a99_0x55a8('0x24')]({'where':{'uuid':_0x4ccd7d[a99_0x55a8('0x1d')][a99_0x55a8('0x25')]},'defaults':_0x4ccd7d[a99_0x55a8('0x1d')]})[a99_0x55a8('0xf')]((_0x1327f2,_0x2de1d1)=>{if(_0x2de1d1){}else{}return _0x5003f5[a99_0x55a8('0x14')]({'success':!![],'data':_0x1327f2});})[a99_0x55a8('0x15')](_0x2b12ec=>{return _0x5003f5[a99_0x55a8('0x19')](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0x2b12ec[a99_0x55a8('0x17')]});});}[a99_0x55a8('0x26')](_0x1b7b57,_0x14941a,_0x104f57){if(!_0x1b7b57[a99_0x55a8('0x6')]||_0x1b7b57[a99_0x55a8('0x6')][a99_0x55a8('0x7')]==0x0){return _0x14941a[a99_0x55a8('0x19')](0x191)[a99_0x55a8('0x16')]({'success':![],'data':a99_0x55a8('0x1a')});}if(_0x1b7b57[a99_0x55a8('0x6')]&&_0x1b7b57[a99_0x55a8('0x6')][a99_0x55a8('0x7')]>0x0){_0x1b7b57['body']['created_by_user_id']=_0x1b7b57[a99_0x55a8('0x6')][0x0]['id'];}this[a99_0x55a8('0x3')][a99_0x55a8('0x18')](_0x1b7b57[a99_0x55a8('0xe')]['id'])[a99_0x55a8('0xf')](_0x2e157c=>{if(_0x2e157c==null)return _0x14941a[a99_0x55a8('0x14')]({'success':!![],'data':_0x2e157c});_0x2e157c[a99_0x55a8('0x27')]()[a99_0x55a8('0xf')](function(_0x443b41){const _0x70d9be=this[a99_0x55a8('0x4')]?sequelize_utils_1[a99_0x55a8('0x10')][a99_0x55a8('0x11')](_0x2e157c,_0x1b7b57[a99_0x55a8('0x12')][a99_0x55a8('0x13')]):_0x2e157c;return _0x14941a['json']({'success':!![],'data':_0x70d9be});})[a99_0x55a8('0x15')](_0x5372d4=>{return _0x14941a[a99_0x55a8('0x19')](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0x5372d4['stack']});});})['catch'](_0x425fdc=>{return _0x14941a[a99_0x55a8('0x19')](0x1f4)[a99_0x55a8('0x16')]({'success':![],'data':_0x425fdc[a99_0x55a8('0x17')]});});}}exports[a99_0x55a8('0x10')]=CrudUtils;