var a99_0x5987=['updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','params','then','default','toJSONLocalizedOnly','headers','lang','toJSON','json','catch','status','send','stack','findById','length','authentication\x20failed','findByUUId','save','body','create','dataValues','findByPk','update','updateOrCreate','findOne','bind','findOrCreate','uuid','remove','destroy','__importDefault','defineProperty','__esModule','./sequelize-utils','i18n','find','user','model','findAll','created_by_user_id'];(function(_0x1186d3,_0x1be8f4){var _0x21820a=function(_0xd266cc){while(--_0xd266cc){_0x1186d3['push'](_0x1186d3['shift']());}};_0x21820a(++_0x1be8f4);}(a99_0x5987,0x7a));var a99_0xcd2f=function(_0x4add28,_0x10685c){_0x4add28=_0x4add28-0x0;var _0x591a90=a99_0x5987[_0x4add28];return _0x591a90;};'use strict';var __importDefault=this&&this[a99_0xcd2f('0x0')]||function(_0x4b1f4f){return _0x4b1f4f&&_0x4b1f4f['__esModule']?_0x4b1f4f:{'default':_0x4b1f4f};};Object[a99_0xcd2f('0x1')](exports,a99_0xcd2f('0x2'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0xcd2f('0x3')));class CrudUtils{constructor(_0x5777cf,_0x1bf582){this['model']=_0x5777cf;this[a99_0xcd2f('0x4')]=_0x1bf582;}[a99_0xcd2f('0x5')](_0x93879b,_0x4f3e42,_0x4b6872,_0x11e087=![],_0x316d14=[]){if(!_0x93879b[a99_0xcd2f('0x6')]||_0x93879b[a99_0xcd2f('0x6')]['length']==0x0){}return this[a99_0xcd2f('0x7')][a99_0xcd2f('0x8')]({'attributes':{'exclude':_0x11e087?[]:['id',a99_0xcd2f('0x9'),a99_0xcd2f('0xa'),a99_0xcd2f('0xb'),a99_0xcd2f('0xc'),a99_0xcd2f('0xd'),a99_0xcd2f('0xe')]},'where':_0x93879b[a99_0xcd2f('0xf')],'include':_0x316d14})[a99_0xcd2f('0x10')](_0x2e3071=>{const _0x31f6b0=this[a99_0xcd2f('0x4')]?sequelize_utils_1[a99_0xcd2f('0x11')][a99_0xcd2f('0x12')](_0x2e3071,_0x93879b[a99_0xcd2f('0x13')][a99_0xcd2f('0x14')]):sequelize_utils_1['default'][a99_0xcd2f('0x15')](_0x2e3071);if(_0x4f3e42){return _0x4f3e42[a99_0xcd2f('0x16')]({'success':!![],'data':_0x31f6b0});}else{return _0x31f6b0;}})[a99_0xcd2f('0x17')](_0x4fc86c=>{if(_0x4f3e42){return _0x4f3e42[a99_0xcd2f('0x18')](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x4fc86c[a99_0xcd2f('0x1a')]});}else{return _0x4fc86c[a99_0xcd2f('0x1a')];}});}[a99_0xcd2f('0x1b')](_0x4ce752,_0x111a9f,_0x2ddf55){if(!_0x4ce752[a99_0xcd2f('0x6')]||_0x4ce752[a99_0xcd2f('0x6')][a99_0xcd2f('0x1c')]==0x0){return _0x111a9f['status'](0x191)[a99_0xcd2f('0x19')]({'success':![],'data':a99_0xcd2f('0x1d')});}this[a99_0xcd2f('0x7')][a99_0xcd2f('0x1b')](_0x4ce752[a99_0xcd2f('0xf')]['id'])[a99_0xcd2f('0x10')](_0x57916d=>{const _0x905355=this[a99_0xcd2f('0x4')]?sequelize_utils_1[a99_0xcd2f('0x11')]['toJSONLocalizedOnly'](_0x57916d,_0x4ce752[a99_0xcd2f('0x13')][a99_0xcd2f('0x14')]):_0x57916d;return _0x111a9f[a99_0xcd2f('0x16')]({'success':!![],'data':_0x905355});})[a99_0xcd2f('0x17')](_0x1d32f2=>{return _0x111a9f[a99_0xcd2f('0x18')](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x1d32f2[a99_0xcd2f('0x1a')]});});}[a99_0xcd2f('0x1e')](_0x22638e,_0x5d706f,_0x5ecdd6){if(!_0x22638e[a99_0xcd2f('0x6')]||_0x22638e[a99_0xcd2f('0x6')][a99_0xcd2f('0x1c')]==0x0){}return this[a99_0xcd2f('0x7')]['findAll']({'where':{'uuid':_0x22638e[a99_0xcd2f('0xf')]['uuid']}})['then'](_0x952af2=>{const _0x149d5e=this[a99_0xcd2f('0x4')]?sequelize_utils_1['default'][a99_0xcd2f('0x12')](_0x952af2,_0x22638e['headers']['lang']):sequelize_utils_1['default'][a99_0xcd2f('0x15')](_0x952af2);return _0x149d5e;})['catch'](_0x134ee5=>{return _0x134ee5[a99_0xcd2f('0x1a')];});}[a99_0xcd2f('0x1f')](_0x5747ad,_0x57d525,_0x38471f){if(!_0x5747ad[a99_0xcd2f('0x6')]||_0x5747ad[a99_0xcd2f('0x6')][a99_0xcd2f('0x1c')]==0x0){}if(_0x5747ad[a99_0xcd2f('0x6')]&&_0x5747ad[a99_0xcd2f('0x6')]['length']>0x0){_0x5747ad[a99_0xcd2f('0x20')]['created_by_user_id']=_0x5747ad['user'][0x0]['id'];}return this[a99_0xcd2f('0x7')][a99_0xcd2f('0x21')](_0x5747ad[a99_0xcd2f('0x20')],this[a99_0xcd2f('0x4')]?{'language_id':_0x5747ad[a99_0xcd2f('0x13')][a99_0xcd2f('0x14')]}:{})['then'](_0x2be41d=>{const _0x170a62=this[a99_0xcd2f('0x4')]?sequelize_utils_1[a99_0xcd2f('0x11')][a99_0xcd2f('0x12')](_0x2be41d,_0x5747ad['headers']['lang']):_0x2be41d;delete _0x170a62['dataValues']['id'];delete _0x170a62[a99_0xcd2f('0x22')]['created_by_user_id'];delete _0x170a62[a99_0xcd2f('0x22')]['updated_by_user_id'];delete _0x170a62[a99_0xcd2f('0x22')][a99_0xcd2f('0xb')];delete _0x170a62[a99_0xcd2f('0x22')][a99_0xcd2f('0xc')];delete _0x170a62[a99_0xcd2f('0x22')][a99_0xcd2f('0xd')];delete _0x170a62[a99_0xcd2f('0x22')][a99_0xcd2f('0xe')];if(_0x57d525){return _0x57d525[a99_0xcd2f('0x16')]({'success':!![],'data':_0x170a62});}else{return _0x170a62;}})[a99_0xcd2f('0x17')](_0x582593=>{if(_0x57d525){return _0x57d525[a99_0xcd2f('0x18')](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x582593[a99_0xcd2f('0x1a')]});}else{return _0x582593[a99_0xcd2f('0x1a')];}});}['findOneAndUpdate'](_0x5ce7d7,_0x206bbe,_0xf24f35){if(!_0x5ce7d7[a99_0xcd2f('0x6')]||_0x5ce7d7[a99_0xcd2f('0x6')][a99_0xcd2f('0x1c')]==0x0){}if(_0x5ce7d7[a99_0xcd2f('0x6')]&&_0x5ce7d7[a99_0xcd2f('0x6')][a99_0xcd2f('0x1c')]>0x0){}this[a99_0xcd2f('0x7')][a99_0xcd2f('0x23')](_0x5ce7d7[a99_0xcd2f('0x20')]['id'])['then'](_0x3bdaf8=>{if(_0x3bdaf8==null)return _0x206bbe[a99_0xcd2f('0x16')]({'success':!![],'data':_0x3bdaf8});_0x3bdaf8[a99_0xcd2f('0x24')](_0x5ce7d7[a99_0xcd2f('0x20')],{'language_id':_0x5ce7d7['headers'][a99_0xcd2f('0x14')]})[a99_0xcd2f('0x10')](function(_0x53b1ea){const _0x31cebc=this[a99_0xcd2f('0x4')]?sequelize_utils_1[a99_0xcd2f('0x11')]['toJSONLocalizedOnly'](_0x3bdaf8,_0x5ce7d7[a99_0xcd2f('0x13')][a99_0xcd2f('0x14')]):_0x3bdaf8;return _0x206bbe['json']({'success':!![],'data':_0x31cebc});}['bind'](this))[a99_0xcd2f('0x17')](_0x529ea6=>{return _0x206bbe[a99_0xcd2f('0x18')](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x529ea6[a99_0xcd2f('0x1a')]});});})['catch'](_0x6abaf5=>{return _0x206bbe[a99_0xcd2f('0x18')](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x6abaf5['stack']});});}[a99_0xcd2f('0x25')](_0x122337,_0xfe04eb,_0x117458,_0x5412d1=![]){if(!_0x122337[a99_0xcd2f('0x6')]||_0x122337[a99_0xcd2f('0x6')]['length']==0x0){}if(_0x122337[a99_0xcd2f('0x6')]&&_0x122337[a99_0xcd2f('0x6')][a99_0xcd2f('0x1c')]>0x0){}return this[a99_0xcd2f('0x7')][a99_0xcd2f('0x26')]({'where':_0x122337[a99_0xcd2f('0xf')]})[a99_0xcd2f('0x10')](function(_0x2c2cd0){if(_0x2c2cd0){return _0x2c2cd0[a99_0xcd2f('0x24')](_0x122337[a99_0xcd2f('0x20')])[a99_0xcd2f('0x10')](function(_0x5c52f3){const _0x542241=_0x5c52f3[a99_0xcd2f('0x22')];if(_0x5412d1){delete _0x542241['id'];}if(_0xfe04eb){return _0xfe04eb[a99_0xcd2f('0x16')]({'success':!![],'data':_0x542241});}else{return _0x542241;}}[a99_0xcd2f('0x27')](this));}else{return this['model'][a99_0xcd2f('0x21')](_0x122337[a99_0xcd2f('0x20')])[a99_0xcd2f('0x10')](function(_0x2d5d5b){if(_0xfe04eb){return _0xfe04eb['json']({'success':!![],'data':_0x2d5d5b[a99_0xcd2f('0x15')]()});}else{return _0x2d5d5b;}});}}['bind'](this))['catch'](_0x4c723b=>{if(_0xfe04eb){return _0xfe04eb['status'](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x4c723b['stack']});}else{return _0x4c723b['stack'];}});}['findOrCreate'](_0x5bab50,_0x424472,_0x7c346b){if(!_0x5bab50[a99_0xcd2f('0x6')]||_0x5bab50[a99_0xcd2f('0x6')][a99_0xcd2f('0x1c')]==0x0){}if(_0x5bab50[a99_0xcd2f('0x6')]&&_0x5bab50[a99_0xcd2f('0x6')]['length']>0x0){}return this[a99_0xcd2f('0x7')][a99_0xcd2f('0x28')]({'where':{'uuid':_0x5bab50[a99_0xcd2f('0x20')][a99_0xcd2f('0x29')]},'defaults':_0x5bab50[a99_0xcd2f('0x20')]})['then']((_0x28b70c,_0x22e690)=>{if(_0x22e690){}else{}return _0x424472[a99_0xcd2f('0x16')]({'success':!![],'data':_0x28b70c});})[a99_0xcd2f('0x17')](_0x1970c3=>{return _0x424472[a99_0xcd2f('0x18')](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x1970c3[a99_0xcd2f('0x1a')]});});}[a99_0xcd2f('0x2a')](_0x50f4d6,_0x4a2e93,_0x59852a){if(!_0x50f4d6['user']||_0x50f4d6['user'][a99_0xcd2f('0x1c')]==0x0){return _0x4a2e93[a99_0xcd2f('0x18')](0x191)[a99_0xcd2f('0x19')]({'success':![],'data':'authentication\x20failed'});}if(_0x50f4d6[a99_0xcd2f('0x6')]&&_0x50f4d6[a99_0xcd2f('0x6')]['length']>0x0){_0x50f4d6[a99_0xcd2f('0x20')][a99_0xcd2f('0x9')]=_0x50f4d6[a99_0xcd2f('0x6')][0x0]['id'];}this[a99_0xcd2f('0x7')][a99_0xcd2f('0x1b')](_0x50f4d6['params']['id'])['then'](_0x3401be=>{if(_0x3401be==null)return _0x4a2e93['json']({'success':!![],'data':_0x3401be});_0x3401be[a99_0xcd2f('0x2b')]()[a99_0xcd2f('0x10')](function(_0x55898c){const _0x2a556e=this[a99_0xcd2f('0x4')]?sequelize_utils_1[a99_0xcd2f('0x11')][a99_0xcd2f('0x12')](_0x3401be,_0x50f4d6[a99_0xcd2f('0x13')][a99_0xcd2f('0x14')]):_0x3401be;return _0x4a2e93[a99_0xcd2f('0x16')]({'success':!![],'data':_0x2a556e});})[a99_0xcd2f('0x17')](_0x50a815=>{return _0x4a2e93[a99_0xcd2f('0x18')](0x1f4)[a99_0xcd2f('0x19')]({'success':![],'data':_0x50a815[a99_0xcd2f('0x1a')]});});})[a99_0xcd2f('0x17')](_0x369c2f=>{return _0x4a2e93['status'](0x1f4)['send']({'success':![],'data':_0x369c2f[a99_0xcd2f('0x1a')]});});}}exports['default']=CrudUtils;