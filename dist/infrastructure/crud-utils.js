var a99_0x11fb=['status','send','stack','findById','findByUUId','lang','body','create','dataValues','deleted_by_user_id','created_at','updated_at','findOneAndUpdate','findByPk','bind','updateOrCreate','findOne','update','findOrCreate','uuid','remove','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','find','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_at','params','then','default','toJSONLocalizedOnly','headers','toJSON','json','catch'];(function(_0x52d6d7,_0x57b85a){var _0x471d50=function(_0x12c68b){while(--_0x12c68b){_0x52d6d7['push'](_0x52d6d7['shift']());}};_0x471d50(++_0x57b85a);}(a99_0x11fb,0xe7));var a99_0x50f5=function(_0x3653fd,_0x5079c6){_0x3653fd=_0x3653fd-0x0;var _0x32c3e3=a99_0x11fb[_0x3653fd];return _0x32c3e3;};'use strict';var __importDefault=this&&this[a99_0x50f5('0x0')]||function(_0x244fdf){return _0x244fdf&&_0x244fdf[a99_0x50f5('0x1')]?_0x244fdf:{'default':_0x244fdf};};Object[a99_0x50f5('0x2')](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x50f5('0x3')));class CrudUtils{constructor(_0x443e54,_0xcefb7c){this[a99_0x50f5('0x4')]=_0x443e54;this[a99_0x50f5('0x5')]=_0xcefb7c;}[a99_0x50f5('0x6')](_0x2e62e5,_0x2ef693,_0x5cff65,_0x4f7498=![],_0xefb271=[]){if(!_0x2e62e5['user']||_0x2e62e5[a99_0x50f5('0x7')][a99_0x50f5('0x8')]==0x0){}return this[a99_0x50f5('0x4')][a99_0x50f5('0x9')]({'attributes':{'exclude':_0x4f7498?[]:['id',a99_0x50f5('0xa'),a99_0x50f5('0xb'),'deleted_by_user_id','created_at','updated_at',a99_0x50f5('0xc')]},'where':_0x2e62e5[a99_0x50f5('0xd')],'include':_0xefb271})[a99_0x50f5('0xe')](_0x546a23=>{const _0x4c4c4e=this[a99_0x50f5('0x5')]?sequelize_utils_1[a99_0x50f5('0xf')][a99_0x50f5('0x10')](_0x546a23,_0x2e62e5[a99_0x50f5('0x11')]['lang']):sequelize_utils_1[a99_0x50f5('0xf')][a99_0x50f5('0x12')](_0x546a23);if(_0x2ef693){return _0x2ef693[a99_0x50f5('0x13')]({'success':!![],'data':_0x4c4c4e});}else{return _0x4c4c4e;}})[a99_0x50f5('0x14')](_0x169c3e=>{if(_0x2ef693){return _0x2ef693[a99_0x50f5('0x15')](0x1f4)[a99_0x50f5('0x16')]({'success':![],'data':_0x169c3e[a99_0x50f5('0x17')]});}else{return _0x169c3e[a99_0x50f5('0x17')];}});}[a99_0x50f5('0x18')](_0x50ddc9,_0x27edc8,_0x4629ad){if(!_0x50ddc9[a99_0x50f5('0x7')]||_0x50ddc9['user'][a99_0x50f5('0x8')]==0x0){return _0x27edc8[a99_0x50f5('0x15')](0x191)[a99_0x50f5('0x16')]({'success':![],'data':'authentication\x20failed'});}this['model']['findById'](_0x50ddc9['params']['id'])[a99_0x50f5('0xe')](_0x4322ea=>{const _0x198828=this[a99_0x50f5('0x5')]?sequelize_utils_1[a99_0x50f5('0xf')][a99_0x50f5('0x10')](_0x4322ea,_0x50ddc9[a99_0x50f5('0x11')]['lang']):_0x4322ea;return _0x27edc8[a99_0x50f5('0x13')]({'success':!![],'data':_0x198828});})[a99_0x50f5('0x14')](_0x230a02=>{return _0x27edc8['status'](0x1f4)[a99_0x50f5('0x16')]({'success':![],'data':_0x230a02[a99_0x50f5('0x17')]});});}[a99_0x50f5('0x19')](_0x7839,_0x2548e5,_0x11b1d0){if(!_0x7839['user']||_0x7839[a99_0x50f5('0x7')][a99_0x50f5('0x8')]==0x0){}return this[a99_0x50f5('0x4')]['findAll']({'where':{'uuid':_0x7839[a99_0x50f5('0xd')]['uuid']}})[a99_0x50f5('0xe')](_0x181563=>{const _0x4c5396=this[a99_0x50f5('0x5')]?sequelize_utils_1[a99_0x50f5('0xf')][a99_0x50f5('0x10')](_0x181563,_0x7839[a99_0x50f5('0x11')][a99_0x50f5('0x1a')]):sequelize_utils_1[a99_0x50f5('0xf')]['toJSON'](_0x181563);return _0x4c5396;})[a99_0x50f5('0x14')](_0x3a1df2=>{return _0x3a1df2[a99_0x50f5('0x17')];});}['save'](_0xc584a5,_0x5676b2,_0x38c6d5){if(!_0xc584a5['user']||_0xc584a5[a99_0x50f5('0x7')][a99_0x50f5('0x8')]==0x0){}if(_0xc584a5[a99_0x50f5('0x7')]&&_0xc584a5[a99_0x50f5('0x7')]['length']>0x0){_0xc584a5[a99_0x50f5('0x1b')][a99_0x50f5('0xa')]=_0xc584a5[a99_0x50f5('0x7')][0x0]['id'];}return this[a99_0x50f5('0x4')][a99_0x50f5('0x1c')](_0xc584a5[a99_0x50f5('0x1b')],this[a99_0x50f5('0x5')]?{'language_id':_0xc584a5[a99_0x50f5('0x11')][a99_0x50f5('0x1a')]}:{})[a99_0x50f5('0xe')](_0x4d3aba=>{const _0x2e2773=this[a99_0x50f5('0x5')]?sequelize_utils_1[a99_0x50f5('0xf')][a99_0x50f5('0x10')](_0x4d3aba,_0xc584a5[a99_0x50f5('0x11')][a99_0x50f5('0x1a')]):_0x4d3aba;delete _0x2e2773[a99_0x50f5('0x1d')]['id'];delete _0x2e2773[a99_0x50f5('0x1d')][a99_0x50f5('0xa')];delete _0x2e2773['dataValues'][a99_0x50f5('0xb')];delete _0x2e2773['dataValues'][a99_0x50f5('0x1e')];delete _0x2e2773[a99_0x50f5('0x1d')][a99_0x50f5('0x1f')];delete _0x2e2773['dataValues'][a99_0x50f5('0x20')];delete _0x2e2773[a99_0x50f5('0x1d')][a99_0x50f5('0xc')];if(_0x5676b2){return _0x5676b2[a99_0x50f5('0x13')]({'success':!![],'data':_0x2e2773});}else{return _0x2e2773;}})['catch'](_0x48781c=>{if(_0x5676b2){return _0x5676b2[a99_0x50f5('0x15')](0x1f4)[a99_0x50f5('0x16')]({'success':![],'data':_0x48781c[a99_0x50f5('0x17')]});}else{return _0x48781c['stack'];}});}[a99_0x50f5('0x21')](_0x1abfda,_0x37131f,_0x1fde3b){if(!_0x1abfda[a99_0x50f5('0x7')]||_0x1abfda[a99_0x50f5('0x7')][a99_0x50f5('0x8')]==0x0){}if(_0x1abfda[a99_0x50f5('0x7')]&&_0x1abfda[a99_0x50f5('0x7')][a99_0x50f5('0x8')]>0x0){}this['model'][a99_0x50f5('0x22')](_0x1abfda[a99_0x50f5('0x1b')]['id'])['then'](_0x3108c2=>{if(_0x3108c2==null)return _0x37131f[a99_0x50f5('0x13')]({'success':!![],'data':_0x3108c2});_0x3108c2['update'](_0x1abfda['body'],{'language_id':_0x1abfda[a99_0x50f5('0x11')][a99_0x50f5('0x1a')]})[a99_0x50f5('0xe')](function(_0x125e52){const _0x414764=this[a99_0x50f5('0x5')]?sequelize_utils_1['default'][a99_0x50f5('0x10')](_0x3108c2,_0x1abfda['headers'][a99_0x50f5('0x1a')]):_0x3108c2;return _0x37131f[a99_0x50f5('0x13')]({'success':!![],'data':_0x414764});}[a99_0x50f5('0x23')](this))[a99_0x50f5('0x14')](_0x1b0655=>{return _0x37131f[a99_0x50f5('0x15')](0x1f4)[a99_0x50f5('0x16')]({'success':![],'data':_0x1b0655[a99_0x50f5('0x17')]});});})[a99_0x50f5('0x14')](_0x1c237b=>{return _0x37131f[a99_0x50f5('0x15')](0x1f4)['send']({'success':![],'data':_0x1c237b['stack']});});}[a99_0x50f5('0x24')](_0x2fcbcd,_0x463c85,_0x2b08d4,_0x474e01=![]){if(!_0x2fcbcd[a99_0x50f5('0x7')]||_0x2fcbcd[a99_0x50f5('0x7')][a99_0x50f5('0x8')]==0x0){}if(_0x2fcbcd[a99_0x50f5('0x7')]&&_0x2fcbcd[a99_0x50f5('0x7')][a99_0x50f5('0x8')]>0x0){}return this[a99_0x50f5('0x4')][a99_0x50f5('0x25')]({'where':_0x2fcbcd[a99_0x50f5('0xd')]})[a99_0x50f5('0xe')](function(_0x29f976){if(_0x29f976){return _0x29f976[a99_0x50f5('0x26')](_0x2fcbcd[a99_0x50f5('0x1b')])[a99_0x50f5('0xe')](function(_0x2083ad){const _0x2bcd2c=_0x2083ad['dataValues'];if(_0x474e01){delete _0x2bcd2c['id'];}if(_0x463c85){return _0x463c85['json']({'success':!![],'data':_0x2bcd2c});}else{return _0x2bcd2c;}}[a99_0x50f5('0x23')](this));}else{return this['model'][a99_0x50f5('0x1c')](_0x2fcbcd[a99_0x50f5('0x1b')])[a99_0x50f5('0xe')](function(_0x4670b9){if(_0x463c85){return _0x463c85[a99_0x50f5('0x13')]({'success':!![],'data':_0x4670b9['toJSON']()});}else{return _0x4670b9;}});}}[a99_0x50f5('0x23')](this))[a99_0x50f5('0x14')](_0x8080c4=>{if(_0x463c85){return _0x463c85[a99_0x50f5('0x15')](0x1f4)[a99_0x50f5('0x16')]({'success':![],'data':_0x8080c4[a99_0x50f5('0x17')]});}else{return _0x8080c4[a99_0x50f5('0x17')];}});}[a99_0x50f5('0x27')](_0x38ce10,_0x4a5f47,_0x3fbb7f){if(!_0x38ce10[a99_0x50f5('0x7')]||_0x38ce10[a99_0x50f5('0x7')][a99_0x50f5('0x8')]==0x0){}if(_0x38ce10[a99_0x50f5('0x7')]&&_0x38ce10[a99_0x50f5('0x7')][a99_0x50f5('0x8')]>0x0){}return this[a99_0x50f5('0x4')][a99_0x50f5('0x27')]({'where':{'uuid':_0x38ce10[a99_0x50f5('0x1b')][a99_0x50f5('0x28')]},'defaults':_0x38ce10[a99_0x50f5('0x1b')]})['then']((_0xb9fe6b,_0x221c0d)=>{if(_0x221c0d){}else{}return _0x4a5f47[a99_0x50f5('0x13')]({'success':!![],'data':_0xb9fe6b});})[a99_0x50f5('0x14')](_0x57788e=>{return _0x4a5f47['status'](0x1f4)[a99_0x50f5('0x16')]({'success':![],'data':_0x57788e[a99_0x50f5('0x17')]});});}[a99_0x50f5('0x29')](_0x233cff,_0xa12ba4,_0x45bfc5){if(!_0x233cff['user']||_0x233cff[a99_0x50f5('0x7')][a99_0x50f5('0x8')]==0x0){return _0xa12ba4[a99_0x50f5('0x15')](0x191)[a99_0x50f5('0x16')]({'success':![],'data':'authentication\x20failed'});}if(_0x233cff[a99_0x50f5('0x7')]&&_0x233cff[a99_0x50f5('0x7')][a99_0x50f5('0x8')]>0x0){_0x233cff[a99_0x50f5('0x1b')][a99_0x50f5('0xa')]=_0x233cff['user'][0x0]['id'];}this[a99_0x50f5('0x4')][a99_0x50f5('0x18')](_0x233cff[a99_0x50f5('0xd')]['id'])[a99_0x50f5('0xe')](_0x3740b8=>{if(_0x3740b8==null)return _0xa12ba4['json']({'success':!![],'data':_0x3740b8});_0x3740b8['destroy']()[a99_0x50f5('0xe')](function(_0x1fac98){const _0x59b4d3=this[a99_0x50f5('0x5')]?sequelize_utils_1[a99_0x50f5('0xf')][a99_0x50f5('0x10')](_0x3740b8,_0x233cff['headers'][a99_0x50f5('0x1a')]):_0x3740b8;return _0xa12ba4[a99_0x50f5('0x13')]({'success':!![],'data':_0x59b4d3});})[a99_0x50f5('0x14')](_0x31ccd5=>{return _0xa12ba4[a99_0x50f5('0x15')](0x1f4)[a99_0x50f5('0x16')]({'success':![],'data':_0x31ccd5['stack']});});})[a99_0x50f5('0x14')](_0x1bde61=>{return _0xa12ba4[a99_0x50f5('0x15')](0x1f4)['send']({'success':![],'data':_0x1bde61[a99_0x50f5('0x17')]});});}}exports['default']=CrudUtils;