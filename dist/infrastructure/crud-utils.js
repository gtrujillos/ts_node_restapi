var a99_0x4523=['params','then','default','headers','toJSON','json','send','stack','findById','status','authentication\x20failed','toJSONLocalizedOnly','lang','catch','findAll','uuid','save','body','create','dataValues','deleted_by_user_id','findOneAndUpdate','update','bind','updateOrCreate','findOne','findOrCreate','remove','__esModule','model','i18n','user','length','created_by_user_id','updated_by_user_id','updated_at'];(function(_0x2f184b,_0x150adb){var _0x66a54d=function(_0x51fe1d){while(--_0x51fe1d){_0x2f184b['push'](_0x2f184b['shift']());}};_0x66a54d(++_0x150adb);}(a99_0x4523,0x1f0));var a99_0x3dc1=function(_0x304550,_0xca6970){_0x304550=_0x304550-0x0;var _0x16a096=a99_0x4523[_0x304550];return _0x16a096;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x53ad1a){return _0x53ad1a&&_0x53ad1a[a99_0x3dc1('0x0')]?_0x53ad1a:{'default':_0x53ad1a};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require('./sequelize-utils'));class CrudUtils{constructor(_0x2718ac,_0x5c897d){this[a99_0x3dc1('0x1')]=_0x2718ac;this[a99_0x3dc1('0x2')]=_0x5c897d;}['find'](_0x902bf,_0x851d28,_0x396648,_0x5cab68=![],_0x19c1aa=[]){if(!_0x902bf[a99_0x3dc1('0x3')]||_0x902bf[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]==0x0){}return this['model']['findAll']({'attributes':{'exclude':_0x5cab68?[]:['id',a99_0x3dc1('0x5'),a99_0x3dc1('0x6'),'deleted_by_user_id','created_at',a99_0x3dc1('0x7'),'deleted_at']},'where':_0x902bf[a99_0x3dc1('0x8')],'include':_0x19c1aa})[a99_0x3dc1('0x9')](_0x3455a8=>{const _0x34f766=this[a99_0x3dc1('0x2')]?sequelize_utils_1[a99_0x3dc1('0xa')]['toJSONLocalizedOnly'](_0x3455a8,_0x902bf[a99_0x3dc1('0xb')]['lang']):sequelize_utils_1[a99_0x3dc1('0xa')][a99_0x3dc1('0xc')](_0x3455a8);if(_0x851d28){return _0x851d28[a99_0x3dc1('0xd')]({'success':!![],'data':_0x34f766});}else{return _0x34f766;}})['catch'](_0x14e30b=>{if(_0x851d28){return _0x851d28['status'](0x1f4)[a99_0x3dc1('0xe')]({'success':![],'data':_0x14e30b[a99_0x3dc1('0xf')]});}else{return _0x14e30b['stack'];}});}[a99_0x3dc1('0x10')](_0x16ab55,_0x1bc135,_0x91357a){if(!_0x16ab55[a99_0x3dc1('0x3')]||_0x16ab55[a99_0x3dc1('0x3')]['length']==0x0){return _0x1bc135[a99_0x3dc1('0x11')](0x191)[a99_0x3dc1('0xe')]({'success':![],'data':a99_0x3dc1('0x12')});}this[a99_0x3dc1('0x1')][a99_0x3dc1('0x10')](_0x16ab55[a99_0x3dc1('0x8')]['id'])['then'](_0x59a2d1=>{const _0x5bc366=this[a99_0x3dc1('0x2')]?sequelize_utils_1['default'][a99_0x3dc1('0x13')](_0x59a2d1,_0x16ab55[a99_0x3dc1('0xb')][a99_0x3dc1('0x14')]):_0x59a2d1;return _0x1bc135[a99_0x3dc1('0xd')]({'success':!![],'data':_0x5bc366});})[a99_0x3dc1('0x15')](_0x3053f9=>{return _0x1bc135[a99_0x3dc1('0x11')](0x1f4)[a99_0x3dc1('0xe')]({'success':![],'data':_0x3053f9[a99_0x3dc1('0xf')]});});}['findByUUId'](_0x25fa8e,_0x16656c,_0x13d062){if(!_0x25fa8e[a99_0x3dc1('0x3')]||_0x25fa8e[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]==0x0){}return this[a99_0x3dc1('0x1')][a99_0x3dc1('0x16')]({'where':{'uuid':_0x25fa8e[a99_0x3dc1('0x8')][a99_0x3dc1('0x17')]}})[a99_0x3dc1('0x9')](_0x1b7357=>{const _0x5dcb57=this[a99_0x3dc1('0x2')]?sequelize_utils_1[a99_0x3dc1('0xa')][a99_0x3dc1('0x13')](_0x1b7357,_0x25fa8e[a99_0x3dc1('0xb')][a99_0x3dc1('0x14')]):sequelize_utils_1['default']['toJSON'](_0x1b7357);return _0x5dcb57;})[a99_0x3dc1('0x15')](_0x3b16ec=>{return _0x3b16ec[a99_0x3dc1('0xf')];});}[a99_0x3dc1('0x18')](_0x3bf32f,_0x3005fc,_0x58c50d){if(!_0x3bf32f[a99_0x3dc1('0x3')]||_0x3bf32f[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]==0x0){}if(_0x3bf32f['user']&&_0x3bf32f[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]>0x0){_0x3bf32f[a99_0x3dc1('0x19')][a99_0x3dc1('0x5')]=_0x3bf32f[a99_0x3dc1('0x3')][0x0]['id'];}return this['model'][a99_0x3dc1('0x1a')](_0x3bf32f['body'],this['i18n']?{'language_id':_0x3bf32f['headers'][a99_0x3dc1('0x14')]}:{})[a99_0x3dc1('0x9')](_0x2f4f2e=>{const _0xf461a1=this[a99_0x3dc1('0x2')]?sequelize_utils_1[a99_0x3dc1('0xa')]['toJSONLocalizedOnly'](_0x2f4f2e,_0x3bf32f[a99_0x3dc1('0xb')][a99_0x3dc1('0x14')]):_0x2f4f2e;delete _0xf461a1[a99_0x3dc1('0x1b')]['id'];delete _0xf461a1[a99_0x3dc1('0x1b')][a99_0x3dc1('0x5')];delete _0xf461a1[a99_0x3dc1('0x1b')][a99_0x3dc1('0x6')];delete _0xf461a1[a99_0x3dc1('0x1b')][a99_0x3dc1('0x1c')];delete _0xf461a1['dataValues']['created_at'];delete _0xf461a1[a99_0x3dc1('0x1b')]['updated_at'];delete _0xf461a1['dataValues']['deleted_at'];if(_0x3005fc){return _0x3005fc['json']({'success':!![],'data':_0xf461a1});}else{return _0xf461a1;}})[a99_0x3dc1('0x15')](_0x45924f=>{if(_0x3005fc){return _0x3005fc[a99_0x3dc1('0x11')](0x1f4)['send']({'success':![],'data':_0x45924f[a99_0x3dc1('0xf')]});}else{return _0x45924f[a99_0x3dc1('0xf')];}});}[a99_0x3dc1('0x1d')](_0x383928,_0x49274f,_0x11ad2d){if(!_0x383928[a99_0x3dc1('0x3')]||_0x383928[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]==0x0){}if(_0x383928['user']&&_0x383928[a99_0x3dc1('0x3')]['length']>0x0){}this[a99_0x3dc1('0x1')]['findByPk'](_0x383928[a99_0x3dc1('0x19')]['id'])[a99_0x3dc1('0x9')](_0x8ed9d=>{if(_0x8ed9d==null)return _0x49274f[a99_0x3dc1('0xd')]({'success':!![],'data':_0x8ed9d});_0x8ed9d[a99_0x3dc1('0x1e')](_0x383928[a99_0x3dc1('0x19')],{'language_id':_0x383928[a99_0x3dc1('0xb')][a99_0x3dc1('0x14')]})[a99_0x3dc1('0x9')](function(_0x27af96){const _0x203fba=this[a99_0x3dc1('0x2')]?sequelize_utils_1[a99_0x3dc1('0xa')][a99_0x3dc1('0x13')](_0x8ed9d,_0x383928['headers'][a99_0x3dc1('0x14')]):_0x8ed9d;return _0x49274f[a99_0x3dc1('0xd')]({'success':!![],'data':_0x203fba});}[a99_0x3dc1('0x1f')](this))[a99_0x3dc1('0x15')](_0x25bb02=>{return _0x49274f['status'](0x1f4)[a99_0x3dc1('0xe')]({'success':![],'data':_0x25bb02['stack']});});})[a99_0x3dc1('0x15')](_0x4178b9=>{return _0x49274f[a99_0x3dc1('0x11')](0x1f4)['send']({'success':![],'data':_0x4178b9['stack']});});}[a99_0x3dc1('0x20')](_0x466bc7,_0x3bd037,_0x28c3dc,_0x36b796=![]){if(!_0x466bc7[a99_0x3dc1('0x3')]||_0x466bc7[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]==0x0){}if(_0x466bc7[a99_0x3dc1('0x3')]&&_0x466bc7[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]>0x0){}return this[a99_0x3dc1('0x1')][a99_0x3dc1('0x21')]({'where':_0x466bc7[a99_0x3dc1('0x8')]})[a99_0x3dc1('0x9')](function(_0x4b7dd1){if(_0x4b7dd1){return _0x4b7dd1['update'](_0x466bc7['body'])['then'](function(_0x508b03){const _0x286266=_0x508b03[a99_0x3dc1('0x1b')];if(_0x36b796){delete _0x286266['id'];}if(_0x3bd037){return _0x3bd037[a99_0x3dc1('0xd')]({'success':!![],'data':_0x286266});}else{return _0x286266;}}[a99_0x3dc1('0x1f')](this));}else{return this['model'][a99_0x3dc1('0x1a')](_0x466bc7[a99_0x3dc1('0x19')])[a99_0x3dc1('0x9')](function(_0x464734){if(_0x3bd037){return _0x3bd037[a99_0x3dc1('0xd')]({'success':!![],'data':_0x464734[a99_0x3dc1('0xc')]()});}else{return _0x464734;}});}}[a99_0x3dc1('0x1f')](this))[a99_0x3dc1('0x15')](_0x11d32c=>{if(_0x3bd037){return _0x3bd037['status'](0x1f4)[a99_0x3dc1('0xe')]({'success':![],'data':_0x11d32c[a99_0x3dc1('0xf')]});}else{return _0x11d32c[a99_0x3dc1('0xf')];}});}[a99_0x3dc1('0x22')](_0x2d3286,_0xce31aa,_0x342263){if(!_0x2d3286['user']||_0x2d3286['user'][a99_0x3dc1('0x4')]==0x0){}if(_0x2d3286[a99_0x3dc1('0x3')]&&_0x2d3286[a99_0x3dc1('0x3')]['length']>0x0){}return this[a99_0x3dc1('0x1')][a99_0x3dc1('0x22')]({'where':{'uuid':_0x2d3286[a99_0x3dc1('0x19')][a99_0x3dc1('0x17')]},'defaults':_0x2d3286['body']})[a99_0x3dc1('0x9')]((_0x2ec414,_0x4f3acb)=>{if(_0x4f3acb){}else{}return _0xce31aa[a99_0x3dc1('0xd')]({'success':!![],'data':_0x2ec414});})['catch'](_0x545ece=>{return _0xce31aa[a99_0x3dc1('0x11')](0x1f4)[a99_0x3dc1('0xe')]({'success':![],'data':_0x545ece[a99_0x3dc1('0xf')]});});}[a99_0x3dc1('0x23')](_0xa82991,_0x2834c1,_0x4a00de){if(!_0xa82991[a99_0x3dc1('0x3')]||_0xa82991['user'][a99_0x3dc1('0x4')]==0x0){return _0x2834c1[a99_0x3dc1('0x11')](0x191)[a99_0x3dc1('0xe')]({'success':![],'data':'authentication\x20failed'});}if(_0xa82991['user']&&_0xa82991[a99_0x3dc1('0x3')][a99_0x3dc1('0x4')]>0x0){_0xa82991[a99_0x3dc1('0x19')][a99_0x3dc1('0x5')]=_0xa82991[a99_0x3dc1('0x3')][0x0]['id'];}this['model'][a99_0x3dc1('0x10')](_0xa82991[a99_0x3dc1('0x8')]['id'])[a99_0x3dc1('0x9')](_0x510ccf=>{if(_0x510ccf==null)return _0x2834c1[a99_0x3dc1('0xd')]({'success':!![],'data':_0x510ccf});_0x510ccf['destroy']()['then'](function(_0x1e95a4){const _0x1c46f7=this[a99_0x3dc1('0x2')]?sequelize_utils_1[a99_0x3dc1('0xa')][a99_0x3dc1('0x13')](_0x510ccf,_0xa82991['headers'][a99_0x3dc1('0x14')]):_0x510ccf;return _0x2834c1[a99_0x3dc1('0xd')]({'success':!![],'data':_0x1c46f7});})[a99_0x3dc1('0x15')](_0x3601bc=>{return _0x2834c1[a99_0x3dc1('0x11')](0x1f4)['send']({'success':![],'data':_0x3601bc[a99_0x3dc1('0xf')]});});})[a99_0x3dc1('0x15')](_0x513e41=>{return _0x2834c1['status'](0x1f4)[a99_0x3dc1('0xe')]({'success':![],'data':_0x513e41[a99_0x3dc1('0xf')]});});}}exports['default']=CrudUtils;