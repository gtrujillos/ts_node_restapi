var a99_0xfa89=['uuid','body','create','dataValues','updated_by_user_id','findOneAndUpdate','findByPk','bind','updateOrCreate','findOne','update','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','length','count','json','catch','status','send','stack','find','query','offset','limit','created_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','then','toJSONLocalizedOnly','headers','lang','default','toJSON','user','authentication\x20failed','findById','params','findAll'];(function(_0x2b84d3,_0x5f2ce3){var _0x334acd=function(_0x567074){while(--_0x567074){_0x2b84d3['push'](_0x2b84d3['shift']());}};_0x334acd(++_0x5f2ce3);}(a99_0xfa89,0x1b5));var a99_0x1610=function(_0x1869e2,_0x368f5f){_0x1869e2=_0x1869e2-0x0;var _0x163fe8=a99_0xfa89[_0x1869e2];return _0x163fe8;};'use strict';var __importDefault=this&&this[a99_0x1610('0x0')]||function(_0x4d7eb6){return _0x4d7eb6&&_0x4d7eb6[a99_0x1610('0x1')]?_0x4d7eb6:{'default':_0x4d7eb6};};Object[a99_0x1610('0x2')](exports,a99_0x1610('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x1610('0x3')));class CrudUtils{constructor(_0x58714e,_0x4a76cf){this[a99_0x1610('0x4')]=_0x58714e;this[a99_0x1610('0x5')]=_0x4a76cf;}['count'](_0x28c022,_0x3c4960,_0x15908f){if(!_0x28c022['user']||_0x28c022['user'][a99_0x1610('0x6')]==0x0){}return this['model'][a99_0x1610('0x7')]({'where':_0x28c022['params']})['then'](_0x383df1=>{const _0x5a6d5a=_0x383df1;if(_0x3c4960){return _0x3c4960[a99_0x1610('0x8')]({'success':!![],'data':{'total':_0x383df1}});}else{return _0x5a6d5a;}})[a99_0x1610('0x9')](_0x48099c=>{if(_0x3c4960){return _0x3c4960[a99_0x1610('0xa')](0x1f4)[a99_0x1610('0xb')]({'success':![],'data':_0x48099c[a99_0x1610('0xc')]});}else{return _0x48099c[a99_0x1610('0xc')];}});}[a99_0x1610('0xd')](_0x1ac81f,_0x45e5dc,_0x1f9a5b,_0x235e54=![],_0x45c7c9=[],_0x5ceb9b=null){const _0x73749a=_0x1ac81f[a99_0x1610('0xe')][a99_0x1610('0xf')]?Number(_0x1ac81f[a99_0x1610('0xe')][a99_0x1610('0xf')]):null;const _0xff1ad3=_0x1ac81f[a99_0x1610('0xe')][a99_0x1610('0x10')]?Number(_0x1ac81f['query'][a99_0x1610('0x10')]):null;if(!_0x1ac81f['user']||_0x1ac81f['user']['length']==0x0){}return this[a99_0x1610('0x4')]['findAll']({'attributes':{'exclude':_0x235e54?[]:['id',a99_0x1610('0x11'),'updated_by_user_id',a99_0x1610('0x12'),a99_0x1610('0x13'),a99_0x1610('0x14'),a99_0x1610('0x15')]},'where':_0x1ac81f['params'],'offset':_0x73749a,'limit':_0xff1ad3,'include':_0x45c7c9,'order':_0x5ceb9b})[a99_0x1610('0x16')](_0xfd9ea6=>{const _0x102221=this[a99_0x1610('0x5')]?sequelize_utils_1['default'][a99_0x1610('0x17')](_0xfd9ea6,_0x1ac81f[a99_0x1610('0x18')][a99_0x1610('0x19')]):sequelize_utils_1[a99_0x1610('0x1a')][a99_0x1610('0x1b')](_0xfd9ea6);if(_0x45e5dc){return _0x45e5dc[a99_0x1610('0x8')]({'success':!![],'data':_0x102221});}else{return _0x102221;}})[a99_0x1610('0x9')](_0x4d8cf2=>{if(_0x45e5dc){return _0x45e5dc['status'](0x1f4)[a99_0x1610('0xb')]({'success':![],'data':_0x4d8cf2['stack']});}else{return _0x4d8cf2[a99_0x1610('0xc')];}});}['findById'](_0x156414,_0x47614f,_0x146a1d){if(!_0x156414[a99_0x1610('0x1c')]||_0x156414['user'][a99_0x1610('0x6')]==0x0){return _0x47614f[a99_0x1610('0xa')](0x191)[a99_0x1610('0xb')]({'success':![],'data':a99_0x1610('0x1d')});}this[a99_0x1610('0x4')][a99_0x1610('0x1e')](_0x156414[a99_0x1610('0x1f')]['id'])['then'](_0x558891=>{const _0x32549e=this[a99_0x1610('0x5')]?sequelize_utils_1[a99_0x1610('0x1a')][a99_0x1610('0x17')](_0x558891,_0x156414[a99_0x1610('0x18')][a99_0x1610('0x19')]):_0x558891;return _0x47614f[a99_0x1610('0x8')]({'success':!![],'data':_0x32549e});})[a99_0x1610('0x9')](_0x1e24ea=>{return _0x47614f['status'](0x1f4)[a99_0x1610('0xb')]({'success':![],'data':_0x1e24ea[a99_0x1610('0xc')]});});}['findByUUId'](_0x3bf283,_0x396f6c,_0x42bc48){if(!_0x3bf283[a99_0x1610('0x1c')]||_0x3bf283['user'][a99_0x1610('0x6')]==0x0){}return this['model'][a99_0x1610('0x20')]({'where':{'uuid':_0x3bf283[a99_0x1610('0x1f')][a99_0x1610('0x21')]}})[a99_0x1610('0x16')](_0x29af72=>{const _0x2e450e=this[a99_0x1610('0x5')]?sequelize_utils_1[a99_0x1610('0x1a')][a99_0x1610('0x17')](_0x29af72,_0x3bf283[a99_0x1610('0x18')][a99_0x1610('0x19')]):sequelize_utils_1['default']['toJSON'](_0x29af72);return _0x2e450e;})[a99_0x1610('0x9')](_0x31b0a2=>{return _0x31b0a2[a99_0x1610('0xc')];});}['save'](_0x343ea7,_0x59ad2c,_0x353cd8){if(!_0x343ea7[a99_0x1610('0x1c')]||_0x343ea7[a99_0x1610('0x1c')][a99_0x1610('0x6')]==0x0){}if(_0x343ea7[a99_0x1610('0x1c')]&&_0x343ea7[a99_0x1610('0x1c')][a99_0x1610('0x6')]>0x0){_0x343ea7[a99_0x1610('0x22')]['created_by_user_id']=_0x343ea7[a99_0x1610('0x1c')][0x0]['id'];}return this[a99_0x1610('0x4')][a99_0x1610('0x23')](_0x343ea7[a99_0x1610('0x22')],this[a99_0x1610('0x5')]?{'language_id':_0x343ea7[a99_0x1610('0x18')][a99_0x1610('0x19')]}:{})[a99_0x1610('0x16')](_0xc3691c=>{const _0x1c671d=this[a99_0x1610('0x5')]?sequelize_utils_1[a99_0x1610('0x1a')][a99_0x1610('0x17')](_0xc3691c,_0x343ea7[a99_0x1610('0x18')]['lang']):_0xc3691c;delete _0x1c671d[a99_0x1610('0x24')]['id'];delete _0x1c671d[a99_0x1610('0x24')]['created_by_user_id'];delete _0x1c671d[a99_0x1610('0x24')][a99_0x1610('0x25')];delete _0x1c671d[a99_0x1610('0x24')][a99_0x1610('0x12')];delete _0x1c671d['dataValues'][a99_0x1610('0x13')];delete _0x1c671d[a99_0x1610('0x24')]['updated_at'];delete _0x1c671d[a99_0x1610('0x24')]['deleted_at'];if(_0x59ad2c){return _0x59ad2c[a99_0x1610('0x8')]({'success':!![],'data':_0x1c671d});}else{return _0x1c671d;}})[a99_0x1610('0x9')](_0x32b2b3=>{if(_0x59ad2c){return _0x59ad2c[a99_0x1610('0xa')](0x1f4)[a99_0x1610('0xb')]({'success':![],'data':_0x32b2b3['stack']});}else{return _0x32b2b3[a99_0x1610('0xc')];}});}[a99_0x1610('0x26')](_0x1158c5,_0x513d1e,_0x5c99af){if(!_0x1158c5[a99_0x1610('0x1c')]||_0x1158c5[a99_0x1610('0x1c')]['length']==0x0){}if(_0x1158c5[a99_0x1610('0x1c')]&&_0x1158c5[a99_0x1610('0x1c')]['length']>0x0){}this[a99_0x1610('0x4')][a99_0x1610('0x27')](_0x1158c5[a99_0x1610('0x22')]['id'])[a99_0x1610('0x16')](_0x6ec128=>{if(_0x6ec128==null)return _0x513d1e[a99_0x1610('0x8')]({'success':!![],'data':_0x6ec128});_0x6ec128['update'](_0x1158c5[a99_0x1610('0x22')],{'language_id':_0x1158c5[a99_0x1610('0x18')]['lang']})[a99_0x1610('0x16')](function(_0x3a9b14){const _0x31b7c8=this[a99_0x1610('0x5')]?sequelize_utils_1[a99_0x1610('0x1a')]['toJSONLocalizedOnly'](_0x6ec128,_0x1158c5[a99_0x1610('0x18')][a99_0x1610('0x19')]):_0x6ec128;return _0x513d1e[a99_0x1610('0x8')]({'success':!![],'data':_0x31b7c8});}[a99_0x1610('0x28')](this))[a99_0x1610('0x9')](_0x244d7c=>{return _0x513d1e[a99_0x1610('0xa')](0x1f4)[a99_0x1610('0xb')]({'success':![],'data':_0x244d7c[a99_0x1610('0xc')]});});})[a99_0x1610('0x9')](_0x40272f=>{return _0x513d1e[a99_0x1610('0xa')](0x1f4)['send']({'success':![],'data':_0x40272f[a99_0x1610('0xc')]});});}[a99_0x1610('0x29')](_0x1c139d,_0x9c33b,_0x1eac89,_0xa82c8a=![]){if(!_0x1c139d[a99_0x1610('0x1c')]||_0x1c139d[a99_0x1610('0x1c')]['length']==0x0){}if(_0x1c139d[a99_0x1610('0x1c')]&&_0x1c139d[a99_0x1610('0x1c')][a99_0x1610('0x6')]>0x0){}return this['model'][a99_0x1610('0x2a')]({'where':_0x1c139d[a99_0x1610('0x1f')]})[a99_0x1610('0x16')](function(_0x2c3c5c){if(_0x2c3c5c){return _0x2c3c5c[a99_0x1610('0x2b')](_0x1c139d['body'])['then'](function(_0x38cedb){const _0x16cacf=_0x38cedb[a99_0x1610('0x24')];if(_0xa82c8a){delete _0x16cacf['id'];}if(_0x9c33b){return _0x9c33b['json']({'success':!![],'data':_0x16cacf});}else{return _0x16cacf;}}[a99_0x1610('0x28')](this));}else{return this[a99_0x1610('0x4')][a99_0x1610('0x23')](_0x1c139d[a99_0x1610('0x22')])['then'](function(_0xe872dd){if(_0x9c33b){return _0x9c33b[a99_0x1610('0x8')]({'success':!![],'data':_0xe872dd[a99_0x1610('0x1b')]()});}else{return _0xe872dd;}});}}[a99_0x1610('0x28')](this))[a99_0x1610('0x9')](_0x4eeebb=>{if(_0x9c33b){return _0x9c33b['status'](0x1f4)['send']({'success':![],'data':_0x4eeebb[a99_0x1610('0xc')]});}else{return _0x4eeebb['stack'];}});}['findOrCreate'](_0x359ee7,_0x2ea775,_0x5bb00c){if(!_0x359ee7[a99_0x1610('0x1c')]||_0x359ee7[a99_0x1610('0x1c')][a99_0x1610('0x6')]==0x0){}if(_0x359ee7[a99_0x1610('0x1c')]&&_0x359ee7['user'][a99_0x1610('0x6')]>0x0){}return this[a99_0x1610('0x4')][a99_0x1610('0x2c')]({'where':{'uuid':_0x359ee7[a99_0x1610('0x22')][a99_0x1610('0x21')]},'defaults':_0x359ee7[a99_0x1610('0x22')]})[a99_0x1610('0x16')]((_0x19bd9a,_0x904bc2)=>{if(_0x904bc2){}else{}return _0x2ea775[a99_0x1610('0x8')]({'success':!![],'data':_0x19bd9a});})[a99_0x1610('0x9')](_0x551509=>{return _0x2ea775[a99_0x1610('0xa')](0x1f4)['send']({'success':![],'data':_0x551509['stack']});});}[a99_0x1610('0x2d')](_0x3a629a,_0x5f1eb5,_0x53d2f0){if(!_0x3a629a['user']||_0x3a629a['user'][a99_0x1610('0x6')]==0x0){return _0x5f1eb5[a99_0x1610('0xa')](0x191)[a99_0x1610('0xb')]({'success':![],'data':a99_0x1610('0x1d')});}if(_0x3a629a[a99_0x1610('0x1c')]&&_0x3a629a['user'][a99_0x1610('0x6')]>0x0){_0x3a629a[a99_0x1610('0x22')][a99_0x1610('0x11')]=_0x3a629a[a99_0x1610('0x1c')][0x0]['id'];}this[a99_0x1610('0x4')][a99_0x1610('0x1e')](_0x3a629a[a99_0x1610('0x1f')]['id'])[a99_0x1610('0x16')](_0xe5a16d=>{if(_0xe5a16d==null)return _0x5f1eb5[a99_0x1610('0x8')]({'success':!![],'data':_0xe5a16d});_0xe5a16d[a99_0x1610('0x2e')]()['then'](function(_0x3b510d){const _0xb6e680=this[a99_0x1610('0x5')]?sequelize_utils_1[a99_0x1610('0x1a')][a99_0x1610('0x17')](_0xe5a16d,_0x3a629a['headers'][a99_0x1610('0x19')]):_0xe5a16d;return _0x5f1eb5['json']({'success':!![],'data':_0xb6e680});})[a99_0x1610('0x9')](_0x46df83=>{return _0x5f1eb5[a99_0x1610('0xa')](0x1f4)[a99_0x1610('0xb')]({'success':![],'data':_0x46df83[a99_0x1610('0xc')]});});})[a99_0x1610('0x9')](_0x49e274=>{return _0x5f1eb5['status'](0x1f4)['send']({'success':![],'data':_0x49e274['stack']});});}}exports[a99_0x1610('0x1a')]=CrudUtils;