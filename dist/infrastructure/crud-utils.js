var a98_0x2d9f=['__importDefault','__esModule','defineProperty','model','i18n','find','log','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','deleted_at','then','default','lang','json','catch','status','send','stack','findById','authentication\x20failed','params','toJSONLocalizedOnly','headers','findByUUId','uuid','toJSON','save','body','create','dataValues','updated_at','update','bind','updateOrCreate','findOrCreate','remove'];(function(_0x2f3e31,_0x3a89c9){var _0x2c6db2=function(_0x1fa352){while(--_0x1fa352){_0x2f3e31['push'](_0x2f3e31['shift']());}};_0x2c6db2(++_0x3a89c9);}(a98_0x2d9f,0x1ec));var a98_0x1b72=function(_0x2adc5c,_0x3b9632){_0x2adc5c=_0x2adc5c-0x0;var _0x328867=a98_0x2d9f[_0x2adc5c];return _0x328867;};'use strict';var __importDefault=this&&this[a98_0x1b72('0x0')]||function(_0x4a1a65){return _0x4a1a65&&_0x4a1a65[a98_0x1b72('0x1')]?_0x4a1a65:{'default':_0x4a1a65};};Object[a98_0x1b72('0x2')](exports,a98_0x1b72('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require('./sequelize-utils'));class CrudUtils{constructor(_0x53b67a,_0x158cd7){this[a98_0x1b72('0x3')]=_0x53b67a;this[a98_0x1b72('0x4')]=_0x158cd7;}[a98_0x1b72('0x5')](_0x170ad0,_0x1908d8,_0x4fc503,_0x2319b2=![]){console[a98_0x1b72('0x6')](a98_0x1b72('0x5'));if(!_0x170ad0[a98_0x1b72('0x7')]||_0x170ad0['user'][a98_0x1b72('0x8')]==0x0){}return this[a98_0x1b72('0x3')][a98_0x1b72('0x9')]({'attributes':{'exclude':_0x2319b2?[]:['id',a98_0x1b72('0xa'),a98_0x1b72('0xb'),a98_0x1b72('0xc'),a98_0x1b72('0xd'),'updated_at',a98_0x1b72('0xe')]},'where':{}})[a98_0x1b72('0xf')](_0x513a9c=>{console[a98_0x1b72('0x6')](_0x513a9c);const _0x2a3425=this[a98_0x1b72('0x4')]?sequelize_utils_1[a98_0x1b72('0x10')]['toJSONLocalizedOnly'](_0x513a9c,_0x170ad0['headers'][a98_0x1b72('0x11')]):sequelize_utils_1[a98_0x1b72('0x10')]['toJSON'](_0x513a9c);if(_0x1908d8){return _0x1908d8[a98_0x1b72('0x12')]({'success':!![],'data':_0x2a3425});}else{return _0x2a3425;}})[a98_0x1b72('0x13')](_0x47d592=>{if(_0x1908d8){return _0x1908d8[a98_0x1b72('0x14')](0x1f4)[a98_0x1b72('0x15')]({'success':![],'data':_0x47d592['stack']});}else{return _0x47d592[a98_0x1b72('0x16')];}});}[a98_0x1b72('0x17')](_0x4f9807,_0x2bb2d0,_0x6ee751){if(!_0x4f9807[a98_0x1b72('0x7')]||_0x4f9807[a98_0x1b72('0x7')][a98_0x1b72('0x8')]==0x0){return _0x2bb2d0[a98_0x1b72('0x14')](0x191)['send']({'success':![],'data':a98_0x1b72('0x18')});}this[a98_0x1b72('0x3')][a98_0x1b72('0x17')](_0x4f9807[a98_0x1b72('0x19')]['id'])['then'](_0x2eb3ef=>{const _0x4f9532=this[a98_0x1b72('0x4')]?sequelize_utils_1[a98_0x1b72('0x10')][a98_0x1b72('0x1a')](_0x2eb3ef,_0x4f9807[a98_0x1b72('0x1b')]['lang']):_0x2eb3ef;return _0x2bb2d0[a98_0x1b72('0x12')]({'success':!![],'data':_0x4f9532});})[a98_0x1b72('0x13')](_0x35adc2=>{return _0x2bb2d0[a98_0x1b72('0x14')](0x1f4)[a98_0x1b72('0x15')]({'success':![],'data':_0x35adc2[a98_0x1b72('0x16')]});});}[a98_0x1b72('0x1c')](_0x374a7e,_0x4bf525,_0x22b035){if(!_0x374a7e[a98_0x1b72('0x7')]||_0x374a7e['user'][a98_0x1b72('0x8')]==0x0){}return this[a98_0x1b72('0x3')]['findAll']({'where':{'uuid':_0x374a7e[a98_0x1b72('0x19')][a98_0x1b72('0x1d')]}})[a98_0x1b72('0xf')](_0x8ee028=>{const _0x2ffc61=this[a98_0x1b72('0x4')]?sequelize_utils_1[a98_0x1b72('0x10')][a98_0x1b72('0x1a')](_0x8ee028,_0x374a7e['headers'][a98_0x1b72('0x11')]):sequelize_utils_1['default'][a98_0x1b72('0x1e')](_0x8ee028);return _0x2ffc61;})[a98_0x1b72('0x13')](_0x1d0c36=>{return _0x1d0c36[a98_0x1b72('0x16')];});}[a98_0x1b72('0x1f')](_0x3ca618,_0x424aaa,_0x34a5bc){if(!_0x3ca618[a98_0x1b72('0x7')]||_0x3ca618[a98_0x1b72('0x7')][a98_0x1b72('0x8')]==0x0){}if(_0x3ca618[a98_0x1b72('0x7')]&&_0x3ca618[a98_0x1b72('0x7')][a98_0x1b72('0x8')]>0x0){_0x3ca618[a98_0x1b72('0x20')][a98_0x1b72('0xa')]=_0x3ca618[a98_0x1b72('0x7')][0x0]['id'];}return this[a98_0x1b72('0x3')][a98_0x1b72('0x21')](_0x3ca618[a98_0x1b72('0x20')],this['i18n']?{'language_id':_0x3ca618[a98_0x1b72('0x1b')][a98_0x1b72('0x11')]}:{})[a98_0x1b72('0xf')](_0x198bea=>{const _0x4f857c=this['i18n']?sequelize_utils_1[a98_0x1b72('0x10')][a98_0x1b72('0x1a')](_0x198bea,_0x3ca618[a98_0x1b72('0x1b')][a98_0x1b72('0x11')]):_0x198bea;delete _0x4f857c[a98_0x1b72('0x22')]['id'];delete _0x4f857c[a98_0x1b72('0x22')]['created_by_user_id'];delete _0x4f857c[a98_0x1b72('0x22')]['updated_by_user_id'];delete _0x4f857c[a98_0x1b72('0x22')][a98_0x1b72('0xc')];delete _0x4f857c[a98_0x1b72('0x22')]['created_at'];delete _0x4f857c[a98_0x1b72('0x22')][a98_0x1b72('0x23')];delete _0x4f857c[a98_0x1b72('0x22')][a98_0x1b72('0xe')];if(_0x424aaa){return _0x424aaa[a98_0x1b72('0x12')]({'success':!![],'data':_0x4f857c});}else{return _0x4f857c;}})[a98_0x1b72('0x13')](_0x31ada1=>{if(_0x424aaa){return _0x424aaa[a98_0x1b72('0x14')](0x1f4)[a98_0x1b72('0x15')]({'success':![],'data':_0x31ada1['stack']});}else{return _0x31ada1[a98_0x1b72('0x16')];}});}['findOneAndUpdate'](_0x2e0824,_0x394a1c,_0x20ea4a){if(!_0x2e0824[a98_0x1b72('0x7')]||_0x2e0824[a98_0x1b72('0x7')]['length']==0x0){}if(_0x2e0824['user']&&_0x2e0824[a98_0x1b72('0x7')][a98_0x1b72('0x8')]>0x0){_0x2e0824[a98_0x1b72('0x20')][a98_0x1b72('0xa')]=_0x2e0824[a98_0x1b72('0x7')][0x0]['id'];}this[a98_0x1b72('0x3')]['findByPk'](_0x2e0824[a98_0x1b72('0x20')]['id'])['then'](_0x1891ab=>{if(_0x1891ab==null)return _0x394a1c[a98_0x1b72('0x12')]({'success':!![],'data':_0x1891ab});_0x1891ab[a98_0x1b72('0x24')](_0x2e0824['body'],{'language_id':_0x2e0824['headers'][a98_0x1b72('0x11')]})[a98_0x1b72('0xf')](function(_0x379f78){const _0x15ee1c=this['i18n']?sequelize_utils_1[a98_0x1b72('0x10')][a98_0x1b72('0x1a')](_0x1891ab,_0x2e0824['headers'][a98_0x1b72('0x11')]):_0x1891ab;return _0x394a1c[a98_0x1b72('0x12')]({'success':!![],'data':_0x15ee1c});}[a98_0x1b72('0x25')](this))[a98_0x1b72('0x13')](_0xcad810=>{return _0x394a1c['status'](0x1f4)[a98_0x1b72('0x15')]({'success':![],'data':_0xcad810[a98_0x1b72('0x16')]});});})[a98_0x1b72('0x13')](_0x376cb4=>{return _0x394a1c[a98_0x1b72('0x14')](0x1f4)['send']({'success':![],'data':_0x376cb4[a98_0x1b72('0x16')]});});}[a98_0x1b72('0x26')](_0x3f0d15,_0x410c3a,_0x1f03b9,_0x5989b1=![]){if(!_0x3f0d15['user']||_0x3f0d15[a98_0x1b72('0x7')][a98_0x1b72('0x8')]==0x0){}if(_0x3f0d15[a98_0x1b72('0x7')]&&_0x3f0d15[a98_0x1b72('0x7')][a98_0x1b72('0x8')]>0x0){_0x3f0d15[a98_0x1b72('0x20')]['created_by_user_id']=_0x3f0d15['user'][0x0]['id'];}console[a98_0x1b72('0x6')](_0x3f0d15[a98_0x1b72('0x19')]);return this[a98_0x1b72('0x3')]['findOne']({'where':_0x3f0d15[a98_0x1b72('0x19')]})['then'](function(_0x428fb0){if(_0x428fb0){return _0x428fb0[a98_0x1b72('0x24')](_0x3f0d15[a98_0x1b72('0x20')])[a98_0x1b72('0xf')](function(_0x79783){const _0x2c6449=_0x79783[a98_0x1b72('0x22')];if(_0x5989b1){delete _0x2c6449['id'];}if(_0x410c3a){return _0x410c3a[a98_0x1b72('0x12')]({'success':!![],'data':_0x2c6449});}else{return _0x2c6449;}}[a98_0x1b72('0x25')](this));}else{return this['model'][a98_0x1b72('0x21')](_0x3f0d15['body'])[a98_0x1b72('0xf')](function(_0xb8277b){if(_0x410c3a){return _0x410c3a[a98_0x1b72('0x12')]({'success':!![],'data':_0xb8277b[a98_0x1b72('0x1e')]()});}else{return _0xb8277b;}});}}[a98_0x1b72('0x25')](this))['catch'](_0x1eb8e2=>{if(_0x410c3a){return _0x410c3a[a98_0x1b72('0x14')](0x1f4)[a98_0x1b72('0x15')]({'success':![],'data':_0x1eb8e2[a98_0x1b72('0x16')]});}else{return _0x1eb8e2[a98_0x1b72('0x16')];}});}[a98_0x1b72('0x27')](_0x524dc5,_0x30b591,_0x262d6d){if(!_0x524dc5[a98_0x1b72('0x7')]||_0x524dc5['user']['length']==0x0){}if(_0x524dc5[a98_0x1b72('0x7')]&&_0x524dc5['user'][a98_0x1b72('0x8')]>0x0){_0x524dc5[a98_0x1b72('0x20')][a98_0x1b72('0xa')]=_0x524dc5[a98_0x1b72('0x7')][0x0]['id'];}return this[a98_0x1b72('0x3')][a98_0x1b72('0x27')]({'where':{'uuid':_0x524dc5['body'][a98_0x1b72('0x1d')]},'defaults':_0x524dc5[a98_0x1b72('0x20')]})['then']((_0x28ab87,_0x223aca)=>{if(_0x223aca){}else{}return _0x30b591[a98_0x1b72('0x12')]({'success':!![],'data':_0x28ab87});})[a98_0x1b72('0x13')](_0x3fd370=>{return _0x30b591['status'](0x1f4)['send']({'success':![],'data':_0x3fd370[a98_0x1b72('0x16')]});});}[a98_0x1b72('0x28')](_0x57f1d7,_0x255af6,_0x4f6eae){if(!_0x57f1d7[a98_0x1b72('0x7')]||_0x57f1d7[a98_0x1b72('0x7')][a98_0x1b72('0x8')]==0x0){return _0x255af6[a98_0x1b72('0x14')](0x191)[a98_0x1b72('0x15')]({'success':![],'data':a98_0x1b72('0x18')});}if(_0x57f1d7[a98_0x1b72('0x7')]&&_0x57f1d7[a98_0x1b72('0x7')]['length']>0x0){_0x57f1d7[a98_0x1b72('0x20')][a98_0x1b72('0xa')]=_0x57f1d7[a98_0x1b72('0x7')][0x0]['id'];}this['model'][a98_0x1b72('0x17')](_0x57f1d7[a98_0x1b72('0x19')]['id'])[a98_0x1b72('0xf')](_0x337ffa=>{if(_0x337ffa==null)return _0x255af6[a98_0x1b72('0x12')]({'success':!![],'data':_0x337ffa});_0x337ffa['destroy']()[a98_0x1b72('0xf')](function(_0x2154e4){const _0x2d56cc=this[a98_0x1b72('0x4')]?sequelize_utils_1['default'][a98_0x1b72('0x1a')](_0x337ffa,_0x57f1d7[a98_0x1b72('0x1b')]['lang']):_0x337ffa;return _0x255af6[a98_0x1b72('0x12')]({'success':!![],'data':_0x2d56cc});})[a98_0x1b72('0x13')](_0x125801=>{return _0x255af6[a98_0x1b72('0x14')](0x1f4)['send']({'success':![],'data':_0x125801['stack']});});})[a98_0x1b72('0x13')](_0x18e864=>{return _0x255af6[a98_0x1b72('0x14')](0x1f4)['send']({'success':![],'data':_0x18e864['stack']});});}}exports[a98_0x1b72('0x10')]=CrudUtils;