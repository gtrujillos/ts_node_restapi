var a99_0x3e42=['updated_by_user_id','created_at','updated_at','deleted_at','toJSONLocalizedOnly','headers','lang','default','toJSON','json','findById','authentication\x20failed','findByUUId','uuid','save','body','create','dataValues','deleted_by_user_id','findOneAndUpdate','findByPk','bind','updateOrCreate','findOne','update','findOrCreate','remove','destroy','__importDefault','defineProperty','__esModule','./sequelize-utils','model','i18n','count','user','length','params','then','catch','status','send','stack','created_by_user_id'];(function(_0x9bb219,_0x5db8c8){var _0x2e2773=function(_0x5ea92a){while(--_0x5ea92a){_0x9bb219['push'](_0x9bb219['shift']());}};_0x2e2773(++_0x5db8c8);}(a99_0x3e42,0x150));var a99_0x3347=function(_0x1ff888,_0x42fc00){_0x1ff888=_0x1ff888-0x0;var _0x1f50b8=a99_0x3e42[_0x1ff888];return _0x1f50b8;};'use strict';var __importDefault=this&&this[a99_0x3347('0x0')]||function(_0x256471){return _0x256471&&_0x256471['__esModule']?_0x256471:{'default':_0x256471};};Object[a99_0x3347('0x1')](exports,a99_0x3347('0x2'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x3347('0x3')));class CrudUtils{constructor(_0x128ad4,_0x462ffa){this[a99_0x3347('0x4')]=_0x128ad4;this[a99_0x3347('0x5')]=_0x462ffa;}[a99_0x3347('0x6')](_0x3fe10d,_0xab7724,_0x28bfe5){if(!_0x3fe10d[a99_0x3347('0x7')]||_0x3fe10d[a99_0x3347('0x7')][a99_0x3347('0x8')]==0x0){}return this[a99_0x3347('0x4')][a99_0x3347('0x6')]({'where':_0x3fe10d[a99_0x3347('0x9')]})[a99_0x3347('0xa')](_0x441b2e=>{const _0x6f7d68=_0x441b2e;if(_0xab7724){return _0xab7724['json']({'success':!![],'data':{'total':_0x441b2e}});}else{return _0x6f7d68;}})[a99_0x3347('0xb')](_0x423454=>{if(_0xab7724){return _0xab7724[a99_0x3347('0xc')](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0x423454[a99_0x3347('0xe')]});}else{return _0x423454[a99_0x3347('0xe')];}});}['find'](_0x57dd55,_0x3577b0,_0x138e45,_0x9855c4=![],_0x3ef0f5=[]){if(!_0x57dd55['user']||_0x57dd55['user'][a99_0x3347('0x8')]==0x0){}return this[a99_0x3347('0x4')]['findAll']({'attributes':{'exclude':_0x9855c4?[]:['id',a99_0x3347('0xf'),a99_0x3347('0x10'),'deleted_by_user_id',a99_0x3347('0x11'),a99_0x3347('0x12'),a99_0x3347('0x13')]},'where':_0x57dd55[a99_0x3347('0x9')],'include':_0x3ef0f5})['then'](_0x13aec1=>{const _0x3de72a=this[a99_0x3347('0x5')]?sequelize_utils_1['default'][a99_0x3347('0x14')](_0x13aec1,_0x57dd55[a99_0x3347('0x15')][a99_0x3347('0x16')]):sequelize_utils_1[a99_0x3347('0x17')][a99_0x3347('0x18')](_0x13aec1);if(_0x3577b0){return _0x3577b0[a99_0x3347('0x19')]({'success':!![],'data':_0x3de72a});}else{return _0x3de72a;}})['catch'](_0x212979=>{if(_0x3577b0){return _0x3577b0['status'](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0x212979[a99_0x3347('0xe')]});}else{return _0x212979['stack'];}});}[a99_0x3347('0x1a')](_0x414a0a,_0xb8d941,_0x4c4e03){if(!_0x414a0a[a99_0x3347('0x7')]||_0x414a0a[a99_0x3347('0x7')][a99_0x3347('0x8')]==0x0){return _0xb8d941[a99_0x3347('0xc')](0x191)[a99_0x3347('0xd')]({'success':![],'data':a99_0x3347('0x1b')});}this[a99_0x3347('0x4')][a99_0x3347('0x1a')](_0x414a0a[a99_0x3347('0x9')]['id'])['then'](_0x18a9ff=>{const _0xf910b5=this[a99_0x3347('0x5')]?sequelize_utils_1[a99_0x3347('0x17')]['toJSONLocalizedOnly'](_0x18a9ff,_0x414a0a[a99_0x3347('0x15')][a99_0x3347('0x16')]):_0x18a9ff;return _0xb8d941['json']({'success':!![],'data':_0xf910b5});})[a99_0x3347('0xb')](_0x2eb6bb=>{return _0xb8d941[a99_0x3347('0xc')](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0x2eb6bb[a99_0x3347('0xe')]});});}[a99_0x3347('0x1c')](_0x598877,_0xb412a9,_0x58d2de){if(!_0x598877[a99_0x3347('0x7')]||_0x598877['user'][a99_0x3347('0x8')]==0x0){}return this[a99_0x3347('0x4')]['findAll']({'where':{'uuid':_0x598877[a99_0x3347('0x9')][a99_0x3347('0x1d')]}})[a99_0x3347('0xa')](_0x575715=>{const _0x31d545=this[a99_0x3347('0x5')]?sequelize_utils_1[a99_0x3347('0x17')][a99_0x3347('0x14')](_0x575715,_0x598877[a99_0x3347('0x15')]['lang']):sequelize_utils_1[a99_0x3347('0x17')][a99_0x3347('0x18')](_0x575715);return _0x31d545;})[a99_0x3347('0xb')](_0xbb3d4b=>{return _0xbb3d4b[a99_0x3347('0xe')];});}[a99_0x3347('0x1e')](_0x1a8a89,_0x4e87c0,_0x11b009){if(!_0x1a8a89[a99_0x3347('0x7')]||_0x1a8a89[a99_0x3347('0x7')][a99_0x3347('0x8')]==0x0){}if(_0x1a8a89[a99_0x3347('0x7')]&&_0x1a8a89['user'][a99_0x3347('0x8')]>0x0){_0x1a8a89[a99_0x3347('0x1f')][a99_0x3347('0xf')]=_0x1a8a89[a99_0x3347('0x7')][0x0]['id'];}return this[a99_0x3347('0x4')][a99_0x3347('0x20')](_0x1a8a89[a99_0x3347('0x1f')],this[a99_0x3347('0x5')]?{'language_id':_0x1a8a89[a99_0x3347('0x15')][a99_0x3347('0x16')]}:{})['then'](_0x3c58fe=>{const _0x1596b0=this[a99_0x3347('0x5')]?sequelize_utils_1['default'][a99_0x3347('0x14')](_0x3c58fe,_0x1a8a89[a99_0x3347('0x15')][a99_0x3347('0x16')]):_0x3c58fe;delete _0x1596b0[a99_0x3347('0x21')]['id'];delete _0x1596b0[a99_0x3347('0x21')][a99_0x3347('0xf')];delete _0x1596b0[a99_0x3347('0x21')][a99_0x3347('0x10')];delete _0x1596b0[a99_0x3347('0x21')][a99_0x3347('0x22')];delete _0x1596b0[a99_0x3347('0x21')][a99_0x3347('0x11')];delete _0x1596b0[a99_0x3347('0x21')]['updated_at'];delete _0x1596b0[a99_0x3347('0x21')]['deleted_at'];if(_0x4e87c0){return _0x4e87c0[a99_0x3347('0x19')]({'success':!![],'data':_0x1596b0});}else{return _0x1596b0;}})['catch'](_0x39aa73=>{if(_0x4e87c0){return _0x4e87c0[a99_0x3347('0xc')](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0x39aa73[a99_0x3347('0xe')]});}else{return _0x39aa73[a99_0x3347('0xe')];}});}[a99_0x3347('0x23')](_0x1d1d58,_0x2a6661,_0x4b3cda){if(!_0x1d1d58[a99_0x3347('0x7')]||_0x1d1d58[a99_0x3347('0x7')]['length']==0x0){}if(_0x1d1d58[a99_0x3347('0x7')]&&_0x1d1d58[a99_0x3347('0x7')][a99_0x3347('0x8')]>0x0){}this[a99_0x3347('0x4')][a99_0x3347('0x24')](_0x1d1d58[a99_0x3347('0x1f')]['id'])[a99_0x3347('0xa')](_0x3d56c7=>{if(_0x3d56c7==null)return _0x2a6661[a99_0x3347('0x19')]({'success':!![],'data':_0x3d56c7});_0x3d56c7['update'](_0x1d1d58[a99_0x3347('0x1f')],{'language_id':_0x1d1d58[a99_0x3347('0x15')]['lang']})[a99_0x3347('0xa')](function(_0x28f75c){const _0x3fe0d5=this[a99_0x3347('0x5')]?sequelize_utils_1[a99_0x3347('0x17')][a99_0x3347('0x14')](_0x3d56c7,_0x1d1d58['headers'][a99_0x3347('0x16')]):_0x3d56c7;return _0x2a6661['json']({'success':!![],'data':_0x3fe0d5});}[a99_0x3347('0x25')](this))['catch'](_0x3ee0af=>{return _0x2a6661[a99_0x3347('0xc')](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0x3ee0af[a99_0x3347('0xe')]});});})['catch'](_0x3fbd17=>{return _0x2a6661[a99_0x3347('0xc')](0x1f4)['send']({'success':![],'data':_0x3fbd17[a99_0x3347('0xe')]});});}[a99_0x3347('0x26')](_0x148cca,_0x52ba99,_0x25bef5,_0x473982=![]){if(!_0x148cca[a99_0x3347('0x7')]||_0x148cca[a99_0x3347('0x7')]['length']==0x0){}if(_0x148cca[a99_0x3347('0x7')]&&_0x148cca[a99_0x3347('0x7')]['length']>0x0){}return this[a99_0x3347('0x4')][a99_0x3347('0x27')]({'where':_0x148cca[a99_0x3347('0x9')]})[a99_0x3347('0xa')](function(_0x32aad6){if(_0x32aad6){return _0x32aad6[a99_0x3347('0x28')](_0x148cca[a99_0x3347('0x1f')])[a99_0x3347('0xa')](function(_0x461217){const _0x1531be=_0x461217[a99_0x3347('0x21')];if(_0x473982){delete _0x1531be['id'];}if(_0x52ba99){return _0x52ba99[a99_0x3347('0x19')]({'success':!![],'data':_0x1531be});}else{return _0x1531be;}}[a99_0x3347('0x25')](this));}else{return this[a99_0x3347('0x4')][a99_0x3347('0x20')](_0x148cca['body'])[a99_0x3347('0xa')](function(_0x19b9aa){if(_0x52ba99){return _0x52ba99[a99_0x3347('0x19')]({'success':!![],'data':_0x19b9aa[a99_0x3347('0x18')]()});}else{return _0x19b9aa;}});}}[a99_0x3347('0x25')](this))[a99_0x3347('0xb')](_0x38211c=>{if(_0x52ba99){return _0x52ba99['status'](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0x38211c['stack']});}else{return _0x38211c[a99_0x3347('0xe')];}});}['findOrCreate'](_0x278780,_0x27290b,_0x343ac9){if(!_0x278780[a99_0x3347('0x7')]||_0x278780[a99_0x3347('0x7')][a99_0x3347('0x8')]==0x0){}if(_0x278780[a99_0x3347('0x7')]&&_0x278780[a99_0x3347('0x7')][a99_0x3347('0x8')]>0x0){}return this[a99_0x3347('0x4')][a99_0x3347('0x29')]({'where':{'uuid':_0x278780[a99_0x3347('0x1f')][a99_0x3347('0x1d')]},'defaults':_0x278780[a99_0x3347('0x1f')]})[a99_0x3347('0xa')]((_0x4ab518,_0x12f02c)=>{if(_0x12f02c){}else{}return _0x27290b[a99_0x3347('0x19')]({'success':!![],'data':_0x4ab518});})[a99_0x3347('0xb')](_0x4aa2e1=>{return _0x27290b[a99_0x3347('0xc')](0x1f4)['send']({'success':![],'data':_0x4aa2e1['stack']});});}[a99_0x3347('0x2a')](_0x258178,_0x16c00f,_0x4e2810){if(!_0x258178[a99_0x3347('0x7')]||_0x258178[a99_0x3347('0x7')][a99_0x3347('0x8')]==0x0){return _0x16c00f['status'](0x191)[a99_0x3347('0xd')]({'success':![],'data':a99_0x3347('0x1b')});}if(_0x258178[a99_0x3347('0x7')]&&_0x258178[a99_0x3347('0x7')]['length']>0x0){_0x258178[a99_0x3347('0x1f')]['created_by_user_id']=_0x258178[a99_0x3347('0x7')][0x0]['id'];}this[a99_0x3347('0x4')][a99_0x3347('0x1a')](_0x258178[a99_0x3347('0x9')]['id'])[a99_0x3347('0xa')](_0x7b7b42=>{if(_0x7b7b42==null)return _0x16c00f[a99_0x3347('0x19')]({'success':!![],'data':_0x7b7b42});_0x7b7b42[a99_0x3347('0x2b')]()[a99_0x3347('0xa')](function(_0x34ef1c){const _0x5aad0e=this[a99_0x3347('0x5')]?sequelize_utils_1[a99_0x3347('0x17')][a99_0x3347('0x14')](_0x7b7b42,_0x258178[a99_0x3347('0x15')][a99_0x3347('0x16')]):_0x7b7b42;return _0x16c00f['json']({'success':!![],'data':_0x5aad0e});})['catch'](_0x2b88e6=>{return _0x16c00f[a99_0x3347('0xc')](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0x2b88e6[a99_0x3347('0xe')]});});})['catch'](_0xbe0c25=>{return _0x16c00f[a99_0x3347('0xc')](0x1f4)[a99_0x3347('0xd')]({'success':![],'data':_0xbe0c25[a99_0x3347('0xe')]});});}}exports[a99_0x3347('0x17')]=CrudUtils;