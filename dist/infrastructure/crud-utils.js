var a195_0x2279=['update','saveImageFile','bind','updateOrCreate','length','findOrCreate','status','send','remove','destroy','replace','match','png','ensureDirSync','fileName','writeFile','base64','err:','findByUuid','findOne','uuid','parse','stringify','findUuidAndUpdate','__importDefault','__esModule','./sequelize-utils','../app/shared/models/crudOptions','../infrastructure/auth-utils','fs-extra','base64-img','../infrastructure/response-utils','model','i18n','count','public','user','errorResponse','authentication\x20failed','shared','params','json','stack','find','default','query','page_size','page_index','created_by_user_id','findAll','attributes','includeAll','updated_by_user_id','created_at','updated_at','createdAt','deletedAt','include','orderBy','toJSONLocalizedOnly','lang','toJSON','encryptId','successResponse','catch','findById','decryptId','findByPk','headers','dataValues','env','FILES_FOLDER','images/','name','.jpg','existsSync','.png','base64Sync','image_data','deleted_by_user_id','deleted_at','password','save','body','findOneAndUpdate','create','then','hashPassword','log'];(function(_0x2de9d2,_0x408f84){var _0x4e1a97=function(_0x5a682d){while(--_0x5a682d){_0x2de9d2['push'](_0x2de9d2['shift']());}};_0x4e1a97(++_0x408f84);}(a195_0x2279,0x123));var a195_0x2d9e=function(_0x485730,_0xf8e862){_0x485730=_0x485730-0x0;var _0x4555c4=a195_0x2279[_0x485730];return _0x4555c4;};'use strict';var __importDefault=this&&this[a195_0x2d9e('0x0')]||function(_0x4f81dc){return _0x4f81dc&&_0x4f81dc[a195_0x2d9e('0x1')]?_0x4f81dc:{'default':_0x4f81dc};};Object['defineProperty'](exports,a195_0x2d9e('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a195_0x2d9e('0x2')));const crypt_utils_1=__importDefault(require('./crypt-utils'));const crudOptions_1=__importDefault(require(a195_0x2d9e('0x3')));const authUtils=require(a195_0x2d9e('0x4'));const fsExtra=require(a195_0x2d9e('0x5'));const base64Img=require(a195_0x2d9e('0x6'));const responseUtils=require(a195_0x2d9e('0x7'));class CrudUtils{constructor(_0x14cbd5,_0xc9900c){this[a195_0x2d9e('0x8')]=_0x14cbd5;this[a195_0x2d9e('0x9')]=_0xc9900c;}[a195_0x2d9e('0xa')](_0x12a9f2,_0x39824d,_0x58fe5d,_0x1d9972=new crudOptions_1['default']()){if(!_0x1d9972[a195_0x2d9e('0xb')]){if(!_0x12a9f2[a195_0x2d9e('0xc')]){return responseUtils[a195_0x2d9e('0xd')](_0x12a9f2,_0x39824d,a195_0x2d9e('0xe'),0x191);}}if(!_0x1d9972[a195_0x2d9e('0xf')]){if(_0x12a9f2[a195_0x2d9e('0xc')]){_0x12a9f2[a195_0x2d9e('0x10')]['created_by_user_id']=_0x12a9f2[a195_0x2d9e('0xc')]['id'];}}return this['model'][a195_0x2d9e('0xa')]({'where':_0x12a9f2[a195_0x2d9e('0x10')]})['then'](_0x1939ee=>{const _0x4c93e2=_0x1939ee;if(_0x39824d){return _0x39824d[a195_0x2d9e('0x11')]({'success':!![],'data':{'total':_0x1939ee}});}else{return _0x4c93e2;}})['catch'](_0x595fa6=>{if(_0x39824d){return _0x39824d['status'](0x1f4)['send']({'success':![],'data':_0x595fa6[a195_0x2d9e('0x12')]});}else{return _0x595fa6[a195_0x2d9e('0x12')];}});}[a195_0x2d9e('0x13')](_0x28aa9b,_0x199dd2,_0x204ca3,_0x3bd4d9=new crudOptions_1[(a195_0x2d9e('0x14'))]()){let _0x3a1603=_0x28aa9b[a195_0x2d9e('0x15')][a195_0x2d9e('0x16')]?Number(_0x28aa9b['query'][a195_0x2d9e('0x16')]):null;if(_0x3a1603==null||_0x3a1603>0x64){_0x3a1603=0x64;}let _0x240bfc=_0x28aa9b[a195_0x2d9e('0x15')][a195_0x2d9e('0x17')]&&_0x3a1603!=null?Number(_0x28aa9b[a195_0x2d9e('0x15')][a195_0x2d9e('0x17')])*_0x3a1603:null;if(_0x240bfc==null){_0x240bfc=0x0;}if(!_0x3bd4d9[a195_0x2d9e('0xb')]){if(!_0x28aa9b[a195_0x2d9e('0xc')]){return responseUtils[a195_0x2d9e('0xd')](_0x28aa9b,_0x199dd2,'authentication\x20failed',0x191);}}if(!_0x3bd4d9[a195_0x2d9e('0xf')]){if(_0x28aa9b[a195_0x2d9e('0xc')]){_0x28aa9b['params'][a195_0x2d9e('0x18')]=_0x28aa9b[a195_0x2d9e('0xc')]['id'];}}return this['model'][a195_0x2d9e('0x19')]({'attributes':_0x3bd4d9[a195_0x2d9e('0x1a')]?_0x3bd4d9[a195_0x2d9e('0x1a')]:{'exclude':_0x3bd4d9[a195_0x2d9e('0x1b')]?[]:[a195_0x2d9e('0x18'),a195_0x2d9e('0x1c'),'deleted_by_user_id',a195_0x2d9e('0x1d'),a195_0x2d9e('0x1e'),'deleted_at',a195_0x2d9e('0x1f'),'updatedAt',a195_0x2d9e('0x20')]},'where':_0x28aa9b['params'],'offset':_0x240bfc,'limit':_0x3a1603,'include':_0x3bd4d9[a195_0x2d9e('0x21')],'order':_0x3bd4d9[a195_0x2d9e('0x22')]})['then'](_0xd298cd=>{let _0x3bd1df=this['i18n']?sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x23')](_0xd298cd,_0x28aa9b['headers'][a195_0x2d9e('0x24')]):sequelize_utils_1['default'][a195_0x2d9e('0x25')](_0xd298cd);_0x3bd1df=sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x26')](_0x3bd1df);if(_0x199dd2){return responseUtils[a195_0x2d9e('0x27')](_0x28aa9b,_0x199dd2,_0x3bd1df,0xc8);}else{return _0x3bd1df;}})[a195_0x2d9e('0x28')](_0x5aad6d=>{if(_0x199dd2){return responseUtils[a195_0x2d9e('0xd')](_0x28aa9b,_0x199dd2,_0x5aad6d['stack'],0x1f4);}else{return _0x5aad6d['stack'];}});}[a195_0x2d9e('0x29')](_0x11d72d,_0x7efbf1,_0x3633fb,_0x2bdfc8=new crudOptions_1[(a195_0x2d9e('0x14'))]()){if(!_0x2bdfc8[a195_0x2d9e('0xb')]){if(!_0x11d72d[a195_0x2d9e('0xc')]){return responseUtils[a195_0x2d9e('0xd')](_0x11d72d,_0x7efbf1,a195_0x2d9e('0xe'),0x191);}}if(!_0x2bdfc8[a195_0x2d9e('0xf')]){if(_0x11d72d[a195_0x2d9e('0xc')]){_0x11d72d[a195_0x2d9e('0x10')]['created_by_user_id']=_0x11d72d[a195_0x2d9e('0xc')]['id'];}}_0x11d72d[a195_0x2d9e('0x10')]['id']=sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x2a')](_0x11d72d['params']['id']);return this[a195_0x2d9e('0x8')][a195_0x2d9e('0x2b')](_0x11d72d[a195_0x2d9e('0x10')]['id'])['then'](_0x17c3f5=>{let _0x5917f6=this[a195_0x2d9e('0x9')]?sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x23')](_0x17c3f5,_0x11d72d[a195_0x2d9e('0x2c')]['lang']):_0x17c3f5;if(_0x5917f6){_0x5917f6=_0x5917f6[a195_0x2d9e('0x2d')];_0x5917f6=sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x26')](_0x5917f6);let _0x26c55b=process[a195_0x2d9e('0x2e')][a195_0x2d9e('0x2f')]+a195_0x2d9e('0x30')+this['model'][a195_0x2d9e('0x31')]+'_'+_0x5917f6['id']+a195_0x2d9e('0x32');if(!fsExtra[a195_0x2d9e('0x33')](_0x26c55b)){_0x26c55b=process[a195_0x2d9e('0x2e')][a195_0x2d9e('0x2f')]+a195_0x2d9e('0x30')+this[a195_0x2d9e('0x8')][a195_0x2d9e('0x31')]+'_'+_0x5917f6['id']+a195_0x2d9e('0x34');}let _0x29cb87=null;if(fsExtra[a195_0x2d9e('0x33')](_0x26c55b)){_0x29cb87=base64Img[a195_0x2d9e('0x35')](_0x26c55b);_0x5917f6=JSON['parse'](JSON['stringify'](_0x5917f6));_0x5917f6[a195_0x2d9e('0x36')]=_0x29cb87;}if(!_0x2bdfc8[a195_0x2d9e('0x1b')]){delete _0x5917f6[a195_0x2d9e('0x18')];delete _0x5917f6[a195_0x2d9e('0x1c')];delete _0x5917f6[a195_0x2d9e('0x37')];delete _0x5917f6[a195_0x2d9e('0x1d')];delete _0x5917f6[a195_0x2d9e('0x1e')];delete _0x5917f6[a195_0x2d9e('0x38')];delete _0x5917f6[a195_0x2d9e('0x39')];}}if(_0x7efbf1){return responseUtils[a195_0x2d9e('0x27')](_0x11d72d,_0x7efbf1,_0x5917f6,0xc8);}else{return _0x5917f6;}})[a195_0x2d9e('0x28')](_0x588b9a=>{if(_0x7efbf1){return responseUtils[a195_0x2d9e('0xd')](_0x11d72d,_0x7efbf1,_0x588b9a[a195_0x2d9e('0x12')],0x1f4);}else{return _0x588b9a[a195_0x2d9e('0x12')];}});}[a195_0x2d9e('0x3a')](_0x5c1343,_0x10d1bb,_0x28c9a4,_0x15b63a=new crudOptions_1['default']()){console['log'](a195_0x2d9e('0x3a'),_0x5c1343['body']);if(!_0x5c1343['user']){return responseUtils[a195_0x2d9e('0xd')](_0x5c1343,_0x10d1bb,a195_0x2d9e('0xe'),0x191);}if(_0x5c1343['body']['id']&&_0x5c1343[a195_0x2d9e('0x3b')]['id']!=''){return this[a195_0x2d9e('0x3c')](_0x5c1343,_0x10d1bb,_0x28c9a4,_0x15b63a);}else{return this[a195_0x2d9e('0x3d')](_0x5c1343,_0x10d1bb);}}[a195_0x2d9e('0x3d')](_0x2ca795,_0x111afe){if(!_0x2ca795[a195_0x2d9e('0xc')]){return responseUtils[a195_0x2d9e('0xd')](_0x2ca795,_0x111afe,a195_0x2d9e('0xe'),0x191);}_0x2ca795[a195_0x2d9e('0x3b')]=sequelize_utils_1['default'][a195_0x2d9e('0x2a')](_0x2ca795[a195_0x2d9e('0x3b')]);_0x2ca795[a195_0x2d9e('0x3b')]['created_by_user_id']=_0x2ca795[a195_0x2d9e('0xc')]['id'];if(_0x2ca795[a195_0x2d9e('0x3b')][a195_0x2d9e('0x39')]&&_0x2ca795[a195_0x2d9e('0x3b')][a195_0x2d9e('0x39')]!=''){_0x2ca795[a195_0x2d9e('0x3b')]['password']=crypt_utils_1[a195_0x2d9e('0x14')]['hashPassword'](_0x2ca795[a195_0x2d9e('0x3b')][a195_0x2d9e('0x39')]);}return this['model'][a195_0x2d9e('0x3d')](_0x2ca795[a195_0x2d9e('0x3b')],this[a195_0x2d9e('0x9')]?{'language_id':_0x2ca795[a195_0x2d9e('0x2c')]['lang']}:{})[a195_0x2d9e('0x3e')](_0x47067f=>{const _0x444b06=this[a195_0x2d9e('0x9')]?sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x23')](_0x47067f,_0x2ca795[a195_0x2d9e('0x2c')][a195_0x2d9e('0x24')]):_0x47067f;this['saveImageFile'](_0x2ca795,_0x444b06);const _0x1c7e33={'id':sequelize_utils_1['default'][a195_0x2d9e('0x26')](_0x444b06[a195_0x2d9e('0x2d')]['id'])};if(_0x111afe){return responseUtils[a195_0x2d9e('0x27')](_0x2ca795,_0x111afe,_0x1c7e33,0xc8);}else{return _0x444b06;}})[a195_0x2d9e('0x28')](_0x27efc6=>{if(_0x111afe){return responseUtils[a195_0x2d9e('0xd')](_0x2ca795,_0x111afe,_0x27efc6['stack'],0x1f4);}else{return _0x27efc6[a195_0x2d9e('0x12')];}});}[a195_0x2d9e('0x3c')](_0x1cc1d0,_0x30c59d,_0x2c771f,_0x13d02a=new crudOptions_1[(a195_0x2d9e('0x14'))]()){if(!_0x1cc1d0[a195_0x2d9e('0xc')]){return responseUtils[a195_0x2d9e('0xd')](_0x1cc1d0,_0x30c59d,a195_0x2d9e('0xe'),0x191);}_0x1cc1d0[a195_0x2d9e('0x3b')]=sequelize_utils_1[a195_0x2d9e('0x14')]['decryptId'](_0x1cc1d0['body']);let _0x16dffa=null;if(_0x1cc1d0[a195_0x2d9e('0x10')]['id']){_0x16dffa=sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x2a')](_0x1cc1d0[a195_0x2d9e('0x10')]['id']);}else if(_0x1cc1d0[a195_0x2d9e('0x3b')]['id']){_0x16dffa=_0x1cc1d0['body']['id'];}else{return responseUtils[a195_0x2d9e('0xd')](_0x1cc1d0,_0x30c59d,null,0x190);}if(_0x16dffa==null){if(_0x30c59d){return responseUtils[a195_0x2d9e('0xd')](_0x1cc1d0,_0x30c59d,null,0x194);}else{return null;}}_0x1cc1d0[a195_0x2d9e('0x3b')]['updated_by_user_id']=_0x1cc1d0[a195_0x2d9e('0xc')]['id'];if(_0x1cc1d0[a195_0x2d9e('0x3b')][a195_0x2d9e('0x39')]&&_0x1cc1d0[a195_0x2d9e('0x3b')][a195_0x2d9e('0x39')]!=''){_0x1cc1d0[a195_0x2d9e('0x3b')][a195_0x2d9e('0x39')]=crypt_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x3f')](_0x1cc1d0['body']['password']);}return this[a195_0x2d9e('0x8')]['findByPk'](_0x16dffa)[a195_0x2d9e('0x3e')](_0x4d3c4d=>{console[a195_0x2d9e('0x40')]('findOneAndUpdate\x20options.shared',_0x13d02a['shared']);if(_0x4d3c4d==null||_0x4d3c4d['dataValues']['created_by_user_id']!=_0x1cc1d0[a195_0x2d9e('0xc')]['id']&&!_0x13d02a[a195_0x2d9e('0xf')]){if(_0x30c59d){return responseUtils[a195_0x2d9e('0xd')](_0x1cc1d0,_0x30c59d,null,0x193,_0x2c771f);}else{return null;}}return _0x4d3c4d[a195_0x2d9e('0x41')](_0x1cc1d0[a195_0x2d9e('0x3b')],{'language_id':_0x1cc1d0['headers']['lang']})[a195_0x2d9e('0x3e')](function(_0x4e24bf){const _0x340c25=this['i18n']?sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x23')](_0x4e24bf,_0x1cc1d0[a195_0x2d9e('0x2c')][a195_0x2d9e('0x24')]):_0x4e24bf;this[a195_0x2d9e('0x42')](_0x1cc1d0,_0x340c25);const _0x5618da={'id':sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x26')](_0x340c25[a195_0x2d9e('0x2d')]['id'])};if(_0x30c59d){return responseUtils['successResponse'](_0x1cc1d0,_0x30c59d,_0x5618da,0xc8);}else{return _0x340c25;}}[a195_0x2d9e('0x43')](this))['catch'](_0xfcf9bc=>{if(_0x30c59d){return responseUtils['errorResponse'](_0x1cc1d0,_0x30c59d,_0xfcf9bc[a195_0x2d9e('0x12')],0x1f4);}else{return _0xfcf9bc[a195_0x2d9e('0x12')];}});})[a195_0x2d9e('0x28')](_0x575a7d=>{if(_0x30c59d){return responseUtils[a195_0x2d9e('0xd')](_0x1cc1d0,_0x30c59d,_0x575a7d[a195_0x2d9e('0x12')],0x1f4);}else{return _0x575a7d[a195_0x2d9e('0x12')];}});}[a195_0x2d9e('0x44')](_0x513a96,_0x47ce20,_0x47761c,_0x35954a=![],_0x52f6d7=![]){if(!_0x513a96[a195_0x2d9e('0xc')]&&!_0x52f6d7){return responseUtils[a195_0x2d9e('0xd')](_0x513a96,_0x47ce20,a195_0x2d9e('0xe'),0x191);}if(_0x513a96[a195_0x2d9e('0xc')]&&_0x513a96[a195_0x2d9e('0xc')][a195_0x2d9e('0x45')]>0x0){}return this[a195_0x2d9e('0x8')]['findOne']({'where':_0x513a96[a195_0x2d9e('0x10')]})[a195_0x2d9e('0x3e')](function(_0x1c8cb9){if(_0x1c8cb9){return _0x1c8cb9[a195_0x2d9e('0x41')](_0x513a96[a195_0x2d9e('0x3b')])[a195_0x2d9e('0x3e')](function(_0x3e74b1){const _0x746075=_0x3e74b1[a195_0x2d9e('0x2d')];if(!_0x35954a){delete _0x746075['id'];}if(_0x47ce20){return _0x47ce20[a195_0x2d9e('0x11')]({'success':!![],'data':_0x746075});}else{return _0x746075;}}[a195_0x2d9e('0x43')](this));}else{return this[a195_0x2d9e('0x8')][a195_0x2d9e('0x3d')](_0x513a96[a195_0x2d9e('0x3b')])[a195_0x2d9e('0x3e')](function(_0x4d151d){if(_0x47ce20){return _0x47ce20[a195_0x2d9e('0x11')]({'success':!![],'data':_0x4d151d[a195_0x2d9e('0x25')]()});}else{return _0x4d151d;}});}}[a195_0x2d9e('0x43')](this))['catch'](_0xe0a3da=>{if(_0x47ce20){return responseUtils[a195_0x2d9e('0xd')](_0x513a96,_0x47ce20,_0xe0a3da[a195_0x2d9e('0x12')],0x1f4);}else{return _0xe0a3da['stack'];}});}[a195_0x2d9e('0x46')](_0x2a3bbd,_0x1e39f7,_0x2f2393){if(!_0x2a3bbd[a195_0x2d9e('0xc')]){return _0x1e39f7[a195_0x2d9e('0x47')](0x191)[a195_0x2d9e('0x48')]({'success':![],'data':'authentication\x20failed'});}_0x2a3bbd[a195_0x2d9e('0x3b')][a195_0x2d9e('0x18')]=_0x2a3bbd['user']['id'];return this[a195_0x2d9e('0x8')]['findOrCreate']({'where':_0x2a3bbd[a195_0x2d9e('0x10')],'defaults':_0x2a3bbd[a195_0x2d9e('0x3b')]})[a195_0x2d9e('0x3e')]((_0x48c488,_0x37d2e2)=>{const _0x118a4f={'id':sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x26')](_0x48c488[0x0]['id'])};if(_0x1e39f7){return responseUtils[a195_0x2d9e('0x27')](_0x2a3bbd,_0x1e39f7,_0x118a4f,0xc8);}else{return _0x48c488[0x0];}})['catch'](_0x48a456=>{if(_0x1e39f7){return responseUtils[a195_0x2d9e('0xd')](_0x2a3bbd,_0x1e39f7,_0x48a456['stack'],0x1f4);}else{return _0x48a456[a195_0x2d9e('0x12')];}});}[a195_0x2d9e('0x49')](_0x4ee1f2,_0x220e11,_0x32330f){if(!_0x4ee1f2[a195_0x2d9e('0xc')]){return responseUtils['errorResponse'](_0x4ee1f2,_0x220e11,a195_0x2d9e('0xe'),0x191);}let _0x45d33c=null;if(_0x4ee1f2['params']['id']){_0x45d33c=sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x2a')](_0x4ee1f2['params']['id']);}else{return responseUtils[a195_0x2d9e('0xd')](_0x4ee1f2,_0x220e11,null,0x190);}if(_0x45d33c==null){if(_0x220e11){return responseUtils[a195_0x2d9e('0xd')](_0x4ee1f2,_0x220e11,null,0x194);}else{return null;}}this[a195_0x2d9e('0x8')]['findByPk'](_0x45d33c)[a195_0x2d9e('0x3e')](_0x547cdd=>{if(_0x547cdd==null||_0x547cdd[a195_0x2d9e('0x2d')][a195_0x2d9e('0x18')]!=_0x4ee1f2[a195_0x2d9e('0xc')]['id']){return responseUtils[a195_0x2d9e('0xd')](_0x4ee1f2,_0x220e11,null,0x194);}_0x547cdd[a195_0x2d9e('0x41')]({'deleted_by_user_id':_0x4ee1f2[a195_0x2d9e('0xc')]['id']},{'language_id':_0x4ee1f2[a195_0x2d9e('0x2c')][a195_0x2d9e('0x24')]})[a195_0x2d9e('0x3e')](function(_0x213475){_0x547cdd[a195_0x2d9e('0x4a')]()[a195_0x2d9e('0x3e')](function(_0x547cdd){if(_0x220e11){return responseUtils[a195_0x2d9e('0x27')](_0x4ee1f2,_0x220e11,null,0xc8);}else{return _0x547cdd;}})[a195_0x2d9e('0x28')](_0x1d5c13=>{return responseUtils[a195_0x2d9e('0xd')](_0x4ee1f2,_0x220e11,_0x1d5c13[a195_0x2d9e('0x12')],0x1f4);});}[a195_0x2d9e('0x43')](this))[a195_0x2d9e('0x28')](_0x5f3926=>{return responseUtils[a195_0x2d9e('0xd')](_0x4ee1f2,_0x220e11,_0x5f3926[a195_0x2d9e('0x12')],0x1f4);});})['catch'](_0x2d7d8b=>{return responseUtils[a195_0x2d9e('0xd')](_0x4ee1f2,_0x220e11,_0x2d7d8b[a195_0x2d9e('0x12')],0x1f4);});}[a195_0x2d9e('0x42')](_0x226c3c,_0x1298cb){if(_0x226c3c[a195_0x2d9e('0x3b')]['image_data']&&_0x226c3c['body'][a195_0x2d9e('0x36')]!=''){const _0x1877d4=process[a195_0x2d9e('0x2e')][a195_0x2d9e('0x2f')]+a195_0x2d9e('0x30');const _0x24a7b7=_0x226c3c[a195_0x2d9e('0x3b')]['image_data'];let _0x4689bd='';const _0x2d4220=_0x24a7b7[a195_0x2d9e('0x4b')](/^data:image\/(png|jpeg|jpg);base64,/,'');if(_0x24a7b7[a195_0x2d9e('0x4c')](/^data:image\/png;base64,/,'')){_0x4689bd=a195_0x2d9e('0x4d');}else if(_0x24a7b7[a195_0x2d9e('0x4c')](/^data:image\/(jpg|jpeg);base64,/,'')){_0x4689bd='jpg';}const _0x1b604a=sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x26')](_0x1298cb['dataValues']['id']);fsExtra[a195_0x2d9e('0x4e')](_0x1877d4);const _0x1e72cb=''+_0x1877d4+this['model']['name']+'_'+_0x1b604a+'.'+_0x4689bd;console[a195_0x2d9e('0x40')](a195_0x2d9e('0x4f'),_0x1e72cb);fsExtra[a195_0x2d9e('0x50')](_0x1e72cb,_0x2d4220,a195_0x2d9e('0x51'),function(_0x2bce75){console[a195_0x2d9e('0x40')](a195_0x2d9e('0x52'),_0x2bce75);});}}[a195_0x2d9e('0x53')](_0x557136,_0x56c832,_0x57b90b){if(!_0x557136[a195_0x2d9e('0xc')]){}this[a195_0x2d9e('0x8')][a195_0x2d9e('0x54')]({'attributes':{'exclude':[a195_0x2d9e('0x18'),a195_0x2d9e('0x1c'),a195_0x2d9e('0x37'),a195_0x2d9e('0x1d'),a195_0x2d9e('0x1e'),'deleted_at']},'where':{'uuid':_0x557136[a195_0x2d9e('0x10')][a195_0x2d9e('0x55')]}})[a195_0x2d9e('0x3e')](_0x359094=>{let _0x806d01=this['i18n']?sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x23')](_0x359094,_0x557136[a195_0x2d9e('0x2c')][a195_0x2d9e('0x24')]):_0x359094;if(_0x806d01){const _0x436e35=process[a195_0x2d9e('0x2e')][a195_0x2d9e('0x2f')]+a195_0x2d9e('0x30')+_0x806d01[a195_0x2d9e('0x55')]+'.jpg';let _0x4850b8=null;if(fsExtra[a195_0x2d9e('0x33')](_0x436e35)){_0x4850b8=base64Img['base64Sync'](_0x436e35);_0x806d01=JSON[a195_0x2d9e('0x56')](JSON[a195_0x2d9e('0x57')](_0x806d01));_0x806d01[a195_0x2d9e('0x36')]=_0x4850b8;}}return _0x56c832[a195_0x2d9e('0x11')]({'success':!![],'data':_0x806d01});})[a195_0x2d9e('0x28')](_0x16ac8c=>{return _0x56c832[a195_0x2d9e('0x47')](0x1f4)[a195_0x2d9e('0x48')]({'success':![],'data':_0x16ac8c[a195_0x2d9e('0x12')]});});}[a195_0x2d9e('0x58')](_0x31d58d,_0x466dbb,_0x244e36){if(!_0x31d58d[a195_0x2d9e('0xc')]){return _0x466dbb['status'](0x191)['send']({'success':![],'data':'authentication\x20failed'});}if(_0x31d58d[a195_0x2d9e('0xc')]&&_0x31d58d[a195_0x2d9e('0xc')][a195_0x2d9e('0x45')]>0x0){}console[a195_0x2d9e('0x40')](_0x31d58d[a195_0x2d9e('0x10')]);const _0xfe4986=_0x31d58d[a195_0x2d9e('0x3b')][a195_0x2d9e('0x55')]&&_0x31d58d[a195_0x2d9e('0x3b')][a195_0x2d9e('0x55')]!=''?_0x31d58d[a195_0x2d9e('0x3b')][a195_0x2d9e('0x55')]:_0x31d58d[a195_0x2d9e('0x10')][a195_0x2d9e('0x55')];this[a195_0x2d9e('0x8')]['findOne']({'where':{'uuid':_0xfe4986}})[a195_0x2d9e('0x3e')](_0x4d636b=>{if(_0x4d636b==null)return _0x466dbb[a195_0x2d9e('0x11')]({'success':!![],'data':_0x4d636b});_0x4d636b[a195_0x2d9e('0x41')](_0x31d58d[a195_0x2d9e('0x3b')],{'language_id':_0x31d58d[a195_0x2d9e('0x2c')][a195_0x2d9e('0x24')]})['then'](function(_0x2c72a1){const _0x2d6963=this[a195_0x2d9e('0x9')]?sequelize_utils_1[a195_0x2d9e('0x14')][a195_0x2d9e('0x23')](_0x4d636b,_0x31d58d['headers'][a195_0x2d9e('0x24')]):_0x4d636b;this['saveImageFile'](_0x31d58d,_0x2d6963);return _0x466dbb['json']({'success':!![],'data':_0x2d6963});}[a195_0x2d9e('0x43')](this))[a195_0x2d9e('0x28')](_0x35aae2=>{return _0x466dbb['status'](0x1f4)[a195_0x2d9e('0x48')]({'success':![],'data':_0x35aae2[a195_0x2d9e('0x12')]});});})[a195_0x2d9e('0x28')](_0xd0f66d=>{return _0x466dbb[a195_0x2d9e('0x47')](0x1f4)[a195_0x2d9e('0x48')]({'success':![],'data':_0xd0f66d[a195_0x2d9e('0x12')]});});}}exports[a195_0x2d9e('0x14')]=CrudUtils;