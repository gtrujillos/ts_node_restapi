var a97_0x136d=['created_at','updated_at','deleted_at','then','i18n','default','toJSONLocalizedOnly','headers','lang','json','catch','status','send','stack','findById','authentication\x20failed','findByUUId','params','toJSON','save','body','create','dataValues','created_by_user_id','deleted_by_user_id','findOneAndUpdate','findByPk','update','updateOrCreate','log','bind','findOrCreate','uuid','remove','destroy','__importDefault','defineProperty','__esModule','./sequelize-utils','model','find','user','length','findAll','updated_by_user_id'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a97_0x136d,0x15e));var a97_0x1bd2=function(_0x58c47d,_0x414861){_0x58c47d=_0x58c47d-0x0;var _0x256c54=a97_0x136d[_0x58c47d];return _0x256c54;};'use strict';var __importDefault=this&&this[a97_0x1bd2('0x0')]||function(_0xa20b08){return _0xa20b08&&_0xa20b08['__esModule']?_0xa20b08:{'default':_0xa20b08};};Object[a97_0x1bd2('0x1')](exports,a97_0x1bd2('0x2'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a97_0x1bd2('0x3')));class CrudUtils{constructor(_0x2e0c6d,_0xdd1649){this[a97_0x1bd2('0x4')]=_0x2e0c6d;this['i18n']=_0xdd1649;}[a97_0x1bd2('0x5')](_0x4b9543,_0x109186,_0x6a0325,_0x58181a=![]){if(!_0x4b9543[a97_0x1bd2('0x6')]||_0x4b9543['user'][a97_0x1bd2('0x7')]==0x0){}return this[a97_0x1bd2('0x4')][a97_0x1bd2('0x8')]({'attributes':{'exclude':_0x58181a?[]:['id','created_by_user_id',a97_0x1bd2('0x9'),'deleted_by_user_id',a97_0x1bd2('0xa'),a97_0x1bd2('0xb'),a97_0x1bd2('0xc')]},'where':{}})[a97_0x1bd2('0xd')](_0x5228a5=>{const _0x5b2929=this[a97_0x1bd2('0xe')]?sequelize_utils_1[a97_0x1bd2('0xf')][a97_0x1bd2('0x10')](_0x5228a5,_0x4b9543[a97_0x1bd2('0x11')][a97_0x1bd2('0x12')]):sequelize_utils_1[a97_0x1bd2('0xf')]['toJSON'](_0x5228a5);if(_0x109186){return _0x109186[a97_0x1bd2('0x13')]({'success':!![],'data':_0x5b2929});}else{return _0x5b2929;}})[a97_0x1bd2('0x14')](_0x203f2f=>{if(_0x109186){return _0x109186[a97_0x1bd2('0x15')](0x1f4)[a97_0x1bd2('0x16')]({'success':![],'data':_0x203f2f[a97_0x1bd2('0x17')]});}else{return _0x203f2f[a97_0x1bd2('0x17')];}});}[a97_0x1bd2('0x18')](_0x13c5ff,_0x3fc7ca,_0x4002f6){if(!_0x13c5ff[a97_0x1bd2('0x6')]||_0x13c5ff[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]==0x0){return _0x3fc7ca['status'](0x191)[a97_0x1bd2('0x16')]({'success':![],'data':a97_0x1bd2('0x19')});}this[a97_0x1bd2('0x4')][a97_0x1bd2('0x18')](_0x13c5ff['params']['id'])[a97_0x1bd2('0xd')](_0x1fc2ca=>{const _0x387d13=this['i18n']?sequelize_utils_1[a97_0x1bd2('0xf')][a97_0x1bd2('0x10')](_0x1fc2ca,_0x13c5ff[a97_0x1bd2('0x11')][a97_0x1bd2('0x12')]):_0x1fc2ca;return _0x3fc7ca[a97_0x1bd2('0x13')]({'success':!![],'data':_0x387d13});})[a97_0x1bd2('0x14')](_0x429495=>{return _0x3fc7ca[a97_0x1bd2('0x15')](0x1f4)[a97_0x1bd2('0x16')]({'success':![],'data':_0x429495[a97_0x1bd2('0x17')]});});}[a97_0x1bd2('0x1a')](_0x20f45d,_0x4c790a,_0x2980a8){if(!_0x20f45d[a97_0x1bd2('0x6')]||_0x20f45d[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]==0x0){}return this[a97_0x1bd2('0x4')][a97_0x1bd2('0x8')]({'where':{'uuid':_0x20f45d[a97_0x1bd2('0x1b')]['uuid']}})[a97_0x1bd2('0xd')](_0x5a8893=>{const _0x45cd54=this[a97_0x1bd2('0xe')]?sequelize_utils_1[a97_0x1bd2('0xf')][a97_0x1bd2('0x10')](_0x5a8893,_0x20f45d[a97_0x1bd2('0x11')][a97_0x1bd2('0x12')]):sequelize_utils_1['default'][a97_0x1bd2('0x1c')](_0x5a8893);return _0x45cd54;})[a97_0x1bd2('0x14')](_0x171949=>{return _0x171949['stack'];});}[a97_0x1bd2('0x1d')](_0xa8b1ab,_0x422c4d,_0x4ca2e6){if(!_0xa8b1ab[a97_0x1bd2('0x6')]||_0xa8b1ab[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]==0x0){}if(_0xa8b1ab[a97_0x1bd2('0x6')]&&_0xa8b1ab[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]>0x0){_0xa8b1ab[a97_0x1bd2('0x1e')]['created_by_user_id']=_0xa8b1ab[a97_0x1bd2('0x6')][0x0]['id'];}return this[a97_0x1bd2('0x4')][a97_0x1bd2('0x1f')](_0xa8b1ab['body'],{'language_id':_0xa8b1ab['headers'][a97_0x1bd2('0x12')]})[a97_0x1bd2('0xd')](_0xf43e94=>{const _0x1eb03c=this['i18n']?sequelize_utils_1['default'][a97_0x1bd2('0x10')](_0xf43e94,_0xa8b1ab[a97_0x1bd2('0x11')]['lang']):_0xf43e94;delete _0x1eb03c[a97_0x1bd2('0x20')]['id'];delete _0x1eb03c[a97_0x1bd2('0x20')][a97_0x1bd2('0x21')];delete _0x1eb03c['dataValues'][a97_0x1bd2('0x9')];delete _0x1eb03c[a97_0x1bd2('0x20')][a97_0x1bd2('0x22')];delete _0x1eb03c[a97_0x1bd2('0x20')][a97_0x1bd2('0xa')];delete _0x1eb03c[a97_0x1bd2('0x20')]['updated_at'];delete _0x1eb03c['dataValues']['deleted_at'];if(_0x422c4d){return _0x422c4d[a97_0x1bd2('0x13')]({'success':!![],'data':_0x1eb03c});}else{return _0x1eb03c;}})[a97_0x1bd2('0x14')](_0x4e3827=>{if(_0x422c4d){return _0x422c4d[a97_0x1bd2('0x15')](0x1f4)[a97_0x1bd2('0x16')]({'success':![],'data':_0x4e3827[a97_0x1bd2('0x17')]});}else{return _0x4e3827[a97_0x1bd2('0x17')];}});}[a97_0x1bd2('0x23')](_0x51eceb,_0x31df58,_0x247f87){if(!_0x51eceb['user']||_0x51eceb[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]==0x0){}if(_0x51eceb[a97_0x1bd2('0x6')]&&_0x51eceb['user'][a97_0x1bd2('0x7')]>0x0){_0x51eceb['body'][a97_0x1bd2('0x21')]=_0x51eceb[a97_0x1bd2('0x6')][0x0]['id'];}this[a97_0x1bd2('0x4')][a97_0x1bd2('0x24')](_0x51eceb[a97_0x1bd2('0x1e')]['id'])['then'](_0x28688a=>{if(_0x28688a==null)return _0x31df58['json']({'success':!![],'data':_0x28688a});_0x28688a[a97_0x1bd2('0x25')](_0x51eceb[a97_0x1bd2('0x1e')],{'language_id':_0x51eceb[a97_0x1bd2('0x11')][a97_0x1bd2('0x12')]})[a97_0x1bd2('0xd')](function(_0x1f7066){const _0x4c8c81=this['i18n']?sequelize_utils_1[a97_0x1bd2('0xf')][a97_0x1bd2('0x10')](_0x28688a,_0x51eceb[a97_0x1bd2('0x11')][a97_0x1bd2('0x12')]):_0x28688a;return _0x31df58[a97_0x1bd2('0x13')]({'success':!![],'data':_0x4c8c81});}['bind'](this))[a97_0x1bd2('0x14')](_0x41b30e=>{return _0x31df58['status'](0x1f4)[a97_0x1bd2('0x16')]({'success':![],'data':_0x41b30e[a97_0x1bd2('0x17')]});});})[a97_0x1bd2('0x14')](_0x5b3c1a=>{return _0x31df58['status'](0x1f4)[a97_0x1bd2('0x16')]({'success':![],'data':_0x5b3c1a['stack']});});}[a97_0x1bd2('0x26')](_0x3aa9e5,_0x5eb432,_0x40b62d,_0x41e82d=![]){if(!_0x3aa9e5['user']||_0x3aa9e5[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]==0x0){}if(_0x3aa9e5[a97_0x1bd2('0x6')]&&_0x3aa9e5[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]>0x0){_0x3aa9e5[a97_0x1bd2('0x1e')][a97_0x1bd2('0x21')]=_0x3aa9e5['user'][0x0]['id'];}console[a97_0x1bd2('0x27')](_0x3aa9e5[a97_0x1bd2('0x1b')]);return this['model']['findOne']({'where':_0x3aa9e5['params']})['then'](function(_0x4c1019){if(_0x4c1019){return _0x4c1019['update'](_0x3aa9e5[a97_0x1bd2('0x1e')])[a97_0x1bd2('0xd')](function(_0x5c8f13){const _0x2d5f78=_0x5c8f13['dataValues'];if(_0x41e82d){delete _0x2d5f78['id'];}if(_0x5eb432){return _0x5eb432[a97_0x1bd2('0x13')]({'success':!![],'data':_0x2d5f78});}else{return _0x2d5f78;}}[a97_0x1bd2('0x28')](this));}else{return this['model'][a97_0x1bd2('0x1f')](_0x3aa9e5[a97_0x1bd2('0x1e')])[a97_0x1bd2('0xd')](function(_0x10cc89){if(_0x5eb432){return _0x5eb432[a97_0x1bd2('0x13')]({'success':!![],'data':_0x10cc89[a97_0x1bd2('0x1c')]()});}else{return _0x10cc89;}});}}[a97_0x1bd2('0x28')](this))[a97_0x1bd2('0x14')](_0x4d02c3=>{if(_0x5eb432){return _0x5eb432[a97_0x1bd2('0x15')](0x1f4)['send']({'success':![],'data':_0x4d02c3[a97_0x1bd2('0x17')]});}else{return _0x4d02c3[a97_0x1bd2('0x17')];}});}['findOrCreate'](_0x5c4a2d,_0x5cb817,_0x609948){if(!_0x5c4a2d['user']||_0x5c4a2d[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]==0x0){}if(_0x5c4a2d[a97_0x1bd2('0x6')]&&_0x5c4a2d[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]>0x0){_0x5c4a2d[a97_0x1bd2('0x1e')][a97_0x1bd2('0x21')]=_0x5c4a2d['user'][0x0]['id'];}return this[a97_0x1bd2('0x4')][a97_0x1bd2('0x29')]({'where':{'uuid':_0x5c4a2d[a97_0x1bd2('0x1e')][a97_0x1bd2('0x2a')]},'defaults':_0x5c4a2d[a97_0x1bd2('0x1e')]})['then']((_0x257989,_0x1f8f50)=>{if(_0x1f8f50){}else{}return _0x5cb817[a97_0x1bd2('0x13')]({'success':!![],'data':_0x257989});})[a97_0x1bd2('0x14')](_0x2ce1e3=>{return _0x5cb817[a97_0x1bd2('0x15')](0x1f4)[a97_0x1bd2('0x16')]({'success':![],'data':_0x2ce1e3['stack']});});}[a97_0x1bd2('0x2b')](_0x21ed55,_0x4f601b,_0xe37951){if(!_0x21ed55[a97_0x1bd2('0x6')]||_0x21ed55[a97_0x1bd2('0x6')][a97_0x1bd2('0x7')]==0x0){return _0x4f601b[a97_0x1bd2('0x15')](0x191)[a97_0x1bd2('0x16')]({'success':![],'data':'authentication\x20failed'});}if(_0x21ed55[a97_0x1bd2('0x6')]&&_0x21ed55[a97_0x1bd2('0x6')]['length']>0x0){_0x21ed55[a97_0x1bd2('0x1e')][a97_0x1bd2('0x21')]=_0x21ed55['user'][0x0]['id'];}this[a97_0x1bd2('0x4')][a97_0x1bd2('0x18')](_0x21ed55[a97_0x1bd2('0x1b')]['id'])['then'](_0x4ffbd0=>{if(_0x4ffbd0==null)return _0x4f601b[a97_0x1bd2('0x13')]({'success':!![],'data':_0x4ffbd0});_0x4ffbd0[a97_0x1bd2('0x2c')]()[a97_0x1bd2('0xd')](function(_0x5b2290){const _0x4be8b4=this[a97_0x1bd2('0xe')]?sequelize_utils_1[a97_0x1bd2('0xf')][a97_0x1bd2('0x10')](_0x4ffbd0,_0x21ed55[a97_0x1bd2('0x11')][a97_0x1bd2('0x12')]):_0x4ffbd0;return _0x4f601b['json']({'success':!![],'data':_0x4be8b4});})['catch'](_0x39a243=>{return _0x4f601b['status'](0x1f4)[a97_0x1bd2('0x16')]({'success':![],'data':_0x39a243[a97_0x1bd2('0x17')]});});})[a97_0x1bd2('0x14')](_0x5681d2=>{return _0x4f601b[a97_0x1bd2('0x15')](0x1f4)['send']({'success':![],'data':_0x5681d2[a97_0x1bd2('0x17')]});});}}exports[a97_0x1bd2('0xf')]=CrudUtils;