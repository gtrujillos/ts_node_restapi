var a105_0x1408=['count','user','length','params','catch','send','stack','find','offset','query','limit','findAll','created_by_user_id','updated_by_user_id','created_at','updated_at','deleted_at','then','i18n','toJSONLocalizedOnly','headers','lang','toJSON','json','status','findById','authentication\x20failed','default','findByUUId','uuid','save','body','create','dataValues','deleted_by_user_id','bind','update','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model'];(function(_0x5c9439,_0x433729){var _0x55d352=function(_0x53356c){while(--_0x53356c){_0x5c9439['push'](_0x5c9439['shift']());}};_0x55d352(++_0x433729);}(a105_0x1408,0x190));var a105_0xb466=function(_0x117bbe,_0x302489){_0x117bbe=_0x117bbe-0x0;var _0x3cd6f6=a105_0x1408[_0x117bbe];return _0x3cd6f6;};'use strict';var __importDefault=this&&this[a105_0xb466('0x0')]||function(_0x2dd5e9){return _0x2dd5e9&&_0x2dd5e9[a105_0xb466('0x1')]?_0x2dd5e9:{'default':_0x2dd5e9};};Object[a105_0xb466('0x2')](exports,a105_0xb466('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a105_0xb466('0x3')));class CrudUtils{constructor(_0x23fc2d,_0x4d9d68){this[a105_0xb466('0x4')]=_0x23fc2d;this['i18n']=_0x4d9d68;}[a105_0xb466('0x5')](_0x1637e0,_0x589776,_0xe31fe5){if(!_0x1637e0['user']||_0x1637e0[a105_0xb466('0x6')][a105_0xb466('0x7')]==0x0){}return this[a105_0xb466('0x4')]['count']({'where':_0x1637e0[a105_0xb466('0x8')]})['then'](_0x18aace=>{const _0x9db7a6=_0x18aace;if(_0x589776){return _0x589776['json']({'success':!![],'data':{'total':_0x18aace}});}else{return _0x9db7a6;}})[a105_0xb466('0x9')](_0x224507=>{if(_0x589776){return _0x589776['status'](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x224507[a105_0xb466('0xb')]});}else{return _0x224507[a105_0xb466('0xb')];}});}[a105_0xb466('0xc')](_0xc7e9f9,_0x3c1348,_0x3b0103,_0x3f2327=![],_0x200b48=[],_0x5f7f20=null){const _0x286064=_0xc7e9f9['query'][a105_0xb466('0xd')]?Number(_0xc7e9f9[a105_0xb466('0xe')]['offset']):null;const _0x34f212=_0xc7e9f9['query'][a105_0xb466('0xf')]?Number(_0xc7e9f9['query'][a105_0xb466('0xf')]):null;if(!_0xc7e9f9['user']||_0xc7e9f9[a105_0xb466('0x6')][a105_0xb466('0x7')]==0x0){}return this[a105_0xb466('0x4')][a105_0xb466('0x10')]({'attributes':{'exclude':_0x3f2327?[]:['id',a105_0xb466('0x11'),a105_0xb466('0x12'),'deleted_by_user_id',a105_0xb466('0x13'),a105_0xb466('0x14'),a105_0xb466('0x15')]},'where':_0xc7e9f9['params'],'offset':_0x286064,'limit':_0x34f212,'include':_0x200b48,'order':_0x5f7f20})[a105_0xb466('0x16')](_0x59acf3=>{const _0x541a92=this[a105_0xb466('0x17')]?sequelize_utils_1['default'][a105_0xb466('0x18')](_0x59acf3,_0xc7e9f9[a105_0xb466('0x19')][a105_0xb466('0x1a')]):sequelize_utils_1['default'][a105_0xb466('0x1b')](_0x59acf3);if(_0x3c1348){return _0x3c1348[a105_0xb466('0x1c')]({'success':!![],'data':_0x541a92});}else{return _0x541a92;}})[a105_0xb466('0x9')](_0x3bfbab=>{if(_0x3c1348){return _0x3c1348[a105_0xb466('0x1d')](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x3bfbab[a105_0xb466('0xb')]});}else{return _0x3bfbab[a105_0xb466('0xb')];}});}[a105_0xb466('0x1e')](_0x53efc0,_0x1c43b0,_0x6968f){if(!_0x53efc0[a105_0xb466('0x6')]||_0x53efc0['user'][a105_0xb466('0x7')]==0x0){return _0x1c43b0[a105_0xb466('0x1d')](0x191)['send']({'success':![],'data':a105_0xb466('0x1f')});}this[a105_0xb466('0x4')][a105_0xb466('0x1e')](_0x53efc0[a105_0xb466('0x8')]['id'])['then'](_0x23286c=>{const _0x30d3e2=this['i18n']?sequelize_utils_1[a105_0xb466('0x20')][a105_0xb466('0x18')](_0x23286c,_0x53efc0[a105_0xb466('0x19')][a105_0xb466('0x1a')]):_0x23286c;return _0x1c43b0['json']({'success':!![],'data':_0x30d3e2});})[a105_0xb466('0x9')](_0x106021=>{return _0x1c43b0[a105_0xb466('0x1d')](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x106021[a105_0xb466('0xb')]});});}[a105_0xb466('0x21')](_0x120ffe,_0x236921,_0x579767){if(!_0x120ffe[a105_0xb466('0x6')]||_0x120ffe[a105_0xb466('0x6')][a105_0xb466('0x7')]==0x0){}return this[a105_0xb466('0x4')]['findAll']({'where':{'uuid':_0x120ffe[a105_0xb466('0x8')][a105_0xb466('0x22')]}})[a105_0xb466('0x16')](_0x19ad68=>{const _0x42a02d=this[a105_0xb466('0x17')]?sequelize_utils_1[a105_0xb466('0x20')][a105_0xb466('0x18')](_0x19ad68,_0x120ffe[a105_0xb466('0x19')][a105_0xb466('0x1a')]):sequelize_utils_1['default']['toJSON'](_0x19ad68);return _0x42a02d;})[a105_0xb466('0x9')](_0xab69a1=>{return _0xab69a1[a105_0xb466('0xb')];});}[a105_0xb466('0x23')](_0x55fa4b,_0x1a37cd,_0xd532e9){if(!_0x55fa4b[a105_0xb466('0x6')]||_0x55fa4b[a105_0xb466('0x6')][a105_0xb466('0x7')]==0x0){}if(_0x55fa4b[a105_0xb466('0x6')]&&_0x55fa4b[a105_0xb466('0x6')][a105_0xb466('0x7')]>0x0){_0x55fa4b[a105_0xb466('0x24')][a105_0xb466('0x11')]=_0x55fa4b[a105_0xb466('0x6')][0x0]['id'];}return this[a105_0xb466('0x4')][a105_0xb466('0x25')](_0x55fa4b[a105_0xb466('0x24')],this[a105_0xb466('0x17')]?{'language_id':_0x55fa4b[a105_0xb466('0x19')][a105_0xb466('0x1a')]}:{})[a105_0xb466('0x16')](_0x2b1304=>{const _0x4fde7d=this['i18n']?sequelize_utils_1[a105_0xb466('0x20')]['toJSONLocalizedOnly'](_0x2b1304,_0x55fa4b[a105_0xb466('0x19')][a105_0xb466('0x1a')]):_0x2b1304;delete _0x4fde7d['dataValues']['id'];delete _0x4fde7d[a105_0xb466('0x26')]['created_by_user_id'];delete _0x4fde7d[a105_0xb466('0x26')][a105_0xb466('0x12')];delete _0x4fde7d[a105_0xb466('0x26')][a105_0xb466('0x27')];delete _0x4fde7d['dataValues'][a105_0xb466('0x13')];delete _0x4fde7d[a105_0xb466('0x26')][a105_0xb466('0x14')];delete _0x4fde7d[a105_0xb466('0x26')][a105_0xb466('0x15')];if(_0x1a37cd){return _0x1a37cd[a105_0xb466('0x1c')]({'success':!![],'data':_0x4fde7d});}else{return _0x4fde7d;}})[a105_0xb466('0x9')](_0x45ae9e=>{if(_0x1a37cd){return _0x1a37cd[a105_0xb466('0x1d')](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x45ae9e[a105_0xb466('0xb')]});}else{return _0x45ae9e['stack'];}});}['findOneAndUpdate'](_0x519e42,_0x56fbaf,_0x3b568b){if(!_0x519e42[a105_0xb466('0x6')]||_0x519e42[a105_0xb466('0x6')]['length']==0x0){}if(_0x519e42[a105_0xb466('0x6')]&&_0x519e42[a105_0xb466('0x6')][a105_0xb466('0x7')]>0x0){}this[a105_0xb466('0x4')]['findByPk'](_0x519e42[a105_0xb466('0x24')]['id'])[a105_0xb466('0x16')](_0x4b58d2=>{if(_0x4b58d2==null)return _0x56fbaf[a105_0xb466('0x1c')]({'success':!![],'data':_0x4b58d2});_0x4b58d2['update'](_0x519e42[a105_0xb466('0x24')],{'language_id':_0x519e42[a105_0xb466('0x19')][a105_0xb466('0x1a')]})[a105_0xb466('0x16')](function(_0x47ea76){const _0x9a9e2e=this[a105_0xb466('0x17')]?sequelize_utils_1[a105_0xb466('0x20')]['toJSONLocalizedOnly'](_0x4b58d2,_0x519e42[a105_0xb466('0x19')][a105_0xb466('0x1a')]):_0x4b58d2;return _0x56fbaf[a105_0xb466('0x1c')]({'success':!![],'data':_0x9a9e2e});}[a105_0xb466('0x28')](this))['catch'](_0xa3e25f=>{return _0x56fbaf[a105_0xb466('0x1d')](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0xa3e25f['stack']});});})[a105_0xb466('0x9')](_0x2d6ced=>{return _0x56fbaf['status'](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x2d6ced[a105_0xb466('0xb')]});});}['updateOrCreate'](_0x2826f6,_0x17ac9d,_0x533278,_0x279f67=![]){if(!_0x2826f6['user']||_0x2826f6[a105_0xb466('0x6')][a105_0xb466('0x7')]==0x0){}if(_0x2826f6['user']&&_0x2826f6[a105_0xb466('0x6')][a105_0xb466('0x7')]>0x0){}return this['model']['findOne']({'where':_0x2826f6[a105_0xb466('0x8')]})[a105_0xb466('0x16')](function(_0x1d058b){if(_0x1d058b){return _0x1d058b[a105_0xb466('0x29')](_0x2826f6[a105_0xb466('0x24')])[a105_0xb466('0x16')](function(_0x4f4c81){const _0x3084d8=_0x4f4c81['dataValues'];if(_0x279f67){delete _0x3084d8['id'];}if(_0x17ac9d){return _0x17ac9d[a105_0xb466('0x1c')]({'success':!![],'data':_0x3084d8});}else{return _0x3084d8;}}[a105_0xb466('0x28')](this));}else{return this['model']['create'](_0x2826f6[a105_0xb466('0x24')])[a105_0xb466('0x16')](function(_0x3b9fd8){if(_0x17ac9d){return _0x17ac9d['json']({'success':!![],'data':_0x3b9fd8[a105_0xb466('0x1b')]()});}else{return _0x3b9fd8;}});}}[a105_0xb466('0x28')](this))[a105_0xb466('0x9')](_0x17a8d5=>{if(_0x17ac9d){return _0x17ac9d[a105_0xb466('0x1d')](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x17a8d5[a105_0xb466('0xb')]});}else{return _0x17a8d5[a105_0xb466('0xb')];}});}[a105_0xb466('0x2a')](_0x4e7dcb,_0x5b201c,_0x4939c1){if(!_0x4e7dcb[a105_0xb466('0x6')]||_0x4e7dcb[a105_0xb466('0x6')][a105_0xb466('0x7')]==0x0){}if(_0x4e7dcb['user']&&_0x4e7dcb[a105_0xb466('0x6')][a105_0xb466('0x7')]>0x0){}return this[a105_0xb466('0x4')]['findOrCreate']({'where':{'uuid':_0x4e7dcb[a105_0xb466('0x24')]['uuid']},'defaults':_0x4e7dcb['body']})['then']((_0x583d79,_0x59281c)=>{if(_0x59281c){}else{}return _0x5b201c['json']({'success':!![],'data':_0x583d79});})[a105_0xb466('0x9')](_0x3524a9=>{return _0x5b201c[a105_0xb466('0x1d')](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x3524a9[a105_0xb466('0xb')]});});}[a105_0xb466('0x2b')](_0x455af9,_0xda0ec2,_0x334f13){if(!_0x455af9[a105_0xb466('0x6')]||_0x455af9['user']['length']==0x0){return _0xda0ec2[a105_0xb466('0x1d')](0x191)[a105_0xb466('0xa')]({'success':![],'data':a105_0xb466('0x1f')});}if(_0x455af9[a105_0xb466('0x6')]&&_0x455af9[a105_0xb466('0x6')][a105_0xb466('0x7')]>0x0){_0x455af9[a105_0xb466('0x24')][a105_0xb466('0x11')]=_0x455af9[a105_0xb466('0x6')][0x0]['id'];}this[a105_0xb466('0x4')][a105_0xb466('0x1e')](_0x455af9['params']['id'])[a105_0xb466('0x16')](_0x56413c=>{if(_0x56413c==null)return _0xda0ec2[a105_0xb466('0x1c')]({'success':!![],'data':_0x56413c});_0x56413c[a105_0xb466('0x2c')]()[a105_0xb466('0x16')](function(_0x510b2b){const _0x406b2e=this['i18n']?sequelize_utils_1['default'][a105_0xb466('0x18')](_0x56413c,_0x455af9[a105_0xb466('0x19')][a105_0xb466('0x1a')]):_0x56413c;return _0xda0ec2[a105_0xb466('0x1c')]({'success':!![],'data':_0x406b2e});})[a105_0xb466('0x9')](_0x5b6be7=>{return _0xda0ec2['status'](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x5b6be7[a105_0xb466('0xb')]});});})[a105_0xb466('0x9')](_0x49c958=>{return _0xda0ec2[a105_0xb466('0x1d')](0x1f4)[a105_0xb466('0xa')]({'success':![],'data':_0x49c958[a105_0xb466('0xb')]});});}}exports['default']=CrudUtils;