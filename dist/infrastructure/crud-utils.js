var a98_0x3a9c=['catch','save','body','create','dataValues','updated_by_user_id','deleted_at','findOneAndUpdate','findByPk','bind','updateOrCreate','log','update','findOrCreate','remove','destroy','__esModule','defineProperty','./sequelize-utils','model','find','user','length','created_by_user_id','deleted_by_user_id','created_at','updated_at','then','default','toJSONLocalizedOnly','headers','lang','toJSON','json','send','stack','findById','status','authentication\x20failed','params','i18n','findAll','uuid'];(function(_0x2467ea,_0xd434d4){var _0x35620c=function(_0x386a6b){while(--_0x386a6b){_0x2467ea['push'](_0x2467ea['shift']());}};_0x35620c(++_0xd434d4);}(a98_0x3a9c,0x168));var a98_0x1715=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a98_0x3a9c[_0x2d8f05];return _0x4d74cb;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x34edae){return _0x34edae&&_0x34edae[a98_0x1715('0x0')]?_0x34edae:{'default':_0x34edae};};Object[a98_0x1715('0x1')](exports,a98_0x1715('0x0'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a98_0x1715('0x2')));class CrudUtils{constructor(_0x4aac7c,_0xa06538){this[a98_0x1715('0x3')]=_0x4aac7c;this['i18n']=_0xa06538;}[a98_0x1715('0x4')](_0x4b979c,_0x1fc271,_0x4f26b6,_0x31f1b9=![]){if(!_0x4b979c['user']||_0x4b979c[a98_0x1715('0x5')][a98_0x1715('0x6')]==0x0){}return this['model']['findAll']({'attributes':{'exclude':_0x31f1b9?[]:['id',a98_0x1715('0x7'),'updated_by_user_id',a98_0x1715('0x8'),a98_0x1715('0x9'),a98_0x1715('0xa'),'deleted_at']},'where':{}})[a98_0x1715('0xb')](_0x190755=>{const _0x338276=this['i18n']?sequelize_utils_1[a98_0x1715('0xc')][a98_0x1715('0xd')](_0x190755,_0x4b979c[a98_0x1715('0xe')][a98_0x1715('0xf')]):sequelize_utils_1[a98_0x1715('0xc')][a98_0x1715('0x10')](_0x190755);if(_0x1fc271){return _0x1fc271[a98_0x1715('0x11')]({'success':!![],'data':_0x338276});}else{return _0x338276;}})['catch'](_0x508b68=>{if(_0x1fc271){return _0x1fc271['status'](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x508b68[a98_0x1715('0x13')]});}else{return _0x508b68[a98_0x1715('0x13')];}});}[a98_0x1715('0x14')](_0x4358d6,_0x3b4215,_0x27c6ad){if(!_0x4358d6[a98_0x1715('0x5')]||_0x4358d6[a98_0x1715('0x5')]['length']==0x0){return _0x3b4215[a98_0x1715('0x15')](0x191)[a98_0x1715('0x12')]({'success':![],'data':a98_0x1715('0x16')});}this[a98_0x1715('0x3')][a98_0x1715('0x14')](_0x4358d6[a98_0x1715('0x17')]['id'])[a98_0x1715('0xb')](_0x1b8efa=>{const _0x57b871=this[a98_0x1715('0x18')]?sequelize_utils_1[a98_0x1715('0xc')][a98_0x1715('0xd')](_0x1b8efa,_0x4358d6[a98_0x1715('0xe')]['lang']):_0x1b8efa;return _0x3b4215['json']({'success':!![],'data':_0x57b871});})['catch'](_0x58cd75=>{return _0x3b4215[a98_0x1715('0x15')](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x58cd75['stack']});});}['findByUUId'](_0xd1608d,_0x3f6a8c,_0x9ae453){if(!_0xd1608d['user']||_0xd1608d[a98_0x1715('0x5')][a98_0x1715('0x6')]==0x0){}return this['model'][a98_0x1715('0x19')]({'where':{'uuid':_0xd1608d[a98_0x1715('0x17')][a98_0x1715('0x1a')]}})[a98_0x1715('0xb')](_0x588239=>{const _0x2cffd7=this['i18n']?sequelize_utils_1[a98_0x1715('0xc')][a98_0x1715('0xd')](_0x588239,_0xd1608d[a98_0x1715('0xe')][a98_0x1715('0xf')]):sequelize_utils_1[a98_0x1715('0xc')][a98_0x1715('0x10')](_0x588239);return _0x2cffd7;})[a98_0x1715('0x1b')](_0x254946=>{return _0x254946[a98_0x1715('0x13')];});}[a98_0x1715('0x1c')](_0x30ec45,_0x244f9c,_0x5e6b33){if(!_0x30ec45[a98_0x1715('0x5')]||_0x30ec45['user'][a98_0x1715('0x6')]==0x0){}if(_0x30ec45[a98_0x1715('0x5')]&&_0x30ec45[a98_0x1715('0x5')][a98_0x1715('0x6')]>0x0){_0x30ec45[a98_0x1715('0x1d')][a98_0x1715('0x7')]=_0x30ec45[a98_0x1715('0x5')][0x0]['id'];}return this[a98_0x1715('0x3')][a98_0x1715('0x1e')](_0x30ec45[a98_0x1715('0x1d')],this[a98_0x1715('0x18')]?{'language_id':_0x30ec45[a98_0x1715('0xe')][a98_0x1715('0xf')]}:{})[a98_0x1715('0xb')](_0xd8f9f9=>{const _0x5db69f=this[a98_0x1715('0x18')]?sequelize_utils_1[a98_0x1715('0xc')]['toJSONLocalizedOnly'](_0xd8f9f9,_0x30ec45[a98_0x1715('0xe')]['lang']):_0xd8f9f9;delete _0x5db69f['dataValues']['id'];delete _0x5db69f[a98_0x1715('0x1f')]['created_by_user_id'];delete _0x5db69f['dataValues'][a98_0x1715('0x20')];delete _0x5db69f[a98_0x1715('0x1f')][a98_0x1715('0x8')];delete _0x5db69f[a98_0x1715('0x1f')]['created_at'];delete _0x5db69f[a98_0x1715('0x1f')][a98_0x1715('0xa')];delete _0x5db69f[a98_0x1715('0x1f')][a98_0x1715('0x21')];if(_0x244f9c){return _0x244f9c[a98_0x1715('0x11')]({'success':!![],'data':_0x5db69f});}else{return _0x5db69f;}})[a98_0x1715('0x1b')](_0x29ff50=>{if(_0x244f9c){return _0x244f9c[a98_0x1715('0x15')](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x29ff50['stack']});}else{return _0x29ff50[a98_0x1715('0x13')];}});}[a98_0x1715('0x22')](_0x217ab6,_0x2cc482,_0x992ce8){if(!_0x217ab6['user']||_0x217ab6[a98_0x1715('0x5')][a98_0x1715('0x6')]==0x0){}if(_0x217ab6[a98_0x1715('0x5')]&&_0x217ab6[a98_0x1715('0x5')][a98_0x1715('0x6')]>0x0){_0x217ab6['body'][a98_0x1715('0x7')]=_0x217ab6['user'][0x0]['id'];}this['model'][a98_0x1715('0x23')](_0x217ab6[a98_0x1715('0x1d')]['id'])[a98_0x1715('0xb')](_0x13e139=>{if(_0x13e139==null)return _0x2cc482[a98_0x1715('0x11')]({'success':!![],'data':_0x13e139});_0x13e139['update'](_0x217ab6[a98_0x1715('0x1d')],{'language_id':_0x217ab6['headers'][a98_0x1715('0xf')]})[a98_0x1715('0xb')](function(_0x35415a){const _0x4b2ffd=this[a98_0x1715('0x18')]?sequelize_utils_1[a98_0x1715('0xc')]['toJSONLocalizedOnly'](_0x13e139,_0x217ab6[a98_0x1715('0xe')][a98_0x1715('0xf')]):_0x13e139;return _0x2cc482[a98_0x1715('0x11')]({'success':!![],'data':_0x4b2ffd});}[a98_0x1715('0x24')](this))[a98_0x1715('0x1b')](_0x2960db=>{return _0x2cc482[a98_0x1715('0x15')](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x2960db[a98_0x1715('0x13')]});});})[a98_0x1715('0x1b')](_0x45b643=>{return _0x2cc482['status'](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x45b643[a98_0x1715('0x13')]});});}[a98_0x1715('0x25')](_0x5b3d8a,_0x2b2002,_0x5aa6a5,_0x34bb76=![]){if(!_0x5b3d8a[a98_0x1715('0x5')]||_0x5b3d8a[a98_0x1715('0x5')]['length']==0x0){}if(_0x5b3d8a[a98_0x1715('0x5')]&&_0x5b3d8a[a98_0x1715('0x5')][a98_0x1715('0x6')]>0x0){_0x5b3d8a[a98_0x1715('0x1d')]['created_by_user_id']=_0x5b3d8a[a98_0x1715('0x5')][0x0]['id'];}console[a98_0x1715('0x26')](_0x5b3d8a['params']);return this[a98_0x1715('0x3')]['findOne']({'where':_0x5b3d8a[a98_0x1715('0x17')]})[a98_0x1715('0xb')](function(_0x2b2f86){if(_0x2b2f86){return _0x2b2f86[a98_0x1715('0x27')](_0x5b3d8a[a98_0x1715('0x1d')])[a98_0x1715('0xb')](function(_0x3f595c){const _0x8a8810=_0x3f595c[a98_0x1715('0x1f')];if(_0x34bb76){delete _0x8a8810['id'];}if(_0x2b2002){return _0x2b2002['json']({'success':!![],'data':_0x8a8810});}else{return _0x8a8810;}}[a98_0x1715('0x24')](this));}else{return this[a98_0x1715('0x3')][a98_0x1715('0x1e')](_0x5b3d8a[a98_0x1715('0x1d')])[a98_0x1715('0xb')](function(_0x254f64){if(_0x2b2002){return _0x2b2002[a98_0x1715('0x11')]({'success':!![],'data':_0x254f64[a98_0x1715('0x10')]()});}else{return _0x254f64;}});}}[a98_0x1715('0x24')](this))[a98_0x1715('0x1b')](_0x44f392=>{if(_0x2b2002){return _0x2b2002[a98_0x1715('0x15')](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x44f392['stack']});}else{return _0x44f392[a98_0x1715('0x13')];}});}[a98_0x1715('0x28')](_0x3e3bc6,_0x4e522a,_0xf96483){if(!_0x3e3bc6[a98_0x1715('0x5')]||_0x3e3bc6['user'][a98_0x1715('0x6')]==0x0){}if(_0x3e3bc6['user']&&_0x3e3bc6['user'][a98_0x1715('0x6')]>0x0){_0x3e3bc6[a98_0x1715('0x1d')][a98_0x1715('0x7')]=_0x3e3bc6['user'][0x0]['id'];}return this['model']['findOrCreate']({'where':{'uuid':_0x3e3bc6[a98_0x1715('0x1d')][a98_0x1715('0x1a')]},'defaults':_0x3e3bc6['body']})[a98_0x1715('0xb')]((_0x25b36c,_0x959c98)=>{if(_0x959c98){}else{}return _0x4e522a[a98_0x1715('0x11')]({'success':!![],'data':_0x25b36c});})[a98_0x1715('0x1b')](_0x62a585=>{return _0x4e522a[a98_0x1715('0x15')](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x62a585[a98_0x1715('0x13')]});});}[a98_0x1715('0x29')](_0x4b3cdb,_0x2c61cf,_0x39189a){if(!_0x4b3cdb[a98_0x1715('0x5')]||_0x4b3cdb[a98_0x1715('0x5')]['length']==0x0){return _0x2c61cf[a98_0x1715('0x15')](0x191)['send']({'success':![],'data':a98_0x1715('0x16')});}if(_0x4b3cdb[a98_0x1715('0x5')]&&_0x4b3cdb[a98_0x1715('0x5')]['length']>0x0){_0x4b3cdb[a98_0x1715('0x1d')][a98_0x1715('0x7')]=_0x4b3cdb['user'][0x0]['id'];}this[a98_0x1715('0x3')][a98_0x1715('0x14')](_0x4b3cdb[a98_0x1715('0x17')]['id'])[a98_0x1715('0xb')](_0x310607=>{if(_0x310607==null)return _0x2c61cf[a98_0x1715('0x11')]({'success':!![],'data':_0x310607});_0x310607[a98_0x1715('0x2a')]()[a98_0x1715('0xb')](function(_0x22ba94){const _0x3283b4=this[a98_0x1715('0x18')]?sequelize_utils_1[a98_0x1715('0xc')][a98_0x1715('0xd')](_0x310607,_0x4b3cdb[a98_0x1715('0xe')][a98_0x1715('0xf')]):_0x310607;return _0x2c61cf['json']({'success':!![],'data':_0x3283b4});})[a98_0x1715('0x1b')](_0x1f510a=>{return _0x2c61cf['status'](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x1f510a[a98_0x1715('0x13')]});});})[a98_0x1715('0x1b')](_0x298a62=>{return _0x2c61cf[a98_0x1715('0x15')](0x1f4)[a98_0x1715('0x12')]({'success':![],'data':_0x298a62['stack']});});}}exports[a98_0x1715('0xc')]=CrudUtils;