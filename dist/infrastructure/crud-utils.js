var a99_0x2d51=['destroy','__esModule','./sequelize-utils','i18n','find','user','length','model','findAll','created_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','then','default','lang','toJSON','json','status','stack','send','authentication\x20failed','params','headers','catch','findByUUId','uuid','toJSONLocalizedOnly','save','create','body','dataValues','updated_by_user_id','findByPk','update','bind','log','findOne','findOrCreate','remove','findById'];(function(_0x5c0045,_0x5f6544){var _0x2317d9=function(_0x3bda7e){while(--_0x3bda7e){_0x5c0045['push'](_0x5c0045['shift']());}};_0x2317d9(++_0x5f6544);}(a99_0x2d51,0xa9));var a99_0x2a2b=function(_0x321f31,_0x123e1b){_0x321f31=_0x321f31-0x0;var _0x2056a5=a99_0x2d51[_0x321f31];return _0x2056a5;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x46d92b){return _0x46d92b&&_0x46d92b[a99_0x2a2b('0x0')]?_0x46d92b:{'default':_0x46d92b};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x2a2b('0x1')));class CrudUtils{constructor(_0x22e8e6,_0x4fc831){this['model']=_0x22e8e6;this[a99_0x2a2b('0x2')]=_0x4fc831;}[a99_0x2a2b('0x3')](_0x5ddcfe,_0x534f38,_0x1ab4fe,_0x40a6d4=![]){if(!_0x5ddcfe[a99_0x2a2b('0x4')]||_0x5ddcfe[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]==0x0){}return this[a99_0x2a2b('0x6')][a99_0x2a2b('0x7')]({'attributes':{'exclude':_0x40a6d4?[]:['id',a99_0x2a2b('0x8'),'updated_by_user_id',a99_0x2a2b('0x9'),a99_0x2a2b('0xa'),a99_0x2a2b('0xb'),a99_0x2a2b('0xc')]},'where':{}})[a99_0x2a2b('0xd')](_0x32b352=>{const _0x18d486=this[a99_0x2a2b('0x2')]?sequelize_utils_1[a99_0x2a2b('0xe')]['toJSONLocalizedOnly'](_0x32b352,_0x5ddcfe['headers'][a99_0x2a2b('0xf')]):sequelize_utils_1[a99_0x2a2b('0xe')][a99_0x2a2b('0x10')](_0x32b352);if(_0x534f38){return _0x534f38[a99_0x2a2b('0x11')]({'success':!![],'data':_0x18d486});}else{return _0x18d486;}})['catch'](_0x20bff4=>{if(_0x534f38){return _0x534f38[a99_0x2a2b('0x12')](0x1f4)['send']({'success':![],'data':_0x20bff4['stack']});}else{return _0x20bff4[a99_0x2a2b('0x13')];}});}['findById'](_0x3cb386,_0x162e59,_0x5747be){if(!_0x3cb386[a99_0x2a2b('0x4')]||_0x3cb386['user']['length']==0x0){return _0x162e59[a99_0x2a2b('0x12')](0x191)[a99_0x2a2b('0x14')]({'success':![],'data':a99_0x2a2b('0x15')});}this[a99_0x2a2b('0x6')]['findById'](_0x3cb386[a99_0x2a2b('0x16')]['id'])[a99_0x2a2b('0xd')](_0x543944=>{const _0x587b54=this[a99_0x2a2b('0x2')]?sequelize_utils_1[a99_0x2a2b('0xe')]['toJSONLocalizedOnly'](_0x543944,_0x3cb386[a99_0x2a2b('0x17')][a99_0x2a2b('0xf')]):_0x543944;return _0x162e59[a99_0x2a2b('0x11')]({'success':!![],'data':_0x587b54});})[a99_0x2a2b('0x18')](_0x140fdf=>{return _0x162e59['status'](0x1f4)[a99_0x2a2b('0x14')]({'success':![],'data':_0x140fdf['stack']});});}[a99_0x2a2b('0x19')](_0x532ebd,_0x155875,_0x550e4e){if(!_0x532ebd[a99_0x2a2b('0x4')]||_0x532ebd[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]==0x0){}return this[a99_0x2a2b('0x6')][a99_0x2a2b('0x7')]({'where':{'uuid':_0x532ebd['params'][a99_0x2a2b('0x1a')]}})['then'](_0x40c41e=>{const _0x28a0fb=this['i18n']?sequelize_utils_1['default'][a99_0x2a2b('0x1b')](_0x40c41e,_0x532ebd[a99_0x2a2b('0x17')][a99_0x2a2b('0xf')]):sequelize_utils_1[a99_0x2a2b('0xe')]['toJSON'](_0x40c41e);return _0x28a0fb;})[a99_0x2a2b('0x18')](_0x31dc99=>{return _0x31dc99['stack'];});}[a99_0x2a2b('0x1c')](_0x365a35,_0x2adcc3,_0xe6541c){if(!_0x365a35[a99_0x2a2b('0x4')]||_0x365a35[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]==0x0){}if(_0x365a35['user']&&_0x365a35[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]>0x0){_0x365a35['body'][a99_0x2a2b('0x8')]=_0x365a35[a99_0x2a2b('0x4')][0x0]['id'];}return this[a99_0x2a2b('0x6')][a99_0x2a2b('0x1d')](_0x365a35[a99_0x2a2b('0x1e')],this[a99_0x2a2b('0x2')]?{'language_id':_0x365a35[a99_0x2a2b('0x17')][a99_0x2a2b('0xf')]}:{})[a99_0x2a2b('0xd')](_0x3d6ab6=>{const _0x1a53e1=this[a99_0x2a2b('0x2')]?sequelize_utils_1[a99_0x2a2b('0xe')][a99_0x2a2b('0x1b')](_0x3d6ab6,_0x365a35['headers']['lang']):_0x3d6ab6;delete _0x1a53e1[a99_0x2a2b('0x1f')]['id'];delete _0x1a53e1['dataValues'][a99_0x2a2b('0x8')];delete _0x1a53e1[a99_0x2a2b('0x1f')][a99_0x2a2b('0x20')];delete _0x1a53e1[a99_0x2a2b('0x1f')][a99_0x2a2b('0x9')];delete _0x1a53e1[a99_0x2a2b('0x1f')][a99_0x2a2b('0xa')];delete _0x1a53e1[a99_0x2a2b('0x1f')][a99_0x2a2b('0xb')];delete _0x1a53e1[a99_0x2a2b('0x1f')][a99_0x2a2b('0xc')];if(_0x2adcc3){return _0x2adcc3[a99_0x2a2b('0x11')]({'success':!![],'data':_0x1a53e1});}else{return _0x1a53e1;}})[a99_0x2a2b('0x18')](_0x3b7439=>{if(_0x2adcc3){return _0x2adcc3[a99_0x2a2b('0x12')](0x1f4)[a99_0x2a2b('0x14')]({'success':![],'data':_0x3b7439[a99_0x2a2b('0x13')]});}else{return _0x3b7439[a99_0x2a2b('0x13')];}});}['findOneAndUpdate'](_0x48233c,_0x5e588c,_0x274234){if(!_0x48233c['user']||_0x48233c[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]==0x0){}if(_0x48233c['user']&&_0x48233c[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]>0x0){}this[a99_0x2a2b('0x6')][a99_0x2a2b('0x21')](_0x48233c[a99_0x2a2b('0x1e')]['id'])[a99_0x2a2b('0xd')](_0x24df7c=>{if(_0x24df7c==null)return _0x5e588c[a99_0x2a2b('0x11')]({'success':!![],'data':_0x24df7c});_0x24df7c[a99_0x2a2b('0x22')](_0x48233c[a99_0x2a2b('0x1e')],{'language_id':_0x48233c['headers'][a99_0x2a2b('0xf')]})[a99_0x2a2b('0xd')](function(_0xc25535){const _0x28582c=this[a99_0x2a2b('0x2')]?sequelize_utils_1[a99_0x2a2b('0xe')][a99_0x2a2b('0x1b')](_0x24df7c,_0x48233c[a99_0x2a2b('0x17')][a99_0x2a2b('0xf')]):_0x24df7c;return _0x5e588c[a99_0x2a2b('0x11')]({'success':!![],'data':_0x28582c});}[a99_0x2a2b('0x23')](this))[a99_0x2a2b('0x18')](_0x2bf33d=>{return _0x5e588c[a99_0x2a2b('0x12')](0x1f4)[a99_0x2a2b('0x14')]({'success':![],'data':_0x2bf33d[a99_0x2a2b('0x13')]});});})[a99_0x2a2b('0x18')](_0x2a9264=>{return _0x5e588c[a99_0x2a2b('0x12')](0x1f4)[a99_0x2a2b('0x14')]({'success':![],'data':_0x2a9264[a99_0x2a2b('0x13')]});});}['updateOrCreate'](_0x3b667f,_0x97702a,_0x38c774,_0x299136=![]){if(!_0x3b667f[a99_0x2a2b('0x4')]||_0x3b667f[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]==0x0){}if(_0x3b667f[a99_0x2a2b('0x4')]&&_0x3b667f[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]>0x0){_0x3b667f[a99_0x2a2b('0x1e')]['created_by_user_id']=_0x3b667f[a99_0x2a2b('0x4')][0x0]['id'];}console[a99_0x2a2b('0x24')](_0x3b667f[a99_0x2a2b('0x16')]);return this['model'][a99_0x2a2b('0x25')]({'where':_0x3b667f[a99_0x2a2b('0x16')]})[a99_0x2a2b('0xd')](function(_0x5a581e){if(_0x5a581e){return _0x5a581e[a99_0x2a2b('0x22')](_0x3b667f[a99_0x2a2b('0x1e')])[a99_0x2a2b('0xd')](function(_0x2cd468){const _0x426c0d=_0x2cd468[a99_0x2a2b('0x1f')];if(_0x299136){delete _0x426c0d['id'];}if(_0x97702a){return _0x97702a[a99_0x2a2b('0x11')]({'success':!![],'data':_0x426c0d});}else{return _0x426c0d;}}['bind'](this));}else{return this['model']['create'](_0x3b667f[a99_0x2a2b('0x1e')])[a99_0x2a2b('0xd')](function(_0x5d2385){if(_0x97702a){return _0x97702a[a99_0x2a2b('0x11')]({'success':!![],'data':_0x5d2385[a99_0x2a2b('0x10')]()});}else{return _0x5d2385;}});}}[a99_0x2a2b('0x23')](this))[a99_0x2a2b('0x18')](_0x1ce20d=>{if(_0x97702a){return _0x97702a[a99_0x2a2b('0x12')](0x1f4)[a99_0x2a2b('0x14')]({'success':![],'data':_0x1ce20d[a99_0x2a2b('0x13')]});}else{return _0x1ce20d[a99_0x2a2b('0x13')];}});}[a99_0x2a2b('0x26')](_0x258ac1,_0x1a6fa6,_0xe383c1){if(!_0x258ac1[a99_0x2a2b('0x4')]||_0x258ac1[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]==0x0){}if(_0x258ac1[a99_0x2a2b('0x4')]&&_0x258ac1['user'][a99_0x2a2b('0x5')]>0x0){_0x258ac1[a99_0x2a2b('0x1e')][a99_0x2a2b('0x8')]=_0x258ac1[a99_0x2a2b('0x4')][0x0]['id'];}return this[a99_0x2a2b('0x6')]['findOrCreate']({'where':{'uuid':_0x258ac1[a99_0x2a2b('0x1e')]['uuid']},'defaults':_0x258ac1[a99_0x2a2b('0x1e')]})[a99_0x2a2b('0xd')]((_0x3d33d1,_0x36fc56)=>{if(_0x36fc56){}else{}return _0x1a6fa6[a99_0x2a2b('0x11')]({'success':!![],'data':_0x3d33d1});})['catch'](_0x464c0d=>{return _0x1a6fa6[a99_0x2a2b('0x12')](0x1f4)['send']({'success':![],'data':_0x464c0d[a99_0x2a2b('0x13')]});});}[a99_0x2a2b('0x27')](_0x407d1c,_0x5023fa,_0x2e8ddf){if(!_0x407d1c['user']||_0x407d1c[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]==0x0){return _0x5023fa[a99_0x2a2b('0x12')](0x191)[a99_0x2a2b('0x14')]({'success':![],'data':a99_0x2a2b('0x15')});}if(_0x407d1c[a99_0x2a2b('0x4')]&&_0x407d1c[a99_0x2a2b('0x4')][a99_0x2a2b('0x5')]>0x0){_0x407d1c['body']['created_by_user_id']=_0x407d1c[a99_0x2a2b('0x4')][0x0]['id'];}this[a99_0x2a2b('0x6')][a99_0x2a2b('0x28')](_0x407d1c['params']['id'])[a99_0x2a2b('0xd')](_0x4ee121=>{if(_0x4ee121==null)return _0x5023fa[a99_0x2a2b('0x11')]({'success':!![],'data':_0x4ee121});_0x4ee121[a99_0x2a2b('0x29')]()['then'](function(_0x402761){const _0x2aee8d=this['i18n']?sequelize_utils_1['default'][a99_0x2a2b('0x1b')](_0x4ee121,_0x407d1c[a99_0x2a2b('0x17')]['lang']):_0x4ee121;return _0x5023fa[a99_0x2a2b('0x11')]({'success':!![],'data':_0x2aee8d});})['catch'](_0x31396f=>{return _0x5023fa[a99_0x2a2b('0x12')](0x1f4)[a99_0x2a2b('0x14')]({'success':![],'data':_0x31396f[a99_0x2a2b('0x13')]});});})[a99_0x2a2b('0x18')](_0x411cd1=>{return _0x5023fa[a99_0x2a2b('0x12')](0x1f4)[a99_0x2a2b('0x14')]({'success':![],'data':_0x411cd1[a99_0x2a2b('0x13')]});});}}exports['default']=CrudUtils;