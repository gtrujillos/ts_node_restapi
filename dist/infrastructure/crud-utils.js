var a97_0x1584=['find','user','length','model','findAll','created_at','deleted_at','then','default','headers','lang','status','send','stack','findById','authentication\x20failed','params','toJSONLocalizedOnly','json','findByUUId','uuid','toJSON','catch','body','created_by_user_id','create','i18n','dataValues','updated_by_user_id','deleted_by_user_id','updated_at','log','findOne','update','bind','findOrCreate','remove','destroy','__importDefault','defineProperty','__esModule','./sequelize-utils'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a97_0x1584,0x1a0));var a97_0x2051=function(_0x1d7e92,_0x384f91){_0x1d7e92=_0x1d7e92-0x0;var _0x48578e=a97_0x1584[_0x1d7e92];return _0x48578e;};'use strict';var __importDefault=this&&this[a97_0x2051('0x0')]||function(_0x58eb28){return _0x58eb28&&_0x58eb28['__esModule']?_0x58eb28:{'default':_0x58eb28};};Object[a97_0x2051('0x1')](exports,a97_0x2051('0x2'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a97_0x2051('0x3')));class CrudUtils{constructor(_0xd5c6f,_0xa97f70){this['model']=_0xd5c6f;this['i18n']=_0xa97f70;}[a97_0x2051('0x4')](_0x2454f3,_0xe6c869,_0x19904d,_0x1c3b9e=![]){if(!_0x2454f3[a97_0x2051('0x5')]||_0x2454f3[a97_0x2051('0x5')][a97_0x2051('0x6')]==0x0){}return this[a97_0x2051('0x7')][a97_0x2051('0x8')]({'attributes':{'exclude':_0x1c3b9e?[]:['id','created_by_user_id','updated_by_user_id','deleted_by_user_id',a97_0x2051('0x9'),'updated_at',a97_0x2051('0xa')]},'where':{}})[a97_0x2051('0xb')](_0x55cf48=>{const _0x2a4d27=this['i18n']?sequelize_utils_1[a97_0x2051('0xc')]['toJSONLocalizedOnly'](_0x55cf48,_0x2454f3[a97_0x2051('0xd')][a97_0x2051('0xe')]):sequelize_utils_1['default']['toJSON'](_0x55cf48);if(_0xe6c869){return _0xe6c869['json']({'success':!![],'data':_0x2a4d27});}else{return _0x2a4d27;}})['catch'](_0x5e77c7=>{if(_0xe6c869){return _0xe6c869[a97_0x2051('0xf')](0x1f4)[a97_0x2051('0x10')]({'success':![],'data':_0x5e77c7['stack']});}else{return _0x5e77c7[a97_0x2051('0x11')];}});}[a97_0x2051('0x12')](_0x21c6c7,_0x5c21d1,_0x4ea2ac){if(!_0x21c6c7[a97_0x2051('0x5')]||_0x21c6c7[a97_0x2051('0x5')][a97_0x2051('0x6')]==0x0){return _0x5c21d1[a97_0x2051('0xf')](0x191)['send']({'success':![],'data':a97_0x2051('0x13')});}this[a97_0x2051('0x7')]['findById'](_0x21c6c7[a97_0x2051('0x14')]['id'])[a97_0x2051('0xb')](_0x43036e=>{const _0x2ce489=this['i18n']?sequelize_utils_1[a97_0x2051('0xc')][a97_0x2051('0x15')](_0x43036e,_0x21c6c7[a97_0x2051('0xd')][a97_0x2051('0xe')]):_0x43036e;return _0x5c21d1[a97_0x2051('0x16')]({'success':!![],'data':_0x2ce489});})['catch'](_0x202d4a=>{return _0x5c21d1['status'](0x1f4)[a97_0x2051('0x10')]({'success':![],'data':_0x202d4a['stack']});});}[a97_0x2051('0x17')](_0xe44086,_0x403869,_0x3fdbd3){if(!_0xe44086[a97_0x2051('0x5')]||_0xe44086[a97_0x2051('0x5')][a97_0x2051('0x6')]==0x0){}return this[a97_0x2051('0x7')][a97_0x2051('0x8')]({'where':{'uuid':_0xe44086[a97_0x2051('0x14')][a97_0x2051('0x18')]}})['then'](_0x2a6beb=>{const _0x28935d=this['i18n']?sequelize_utils_1[a97_0x2051('0xc')][a97_0x2051('0x15')](_0x2a6beb,_0xe44086[a97_0x2051('0xd')][a97_0x2051('0xe')]):sequelize_utils_1[a97_0x2051('0xc')][a97_0x2051('0x19')](_0x2a6beb);return _0x28935d;})[a97_0x2051('0x1a')](_0x1a963f=>{return _0x1a963f['stack'];});}['save'](_0x251475,_0x4939a7,_0x54535b){if(!_0x251475[a97_0x2051('0x5')]||_0x251475['user'][a97_0x2051('0x6')]==0x0){}if(_0x251475['user']&&_0x251475['user'][a97_0x2051('0x6')]>0x0){_0x251475[a97_0x2051('0x1b')][a97_0x2051('0x1c')]=_0x251475['user'][0x0]['id'];}return this[a97_0x2051('0x7')][a97_0x2051('0x1d')](_0x251475[a97_0x2051('0x1b')],{'language_id':_0x251475[a97_0x2051('0xd')][a97_0x2051('0xe')]})[a97_0x2051('0xb')](_0x54faaf=>{const _0x1c44c7=this[a97_0x2051('0x1e')]?sequelize_utils_1[a97_0x2051('0xc')]['toJSONLocalizedOnly'](_0x54faaf,_0x251475[a97_0x2051('0xd')][a97_0x2051('0xe')]):_0x54faaf;delete _0x1c44c7[a97_0x2051('0x1f')]['id'];delete _0x1c44c7[a97_0x2051('0x1f')][a97_0x2051('0x1c')];delete _0x1c44c7[a97_0x2051('0x1f')][a97_0x2051('0x20')];delete _0x1c44c7[a97_0x2051('0x1f')][a97_0x2051('0x21')];delete _0x1c44c7[a97_0x2051('0x1f')]['created_at'];delete _0x1c44c7[a97_0x2051('0x1f')][a97_0x2051('0x22')];delete _0x1c44c7[a97_0x2051('0x1f')][a97_0x2051('0xa')];if(_0x4939a7){return _0x4939a7[a97_0x2051('0x16')]({'success':!![],'data':_0x1c44c7});}else{return _0x1c44c7;}})[a97_0x2051('0x1a')](_0x12db3b=>{if(_0x4939a7){return _0x4939a7[a97_0x2051('0xf')](0x1f4)['send']({'success':![],'data':_0x12db3b[a97_0x2051('0x11')]});}else{return _0x12db3b['stack'];}});}['findOneAndUpdate'](_0x51d854,_0x474601,_0x51a28c){if(!_0x51d854[a97_0x2051('0x5')]||_0x51d854[a97_0x2051('0x5')][a97_0x2051('0x6')]==0x0){}if(_0x51d854['user']&&_0x51d854[a97_0x2051('0x5')][a97_0x2051('0x6')]>0x0){_0x51d854['body'][a97_0x2051('0x1c')]=_0x51d854[a97_0x2051('0x5')][0x0]['id'];}this[a97_0x2051('0x7')]['findByPk'](_0x51d854[a97_0x2051('0x1b')]['id'])[a97_0x2051('0xb')](_0x5d17d9=>{if(_0x5d17d9==null)return _0x474601[a97_0x2051('0x16')]({'success':!![],'data':_0x5d17d9});_0x5d17d9['update'](_0x51d854[a97_0x2051('0x1b')],{'language_id':_0x51d854[a97_0x2051('0xd')][a97_0x2051('0xe')]})[a97_0x2051('0xb')](function(_0x4d8c83){const _0x6ead7a=this[a97_0x2051('0x1e')]?sequelize_utils_1[a97_0x2051('0xc')][a97_0x2051('0x15')](_0x5d17d9,_0x51d854['headers'][a97_0x2051('0xe')]):_0x5d17d9;return _0x474601[a97_0x2051('0x16')]({'success':!![],'data':_0x6ead7a});}['bind'](this))['catch'](_0x2916eb=>{return _0x474601[a97_0x2051('0xf')](0x1f4)[a97_0x2051('0x10')]({'success':![],'data':_0x2916eb[a97_0x2051('0x11')]});});})[a97_0x2051('0x1a')](_0x424a73=>{return _0x474601[a97_0x2051('0xf')](0x1f4)[a97_0x2051('0x10')]({'success':![],'data':_0x424a73['stack']});});}['updateOrCreate'](_0x404f49,_0x287d72,_0x5dc90c,_0x2f9df0=![]){if(!_0x404f49[a97_0x2051('0x5')]||_0x404f49[a97_0x2051('0x5')][a97_0x2051('0x6')]==0x0){}if(_0x404f49[a97_0x2051('0x5')]&&_0x404f49[a97_0x2051('0x5')][a97_0x2051('0x6')]>0x0){_0x404f49[a97_0x2051('0x1b')][a97_0x2051('0x1c')]=_0x404f49[a97_0x2051('0x5')][0x0]['id'];}console[a97_0x2051('0x23')](_0x404f49[a97_0x2051('0x14')]);return this[a97_0x2051('0x7')][a97_0x2051('0x24')]({'where':_0x404f49[a97_0x2051('0x14')]})[a97_0x2051('0xb')](function(_0x259fbb){if(_0x259fbb){return _0x259fbb[a97_0x2051('0x25')](_0x404f49[a97_0x2051('0x1b')])[a97_0x2051('0xb')](function(_0x579b74){const _0x458ec6=_0x579b74[a97_0x2051('0x1f')];if(_0x2f9df0){delete _0x458ec6['id'];}if(_0x287d72){return _0x287d72[a97_0x2051('0x16')]({'success':!![],'data':_0x458ec6});}else{return _0x458ec6;}}[a97_0x2051('0x26')](this));}else{return this[a97_0x2051('0x7')][a97_0x2051('0x1d')](_0x404f49[a97_0x2051('0x1b')])[a97_0x2051('0xb')](function(_0x142c61){if(_0x287d72){return _0x287d72[a97_0x2051('0x16')]({'success':!![],'data':_0x142c61[a97_0x2051('0x19')]()});}else{return _0x142c61;}});}}[a97_0x2051('0x26')](this))['catch'](_0x196d95=>{if(_0x287d72){return _0x287d72[a97_0x2051('0xf')](0x1f4)[a97_0x2051('0x10')]({'success':![],'data':_0x196d95[a97_0x2051('0x11')]});}else{return _0x196d95[a97_0x2051('0x11')];}});}['findOrCreate'](_0x26e548,_0x37706a,_0x3bc386){if(!_0x26e548[a97_0x2051('0x5')]||_0x26e548['user'][a97_0x2051('0x6')]==0x0){}if(_0x26e548['user']&&_0x26e548[a97_0x2051('0x5')][a97_0x2051('0x6')]>0x0){_0x26e548[a97_0x2051('0x1b')][a97_0x2051('0x1c')]=_0x26e548[a97_0x2051('0x5')][0x0]['id'];}return this['model'][a97_0x2051('0x27')]({'where':{'uuid':_0x26e548[a97_0x2051('0x1b')][a97_0x2051('0x18')]},'defaults':_0x26e548[a97_0x2051('0x1b')]})[a97_0x2051('0xb')]((_0x372d4b,_0x1ee68d)=>{if(_0x1ee68d){}else{}return _0x37706a['json']({'success':!![],'data':_0x372d4b});})[a97_0x2051('0x1a')](_0x15107f=>{return _0x37706a[a97_0x2051('0xf')](0x1f4)['send']({'success':![],'data':_0x15107f[a97_0x2051('0x11')]});});}[a97_0x2051('0x28')](_0x5621b8,_0x331315,_0x92856f){if(!_0x5621b8[a97_0x2051('0x5')]||_0x5621b8['user']['length']==0x0){return _0x331315['status'](0x191)[a97_0x2051('0x10')]({'success':![],'data':a97_0x2051('0x13')});}if(_0x5621b8[a97_0x2051('0x5')]&&_0x5621b8['user']['length']>0x0){_0x5621b8[a97_0x2051('0x1b')][a97_0x2051('0x1c')]=_0x5621b8[a97_0x2051('0x5')][0x0]['id'];}this[a97_0x2051('0x7')][a97_0x2051('0x12')](_0x5621b8[a97_0x2051('0x14')]['id'])[a97_0x2051('0xb')](_0x240e44=>{if(_0x240e44==null)return _0x331315['json']({'success':!![],'data':_0x240e44});_0x240e44[a97_0x2051('0x29')]()[a97_0x2051('0xb')](function(_0x311553){const _0x366242=this['i18n']?sequelize_utils_1[a97_0x2051('0xc')][a97_0x2051('0x15')](_0x240e44,_0x5621b8[a97_0x2051('0xd')]['lang']):_0x240e44;return _0x331315['json']({'success':!![],'data':_0x366242});})[a97_0x2051('0x1a')](_0x200374=>{return _0x331315[a97_0x2051('0xf')](0x1f4)[a97_0x2051('0x10')]({'success':![],'data':_0x200374['stack']});});})[a97_0x2051('0x1a')](_0x496008=>{return _0x331315[a97_0x2051('0xf')](0x1f4)[a97_0x2051('0x10')]({'success':![],'data':_0x496008[a97_0x2051('0x11')]});});}}exports['default']=CrudUtils;