var a98_0x4965=['bind','updateOrCreate','findOne','findOrCreate','remove','destroy','__esModule','defineProperty','./sequelize-utils','model','i18n','find','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','log','default','headers','lang','toJSON','json','catch','status','send','stack','findById','authentication\x20failed','params','then','toJSONLocalizedOnly','findByUUId','uuid','save','body','create','dataValues','findByPk','update'];(function(_0x3caf5c,_0x1d32f5){var _0x2c10cc=function(_0xedc09b){while(--_0xedc09b){_0x3caf5c['push'](_0x3caf5c['shift']());}};_0x2c10cc(++_0x1d32f5);}(a98_0x4965,0x13a));var a98_0x54a1=function(_0xaf983f,_0x2f0289){_0xaf983f=_0xaf983f-0x0;var _0x6a1c89=a98_0x4965[_0xaf983f];return _0x6a1c89;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3cb301){return _0x3cb301&&_0x3cb301[a98_0x54a1('0x0')]?_0x3cb301:{'default':_0x3cb301};};Object[a98_0x54a1('0x1')](exports,a98_0x54a1('0x0'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a98_0x54a1('0x2')));class CrudUtils{constructor(_0x218724,_0x4afce3){this[a98_0x54a1('0x3')]=_0x218724;this[a98_0x54a1('0x4')]=_0x4afce3;}[a98_0x54a1('0x5')](_0x1be5c9,_0x38fdb6,_0x22c9f8,_0x156cb9=![]){console['log']('find');if(!_0x1be5c9[a98_0x54a1('0x6')]||_0x1be5c9[a98_0x54a1('0x6')][a98_0x54a1('0x7')]==0x0){}return this[a98_0x54a1('0x3')][a98_0x54a1('0x8')]({'attributes':{'exclude':_0x156cb9?[]:['id',a98_0x54a1('0x9'),a98_0x54a1('0xa'),a98_0x54a1('0xb'),a98_0x54a1('0xc'),a98_0x54a1('0xd'),a98_0x54a1('0xe')]},'where':{}})['then'](_0x401acf=>{console[a98_0x54a1('0xf')](_0x401acf);const _0x5e03ae=this[a98_0x54a1('0x4')]?sequelize_utils_1[a98_0x54a1('0x10')]['toJSONLocalizedOnly'](_0x401acf,_0x1be5c9[a98_0x54a1('0x11')][a98_0x54a1('0x12')]):sequelize_utils_1[a98_0x54a1('0x10')][a98_0x54a1('0x13')](_0x401acf);if(_0x38fdb6){return _0x38fdb6[a98_0x54a1('0x14')]({'success':!![],'data':_0x5e03ae});}else{return _0x5e03ae;}})[a98_0x54a1('0x15')](_0x5ddfeb=>{if(_0x38fdb6){return _0x38fdb6[a98_0x54a1('0x16')](0x1f4)[a98_0x54a1('0x17')]({'success':![],'data':_0x5ddfeb['stack']});}else{return _0x5ddfeb[a98_0x54a1('0x18')];}});}[a98_0x54a1('0x19')](_0x47cbeb,_0x1a36d6,_0x4dfea4){if(!_0x47cbeb[a98_0x54a1('0x6')]||_0x47cbeb[a98_0x54a1('0x6')][a98_0x54a1('0x7')]==0x0){return _0x1a36d6[a98_0x54a1('0x16')](0x191)[a98_0x54a1('0x17')]({'success':![],'data':a98_0x54a1('0x1a')});}this['model']['findById'](_0x47cbeb[a98_0x54a1('0x1b')]['id'])[a98_0x54a1('0x1c')](_0x118793=>{const _0x4a71ce=this['i18n']?sequelize_utils_1['default'][a98_0x54a1('0x1d')](_0x118793,_0x47cbeb['headers'][a98_0x54a1('0x12')]):_0x118793;return _0x1a36d6[a98_0x54a1('0x14')]({'success':!![],'data':_0x4a71ce});})[a98_0x54a1('0x15')](_0xfd284c=>{return _0x1a36d6['status'](0x1f4)[a98_0x54a1('0x17')]({'success':![],'data':_0xfd284c[a98_0x54a1('0x18')]});});}[a98_0x54a1('0x1e')](_0x4025c8,_0x13e428,_0x4ee840){if(!_0x4025c8[a98_0x54a1('0x6')]||_0x4025c8[a98_0x54a1('0x6')][a98_0x54a1('0x7')]==0x0){}return this['model'][a98_0x54a1('0x8')]({'where':{'uuid':_0x4025c8[a98_0x54a1('0x1b')][a98_0x54a1('0x1f')]}})[a98_0x54a1('0x1c')](_0x231f52=>{const _0x2f6a90=this[a98_0x54a1('0x4')]?sequelize_utils_1[a98_0x54a1('0x10')][a98_0x54a1('0x1d')](_0x231f52,_0x4025c8['headers']['lang']):sequelize_utils_1[a98_0x54a1('0x10')]['toJSON'](_0x231f52);return _0x2f6a90;})[a98_0x54a1('0x15')](_0x4bb6c2=>{return _0x4bb6c2[a98_0x54a1('0x18')];});}[a98_0x54a1('0x20')](_0x1c8502,_0x4aa690,_0x190719){if(!_0x1c8502['user']||_0x1c8502['user'][a98_0x54a1('0x7')]==0x0){}if(_0x1c8502[a98_0x54a1('0x6')]&&_0x1c8502[a98_0x54a1('0x6')][a98_0x54a1('0x7')]>0x0){_0x1c8502[a98_0x54a1('0x21')][a98_0x54a1('0x9')]=_0x1c8502[a98_0x54a1('0x6')][0x0]['id'];}return this[a98_0x54a1('0x3')][a98_0x54a1('0x22')](_0x1c8502['body'],this[a98_0x54a1('0x4')]?{'language_id':_0x1c8502['headers'][a98_0x54a1('0x12')]}:{})[a98_0x54a1('0x1c')](_0x272e7b=>{const _0x357f9d=this[a98_0x54a1('0x4')]?sequelize_utils_1[a98_0x54a1('0x10')][a98_0x54a1('0x1d')](_0x272e7b,_0x1c8502[a98_0x54a1('0x11')][a98_0x54a1('0x12')]):_0x272e7b;delete _0x357f9d['dataValues']['id'];delete _0x357f9d['dataValues']['created_by_user_id'];delete _0x357f9d['dataValues']['updated_by_user_id'];delete _0x357f9d[a98_0x54a1('0x23')][a98_0x54a1('0xb')];delete _0x357f9d[a98_0x54a1('0x23')]['created_at'];delete _0x357f9d['dataValues'][a98_0x54a1('0xd')];delete _0x357f9d[a98_0x54a1('0x23')][a98_0x54a1('0xe')];if(_0x4aa690){return _0x4aa690[a98_0x54a1('0x14')]({'success':!![],'data':_0x357f9d});}else{return _0x357f9d;}})['catch'](_0x534d2a=>{if(_0x4aa690){return _0x4aa690[a98_0x54a1('0x16')](0x1f4)[a98_0x54a1('0x17')]({'success':![],'data':_0x534d2a[a98_0x54a1('0x18')]});}else{return _0x534d2a['stack'];}});}['findOneAndUpdate'](_0x22364b,_0x513a16,_0x35f947){if(!_0x22364b[a98_0x54a1('0x6')]||_0x22364b[a98_0x54a1('0x6')]['length']==0x0){}if(_0x22364b[a98_0x54a1('0x6')]&&_0x22364b[a98_0x54a1('0x6')][a98_0x54a1('0x7')]>0x0){_0x22364b[a98_0x54a1('0x21')][a98_0x54a1('0x9')]=_0x22364b[a98_0x54a1('0x6')][0x0]['id'];}this[a98_0x54a1('0x3')][a98_0x54a1('0x24')](_0x22364b[a98_0x54a1('0x21')]['id'])[a98_0x54a1('0x1c')](_0x493470=>{if(_0x493470==null)return _0x513a16[a98_0x54a1('0x14')]({'success':!![],'data':_0x493470});_0x493470[a98_0x54a1('0x25')](_0x22364b[a98_0x54a1('0x21')],{'language_id':_0x22364b['headers']['lang']})[a98_0x54a1('0x1c')](function(_0x17c178){const _0x4bb0c8=this[a98_0x54a1('0x4')]?sequelize_utils_1[a98_0x54a1('0x10')][a98_0x54a1('0x1d')](_0x493470,_0x22364b[a98_0x54a1('0x11')]['lang']):_0x493470;return _0x513a16[a98_0x54a1('0x14')]({'success':!![],'data':_0x4bb0c8});}[a98_0x54a1('0x26')](this))[a98_0x54a1('0x15')](_0x5b3133=>{return _0x513a16[a98_0x54a1('0x16')](0x1f4)[a98_0x54a1('0x17')]({'success':![],'data':_0x5b3133['stack']});});})['catch'](_0x3055e8=>{return _0x513a16['status'](0x1f4)['send']({'success':![],'data':_0x3055e8[a98_0x54a1('0x18')]});});}[a98_0x54a1('0x27')](_0x2e0666,_0x5ed71e,_0xcc5970,_0x101715=![]){if(!_0x2e0666[a98_0x54a1('0x6')]||_0x2e0666['user'][a98_0x54a1('0x7')]==0x0){}if(_0x2e0666[a98_0x54a1('0x6')]&&_0x2e0666[a98_0x54a1('0x6')][a98_0x54a1('0x7')]>0x0){_0x2e0666[a98_0x54a1('0x21')][a98_0x54a1('0x9')]=_0x2e0666[a98_0x54a1('0x6')][0x0]['id'];}console[a98_0x54a1('0xf')](_0x2e0666[a98_0x54a1('0x1b')]);return this['model'][a98_0x54a1('0x28')]({'where':_0x2e0666[a98_0x54a1('0x1b')]})[a98_0x54a1('0x1c')](function(_0x168ab1){if(_0x168ab1){return _0x168ab1[a98_0x54a1('0x25')](_0x2e0666[a98_0x54a1('0x21')])[a98_0x54a1('0x1c')](function(_0x36bdda){const _0x3ad306=_0x36bdda['dataValues'];if(_0x101715){delete _0x3ad306['id'];}if(_0x5ed71e){return _0x5ed71e['json']({'success':!![],'data':_0x3ad306});}else{return _0x3ad306;}}[a98_0x54a1('0x26')](this));}else{return this[a98_0x54a1('0x3')]['create'](_0x2e0666['body'])[a98_0x54a1('0x1c')](function(_0x249b82){if(_0x5ed71e){return _0x5ed71e[a98_0x54a1('0x14')]({'success':!![],'data':_0x249b82[a98_0x54a1('0x13')]()});}else{return _0x249b82;}});}}['bind'](this))[a98_0x54a1('0x15')](_0x24a00f=>{if(_0x5ed71e){return _0x5ed71e[a98_0x54a1('0x16')](0x1f4)[a98_0x54a1('0x17')]({'success':![],'data':_0x24a00f[a98_0x54a1('0x18')]});}else{return _0x24a00f['stack'];}});}['findOrCreate'](_0x47c7c9,_0x144881,_0x15fc9e){if(!_0x47c7c9[a98_0x54a1('0x6')]||_0x47c7c9['user'][a98_0x54a1('0x7')]==0x0){}if(_0x47c7c9['user']&&_0x47c7c9[a98_0x54a1('0x6')]['length']>0x0){_0x47c7c9[a98_0x54a1('0x21')]['created_by_user_id']=_0x47c7c9[a98_0x54a1('0x6')][0x0]['id'];}return this[a98_0x54a1('0x3')][a98_0x54a1('0x29')]({'where':{'uuid':_0x47c7c9['body'][a98_0x54a1('0x1f')]},'defaults':_0x47c7c9['body']})['then']((_0x3dbf06,_0x1f436d)=>{if(_0x1f436d){}else{}return _0x144881[a98_0x54a1('0x14')]({'success':!![],'data':_0x3dbf06});})[a98_0x54a1('0x15')](_0x1baae4=>{return _0x144881[a98_0x54a1('0x16')](0x1f4)[a98_0x54a1('0x17')]({'success':![],'data':_0x1baae4['stack']});});}[a98_0x54a1('0x2a')](_0x1d2365,_0x3fc994,_0x32034d){if(!_0x1d2365[a98_0x54a1('0x6')]||_0x1d2365[a98_0x54a1('0x6')][a98_0x54a1('0x7')]==0x0){return _0x3fc994[a98_0x54a1('0x16')](0x191)[a98_0x54a1('0x17')]({'success':![],'data':a98_0x54a1('0x1a')});}if(_0x1d2365[a98_0x54a1('0x6')]&&_0x1d2365[a98_0x54a1('0x6')][a98_0x54a1('0x7')]>0x0){_0x1d2365[a98_0x54a1('0x21')][a98_0x54a1('0x9')]=_0x1d2365[a98_0x54a1('0x6')][0x0]['id'];}this['model'][a98_0x54a1('0x19')](_0x1d2365[a98_0x54a1('0x1b')]['id'])[a98_0x54a1('0x1c')](_0x3e33bf=>{if(_0x3e33bf==null)return _0x3fc994[a98_0x54a1('0x14')]({'success':!![],'data':_0x3e33bf});_0x3e33bf[a98_0x54a1('0x2b')]()[a98_0x54a1('0x1c')](function(_0x40be09){const _0x43abf2=this[a98_0x54a1('0x4')]?sequelize_utils_1[a98_0x54a1('0x10')][a98_0x54a1('0x1d')](_0x3e33bf,_0x1d2365[a98_0x54a1('0x11')]['lang']):_0x3e33bf;return _0x3fc994['json']({'success':!![],'data':_0x43abf2});})[a98_0x54a1('0x15')](_0x13f6c8=>{return _0x3fc994[a98_0x54a1('0x16')](0x1f4)['send']({'success':![],'data':_0x13f6c8[a98_0x54a1('0x18')]});});})[a98_0x54a1('0x15')](_0x539dbc=>{return _0x3fc994[a98_0x54a1('0x16')](0x1f4)[a98_0x54a1('0x17')]({'success':![],'data':_0x539dbc[a98_0x54a1('0x18')]});});}}exports[a98_0x54a1('0x10')]=CrudUtils;