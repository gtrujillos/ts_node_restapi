var a98_0xbfc0=['created_at','findOneAndUpdate','findByPk','update','findOne','bind','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','i18n','find','log','user','length','model','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','updated_at','deleted_at','then','default','toJSONLocalizedOnly','headers','json','catch','status','send','stack','findById','authentication\x20failed','params','findByUUId','uuid','body','create','lang','dataValues'];(function(_0x216dda,_0x18db8f){var _0x2d6e58=function(_0x225784){while(--_0x225784){_0x216dda['push'](_0x216dda['shift']());}};_0x2d6e58(++_0x18db8f);}(a98_0xbfc0,0xe0));var a98_0x1976=function(_0x5cd0de,_0x2df795){_0x5cd0de=_0x5cd0de-0x0;var _0x222b15=a98_0xbfc0[_0x5cd0de];return _0x222b15;};'use strict';var __importDefault=this&&this[a98_0x1976('0x0')]||function(_0x52de86){return _0x52de86&&_0x52de86[a98_0x1976('0x1')]?_0x52de86:{'default':_0x52de86};};Object[a98_0x1976('0x2')](exports,a98_0x1976('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a98_0x1976('0x3')));class CrudUtils{constructor(_0x364eff,_0xf08e1c){this['model']=_0x364eff;this[a98_0x1976('0x4')]=_0xf08e1c;}[a98_0x1976('0x5')](_0x1723a7,_0x2b68ee,_0x4af01c,_0x48f274=![]){console[a98_0x1976('0x6')](a98_0x1976('0x5'));if(!_0x1723a7['user']||_0x1723a7[a98_0x1976('0x7')][a98_0x1976('0x8')]==0x0){}return this[a98_0x1976('0x9')][a98_0x1976('0xa')]({'attributes':{'exclude':_0x48f274?[]:['id',a98_0x1976('0xb'),a98_0x1976('0xc'),a98_0x1976('0xd'),'created_at',a98_0x1976('0xe'),a98_0x1976('0xf')]},'where':{}})[a98_0x1976('0x10')](_0x39f076=>{console['log'](_0x39f076);const _0x452c67=this['i18n']?sequelize_utils_1[a98_0x1976('0x11')][a98_0x1976('0x12')](_0x39f076,_0x1723a7[a98_0x1976('0x13')]['lang']):sequelize_utils_1['default']['toJSON'](_0x39f076);if(_0x2b68ee){return _0x2b68ee[a98_0x1976('0x14')]({'success':!![],'data':_0x452c67});}else{return _0x452c67;}})[a98_0x1976('0x15')](_0x481110=>{if(_0x2b68ee){return _0x2b68ee[a98_0x1976('0x16')](0x1f4)[a98_0x1976('0x17')]({'success':![],'data':_0x481110['stack']});}else{return _0x481110[a98_0x1976('0x18')];}});}[a98_0x1976('0x19')](_0x5871fb,_0xe6fce6,_0x52b9b5){if(!_0x5871fb['user']||_0x5871fb[a98_0x1976('0x7')][a98_0x1976('0x8')]==0x0){return _0xe6fce6[a98_0x1976('0x16')](0x191)[a98_0x1976('0x17')]({'success':![],'data':a98_0x1976('0x1a')});}this[a98_0x1976('0x9')]['findById'](_0x5871fb[a98_0x1976('0x1b')]['id'])[a98_0x1976('0x10')](_0x305a3a=>{const _0x358052=this[a98_0x1976('0x4')]?sequelize_utils_1[a98_0x1976('0x11')]['toJSONLocalizedOnly'](_0x305a3a,_0x5871fb[a98_0x1976('0x13')]['lang']):_0x305a3a;return _0xe6fce6['json']({'success':!![],'data':_0x358052});})[a98_0x1976('0x15')](_0x1d2874=>{return _0xe6fce6['status'](0x1f4)[a98_0x1976('0x17')]({'success':![],'data':_0x1d2874[a98_0x1976('0x18')]});});}[a98_0x1976('0x1c')](_0x303b57,_0x486875,_0x4a6fb6){if(!_0x303b57[a98_0x1976('0x7')]||_0x303b57[a98_0x1976('0x7')][a98_0x1976('0x8')]==0x0){}return this['model'][a98_0x1976('0xa')]({'where':{'uuid':_0x303b57[a98_0x1976('0x1b')][a98_0x1976('0x1d')]}})[a98_0x1976('0x10')](_0x3c1a6d=>{const _0x12a168=this[a98_0x1976('0x4')]?sequelize_utils_1[a98_0x1976('0x11')][a98_0x1976('0x12')](_0x3c1a6d,_0x303b57['headers']['lang']):sequelize_utils_1['default']['toJSON'](_0x3c1a6d);return _0x12a168;})['catch'](_0x4d1944=>{return _0x4d1944[a98_0x1976('0x18')];});}['save'](_0x209ab9,_0x4896c3,_0x5ee93f){if(!_0x209ab9['user']||_0x209ab9['user'][a98_0x1976('0x8')]==0x0){}if(_0x209ab9[a98_0x1976('0x7')]&&_0x209ab9[a98_0x1976('0x7')][a98_0x1976('0x8')]>0x0){_0x209ab9[a98_0x1976('0x1e')][a98_0x1976('0xb')]=_0x209ab9[a98_0x1976('0x7')][0x0]['id'];}return this['model'][a98_0x1976('0x1f')](_0x209ab9['body'],this['i18n']?{'language_id':_0x209ab9[a98_0x1976('0x13')]['lang']}:{})[a98_0x1976('0x10')](_0x296e62=>{const _0x1c8234=this[a98_0x1976('0x4')]?sequelize_utils_1[a98_0x1976('0x11')][a98_0x1976('0x12')](_0x296e62,_0x209ab9[a98_0x1976('0x13')][a98_0x1976('0x20')]):_0x296e62;delete _0x1c8234[a98_0x1976('0x21')]['id'];delete _0x1c8234[a98_0x1976('0x21')][a98_0x1976('0xb')];delete _0x1c8234[a98_0x1976('0x21')][a98_0x1976('0xc')];delete _0x1c8234[a98_0x1976('0x21')][a98_0x1976('0xd')];delete _0x1c8234[a98_0x1976('0x21')][a98_0x1976('0x22')];delete _0x1c8234[a98_0x1976('0x21')][a98_0x1976('0xe')];delete _0x1c8234['dataValues'][a98_0x1976('0xf')];if(_0x4896c3){return _0x4896c3[a98_0x1976('0x14')]({'success':!![],'data':_0x1c8234});}else{return _0x1c8234;}})[a98_0x1976('0x15')](_0x3ef945=>{if(_0x4896c3){return _0x4896c3[a98_0x1976('0x16')](0x1f4)['send']({'success':![],'data':_0x3ef945[a98_0x1976('0x18')]});}else{return _0x3ef945[a98_0x1976('0x18')];}});}[a98_0x1976('0x23')](_0xeb9d14,_0x388f8e,_0x22d1c9){if(!_0xeb9d14[a98_0x1976('0x7')]||_0xeb9d14[a98_0x1976('0x7')][a98_0x1976('0x8')]==0x0){}if(_0xeb9d14[a98_0x1976('0x7')]&&_0xeb9d14[a98_0x1976('0x7')][a98_0x1976('0x8')]>0x0){_0xeb9d14[a98_0x1976('0x1e')][a98_0x1976('0xb')]=_0xeb9d14[a98_0x1976('0x7')][0x0]['id'];}this[a98_0x1976('0x9')][a98_0x1976('0x24')](_0xeb9d14[a98_0x1976('0x1e')]['id'])['then'](_0x419d4e=>{if(_0x419d4e==null)return _0x388f8e[a98_0x1976('0x14')]({'success':!![],'data':_0x419d4e});_0x419d4e[a98_0x1976('0x25')](_0xeb9d14[a98_0x1976('0x1e')],{'language_id':_0xeb9d14['headers'][a98_0x1976('0x20')]})[a98_0x1976('0x10')](function(_0x25a566){const _0x5ea8b3=this['i18n']?sequelize_utils_1[a98_0x1976('0x11')][a98_0x1976('0x12')](_0x419d4e,_0xeb9d14[a98_0x1976('0x13')][a98_0x1976('0x20')]):_0x419d4e;return _0x388f8e['json']({'success':!![],'data':_0x5ea8b3});}['bind'](this))[a98_0x1976('0x15')](_0x22e8f6=>{return _0x388f8e[a98_0x1976('0x16')](0x1f4)[a98_0x1976('0x17')]({'success':![],'data':_0x22e8f6[a98_0x1976('0x18')]});});})['catch'](_0x5d8f48=>{return _0x388f8e[a98_0x1976('0x16')](0x1f4)['send']({'success':![],'data':_0x5d8f48[a98_0x1976('0x18')]});});}['updateOrCreate'](_0x297879,_0x40b70d,_0xe9d266,_0x146744=![]){if(!_0x297879[a98_0x1976('0x7')]||_0x297879[a98_0x1976('0x7')][a98_0x1976('0x8')]==0x0){}if(_0x297879[a98_0x1976('0x7')]&&_0x297879[a98_0x1976('0x7')][a98_0x1976('0x8')]>0x0){_0x297879['body'][a98_0x1976('0xb')]=_0x297879[a98_0x1976('0x7')][0x0]['id'];}console[a98_0x1976('0x6')](_0x297879[a98_0x1976('0x1b')]);return this[a98_0x1976('0x9')][a98_0x1976('0x26')]({'where':_0x297879[a98_0x1976('0x1b')]})['then'](function(_0xf17e5f){if(_0xf17e5f){return _0xf17e5f[a98_0x1976('0x25')](_0x297879[a98_0x1976('0x1e')])[a98_0x1976('0x10')](function(_0x1746a3){const _0x2053b9=_0x1746a3[a98_0x1976('0x21')];if(_0x146744){delete _0x2053b9['id'];}if(_0x40b70d){return _0x40b70d['json']({'success':!![],'data':_0x2053b9});}else{return _0x2053b9;}}[a98_0x1976('0x27')](this));}else{return this[a98_0x1976('0x9')][a98_0x1976('0x1f')](_0x297879[a98_0x1976('0x1e')])[a98_0x1976('0x10')](function(_0x799ebd){if(_0x40b70d){return _0x40b70d[a98_0x1976('0x14')]({'success':!![],'data':_0x799ebd['toJSON']()});}else{return _0x799ebd;}});}}[a98_0x1976('0x27')](this))[a98_0x1976('0x15')](_0x9aad5c=>{if(_0x40b70d){return _0x40b70d['status'](0x1f4)[a98_0x1976('0x17')]({'success':![],'data':_0x9aad5c[a98_0x1976('0x18')]});}else{return _0x9aad5c[a98_0x1976('0x18')];}});}['findOrCreate'](_0x564546,_0x3b444e,_0x3c011a){if(!_0x564546['user']||_0x564546['user']['length']==0x0){}if(_0x564546[a98_0x1976('0x7')]&&_0x564546[a98_0x1976('0x7')][a98_0x1976('0x8')]>0x0){_0x564546[a98_0x1976('0x1e')][a98_0x1976('0xb')]=_0x564546['user'][0x0]['id'];}return this[a98_0x1976('0x9')][a98_0x1976('0x28')]({'where':{'uuid':_0x564546[a98_0x1976('0x1e')][a98_0x1976('0x1d')]},'defaults':_0x564546[a98_0x1976('0x1e')]})[a98_0x1976('0x10')]((_0x5d8ce3,_0x3a66f1)=>{if(_0x3a66f1){}else{}return _0x3b444e[a98_0x1976('0x14')]({'success':!![],'data':_0x5d8ce3});})[a98_0x1976('0x15')](_0x1d1973=>{return _0x3b444e['status'](0x1f4)[a98_0x1976('0x17')]({'success':![],'data':_0x1d1973[a98_0x1976('0x18')]});});}[a98_0x1976('0x29')](_0x32f4da,_0xe842d5,_0xec06e8){if(!_0x32f4da['user']||_0x32f4da[a98_0x1976('0x7')][a98_0x1976('0x8')]==0x0){return _0xe842d5[a98_0x1976('0x16')](0x191)[a98_0x1976('0x17')]({'success':![],'data':a98_0x1976('0x1a')});}if(_0x32f4da[a98_0x1976('0x7')]&&_0x32f4da[a98_0x1976('0x7')]['length']>0x0){_0x32f4da[a98_0x1976('0x1e')][a98_0x1976('0xb')]=_0x32f4da['user'][0x0]['id'];}this[a98_0x1976('0x9')][a98_0x1976('0x19')](_0x32f4da['params']['id'])[a98_0x1976('0x10')](_0x40064e=>{if(_0x40064e==null)return _0xe842d5[a98_0x1976('0x14')]({'success':!![],'data':_0x40064e});_0x40064e[a98_0x1976('0x2a')]()['then'](function(_0x5c0514){const _0x2542fa=this[a98_0x1976('0x4')]?sequelize_utils_1['default'][a98_0x1976('0x12')](_0x40064e,_0x32f4da[a98_0x1976('0x13')][a98_0x1976('0x20')]):_0x40064e;return _0xe842d5[a98_0x1976('0x14')]({'success':!![],'data':_0x2542fa});})[a98_0x1976('0x15')](_0x21e9d6=>{return _0xe842d5[a98_0x1976('0x16')](0x1f4)[a98_0x1976('0x17')]({'success':![],'data':_0x21e9d6[a98_0x1976('0x18')]});});})[a98_0x1976('0x15')](_0x172cfb=>{return _0xe842d5[a98_0x1976('0x16')](0x1f4)[a98_0x1976('0x17')]({'success':![],'data':_0x172cfb[a98_0x1976('0x18')]});});}}exports[a98_0x1976('0x11')]=CrudUtils;