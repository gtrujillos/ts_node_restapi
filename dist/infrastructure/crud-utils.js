var a91_0x54b4=['findOneAndUpdate','params','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','then','default','toJSONLocalizedOnly','headers','lang','json','status','send','stack','findById','user','length','authentication\x20failed','save','body','create','dataValues','catch'];(function(_0x23f2c7,_0xe14e9c){var _0x367779=function(_0x3a53e8){while(--_0x3a53e8){_0x23f2c7['push'](_0x23f2c7['shift']());}};_0x367779(++_0xe14e9c);}(a91_0x54b4,0xcf));var a91_0x16c9=function(_0x2e3f2a,_0x1a3d99){_0x2e3f2a=_0x2e3f2a-0x0;var _0x542ad4=a91_0x54b4[_0x2e3f2a];return _0x542ad4;};'use strict';var __importDefault=this&&this[a91_0x16c9('0x0')]||function(_0x44d2ba){return _0x44d2ba&&_0x44d2ba[a91_0x16c9('0x1')]?_0x44d2ba:{'default':_0x44d2ba};};Object[a91_0x16c9('0x2')](exports,a91_0x16c9('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a91_0x16c9('0x3')));class CrudUtils{constructor(_0x4e9297,_0x4848e7){this[a91_0x16c9('0x4')]=_0x4e9297;this[a91_0x16c9('0x5')]=_0x4848e7;}['find'](_0x230846,_0x3d610a,_0x1eb847){if(!_0x230846['user']||_0x230846['user']['length']==0x0){}this[a91_0x16c9('0x4')][a91_0x16c9('0x6')]({'attributes':{'exclude':['id',a91_0x16c9('0x7'),a91_0x16c9('0x8'),a91_0x16c9('0x9'),a91_0x16c9('0xa'),a91_0x16c9('0xb'),a91_0x16c9('0xc')]}})[a91_0x16c9('0xd')](_0x4b7e03=>{const _0xe8c0ff=this[a91_0x16c9('0x5')]?sequelize_utils_1[a91_0x16c9('0xe')][a91_0x16c9('0xf')](_0x4b7e03,_0x230846[a91_0x16c9('0x10')][a91_0x16c9('0x11')]):_0x4b7e03;return _0x3d610a[a91_0x16c9('0x12')]({'success':!![],'data':_0xe8c0ff});})['catch'](_0x3aeac4=>{return _0x3d610a[a91_0x16c9('0x13')](0x1f4)[a91_0x16c9('0x14')]({'success':![],'data':_0x3aeac4[a91_0x16c9('0x15')]});});}[a91_0x16c9('0x16')](_0x545590,_0x40cb7d,_0x168c49){if(!_0x545590[a91_0x16c9('0x17')]||_0x545590[a91_0x16c9('0x17')][a91_0x16c9('0x18')]==0x0){return _0x40cb7d[a91_0x16c9('0x13')](0x191)[a91_0x16c9('0x14')]({'success':![],'data':a91_0x16c9('0x19')});}this['model'][a91_0x16c9('0x16')](_0x545590['params']['id'])[a91_0x16c9('0xd')](_0x2deef7=>{const _0x445269=this['i18n']?sequelize_utils_1['default'][a91_0x16c9('0xf')](_0x2deef7,_0x545590[a91_0x16c9('0x10')]['lang']):_0x2deef7;return _0x40cb7d[a91_0x16c9('0x12')]({'success':!![],'data':_0x445269});})['catch'](_0x3a79d2=>{return _0x40cb7d[a91_0x16c9('0x13')](0x1f4)['send']({'success':![],'data':_0x3a79d2[a91_0x16c9('0x15')]});});}[a91_0x16c9('0x1a')](_0x5bb218,_0x4264d8,_0x519e1f){if(!_0x5bb218['user']||_0x5bb218[a91_0x16c9('0x17')][a91_0x16c9('0x18')]==0x0){}if(_0x5bb218[a91_0x16c9('0x17')]&&_0x5bb218[a91_0x16c9('0x17')][a91_0x16c9('0x18')]>0x0){_0x5bb218[a91_0x16c9('0x1b')]['created_by_user_id']=_0x5bb218[a91_0x16c9('0x17')][0x0]['id'];}this[a91_0x16c9('0x4')][a91_0x16c9('0x1c')](_0x5bb218[a91_0x16c9('0x1b')],{'language_id':_0x5bb218[a91_0x16c9('0x10')][a91_0x16c9('0x11')]})['then'](_0x28af25=>{const _0x36f028=this[a91_0x16c9('0x5')]?sequelize_utils_1[a91_0x16c9('0xe')][a91_0x16c9('0xf')](_0x28af25,_0x5bb218[a91_0x16c9('0x10')][a91_0x16c9('0x11')]):_0x28af25;delete _0x36f028[a91_0x16c9('0x1d')]['id'];delete _0x36f028[a91_0x16c9('0x1d')]['created_by_user_id'];delete _0x36f028['dataValues'][a91_0x16c9('0x8')];delete _0x36f028['dataValues']['deleted_by_user_id'];delete _0x36f028[a91_0x16c9('0x1d')][a91_0x16c9('0xa')];delete _0x36f028[a91_0x16c9('0x1d')][a91_0x16c9('0xb')];delete _0x36f028['dataValues'][a91_0x16c9('0xc')];return _0x4264d8[a91_0x16c9('0x12')]({'success':!![],'data':_0x36f028});})[a91_0x16c9('0x1e')](_0x49c4c6=>{return _0x4264d8['status'](0x1f4)[a91_0x16c9('0x14')]({'success':![],'data':_0x49c4c6[a91_0x16c9('0x15')]});});}[a91_0x16c9('0x1f')](_0x559770,_0x22a949,_0x3b3518){if(!_0x559770[a91_0x16c9('0x17')]||_0x559770[a91_0x16c9('0x17')]['length']==0x0){return _0x22a949[a91_0x16c9('0x13')](0x191)[a91_0x16c9('0x14')]({'success':![],'data':'authentication\x20failed'});}if(_0x559770[a91_0x16c9('0x17')]&&_0x559770[a91_0x16c9('0x17')]['length']>0x0){_0x559770[a91_0x16c9('0x1b')][a91_0x16c9('0x7')]=_0x559770[a91_0x16c9('0x17')][0x0]['id'];}this[a91_0x16c9('0x4')][a91_0x16c9('0x16')](_0x559770[a91_0x16c9('0x20')]['id'])['then'](_0x24a915=>{if(_0x24a915==null)return _0x22a949[a91_0x16c9('0x12')]({'success':!![],'data':_0x24a915});_0x24a915['update'](_0x559770[a91_0x16c9('0x1b')],{'language_id':_0x559770[a91_0x16c9('0x10')][a91_0x16c9('0x11')]})[a91_0x16c9('0xd')](function(_0xfa2288){const _0x2cf21a=this[a91_0x16c9('0x5')]?sequelize_utils_1[a91_0x16c9('0xe')]['toJSONLocalizedOnly'](_0x24a915,_0x559770[a91_0x16c9('0x10')][a91_0x16c9('0x11')]):_0x24a915;return _0x22a949[a91_0x16c9('0x12')]({'success':!![],'data':_0x2cf21a});})[a91_0x16c9('0x1e')](_0x4b7801=>{return _0x22a949[a91_0x16c9('0x13')](0x1f4)[a91_0x16c9('0x14')]({'success':![],'data':_0x4b7801['stack']});});})[a91_0x16c9('0x1e')](_0x1d8b8a=>{return _0x22a949['status'](0x1f4)[a91_0x16c9('0x14')]({'success':![],'data':_0x1d8b8a['stack']});});}['remove'](_0x7999c,_0x7ee653,_0x25e37e){if(!_0x7999c[a91_0x16c9('0x17')]||_0x7999c[a91_0x16c9('0x17')]['length']==0x0){return _0x7ee653[a91_0x16c9('0x13')](0x191)[a91_0x16c9('0x14')]({'success':![],'data':a91_0x16c9('0x19')});}if(_0x7999c[a91_0x16c9('0x17')]&&_0x7999c['user']['length']>0x0){_0x7999c[a91_0x16c9('0x1b')][a91_0x16c9('0x7')]=_0x7999c['user'][0x0]['id'];}this[a91_0x16c9('0x4')]['findById'](_0x7999c['params']['id'])[a91_0x16c9('0xd')](_0x55b8fd=>{if(_0x55b8fd==null)return _0x7ee653['json']({'success':!![],'data':_0x55b8fd});_0x55b8fd[a91_0x16c9('0x21')]()[a91_0x16c9('0xd')](function(_0x7ed8ef){const _0x39db1a=this[a91_0x16c9('0x5')]?sequelize_utils_1['default'][a91_0x16c9('0xf')](_0x55b8fd,_0x7999c[a91_0x16c9('0x10')][a91_0x16c9('0x11')]):_0x55b8fd;return _0x7ee653[a91_0x16c9('0x12')]({'success':!![],'data':_0x39db1a});})[a91_0x16c9('0x1e')](_0x36af3a=>{return _0x7ee653[a91_0x16c9('0x13')](0x1f4)[a91_0x16c9('0x14')]({'success':![],'data':_0x36af3a[a91_0x16c9('0x15')]});});})[a91_0x16c9('0x1e')](_0x5a0a3a=>{return _0x7ee653['status'](0x1f4)[a91_0x16c9('0x14')]({'success':![],'data':_0x5a0a3a[a91_0x16c9('0x15')]});});}}exports[a91_0x16c9('0xe')]=CrudUtils;