var a99_0x3996=['lang','toJSON','json','catch','status','stack','findById','send','authentication\x20failed','findByUUId','findAll','uuid','save','body','dataValues','updated_by_user_id','created_at','updated_at','findOneAndUpdate','findByPk','update','bind','updateOrCreate','findOne','findOrCreate','remove','destroy','defineProperty','__esModule','./sequelize-utils','model','i18n','user','length','created_by_user_id','deleted_by_user_id','deleted_at','params','then','default','toJSONLocalizedOnly','headers'];(function(_0x26f278,_0x3924f4){var _0x4eabf5=function(_0x52bc3e){while(--_0x52bc3e){_0x26f278['push'](_0x26f278['shift']());}};_0x4eabf5(++_0x3924f4);}(a99_0x3996,0x141));var a99_0x5cda=function(_0x2547b8,_0x1b0e29){_0x2547b8=_0x2547b8-0x0;var _0x4b6e13=a99_0x3996[_0x2547b8];return _0x4b6e13;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x462cb){return _0x462cb&&_0x462cb['__esModule']?_0x462cb:{'default':_0x462cb};};Object[a99_0x5cda('0x0')](exports,a99_0x5cda('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x5cda('0x2')));class CrudUtils{constructor(_0x3e8be1,_0x47654c){this[a99_0x5cda('0x3')]=_0x3e8be1;this[a99_0x5cda('0x4')]=_0x47654c;}['find'](_0x592a1f,_0xdcf76f,_0x3f90c5,_0x49a938=![],_0x5b84d9=[]){if(!_0x592a1f[a99_0x5cda('0x5')]||_0x592a1f[a99_0x5cda('0x5')][a99_0x5cda('0x6')]==0x0){}return this[a99_0x5cda('0x3')]['findAll']({'attributes':{'exclude':_0x49a938?[]:['id',a99_0x5cda('0x7'),'updated_by_user_id',a99_0x5cda('0x8'),'created_at','updated_at',a99_0x5cda('0x9')]},'where':_0x592a1f[a99_0x5cda('0xa')],'include':_0x5b84d9})[a99_0x5cda('0xb')](_0x4d97cf=>{const _0x5dcf48=this[a99_0x5cda('0x4')]?sequelize_utils_1[a99_0x5cda('0xc')][a99_0x5cda('0xd')](_0x4d97cf,_0x592a1f[a99_0x5cda('0xe')][a99_0x5cda('0xf')]):sequelize_utils_1[a99_0x5cda('0xc')][a99_0x5cda('0x10')](_0x4d97cf);if(_0xdcf76f){return _0xdcf76f[a99_0x5cda('0x11')]({'success':!![],'data':_0x5dcf48});}else{return _0x5dcf48;}})[a99_0x5cda('0x12')](_0x362590=>{if(_0xdcf76f){return _0xdcf76f[a99_0x5cda('0x13')](0x1f4)['send']({'success':![],'data':_0x362590[a99_0x5cda('0x14')]});}else{return _0x362590[a99_0x5cda('0x14')];}});}[a99_0x5cda('0x15')](_0x126a3b,_0x468640,_0x45bd79){if(!_0x126a3b[a99_0x5cda('0x5')]||_0x126a3b[a99_0x5cda('0x5')][a99_0x5cda('0x6')]==0x0){return _0x468640['status'](0x191)[a99_0x5cda('0x16')]({'success':![],'data':a99_0x5cda('0x17')});}this['model'][a99_0x5cda('0x15')](_0x126a3b[a99_0x5cda('0xa')]['id'])['then'](_0x275e3c=>{const _0x1cf1cd=this[a99_0x5cda('0x4')]?sequelize_utils_1[a99_0x5cda('0xc')][a99_0x5cda('0xd')](_0x275e3c,_0x126a3b[a99_0x5cda('0xe')][a99_0x5cda('0xf')]):_0x275e3c;return _0x468640[a99_0x5cda('0x11')]({'success':!![],'data':_0x1cf1cd});})[a99_0x5cda('0x12')](_0x38654b=>{return _0x468640[a99_0x5cda('0x13')](0x1f4)[a99_0x5cda('0x16')]({'success':![],'data':_0x38654b[a99_0x5cda('0x14')]});});}[a99_0x5cda('0x18')](_0x538a9e,_0x22e0b1,_0x42b7ba){if(!_0x538a9e[a99_0x5cda('0x5')]||_0x538a9e['user'][a99_0x5cda('0x6')]==0x0){}return this[a99_0x5cda('0x3')][a99_0x5cda('0x19')]({'where':{'uuid':_0x538a9e[a99_0x5cda('0xa')][a99_0x5cda('0x1a')]}})['then'](_0x2161d8=>{const _0x513990=this[a99_0x5cda('0x4')]?sequelize_utils_1[a99_0x5cda('0xc')][a99_0x5cda('0xd')](_0x2161d8,_0x538a9e['headers'][a99_0x5cda('0xf')]):sequelize_utils_1[a99_0x5cda('0xc')][a99_0x5cda('0x10')](_0x2161d8);return _0x513990;})[a99_0x5cda('0x12')](_0x26c97f=>{return _0x26c97f[a99_0x5cda('0x14')];});}[a99_0x5cda('0x1b')](_0x1240b4,_0x4b7cdc,_0x432169){if(!_0x1240b4['user']||_0x1240b4[a99_0x5cda('0x5')]['length']==0x0){}if(_0x1240b4[a99_0x5cda('0x5')]&&_0x1240b4[a99_0x5cda('0x5')][a99_0x5cda('0x6')]>0x0){_0x1240b4['body'][a99_0x5cda('0x7')]=_0x1240b4[a99_0x5cda('0x5')][0x0]['id'];}return this[a99_0x5cda('0x3')]['create'](_0x1240b4[a99_0x5cda('0x1c')],this[a99_0x5cda('0x4')]?{'language_id':_0x1240b4['headers']['lang']}:{})['then'](_0x3502fb=>{const _0x4feeb8=this['i18n']?sequelize_utils_1['default'][a99_0x5cda('0xd')](_0x3502fb,_0x1240b4[a99_0x5cda('0xe')]['lang']):_0x3502fb;delete _0x4feeb8[a99_0x5cda('0x1d')]['id'];delete _0x4feeb8[a99_0x5cda('0x1d')]['created_by_user_id'];delete _0x4feeb8['dataValues'][a99_0x5cda('0x1e')];delete _0x4feeb8['dataValues'][a99_0x5cda('0x8')];delete _0x4feeb8['dataValues'][a99_0x5cda('0x1f')];delete _0x4feeb8['dataValues'][a99_0x5cda('0x20')];delete _0x4feeb8[a99_0x5cda('0x1d')][a99_0x5cda('0x9')];if(_0x4b7cdc){return _0x4b7cdc[a99_0x5cda('0x11')]({'success':!![],'data':_0x4feeb8});}else{return _0x4feeb8;}})[a99_0x5cda('0x12')](_0x4099c9=>{if(_0x4b7cdc){return _0x4b7cdc[a99_0x5cda('0x13')](0x1f4)[a99_0x5cda('0x16')]({'success':![],'data':_0x4099c9[a99_0x5cda('0x14')]});}else{return _0x4099c9[a99_0x5cda('0x14')];}});}[a99_0x5cda('0x21')](_0x1d571c,_0x36ce1a,_0x1c377b){if(!_0x1d571c[a99_0x5cda('0x5')]||_0x1d571c['user'][a99_0x5cda('0x6')]==0x0){}if(_0x1d571c[a99_0x5cda('0x5')]&&_0x1d571c['user'][a99_0x5cda('0x6')]>0x0){}this[a99_0x5cda('0x3')][a99_0x5cda('0x22')](_0x1d571c[a99_0x5cda('0x1c')]['id'])[a99_0x5cda('0xb')](_0x1a21d7=>{if(_0x1a21d7==null)return _0x36ce1a[a99_0x5cda('0x11')]({'success':!![],'data':_0x1a21d7});_0x1a21d7[a99_0x5cda('0x23')](_0x1d571c[a99_0x5cda('0x1c')],{'language_id':_0x1d571c['headers'][a99_0x5cda('0xf')]})['then'](function(_0x63a1bd){const _0x5eb542=this[a99_0x5cda('0x4')]?sequelize_utils_1[a99_0x5cda('0xc')]['toJSONLocalizedOnly'](_0x1a21d7,_0x1d571c['headers']['lang']):_0x1a21d7;return _0x36ce1a[a99_0x5cda('0x11')]({'success':!![],'data':_0x5eb542});}[a99_0x5cda('0x24')](this))[a99_0x5cda('0x12')](_0x4dfde2=>{return _0x36ce1a[a99_0x5cda('0x13')](0x1f4)['send']({'success':![],'data':_0x4dfde2[a99_0x5cda('0x14')]});});})[a99_0x5cda('0x12')](_0x161273=>{return _0x36ce1a[a99_0x5cda('0x13')](0x1f4)[a99_0x5cda('0x16')]({'success':![],'data':_0x161273[a99_0x5cda('0x14')]});});}[a99_0x5cda('0x25')](_0xee8564,_0x378df0,_0x38ccbf,_0x797792=![]){if(!_0xee8564[a99_0x5cda('0x5')]||_0xee8564['user'][a99_0x5cda('0x6')]==0x0){}if(_0xee8564[a99_0x5cda('0x5')]&&_0xee8564[a99_0x5cda('0x5')][a99_0x5cda('0x6')]>0x0){}return this['model'][a99_0x5cda('0x26')]({'where':_0xee8564['params']})[a99_0x5cda('0xb')](function(_0x38bf61){if(_0x38bf61){return _0x38bf61['update'](_0xee8564[a99_0x5cda('0x1c')])[a99_0x5cda('0xb')](function(_0x2e1273){const _0x2f9398=_0x2e1273[a99_0x5cda('0x1d')];if(_0x797792){delete _0x2f9398['id'];}if(_0x378df0){return _0x378df0[a99_0x5cda('0x11')]({'success':!![],'data':_0x2f9398});}else{return _0x2f9398;}}[a99_0x5cda('0x24')](this));}else{return this[a99_0x5cda('0x3')]['create'](_0xee8564['body'])[a99_0x5cda('0xb')](function(_0x37d97c){if(_0x378df0){return _0x378df0['json']({'success':!![],'data':_0x37d97c[a99_0x5cda('0x10')]()});}else{return _0x37d97c;}});}}[a99_0x5cda('0x24')](this))[a99_0x5cda('0x12')](_0x26e9b7=>{if(_0x378df0){return _0x378df0['status'](0x1f4)[a99_0x5cda('0x16')]({'success':![],'data':_0x26e9b7[a99_0x5cda('0x14')]});}else{return _0x26e9b7[a99_0x5cda('0x14')];}});}['findOrCreate'](_0x11f8c6,_0x7d8fca,_0x2285de){if(!_0x11f8c6[a99_0x5cda('0x5')]||_0x11f8c6[a99_0x5cda('0x5')][a99_0x5cda('0x6')]==0x0){}if(_0x11f8c6[a99_0x5cda('0x5')]&&_0x11f8c6[a99_0x5cda('0x5')][a99_0x5cda('0x6')]>0x0){}return this[a99_0x5cda('0x3')][a99_0x5cda('0x27')]({'where':{'uuid':_0x11f8c6[a99_0x5cda('0x1c')][a99_0x5cda('0x1a')]},'defaults':_0x11f8c6[a99_0x5cda('0x1c')]})['then']((_0x362af4,_0x476873)=>{if(_0x476873){}else{}return _0x7d8fca[a99_0x5cda('0x11')]({'success':!![],'data':_0x362af4});})['catch'](_0x2d8ceb=>{return _0x7d8fca[a99_0x5cda('0x13')](0x1f4)[a99_0x5cda('0x16')]({'success':![],'data':_0x2d8ceb['stack']});});}[a99_0x5cda('0x28')](_0x355b7a,_0x273eec,_0x30c4ca){if(!_0x355b7a[a99_0x5cda('0x5')]||_0x355b7a[a99_0x5cda('0x5')][a99_0x5cda('0x6')]==0x0){return _0x273eec[a99_0x5cda('0x13')](0x191)[a99_0x5cda('0x16')]({'success':![],'data':'authentication\x20failed'});}if(_0x355b7a[a99_0x5cda('0x5')]&&_0x355b7a['user'][a99_0x5cda('0x6')]>0x0){_0x355b7a[a99_0x5cda('0x1c')][a99_0x5cda('0x7')]=_0x355b7a[a99_0x5cda('0x5')][0x0]['id'];}this[a99_0x5cda('0x3')][a99_0x5cda('0x15')](_0x355b7a[a99_0x5cda('0xa')]['id'])['then'](_0x2ed988=>{if(_0x2ed988==null)return _0x273eec[a99_0x5cda('0x11')]({'success':!![],'data':_0x2ed988});_0x2ed988[a99_0x5cda('0x29')]()['then'](function(_0x451a93){const _0x32c01a=this[a99_0x5cda('0x4')]?sequelize_utils_1[a99_0x5cda('0xc')]['toJSONLocalizedOnly'](_0x2ed988,_0x355b7a[a99_0x5cda('0xe')]['lang']):_0x2ed988;return _0x273eec[a99_0x5cda('0x11')]({'success':!![],'data':_0x32c01a});})[a99_0x5cda('0x12')](_0xd96e94=>{return _0x273eec[a99_0x5cda('0x13')](0x1f4)[a99_0x5cda('0x16')]({'success':![],'data':_0xd96e94[a99_0x5cda('0x14')]});});})[a99_0x5cda('0x12')](_0x539e0f=>{return _0x273eec['status'](0x1f4)['send']({'success':![],'data':_0x539e0f[a99_0x5cda('0x14')]});});}}exports[a99_0x5cda('0xc')]=CrudUtils;