var a99_0x2bbe=['then','save','body','create','dataValues','updated_by_user_id','updated_at','findOneAndUpdate','update','updateOrCreate','findOne','bind','toJSON','findOrCreate','remove','destroy','__importDefault','defineProperty','__esModule','model','user','length','findAll','created_by_user_id','deleted_by_user_id','created_at','deleted_at','params','toJSONLocalizedOnly','headers','default','json','catch','status','send','stack','findById','authentication\x20failed','i18n','lang','findByUUId','uuid'];(function(_0x342c27,_0x30a1df){var _0x1f07c3=function(_0x4c3813){while(--_0x4c3813){_0x342c27['push'](_0x342c27['shift']());}};_0x1f07c3(++_0x30a1df);}(a99_0x2bbe,0xe2));var a99_0xfa80=function(_0xae9139,_0x1e9519){_0xae9139=_0xae9139-0x0;var _0x42f4e4=a99_0x2bbe[_0xae9139];return _0x42f4e4;};'use strict';var __importDefault=this&&this[a99_0xfa80('0x0')]||function(_0xcab51a){return _0xcab51a&&_0xcab51a['__esModule']?_0xcab51a:{'default':_0xcab51a};};Object[a99_0xfa80('0x1')](exports,a99_0xfa80('0x2'),{'value':!![]});const sequelize_utils_1=__importDefault(require('./sequelize-utils'));class CrudUtils{constructor(_0x15ea8f,_0xb74fb8){this[a99_0xfa80('0x3')]=_0x15ea8f;this['i18n']=_0xb74fb8;}['find'](_0x4a1f4b,_0x993839,_0x209faa,_0x1e559e=![],_0x1de4d2=[]){if(!_0x4a1f4b[a99_0xfa80('0x4')]||_0x4a1f4b['user'][a99_0xfa80('0x5')]==0x0){}return this[a99_0xfa80('0x3')][a99_0xfa80('0x6')]({'attributes':{'exclude':_0x1e559e?[]:['id',a99_0xfa80('0x7'),'updated_by_user_id',a99_0xfa80('0x8'),a99_0xfa80('0x9'),'updated_at',a99_0xfa80('0xa')]},'where':_0x4a1f4b[a99_0xfa80('0xb')],'include':_0x1de4d2})['then'](_0x267a1c=>{const _0x5c6f6e=this['i18n']?sequelize_utils_1['default'][a99_0xfa80('0xc')](_0x267a1c,_0x4a1f4b[a99_0xfa80('0xd')]['lang']):sequelize_utils_1[a99_0xfa80('0xe')]['toJSON'](_0x267a1c);if(_0x993839){return _0x993839[a99_0xfa80('0xf')]({'success':!![],'data':_0x5c6f6e});}else{return _0x5c6f6e;}})[a99_0xfa80('0x10')](_0x279de6=>{if(_0x993839){return _0x993839[a99_0xfa80('0x11')](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x279de6[a99_0xfa80('0x13')]});}else{return _0x279de6[a99_0xfa80('0x13')];}});}[a99_0xfa80('0x14')](_0x6567d5,_0x3674dd,_0x213975){if(!_0x6567d5[a99_0xfa80('0x4')]||_0x6567d5['user']['length']==0x0){return _0x3674dd['status'](0x191)[a99_0xfa80('0x12')]({'success':![],'data':a99_0xfa80('0x15')});}this[a99_0xfa80('0x3')][a99_0xfa80('0x14')](_0x6567d5[a99_0xfa80('0xb')]['id'])['then'](_0x1d10ea=>{const _0x4c6860=this[a99_0xfa80('0x16')]?sequelize_utils_1[a99_0xfa80('0xe')][a99_0xfa80('0xc')](_0x1d10ea,_0x6567d5[a99_0xfa80('0xd')][a99_0xfa80('0x17')]):_0x1d10ea;return _0x3674dd[a99_0xfa80('0xf')]({'success':!![],'data':_0x4c6860});})['catch'](_0x3af021=>{return _0x3674dd[a99_0xfa80('0x11')](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x3af021[a99_0xfa80('0x13')]});});}[a99_0xfa80('0x18')](_0x5777f9,_0x19c832,_0x3561b2){if(!_0x5777f9[a99_0xfa80('0x4')]||_0x5777f9['user'][a99_0xfa80('0x5')]==0x0){}return this[a99_0xfa80('0x3')][a99_0xfa80('0x6')]({'where':{'uuid':_0x5777f9[a99_0xfa80('0xb')][a99_0xfa80('0x19')]}})[a99_0xfa80('0x1a')](_0x1e089c=>{const _0x1b3549=this[a99_0xfa80('0x16')]?sequelize_utils_1[a99_0xfa80('0xe')][a99_0xfa80('0xc')](_0x1e089c,_0x5777f9[a99_0xfa80('0xd')][a99_0xfa80('0x17')]):sequelize_utils_1[a99_0xfa80('0xe')]['toJSON'](_0x1e089c);return _0x1b3549;})[a99_0xfa80('0x10')](_0x632e14=>{return _0x632e14[a99_0xfa80('0x13')];});}[a99_0xfa80('0x1b')](_0x1add5b,_0x59be3c,_0x44a932){if(!_0x1add5b[a99_0xfa80('0x4')]||_0x1add5b[a99_0xfa80('0x4')][a99_0xfa80('0x5')]==0x0){}if(_0x1add5b[a99_0xfa80('0x4')]&&_0x1add5b[a99_0xfa80('0x4')][a99_0xfa80('0x5')]>0x0){_0x1add5b[a99_0xfa80('0x1c')][a99_0xfa80('0x7')]=_0x1add5b['user'][0x0]['id'];}return this[a99_0xfa80('0x3')][a99_0xfa80('0x1d')](_0x1add5b[a99_0xfa80('0x1c')],this[a99_0xfa80('0x16')]?{'language_id':_0x1add5b[a99_0xfa80('0xd')][a99_0xfa80('0x17')]}:{})[a99_0xfa80('0x1a')](_0x596fa3=>{const _0x3507eb=this[a99_0xfa80('0x16')]?sequelize_utils_1[a99_0xfa80('0xe')][a99_0xfa80('0xc')](_0x596fa3,_0x1add5b[a99_0xfa80('0xd')][a99_0xfa80('0x17')]):_0x596fa3;delete _0x3507eb[a99_0xfa80('0x1e')]['id'];delete _0x3507eb[a99_0xfa80('0x1e')]['created_by_user_id'];delete _0x3507eb[a99_0xfa80('0x1e')][a99_0xfa80('0x1f')];delete _0x3507eb[a99_0xfa80('0x1e')][a99_0xfa80('0x8')];delete _0x3507eb['dataValues'][a99_0xfa80('0x9')];delete _0x3507eb[a99_0xfa80('0x1e')][a99_0xfa80('0x20')];delete _0x3507eb[a99_0xfa80('0x1e')][a99_0xfa80('0xa')];if(_0x59be3c){return _0x59be3c[a99_0xfa80('0xf')]({'success':!![],'data':_0x3507eb});}else{return _0x3507eb;}})['catch'](_0x2d5eb0=>{if(_0x59be3c){return _0x59be3c[a99_0xfa80('0x11')](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x2d5eb0[a99_0xfa80('0x13')]});}else{return _0x2d5eb0[a99_0xfa80('0x13')];}});}[a99_0xfa80('0x21')](_0x1aeaca,_0x3829a1,_0xedcb47){if(!_0x1aeaca[a99_0xfa80('0x4')]||_0x1aeaca[a99_0xfa80('0x4')][a99_0xfa80('0x5')]==0x0){}if(_0x1aeaca['user']&&_0x1aeaca[a99_0xfa80('0x4')][a99_0xfa80('0x5')]>0x0){}this[a99_0xfa80('0x3')]['findByPk'](_0x1aeaca[a99_0xfa80('0x1c')]['id'])[a99_0xfa80('0x1a')](_0x2b65d1=>{if(_0x2b65d1==null)return _0x3829a1[a99_0xfa80('0xf')]({'success':!![],'data':_0x2b65d1});_0x2b65d1[a99_0xfa80('0x22')](_0x1aeaca[a99_0xfa80('0x1c')],{'language_id':_0x1aeaca[a99_0xfa80('0xd')][a99_0xfa80('0x17')]})[a99_0xfa80('0x1a')](function(_0x3dceac){const _0x1da028=this[a99_0xfa80('0x16')]?sequelize_utils_1[a99_0xfa80('0xe')]['toJSONLocalizedOnly'](_0x2b65d1,_0x1aeaca['headers'][a99_0xfa80('0x17')]):_0x2b65d1;return _0x3829a1[a99_0xfa80('0xf')]({'success':!![],'data':_0x1da028});}['bind'](this))[a99_0xfa80('0x10')](_0x514d25=>{return _0x3829a1['status'](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x514d25[a99_0xfa80('0x13')]});});})[a99_0xfa80('0x10')](_0x487db9=>{return _0x3829a1[a99_0xfa80('0x11')](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x487db9[a99_0xfa80('0x13')]});});}[a99_0xfa80('0x23')](_0x2c13b3,_0x46bcd3,_0x8ebfdc,_0x2dc581=![]){if(!_0x2c13b3[a99_0xfa80('0x4')]||_0x2c13b3[a99_0xfa80('0x4')][a99_0xfa80('0x5')]==0x0){}if(_0x2c13b3[a99_0xfa80('0x4')]&&_0x2c13b3[a99_0xfa80('0x4')]['length']>0x0){}return this['model'][a99_0xfa80('0x24')]({'where':_0x2c13b3[a99_0xfa80('0xb')]})[a99_0xfa80('0x1a')](function(_0x40907){if(_0x40907){return _0x40907[a99_0xfa80('0x22')](_0x2c13b3[a99_0xfa80('0x1c')])[a99_0xfa80('0x1a')](function(_0x13a039){const _0x4c1056=_0x13a039[a99_0xfa80('0x1e')];if(_0x2dc581){delete _0x4c1056['id'];}if(_0x46bcd3){return _0x46bcd3[a99_0xfa80('0xf')]({'success':!![],'data':_0x4c1056});}else{return _0x4c1056;}}[a99_0xfa80('0x25')](this));}else{return this[a99_0xfa80('0x3')]['create'](_0x2c13b3['body'])[a99_0xfa80('0x1a')](function(_0x3cf293){if(_0x46bcd3){return _0x46bcd3[a99_0xfa80('0xf')]({'success':!![],'data':_0x3cf293[a99_0xfa80('0x26')]()});}else{return _0x3cf293;}});}}['bind'](this))['catch'](_0x468ebf=>{if(_0x46bcd3){return _0x46bcd3['status'](0x1f4)['send']({'success':![],'data':_0x468ebf['stack']});}else{return _0x468ebf[a99_0xfa80('0x13')];}});}['findOrCreate'](_0x301d7a,_0x2403fa,_0x505993){if(!_0x301d7a[a99_0xfa80('0x4')]||_0x301d7a[a99_0xfa80('0x4')][a99_0xfa80('0x5')]==0x0){}if(_0x301d7a[a99_0xfa80('0x4')]&&_0x301d7a[a99_0xfa80('0x4')][a99_0xfa80('0x5')]>0x0){}return this[a99_0xfa80('0x3')][a99_0xfa80('0x27')]({'where':{'uuid':_0x301d7a[a99_0xfa80('0x1c')][a99_0xfa80('0x19')]},'defaults':_0x301d7a[a99_0xfa80('0x1c')]})[a99_0xfa80('0x1a')]((_0xbfaf7f,_0x4f5717)=>{if(_0x4f5717){}else{}return _0x2403fa[a99_0xfa80('0xf')]({'success':!![],'data':_0xbfaf7f});})[a99_0xfa80('0x10')](_0x2e83b2=>{return _0x2403fa['status'](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x2e83b2[a99_0xfa80('0x13')]});});}[a99_0xfa80('0x28')](_0x5597b6,_0x1367b3,_0x344dd1){if(!_0x5597b6['user']||_0x5597b6[a99_0xfa80('0x4')][a99_0xfa80('0x5')]==0x0){return _0x1367b3[a99_0xfa80('0x11')](0x191)['send']({'success':![],'data':a99_0xfa80('0x15')});}if(_0x5597b6[a99_0xfa80('0x4')]&&_0x5597b6[a99_0xfa80('0x4')][a99_0xfa80('0x5')]>0x0){_0x5597b6[a99_0xfa80('0x1c')]['created_by_user_id']=_0x5597b6[a99_0xfa80('0x4')][0x0]['id'];}this[a99_0xfa80('0x3')][a99_0xfa80('0x14')](_0x5597b6[a99_0xfa80('0xb')]['id'])[a99_0xfa80('0x1a')](_0x560cdd=>{if(_0x560cdd==null)return _0x1367b3['json']({'success':!![],'data':_0x560cdd});_0x560cdd[a99_0xfa80('0x29')]()[a99_0xfa80('0x1a')](function(_0x51be37){const _0x29355d=this[a99_0xfa80('0x16')]?sequelize_utils_1[a99_0xfa80('0xe')]['toJSONLocalizedOnly'](_0x560cdd,_0x5597b6[a99_0xfa80('0xd')]['lang']):_0x560cdd;return _0x1367b3[a99_0xfa80('0xf')]({'success':!![],'data':_0x29355d});})[a99_0xfa80('0x10')](_0x38fdb0=>{return _0x1367b3[a99_0xfa80('0x11')](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x38fdb0[a99_0xfa80('0x13')]});});})['catch'](_0x2f7228=>{return _0x1367b3[a99_0xfa80('0x11')](0x1f4)[a99_0xfa80('0x12')]({'success':![],'data':_0x2f7228['stack']});});}}exports[a99_0xfa80('0xe')]=CrudUtils;