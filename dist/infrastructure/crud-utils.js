var a91_0x57c2=['defineProperty','./sequelize-utils','model','i18n','find','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','default','toJSONLocalizedOnly','json','catch','send','stack','findById','authentication\x20failed','params','then','headers','lang','status','create','dataValues','deleted_at','body','update','remove'];(function(_0x2eb905,_0x109aec){var _0x18f9ed=function(_0x17b6ec){while(--_0x17b6ec){_0x2eb905['push'](_0x2eb905['shift']());}};_0x18f9ed(++_0x109aec);}(a91_0x57c2,0x7c));var a91_0x22ad=function(_0x5b7d70,_0x3a765f){_0x5b7d70=_0x5b7d70-0x0;var _0x27cd64=a91_0x57c2[_0x5b7d70];return _0x27cd64;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4a7260){return _0x4a7260&&_0x4a7260['__esModule']?_0x4a7260:{'default':_0x4a7260};};Object[a91_0x22ad('0x0')](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a91_0x22ad('0x1')));class CrudUtils{constructor(_0x2ba21d,_0x5409c3){this[a91_0x22ad('0x2')]=_0x2ba21d;this[a91_0x22ad('0x3')]=_0x5409c3;}[a91_0x22ad('0x4')](_0x23cc88,_0x454a83,_0x351efa){if(!_0x23cc88[a91_0x22ad('0x5')]||_0x23cc88[a91_0x22ad('0x5')][a91_0x22ad('0x6')]==0x0){}this['model'][a91_0x22ad('0x7')]({'attributes':{'exclude':['id',a91_0x22ad('0x8'),a91_0x22ad('0x9'),a91_0x22ad('0xa'),a91_0x22ad('0xb'),'updated_at','deleted_at']}})['then'](_0x32cdb3=>{const _0x43128c=this[a91_0x22ad('0x3')]?sequelize_utils_1[a91_0x22ad('0xc')][a91_0x22ad('0xd')](_0x32cdb3,_0x23cc88['headers']['lang']):_0x32cdb3;return _0x454a83[a91_0x22ad('0xe')]({'success':!![],'data':_0x43128c});})[a91_0x22ad('0xf')](_0x4ca336=>{return _0x454a83['status'](0x1f4)[a91_0x22ad('0x10')]({'success':![],'data':_0x4ca336[a91_0x22ad('0x11')]});});}[a91_0x22ad('0x12')](_0x5c705a,_0x515eb6,_0x374228){if(!_0x5c705a[a91_0x22ad('0x5')]||_0x5c705a['user'][a91_0x22ad('0x6')]==0x0){return _0x515eb6['status'](0x191)[a91_0x22ad('0x10')]({'success':![],'data':a91_0x22ad('0x13')});}this[a91_0x22ad('0x2')][a91_0x22ad('0x12')](_0x5c705a[a91_0x22ad('0x14')]['id'])[a91_0x22ad('0x15')](_0x4c44bb=>{const _0x4173df=this[a91_0x22ad('0x3')]?sequelize_utils_1['default'][a91_0x22ad('0xd')](_0x4c44bb,_0x5c705a[a91_0x22ad('0x16')][a91_0x22ad('0x17')]):_0x4c44bb;return _0x515eb6[a91_0x22ad('0xe')]({'success':!![],'data':_0x4173df});})['catch'](_0x3a2f18=>{return _0x515eb6[a91_0x22ad('0x18')](0x1f4)[a91_0x22ad('0x10')]({'success':![],'data':_0x3a2f18[a91_0x22ad('0x11')]});});}['save'](_0x20ff39,_0xfc6439,_0x934280){if(!_0x20ff39[a91_0x22ad('0x5')]||_0x20ff39[a91_0x22ad('0x5')][a91_0x22ad('0x6')]==0x0){}if(_0x20ff39[a91_0x22ad('0x5')]&&_0x20ff39['user']['length']>0x0){_0x20ff39['body'][a91_0x22ad('0x8')]=_0x20ff39[a91_0x22ad('0x5')][0x0]['id'];}this['model'][a91_0x22ad('0x19')](_0x20ff39['body'],{'language_id':_0x20ff39['headers'][a91_0x22ad('0x17')]})[a91_0x22ad('0x15')](_0x5d8cb7=>{const _0x431535=this[a91_0x22ad('0x3')]?sequelize_utils_1[a91_0x22ad('0xc')][a91_0x22ad('0xd')](_0x5d8cb7,_0x20ff39[a91_0x22ad('0x16')][a91_0x22ad('0x17')]):_0x5d8cb7;delete _0x431535[a91_0x22ad('0x1a')]['id'];delete _0x431535[a91_0x22ad('0x1a')][a91_0x22ad('0x8')];delete _0x431535[a91_0x22ad('0x1a')][a91_0x22ad('0x9')];delete _0x431535[a91_0x22ad('0x1a')]['deleted_by_user_id'];delete _0x431535[a91_0x22ad('0x1a')][a91_0x22ad('0xb')];delete _0x431535[a91_0x22ad('0x1a')]['updated_at'];delete _0x431535[a91_0x22ad('0x1a')][a91_0x22ad('0x1b')];return _0xfc6439[a91_0x22ad('0xe')]({'success':!![],'data':_0x431535});})[a91_0x22ad('0xf')](_0x2b60d7=>{return _0xfc6439[a91_0x22ad('0x18')](0x1f4)['send']({'success':![],'data':_0x2b60d7[a91_0x22ad('0x11')]});});}['findOneAndUpdate'](_0x14acde,_0x1133a0,_0x147730){if(!_0x14acde[a91_0x22ad('0x5')]||_0x14acde[a91_0x22ad('0x5')][a91_0x22ad('0x6')]==0x0){return _0x1133a0[a91_0x22ad('0x18')](0x191)[a91_0x22ad('0x10')]({'success':![],'data':a91_0x22ad('0x13')});}if(_0x14acde['user']&&_0x14acde[a91_0x22ad('0x5')][a91_0x22ad('0x6')]>0x0){_0x14acde[a91_0x22ad('0x1c')][a91_0x22ad('0x8')]=_0x14acde[a91_0x22ad('0x5')][0x0]['id'];}this['model'][a91_0x22ad('0x12')](_0x14acde[a91_0x22ad('0x14')]['id'])['then'](_0x29cb92=>{if(_0x29cb92==null)return _0x1133a0[a91_0x22ad('0xe')]({'success':!![],'data':_0x29cb92});_0x29cb92[a91_0x22ad('0x1d')](_0x14acde[a91_0x22ad('0x1c')],{'language_id':_0x14acde['headers'][a91_0x22ad('0x17')]})['then'](function(_0x4d1b94){const _0x463bc1=this[a91_0x22ad('0x3')]?sequelize_utils_1[a91_0x22ad('0xc')][a91_0x22ad('0xd')](_0x29cb92,_0x14acde['headers']['lang']):_0x29cb92;return _0x1133a0[a91_0x22ad('0xe')]({'success':!![],'data':_0x463bc1});})[a91_0x22ad('0xf')](_0xa8bb28=>{return _0x1133a0[a91_0x22ad('0x18')](0x1f4)[a91_0x22ad('0x10')]({'success':![],'data':_0xa8bb28[a91_0x22ad('0x11')]});});})['catch'](_0x2b9c5e=>{return _0x1133a0[a91_0x22ad('0x18')](0x1f4)[a91_0x22ad('0x10')]({'success':![],'data':_0x2b9c5e[a91_0x22ad('0x11')]});});}[a91_0x22ad('0x1e')](_0x28ed30,_0xf7d831,_0x6a2893){if(!_0x28ed30[a91_0x22ad('0x5')]||_0x28ed30[a91_0x22ad('0x5')][a91_0x22ad('0x6')]==0x0){return _0xf7d831[a91_0x22ad('0x18')](0x191)[a91_0x22ad('0x10')]({'success':![],'data':'authentication\x20failed'});}if(_0x28ed30['user']&&_0x28ed30[a91_0x22ad('0x5')][a91_0x22ad('0x6')]>0x0){_0x28ed30['body']['created_by_user_id']=_0x28ed30[a91_0x22ad('0x5')][0x0]['id'];}this[a91_0x22ad('0x2')][a91_0x22ad('0x12')](_0x28ed30[a91_0x22ad('0x14')]['id'])[a91_0x22ad('0x15')](_0x26817e=>{if(_0x26817e==null)return _0xf7d831[a91_0x22ad('0xe')]({'success':!![],'data':_0x26817e});_0x26817e['destroy']()['then'](function(_0x407d7e){const _0x596d1b=this['i18n']?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0x26817e,_0x28ed30[a91_0x22ad('0x16')][a91_0x22ad('0x17')]):_0x26817e;return _0xf7d831[a91_0x22ad('0xe')]({'success':!![],'data':_0x596d1b});})['catch'](_0x145320=>{return _0xf7d831['status'](0x1f4)['send']({'success':![],'data':_0x145320[a91_0x22ad('0x11')]});});})[a91_0x22ad('0xf')](_0x257af7=>{return _0xf7d831[a91_0x22ad('0x18')](0x1f4)[a91_0x22ad('0x10')]({'success':![],'data':_0x257af7['stack']});});}}exports[a91_0x22ad('0xc')]=CrudUtils;