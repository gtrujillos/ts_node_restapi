var a99_0xe2d2=['updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','then','default','toJSONLocalizedOnly','headers','lang','status','send','stack','findById','length','authentication\x20failed','params','json','catch','findByUUId','findAll','uuid','toJSON','save','body','dataValues','findOneAndUpdate','findByPk','bind','updateOrCreate','findOne','create','findOrCreate','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','find','user','created_by_user_id'];(function(_0xefb0bc,_0x47d1bd){var _0x268d87=function(_0x4c4ab8){while(--_0x4c4ab8){_0xefb0bc['push'](_0xefb0bc['shift']());}};_0x268d87(++_0x47d1bd);}(a99_0xe2d2,0xf3));var a99_0x45d8=function(_0x25ccba,_0x85d246){_0x25ccba=_0x25ccba-0x0;var _0x4cd567=a99_0xe2d2[_0x25ccba];return _0x4cd567;};'use strict';var __importDefault=this&&this[a99_0x45d8('0x0')]||function(_0x18eaa1){return _0x18eaa1&&_0x18eaa1[a99_0x45d8('0x1')]?_0x18eaa1:{'default':_0x18eaa1};};Object[a99_0x45d8('0x2')](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x45d8('0x3')));class CrudUtils{constructor(_0x54cf4e,_0x195db2){this[a99_0x45d8('0x4')]=_0x54cf4e;this[a99_0x45d8('0x5')]=_0x195db2;}[a99_0x45d8('0x6')](_0x3774e7,_0x87b9d,_0x3539da,_0x10c709=![],_0x480eca=[]){if(!_0x3774e7[a99_0x45d8('0x7')]||_0x3774e7['user']['length']==0x0){}return this[a99_0x45d8('0x4')]['findAll']({'attributes':{'exclude':_0x10c709?[]:['id',a99_0x45d8('0x8'),a99_0x45d8('0x9'),a99_0x45d8('0xa'),a99_0x45d8('0xb'),a99_0x45d8('0xc'),a99_0x45d8('0xd')]},'where':_0x3774e7['params'],'include':_0x480eca})[a99_0x45d8('0xe')](_0x5e12ae=>{const _0xe7bfd3=this[a99_0x45d8('0x5')]?sequelize_utils_1[a99_0x45d8('0xf')][a99_0x45d8('0x10')](_0x5e12ae,_0x3774e7[a99_0x45d8('0x11')][a99_0x45d8('0x12')]):sequelize_utils_1[a99_0x45d8('0xf')]['toJSON'](_0x5e12ae);if(_0x87b9d){return _0x87b9d['json']({'success':!![],'data':_0xe7bfd3});}else{return _0xe7bfd3;}})['catch'](_0xb8c5e7=>{if(_0x87b9d){return _0x87b9d[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0xb8c5e7['stack']});}else{return _0xb8c5e7[a99_0x45d8('0x15')];}});}[a99_0x45d8('0x16')](_0x35dcd6,_0x536299,_0x56ed11){if(!_0x35dcd6[a99_0x45d8('0x7')]||_0x35dcd6[a99_0x45d8('0x7')][a99_0x45d8('0x17')]==0x0){return _0x536299['status'](0x191)[a99_0x45d8('0x14')]({'success':![],'data':a99_0x45d8('0x18')});}this[a99_0x45d8('0x4')][a99_0x45d8('0x16')](_0x35dcd6[a99_0x45d8('0x19')]['id'])['then'](_0x38de9d=>{const _0xb2880e=this['i18n']?sequelize_utils_1[a99_0x45d8('0xf')][a99_0x45d8('0x10')](_0x38de9d,_0x35dcd6['headers'][a99_0x45d8('0x12')]):_0x38de9d;return _0x536299[a99_0x45d8('0x1a')]({'success':!![],'data':_0xb2880e});})[a99_0x45d8('0x1b')](_0xc6d31b=>{return _0x536299[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0xc6d31b[a99_0x45d8('0x15')]});});}[a99_0x45d8('0x1c')](_0x58cd39,_0x378fb8,_0x37e75e){if(!_0x58cd39[a99_0x45d8('0x7')]||_0x58cd39[a99_0x45d8('0x7')]['length']==0x0){}return this[a99_0x45d8('0x4')][a99_0x45d8('0x1d')]({'where':{'uuid':_0x58cd39['params'][a99_0x45d8('0x1e')]}})[a99_0x45d8('0xe')](_0x10c546=>{const _0xa2f082=this[a99_0x45d8('0x5')]?sequelize_utils_1[a99_0x45d8('0xf')][a99_0x45d8('0x10')](_0x10c546,_0x58cd39['headers'][a99_0x45d8('0x12')]):sequelize_utils_1[a99_0x45d8('0xf')][a99_0x45d8('0x1f')](_0x10c546);return _0xa2f082;})['catch'](_0x33da22=>{return _0x33da22[a99_0x45d8('0x15')];});}[a99_0x45d8('0x20')](_0x41a138,_0x2dc2dc,_0x7a3be1){if(!_0x41a138['user']||_0x41a138['user'][a99_0x45d8('0x17')]==0x0){}if(_0x41a138[a99_0x45d8('0x7')]&&_0x41a138[a99_0x45d8('0x7')]['length']>0x0){_0x41a138[a99_0x45d8('0x21')][a99_0x45d8('0x8')]=_0x41a138['user'][0x0]['id'];}return this[a99_0x45d8('0x4')]['create'](_0x41a138[a99_0x45d8('0x21')],this['i18n']?{'language_id':_0x41a138[a99_0x45d8('0x11')][a99_0x45d8('0x12')]}:{})['then'](_0x50bec5=>{const _0x5d114a=this[a99_0x45d8('0x5')]?sequelize_utils_1[a99_0x45d8('0xf')][a99_0x45d8('0x10')](_0x50bec5,_0x41a138[a99_0x45d8('0x11')]['lang']):_0x50bec5;delete _0x5d114a['dataValues']['id'];delete _0x5d114a['dataValues'][a99_0x45d8('0x8')];delete _0x5d114a[a99_0x45d8('0x22')]['updated_by_user_id'];delete _0x5d114a[a99_0x45d8('0x22')][a99_0x45d8('0xa')];delete _0x5d114a[a99_0x45d8('0x22')][a99_0x45d8('0xb')];delete _0x5d114a[a99_0x45d8('0x22')]['updated_at'];delete _0x5d114a[a99_0x45d8('0x22')][a99_0x45d8('0xd')];if(_0x2dc2dc){return _0x2dc2dc[a99_0x45d8('0x1a')]({'success':!![],'data':_0x5d114a});}else{return _0x5d114a;}})[a99_0x45d8('0x1b')](_0x216689=>{if(_0x2dc2dc){return _0x2dc2dc[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0x216689[a99_0x45d8('0x15')]});}else{return _0x216689['stack'];}});}[a99_0x45d8('0x23')](_0x5d97de,_0x47d1db,_0x2430c3){if(!_0x5d97de[a99_0x45d8('0x7')]||_0x5d97de['user']['length']==0x0){}if(_0x5d97de['user']&&_0x5d97de[a99_0x45d8('0x7')][a99_0x45d8('0x17')]>0x0){}this['model'][a99_0x45d8('0x24')](_0x5d97de['body']['id'])[a99_0x45d8('0xe')](_0xfc1779=>{if(_0xfc1779==null)return _0x47d1db[a99_0x45d8('0x1a')]({'success':!![],'data':_0xfc1779});_0xfc1779['update'](_0x5d97de[a99_0x45d8('0x21')],{'language_id':_0x5d97de['headers'][a99_0x45d8('0x12')]})[a99_0x45d8('0xe')](function(_0x524281){const _0x2e66a1=this[a99_0x45d8('0x5')]?sequelize_utils_1[a99_0x45d8('0xf')][a99_0x45d8('0x10')](_0xfc1779,_0x5d97de[a99_0x45d8('0x11')][a99_0x45d8('0x12')]):_0xfc1779;return _0x47d1db[a99_0x45d8('0x1a')]({'success':!![],'data':_0x2e66a1});}[a99_0x45d8('0x25')](this))['catch'](_0x5507be=>{return _0x47d1db[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0x5507be[a99_0x45d8('0x15')]});});})[a99_0x45d8('0x1b')](_0xe59e=>{return _0x47d1db[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0xe59e[a99_0x45d8('0x15')]});});}[a99_0x45d8('0x26')](_0x4144ef,_0x363307,_0x48cb6e,_0xd2c6df=![]){if(!_0x4144ef[a99_0x45d8('0x7')]||_0x4144ef[a99_0x45d8('0x7')][a99_0x45d8('0x17')]==0x0){}if(_0x4144ef[a99_0x45d8('0x7')]&&_0x4144ef[a99_0x45d8('0x7')][a99_0x45d8('0x17')]>0x0){}return this['model'][a99_0x45d8('0x27')]({'where':_0x4144ef[a99_0x45d8('0x19')]})[a99_0x45d8('0xe')](function(_0x1aa62f){if(_0x1aa62f){return _0x1aa62f['update'](_0x4144ef[a99_0x45d8('0x21')])[a99_0x45d8('0xe')](function(_0xb1ed89){const _0x44394d=_0xb1ed89[a99_0x45d8('0x22')];if(_0xd2c6df){delete _0x44394d['id'];}if(_0x363307){return _0x363307['json']({'success':!![],'data':_0x44394d});}else{return _0x44394d;}}[a99_0x45d8('0x25')](this));}else{return this[a99_0x45d8('0x4')][a99_0x45d8('0x28')](_0x4144ef[a99_0x45d8('0x21')])['then'](function(_0xe0207c){if(_0x363307){return _0x363307[a99_0x45d8('0x1a')]({'success':!![],'data':_0xe0207c['toJSON']()});}else{return _0xe0207c;}});}}[a99_0x45d8('0x25')](this))[a99_0x45d8('0x1b')](_0x2513f2=>{if(_0x363307){return _0x363307[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0x2513f2[a99_0x45d8('0x15')]});}else{return _0x2513f2[a99_0x45d8('0x15')];}});}[a99_0x45d8('0x29')](_0x126b1f,_0x3be25e,_0x10604b){if(!_0x126b1f[a99_0x45d8('0x7')]||_0x126b1f[a99_0x45d8('0x7')][a99_0x45d8('0x17')]==0x0){}if(_0x126b1f[a99_0x45d8('0x7')]&&_0x126b1f[a99_0x45d8('0x7')]['length']>0x0){}return this[a99_0x45d8('0x4')][a99_0x45d8('0x29')]({'where':{'uuid':_0x126b1f['body'][a99_0x45d8('0x1e')]},'defaults':_0x126b1f[a99_0x45d8('0x21')]})[a99_0x45d8('0xe')]((_0xec1f4b,_0x1456bc)=>{if(_0x1456bc){}else{}return _0x3be25e['json']({'success':!![],'data':_0xec1f4b});})[a99_0x45d8('0x1b')](_0x477d9c=>{return _0x3be25e[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0x477d9c[a99_0x45d8('0x15')]});});}['remove'](_0x5268f5,_0x572aa8,_0xc29e4a){if(!_0x5268f5[a99_0x45d8('0x7')]||_0x5268f5[a99_0x45d8('0x7')]['length']==0x0){return _0x572aa8[a99_0x45d8('0x13')](0x191)['send']({'success':![],'data':a99_0x45d8('0x18')});}if(_0x5268f5[a99_0x45d8('0x7')]&&_0x5268f5[a99_0x45d8('0x7')][a99_0x45d8('0x17')]>0x0){_0x5268f5[a99_0x45d8('0x21')][a99_0x45d8('0x8')]=_0x5268f5[a99_0x45d8('0x7')][0x0]['id'];}this['model'][a99_0x45d8('0x16')](_0x5268f5['params']['id'])[a99_0x45d8('0xe')](_0x3a55f8=>{if(_0x3a55f8==null)return _0x572aa8[a99_0x45d8('0x1a')]({'success':!![],'data':_0x3a55f8});_0x3a55f8['destroy']()['then'](function(_0x26525e){const _0xe25222=this[a99_0x45d8('0x5')]?sequelize_utils_1['default'][a99_0x45d8('0x10')](_0x3a55f8,_0x5268f5[a99_0x45d8('0x11')][a99_0x45d8('0x12')]):_0x3a55f8;return _0x572aa8['json']({'success':!![],'data':_0xe25222});})[a99_0x45d8('0x1b')](_0x3e0ce2=>{return _0x572aa8[a99_0x45d8('0x13')](0x1f4)['send']({'success':![],'data':_0x3e0ce2['stack']});});})[a99_0x45d8('0x1b')](_0x3561c0=>{return _0x572aa8[a99_0x45d8('0x13')](0x1f4)[a99_0x45d8('0x14')]({'success':![],'data':_0x3561c0[a99_0x45d8('0x15')]});});}}exports[a99_0x45d8('0xf')]=CrudUtils;