var a99_0x4399=['destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','count','user','params','then','json','send','stack','findAll','created_by_user_id','created_at','updated_at','default','toJSONLocalizedOnly','headers','lang','findById','length','status','authentication\x20failed','uuid','catch','save','body','create','dataValues','updated_by_user_id','deleted_by_user_id','deleted_at','findOneAndUpdate','update','updateOrCreate','toJSON','bind','remove'];(function(_0x5a4195,_0x19f260){var _0x2a8386=function(_0x259506){while(--_0x259506){_0x5a4195['push'](_0x5a4195['shift']());}};_0x2a8386(++_0x19f260);}(a99_0x4399,0x1c4));var a99_0x4842=function(_0x68b9ac,_0x22c923){_0x68b9ac=_0x68b9ac-0x0;var _0x4ab14e=a99_0x4399[_0x68b9ac];return _0x4ab14e;};'use strict';var __importDefault=this&&this[a99_0x4842('0x0')]||function(_0x446bb2){return _0x446bb2&&_0x446bb2[a99_0x4842('0x1')]?_0x446bb2:{'default':_0x446bb2};};Object[a99_0x4842('0x2')](exports,a99_0x4842('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x4842('0x3')));class CrudUtils{constructor(_0x71224b,_0x596197){this[a99_0x4842('0x4')]=_0x71224b;this[a99_0x4842('0x5')]=_0x596197;}[a99_0x4842('0x6')](_0x404f66,_0x499a2e,_0x3f1a11){if(!_0x404f66[a99_0x4842('0x7')]||_0x404f66[a99_0x4842('0x7')]['length']==0x0){}return this[a99_0x4842('0x4')]['count']({'where':_0x404f66[a99_0x4842('0x8')]})[a99_0x4842('0x9')](_0x654972=>{const _0x51ac07=_0x654972;if(_0x499a2e){return _0x499a2e[a99_0x4842('0xa')]({'success':!![],'data':{'total':_0x654972}});}else{return _0x51ac07;}})['catch'](_0x3bf907=>{if(_0x499a2e){return _0x499a2e['status'](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x3bf907[a99_0x4842('0xc')]});}else{return _0x3bf907[a99_0x4842('0xc')];}});}['find'](_0x323e1a,_0x53beaf,_0xbbac35,_0x595161=![],_0x253ed1=[]){if(!_0x323e1a[a99_0x4842('0x7')]||_0x323e1a[a99_0x4842('0x7')]['length']==0x0){}return this['model'][a99_0x4842('0xd')]({'attributes':{'exclude':_0x595161?[]:['id',a99_0x4842('0xe'),'updated_by_user_id','deleted_by_user_id',a99_0x4842('0xf'),a99_0x4842('0x10'),'deleted_at']},'where':_0x323e1a[a99_0x4842('0x8')],'include':_0x253ed1})[a99_0x4842('0x9')](_0x235270=>{const _0x33b105=this[a99_0x4842('0x5')]?sequelize_utils_1[a99_0x4842('0x11')][a99_0x4842('0x12')](_0x235270,_0x323e1a[a99_0x4842('0x13')][a99_0x4842('0x14')]):sequelize_utils_1[a99_0x4842('0x11')]['toJSON'](_0x235270);if(_0x53beaf){return _0x53beaf[a99_0x4842('0xa')]({'success':!![],'data':_0x33b105});}else{return _0x33b105;}})['catch'](_0x47622c=>{if(_0x53beaf){return _0x53beaf['status'](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x47622c[a99_0x4842('0xc')]});}else{return _0x47622c[a99_0x4842('0xc')];}});}[a99_0x4842('0x15')](_0xf27ff7,_0x40c11a,_0x469d5){if(!_0xf27ff7[a99_0x4842('0x7')]||_0xf27ff7[a99_0x4842('0x7')][a99_0x4842('0x16')]==0x0){return _0x40c11a[a99_0x4842('0x17')](0x191)[a99_0x4842('0xb')]({'success':![],'data':a99_0x4842('0x18')});}this[a99_0x4842('0x4')][a99_0x4842('0x15')](_0xf27ff7['params']['id'])['then'](_0x379be1=>{const _0x2c8e87=this[a99_0x4842('0x5')]?sequelize_utils_1[a99_0x4842('0x11')][a99_0x4842('0x12')](_0x379be1,_0xf27ff7[a99_0x4842('0x13')][a99_0x4842('0x14')]):_0x379be1;return _0x40c11a[a99_0x4842('0xa')]({'success':!![],'data':_0x2c8e87});})['catch'](_0x5382c4=>{return _0x40c11a[a99_0x4842('0x17')](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x5382c4['stack']});});}['findByUUId'](_0x1abc5d,_0x2e8bc4,_0xec450d){if(!_0x1abc5d[a99_0x4842('0x7')]||_0x1abc5d[a99_0x4842('0x7')]['length']==0x0){}return this[a99_0x4842('0x4')][a99_0x4842('0xd')]({'where':{'uuid':_0x1abc5d[a99_0x4842('0x8')][a99_0x4842('0x19')]}})[a99_0x4842('0x9')](_0x57ec90=>{const _0x38b902=this['i18n']?sequelize_utils_1[a99_0x4842('0x11')][a99_0x4842('0x12')](_0x57ec90,_0x1abc5d[a99_0x4842('0x13')][a99_0x4842('0x14')]):sequelize_utils_1[a99_0x4842('0x11')]['toJSON'](_0x57ec90);return _0x38b902;})[a99_0x4842('0x1a')](_0x44789b=>{return _0x44789b['stack'];});}[a99_0x4842('0x1b')](_0x7bfaed,_0x125bcb,_0x385c5c){if(!_0x7bfaed[a99_0x4842('0x7')]||_0x7bfaed[a99_0x4842('0x7')][a99_0x4842('0x16')]==0x0){}if(_0x7bfaed[a99_0x4842('0x7')]&&_0x7bfaed[a99_0x4842('0x7')]['length']>0x0){_0x7bfaed[a99_0x4842('0x1c')][a99_0x4842('0xe')]=_0x7bfaed[a99_0x4842('0x7')][0x0]['id'];}return this[a99_0x4842('0x4')][a99_0x4842('0x1d')](_0x7bfaed[a99_0x4842('0x1c')],this[a99_0x4842('0x5')]?{'language_id':_0x7bfaed['headers'][a99_0x4842('0x14')]}:{})[a99_0x4842('0x9')](_0x708231=>{const _0x462a8e=this[a99_0x4842('0x5')]?sequelize_utils_1[a99_0x4842('0x11')][a99_0x4842('0x12')](_0x708231,_0x7bfaed['headers'][a99_0x4842('0x14')]):_0x708231;delete _0x462a8e[a99_0x4842('0x1e')]['id'];delete _0x462a8e[a99_0x4842('0x1e')]['created_by_user_id'];delete _0x462a8e[a99_0x4842('0x1e')][a99_0x4842('0x1f')];delete _0x462a8e['dataValues'][a99_0x4842('0x20')];delete _0x462a8e[a99_0x4842('0x1e')][a99_0x4842('0xf')];delete _0x462a8e[a99_0x4842('0x1e')][a99_0x4842('0x10')];delete _0x462a8e[a99_0x4842('0x1e')][a99_0x4842('0x21')];if(_0x125bcb){return _0x125bcb[a99_0x4842('0xa')]({'success':!![],'data':_0x462a8e});}else{return _0x462a8e;}})[a99_0x4842('0x1a')](_0x10d43e=>{if(_0x125bcb){return _0x125bcb[a99_0x4842('0x17')](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x10d43e[a99_0x4842('0xc')]});}else{return _0x10d43e['stack'];}});}[a99_0x4842('0x22')](_0x2b742f,_0x214994,_0x20a1a0){if(!_0x2b742f[a99_0x4842('0x7')]||_0x2b742f[a99_0x4842('0x7')][a99_0x4842('0x16')]==0x0){}if(_0x2b742f[a99_0x4842('0x7')]&&_0x2b742f[a99_0x4842('0x7')][a99_0x4842('0x16')]>0x0){}this[a99_0x4842('0x4')]['findByPk'](_0x2b742f['body']['id'])['then'](_0x28a774=>{if(_0x28a774==null)return _0x214994[a99_0x4842('0xa')]({'success':!![],'data':_0x28a774});_0x28a774[a99_0x4842('0x23')](_0x2b742f[a99_0x4842('0x1c')],{'language_id':_0x2b742f[a99_0x4842('0x13')][a99_0x4842('0x14')]})[a99_0x4842('0x9')](function(_0x313051){const _0x22f989=this['i18n']?sequelize_utils_1[a99_0x4842('0x11')][a99_0x4842('0x12')](_0x28a774,_0x2b742f[a99_0x4842('0x13')][a99_0x4842('0x14')]):_0x28a774;return _0x214994[a99_0x4842('0xa')]({'success':!![],'data':_0x22f989});}['bind'](this))[a99_0x4842('0x1a')](_0x1bdcb3=>{return _0x214994[a99_0x4842('0x17')](0x1f4)['send']({'success':![],'data':_0x1bdcb3['stack']});});})[a99_0x4842('0x1a')](_0x157b90=>{return _0x214994[a99_0x4842('0x17')](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x157b90[a99_0x4842('0xc')]});});}[a99_0x4842('0x24')](_0x4b7d15,_0x2b1c93,_0x38b2d5,_0x32422c=![]){if(!_0x4b7d15['user']||_0x4b7d15[a99_0x4842('0x7')][a99_0x4842('0x16')]==0x0){}if(_0x4b7d15[a99_0x4842('0x7')]&&_0x4b7d15['user']['length']>0x0){}return this[a99_0x4842('0x4')]['findOne']({'where':_0x4b7d15[a99_0x4842('0x8')]})[a99_0x4842('0x9')](function(_0x1cc7cc){if(_0x1cc7cc){return _0x1cc7cc[a99_0x4842('0x23')](_0x4b7d15[a99_0x4842('0x1c')])['then'](function(_0x2a25da){const _0x2809db=_0x2a25da[a99_0x4842('0x1e')];if(_0x32422c){delete _0x2809db['id'];}if(_0x2b1c93){return _0x2b1c93['json']({'success':!![],'data':_0x2809db});}else{return _0x2809db;}}['bind'](this));}else{return this['model'][a99_0x4842('0x1d')](_0x4b7d15[a99_0x4842('0x1c')])['then'](function(_0x4fc03d){if(_0x2b1c93){return _0x2b1c93[a99_0x4842('0xa')]({'success':!![],'data':_0x4fc03d[a99_0x4842('0x25')]()});}else{return _0x4fc03d;}});}}[a99_0x4842('0x26')](this))[a99_0x4842('0x1a')](_0x1cf5b0=>{if(_0x2b1c93){return _0x2b1c93[a99_0x4842('0x17')](0x1f4)['send']({'success':![],'data':_0x1cf5b0['stack']});}else{return _0x1cf5b0[a99_0x4842('0xc')];}});}['findOrCreate'](_0x5db577,_0x2bb60d,_0x3c1933){if(!_0x5db577[a99_0x4842('0x7')]||_0x5db577[a99_0x4842('0x7')][a99_0x4842('0x16')]==0x0){}if(_0x5db577[a99_0x4842('0x7')]&&_0x5db577[a99_0x4842('0x7')]['length']>0x0){}return this[a99_0x4842('0x4')]['findOrCreate']({'where':{'uuid':_0x5db577[a99_0x4842('0x1c')][a99_0x4842('0x19')]},'defaults':_0x5db577[a99_0x4842('0x1c')]})[a99_0x4842('0x9')]((_0x5009f2,_0x170d8b)=>{if(_0x170d8b){}else{}return _0x2bb60d['json']({'success':!![],'data':_0x5009f2});})[a99_0x4842('0x1a')](_0x34718b=>{return _0x2bb60d[a99_0x4842('0x17')](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x34718b['stack']});});}[a99_0x4842('0x27')](_0x500e6d,_0x3c11ed,_0x5169af){if(!_0x500e6d['user']||_0x500e6d['user'][a99_0x4842('0x16')]==0x0){return _0x3c11ed[a99_0x4842('0x17')](0x191)[a99_0x4842('0xb')]({'success':![],'data':'authentication\x20failed'});}if(_0x500e6d[a99_0x4842('0x7')]&&_0x500e6d[a99_0x4842('0x7')][a99_0x4842('0x16')]>0x0){_0x500e6d[a99_0x4842('0x1c')][a99_0x4842('0xe')]=_0x500e6d[a99_0x4842('0x7')][0x0]['id'];}this[a99_0x4842('0x4')]['findById'](_0x500e6d[a99_0x4842('0x8')]['id'])[a99_0x4842('0x9')](_0x401701=>{if(_0x401701==null)return _0x3c11ed[a99_0x4842('0xa')]({'success':!![],'data':_0x401701});_0x401701[a99_0x4842('0x28')]()[a99_0x4842('0x9')](function(_0x253d6e){const _0x128c7e=this['i18n']?sequelize_utils_1[a99_0x4842('0x11')][a99_0x4842('0x12')](_0x401701,_0x500e6d[a99_0x4842('0x13')][a99_0x4842('0x14')]):_0x401701;return _0x3c11ed[a99_0x4842('0xa')]({'success':!![],'data':_0x128c7e});})['catch'](_0x125d08=>{return _0x3c11ed[a99_0x4842('0x17')](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x125d08[a99_0x4842('0xc')]});});})[a99_0x4842('0x1a')](_0x16e8a6=>{return _0x3c11ed[a99_0x4842('0x17')](0x1f4)[a99_0x4842('0xb')]({'success':![],'data':_0x16e8a6['stack']});});}}exports[a99_0x4842('0x11')]=CrudUtils;