var a99_0x3bfe=['length','findAll','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','params','then','default','toJSONLocalizedOnly','headers','toJSON','json','stack','status','send','findById','catch','findByUUId','lang','save','body','created_by_user_id','create','dataValues','findByPk','updateOrCreate','bind','findOrCreate','uuid','destroy','__importDefault','__esModule','model','i18n','find','user'];(function(_0x248b2d,_0x4716b5){var _0x54fc7a=function(_0x566e42){while(--_0x566e42){_0x248b2d['push'](_0x248b2d['shift']());}};_0x54fc7a(++_0x4716b5);}(a99_0x3bfe,0xde));var a99_0x43bf=function(_0xb67384,_0x27295a){_0xb67384=_0xb67384-0x0;var _0x156d7c=a99_0x3bfe[_0xb67384];return _0x156d7c;};'use strict';var __importDefault=this&&this[a99_0x43bf('0x0')]||function(_0x5e8b4b){return _0x5e8b4b&&_0x5e8b4b[a99_0x43bf('0x1')]?_0x5e8b4b:{'default':_0x5e8b4b};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require('./sequelize-utils'));class CrudUtils{constructor(_0x1eee1e,_0xf45ad4){this[a99_0x43bf('0x2')]=_0x1eee1e;this[a99_0x43bf('0x3')]=_0xf45ad4;}[a99_0x43bf('0x4')](_0x2f5d35,_0x52f01f,_0x303118,_0x193cc3=![],_0x2db121=[]){if(!_0x2f5d35[a99_0x43bf('0x5')]||_0x2f5d35[a99_0x43bf('0x5')][a99_0x43bf('0x6')]==0x0){}return this[a99_0x43bf('0x2')][a99_0x43bf('0x7')]({'attributes':{'exclude':_0x193cc3?[]:['id','created_by_user_id',a99_0x43bf('0x8'),a99_0x43bf('0x9'),a99_0x43bf('0xa'),a99_0x43bf('0xb'),a99_0x43bf('0xc')]},'where':_0x2f5d35[a99_0x43bf('0xd')],'include':_0x2db121})[a99_0x43bf('0xe')](_0x48d325=>{const _0x4be4bc=this[a99_0x43bf('0x3')]?sequelize_utils_1[a99_0x43bf('0xf')][a99_0x43bf('0x10')](_0x48d325,_0x2f5d35[a99_0x43bf('0x11')]['lang']):sequelize_utils_1['default'][a99_0x43bf('0x12')](_0x48d325);if(_0x52f01f){return _0x52f01f[a99_0x43bf('0x13')]({'success':!![],'data':_0x4be4bc});}else{return _0x4be4bc;}})['catch'](_0x29ba1c=>{if(_0x52f01f){return _0x52f01f['status'](0x1f4)['send']({'success':![],'data':_0x29ba1c[a99_0x43bf('0x14')]});}else{return _0x29ba1c[a99_0x43bf('0x14')];}});}['findById'](_0x3c4736,_0x37b9b3,_0x19ef37){if(!_0x3c4736['user']||_0x3c4736['user'][a99_0x43bf('0x6')]==0x0){return _0x37b9b3[a99_0x43bf('0x15')](0x191)[a99_0x43bf('0x16')]({'success':![],'data':'authentication\x20failed'});}this[a99_0x43bf('0x2')][a99_0x43bf('0x17')](_0x3c4736[a99_0x43bf('0xd')]['id'])['then'](_0x1cfc52=>{const _0x73ac72=this[a99_0x43bf('0x3')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0x1cfc52,_0x3c4736[a99_0x43bf('0x11')]['lang']):_0x1cfc52;return _0x37b9b3['json']({'success':!![],'data':_0x73ac72});})[a99_0x43bf('0x18')](_0x57674c=>{return _0x37b9b3[a99_0x43bf('0x15')](0x1f4)[a99_0x43bf('0x16')]({'success':![],'data':_0x57674c[a99_0x43bf('0x14')]});});}[a99_0x43bf('0x19')](_0x2f528e,_0x1af4a3,_0x58de44){if(!_0x2f528e[a99_0x43bf('0x5')]||_0x2f528e['user'][a99_0x43bf('0x6')]==0x0){}return this[a99_0x43bf('0x2')][a99_0x43bf('0x7')]({'where':{'uuid':_0x2f528e[a99_0x43bf('0xd')]['uuid']}})[a99_0x43bf('0xe')](_0x16530b=>{const _0x2856ff=this[a99_0x43bf('0x3')]?sequelize_utils_1[a99_0x43bf('0xf')][a99_0x43bf('0x10')](_0x16530b,_0x2f528e[a99_0x43bf('0x11')][a99_0x43bf('0x1a')]):sequelize_utils_1[a99_0x43bf('0xf')]['toJSON'](_0x16530b);return _0x2856ff;})[a99_0x43bf('0x18')](_0x44aac8=>{return _0x44aac8[a99_0x43bf('0x14')];});}[a99_0x43bf('0x1b')](_0x44ca0b,_0x309e21,_0xb60156){if(!_0x44ca0b['user']||_0x44ca0b[a99_0x43bf('0x5')]['length']==0x0){}if(_0x44ca0b[a99_0x43bf('0x5')]&&_0x44ca0b['user'][a99_0x43bf('0x6')]>0x0){_0x44ca0b[a99_0x43bf('0x1c')][a99_0x43bf('0x1d')]=_0x44ca0b['user'][0x0]['id'];}return this[a99_0x43bf('0x2')][a99_0x43bf('0x1e')](_0x44ca0b[a99_0x43bf('0x1c')],this[a99_0x43bf('0x3')]?{'language_id':_0x44ca0b[a99_0x43bf('0x11')]['lang']}:{})[a99_0x43bf('0xe')](_0x3f3690=>{const _0x21e7cd=this[a99_0x43bf('0x3')]?sequelize_utils_1[a99_0x43bf('0xf')][a99_0x43bf('0x10')](_0x3f3690,_0x44ca0b['headers'][a99_0x43bf('0x1a')]):_0x3f3690;delete _0x21e7cd['dataValues']['id'];delete _0x21e7cd[a99_0x43bf('0x1f')]['created_by_user_id'];delete _0x21e7cd[a99_0x43bf('0x1f')][a99_0x43bf('0x8')];delete _0x21e7cd[a99_0x43bf('0x1f')][a99_0x43bf('0x9')];delete _0x21e7cd[a99_0x43bf('0x1f')][a99_0x43bf('0xa')];delete _0x21e7cd['dataValues'][a99_0x43bf('0xb')];delete _0x21e7cd[a99_0x43bf('0x1f')]['deleted_at'];if(_0x309e21){return _0x309e21[a99_0x43bf('0x13')]({'success':!![],'data':_0x21e7cd});}else{return _0x21e7cd;}})[a99_0x43bf('0x18')](_0x38aec7=>{if(_0x309e21){return _0x309e21[a99_0x43bf('0x15')](0x1f4)[a99_0x43bf('0x16')]({'success':![],'data':_0x38aec7['stack']});}else{return _0x38aec7[a99_0x43bf('0x14')];}});}['findOneAndUpdate'](_0x27b5df,_0x269886,_0x1eb341){if(!_0x27b5df[a99_0x43bf('0x5')]||_0x27b5df[a99_0x43bf('0x5')][a99_0x43bf('0x6')]==0x0){}if(_0x27b5df[a99_0x43bf('0x5')]&&_0x27b5df[a99_0x43bf('0x5')][a99_0x43bf('0x6')]>0x0){}this[a99_0x43bf('0x2')][a99_0x43bf('0x20')](_0x27b5df['body']['id'])[a99_0x43bf('0xe')](_0x1e2e69=>{if(_0x1e2e69==null)return _0x269886['json']({'success':!![],'data':_0x1e2e69});_0x1e2e69['update'](_0x27b5df[a99_0x43bf('0x1c')],{'language_id':_0x27b5df[a99_0x43bf('0x11')][a99_0x43bf('0x1a')]})['then'](function(_0x5565db){const _0x16b19d=this['i18n']?sequelize_utils_1[a99_0x43bf('0xf')][a99_0x43bf('0x10')](_0x1e2e69,_0x27b5df[a99_0x43bf('0x11')][a99_0x43bf('0x1a')]):_0x1e2e69;return _0x269886['json']({'success':!![],'data':_0x16b19d});}['bind'](this))[a99_0x43bf('0x18')](_0x1b8c49=>{return _0x269886[a99_0x43bf('0x15')](0x1f4)[a99_0x43bf('0x16')]({'success':![],'data':_0x1b8c49[a99_0x43bf('0x14')]});});})[a99_0x43bf('0x18')](_0x1e54bc=>{return _0x269886[a99_0x43bf('0x15')](0x1f4)[a99_0x43bf('0x16')]({'success':![],'data':_0x1e54bc['stack']});});}[a99_0x43bf('0x21')](_0x468ffa,_0x4fe60b,_0x4c2479,_0x2298d2=![]){if(!_0x468ffa[a99_0x43bf('0x5')]||_0x468ffa['user'][a99_0x43bf('0x6')]==0x0){}if(_0x468ffa[a99_0x43bf('0x5')]&&_0x468ffa[a99_0x43bf('0x5')][a99_0x43bf('0x6')]>0x0){}return this['model']['findOne']({'where':_0x468ffa[a99_0x43bf('0xd')]})['then'](function(_0x1a411c){if(_0x1a411c){return _0x1a411c['update'](_0x468ffa[a99_0x43bf('0x1c')])[a99_0x43bf('0xe')](function(_0x5c0cda){const _0x3bc109=_0x5c0cda[a99_0x43bf('0x1f')];if(_0x2298d2){delete _0x3bc109['id'];}if(_0x4fe60b){return _0x4fe60b[a99_0x43bf('0x13')]({'success':!![],'data':_0x3bc109});}else{return _0x3bc109;}}[a99_0x43bf('0x22')](this));}else{return this[a99_0x43bf('0x2')]['create'](_0x468ffa[a99_0x43bf('0x1c')])['then'](function(_0x47caca){if(_0x4fe60b){return _0x4fe60b['json']({'success':!![],'data':_0x47caca[a99_0x43bf('0x12')]()});}else{return _0x47caca;}});}}[a99_0x43bf('0x22')](this))['catch'](_0x2756d5=>{if(_0x4fe60b){return _0x4fe60b[a99_0x43bf('0x15')](0x1f4)[a99_0x43bf('0x16')]({'success':![],'data':_0x2756d5['stack']});}else{return _0x2756d5[a99_0x43bf('0x14')];}});}['findOrCreate'](_0x1be6ca,_0xc9f123,_0x2846d3){if(!_0x1be6ca['user']||_0x1be6ca['user'][a99_0x43bf('0x6')]==0x0){}if(_0x1be6ca['user']&&_0x1be6ca['user'][a99_0x43bf('0x6')]>0x0){}return this[a99_0x43bf('0x2')][a99_0x43bf('0x23')]({'where':{'uuid':_0x1be6ca[a99_0x43bf('0x1c')][a99_0x43bf('0x24')]},'defaults':_0x1be6ca[a99_0x43bf('0x1c')]})['then']((_0x4a90a6,_0x2ccd8a)=>{if(_0x2ccd8a){}else{}return _0xc9f123[a99_0x43bf('0x13')]({'success':!![],'data':_0x4a90a6});})[a99_0x43bf('0x18')](_0x98fb47=>{return _0xc9f123[a99_0x43bf('0x15')](0x1f4)[a99_0x43bf('0x16')]({'success':![],'data':_0x98fb47[a99_0x43bf('0x14')]});});}['remove'](_0x431e33,_0x3aaf68,_0x5b6bb9){if(!_0x431e33[a99_0x43bf('0x5')]||_0x431e33['user'][a99_0x43bf('0x6')]==0x0){return _0x3aaf68[a99_0x43bf('0x15')](0x191)[a99_0x43bf('0x16')]({'success':![],'data':'authentication\x20failed'});}if(_0x431e33[a99_0x43bf('0x5')]&&_0x431e33[a99_0x43bf('0x5')][a99_0x43bf('0x6')]>0x0){_0x431e33[a99_0x43bf('0x1c')][a99_0x43bf('0x1d')]=_0x431e33[a99_0x43bf('0x5')][0x0]['id'];}this['model'][a99_0x43bf('0x17')](_0x431e33[a99_0x43bf('0xd')]['id'])[a99_0x43bf('0xe')](_0x5dc1ae=>{if(_0x5dc1ae==null)return _0x3aaf68[a99_0x43bf('0x13')]({'success':!![],'data':_0x5dc1ae});_0x5dc1ae[a99_0x43bf('0x25')]()[a99_0x43bf('0xe')](function(_0x423d74){const _0x326db7=this[a99_0x43bf('0x3')]?sequelize_utils_1[a99_0x43bf('0xf')][a99_0x43bf('0x10')](_0x5dc1ae,_0x431e33['headers'][a99_0x43bf('0x1a')]):_0x5dc1ae;return _0x3aaf68['json']({'success':!![],'data':_0x326db7});})[a99_0x43bf('0x18')](_0x19b3e6=>{return _0x3aaf68[a99_0x43bf('0x15')](0x1f4)[a99_0x43bf('0x16')]({'success':![],'data':_0x19b3e6[a99_0x43bf('0x14')]});});})[a99_0x43bf('0x18')](_0x1ba2d9=>{return _0x3aaf68[a99_0x43bf('0x15')](0x1f4)['send']({'success':![],'data':_0x1ba2d9['stack']});});}}exports[a99_0x43bf('0xf')]=CrudUtils;