var a99_0xebdc=['offset','limit','findAll','updated_by_user_id','deleted_by_user_id','updated_at','default','headers','lang','toJSON','send','authentication\x20failed','findById','toJSONLocalizedOnly','findByUUId','uuid','save','body','created_by_user_id','created_at','deleted_at','findOneAndUpdate','findByPk','update','bind','updateOrCreate','dataValues','create','findOrCreate','remove','destroy','__importDefault','defineProperty','./sequelize-utils','model','i18n','count','user','length','params','then','json','catch','status','stack','find','query'];(function(_0x59d6e5,_0x48cabb){var _0x681589=function(_0x2d00d4){while(--_0x2d00d4){_0x59d6e5['push'](_0x59d6e5['shift']());}};_0x681589(++_0x48cabb);}(a99_0xebdc,0xdb));var a99_0x40f8=function(_0x145002,_0x3cd95c){_0x145002=_0x145002-0x0;var _0x3a0840=a99_0xebdc[_0x145002];return _0x3a0840;};'use strict';var __importDefault=this&&this[a99_0x40f8('0x0')]||function(_0x1d500c){return _0x1d500c&&_0x1d500c['__esModule']?_0x1d500c:{'default':_0x1d500c};};Object[a99_0x40f8('0x1')](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x40f8('0x2')));class CrudUtils{constructor(_0x6c41d1,_0x5b6bad){this[a99_0x40f8('0x3')]=_0x6c41d1;this[a99_0x40f8('0x4')]=_0x5b6bad;}[a99_0x40f8('0x5')](_0x523b35,_0xbdf2e0,_0x3d1e85){if(!_0x523b35[a99_0x40f8('0x6')]||_0x523b35[a99_0x40f8('0x6')][a99_0x40f8('0x7')]==0x0){}return this['model'][a99_0x40f8('0x5')]({'where':_0x523b35[a99_0x40f8('0x8')]})[a99_0x40f8('0x9')](_0x4af63c=>{const _0x57d6b9=_0x4af63c;if(_0xbdf2e0){return _0xbdf2e0[a99_0x40f8('0xa')]({'success':!![],'data':{'total':_0x4af63c}});}else{return _0x57d6b9;}})[a99_0x40f8('0xb')](_0x1faa8b=>{if(_0xbdf2e0){return _0xbdf2e0[a99_0x40f8('0xc')](0x1f4)['send']({'success':![],'data':_0x1faa8b[a99_0x40f8('0xd')]});}else{return _0x1faa8b[a99_0x40f8('0xd')];}});}[a99_0x40f8('0xe')](_0x2b6077,_0x564de4,_0x22b064,_0x5216d4=![],_0x4ec276=[],_0x1adb82=null){const _0x5a608f=_0x2b6077['query']['offset']?Number(_0x2b6077[a99_0x40f8('0xf')][a99_0x40f8('0x10')]):null;const _0x1d133d=_0x2b6077[a99_0x40f8('0xf')][a99_0x40f8('0x11')]?Number(_0x2b6077[a99_0x40f8('0xf')]['limit']):null;if(!_0x2b6077[a99_0x40f8('0x6')]||_0x2b6077[a99_0x40f8('0x6')]['length']==0x0){}return this['model'][a99_0x40f8('0x12')]({'attributes':{'exclude':_0x5216d4?[]:['id','created_by_user_id',a99_0x40f8('0x13'),a99_0x40f8('0x14'),'created_at',a99_0x40f8('0x15'),'deleted_at']},'where':_0x2b6077['params'],'offset':_0x5a608f,'limit':_0x1d133d,'include':_0x4ec276,'order':_0x1adb82})[a99_0x40f8('0x9')](_0x543d0e=>{const _0x52c293=this[a99_0x40f8('0x4')]?sequelize_utils_1[a99_0x40f8('0x16')]['toJSONLocalizedOnly'](_0x543d0e,_0x2b6077[a99_0x40f8('0x17')][a99_0x40f8('0x18')]):sequelize_utils_1['default'][a99_0x40f8('0x19')](_0x543d0e);if(_0x564de4){return _0x564de4[a99_0x40f8('0xa')]({'success':!![],'data':_0x52c293});}else{return _0x52c293;}})[a99_0x40f8('0xb')](_0x555eed=>{if(_0x564de4){return _0x564de4[a99_0x40f8('0xc')](0x1f4)[a99_0x40f8('0x1a')]({'success':![],'data':_0x555eed[a99_0x40f8('0xd')]});}else{return _0x555eed['stack'];}});}['findById'](_0x1b3157,_0x34a761,_0xd0d73a){if(!_0x1b3157[a99_0x40f8('0x6')]||_0x1b3157[a99_0x40f8('0x6')]['length']==0x0){return _0x34a761[a99_0x40f8('0xc')](0x191)['send']({'success':![],'data':a99_0x40f8('0x1b')});}this[a99_0x40f8('0x3')][a99_0x40f8('0x1c')](_0x1b3157[a99_0x40f8('0x8')]['id'])[a99_0x40f8('0x9')](_0x43a25e=>{const _0x19fe6d=this[a99_0x40f8('0x4')]?sequelize_utils_1[a99_0x40f8('0x16')][a99_0x40f8('0x1d')](_0x43a25e,_0x1b3157[a99_0x40f8('0x17')]['lang']):_0x43a25e;return _0x34a761['json']({'success':!![],'data':_0x19fe6d});})[a99_0x40f8('0xb')](_0x3bbcc1=>{return _0x34a761['status'](0x1f4)[a99_0x40f8('0x1a')]({'success':![],'data':_0x3bbcc1[a99_0x40f8('0xd')]});});}[a99_0x40f8('0x1e')](_0x21fe5e,_0x29d1f9,_0x32b12d){if(!_0x21fe5e[a99_0x40f8('0x6')]||_0x21fe5e[a99_0x40f8('0x6')][a99_0x40f8('0x7')]==0x0){}return this[a99_0x40f8('0x3')]['findAll']({'where':{'uuid':_0x21fe5e[a99_0x40f8('0x8')][a99_0x40f8('0x1f')]}})[a99_0x40f8('0x9')](_0x3990c2=>{const _0x281ffd=this['i18n']?sequelize_utils_1[a99_0x40f8('0x16')][a99_0x40f8('0x1d')](_0x3990c2,_0x21fe5e['headers'][a99_0x40f8('0x18')]):sequelize_utils_1[a99_0x40f8('0x16')][a99_0x40f8('0x19')](_0x3990c2);return _0x281ffd;})['catch'](_0x56d0e2=>{return _0x56d0e2['stack'];});}[a99_0x40f8('0x20')](_0x1467f1,_0x3bbd05,_0x50aa68){if(!_0x1467f1[a99_0x40f8('0x6')]||_0x1467f1['user'][a99_0x40f8('0x7')]==0x0){}if(_0x1467f1[a99_0x40f8('0x6')]&&_0x1467f1[a99_0x40f8('0x6')]['length']>0x0){_0x1467f1[a99_0x40f8('0x21')]['created_by_user_id']=_0x1467f1['user'][0x0]['id'];}return this[a99_0x40f8('0x3')]['create'](_0x1467f1[a99_0x40f8('0x21')],this[a99_0x40f8('0x4')]?{'language_id':_0x1467f1[a99_0x40f8('0x17')][a99_0x40f8('0x18')]}:{})['then'](_0x5827b8=>{const _0x37e593=this['i18n']?sequelize_utils_1[a99_0x40f8('0x16')][a99_0x40f8('0x1d')](_0x5827b8,_0x1467f1[a99_0x40f8('0x17')]['lang']):_0x5827b8;delete _0x37e593['dataValues']['id'];delete _0x37e593['dataValues'][a99_0x40f8('0x22')];delete _0x37e593['dataValues'][a99_0x40f8('0x13')];delete _0x37e593['dataValues'][a99_0x40f8('0x14')];delete _0x37e593['dataValues'][a99_0x40f8('0x23')];delete _0x37e593['dataValues'][a99_0x40f8('0x15')];delete _0x37e593['dataValues'][a99_0x40f8('0x24')];if(_0x3bbd05){return _0x3bbd05[a99_0x40f8('0xa')]({'success':!![],'data':_0x37e593});}else{return _0x37e593;}})[a99_0x40f8('0xb')](_0x4b8b03=>{if(_0x3bbd05){return _0x3bbd05['status'](0x1f4)['send']({'success':![],'data':_0x4b8b03[a99_0x40f8('0xd')]});}else{return _0x4b8b03[a99_0x40f8('0xd')];}});}[a99_0x40f8('0x25')](_0x49b148,_0x124d5a,_0x3bd7e0){if(!_0x49b148[a99_0x40f8('0x6')]||_0x49b148['user'][a99_0x40f8('0x7')]==0x0){}if(_0x49b148[a99_0x40f8('0x6')]&&_0x49b148[a99_0x40f8('0x6')][a99_0x40f8('0x7')]>0x0){}this[a99_0x40f8('0x3')][a99_0x40f8('0x26')](_0x49b148[a99_0x40f8('0x21')]['id'])['then'](_0x55f69b=>{if(_0x55f69b==null)return _0x124d5a[a99_0x40f8('0xa')]({'success':!![],'data':_0x55f69b});_0x55f69b[a99_0x40f8('0x27')](_0x49b148[a99_0x40f8('0x21')],{'language_id':_0x49b148['headers'][a99_0x40f8('0x18')]})[a99_0x40f8('0x9')](function(_0x1d42a9){const _0x5b6af8=this[a99_0x40f8('0x4')]?sequelize_utils_1['default'][a99_0x40f8('0x1d')](_0x55f69b,_0x49b148['headers'][a99_0x40f8('0x18')]):_0x55f69b;return _0x124d5a[a99_0x40f8('0xa')]({'success':!![],'data':_0x5b6af8});}[a99_0x40f8('0x28')](this))['catch'](_0x205606=>{return _0x124d5a[a99_0x40f8('0xc')](0x1f4)[a99_0x40f8('0x1a')]({'success':![],'data':_0x205606['stack']});});})[a99_0x40f8('0xb')](_0xd15770=>{return _0x124d5a[a99_0x40f8('0xc')](0x1f4)['send']({'success':![],'data':_0xd15770[a99_0x40f8('0xd')]});});}[a99_0x40f8('0x29')](_0x39da2d,_0x42f3a2,_0x2f0eea,_0x33f3b2=![]){if(!_0x39da2d[a99_0x40f8('0x6')]||_0x39da2d[a99_0x40f8('0x6')]['length']==0x0){}if(_0x39da2d[a99_0x40f8('0x6')]&&_0x39da2d[a99_0x40f8('0x6')]['length']>0x0){}return this[a99_0x40f8('0x3')]['findOne']({'where':_0x39da2d['params']})[a99_0x40f8('0x9')](function(_0x2553d9){if(_0x2553d9){return _0x2553d9['update'](_0x39da2d[a99_0x40f8('0x21')])['then'](function(_0x2e9e17){const _0x12b93a=_0x2e9e17[a99_0x40f8('0x2a')];if(_0x33f3b2){delete _0x12b93a['id'];}if(_0x42f3a2){return _0x42f3a2[a99_0x40f8('0xa')]({'success':!![],'data':_0x12b93a});}else{return _0x12b93a;}}[a99_0x40f8('0x28')](this));}else{return this['model'][a99_0x40f8('0x2b')](_0x39da2d[a99_0x40f8('0x21')])[a99_0x40f8('0x9')](function(_0x3da18d){if(_0x42f3a2){return _0x42f3a2['json']({'success':!![],'data':_0x3da18d[a99_0x40f8('0x19')]()});}else{return _0x3da18d;}});}}[a99_0x40f8('0x28')](this))[a99_0x40f8('0xb')](_0x5d2595=>{if(_0x42f3a2){return _0x42f3a2['status'](0x1f4)[a99_0x40f8('0x1a')]({'success':![],'data':_0x5d2595['stack']});}else{return _0x5d2595[a99_0x40f8('0xd')];}});}['findOrCreate'](_0x5c3ab2,_0x380acd,_0x54fe8c){if(!_0x5c3ab2[a99_0x40f8('0x6')]||_0x5c3ab2['user']['length']==0x0){}if(_0x5c3ab2[a99_0x40f8('0x6')]&&_0x5c3ab2[a99_0x40f8('0x6')]['length']>0x0){}return this['model'][a99_0x40f8('0x2c')]({'where':{'uuid':_0x5c3ab2['body'][a99_0x40f8('0x1f')]},'defaults':_0x5c3ab2['body']})[a99_0x40f8('0x9')]((_0x4af500,_0x231500)=>{if(_0x231500){}else{}return _0x380acd[a99_0x40f8('0xa')]({'success':!![],'data':_0x4af500});})[a99_0x40f8('0xb')](_0x47934e=>{return _0x380acd['status'](0x1f4)[a99_0x40f8('0x1a')]({'success':![],'data':_0x47934e[a99_0x40f8('0xd')]});});}[a99_0x40f8('0x2d')](_0x3ebece,_0x12bd29,_0x1400ad){if(!_0x3ebece[a99_0x40f8('0x6')]||_0x3ebece['user'][a99_0x40f8('0x7')]==0x0){return _0x12bd29[a99_0x40f8('0xc')](0x191)[a99_0x40f8('0x1a')]({'success':![],'data':'authentication\x20failed'});}if(_0x3ebece[a99_0x40f8('0x6')]&&_0x3ebece['user'][a99_0x40f8('0x7')]>0x0){_0x3ebece[a99_0x40f8('0x21')]['created_by_user_id']=_0x3ebece['user'][0x0]['id'];}this[a99_0x40f8('0x3')][a99_0x40f8('0x1c')](_0x3ebece['params']['id'])['then'](_0x335177=>{if(_0x335177==null)return _0x12bd29[a99_0x40f8('0xa')]({'success':!![],'data':_0x335177});_0x335177[a99_0x40f8('0x2e')]()[a99_0x40f8('0x9')](function(_0x2c469a){const _0x20367d=this[a99_0x40f8('0x4')]?sequelize_utils_1['default'][a99_0x40f8('0x1d')](_0x335177,_0x3ebece[a99_0x40f8('0x17')][a99_0x40f8('0x18')]):_0x335177;return _0x12bd29[a99_0x40f8('0xa')]({'success':!![],'data':_0x20367d});})[a99_0x40f8('0xb')](_0x1e5bff=>{return _0x12bd29[a99_0x40f8('0xc')](0x1f4)['send']({'success':![],'data':_0x1e5bff[a99_0x40f8('0xd')]});});})[a99_0x40f8('0xb')](_0x5e1fa2=>{return _0x12bd29['status'](0x1f4)['send']({'success':![],'data':_0x5e1fa2[a99_0x40f8('0xd')]});});}}exports[a99_0x40f8('0x16')]=CrudUtils;