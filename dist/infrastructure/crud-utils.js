var a99_0x3c82=['then','json','status','stack','find','offset','query','limit','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','default','toJSONLocalizedOnly','headers','lang','toJSON','catch','findById','authentication\x20failed','send','uuid','body','create','dataValues','findOneAndUpdate','findByPk','update','bind','findOne','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','model','i18n','count','user','length','params'];(function(_0x472563,_0x19d696){var _0x1aaa55=function(_0x1a5cb5){while(--_0x1a5cb5){_0x472563['push'](_0x472563['shift']());}};_0x1aaa55(++_0x19d696);}(a99_0x3c82,0x12b));var a99_0xa087=function(_0x208c99,_0x297704){_0x208c99=_0x208c99-0x0;var _0xfb741d=a99_0x3c82[_0x208c99];return _0xfb741d;};'use strict';var __importDefault=this&&this[a99_0xa087('0x0')]||function(_0x291ebd){return _0x291ebd&&_0x291ebd[a99_0xa087('0x1')]?_0x291ebd:{'default':_0x291ebd};};Object[a99_0xa087('0x2')](exports,a99_0xa087('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require('./sequelize-utils'));class CrudUtils{constructor(_0x439300,_0x1a9870){this[a99_0xa087('0x3')]=_0x439300;this[a99_0xa087('0x4')]=_0x1a9870;}[a99_0xa087('0x5')](_0x3db635,_0x306cc8,_0x4bb7bb){if(!_0x3db635[a99_0xa087('0x6')]||_0x3db635[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){}return this['model'][a99_0xa087('0x5')]({'where':_0x3db635[a99_0xa087('0x8')]})[a99_0xa087('0x9')](_0x22320e=>{const _0x49baf4=_0x22320e;if(_0x306cc8){return _0x306cc8[a99_0xa087('0xa')]({'success':!![],'data':{'total':_0x22320e}});}else{return _0x49baf4;}})['catch'](_0x328583=>{if(_0x306cc8){return _0x306cc8[a99_0xa087('0xb')](0x1f4)['send']({'success':![],'data':_0x328583[a99_0xa087('0xc')]});}else{return _0x328583[a99_0xa087('0xc')];}});}[a99_0xa087('0xd')](_0x1c3ee5,_0x2353ef,_0x1ce33e,_0x229887=![],_0xa3adc8=[]){const _0x5ab04a=_0x1c3ee5['query'][a99_0xa087('0xe')]?Number(_0x1c3ee5[a99_0xa087('0xf')][a99_0xa087('0xe')]):null;const _0x5e136d=_0x1c3ee5[a99_0xa087('0xf')]['limit']?Number(_0x1c3ee5[a99_0xa087('0xf')][a99_0xa087('0x10')]):null;if(!_0x1c3ee5[a99_0xa087('0x6')]||_0x1c3ee5[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){}return this[a99_0xa087('0x3')]['findAll']({'attributes':{'exclude':_0x229887?[]:['id',a99_0xa087('0x11'),a99_0xa087('0x12'),a99_0xa087('0x13'),a99_0xa087('0x14'),a99_0xa087('0x15'),a99_0xa087('0x16')]},'where':_0x1c3ee5[a99_0xa087('0x8')],'offset':_0x5ab04a,'limit':_0x5e136d,'include':_0xa3adc8})[a99_0xa087('0x9')](_0x3e26f4=>{const _0x2b184e=this['i18n']?sequelize_utils_1[a99_0xa087('0x17')][a99_0xa087('0x18')](_0x3e26f4,_0x1c3ee5[a99_0xa087('0x19')][a99_0xa087('0x1a')]):sequelize_utils_1[a99_0xa087('0x17')][a99_0xa087('0x1b')](_0x3e26f4);if(_0x2353ef){return _0x2353ef[a99_0xa087('0xa')]({'success':!![],'data':_0x2b184e});}else{return _0x2b184e;}})[a99_0xa087('0x1c')](_0xbf2906=>{if(_0x2353ef){return _0x2353ef[a99_0xa087('0xb')](0x1f4)['send']({'success':![],'data':_0xbf2906[a99_0xa087('0xc')]});}else{return _0xbf2906[a99_0xa087('0xc')];}});}[a99_0xa087('0x1d')](_0x109908,_0xdf237d,_0x44e563){if(!_0x109908['user']||_0x109908[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){return _0xdf237d['status'](0x191)['send']({'success':![],'data':a99_0xa087('0x1e')});}this[a99_0xa087('0x3')][a99_0xa087('0x1d')](_0x109908[a99_0xa087('0x8')]['id'])[a99_0xa087('0x9')](_0x1824b7=>{const _0x407cb4=this[a99_0xa087('0x4')]?sequelize_utils_1[a99_0xa087('0x17')][a99_0xa087('0x18')](_0x1824b7,_0x109908[a99_0xa087('0x19')][a99_0xa087('0x1a')]):_0x1824b7;return _0xdf237d['json']({'success':!![],'data':_0x407cb4});})['catch'](_0x4fb5e0=>{return _0xdf237d[a99_0xa087('0xb')](0x1f4)[a99_0xa087('0x1f')]({'success':![],'data':_0x4fb5e0[a99_0xa087('0xc')]});});}['findByUUId'](_0x2fdde9,_0x24d586,_0x6ed43b){if(!_0x2fdde9[a99_0xa087('0x6')]||_0x2fdde9[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){}return this[a99_0xa087('0x3')]['findAll']({'where':{'uuid':_0x2fdde9[a99_0xa087('0x8')][a99_0xa087('0x20')]}})[a99_0xa087('0x9')](_0x2e0249=>{const _0x1d30aa=this[a99_0xa087('0x4')]?sequelize_utils_1['default'][a99_0xa087('0x18')](_0x2e0249,_0x2fdde9['headers'][a99_0xa087('0x1a')]):sequelize_utils_1['default'][a99_0xa087('0x1b')](_0x2e0249);return _0x1d30aa;})[a99_0xa087('0x1c')](_0x1b59f9=>{return _0x1b59f9['stack'];});}['save'](_0x4c3744,_0x34f65e,_0x4f590d){if(!_0x4c3744[a99_0xa087('0x6')]||_0x4c3744[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){}if(_0x4c3744[a99_0xa087('0x6')]&&_0x4c3744[a99_0xa087('0x6')][a99_0xa087('0x7')]>0x0){_0x4c3744[a99_0xa087('0x21')]['created_by_user_id']=_0x4c3744[a99_0xa087('0x6')][0x0]['id'];}return this[a99_0xa087('0x3')][a99_0xa087('0x22')](_0x4c3744[a99_0xa087('0x21')],this[a99_0xa087('0x4')]?{'language_id':_0x4c3744[a99_0xa087('0x19')][a99_0xa087('0x1a')]}:{})[a99_0xa087('0x9')](_0x3c8d7d=>{const _0x56943c=this[a99_0xa087('0x4')]?sequelize_utils_1[a99_0xa087('0x17')][a99_0xa087('0x18')](_0x3c8d7d,_0x4c3744[a99_0xa087('0x19')]['lang']):_0x3c8d7d;delete _0x56943c[a99_0xa087('0x23')]['id'];delete _0x56943c['dataValues']['created_by_user_id'];delete _0x56943c[a99_0xa087('0x23')][a99_0xa087('0x12')];delete _0x56943c[a99_0xa087('0x23')][a99_0xa087('0x13')];delete _0x56943c[a99_0xa087('0x23')][a99_0xa087('0x14')];delete _0x56943c['dataValues'][a99_0xa087('0x15')];delete _0x56943c[a99_0xa087('0x23')]['deleted_at'];if(_0x34f65e){return _0x34f65e['json']({'success':!![],'data':_0x56943c});}else{return _0x56943c;}})['catch'](_0x31bee3=>{if(_0x34f65e){return _0x34f65e[a99_0xa087('0xb')](0x1f4)[a99_0xa087('0x1f')]({'success':![],'data':_0x31bee3['stack']});}else{return _0x31bee3[a99_0xa087('0xc')];}});}[a99_0xa087('0x24')](_0x4345f3,_0x4d1a83,_0x17b6c5){if(!_0x4345f3[a99_0xa087('0x6')]||_0x4345f3[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){}if(_0x4345f3['user']&&_0x4345f3[a99_0xa087('0x6')][a99_0xa087('0x7')]>0x0){}this['model'][a99_0xa087('0x25')](_0x4345f3[a99_0xa087('0x21')]['id'])[a99_0xa087('0x9')](_0x3a9934=>{if(_0x3a9934==null)return _0x4d1a83[a99_0xa087('0xa')]({'success':!![],'data':_0x3a9934});_0x3a9934[a99_0xa087('0x26')](_0x4345f3['body'],{'language_id':_0x4345f3[a99_0xa087('0x19')][a99_0xa087('0x1a')]})[a99_0xa087('0x9')](function(_0x3d3c41){const _0x4943d9=this[a99_0xa087('0x4')]?sequelize_utils_1[a99_0xa087('0x17')][a99_0xa087('0x18')](_0x3a9934,_0x4345f3[a99_0xa087('0x19')]['lang']):_0x3a9934;return _0x4d1a83[a99_0xa087('0xa')]({'success':!![],'data':_0x4943d9});}[a99_0xa087('0x27')](this))['catch'](_0x5d9a4f=>{return _0x4d1a83[a99_0xa087('0xb')](0x1f4)['send']({'success':![],'data':_0x5d9a4f[a99_0xa087('0xc')]});});})[a99_0xa087('0x1c')](_0x4c66d8=>{return _0x4d1a83[a99_0xa087('0xb')](0x1f4)[a99_0xa087('0x1f')]({'success':![],'data':_0x4c66d8[a99_0xa087('0xc')]});});}['updateOrCreate'](_0x2dd02b,_0xebd70c,_0x3b9fdf,_0x32b729=![]){if(!_0x2dd02b[a99_0xa087('0x6')]||_0x2dd02b[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){}if(_0x2dd02b[a99_0xa087('0x6')]&&_0x2dd02b[a99_0xa087('0x6')][a99_0xa087('0x7')]>0x0){}return this[a99_0xa087('0x3')][a99_0xa087('0x28')]({'where':_0x2dd02b['params']})[a99_0xa087('0x9')](function(_0x41bbf8){if(_0x41bbf8){return _0x41bbf8['update'](_0x2dd02b[a99_0xa087('0x21')])[a99_0xa087('0x9')](function(_0x1a7df6){const _0x5a5226=_0x1a7df6[a99_0xa087('0x23')];if(_0x32b729){delete _0x5a5226['id'];}if(_0xebd70c){return _0xebd70c[a99_0xa087('0xa')]({'success':!![],'data':_0x5a5226});}else{return _0x5a5226;}}[a99_0xa087('0x27')](this));}else{return this['model']['create'](_0x2dd02b[a99_0xa087('0x21')])[a99_0xa087('0x9')](function(_0x2b12bd){if(_0xebd70c){return _0xebd70c['json']({'success':!![],'data':_0x2b12bd['toJSON']()});}else{return _0x2b12bd;}});}}[a99_0xa087('0x27')](this))[a99_0xa087('0x1c')](_0x1bd054=>{if(_0xebd70c){return _0xebd70c[a99_0xa087('0xb')](0x1f4)[a99_0xa087('0x1f')]({'success':![],'data':_0x1bd054[a99_0xa087('0xc')]});}else{return _0x1bd054[a99_0xa087('0xc')];}});}[a99_0xa087('0x29')](_0x2626d8,_0x3d7e7e,_0x550111){if(!_0x2626d8['user']||_0x2626d8[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){}if(_0x2626d8[a99_0xa087('0x6')]&&_0x2626d8[a99_0xa087('0x6')][a99_0xa087('0x7')]>0x0){}return this[a99_0xa087('0x3')][a99_0xa087('0x29')]({'where':{'uuid':_0x2626d8[a99_0xa087('0x21')][a99_0xa087('0x20')]},'defaults':_0x2626d8[a99_0xa087('0x21')]})[a99_0xa087('0x9')]((_0x20e18a,_0x61e689)=>{if(_0x61e689){}else{}return _0x3d7e7e[a99_0xa087('0xa')]({'success':!![],'data':_0x20e18a});})[a99_0xa087('0x1c')](_0x547a7a=>{return _0x3d7e7e[a99_0xa087('0xb')](0x1f4)['send']({'success':![],'data':_0x547a7a[a99_0xa087('0xc')]});});}[a99_0xa087('0x2a')](_0x1ffe20,_0x3f27ce,_0x26e66e){if(!_0x1ffe20[a99_0xa087('0x6')]||_0x1ffe20[a99_0xa087('0x6')][a99_0xa087('0x7')]==0x0){return _0x3f27ce[a99_0xa087('0xb')](0x191)[a99_0xa087('0x1f')]({'success':![],'data':a99_0xa087('0x1e')});}if(_0x1ffe20[a99_0xa087('0x6')]&&_0x1ffe20[a99_0xa087('0x6')][a99_0xa087('0x7')]>0x0){_0x1ffe20[a99_0xa087('0x21')]['created_by_user_id']=_0x1ffe20[a99_0xa087('0x6')][0x0]['id'];}this[a99_0xa087('0x3')][a99_0xa087('0x1d')](_0x1ffe20[a99_0xa087('0x8')]['id'])[a99_0xa087('0x9')](_0x379d8c=>{if(_0x379d8c==null)return _0x3f27ce['json']({'success':!![],'data':_0x379d8c});_0x379d8c[a99_0xa087('0x2b')]()[a99_0xa087('0x9')](function(_0x2909a1){const _0x14fed3=this[a99_0xa087('0x4')]?sequelize_utils_1[a99_0xa087('0x17')][a99_0xa087('0x18')](_0x379d8c,_0x1ffe20[a99_0xa087('0x19')][a99_0xa087('0x1a')]):_0x379d8c;return _0x3f27ce[a99_0xa087('0xa')]({'success':!![],'data':_0x14fed3});})[a99_0xa087('0x1c')](_0x2a1ce1=>{return _0x3f27ce[a99_0xa087('0xb')](0x1f4)['send']({'success':![],'data':_0x2a1ce1['stack']});});})[a99_0xa087('0x1c')](_0x3e6338=>{return _0x3f27ce[a99_0xa087('0xb')](0x1f4)[a99_0xa087('0x1f')]({'success':![],'data':_0x3e6338['stack']});});}}exports['default']=CrudUtils;