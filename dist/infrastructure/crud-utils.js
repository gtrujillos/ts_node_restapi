var a97_0x3738=['bind','updateOrCreate','findOrCreate','remove','destroy','__importDefault','__esModule','./sequelize-utils','model','i18n','find','user','findAll','created_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','default','toJSONLocalizedOnly','headers','lang','send','stack','findById','length','authentication\x20failed','params','then','json','status','findByUUId','uuid','toJSON','catch','body','create','dataValues','updated_by_user_id','findOneAndUpdate','findByPk','update'];(function(_0x106765,_0x1277b7){var _0x19f13e=function(_0x426e33){while(--_0x426e33){_0x106765['push'](_0x106765['shift']());}};_0x19f13e(++_0x1277b7);}(a97_0x3738,0x1a9));var a97_0x3f7d=function(_0x206fe1,_0x5b96ed){_0x206fe1=_0x206fe1-0x0;var _0x129f31=a97_0x3738[_0x206fe1];return _0x129f31;};'use strict';var __importDefault=this&&this[a97_0x3f7d('0x0')]||function(_0xae085f){return _0xae085f&&_0xae085f[a97_0x3f7d('0x1')]?_0xae085f:{'default':_0xae085f};};Object['defineProperty'](exports,a97_0x3f7d('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a97_0x3f7d('0x2')));class CrudUtils{constructor(_0x5896a8,_0x5c013b){this[a97_0x3f7d('0x3')]=_0x5896a8;this[a97_0x3f7d('0x4')]=_0x5c013b;}[a97_0x3f7d('0x5')](_0xa752dd,_0x19ebfc,_0x19c895,_0x28593a=![]){if(!_0xa752dd['user']||_0xa752dd[a97_0x3f7d('0x6')]['length']==0x0){}return this[a97_0x3f7d('0x3')][a97_0x3f7d('0x7')]({'attributes':{'exclude':_0x28593a?[]:['id',a97_0x3f7d('0x8'),'updated_by_user_id',a97_0x3f7d('0x9'),a97_0x3f7d('0xa'),a97_0x3f7d('0xb'),a97_0x3f7d('0xc')]},'where':{}})['then'](_0x29269d=>{const _0x4d1c33=this[a97_0x3f7d('0x4')]?sequelize_utils_1[a97_0x3f7d('0xd')][a97_0x3f7d('0xe')](_0x29269d,_0xa752dd[a97_0x3f7d('0xf')][a97_0x3f7d('0x10')]):sequelize_utils_1['default']['toJSON'](_0x29269d);if(_0x19ebfc){return _0x19ebfc['json']({'success':!![],'data':_0x4d1c33});}else{return _0x4d1c33;}})['catch'](_0x339ae2=>{if(_0x19ebfc){return _0x19ebfc['status'](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x339ae2[a97_0x3f7d('0x12')]});}else{return _0x339ae2['stack'];}});}[a97_0x3f7d('0x13')](_0x53368f,_0x3365da,_0x2a0704){if(!_0x53368f['user']||_0x53368f[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]==0x0){return _0x3365da['status'](0x191)[a97_0x3f7d('0x11')]({'success':![],'data':a97_0x3f7d('0x15')});}this[a97_0x3f7d('0x3')][a97_0x3f7d('0x13')](_0x53368f[a97_0x3f7d('0x16')]['id'])[a97_0x3f7d('0x17')](_0x279035=>{const _0x2d1c49=this['i18n']?sequelize_utils_1[a97_0x3f7d('0xd')]['toJSONLocalizedOnly'](_0x279035,_0x53368f['headers'][a97_0x3f7d('0x10')]):_0x279035;return _0x3365da[a97_0x3f7d('0x18')]({'success':!![],'data':_0x2d1c49});})['catch'](_0x428840=>{return _0x3365da[a97_0x3f7d('0x19')](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x428840[a97_0x3f7d('0x12')]});});}[a97_0x3f7d('0x1a')](_0x2b98ca,_0x512539,_0x1d8ce3){if(!_0x2b98ca['user']||_0x2b98ca[a97_0x3f7d('0x6')]['length']==0x0){}return this[a97_0x3f7d('0x3')][a97_0x3f7d('0x7')]({'where':{'uuid':_0x2b98ca[a97_0x3f7d('0x16')][a97_0x3f7d('0x1b')]}})[a97_0x3f7d('0x17')](_0x217fb7=>{const _0x28ab2d=this['i18n']?sequelize_utils_1[a97_0x3f7d('0xd')]['toJSONLocalizedOnly'](_0x217fb7,_0x2b98ca[a97_0x3f7d('0xf')]['lang']):sequelize_utils_1['default'][a97_0x3f7d('0x1c')](_0x217fb7);return _0x28ab2d;})[a97_0x3f7d('0x1d')](_0xee6a7e=>{return _0xee6a7e['stack'];});}['save'](_0x6020eb,_0x145d38,_0x62f158){if(!_0x6020eb['user']||_0x6020eb[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]==0x0){}if(_0x6020eb['user']&&_0x6020eb[a97_0x3f7d('0x6')]['length']>0x0){_0x6020eb[a97_0x3f7d('0x1e')][a97_0x3f7d('0x8')]=_0x6020eb[a97_0x3f7d('0x6')][0x0]['id'];}return this[a97_0x3f7d('0x3')][a97_0x3f7d('0x1f')](_0x6020eb['body'],{'language_id':_0x6020eb[a97_0x3f7d('0xf')][a97_0x3f7d('0x10')]})['then'](_0x988b9e=>{const _0x542678=this[a97_0x3f7d('0x4')]?sequelize_utils_1['default'][a97_0x3f7d('0xe')](_0x988b9e,_0x6020eb[a97_0x3f7d('0xf')][a97_0x3f7d('0x10')]):_0x988b9e;delete _0x542678[a97_0x3f7d('0x20')]['id'];delete _0x542678[a97_0x3f7d('0x20')][a97_0x3f7d('0x8')];delete _0x542678['dataValues'][a97_0x3f7d('0x21')];delete _0x542678[a97_0x3f7d('0x20')][a97_0x3f7d('0x9')];delete _0x542678[a97_0x3f7d('0x20')][a97_0x3f7d('0xa')];delete _0x542678[a97_0x3f7d('0x20')][a97_0x3f7d('0xb')];delete _0x542678['dataValues'][a97_0x3f7d('0xc')];if(_0x145d38){return _0x145d38['json']({'success':!![],'data':_0x542678});}else{return _0x542678;}})[a97_0x3f7d('0x1d')](_0x2c5823=>{if(_0x145d38){return _0x145d38[a97_0x3f7d('0x19')](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x2c5823[a97_0x3f7d('0x12')]});}else{return _0x2c5823[a97_0x3f7d('0x12')];}});}[a97_0x3f7d('0x22')](_0x281c3e,_0x52bb6f,_0x16e86b){if(!_0x281c3e[a97_0x3f7d('0x6')]||_0x281c3e[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]==0x0){}if(_0x281c3e['user']&&_0x281c3e[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]>0x0){_0x281c3e['body']['created_by_user_id']=_0x281c3e[a97_0x3f7d('0x6')][0x0]['id'];}this['model'][a97_0x3f7d('0x23')](_0x281c3e['body']['id'])[a97_0x3f7d('0x17')](_0x1adc9a=>{if(_0x1adc9a==null)return _0x52bb6f[a97_0x3f7d('0x18')]({'success':!![],'data':_0x1adc9a});_0x1adc9a[a97_0x3f7d('0x24')](_0x281c3e[a97_0x3f7d('0x1e')],{'language_id':_0x281c3e[a97_0x3f7d('0xf')][a97_0x3f7d('0x10')]})[a97_0x3f7d('0x17')](function(_0x5537c9){const _0x2789b5=this[a97_0x3f7d('0x4')]?sequelize_utils_1['default'][a97_0x3f7d('0xe')](_0x1adc9a,_0x281c3e['headers']['lang']):_0x1adc9a;return _0x52bb6f[a97_0x3f7d('0x18')]({'success':!![],'data':_0x2789b5});}[a97_0x3f7d('0x25')](this))[a97_0x3f7d('0x1d')](_0x5555bb=>{return _0x52bb6f[a97_0x3f7d('0x19')](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x5555bb[a97_0x3f7d('0x12')]});});})[a97_0x3f7d('0x1d')](_0x12c506=>{return _0x52bb6f[a97_0x3f7d('0x19')](0x1f4)['send']({'success':![],'data':_0x12c506[a97_0x3f7d('0x12')]});});}[a97_0x3f7d('0x26')](_0x49ce29,_0x2851f9,_0x2edbac,_0x8bd8c9=![]){if(!_0x49ce29['user']||_0x49ce29[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]==0x0){}if(_0x49ce29[a97_0x3f7d('0x6')]&&_0x49ce29[a97_0x3f7d('0x6')]['length']>0x0){_0x49ce29['body'][a97_0x3f7d('0x8')]=_0x49ce29[a97_0x3f7d('0x6')][0x0]['id'];}console['log'](_0x49ce29[a97_0x3f7d('0x16')]);return this[a97_0x3f7d('0x3')]['findOne']({'where':_0x49ce29[a97_0x3f7d('0x16')]})[a97_0x3f7d('0x17')](function(_0x298d42){if(_0x298d42){return _0x298d42[a97_0x3f7d('0x24')](_0x49ce29['body'])[a97_0x3f7d('0x17')](function(_0x1215ce){const _0x20c2a9=_0x1215ce['dataValues'];if(_0x8bd8c9){delete _0x20c2a9['id'];}if(_0x2851f9){return _0x2851f9['json']({'success':!![],'data':_0x20c2a9});}else{return _0x20c2a9;}}['bind'](this));}else{return this[a97_0x3f7d('0x3')][a97_0x3f7d('0x1f')](_0x49ce29[a97_0x3f7d('0x1e')])[a97_0x3f7d('0x17')](function(_0x37f8ec){if(_0x2851f9){return _0x2851f9[a97_0x3f7d('0x18')]({'success':!![],'data':_0x37f8ec[a97_0x3f7d('0x1c')]()});}else{return _0x37f8ec;}});}}[a97_0x3f7d('0x25')](this))['catch'](_0x46dcd4=>{if(_0x2851f9){return _0x2851f9[a97_0x3f7d('0x19')](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x46dcd4[a97_0x3f7d('0x12')]});}else{return _0x46dcd4[a97_0x3f7d('0x12')];}});}['findOrCreate'](_0x2d446f,_0x4a013c,_0x193f4f){if(!_0x2d446f[a97_0x3f7d('0x6')]||_0x2d446f[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]==0x0){}if(_0x2d446f['user']&&_0x2d446f[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]>0x0){_0x2d446f['body']['created_by_user_id']=_0x2d446f[a97_0x3f7d('0x6')][0x0]['id'];}return this[a97_0x3f7d('0x3')][a97_0x3f7d('0x27')]({'where':{'uuid':_0x2d446f['body']['uuid']},'defaults':_0x2d446f[a97_0x3f7d('0x1e')]})[a97_0x3f7d('0x17')]((_0x2c484b,_0x570800)=>{if(_0x570800){}else{}return _0x4a013c[a97_0x3f7d('0x18')]({'success':!![],'data':_0x2c484b});})[a97_0x3f7d('0x1d')](_0x51a1e2=>{return _0x4a013c[a97_0x3f7d('0x19')](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x51a1e2[a97_0x3f7d('0x12')]});});}[a97_0x3f7d('0x28')](_0x37b8c3,_0x45f63d,_0x106aa1){if(!_0x37b8c3[a97_0x3f7d('0x6')]||_0x37b8c3[a97_0x3f7d('0x6')][a97_0x3f7d('0x14')]==0x0){return _0x45f63d[a97_0x3f7d('0x19')](0x191)[a97_0x3f7d('0x11')]({'success':![],'data':'authentication\x20failed'});}if(_0x37b8c3[a97_0x3f7d('0x6')]&&_0x37b8c3['user'][a97_0x3f7d('0x14')]>0x0){_0x37b8c3[a97_0x3f7d('0x1e')][a97_0x3f7d('0x8')]=_0x37b8c3[a97_0x3f7d('0x6')][0x0]['id'];}this[a97_0x3f7d('0x3')][a97_0x3f7d('0x13')](_0x37b8c3[a97_0x3f7d('0x16')]['id'])[a97_0x3f7d('0x17')](_0x5ead8b=>{if(_0x5ead8b==null)return _0x45f63d['json']({'success':!![],'data':_0x5ead8b});_0x5ead8b[a97_0x3f7d('0x29')]()[a97_0x3f7d('0x17')](function(_0x4f5b3c){const _0x461a82=this[a97_0x3f7d('0x4')]?sequelize_utils_1[a97_0x3f7d('0xd')][a97_0x3f7d('0xe')](_0x5ead8b,_0x37b8c3['headers']['lang']):_0x5ead8b;return _0x45f63d['json']({'success':!![],'data':_0x461a82});})[a97_0x3f7d('0x1d')](_0x25b27a=>{return _0x45f63d['status'](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x25b27a[a97_0x3f7d('0x12')]});});})[a97_0x3f7d('0x1d')](_0x1202fc=>{return _0x45f63d['status'](0x1f4)[a97_0x3f7d('0x11')]({'success':![],'data':_0x1202fc[a97_0x3f7d('0x12')]});});}}exports['default']=CrudUtils;