var a98_0x4c27=['default','lang','toJSON','json','catch','status','send','stack','authentication\x20failed','findById','toJSONLocalizedOnly','uuid','headers','save','body','create','dataValues','updated_at','findOneAndUpdate','update','bind','log','params','findOne','findOrCreate','remove','destroy','__esModule','./sequelize-utils','model','i18n','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','deleted_at','then'];(function(_0x554e25,_0x128bbd){var _0x44b605=function(_0xf14064){while(--_0xf14064){_0x554e25['push'](_0x554e25['shift']());}};_0x44b605(++_0x128bbd);}(a98_0x4c27,0x133));var a98_0x2e84=function(_0x5c7190,_0x32c3d6){_0x5c7190=_0x5c7190-0x0;var _0x13d06a=a98_0x4c27[_0x5c7190];return _0x13d06a;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x15479d){return _0x15479d&&_0x15479d['__esModule']?_0x15479d:{'default':_0x15479d};};Object['defineProperty'](exports,a98_0x2e84('0x0'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a98_0x2e84('0x1')));class CrudUtils{constructor(_0x3187b9,_0x306ca6){this[a98_0x2e84('0x2')]=_0x3187b9;this[a98_0x2e84('0x3')]=_0x306ca6;}['find'](_0x2e1908,_0x59cd40,_0x352273,_0x164f36=![]){if(!_0x2e1908[a98_0x2e84('0x4')]||_0x2e1908[a98_0x2e84('0x4')][a98_0x2e84('0x5')]==0x0){}return this['model'][a98_0x2e84('0x6')]({'attributes':{'exclude':_0x164f36?[]:['id',a98_0x2e84('0x7'),a98_0x2e84('0x8'),a98_0x2e84('0x9'),a98_0x2e84('0xa'),'updated_at',a98_0x2e84('0xb')]},'where':{}})[a98_0x2e84('0xc')](_0x274056=>{const _0xa94be6=this[a98_0x2e84('0x3')]?sequelize_utils_1[a98_0x2e84('0xd')]['toJSONLocalizedOnly'](_0x274056,_0x2e1908['headers'][a98_0x2e84('0xe')]):sequelize_utils_1[a98_0x2e84('0xd')][a98_0x2e84('0xf')](_0x274056);if(_0x59cd40){return _0x59cd40[a98_0x2e84('0x10')]({'success':!![],'data':_0xa94be6});}else{return _0xa94be6;}})[a98_0x2e84('0x11')](_0x606d51=>{if(_0x59cd40){return _0x59cd40[a98_0x2e84('0x12')](0x1f4)[a98_0x2e84('0x13')]({'success':![],'data':_0x606d51[a98_0x2e84('0x14')]});}else{return _0x606d51[a98_0x2e84('0x14')];}});}['findById'](_0x35cd7d,_0x417ea9,_0x222530){if(!_0x35cd7d['user']||_0x35cd7d['user'][a98_0x2e84('0x5')]==0x0){return _0x417ea9[a98_0x2e84('0x12')](0x191)[a98_0x2e84('0x13')]({'success':![],'data':a98_0x2e84('0x15')});}this[a98_0x2e84('0x2')][a98_0x2e84('0x16')](_0x35cd7d['params']['id'])[a98_0x2e84('0xc')](_0x5401c1=>{const _0x4746d7=this['i18n']?sequelize_utils_1[a98_0x2e84('0xd')][a98_0x2e84('0x17')](_0x5401c1,_0x35cd7d['headers'][a98_0x2e84('0xe')]):_0x5401c1;return _0x417ea9[a98_0x2e84('0x10')]({'success':!![],'data':_0x4746d7});})[a98_0x2e84('0x11')](_0x2782e2=>{return _0x417ea9[a98_0x2e84('0x12')](0x1f4)[a98_0x2e84('0x13')]({'success':![],'data':_0x2782e2[a98_0x2e84('0x14')]});});}['findByUUId'](_0x49b707,_0x1a3a52,_0x42f1ad){if(!_0x49b707[a98_0x2e84('0x4')]||_0x49b707[a98_0x2e84('0x4')][a98_0x2e84('0x5')]==0x0){}return this[a98_0x2e84('0x2')]['findAll']({'where':{'uuid':_0x49b707['params'][a98_0x2e84('0x18')]}})[a98_0x2e84('0xc')](_0x55116a=>{const _0x30798a=this[a98_0x2e84('0x3')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0x55116a,_0x49b707[a98_0x2e84('0x19')][a98_0x2e84('0xe')]):sequelize_utils_1[a98_0x2e84('0xd')][a98_0x2e84('0xf')](_0x55116a);return _0x30798a;})[a98_0x2e84('0x11')](_0x25ff97=>{return _0x25ff97['stack'];});}[a98_0x2e84('0x1a')](_0xf83f04,_0x43e06d,_0x5cf5db){if(!_0xf83f04[a98_0x2e84('0x4')]||_0xf83f04['user'][a98_0x2e84('0x5')]==0x0){}if(_0xf83f04[a98_0x2e84('0x4')]&&_0xf83f04[a98_0x2e84('0x4')][a98_0x2e84('0x5')]>0x0){_0xf83f04[a98_0x2e84('0x1b')][a98_0x2e84('0x7')]=_0xf83f04[a98_0x2e84('0x4')][0x0]['id'];}return this[a98_0x2e84('0x2')][a98_0x2e84('0x1c')](_0xf83f04[a98_0x2e84('0x1b')],this[a98_0x2e84('0x3')]?{'language_id':_0xf83f04['headers'][a98_0x2e84('0xe')]}:{})[a98_0x2e84('0xc')](_0x3a8c46=>{const _0x46ed63=this[a98_0x2e84('0x3')]?sequelize_utils_1[a98_0x2e84('0xd')][a98_0x2e84('0x17')](_0x3a8c46,_0xf83f04[a98_0x2e84('0x19')]['lang']):_0x3a8c46;delete _0x46ed63[a98_0x2e84('0x1d')]['id'];delete _0x46ed63['dataValues'][a98_0x2e84('0x7')];delete _0x46ed63[a98_0x2e84('0x1d')][a98_0x2e84('0x8')];delete _0x46ed63[a98_0x2e84('0x1d')][a98_0x2e84('0x9')];delete _0x46ed63[a98_0x2e84('0x1d')]['created_at'];delete _0x46ed63['dataValues'][a98_0x2e84('0x1e')];delete _0x46ed63['dataValues'][a98_0x2e84('0xb')];if(_0x43e06d){return _0x43e06d[a98_0x2e84('0x10')]({'success':!![],'data':_0x46ed63});}else{return _0x46ed63;}})[a98_0x2e84('0x11')](_0x2b0193=>{if(_0x43e06d){return _0x43e06d['status'](0x1f4)[a98_0x2e84('0x13')]({'success':![],'data':_0x2b0193['stack']});}else{return _0x2b0193[a98_0x2e84('0x14')];}});}[a98_0x2e84('0x1f')](_0x27288a,_0x562d69,_0x428b57){if(!_0x27288a[a98_0x2e84('0x4')]||_0x27288a[a98_0x2e84('0x4')][a98_0x2e84('0x5')]==0x0){}if(_0x27288a[a98_0x2e84('0x4')]&&_0x27288a['user'][a98_0x2e84('0x5')]>0x0){_0x27288a[a98_0x2e84('0x1b')][a98_0x2e84('0x7')]=_0x27288a[a98_0x2e84('0x4')][0x0]['id'];}this['model']['findByPk'](_0x27288a[a98_0x2e84('0x1b')]['id'])[a98_0x2e84('0xc')](_0x1798ab=>{if(_0x1798ab==null)return _0x562d69[a98_0x2e84('0x10')]({'success':!![],'data':_0x1798ab});_0x1798ab[a98_0x2e84('0x20')](_0x27288a[a98_0x2e84('0x1b')],{'language_id':_0x27288a[a98_0x2e84('0x19')]['lang']})[a98_0x2e84('0xc')](function(_0x16a197){const _0x308210=this['i18n']?sequelize_utils_1['default'][a98_0x2e84('0x17')](_0x1798ab,_0x27288a['headers'][a98_0x2e84('0xe')]):_0x1798ab;return _0x562d69['json']({'success':!![],'data':_0x308210});}[a98_0x2e84('0x21')](this))['catch'](_0x87e28c=>{return _0x562d69[a98_0x2e84('0x12')](0x1f4)['send']({'success':![],'data':_0x87e28c[a98_0x2e84('0x14')]});});})[a98_0x2e84('0x11')](_0x271cd4=>{return _0x562d69[a98_0x2e84('0x12')](0x1f4)['send']({'success':![],'data':_0x271cd4[a98_0x2e84('0x14')]});});}['updateOrCreate'](_0x352a7d,_0x32f8b1,_0x1fc101,_0x422c60=![]){if(!_0x352a7d[a98_0x2e84('0x4')]||_0x352a7d[a98_0x2e84('0x4')][a98_0x2e84('0x5')]==0x0){}if(_0x352a7d[a98_0x2e84('0x4')]&&_0x352a7d[a98_0x2e84('0x4')][a98_0x2e84('0x5')]>0x0){_0x352a7d['body'][a98_0x2e84('0x7')]=_0x352a7d[a98_0x2e84('0x4')][0x0]['id'];}console[a98_0x2e84('0x22')](_0x352a7d[a98_0x2e84('0x23')]);return this[a98_0x2e84('0x2')][a98_0x2e84('0x24')]({'where':_0x352a7d[a98_0x2e84('0x23')]})[a98_0x2e84('0xc')](function(_0x40b0ca){if(_0x40b0ca){return _0x40b0ca[a98_0x2e84('0x20')](_0x352a7d['body'])[a98_0x2e84('0xc')](function(_0x474edb){const _0x9f76a8=_0x474edb['dataValues'];if(_0x422c60){delete _0x9f76a8['id'];}if(_0x32f8b1){return _0x32f8b1['json']({'success':!![],'data':_0x9f76a8});}else{return _0x9f76a8;}}[a98_0x2e84('0x21')](this));}else{return this[a98_0x2e84('0x2')]['create'](_0x352a7d[a98_0x2e84('0x1b')])[a98_0x2e84('0xc')](function(_0x104d0c){if(_0x32f8b1){return _0x32f8b1[a98_0x2e84('0x10')]({'success':!![],'data':_0x104d0c[a98_0x2e84('0xf')]()});}else{return _0x104d0c;}});}}[a98_0x2e84('0x21')](this))[a98_0x2e84('0x11')](_0x90a07e=>{if(_0x32f8b1){return _0x32f8b1[a98_0x2e84('0x12')](0x1f4)[a98_0x2e84('0x13')]({'success':![],'data':_0x90a07e['stack']});}else{return _0x90a07e[a98_0x2e84('0x14')];}});}[a98_0x2e84('0x25')](_0x452267,_0x59e1ea,_0x5569fc){if(!_0x452267[a98_0x2e84('0x4')]||_0x452267[a98_0x2e84('0x4')]['length']==0x0){}if(_0x452267[a98_0x2e84('0x4')]&&_0x452267[a98_0x2e84('0x4')][a98_0x2e84('0x5')]>0x0){_0x452267['body']['created_by_user_id']=_0x452267[a98_0x2e84('0x4')][0x0]['id'];}return this[a98_0x2e84('0x2')][a98_0x2e84('0x25')]({'where':{'uuid':_0x452267[a98_0x2e84('0x1b')]['uuid']},'defaults':_0x452267[a98_0x2e84('0x1b')]})[a98_0x2e84('0xc')]((_0x5d2705,_0x10d49b)=>{if(_0x10d49b){}else{}return _0x59e1ea[a98_0x2e84('0x10')]({'success':!![],'data':_0x5d2705});})[a98_0x2e84('0x11')](_0x1fb8f4=>{return _0x59e1ea['status'](0x1f4)['send']({'success':![],'data':_0x1fb8f4[a98_0x2e84('0x14')]});});}[a98_0x2e84('0x26')](_0x581e13,_0x387efd,_0x565bc3){if(!_0x581e13[a98_0x2e84('0x4')]||_0x581e13['user']['length']==0x0){return _0x387efd[a98_0x2e84('0x12')](0x191)[a98_0x2e84('0x13')]({'success':![],'data':a98_0x2e84('0x15')});}if(_0x581e13[a98_0x2e84('0x4')]&&_0x581e13[a98_0x2e84('0x4')]['length']>0x0){_0x581e13['body'][a98_0x2e84('0x7')]=_0x581e13['user'][0x0]['id'];}this[a98_0x2e84('0x2')][a98_0x2e84('0x16')](_0x581e13[a98_0x2e84('0x23')]['id'])[a98_0x2e84('0xc')](_0x2e33f7=>{if(_0x2e33f7==null)return _0x387efd[a98_0x2e84('0x10')]({'success':!![],'data':_0x2e33f7});_0x2e33f7[a98_0x2e84('0x27')]()[a98_0x2e84('0xc')](function(_0x3f12e5){const _0x597296=this[a98_0x2e84('0x3')]?sequelize_utils_1[a98_0x2e84('0xd')][a98_0x2e84('0x17')](_0x2e33f7,_0x581e13[a98_0x2e84('0x19')][a98_0x2e84('0xe')]):_0x2e33f7;return _0x387efd[a98_0x2e84('0x10')]({'success':!![],'data':_0x597296});})[a98_0x2e84('0x11')](_0x5dec88=>{return _0x387efd[a98_0x2e84('0x12')](0x1f4)[a98_0x2e84('0x13')]({'success':![],'data':_0x5dec88[a98_0x2e84('0x14')]});});})['catch'](_0x2a7d68=>{return _0x387efd[a98_0x2e84('0x12')](0x1f4)[a98_0x2e84('0x13')]({'success':![],'data':_0x2a7d68[a98_0x2e84('0x14')]});});}}exports[a98_0x2e84('0xd')]=CrudUtils;