var a105_0x3d8d=['body','create','dataValues','findByPk','update','bind','updateOrCreate','findOne','findOrCreate','uuid','authentication\x20failed','destroy','__esModule','defineProperty','./sequelize-utils','i18n','count','user','model','params','then','json','catch','status','send','stack','find','query','offset','limit','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','default','toJSONLocalizedOnly','headers','lang','toJSON','findById','findByUUId'];(function(_0x2370e6,_0x1aa6df){var _0x425786=function(_0x30493b){while(--_0x30493b){_0x2370e6['push'](_0x2370e6['shift']());}};_0x425786(++_0x1aa6df);}(a105_0x3d8d,0x174));var a105_0x286e=function(_0x1ec81f,_0x4d1739){_0x1ec81f=_0x1ec81f-0x0;var _0x532b2c=a105_0x3d8d[_0x1ec81f];return _0x532b2c;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x39a5bd){return _0x39a5bd&&_0x39a5bd[a105_0x286e('0x0')]?_0x39a5bd:{'default':_0x39a5bd};};Object[a105_0x286e('0x1')](exports,a105_0x286e('0x0'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a105_0x286e('0x2')));class CrudUtils{constructor(_0x1fb58e,_0x42539f){this['model']=_0x1fb58e;this[a105_0x286e('0x3')]=_0x42539f;}[a105_0x286e('0x4')](_0x32541a,_0x585d6a,_0x197f4e){if(!_0x32541a[a105_0x286e('0x5')]||_0x32541a[a105_0x286e('0x5')]['length']==0x0){}return this[a105_0x286e('0x6')]['count']({'where':_0x32541a[a105_0x286e('0x7')]})[a105_0x286e('0x8')](_0x42749f=>{const _0x1e9cef=_0x42749f;if(_0x585d6a){return _0x585d6a[a105_0x286e('0x9')]({'success':!![],'data':{'total':_0x42749f}});}else{return _0x1e9cef;}})[a105_0x286e('0xa')](_0x167bd1=>{if(_0x585d6a){return _0x585d6a[a105_0x286e('0xb')](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x167bd1[a105_0x286e('0xd')]});}else{return _0x167bd1[a105_0x286e('0xd')];}});}[a105_0x286e('0xe')](_0x73c66d,_0x5d1dff,_0x3e1cdf,_0x167cb8=![],_0x5b22d7=[],_0x2d0f7a=null){const _0x42ec0b=_0x73c66d[a105_0x286e('0xf')][a105_0x286e('0x10')]?Number(_0x73c66d[a105_0x286e('0xf')]['offset']):null;const _0x1effe5=_0x73c66d[a105_0x286e('0xf')][a105_0x286e('0x11')]?Number(_0x73c66d[a105_0x286e('0xf')][a105_0x286e('0x11')]):null;if(!_0x73c66d['user']||_0x73c66d[a105_0x286e('0x5')][a105_0x286e('0x12')]==0x0){}return this[a105_0x286e('0x6')][a105_0x286e('0x13')]({'attributes':{'exclude':_0x167cb8?[]:['id',a105_0x286e('0x14'),a105_0x286e('0x15'),a105_0x286e('0x16'),a105_0x286e('0x17'),a105_0x286e('0x18'),a105_0x286e('0x19')]},'where':_0x73c66d[a105_0x286e('0x7')],'offset':_0x42ec0b,'limit':_0x1effe5,'include':_0x5b22d7,'order':_0x2d0f7a})[a105_0x286e('0x8')](_0x424cfa=>{const _0x13b2c1=this[a105_0x286e('0x3')]?sequelize_utils_1[a105_0x286e('0x1a')][a105_0x286e('0x1b')](_0x424cfa,_0x73c66d[a105_0x286e('0x1c')][a105_0x286e('0x1d')]):sequelize_utils_1[a105_0x286e('0x1a')][a105_0x286e('0x1e')](_0x424cfa);if(_0x5d1dff){return _0x5d1dff[a105_0x286e('0x9')]({'success':!![],'data':_0x13b2c1});}else{return _0x13b2c1;}})['catch'](_0xb2e8e8=>{if(_0x5d1dff){return _0x5d1dff[a105_0x286e('0xb')](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0xb2e8e8[a105_0x286e('0xd')]});}else{return _0xb2e8e8['stack'];}});}[a105_0x286e('0x1f')](_0x3ca4af,_0x9af3ca,_0xc52ccc){if(!_0x3ca4af['user']||_0x3ca4af['user'][a105_0x286e('0x12')]==0x0){return _0x9af3ca[a105_0x286e('0xb')](0x191)['send']({'success':![],'data':'authentication\x20failed'});}this['model'][a105_0x286e('0x1f')](_0x3ca4af[a105_0x286e('0x7')]['id'])['then'](_0x129e6f=>{const _0x49852d=this[a105_0x286e('0x3')]?sequelize_utils_1[a105_0x286e('0x1a')]['toJSONLocalizedOnly'](_0x129e6f,_0x3ca4af[a105_0x286e('0x1c')][a105_0x286e('0x1d')]):_0x129e6f;return _0x9af3ca[a105_0x286e('0x9')]({'success':!![],'data':_0x49852d});})['catch'](_0x5a8308=>{return _0x9af3ca[a105_0x286e('0xb')](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x5a8308[a105_0x286e('0xd')]});});}[a105_0x286e('0x20')](_0x235543,_0x328b5b,_0x13db61){if(!_0x235543['user']||_0x235543[a105_0x286e('0x5')][a105_0x286e('0x12')]==0x0){}return this[a105_0x286e('0x6')]['findAll']({'where':{'uuid':_0x235543[a105_0x286e('0x7')]['uuid']}})[a105_0x286e('0x8')](_0x52649e=>{const _0x45aa50=this[a105_0x286e('0x3')]?sequelize_utils_1['default'][a105_0x286e('0x1b')](_0x52649e,_0x235543[a105_0x286e('0x1c')]['lang']):sequelize_utils_1['default'][a105_0x286e('0x1e')](_0x52649e);return _0x45aa50;})[a105_0x286e('0xa')](_0x553614=>{return _0x553614[a105_0x286e('0xd')];});}['save'](_0x4cffda,_0x382b42,_0x531e70){if(!_0x4cffda[a105_0x286e('0x5')]||_0x4cffda[a105_0x286e('0x5')][a105_0x286e('0x12')]==0x0){}if(_0x4cffda[a105_0x286e('0x5')]&&_0x4cffda[a105_0x286e('0x5')][a105_0x286e('0x12')]>0x0){_0x4cffda[a105_0x286e('0x21')]['created_by_user_id']=_0x4cffda[a105_0x286e('0x5')][0x0]['id'];}return this[a105_0x286e('0x6')][a105_0x286e('0x22')](_0x4cffda[a105_0x286e('0x21')],this['i18n']?{'language_id':_0x4cffda[a105_0x286e('0x1c')][a105_0x286e('0x1d')]}:{})['then'](_0xb93f9f=>{const _0x4ff470=this[a105_0x286e('0x3')]?sequelize_utils_1[a105_0x286e('0x1a')]['toJSONLocalizedOnly'](_0xb93f9f,_0x4cffda['headers'][a105_0x286e('0x1d')]):_0xb93f9f;delete _0x4ff470[a105_0x286e('0x23')]['id'];delete _0x4ff470['dataValues'][a105_0x286e('0x14')];delete _0x4ff470[a105_0x286e('0x23')][a105_0x286e('0x15')];delete _0x4ff470['dataValues'][a105_0x286e('0x16')];delete _0x4ff470['dataValues']['created_at'];delete _0x4ff470[a105_0x286e('0x23')][a105_0x286e('0x18')];delete _0x4ff470[a105_0x286e('0x23')][a105_0x286e('0x19')];if(_0x382b42){return _0x382b42[a105_0x286e('0x9')]({'success':!![],'data':_0x4ff470});}else{return _0x4ff470;}})['catch'](_0x725d44=>{if(_0x382b42){return _0x382b42[a105_0x286e('0xb')](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x725d44['stack']});}else{return _0x725d44['stack'];}});}['findOneAndUpdate'](_0x10fa52,_0x3e67fc,_0x819417){if(!_0x10fa52[a105_0x286e('0x5')]||_0x10fa52[a105_0x286e('0x5')][a105_0x286e('0x12')]==0x0){}if(_0x10fa52[a105_0x286e('0x5')]&&_0x10fa52[a105_0x286e('0x5')]['length']>0x0){}this[a105_0x286e('0x6')][a105_0x286e('0x24')](_0x10fa52[a105_0x286e('0x21')]['id'])['then'](_0x46b4fd=>{if(_0x46b4fd==null)return _0x3e67fc['json']({'success':!![],'data':_0x46b4fd});_0x46b4fd[a105_0x286e('0x25')](_0x10fa52['body'],{'language_id':_0x10fa52[a105_0x286e('0x1c')][a105_0x286e('0x1d')]})[a105_0x286e('0x8')](function(_0x59df3f){const _0x5eb218=this['i18n']?sequelize_utils_1[a105_0x286e('0x1a')][a105_0x286e('0x1b')](_0x46b4fd,_0x10fa52[a105_0x286e('0x1c')][a105_0x286e('0x1d')]):_0x46b4fd;return _0x3e67fc[a105_0x286e('0x9')]({'success':!![],'data':_0x5eb218});}[a105_0x286e('0x26')](this))['catch'](_0x1cd150=>{return _0x3e67fc[a105_0x286e('0xb')](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x1cd150[a105_0x286e('0xd')]});});})[a105_0x286e('0xa')](_0x4abc77=>{return _0x3e67fc['status'](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x4abc77[a105_0x286e('0xd')]});});}[a105_0x286e('0x27')](_0x575d39,_0xfc51c,_0x32a4ad,_0x148c15=![]){if(!_0x575d39[a105_0x286e('0x5')]||_0x575d39['user']['length']==0x0){}if(_0x575d39[a105_0x286e('0x5')]&&_0x575d39[a105_0x286e('0x5')]['length']>0x0){}return this[a105_0x286e('0x6')][a105_0x286e('0x28')]({'where':_0x575d39[a105_0x286e('0x7')]})[a105_0x286e('0x8')](function(_0x3445ab){if(_0x3445ab){return _0x3445ab[a105_0x286e('0x25')](_0x575d39[a105_0x286e('0x21')])[a105_0x286e('0x8')](function(_0x112622){const _0x26d8f3=_0x112622[a105_0x286e('0x23')];if(_0x148c15){delete _0x26d8f3['id'];}if(_0xfc51c){return _0xfc51c[a105_0x286e('0x9')]({'success':!![],'data':_0x26d8f3});}else{return _0x26d8f3;}}[a105_0x286e('0x26')](this));}else{return this[a105_0x286e('0x6')]['create'](_0x575d39[a105_0x286e('0x21')])[a105_0x286e('0x8')](function(_0x221afa){if(_0xfc51c){return _0xfc51c['json']({'success':!![],'data':_0x221afa[a105_0x286e('0x1e')]()});}else{return _0x221afa;}});}}['bind'](this))[a105_0x286e('0xa')](_0x140a09=>{if(_0xfc51c){return _0xfc51c[a105_0x286e('0xb')](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x140a09[a105_0x286e('0xd')]});}else{return _0x140a09[a105_0x286e('0xd')];}});}[a105_0x286e('0x29')](_0x2f6022,_0x322d0e,_0x4f4a5a){if(!_0x2f6022[a105_0x286e('0x5')]||_0x2f6022[a105_0x286e('0x5')][a105_0x286e('0x12')]==0x0){}if(_0x2f6022[a105_0x286e('0x5')]&&_0x2f6022[a105_0x286e('0x5')][a105_0x286e('0x12')]>0x0){}return this['model'][a105_0x286e('0x29')]({'where':{'uuid':_0x2f6022[a105_0x286e('0x21')][a105_0x286e('0x2a')]},'defaults':_0x2f6022[a105_0x286e('0x21')]})[a105_0x286e('0x8')]((_0xfbfe5a,_0x56f3d2)=>{if(_0x56f3d2){}else{}return _0x322d0e['json']({'success':!![],'data':_0xfbfe5a});})[a105_0x286e('0xa')](_0x5413c7=>{return _0x322d0e[a105_0x286e('0xb')](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x5413c7[a105_0x286e('0xd')]});});}['remove'](_0x4c9d85,_0x446080,_0x29442c){if(!_0x4c9d85[a105_0x286e('0x5')]||_0x4c9d85['user'][a105_0x286e('0x12')]==0x0){return _0x446080['status'](0x191)[a105_0x286e('0xc')]({'success':![],'data':a105_0x286e('0x2b')});}if(_0x4c9d85['user']&&_0x4c9d85[a105_0x286e('0x5')][a105_0x286e('0x12')]>0x0){_0x4c9d85[a105_0x286e('0x21')]['created_by_user_id']=_0x4c9d85[a105_0x286e('0x5')][0x0]['id'];}this[a105_0x286e('0x6')][a105_0x286e('0x1f')](_0x4c9d85['params']['id'])[a105_0x286e('0x8')](_0xe1689a=>{if(_0xe1689a==null)return _0x446080[a105_0x286e('0x9')]({'success':!![],'data':_0xe1689a});_0xe1689a[a105_0x286e('0x2c')]()[a105_0x286e('0x8')](function(_0x5ba86c){const _0x3f612d=this['i18n']?sequelize_utils_1[a105_0x286e('0x1a')][a105_0x286e('0x1b')](_0xe1689a,_0x4c9d85[a105_0x286e('0x1c')]['lang']):_0xe1689a;return _0x446080['json']({'success':!![],'data':_0x3f612d});})[a105_0x286e('0xa')](_0x5c9cae=>{return _0x446080['status'](0x1f4)[a105_0x286e('0xc')]({'success':![],'data':_0x5c9cae['stack']});});})['catch'](_0x1366ba=>{return _0x446080[a105_0x286e('0xb')](0x1f4)['send']({'success':![],'data':_0x1366ba[a105_0x286e('0xd')]});});}}exports[a105_0x286e('0x1a')]=CrudUtils;