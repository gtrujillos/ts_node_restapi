var a99_0x45ae=['params','then','json','catch','status','send','stack','find','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','updated_at','deleted_at','default','toJSONLocalizedOnly','headers','lang','toJSON','findById','findByUUId','uuid','body','create','dataValues','created_at','findOneAndUpdate','bind','updateOrCreate','findOne','update','findOrCreate','remove','authentication\x20failed','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','i18n','user','length','model','count'];(function(_0x347e5d,_0x5cb90c){var _0x3d0c7f=function(_0x41df07){while(--_0x41df07){_0x347e5d['push'](_0x347e5d['shift']());}};_0x3d0c7f(++_0x5cb90c);}(a99_0x45ae,0x1db));var a99_0x3e3c=function(_0x5d38f4,_0x12c15f){_0x5d38f4=_0x5d38f4-0x0;var _0x360541=a99_0x45ae[_0x5d38f4];return _0x360541;};'use strict';var __importDefault=this&&this[a99_0x3e3c('0x0')]||function(_0x1e107e){return _0x1e107e&&_0x1e107e[a99_0x3e3c('0x1')]?_0x1e107e:{'default':_0x1e107e};};Object[a99_0x3e3c('0x2')](exports,a99_0x3e3c('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x3e3c('0x3')));class CrudUtils{constructor(_0x1872e4,_0x56ceed){this['model']=_0x1872e4;this[a99_0x3e3c('0x4')]=_0x56ceed;}['count'](_0x1cb298,_0x2ba340,_0xf169f8){if(!_0x1cb298['user']||_0x1cb298[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]==0x0){}return this[a99_0x3e3c('0x7')][a99_0x3e3c('0x8')]({'where':_0x1cb298[a99_0x3e3c('0x9')]})[a99_0x3e3c('0xa')](_0x6ea4d8=>{const _0x47b8ab=_0x6ea4d8;if(_0x2ba340){return _0x2ba340[a99_0x3e3c('0xb')]({'success':!![],'data':{'total':_0x6ea4d8}});}else{return _0x47b8ab;}})[a99_0x3e3c('0xc')](_0x4d8ab1=>{if(_0x2ba340){return _0x2ba340[a99_0x3e3c('0xd')](0x1f4)[a99_0x3e3c('0xe')]({'success':![],'data':_0x4d8ab1[a99_0x3e3c('0xf')]});}else{return _0x4d8ab1[a99_0x3e3c('0xf')];}});}[a99_0x3e3c('0x10')](_0x5247b8,_0x46065e,_0x1bea3b,_0x1699fe=![],_0xa8058a=[]){if(!_0x5247b8['user']||_0x5247b8[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]==0x0){}return this[a99_0x3e3c('0x7')][a99_0x3e3c('0x11')]({'attributes':{'exclude':_0x1699fe?[]:['id',a99_0x3e3c('0x12'),a99_0x3e3c('0x13'),a99_0x3e3c('0x14'),'created_at',a99_0x3e3c('0x15'),a99_0x3e3c('0x16')]},'where':_0x5247b8['params'],'include':_0xa8058a})['then'](_0x273bd6=>{const _0x18d00e=this[a99_0x3e3c('0x4')]?sequelize_utils_1[a99_0x3e3c('0x17')][a99_0x3e3c('0x18')](_0x273bd6,_0x5247b8[a99_0x3e3c('0x19')][a99_0x3e3c('0x1a')]):sequelize_utils_1[a99_0x3e3c('0x17')][a99_0x3e3c('0x1b')](_0x273bd6);if(_0x46065e){return _0x46065e[a99_0x3e3c('0xb')]({'success':!![],'data':_0x18d00e});}else{return _0x18d00e;}})['catch'](_0x96d182=>{if(_0x46065e){return _0x46065e[a99_0x3e3c('0xd')](0x1f4)['send']({'success':![],'data':_0x96d182[a99_0x3e3c('0xf')]});}else{return _0x96d182[a99_0x3e3c('0xf')];}});}[a99_0x3e3c('0x1c')](_0x44dce6,_0x13585d,_0x515320){if(!_0x44dce6[a99_0x3e3c('0x5')]||_0x44dce6[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]==0x0){return _0x13585d[a99_0x3e3c('0xd')](0x191)[a99_0x3e3c('0xe')]({'success':![],'data':'authentication\x20failed'});}this[a99_0x3e3c('0x7')][a99_0x3e3c('0x1c')](_0x44dce6['params']['id'])[a99_0x3e3c('0xa')](_0x5f0937=>{const _0x1558e4=this[a99_0x3e3c('0x4')]?sequelize_utils_1[a99_0x3e3c('0x17')][a99_0x3e3c('0x18')](_0x5f0937,_0x44dce6[a99_0x3e3c('0x19')][a99_0x3e3c('0x1a')]):_0x5f0937;return _0x13585d[a99_0x3e3c('0xb')]({'success':!![],'data':_0x1558e4});})['catch'](_0x4e794b=>{return _0x13585d['status'](0x1f4)['send']({'success':![],'data':_0x4e794b[a99_0x3e3c('0xf')]});});}[a99_0x3e3c('0x1d')](_0x3170e5,_0x2982be,_0x299791){if(!_0x3170e5[a99_0x3e3c('0x5')]||_0x3170e5['user'][a99_0x3e3c('0x6')]==0x0){}return this['model']['findAll']({'where':{'uuid':_0x3170e5['params'][a99_0x3e3c('0x1e')]}})[a99_0x3e3c('0xa')](_0x425760=>{const _0x11a90c=this['i18n']?sequelize_utils_1[a99_0x3e3c('0x17')][a99_0x3e3c('0x18')](_0x425760,_0x3170e5[a99_0x3e3c('0x19')]['lang']):sequelize_utils_1['default']['toJSON'](_0x425760);return _0x11a90c;})[a99_0x3e3c('0xc')](_0x11e9b0=>{return _0x11e9b0[a99_0x3e3c('0xf')];});}['save'](_0x1650e5,_0x30cfd5,_0x18f818){if(!_0x1650e5[a99_0x3e3c('0x5')]||_0x1650e5[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]==0x0){}if(_0x1650e5[a99_0x3e3c('0x5')]&&_0x1650e5[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]>0x0){_0x1650e5[a99_0x3e3c('0x1f')]['created_by_user_id']=_0x1650e5[a99_0x3e3c('0x5')][0x0]['id'];}return this[a99_0x3e3c('0x7')][a99_0x3e3c('0x20')](_0x1650e5[a99_0x3e3c('0x1f')],this[a99_0x3e3c('0x4')]?{'language_id':_0x1650e5[a99_0x3e3c('0x19')][a99_0x3e3c('0x1a')]}:{})[a99_0x3e3c('0xa')](_0x1dad99=>{const _0xe2b9c1=this[a99_0x3e3c('0x4')]?sequelize_utils_1[a99_0x3e3c('0x17')][a99_0x3e3c('0x18')](_0x1dad99,_0x1650e5['headers'][a99_0x3e3c('0x1a')]):_0x1dad99;delete _0xe2b9c1[a99_0x3e3c('0x21')]['id'];delete _0xe2b9c1[a99_0x3e3c('0x21')][a99_0x3e3c('0x12')];delete _0xe2b9c1[a99_0x3e3c('0x21')][a99_0x3e3c('0x13')];delete _0xe2b9c1[a99_0x3e3c('0x21')][a99_0x3e3c('0x14')];delete _0xe2b9c1['dataValues'][a99_0x3e3c('0x22')];delete _0xe2b9c1[a99_0x3e3c('0x21')][a99_0x3e3c('0x15')];delete _0xe2b9c1[a99_0x3e3c('0x21')][a99_0x3e3c('0x16')];if(_0x30cfd5){return _0x30cfd5['json']({'success':!![],'data':_0xe2b9c1});}else{return _0xe2b9c1;}})[a99_0x3e3c('0xc')](_0x1802c6=>{if(_0x30cfd5){return _0x30cfd5[a99_0x3e3c('0xd')](0x1f4)[a99_0x3e3c('0xe')]({'success':![],'data':_0x1802c6[a99_0x3e3c('0xf')]});}else{return _0x1802c6[a99_0x3e3c('0xf')];}});}[a99_0x3e3c('0x23')](_0x5c6387,_0x5931f8,_0x27f876){if(!_0x5c6387[a99_0x3e3c('0x5')]||_0x5c6387[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]==0x0){}if(_0x5c6387[a99_0x3e3c('0x5')]&&_0x5c6387['user']['length']>0x0){}this[a99_0x3e3c('0x7')]['findByPk'](_0x5c6387[a99_0x3e3c('0x1f')]['id'])['then'](_0x1016d2=>{if(_0x1016d2==null)return _0x5931f8[a99_0x3e3c('0xb')]({'success':!![],'data':_0x1016d2});_0x1016d2['update'](_0x5c6387['body'],{'language_id':_0x5c6387[a99_0x3e3c('0x19')][a99_0x3e3c('0x1a')]})[a99_0x3e3c('0xa')](function(_0x2b831b){const _0x26930a=this['i18n']?sequelize_utils_1[a99_0x3e3c('0x17')][a99_0x3e3c('0x18')](_0x1016d2,_0x5c6387[a99_0x3e3c('0x19')][a99_0x3e3c('0x1a')]):_0x1016d2;return _0x5931f8[a99_0x3e3c('0xb')]({'success':!![],'data':_0x26930a});}[a99_0x3e3c('0x24')](this))['catch'](_0x434c11=>{return _0x5931f8[a99_0x3e3c('0xd')](0x1f4)['send']({'success':![],'data':_0x434c11[a99_0x3e3c('0xf')]});});})['catch'](_0x49bace=>{return _0x5931f8[a99_0x3e3c('0xd')](0x1f4)['send']({'success':![],'data':_0x49bace[a99_0x3e3c('0xf')]});});}[a99_0x3e3c('0x25')](_0x21d2ac,_0x59b53b,_0x5c9bde,_0x11f400=![]){if(!_0x21d2ac[a99_0x3e3c('0x5')]||_0x21d2ac[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]==0x0){}if(_0x21d2ac[a99_0x3e3c('0x5')]&&_0x21d2ac[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]>0x0){}return this['model'][a99_0x3e3c('0x26')]({'where':_0x21d2ac['params']})[a99_0x3e3c('0xa')](function(_0x38b052){if(_0x38b052){return _0x38b052[a99_0x3e3c('0x27')](_0x21d2ac[a99_0x3e3c('0x1f')])[a99_0x3e3c('0xa')](function(_0x41a661){const _0x838ab6=_0x41a661['dataValues'];if(_0x11f400){delete _0x838ab6['id'];}if(_0x59b53b){return _0x59b53b[a99_0x3e3c('0xb')]({'success':!![],'data':_0x838ab6});}else{return _0x838ab6;}}['bind'](this));}else{return this['model'][a99_0x3e3c('0x20')](_0x21d2ac[a99_0x3e3c('0x1f')])['then'](function(_0x322032){if(_0x59b53b){return _0x59b53b[a99_0x3e3c('0xb')]({'success':!![],'data':_0x322032[a99_0x3e3c('0x1b')]()});}else{return _0x322032;}});}}[a99_0x3e3c('0x24')](this))['catch'](_0x108d22=>{if(_0x59b53b){return _0x59b53b[a99_0x3e3c('0xd')](0x1f4)[a99_0x3e3c('0xe')]({'success':![],'data':_0x108d22[a99_0x3e3c('0xf')]});}else{return _0x108d22['stack'];}});}[a99_0x3e3c('0x28')](_0x3deda3,_0x117975,_0x390faf){if(!_0x3deda3[a99_0x3e3c('0x5')]||_0x3deda3['user'][a99_0x3e3c('0x6')]==0x0){}if(_0x3deda3['user']&&_0x3deda3[a99_0x3e3c('0x5')][a99_0x3e3c('0x6')]>0x0){}return this['model'][a99_0x3e3c('0x28')]({'where':{'uuid':_0x3deda3[a99_0x3e3c('0x1f')][a99_0x3e3c('0x1e')]},'defaults':_0x3deda3[a99_0x3e3c('0x1f')]})['then']((_0x25e311,_0x6cd823)=>{if(_0x6cd823){}else{}return _0x117975['json']({'success':!![],'data':_0x25e311});})[a99_0x3e3c('0xc')](_0x5ec980=>{return _0x117975[a99_0x3e3c('0xd')](0x1f4)[a99_0x3e3c('0xe')]({'success':![],'data':_0x5ec980[a99_0x3e3c('0xf')]});});}[a99_0x3e3c('0x29')](_0x1ce86d,_0x433249,_0x558c46){if(!_0x1ce86d[a99_0x3e3c('0x5')]||_0x1ce86d[a99_0x3e3c('0x5')]['length']==0x0){return _0x433249[a99_0x3e3c('0xd')](0x191)[a99_0x3e3c('0xe')]({'success':![],'data':a99_0x3e3c('0x2a')});}if(_0x1ce86d[a99_0x3e3c('0x5')]&&_0x1ce86d[a99_0x3e3c('0x5')]['length']>0x0){_0x1ce86d[a99_0x3e3c('0x1f')]['created_by_user_id']=_0x1ce86d[a99_0x3e3c('0x5')][0x0]['id'];}this[a99_0x3e3c('0x7')]['findById'](_0x1ce86d[a99_0x3e3c('0x9')]['id'])[a99_0x3e3c('0xa')](_0xfd11cf=>{if(_0xfd11cf==null)return _0x433249[a99_0x3e3c('0xb')]({'success':!![],'data':_0xfd11cf});_0xfd11cf[a99_0x3e3c('0x2b')]()[a99_0x3e3c('0xa')](function(_0x33e10f){const _0x3f76dc=this['i18n']?sequelize_utils_1[a99_0x3e3c('0x17')]['toJSONLocalizedOnly'](_0xfd11cf,_0x1ce86d[a99_0x3e3c('0x19')][a99_0x3e3c('0x1a')]):_0xfd11cf;return _0x433249[a99_0x3e3c('0xb')]({'success':!![],'data':_0x3f76dc});})[a99_0x3e3c('0xc')](_0x1046a5=>{return _0x433249[a99_0x3e3c('0xd')](0x1f4)[a99_0x3e3c('0xe')]({'success':![],'data':_0x1046a5[a99_0x3e3c('0xf')]});});})[a99_0x3e3c('0xc')](_0x43a401=>{return _0x433249[a99_0x3e3c('0xd')](0x1f4)[a99_0x3e3c('0xe')]({'success':![],'data':_0x43a401['stack']});});}}exports[a99_0x3e3c('0x17')]=CrudUtils;