var a99_0x2cf9=['updated_by_user_id','deleted_by_user_id','created_at','updated_at','headers','toJSON','catch','status','findById','authentication\x20failed','default','toJSONLocalizedOnly','lang','uuid','save','body','dataValues','deleted_at','findOneAndUpdate','findByPk','update','updateOrCreate','findOne','bind','findOrCreate','remove','./sequelize-utils','i18n','user','length','model','params','then','json','send','stack','find','query','offset','limit','findAll','created_by_user_id'];(function(_0x222872,_0xc4f062){var _0x372b57=function(_0x1c96d7){while(--_0x1c96d7){_0x222872['push'](_0x222872['shift']());}};_0x372b57(++_0xc4f062);}(a99_0x2cf9,0x6e));var a99_0x5108=function(_0x513827,_0x230fe0){_0x513827=_0x513827-0x0;var _0x5e2f1e=a99_0x2cf9[_0x513827];return _0x5e2f1e;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4a9879){return _0x4a9879&&_0x4a9879['__esModule']?_0x4a9879:{'default':_0x4a9879};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x5108('0x0')));class CrudUtils{constructor(_0x26c666,_0x2ad2ff){this['model']=_0x26c666;this[a99_0x5108('0x1')]=_0x2ad2ff;}['count'](_0x4e130a,_0x327155,_0x46f3fa){if(!_0x4e130a[a99_0x5108('0x2')]||_0x4e130a['user'][a99_0x5108('0x3')]==0x0){}return this[a99_0x5108('0x4')]['count']({'where':_0x4e130a[a99_0x5108('0x5')]})[a99_0x5108('0x6')](_0x2a1a7e=>{const _0x3717e1=_0x2a1a7e;if(_0x327155){return _0x327155[a99_0x5108('0x7')]({'success':!![],'data':{'total':_0x2a1a7e}});}else{return _0x3717e1;}})['catch'](_0x3d5629=>{if(_0x327155){return _0x327155['status'](0x1f4)[a99_0x5108('0x8')]({'success':![],'data':_0x3d5629[a99_0x5108('0x9')]});}else{return _0x3d5629['stack'];}});}[a99_0x5108('0xa')](_0x5077f3,_0x5d90b3,_0x582352,_0x2a0e98=![],_0x2baee7=[]){const _0x5e31dd=_0x5077f3[a99_0x5108('0xb')]['offset']?Number(_0x5077f3['query'][a99_0x5108('0xc')]):null;const _0x69e4d4=_0x5077f3[a99_0x5108('0xb')][a99_0x5108('0xd')]?Number(_0x5077f3[a99_0x5108('0xb')][a99_0x5108('0xd')]):null;if(!_0x5077f3[a99_0x5108('0x2')]||_0x5077f3['user'][a99_0x5108('0x3')]==0x0){}return this[a99_0x5108('0x4')][a99_0x5108('0xe')]({'attributes':{'exclude':_0x2a0e98?[]:['id',a99_0x5108('0xf'),a99_0x5108('0x10'),a99_0x5108('0x11'),a99_0x5108('0x12'),a99_0x5108('0x13'),'deleted_at']},'where':_0x5077f3[a99_0x5108('0x5')],'offset':_0x5e31dd,'limit':_0x69e4d4,'include':_0x2baee7})[a99_0x5108('0x6')](_0x3b001e=>{const _0x2a2cbb=this[a99_0x5108('0x1')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0x3b001e,_0x5077f3[a99_0x5108('0x14')]['lang']):sequelize_utils_1['default'][a99_0x5108('0x15')](_0x3b001e);if(_0x5d90b3){return _0x5d90b3[a99_0x5108('0x7')]({'success':!![],'data':_0x2a2cbb});}else{return _0x2a2cbb;}})[a99_0x5108('0x16')](_0x1ef371=>{if(_0x5d90b3){return _0x5d90b3[a99_0x5108('0x17')](0x1f4)[a99_0x5108('0x8')]({'success':![],'data':_0x1ef371[a99_0x5108('0x9')]});}else{return _0x1ef371[a99_0x5108('0x9')];}});}[a99_0x5108('0x18')](_0x4a9fcb,_0x1570bc,_0xf160ba){if(!_0x4a9fcb['user']||_0x4a9fcb[a99_0x5108('0x2')][a99_0x5108('0x3')]==0x0){return _0x1570bc[a99_0x5108('0x17')](0x191)['send']({'success':![],'data':a99_0x5108('0x19')});}this[a99_0x5108('0x4')][a99_0x5108('0x18')](_0x4a9fcb[a99_0x5108('0x5')]['id'])['then'](_0xe2dea9=>{const _0x385687=this['i18n']?sequelize_utils_1[a99_0x5108('0x1a')][a99_0x5108('0x1b')](_0xe2dea9,_0x4a9fcb[a99_0x5108('0x14')][a99_0x5108('0x1c')]):_0xe2dea9;return _0x1570bc[a99_0x5108('0x7')]({'success':!![],'data':_0x385687});})['catch'](_0x53078a=>{return _0x1570bc[a99_0x5108('0x17')](0x1f4)['send']({'success':![],'data':_0x53078a[a99_0x5108('0x9')]});});}['findByUUId'](_0x23cb77,_0x378208,_0x36ad34){if(!_0x23cb77[a99_0x5108('0x2')]||_0x23cb77[a99_0x5108('0x2')][a99_0x5108('0x3')]==0x0){}return this[a99_0x5108('0x4')][a99_0x5108('0xe')]({'where':{'uuid':_0x23cb77[a99_0x5108('0x5')][a99_0x5108('0x1d')]}})[a99_0x5108('0x6')](_0x11a4fa=>{const _0x3ad507=this['i18n']?sequelize_utils_1[a99_0x5108('0x1a')]['toJSONLocalizedOnly'](_0x11a4fa,_0x23cb77[a99_0x5108('0x14')][a99_0x5108('0x1c')]):sequelize_utils_1[a99_0x5108('0x1a')]['toJSON'](_0x11a4fa);return _0x3ad507;})[a99_0x5108('0x16')](_0x625952=>{return _0x625952[a99_0x5108('0x9')];});}[a99_0x5108('0x1e')](_0x51cc81,_0x50d875,_0x6f9a12){if(!_0x51cc81[a99_0x5108('0x2')]||_0x51cc81['user']['length']==0x0){}if(_0x51cc81[a99_0x5108('0x2')]&&_0x51cc81[a99_0x5108('0x2')]['length']>0x0){_0x51cc81[a99_0x5108('0x1f')]['created_by_user_id']=_0x51cc81[a99_0x5108('0x2')][0x0]['id'];}return this[a99_0x5108('0x4')]['create'](_0x51cc81['body'],this[a99_0x5108('0x1')]?{'language_id':_0x51cc81['headers'][a99_0x5108('0x1c')]}:{})[a99_0x5108('0x6')](_0xf269a8=>{const _0x52749b=this[a99_0x5108('0x1')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0xf269a8,_0x51cc81[a99_0x5108('0x14')]['lang']):_0xf269a8;delete _0x52749b[a99_0x5108('0x20')]['id'];delete _0x52749b['dataValues'][a99_0x5108('0xf')];delete _0x52749b[a99_0x5108('0x20')][a99_0x5108('0x10')];delete _0x52749b[a99_0x5108('0x20')][a99_0x5108('0x11')];delete _0x52749b[a99_0x5108('0x20')][a99_0x5108('0x12')];delete _0x52749b[a99_0x5108('0x20')][a99_0x5108('0x13')];delete _0x52749b['dataValues'][a99_0x5108('0x21')];if(_0x50d875){return _0x50d875[a99_0x5108('0x7')]({'success':!![],'data':_0x52749b});}else{return _0x52749b;}})['catch'](_0x2c50d6=>{if(_0x50d875){return _0x50d875[a99_0x5108('0x17')](0x1f4)[a99_0x5108('0x8')]({'success':![],'data':_0x2c50d6['stack']});}else{return _0x2c50d6[a99_0x5108('0x9')];}});}[a99_0x5108('0x22')](_0x596097,_0x2ebba0,_0x19218a){if(!_0x596097['user']||_0x596097['user']['length']==0x0){}if(_0x596097[a99_0x5108('0x2')]&&_0x596097['user'][a99_0x5108('0x3')]>0x0){}this[a99_0x5108('0x4')][a99_0x5108('0x23')](_0x596097[a99_0x5108('0x1f')]['id'])[a99_0x5108('0x6')](_0xcb5243=>{if(_0xcb5243==null)return _0x2ebba0[a99_0x5108('0x7')]({'success':!![],'data':_0xcb5243});_0xcb5243[a99_0x5108('0x24')](_0x596097[a99_0x5108('0x1f')],{'language_id':_0x596097[a99_0x5108('0x14')][a99_0x5108('0x1c')]})[a99_0x5108('0x6')](function(_0x23d6d8){const _0x56dbbd=this[a99_0x5108('0x1')]?sequelize_utils_1[a99_0x5108('0x1a')][a99_0x5108('0x1b')](_0xcb5243,_0x596097[a99_0x5108('0x14')]['lang']):_0xcb5243;return _0x2ebba0[a99_0x5108('0x7')]({'success':!![],'data':_0x56dbbd});}['bind'](this))['catch'](_0x55c43d=>{return _0x2ebba0['status'](0x1f4)[a99_0x5108('0x8')]({'success':![],'data':_0x55c43d['stack']});});})[a99_0x5108('0x16')](_0x3a740b=>{return _0x2ebba0[a99_0x5108('0x17')](0x1f4)['send']({'success':![],'data':_0x3a740b[a99_0x5108('0x9')]});});}[a99_0x5108('0x25')](_0x586747,_0x483650,_0xbe21d9,_0x4edf7f=![]){if(!_0x586747[a99_0x5108('0x2')]||_0x586747[a99_0x5108('0x2')][a99_0x5108('0x3')]==0x0){}if(_0x586747[a99_0x5108('0x2')]&&_0x586747[a99_0x5108('0x2')][a99_0x5108('0x3')]>0x0){}return this[a99_0x5108('0x4')][a99_0x5108('0x26')]({'where':_0x586747[a99_0x5108('0x5')]})[a99_0x5108('0x6')](function(_0x24ecb1){if(_0x24ecb1){return _0x24ecb1[a99_0x5108('0x24')](_0x586747[a99_0x5108('0x1f')])[a99_0x5108('0x6')](function(_0x4e5e7){const _0x3a2b38=_0x4e5e7['dataValues'];if(_0x4edf7f){delete _0x3a2b38['id'];}if(_0x483650){return _0x483650[a99_0x5108('0x7')]({'success':!![],'data':_0x3a2b38});}else{return _0x3a2b38;}}[a99_0x5108('0x27')](this));}else{return this['model']['create'](_0x586747[a99_0x5108('0x1f')])['then'](function(_0x13750d){if(_0x483650){return _0x483650[a99_0x5108('0x7')]({'success':!![],'data':_0x13750d['toJSON']()});}else{return _0x13750d;}});}}['bind'](this))[a99_0x5108('0x16')](_0x52d409=>{if(_0x483650){return _0x483650[a99_0x5108('0x17')](0x1f4)[a99_0x5108('0x8')]({'success':![],'data':_0x52d409[a99_0x5108('0x9')]});}else{return _0x52d409[a99_0x5108('0x9')];}});}[a99_0x5108('0x28')](_0x26acd2,_0x238ebb,_0x53e994){if(!_0x26acd2['user']||_0x26acd2[a99_0x5108('0x2')][a99_0x5108('0x3')]==0x0){}if(_0x26acd2[a99_0x5108('0x2')]&&_0x26acd2[a99_0x5108('0x2')][a99_0x5108('0x3')]>0x0){}return this[a99_0x5108('0x4')][a99_0x5108('0x28')]({'where':{'uuid':_0x26acd2['body'][a99_0x5108('0x1d')]},'defaults':_0x26acd2[a99_0x5108('0x1f')]})[a99_0x5108('0x6')]((_0x5c3c75,_0x12ca40)=>{if(_0x12ca40){}else{}return _0x238ebb['json']({'success':!![],'data':_0x5c3c75});})[a99_0x5108('0x16')](_0xe31817=>{return _0x238ebb[a99_0x5108('0x17')](0x1f4)[a99_0x5108('0x8')]({'success':![],'data':_0xe31817['stack']});});}[a99_0x5108('0x29')](_0x1e6de3,_0x2f66e9,_0x3a2de4){if(!_0x1e6de3[a99_0x5108('0x2')]||_0x1e6de3[a99_0x5108('0x2')][a99_0x5108('0x3')]==0x0){return _0x2f66e9['status'](0x191)[a99_0x5108('0x8')]({'success':![],'data':a99_0x5108('0x19')});}if(_0x1e6de3[a99_0x5108('0x2')]&&_0x1e6de3[a99_0x5108('0x2')][a99_0x5108('0x3')]>0x0){_0x1e6de3[a99_0x5108('0x1f')]['created_by_user_id']=_0x1e6de3[a99_0x5108('0x2')][0x0]['id'];}this[a99_0x5108('0x4')][a99_0x5108('0x18')](_0x1e6de3['params']['id'])[a99_0x5108('0x6')](_0x3c78b7=>{if(_0x3c78b7==null)return _0x2f66e9[a99_0x5108('0x7')]({'success':!![],'data':_0x3c78b7});_0x3c78b7['destroy']()['then'](function(_0x274e38){const _0x376e1d=this['i18n']?sequelize_utils_1['default'][a99_0x5108('0x1b')](_0x3c78b7,_0x1e6de3['headers'][a99_0x5108('0x1c')]):_0x3c78b7;return _0x2f66e9['json']({'success':!![],'data':_0x376e1d});})['catch'](_0x389ed9=>{return _0x2f66e9[a99_0x5108('0x17')](0x1f4)['send']({'success':![],'data':_0x389ed9[a99_0x5108('0x9')]});});})[a99_0x5108('0x16')](_0x4b706a=>{return _0x2f66e9['status'](0x1f4)[a99_0x5108('0x8')]({'success':![],'data':_0x4b706a[a99_0x5108('0x9')]});});}}exports[a99_0x5108('0x1a')]=CrudUtils;