var a99_0x2c07=['headers','lang','default','toJSON','send','length','authentication\x20failed','findById','findByUUId','save','body','created_by_user_id','create','dataValues','updated_by_user_id','deleted_at','findByPk','update','bind','updateOrCreate','findOne','findOrCreate','remove','params','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','count','user','then','json','catch','status','stack','find','offset','query','limit','deleted_by_user_id','created_at','toJSONLocalizedOnly'];(function(_0x27053c,_0x6f21e4){var _0x1be143=function(_0x9856fc){while(--_0x9856fc){_0x27053c['push'](_0x27053c['shift']());}};_0x1be143(++_0x6f21e4);}(a99_0x2c07,0x154));var a99_0x4ced=function(_0x14885a,_0x423e44){_0x14885a=_0x14885a-0x0;var _0x1191a6=a99_0x2c07[_0x14885a];return _0x1191a6;};'use strict';var __importDefault=this&&this[a99_0x4ced('0x0')]||function(_0x19a025){return _0x19a025&&_0x19a025[a99_0x4ced('0x1')]?_0x19a025:{'default':_0x19a025};};Object[a99_0x4ced('0x2')](exports,a99_0x4ced('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x4ced('0x3')));class CrudUtils{constructor(_0x31a4c2,_0x21d5ef){this[a99_0x4ced('0x4')]=_0x31a4c2;this[a99_0x4ced('0x5')]=_0x21d5ef;}[a99_0x4ced('0x6')](_0x3b32c0,_0x736b68,_0xfa3ed6){if(!_0x3b32c0['user']||_0x3b32c0[a99_0x4ced('0x7')]['length']==0x0){}return this['model']['count']({'where':_0x3b32c0['params']})[a99_0x4ced('0x8')](_0x5c9b68=>{const _0x4e35c4=_0x5c9b68;if(_0x736b68){return _0x736b68[a99_0x4ced('0x9')]({'success':!![],'data':{'total':_0x5c9b68}});}else{return _0x4e35c4;}})[a99_0x4ced('0xa')](_0x44cbcd=>{if(_0x736b68){return _0x736b68[a99_0x4ced('0xb')](0x1f4)['send']({'success':![],'data':_0x44cbcd[a99_0x4ced('0xc')]});}else{return _0x44cbcd[a99_0x4ced('0xc')];}});}[a99_0x4ced('0xd')](_0x188eb6,_0x4d4e9e,_0x32641b,_0x1e04b4=![],_0x4d5079=[],_0x5a4377=null){const _0x6b88e9=_0x188eb6['query'][a99_0x4ced('0xe')]?Number(_0x188eb6[a99_0x4ced('0xf')]['offset']):null;const _0x44b62c=_0x188eb6[a99_0x4ced('0xf')][a99_0x4ced('0x10')]?Number(_0x188eb6['query']['limit']):null;if(!_0x188eb6[a99_0x4ced('0x7')]||_0x188eb6[a99_0x4ced('0x7')]['length']==0x0){}return this[a99_0x4ced('0x4')]['findAll']({'attributes':{'exclude':_0x1e04b4?[]:['id','created_by_user_id','updated_by_user_id',a99_0x4ced('0x11'),a99_0x4ced('0x12'),'updated_at','deleted_at']},'where':_0x188eb6['params'],'offset':_0x6b88e9,'limit':_0x44b62c,'include':_0x4d5079,'order':_0x5a4377})['then'](_0x3b376c=>{const _0x410f41=this['i18n']?sequelize_utils_1['default'][a99_0x4ced('0x13')](_0x3b376c,_0x188eb6[a99_0x4ced('0x14')][a99_0x4ced('0x15')]):sequelize_utils_1[a99_0x4ced('0x16')][a99_0x4ced('0x17')](_0x3b376c);if(_0x4d4e9e){return _0x4d4e9e['json']({'success':!![],'data':_0x410f41});}else{return _0x410f41;}})[a99_0x4ced('0xa')](_0x12dd79=>{if(_0x4d4e9e){return _0x4d4e9e[a99_0x4ced('0xb')](0x1f4)[a99_0x4ced('0x18')]({'success':![],'data':_0x12dd79[a99_0x4ced('0xc')]});}else{return _0x12dd79[a99_0x4ced('0xc')];}});}['findById'](_0x5dfd81,_0x557962,_0x59e293){if(!_0x5dfd81['user']||_0x5dfd81['user'][a99_0x4ced('0x19')]==0x0){return _0x557962[a99_0x4ced('0xb')](0x191)[a99_0x4ced('0x18')]({'success':![],'data':a99_0x4ced('0x1a')});}this[a99_0x4ced('0x4')][a99_0x4ced('0x1b')](_0x5dfd81['params']['id'])[a99_0x4ced('0x8')](_0x355516=>{const _0x591867=this[a99_0x4ced('0x5')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0x355516,_0x5dfd81['headers'][a99_0x4ced('0x15')]):_0x355516;return _0x557962[a99_0x4ced('0x9')]({'success':!![],'data':_0x591867});})[a99_0x4ced('0xa')](_0x1e523e=>{return _0x557962['status'](0x1f4)[a99_0x4ced('0x18')]({'success':![],'data':_0x1e523e['stack']});});}[a99_0x4ced('0x1c')](_0x2d4134,_0xfddb2d,_0x15f518){if(!_0x2d4134['user']||_0x2d4134[a99_0x4ced('0x7')]['length']==0x0){}return this['model']['findAll']({'where':{'uuid':_0x2d4134['params']['uuid']}})[a99_0x4ced('0x8')](_0xc3c425=>{const _0x182089=this[a99_0x4ced('0x5')]?sequelize_utils_1[a99_0x4ced('0x16')]['toJSONLocalizedOnly'](_0xc3c425,_0x2d4134[a99_0x4ced('0x14')][a99_0x4ced('0x15')]):sequelize_utils_1[a99_0x4ced('0x16')][a99_0x4ced('0x17')](_0xc3c425);return _0x182089;})[a99_0x4ced('0xa')](_0x3b5b07=>{return _0x3b5b07[a99_0x4ced('0xc')];});}[a99_0x4ced('0x1d')](_0x1bc39d,_0x1262de,_0x25b20a){if(!_0x1bc39d['user']||_0x1bc39d[a99_0x4ced('0x7')]['length']==0x0){}if(_0x1bc39d[a99_0x4ced('0x7')]&&_0x1bc39d[a99_0x4ced('0x7')][a99_0x4ced('0x19')]>0x0){_0x1bc39d[a99_0x4ced('0x1e')][a99_0x4ced('0x1f')]=_0x1bc39d[a99_0x4ced('0x7')][0x0]['id'];}return this[a99_0x4ced('0x4')][a99_0x4ced('0x20')](_0x1bc39d[a99_0x4ced('0x1e')],this[a99_0x4ced('0x5')]?{'language_id':_0x1bc39d[a99_0x4ced('0x14')][a99_0x4ced('0x15')]}:{})['then'](_0x4917fb=>{const _0x31b8d4=this[a99_0x4ced('0x5')]?sequelize_utils_1[a99_0x4ced('0x16')][a99_0x4ced('0x13')](_0x4917fb,_0x1bc39d[a99_0x4ced('0x14')][a99_0x4ced('0x15')]):_0x4917fb;delete _0x31b8d4[a99_0x4ced('0x21')]['id'];delete _0x31b8d4[a99_0x4ced('0x21')]['created_by_user_id'];delete _0x31b8d4[a99_0x4ced('0x21')][a99_0x4ced('0x22')];delete _0x31b8d4[a99_0x4ced('0x21')][a99_0x4ced('0x11')];delete _0x31b8d4[a99_0x4ced('0x21')]['created_at'];delete _0x31b8d4['dataValues']['updated_at'];delete _0x31b8d4[a99_0x4ced('0x21')][a99_0x4ced('0x23')];if(_0x1262de){return _0x1262de[a99_0x4ced('0x9')]({'success':!![],'data':_0x31b8d4});}else{return _0x31b8d4;}})[a99_0x4ced('0xa')](_0x4166a6=>{if(_0x1262de){return _0x1262de[a99_0x4ced('0xb')](0x1f4)[a99_0x4ced('0x18')]({'success':![],'data':_0x4166a6[a99_0x4ced('0xc')]});}else{return _0x4166a6[a99_0x4ced('0xc')];}});}['findOneAndUpdate'](_0x283251,_0x182ae1,_0x2e6297){if(!_0x283251['user']||_0x283251['user']['length']==0x0){}if(_0x283251[a99_0x4ced('0x7')]&&_0x283251['user'][a99_0x4ced('0x19')]>0x0){}this[a99_0x4ced('0x4')][a99_0x4ced('0x24')](_0x283251[a99_0x4ced('0x1e')]['id'])[a99_0x4ced('0x8')](_0x3aa2a3=>{if(_0x3aa2a3==null)return _0x182ae1[a99_0x4ced('0x9')]({'success':!![],'data':_0x3aa2a3});_0x3aa2a3[a99_0x4ced('0x25')](_0x283251['body'],{'language_id':_0x283251[a99_0x4ced('0x14')][a99_0x4ced('0x15')]})[a99_0x4ced('0x8')](function(_0x5d7f67){const _0x3086b2=this[a99_0x4ced('0x5')]?sequelize_utils_1['default'][a99_0x4ced('0x13')](_0x3aa2a3,_0x283251['headers'][a99_0x4ced('0x15')]):_0x3aa2a3;return _0x182ae1[a99_0x4ced('0x9')]({'success':!![],'data':_0x3086b2});}[a99_0x4ced('0x26')](this))['catch'](_0x30dada=>{return _0x182ae1[a99_0x4ced('0xb')](0x1f4)[a99_0x4ced('0x18')]({'success':![],'data':_0x30dada[a99_0x4ced('0xc')]});});})['catch'](_0x2005f5=>{return _0x182ae1[a99_0x4ced('0xb')](0x1f4)['send']({'success':![],'data':_0x2005f5[a99_0x4ced('0xc')]});});}[a99_0x4ced('0x27')](_0x17c8e4,_0x38534a,_0x466f4c,_0x3544fb=![]){if(!_0x17c8e4[a99_0x4ced('0x7')]||_0x17c8e4[a99_0x4ced('0x7')][a99_0x4ced('0x19')]==0x0){}if(_0x17c8e4[a99_0x4ced('0x7')]&&_0x17c8e4['user'][a99_0x4ced('0x19')]>0x0){}return this['model'][a99_0x4ced('0x28')]({'where':_0x17c8e4['params']})[a99_0x4ced('0x8')](function(_0x55af36){if(_0x55af36){return _0x55af36[a99_0x4ced('0x25')](_0x17c8e4[a99_0x4ced('0x1e')])[a99_0x4ced('0x8')](function(_0x35e4c2){const _0x43def1=_0x35e4c2['dataValues'];if(_0x3544fb){delete _0x43def1['id'];}if(_0x38534a){return _0x38534a[a99_0x4ced('0x9')]({'success':!![],'data':_0x43def1});}else{return _0x43def1;}}[a99_0x4ced('0x26')](this));}else{return this[a99_0x4ced('0x4')][a99_0x4ced('0x20')](_0x17c8e4[a99_0x4ced('0x1e')])['then'](function(_0x5969dc){if(_0x38534a){return _0x38534a[a99_0x4ced('0x9')]({'success':!![],'data':_0x5969dc[a99_0x4ced('0x17')]()});}else{return _0x5969dc;}});}}[a99_0x4ced('0x26')](this))[a99_0x4ced('0xa')](_0x1c7b2d=>{if(_0x38534a){return _0x38534a['status'](0x1f4)[a99_0x4ced('0x18')]({'success':![],'data':_0x1c7b2d['stack']});}else{return _0x1c7b2d[a99_0x4ced('0xc')];}});}[a99_0x4ced('0x29')](_0x9f2b22,_0x37d648,_0x28c68e){if(!_0x9f2b22[a99_0x4ced('0x7')]||_0x9f2b22[a99_0x4ced('0x7')][a99_0x4ced('0x19')]==0x0){}if(_0x9f2b22['user']&&_0x9f2b22['user'][a99_0x4ced('0x19')]>0x0){}return this['model'][a99_0x4ced('0x29')]({'where':{'uuid':_0x9f2b22[a99_0x4ced('0x1e')]['uuid']},'defaults':_0x9f2b22[a99_0x4ced('0x1e')]})['then']((_0x397500,_0x16a44c)=>{if(_0x16a44c){}else{}return _0x37d648[a99_0x4ced('0x9')]({'success':!![],'data':_0x397500});})[a99_0x4ced('0xa')](_0x16f9cc=>{return _0x37d648[a99_0x4ced('0xb')](0x1f4)[a99_0x4ced('0x18')]({'success':![],'data':_0x16f9cc[a99_0x4ced('0xc')]});});}[a99_0x4ced('0x2a')](_0x4463eb,_0x1479d2,_0x1d0a88){if(!_0x4463eb[a99_0x4ced('0x7')]||_0x4463eb[a99_0x4ced('0x7')][a99_0x4ced('0x19')]==0x0){return _0x1479d2['status'](0x191)[a99_0x4ced('0x18')]({'success':![],'data':'authentication\x20failed'});}if(_0x4463eb[a99_0x4ced('0x7')]&&_0x4463eb['user'][a99_0x4ced('0x19')]>0x0){_0x4463eb[a99_0x4ced('0x1e')][a99_0x4ced('0x1f')]=_0x4463eb[a99_0x4ced('0x7')][0x0]['id'];}this[a99_0x4ced('0x4')]['findById'](_0x4463eb[a99_0x4ced('0x2b')]['id'])['then'](_0x1d1776=>{if(_0x1d1776==null)return _0x1479d2['json']({'success':!![],'data':_0x1d1776});_0x1d1776[a99_0x4ced('0x2c')]()['then'](function(_0xd6edb7){const _0x4af704=this['i18n']?sequelize_utils_1[a99_0x4ced('0x16')][a99_0x4ced('0x13')](_0x1d1776,_0x4463eb[a99_0x4ced('0x14')][a99_0x4ced('0x15')]):_0x1d1776;return _0x1479d2['json']({'success':!![],'data':_0x4af704});})['catch'](_0x43d1ed=>{return _0x1479d2[a99_0x4ced('0xb')](0x1f4)[a99_0x4ced('0x18')]({'success':![],'data':_0x43d1ed['stack']});});})[a99_0x4ced('0xa')](_0x43f844=>{return _0x1479d2[a99_0x4ced('0xb')](0x1f4)['send']({'success':![],'data':_0x43f844['stack']});});}}exports[a99_0x4ced('0x16')]=CrudUtils;