var a99_0x28ad=['length','findAll','created_by_user_id','updated_by_user_id','created_at','updated_at','deleted_at','then','toJSON','catch','status','stack','send','authentication\x20failed','findById','params','default','toJSONLocalizedOnly','headers','lang','json','findByUUId','uuid','save','body','create','dataValues','findOneAndUpdate','findByPk','update','findOne','bind','findOrCreate','remove','__importDefault','__esModule','./sequelize-utils','model','i18n','find','user'];(function(_0xa2b705,_0x3574db){var _0x53854b=function(_0x3065f8){while(--_0x3065f8){_0xa2b705['push'](_0xa2b705['shift']());}};_0x53854b(++_0x3574db);}(a99_0x28ad,0x1e5));var a99_0x1ae9=function(_0xbcd7f9,_0x26e403){_0xbcd7f9=_0xbcd7f9-0x0;var _0x2ed5d4=a99_0x28ad[_0xbcd7f9];return _0x2ed5d4;};'use strict';var __importDefault=this&&this[a99_0x1ae9('0x0')]||function(_0x375d08){return _0x375d08&&_0x375d08['__esModule']?_0x375d08:{'default':_0x375d08};};Object['defineProperty'](exports,a99_0x1ae9('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x1ae9('0x2')));class CrudUtils{constructor(_0x1885a0,_0x29f03d){this[a99_0x1ae9('0x3')]=_0x1885a0;this[a99_0x1ae9('0x4')]=_0x29f03d;}[a99_0x1ae9('0x5')](_0x445f5b,_0x4e2c34,_0x193459,_0x27ef41=![]){if(!_0x445f5b[a99_0x1ae9('0x6')]||_0x445f5b['user'][a99_0x1ae9('0x7')]==0x0){}return this['model'][a99_0x1ae9('0x8')]({'attributes':{'exclude':_0x27ef41?[]:['id',a99_0x1ae9('0x9'),a99_0x1ae9('0xa'),'deleted_by_user_id',a99_0x1ae9('0xb'),a99_0x1ae9('0xc'),a99_0x1ae9('0xd')]},'where':{}})[a99_0x1ae9('0xe')](_0xfb1af3=>{const _0x46a2ef=this[a99_0x1ae9('0x4')]?sequelize_utils_1['default']['toJSONLocalizedOnly'](_0xfb1af3,_0x445f5b['headers']['lang']):sequelize_utils_1['default'][a99_0x1ae9('0xf')](_0xfb1af3);if(_0x4e2c34){return _0x4e2c34['json']({'success':!![],'data':_0x46a2ef});}else{return _0x46a2ef;}})[a99_0x1ae9('0x10')](_0x170fff=>{if(_0x4e2c34){return _0x4e2c34[a99_0x1ae9('0x11')](0x1f4)['send']({'success':![],'data':_0x170fff[a99_0x1ae9('0x12')]});}else{return _0x170fff['stack'];}});}['findById'](_0x5b082f,_0x14efd2,_0x2babeb){if(!_0x5b082f[a99_0x1ae9('0x6')]||_0x5b082f['user'][a99_0x1ae9('0x7')]==0x0){return _0x14efd2[a99_0x1ae9('0x11')](0x191)[a99_0x1ae9('0x13')]({'success':![],'data':a99_0x1ae9('0x14')});}this[a99_0x1ae9('0x3')][a99_0x1ae9('0x15')](_0x5b082f[a99_0x1ae9('0x16')]['id'])[a99_0x1ae9('0xe')](_0x45f1dc=>{const _0xd6f56=this['i18n']?sequelize_utils_1[a99_0x1ae9('0x17')][a99_0x1ae9('0x18')](_0x45f1dc,_0x5b082f[a99_0x1ae9('0x19')][a99_0x1ae9('0x1a')]):_0x45f1dc;return _0x14efd2[a99_0x1ae9('0x1b')]({'success':!![],'data':_0xd6f56});})[a99_0x1ae9('0x10')](_0x1fc173=>{return _0x14efd2['status'](0x1f4)['send']({'success':![],'data':_0x1fc173['stack']});});}[a99_0x1ae9('0x1c')](_0x166d1d,_0x4562d6,_0x5c1289){if(!_0x166d1d[a99_0x1ae9('0x6')]||_0x166d1d[a99_0x1ae9('0x6')][a99_0x1ae9('0x7')]==0x0){}return this[a99_0x1ae9('0x3')]['findAll']({'where':{'uuid':_0x166d1d[a99_0x1ae9('0x16')][a99_0x1ae9('0x1d')]}})[a99_0x1ae9('0xe')](_0x274b2b=>{const _0x25e8b4=this[a99_0x1ae9('0x4')]?sequelize_utils_1[a99_0x1ae9('0x17')][a99_0x1ae9('0x18')](_0x274b2b,_0x166d1d[a99_0x1ae9('0x19')][a99_0x1ae9('0x1a')]):sequelize_utils_1[a99_0x1ae9('0x17')][a99_0x1ae9('0xf')](_0x274b2b);return _0x25e8b4;})['catch'](_0x32368f=>{return _0x32368f[a99_0x1ae9('0x12')];});}[a99_0x1ae9('0x1e')](_0x44d4ab,_0x2a7d5b,_0x191430){if(!_0x44d4ab['user']||_0x44d4ab[a99_0x1ae9('0x6')][a99_0x1ae9('0x7')]==0x0){}if(_0x44d4ab[a99_0x1ae9('0x6')]&&_0x44d4ab[a99_0x1ae9('0x6')]['length']>0x0){_0x44d4ab[a99_0x1ae9('0x1f')][a99_0x1ae9('0x9')]=_0x44d4ab['user'][0x0]['id'];}return this[a99_0x1ae9('0x3')][a99_0x1ae9('0x20')](_0x44d4ab[a99_0x1ae9('0x1f')],this[a99_0x1ae9('0x4')]?{'language_id':_0x44d4ab[a99_0x1ae9('0x19')][a99_0x1ae9('0x1a')]}:{})['then'](_0x3b0a05=>{const _0x5cc277=this[a99_0x1ae9('0x4')]?sequelize_utils_1['default'][a99_0x1ae9('0x18')](_0x3b0a05,_0x44d4ab['headers'][a99_0x1ae9('0x1a')]):_0x3b0a05;delete _0x5cc277[a99_0x1ae9('0x21')]['id'];delete _0x5cc277['dataValues'][a99_0x1ae9('0x9')];delete _0x5cc277[a99_0x1ae9('0x21')]['updated_by_user_id'];delete _0x5cc277['dataValues']['deleted_by_user_id'];delete _0x5cc277[a99_0x1ae9('0x21')][a99_0x1ae9('0xb')];delete _0x5cc277['dataValues']['updated_at'];delete _0x5cc277[a99_0x1ae9('0x21')][a99_0x1ae9('0xd')];if(_0x2a7d5b){return _0x2a7d5b[a99_0x1ae9('0x1b')]({'success':!![],'data':_0x5cc277});}else{return _0x5cc277;}})[a99_0x1ae9('0x10')](_0x4fa276=>{if(_0x2a7d5b){return _0x2a7d5b[a99_0x1ae9('0x11')](0x1f4)['send']({'success':![],'data':_0x4fa276[a99_0x1ae9('0x12')]});}else{return _0x4fa276[a99_0x1ae9('0x12')];}});}[a99_0x1ae9('0x22')](_0x26cceb,_0x4ada23,_0x27ce2b){if(!_0x26cceb[a99_0x1ae9('0x6')]||_0x26cceb['user']['length']==0x0){}if(_0x26cceb[a99_0x1ae9('0x6')]&&_0x26cceb[a99_0x1ae9('0x6')][a99_0x1ae9('0x7')]>0x0){_0x26cceb[a99_0x1ae9('0x1f')][a99_0x1ae9('0x9')]=_0x26cceb['user'][0x0]['id'];}this[a99_0x1ae9('0x3')][a99_0x1ae9('0x23')](_0x26cceb[a99_0x1ae9('0x1f')]['id'])[a99_0x1ae9('0xe')](_0x30abca=>{if(_0x30abca==null)return _0x4ada23['json']({'success':!![],'data':_0x30abca});_0x30abca[a99_0x1ae9('0x24')](_0x26cceb['body'],{'language_id':_0x26cceb[a99_0x1ae9('0x19')]['lang']})[a99_0x1ae9('0xe')](function(_0x2cf4be){const _0x232fa1=this['i18n']?sequelize_utils_1[a99_0x1ae9('0x17')][a99_0x1ae9('0x18')](_0x30abca,_0x26cceb[a99_0x1ae9('0x19')][a99_0x1ae9('0x1a')]):_0x30abca;return _0x4ada23[a99_0x1ae9('0x1b')]({'success':!![],'data':_0x232fa1});}['bind'](this))[a99_0x1ae9('0x10')](_0xd070d9=>{return _0x4ada23[a99_0x1ae9('0x11')](0x1f4)[a99_0x1ae9('0x13')]({'success':![],'data':_0xd070d9[a99_0x1ae9('0x12')]});});})[a99_0x1ae9('0x10')](_0x704071=>{return _0x4ada23['status'](0x1f4)[a99_0x1ae9('0x13')]({'success':![],'data':_0x704071[a99_0x1ae9('0x12')]});});}['updateOrCreate'](_0x3ad83e,_0x39ad47,_0x46728c,_0x45471a=![]){if(!_0x3ad83e[a99_0x1ae9('0x6')]||_0x3ad83e[a99_0x1ae9('0x6')][a99_0x1ae9('0x7')]==0x0){}if(_0x3ad83e[a99_0x1ae9('0x6')]&&_0x3ad83e[a99_0x1ae9('0x6')]['length']>0x0){_0x3ad83e['body']['created_by_user_id']=_0x3ad83e[a99_0x1ae9('0x6')][0x0]['id'];}console['log'](_0x3ad83e[a99_0x1ae9('0x16')]);return this[a99_0x1ae9('0x3')][a99_0x1ae9('0x25')]({'where':_0x3ad83e[a99_0x1ae9('0x16')]})['then'](function(_0x399bca){if(_0x399bca){return _0x399bca['update'](_0x3ad83e['body'])[a99_0x1ae9('0xe')](function(_0x10cbc6){const _0x385d3a=_0x10cbc6[a99_0x1ae9('0x21')];if(_0x45471a){delete _0x385d3a['id'];}if(_0x39ad47){return _0x39ad47[a99_0x1ae9('0x1b')]({'success':!![],'data':_0x385d3a});}else{return _0x385d3a;}}[a99_0x1ae9('0x26')](this));}else{return this['model'][a99_0x1ae9('0x20')](_0x3ad83e['body'])['then'](function(_0x295df1){if(_0x39ad47){return _0x39ad47[a99_0x1ae9('0x1b')]({'success':!![],'data':_0x295df1['toJSON']()});}else{return _0x295df1;}});}}[a99_0x1ae9('0x26')](this))[a99_0x1ae9('0x10')](_0x56c8fb=>{if(_0x39ad47){return _0x39ad47[a99_0x1ae9('0x11')](0x1f4)[a99_0x1ae9('0x13')]({'success':![],'data':_0x56c8fb[a99_0x1ae9('0x12')]});}else{return _0x56c8fb[a99_0x1ae9('0x12')];}});}[a99_0x1ae9('0x27')](_0xfb4493,_0x285f12,_0x58560f){if(!_0xfb4493[a99_0x1ae9('0x6')]||_0xfb4493[a99_0x1ae9('0x6')][a99_0x1ae9('0x7')]==0x0){}if(_0xfb4493['user']&&_0xfb4493['user']['length']>0x0){_0xfb4493[a99_0x1ae9('0x1f')][a99_0x1ae9('0x9')]=_0xfb4493['user'][0x0]['id'];}return this[a99_0x1ae9('0x3')]['findOrCreate']({'where':{'uuid':_0xfb4493[a99_0x1ae9('0x1f')][a99_0x1ae9('0x1d')]},'defaults':_0xfb4493['body']})['then']((_0x272b24,_0x2950b3)=>{if(_0x2950b3){}else{}return _0x285f12[a99_0x1ae9('0x1b')]({'success':!![],'data':_0x272b24});})['catch'](_0x150dbf=>{return _0x285f12['status'](0x1f4)[a99_0x1ae9('0x13')]({'success':![],'data':_0x150dbf[a99_0x1ae9('0x12')]});});}[a99_0x1ae9('0x28')](_0x21a1c6,_0x5f21ff,_0x1b2ea2){if(!_0x21a1c6[a99_0x1ae9('0x6')]||_0x21a1c6[a99_0x1ae9('0x6')][a99_0x1ae9('0x7')]==0x0){return _0x5f21ff[a99_0x1ae9('0x11')](0x191)['send']({'success':![],'data':a99_0x1ae9('0x14')});}if(_0x21a1c6[a99_0x1ae9('0x6')]&&_0x21a1c6[a99_0x1ae9('0x6')][a99_0x1ae9('0x7')]>0x0){_0x21a1c6[a99_0x1ae9('0x1f')]['created_by_user_id']=_0x21a1c6[a99_0x1ae9('0x6')][0x0]['id'];}this[a99_0x1ae9('0x3')][a99_0x1ae9('0x15')](_0x21a1c6['params']['id'])[a99_0x1ae9('0xe')](_0x3108e4=>{if(_0x3108e4==null)return _0x5f21ff[a99_0x1ae9('0x1b')]({'success':!![],'data':_0x3108e4});_0x3108e4['destroy']()['then'](function(_0x238c6e){const _0x4cc788=this[a99_0x1ae9('0x4')]?sequelize_utils_1['default'][a99_0x1ae9('0x18')](_0x3108e4,_0x21a1c6['headers'][a99_0x1ae9('0x1a')]):_0x3108e4;return _0x5f21ff[a99_0x1ae9('0x1b')]({'success':!![],'data':_0x4cc788});})['catch'](_0x181999=>{return _0x5f21ff[a99_0x1ae9('0x11')](0x1f4)['send']({'success':![],'data':_0x181999['stack']});});})[a99_0x1ae9('0x10')](_0x4cfc98=>{return _0x5f21ff[a99_0x1ae9('0x11')](0x1f4)[a99_0x1ae9('0x13')]({'success':![],'data':_0x4cfc98['stack']});});}}exports[a99_0x1ae9('0x17')]=CrudUtils;