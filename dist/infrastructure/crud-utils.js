var a99_0x3b8f=['find','user','length','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','params','then','default','toJSONLocalizedOnly','headers','toJSON','json','catch','status','stack','send','authentication\x20failed','findById','lang','findByUUId','findAll','uuid','save','body','create','dataValues','update','updateOrCreate','findOne','bind','destroy','__esModule','defineProperty','./sequelize-utils','model','i18n'];(function(_0x33d540,_0x5b5022){var _0x4bef3a=function(_0xdd15b7){while(--_0xdd15b7){_0x33d540['push'](_0x33d540['shift']());}};_0x4bef3a(++_0x5b5022);}(a99_0x3b8f,0x9b));var a99_0x1b98=function(_0x208080,_0x406010){_0x208080=_0x208080-0x0;var _0x5e4209=a99_0x3b8f[_0x208080];return _0x5e4209;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1e9798){return _0x1e9798&&_0x1e9798[a99_0x1b98('0x0')]?_0x1e9798:{'default':_0x1e9798};};Object[a99_0x1b98('0x1')](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0x1b98('0x2')));class CrudUtils{constructor(_0x1271c2,_0x636161){this[a99_0x1b98('0x3')]=_0x1271c2;this[a99_0x1b98('0x4')]=_0x636161;}[a99_0x1b98('0x5')](_0x4230eb,_0x384870,_0x3bc96f,_0x18e66c=![],_0x2b81a7=[]){if(!_0x4230eb['user']||_0x4230eb[a99_0x1b98('0x6')][a99_0x1b98('0x7')]==0x0){}return this[a99_0x1b98('0x3')]['findAll']({'attributes':{'exclude':_0x18e66c?[]:['id',a99_0x1b98('0x8'),a99_0x1b98('0x9'),a99_0x1b98('0xa'),a99_0x1b98('0xb'),a99_0x1b98('0xc'),a99_0x1b98('0xd')]},'where':_0x4230eb[a99_0x1b98('0xe')],'include':_0x2b81a7})[a99_0x1b98('0xf')](_0x2f6fdb=>{const _0xde70dd=this[a99_0x1b98('0x4')]?sequelize_utils_1[a99_0x1b98('0x10')][a99_0x1b98('0x11')](_0x2f6fdb,_0x4230eb[a99_0x1b98('0x12')]['lang']):sequelize_utils_1[a99_0x1b98('0x10')][a99_0x1b98('0x13')](_0x2f6fdb);if(_0x384870){return _0x384870[a99_0x1b98('0x14')]({'success':!![],'data':_0xde70dd});}else{return _0xde70dd;}})[a99_0x1b98('0x15')](_0x1f5ea7=>{if(_0x384870){return _0x384870[a99_0x1b98('0x16')](0x1f4)['send']({'success':![],'data':_0x1f5ea7[a99_0x1b98('0x17')]});}else{return _0x1f5ea7[a99_0x1b98('0x17')];}});}['findById'](_0x5dba91,_0x35b2a6,_0x26f11a){if(!_0x5dba91[a99_0x1b98('0x6')]||_0x5dba91['user'][a99_0x1b98('0x7')]==0x0){return _0x35b2a6['status'](0x191)[a99_0x1b98('0x18')]({'success':![],'data':a99_0x1b98('0x19')});}this[a99_0x1b98('0x3')][a99_0x1b98('0x1a')](_0x5dba91['params']['id'])[a99_0x1b98('0xf')](_0x58dff=>{const _0x2936c8=this[a99_0x1b98('0x4')]?sequelize_utils_1[a99_0x1b98('0x10')][a99_0x1b98('0x11')](_0x58dff,_0x5dba91[a99_0x1b98('0x12')][a99_0x1b98('0x1b')]):_0x58dff;return _0x35b2a6[a99_0x1b98('0x14')]({'success':!![],'data':_0x2936c8});})[a99_0x1b98('0x15')](_0x391729=>{return _0x35b2a6[a99_0x1b98('0x16')](0x1f4)['send']({'success':![],'data':_0x391729[a99_0x1b98('0x17')]});});}[a99_0x1b98('0x1c')](_0x186bb9,_0x3d018d,_0x29b3a8){if(!_0x186bb9['user']||_0x186bb9[a99_0x1b98('0x6')]['length']==0x0){}return this[a99_0x1b98('0x3')][a99_0x1b98('0x1d')]({'where':{'uuid':_0x186bb9[a99_0x1b98('0xe')][a99_0x1b98('0x1e')]}})[a99_0x1b98('0xf')](_0x2ef8fb=>{const _0x23b4d8=this[a99_0x1b98('0x4')]?sequelize_utils_1[a99_0x1b98('0x10')]['toJSONLocalizedOnly'](_0x2ef8fb,_0x186bb9[a99_0x1b98('0x12')][a99_0x1b98('0x1b')]):sequelize_utils_1['default'][a99_0x1b98('0x13')](_0x2ef8fb);return _0x23b4d8;})[a99_0x1b98('0x15')](_0x599c5e=>{return _0x599c5e[a99_0x1b98('0x17')];});}[a99_0x1b98('0x1f')](_0x4319fe,_0x278b43,_0x402383){if(!_0x4319fe[a99_0x1b98('0x6')]||_0x4319fe[a99_0x1b98('0x6')][a99_0x1b98('0x7')]==0x0){}if(_0x4319fe[a99_0x1b98('0x6')]&&_0x4319fe['user'][a99_0x1b98('0x7')]>0x0){_0x4319fe[a99_0x1b98('0x20')][a99_0x1b98('0x8')]=_0x4319fe[a99_0x1b98('0x6')][0x0]['id'];}return this[a99_0x1b98('0x3')][a99_0x1b98('0x21')](_0x4319fe[a99_0x1b98('0x20')],this['i18n']?{'language_id':_0x4319fe[a99_0x1b98('0x12')][a99_0x1b98('0x1b')]}:{})[a99_0x1b98('0xf')](_0x487f9d=>{const _0x515da5=this['i18n']?sequelize_utils_1[a99_0x1b98('0x10')][a99_0x1b98('0x11')](_0x487f9d,_0x4319fe[a99_0x1b98('0x12')][a99_0x1b98('0x1b')]):_0x487f9d;delete _0x515da5[a99_0x1b98('0x22')]['id'];delete _0x515da5[a99_0x1b98('0x22')][a99_0x1b98('0x8')];delete _0x515da5[a99_0x1b98('0x22')]['updated_by_user_id'];delete _0x515da5[a99_0x1b98('0x22')][a99_0x1b98('0xa')];delete _0x515da5[a99_0x1b98('0x22')][a99_0x1b98('0xb')];delete _0x515da5['dataValues']['updated_at'];delete _0x515da5['dataValues'][a99_0x1b98('0xd')];if(_0x278b43){return _0x278b43[a99_0x1b98('0x14')]({'success':!![],'data':_0x515da5});}else{return _0x515da5;}})[a99_0x1b98('0x15')](_0x8fe8d9=>{if(_0x278b43){return _0x278b43['status'](0x1f4)[a99_0x1b98('0x18')]({'success':![],'data':_0x8fe8d9[a99_0x1b98('0x17')]});}else{return _0x8fe8d9[a99_0x1b98('0x17')];}});}['findOneAndUpdate'](_0x4eb061,_0x347892,_0x4622b2){if(!_0x4eb061[a99_0x1b98('0x6')]||_0x4eb061['user'][a99_0x1b98('0x7')]==0x0){}if(_0x4eb061[a99_0x1b98('0x6')]&&_0x4eb061[a99_0x1b98('0x6')][a99_0x1b98('0x7')]>0x0){}this[a99_0x1b98('0x3')]['findByPk'](_0x4eb061[a99_0x1b98('0x20')]['id'])[a99_0x1b98('0xf')](_0x421022=>{if(_0x421022==null)return _0x347892[a99_0x1b98('0x14')]({'success':!![],'data':_0x421022});_0x421022[a99_0x1b98('0x23')](_0x4eb061['body'],{'language_id':_0x4eb061[a99_0x1b98('0x12')][a99_0x1b98('0x1b')]})[a99_0x1b98('0xf')](function(_0x286bf3){const _0x58c08f=this[a99_0x1b98('0x4')]?sequelize_utils_1[a99_0x1b98('0x10')][a99_0x1b98('0x11')](_0x421022,_0x4eb061[a99_0x1b98('0x12')][a99_0x1b98('0x1b')]):_0x421022;return _0x347892[a99_0x1b98('0x14')]({'success':!![],'data':_0x58c08f});}['bind'](this))[a99_0x1b98('0x15')](_0x83ea03=>{return _0x347892[a99_0x1b98('0x16')](0x1f4)['send']({'success':![],'data':_0x83ea03[a99_0x1b98('0x17')]});});})[a99_0x1b98('0x15')](_0x1bfdb8=>{return _0x347892[a99_0x1b98('0x16')](0x1f4)[a99_0x1b98('0x18')]({'success':![],'data':_0x1bfdb8[a99_0x1b98('0x17')]});});}[a99_0x1b98('0x24')](_0x2d1773,_0x3a7f06,_0x16f4fd,_0x395450=![]){if(!_0x2d1773[a99_0x1b98('0x6')]||_0x2d1773[a99_0x1b98('0x6')][a99_0x1b98('0x7')]==0x0){}if(_0x2d1773[a99_0x1b98('0x6')]&&_0x2d1773[a99_0x1b98('0x6')][a99_0x1b98('0x7')]>0x0){}return this[a99_0x1b98('0x3')][a99_0x1b98('0x25')]({'where':_0x2d1773[a99_0x1b98('0xe')]})[a99_0x1b98('0xf')](function(_0x1942a4){if(_0x1942a4){return _0x1942a4['update'](_0x2d1773[a99_0x1b98('0x20')])[a99_0x1b98('0xf')](function(_0x5dc680){const _0x2f7d04=_0x5dc680[a99_0x1b98('0x22')];if(_0x395450){delete _0x2f7d04['id'];}if(_0x3a7f06){return _0x3a7f06[a99_0x1b98('0x14')]({'success':!![],'data':_0x2f7d04});}else{return _0x2f7d04;}}[a99_0x1b98('0x26')](this));}else{return this[a99_0x1b98('0x3')][a99_0x1b98('0x21')](_0x2d1773[a99_0x1b98('0x20')])[a99_0x1b98('0xf')](function(_0x2383e3){if(_0x3a7f06){return _0x3a7f06[a99_0x1b98('0x14')]({'success':!![],'data':_0x2383e3['toJSON']()});}else{return _0x2383e3;}});}}[a99_0x1b98('0x26')](this))['catch'](_0x22046e=>{if(_0x3a7f06){return _0x3a7f06['status'](0x1f4)[a99_0x1b98('0x18')]({'success':![],'data':_0x22046e[a99_0x1b98('0x17')]});}else{return _0x22046e[a99_0x1b98('0x17')];}});}['findOrCreate'](_0x1cea2f,_0x1973c7,_0x16397c){if(!_0x1cea2f['user']||_0x1cea2f[a99_0x1b98('0x6')][a99_0x1b98('0x7')]==0x0){}if(_0x1cea2f[a99_0x1b98('0x6')]&&_0x1cea2f['user'][a99_0x1b98('0x7')]>0x0){}return this[a99_0x1b98('0x3')]['findOrCreate']({'where':{'uuid':_0x1cea2f[a99_0x1b98('0x20')][a99_0x1b98('0x1e')]},'defaults':_0x1cea2f[a99_0x1b98('0x20')]})[a99_0x1b98('0xf')]((_0x3e67ea,_0x3672b4)=>{if(_0x3672b4){}else{}return _0x1973c7[a99_0x1b98('0x14')]({'success':!![],'data':_0x3e67ea});})['catch'](_0x22047e=>{return _0x1973c7[a99_0x1b98('0x16')](0x1f4)[a99_0x1b98('0x18')]({'success':![],'data':_0x22047e[a99_0x1b98('0x17')]});});}['remove'](_0x310e78,_0xbb2fe9,_0x5529c1){if(!_0x310e78[a99_0x1b98('0x6')]||_0x310e78['user'][a99_0x1b98('0x7')]==0x0){return _0xbb2fe9[a99_0x1b98('0x16')](0x191)['send']({'success':![],'data':a99_0x1b98('0x19')});}if(_0x310e78[a99_0x1b98('0x6')]&&_0x310e78['user']['length']>0x0){_0x310e78[a99_0x1b98('0x20')][a99_0x1b98('0x8')]=_0x310e78['user'][0x0]['id'];}this['model']['findById'](_0x310e78[a99_0x1b98('0xe')]['id'])[a99_0x1b98('0xf')](_0x45a328=>{if(_0x45a328==null)return _0xbb2fe9[a99_0x1b98('0x14')]({'success':!![],'data':_0x45a328});_0x45a328[a99_0x1b98('0x27')]()[a99_0x1b98('0xf')](function(_0x54a0e4){const _0x33d4c8=this[a99_0x1b98('0x4')]?sequelize_utils_1[a99_0x1b98('0x10')][a99_0x1b98('0x11')](_0x45a328,_0x310e78['headers']['lang']):_0x45a328;return _0xbb2fe9[a99_0x1b98('0x14')]({'success':!![],'data':_0x33d4c8});})['catch'](_0x1b3a39=>{return _0xbb2fe9[a99_0x1b98('0x16')](0x1f4)[a99_0x1b98('0x18')]({'success':![],'data':_0x1b3a39[a99_0x1b98('0x17')]});});})[a99_0x1b98('0x15')](_0x54d8af=>{return _0xbb2fe9[a99_0x1b98('0x16')](0x1f4)['send']({'success':![],'data':_0x54d8af[a99_0x1b98('0x17')]});});}}exports[a99_0x1b98('0x10')]=CrudUtils;