var a91_0x767f=['toJSONLocalizedOnly','json','status','send','stack','findById','authentication\x20failed','params','then','headers','lang','catch','save','body','dataValues','updated_at','update','remove','destroy','__importDefault','__esModule','./sequelize-utils','model','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','deleted_at','i18n','default'];(function(_0x333987,_0xcd3a37){var _0x3c72de=function(_0x534935){while(--_0x534935){_0x333987['push'](_0x333987['shift']());}};_0x3c72de(++_0xcd3a37);}(a91_0x767f,0xd9));var a91_0x188d=function(_0x53114b,_0x5754db){_0x53114b=_0x53114b-0x0;var _0x36291c=a91_0x767f[_0x53114b];return _0x36291c;};'use strict';var __importDefault=this&&this[a91_0x188d('0x0')]||function(_0x263138){return _0x263138&&_0x263138[a91_0x188d('0x1')]?_0x263138:{'default':_0x263138};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const sequelize_utils_1=__importDefault(require(a91_0x188d('0x2')));class CrudUtils{constructor(_0x374549,_0x27c125){this[a91_0x188d('0x3')]=_0x374549;this['i18n']=_0x27c125;}['find'](_0x33f05f,_0x4e2e09,_0x1741e){if(!_0x33f05f[a91_0x188d('0x4')]||_0x33f05f[a91_0x188d('0x4')][a91_0x188d('0x5')]==0x0){}this[a91_0x188d('0x3')][a91_0x188d('0x6')]({'attributes':{'exclude':['id',a91_0x188d('0x7'),a91_0x188d('0x8'),a91_0x188d('0x9'),a91_0x188d('0xa'),'updated_at',a91_0x188d('0xb')]}})['then'](_0x2dfed7=>{const _0x4241bf=this[a91_0x188d('0xc')]?sequelize_utils_1[a91_0x188d('0xd')][a91_0x188d('0xe')](_0x2dfed7,_0x33f05f['headers']['lang']):_0x2dfed7;return _0x4e2e09[a91_0x188d('0xf')]({'success':!![],'data':_0x4241bf});})['catch'](_0x511d54=>{return _0x4e2e09[a91_0x188d('0x10')](0x1f4)[a91_0x188d('0x11')]({'success':![],'data':_0x511d54[a91_0x188d('0x12')]});});}[a91_0x188d('0x13')](_0x97ceff,_0x4dd890,_0x48ed43){if(!_0x97ceff[a91_0x188d('0x4')]||_0x97ceff[a91_0x188d('0x4')][a91_0x188d('0x5')]==0x0){return _0x4dd890[a91_0x188d('0x10')](0x191)[a91_0x188d('0x11')]({'success':![],'data':a91_0x188d('0x14')});}this[a91_0x188d('0x3')][a91_0x188d('0x13')](_0x97ceff[a91_0x188d('0x15')]['id'])[a91_0x188d('0x16')](_0x1669d7=>{const _0x3ac36a=this[a91_0x188d('0xc')]?sequelize_utils_1[a91_0x188d('0xd')][a91_0x188d('0xe')](_0x1669d7,_0x97ceff[a91_0x188d('0x17')][a91_0x188d('0x18')]):_0x1669d7;return _0x4dd890[a91_0x188d('0xf')]({'success':!![],'data':_0x3ac36a});})[a91_0x188d('0x19')](_0x3de0b8=>{return _0x4dd890[a91_0x188d('0x10')](0x1f4)[a91_0x188d('0x11')]({'success':![],'data':_0x3de0b8[a91_0x188d('0x12')]});});}[a91_0x188d('0x1a')](_0xf14110,_0x5c1969,_0xf9a10e){if(!_0xf14110['user']||_0xf14110[a91_0x188d('0x4')][a91_0x188d('0x5')]==0x0){}if(_0xf14110['user']&&_0xf14110['user'][a91_0x188d('0x5')]>0x0){_0xf14110[a91_0x188d('0x1b')][a91_0x188d('0x7')]=_0xf14110[a91_0x188d('0x4')][0x0]['id'];}this[a91_0x188d('0x3')]['create'](_0xf14110[a91_0x188d('0x1b')],{'language_id':_0xf14110[a91_0x188d('0x17')][a91_0x188d('0x18')]})['then'](_0x27bff9=>{const _0x406c2c=this[a91_0x188d('0xc')]?sequelize_utils_1[a91_0x188d('0xd')]['toJSONLocalizedOnly'](_0x27bff9,_0xf14110[a91_0x188d('0x17')][a91_0x188d('0x18')]):_0x27bff9;delete _0x406c2c[a91_0x188d('0x1c')]['id'];delete _0x406c2c['dataValues'][a91_0x188d('0x7')];delete _0x406c2c[a91_0x188d('0x1c')][a91_0x188d('0x8')];delete _0x406c2c['dataValues'][a91_0x188d('0x9')];delete _0x406c2c[a91_0x188d('0x1c')][a91_0x188d('0xa')];delete _0x406c2c['dataValues'][a91_0x188d('0x1d')];delete _0x406c2c['dataValues']['deleted_at'];return _0x5c1969[a91_0x188d('0xf')]({'success':!![],'data':_0x406c2c});})[a91_0x188d('0x19')](_0x4c214d=>{return _0x5c1969[a91_0x188d('0x10')](0x1f4)['send']({'success':![],'data':_0x4c214d[a91_0x188d('0x12')]});});}['findOneAndUpdate'](_0x76beaa,_0x547147,_0xf54bb1){if(!_0x76beaa[a91_0x188d('0x4')]||_0x76beaa['user'][a91_0x188d('0x5')]==0x0){return _0x547147[a91_0x188d('0x10')](0x191)[a91_0x188d('0x11')]({'success':![],'data':a91_0x188d('0x14')});}if(_0x76beaa[a91_0x188d('0x4')]&&_0x76beaa[a91_0x188d('0x4')][a91_0x188d('0x5')]>0x0){_0x76beaa['body'][a91_0x188d('0x7')]=_0x76beaa['user'][0x0]['id'];}this[a91_0x188d('0x3')][a91_0x188d('0x13')](_0x76beaa[a91_0x188d('0x15')]['id'])[a91_0x188d('0x16')](_0x4f017a=>{if(_0x4f017a==null)return _0x547147[a91_0x188d('0xf')]({'success':!![],'data':_0x4f017a});_0x4f017a[a91_0x188d('0x1e')](_0x76beaa['body'],{'language_id':_0x76beaa[a91_0x188d('0x17')][a91_0x188d('0x18')]})[a91_0x188d('0x16')](function(_0x41e447){const _0x39fd5f=this['i18n']?sequelize_utils_1[a91_0x188d('0xd')][a91_0x188d('0xe')](_0x4f017a,_0x76beaa[a91_0x188d('0x17')]['lang']):_0x4f017a;return _0x547147[a91_0x188d('0xf')]({'success':!![],'data':_0x39fd5f});})['catch'](_0x20b1de=>{return _0x547147[a91_0x188d('0x10')](0x1f4)['send']({'success':![],'data':_0x20b1de[a91_0x188d('0x12')]});});})[a91_0x188d('0x19')](_0x2105f2=>{return _0x547147['status'](0x1f4)[a91_0x188d('0x11')]({'success':![],'data':_0x2105f2['stack']});});}[a91_0x188d('0x1f')](_0x295825,_0x3843f2,_0x249a75){if(!_0x295825[a91_0x188d('0x4')]||_0x295825[a91_0x188d('0x4')][a91_0x188d('0x5')]==0x0){return _0x3843f2[a91_0x188d('0x10')](0x191)[a91_0x188d('0x11')]({'success':![],'data':a91_0x188d('0x14')});}if(_0x295825[a91_0x188d('0x4')]&&_0x295825[a91_0x188d('0x4')][a91_0x188d('0x5')]>0x0){_0x295825[a91_0x188d('0x1b')]['created_by_user_id']=_0x295825['user'][0x0]['id'];}this[a91_0x188d('0x3')]['findById'](_0x295825[a91_0x188d('0x15')]['id'])[a91_0x188d('0x16')](_0x18e469=>{if(_0x18e469==null)return _0x3843f2[a91_0x188d('0xf')]({'success':!![],'data':_0x18e469});_0x18e469[a91_0x188d('0x20')]()[a91_0x188d('0x16')](function(_0x28b493){const _0x384d83=this[a91_0x188d('0xc')]?sequelize_utils_1[a91_0x188d('0xd')][a91_0x188d('0xe')](_0x18e469,_0x295825[a91_0x188d('0x17')][a91_0x188d('0x18')]):_0x18e469;return _0x3843f2[a91_0x188d('0xf')]({'success':!![],'data':_0x384d83});})[a91_0x188d('0x19')](_0x1038bc=>{return _0x3843f2[a91_0x188d('0x10')](0x1f4)[a91_0x188d('0x11')]({'success':![],'data':_0x1038bc[a91_0x188d('0x12')]});});})[a91_0x188d('0x19')](_0x56ead5=>{return _0x3843f2[a91_0x188d('0x10')](0x1f4)[a91_0x188d('0x11')]({'success':![],'data':_0x56ead5['stack']});});}}exports[a91_0x188d('0xd')]=CrudUtils;