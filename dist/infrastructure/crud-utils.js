var a99_0xe164=['default','toJSONLocalizedOnly','headers','lang','toJSON','catch','send','stack','findById','json','status','findByUUId','params','uuid','save','body','create','dataValues','findOneAndUpdate','findByPk','update','updateOrCreate','log','bind','findOrCreate','remove','destroy','__importDefault','__esModule','defineProperty','./sequelize-utils','model','i18n','user','length','findAll','created_by_user_id','updated_by_user_id','deleted_by_user_id','created_at','updated_at','deleted_at','then'];(function(_0x4cbc99,_0x4a0c7d){var _0x2216bd=function(_0x261e24){while(--_0x261e24){_0x4cbc99['push'](_0x4cbc99['shift']());}};_0x2216bd(++_0x4a0c7d);}(a99_0xe164,0xc7));var a99_0xe71c=function(_0x483b83,_0x5d029d){_0x483b83=_0x483b83-0x0;var _0x3de8fc=a99_0xe164[_0x483b83];return _0x3de8fc;};'use strict';var __importDefault=this&&this[a99_0xe71c('0x0')]||function(_0x22bc42){return _0x22bc42&&_0x22bc42[a99_0xe71c('0x1')]?_0x22bc42:{'default':_0x22bc42};};Object[a99_0xe71c('0x2')](exports,a99_0xe71c('0x1'),{'value':!![]});const sequelize_utils_1=__importDefault(require(a99_0xe71c('0x3')));class CrudUtils{constructor(_0x53b138,_0x3a8cc0){this[a99_0xe71c('0x4')]=_0x53b138;this[a99_0xe71c('0x5')]=_0x3a8cc0;}['find'](_0x22598f,_0x486b2e,_0xc82e69,_0x4158b0=![]){if(!_0x22598f[a99_0xe71c('0x6')]||_0x22598f[a99_0xe71c('0x6')][a99_0xe71c('0x7')]==0x0){}return this['model'][a99_0xe71c('0x8')]({'attributes':{'exclude':_0x4158b0?[]:['id',a99_0xe71c('0x9'),a99_0xe71c('0xa'),a99_0xe71c('0xb'),a99_0xe71c('0xc'),a99_0xe71c('0xd'),a99_0xe71c('0xe')]},'where':{}})[a99_0xe71c('0xf')](_0x5e9a28=>{const _0x149eec=this[a99_0xe71c('0x5')]?sequelize_utils_1[a99_0xe71c('0x10')][a99_0xe71c('0x11')](_0x5e9a28,_0x22598f[a99_0xe71c('0x12')][a99_0xe71c('0x13')]):sequelize_utils_1[a99_0xe71c('0x10')][a99_0xe71c('0x14')](_0x5e9a28);if(_0x486b2e){return _0x486b2e['json']({'success':!![],'data':_0x149eec});}else{return _0x149eec;}})[a99_0xe71c('0x15')](_0x7e878=>{if(_0x486b2e){return _0x486b2e['status'](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x7e878[a99_0xe71c('0x17')]});}else{return _0x7e878[a99_0xe71c('0x17')];}});}['findById'](_0xad388,_0x22c0da,_0x26043e){if(!_0xad388['user']||_0xad388[a99_0xe71c('0x6')][a99_0xe71c('0x7')]==0x0){return _0x22c0da['status'](0x191)[a99_0xe71c('0x16')]({'success':![],'data':'authentication\x20failed'});}this[a99_0xe71c('0x4')][a99_0xe71c('0x18')](_0xad388['params']['id'])[a99_0xe71c('0xf')](_0x3589b5=>{const _0x34084e=this['i18n']?sequelize_utils_1[a99_0xe71c('0x10')]['toJSONLocalizedOnly'](_0x3589b5,_0xad388[a99_0xe71c('0x12')]['lang']):_0x3589b5;return _0x22c0da[a99_0xe71c('0x19')]({'success':!![],'data':_0x34084e});})[a99_0xe71c('0x15')](_0x17e401=>{return _0x22c0da[a99_0xe71c('0x1a')](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x17e401[a99_0xe71c('0x17')]});});}[a99_0xe71c('0x1b')](_0x5b8bc5,_0x4d7d52,_0xefb961){if(!_0x5b8bc5[a99_0xe71c('0x6')]||_0x5b8bc5[a99_0xe71c('0x6')][a99_0xe71c('0x7')]==0x0){}return this[a99_0xe71c('0x4')][a99_0xe71c('0x8')]({'where':{'uuid':_0x5b8bc5[a99_0xe71c('0x1c')][a99_0xe71c('0x1d')]}})[a99_0xe71c('0xf')](_0x43ee2d=>{const _0xffbad1=this['i18n']?sequelize_utils_1[a99_0xe71c('0x10')]['toJSONLocalizedOnly'](_0x43ee2d,_0x5b8bc5[a99_0xe71c('0x12')][a99_0xe71c('0x13')]):sequelize_utils_1[a99_0xe71c('0x10')][a99_0xe71c('0x14')](_0x43ee2d);return _0xffbad1;})[a99_0xe71c('0x15')](_0x39c787=>{return _0x39c787[a99_0xe71c('0x17')];});}[a99_0xe71c('0x1e')](_0x2dfd7f,_0x12a1c8,_0x31895c){if(!_0x2dfd7f[a99_0xe71c('0x6')]||_0x2dfd7f['user'][a99_0xe71c('0x7')]==0x0){}if(_0x2dfd7f['user']&&_0x2dfd7f['user']['length']>0x0){_0x2dfd7f[a99_0xe71c('0x1f')][a99_0xe71c('0x9')]=_0x2dfd7f[a99_0xe71c('0x6')][0x0]['id'];}return this[a99_0xe71c('0x4')][a99_0xe71c('0x20')](_0x2dfd7f[a99_0xe71c('0x1f')],this[a99_0xe71c('0x5')]?{'language_id':_0x2dfd7f[a99_0xe71c('0x12')]['lang']}:{})[a99_0xe71c('0xf')](_0x44c370=>{const _0x50e834=this[a99_0xe71c('0x5')]?sequelize_utils_1[a99_0xe71c('0x10')][a99_0xe71c('0x11')](_0x44c370,_0x2dfd7f[a99_0xe71c('0x12')]['lang']):_0x44c370;delete _0x50e834[a99_0xe71c('0x21')]['id'];delete _0x50e834['dataValues']['created_by_user_id'];delete _0x50e834[a99_0xe71c('0x21')][a99_0xe71c('0xa')];delete _0x50e834[a99_0xe71c('0x21')][a99_0xe71c('0xb')];delete _0x50e834[a99_0xe71c('0x21')][a99_0xe71c('0xc')];delete _0x50e834['dataValues'][a99_0xe71c('0xd')];delete _0x50e834[a99_0xe71c('0x21')][a99_0xe71c('0xe')];if(_0x12a1c8){return _0x12a1c8[a99_0xe71c('0x19')]({'success':!![],'data':_0x50e834});}else{return _0x50e834;}})[a99_0xe71c('0x15')](_0x122fff=>{if(_0x12a1c8){return _0x12a1c8[a99_0xe71c('0x1a')](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x122fff['stack']});}else{return _0x122fff[a99_0xe71c('0x17')];}});}[a99_0xe71c('0x22')](_0x4cc615,_0x6b767e,_0x34afd3){if(!_0x4cc615[a99_0xe71c('0x6')]||_0x4cc615[a99_0xe71c('0x6')][a99_0xe71c('0x7')]==0x0){}if(_0x4cc615[a99_0xe71c('0x6')]&&_0x4cc615['user'][a99_0xe71c('0x7')]>0x0){_0x4cc615[a99_0xe71c('0x1f')][a99_0xe71c('0x9')]=_0x4cc615[a99_0xe71c('0x6')][0x0]['id'];}this[a99_0xe71c('0x4')][a99_0xe71c('0x23')](_0x4cc615[a99_0xe71c('0x1f')]['id'])[a99_0xe71c('0xf')](_0x639a77=>{if(_0x639a77==null)return _0x6b767e[a99_0xe71c('0x19')]({'success':!![],'data':_0x639a77});_0x639a77[a99_0xe71c('0x24')](_0x4cc615[a99_0xe71c('0x1f')],{'language_id':_0x4cc615[a99_0xe71c('0x12')]['lang']})['then'](function(_0xad47d2){const _0x411549=this[a99_0xe71c('0x5')]?sequelize_utils_1[a99_0xe71c('0x10')][a99_0xe71c('0x11')](_0x639a77,_0x4cc615[a99_0xe71c('0x12')][a99_0xe71c('0x13')]):_0x639a77;return _0x6b767e['json']({'success':!![],'data':_0x411549});}['bind'](this))[a99_0xe71c('0x15')](_0x26c235=>{return _0x6b767e['status'](0x1f4)['send']({'success':![],'data':_0x26c235[a99_0xe71c('0x17')]});});})[a99_0xe71c('0x15')](_0x1b4028=>{return _0x6b767e[a99_0xe71c('0x1a')](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x1b4028[a99_0xe71c('0x17')]});});}[a99_0xe71c('0x25')](_0x393e8c,_0x155302,_0x221365,_0x5e7314=![]){if(!_0x393e8c[a99_0xe71c('0x6')]||_0x393e8c[a99_0xe71c('0x6')][a99_0xe71c('0x7')]==0x0){}if(_0x393e8c[a99_0xe71c('0x6')]&&_0x393e8c['user'][a99_0xe71c('0x7')]>0x0){_0x393e8c[a99_0xe71c('0x1f')]['created_by_user_id']=_0x393e8c[a99_0xe71c('0x6')][0x0]['id'];}console[a99_0xe71c('0x26')](_0x393e8c[a99_0xe71c('0x1c')]);return this[a99_0xe71c('0x4')]['findOne']({'where':_0x393e8c[a99_0xe71c('0x1c')]})['then'](function(_0x1fee9f){if(_0x1fee9f){return _0x1fee9f[a99_0xe71c('0x24')](_0x393e8c[a99_0xe71c('0x1f')])[a99_0xe71c('0xf')](function(_0x4080b9){const _0x5a2426=_0x4080b9[a99_0xe71c('0x21')];if(_0x5e7314){delete _0x5a2426['id'];}if(_0x155302){return _0x155302['json']({'success':!![],'data':_0x5a2426});}else{return _0x5a2426;}}[a99_0xe71c('0x27')](this));}else{return this[a99_0xe71c('0x4')]['create'](_0x393e8c[a99_0xe71c('0x1f')])[a99_0xe71c('0xf')](function(_0x2ddb4e){if(_0x155302){return _0x155302[a99_0xe71c('0x19')]({'success':!![],'data':_0x2ddb4e[a99_0xe71c('0x14')]()});}else{return _0x2ddb4e;}});}}[a99_0xe71c('0x27')](this))['catch'](_0x328e8a=>{if(_0x155302){return _0x155302[a99_0xe71c('0x1a')](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x328e8a[a99_0xe71c('0x17')]});}else{return _0x328e8a[a99_0xe71c('0x17')];}});}[a99_0xe71c('0x28')](_0x273fc5,_0x13ce2f,_0x706fcf){if(!_0x273fc5[a99_0xe71c('0x6')]||_0x273fc5[a99_0xe71c('0x6')]['length']==0x0){}if(_0x273fc5[a99_0xe71c('0x6')]&&_0x273fc5[a99_0xe71c('0x6')][a99_0xe71c('0x7')]>0x0){_0x273fc5['body'][a99_0xe71c('0x9')]=_0x273fc5['user'][0x0]['id'];}return this[a99_0xe71c('0x4')][a99_0xe71c('0x28')]({'where':{'uuid':_0x273fc5[a99_0xe71c('0x1f')]['uuid']},'defaults':_0x273fc5[a99_0xe71c('0x1f')]})['then']((_0x507218,_0x370058)=>{if(_0x370058){}else{}return _0x13ce2f['json']({'success':!![],'data':_0x507218});})['catch'](_0x2f7e3b=>{return _0x13ce2f[a99_0xe71c('0x1a')](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x2f7e3b[a99_0xe71c('0x17')]});});}[a99_0xe71c('0x29')](_0x4eeba5,_0x27a064,_0x570b89){if(!_0x4eeba5[a99_0xe71c('0x6')]||_0x4eeba5[a99_0xe71c('0x6')][a99_0xe71c('0x7')]==0x0){return _0x27a064[a99_0xe71c('0x1a')](0x191)[a99_0xe71c('0x16')]({'success':![],'data':'authentication\x20failed'});}if(_0x4eeba5['user']&&_0x4eeba5['user'][a99_0xe71c('0x7')]>0x0){_0x4eeba5[a99_0xe71c('0x1f')][a99_0xe71c('0x9')]=_0x4eeba5[a99_0xe71c('0x6')][0x0]['id'];}this['model']['findById'](_0x4eeba5[a99_0xe71c('0x1c')]['id'])[a99_0xe71c('0xf')](_0x51d8b9=>{if(_0x51d8b9==null)return _0x27a064[a99_0xe71c('0x19')]({'success':!![],'data':_0x51d8b9});_0x51d8b9[a99_0xe71c('0x2a')]()[a99_0xe71c('0xf')](function(_0x113127){const _0x2016c2=this['i18n']?sequelize_utils_1['default'][a99_0xe71c('0x11')](_0x51d8b9,_0x4eeba5['headers'][a99_0xe71c('0x13')]):_0x51d8b9;return _0x27a064[a99_0xe71c('0x19')]({'success':!![],'data':_0x2016c2});})[a99_0xe71c('0x15')](_0x4f93dc=>{return _0x27a064[a99_0xe71c('0x1a')](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x4f93dc['stack']});});})['catch'](_0x50ab26=>{return _0x27a064[a99_0xe71c('0x1a')](0x1f4)[a99_0xe71c('0x16')]({'success':![],'data':_0x50ab26[a99_0xe71c('0x17')]});});}}exports[a99_0xe71c('0x10')]=CrudUtils;