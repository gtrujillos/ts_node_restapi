var a194_0x2d01=['i18n','default','find','findById','findByUuid','bind','save','findOneAndUpdate','remove','count','featured','featuredTotal','featuredLoggedTotal','details','shared','length','crudUtils','findUuidAndUpdate','update','findOrCreate','updateOrCreate','params','public','DESC','includeAll','errorResponse','updated_by_user_id','deleted_by_user_id','created_at','updated_at','user','created_by_user_id','successResponse','authentication\x20failed','__importDefault','__esModule','defineProperty','./sequelize-utils','../infrastructure/response-utils','include','orderBy'];(function(_0x42d6fc,_0x1510ef){var _0x52a093=function(_0x13a72f){while(--_0x13a72f){_0x42d6fc['push'](_0x42d6fc['shift']());}};_0x52a093(++_0x1510ef);}(a194_0x2d01,0x118));var a194_0x2c65=function(_0x5c16af,_0x3a989b){_0x5c16af=_0x5c16af-0x0;var _0x3f98ed=a194_0x2d01[_0x5c16af];return _0x3f98ed;};'use strict';var __importDefault=this&&this[a194_0x2c65('0x0')]||function(_0x37f7d5){return _0x37f7d5&&_0x37f7d5[a194_0x2c65('0x1')]?_0x37f7d5:{'default':_0x37f7d5};};Object[a194_0x2c65('0x2')](exports,a194_0x2c65('0x1'),{'value':!![]});const express_1=__importDefault(require('express'));const crud_utils_1=__importDefault(require('./crud-utils'));const crudOptions_1=__importDefault(require('../app/shared/models/crudOptions'));const sequelize_utils_1=__importDefault(require(a194_0x2c65('0x3')));const router=express_1['default']['Router']();const responseUtils=require(a194_0x2c65('0x4'));class BaseController{constructor(_0x5cd3fa,_0x322da3,_0x598206=![]){this[a194_0x2c65('0x5')]=[];this[a194_0x2c65('0x6')]=[];this['model']=_0x5cd3fa;this[a194_0x2c65('0x7')]=_0x322da3;this['crudUtils']=new crud_utils_1[(a194_0x2c65('0x8'))](_0x5cd3fa,_0x322da3);this['shared']=_0x598206;this[a194_0x2c65('0x9')]=this[a194_0x2c65('0x9')]['bind'](this);this[a194_0x2c65('0xa')]=this[a194_0x2c65('0xa')]['bind'](this);this[a194_0x2c65('0xb')]=this['findByUuid'][a194_0x2c65('0xc')](this);this[a194_0x2c65('0xd')]=this[a194_0x2c65('0xd')][a194_0x2c65('0xc')](this);this[a194_0x2c65('0xe')]=this[a194_0x2c65('0xe')][a194_0x2c65('0xc')](this);this['remove']=this[a194_0x2c65('0xf')][a194_0x2c65('0xc')](this);this[a194_0x2c65('0x10')]=this[a194_0x2c65('0x10')][a194_0x2c65('0xc')](this);this['featured']=this[a194_0x2c65('0x11')][a194_0x2c65('0xc')](this);this['featuredLogged']=this['featuredLogged'][a194_0x2c65('0xc')](this);this[a194_0x2c65('0x12')]=this[a194_0x2c65('0x12')][a194_0x2c65('0xc')](this);this[a194_0x2c65('0x13')]=this[a194_0x2c65('0x13')][a194_0x2c65('0xc')](this);this[a194_0x2c65('0x14')]=this[a194_0x2c65('0x14')][a194_0x2c65('0xc')](this);}[a194_0x2c65('0x10')](_0x52741f,_0x356eac,_0x10a162,_0x201bf7=new crudOptions_1[(a194_0x2c65('0x8'))]()){if(_0x201bf7){_0x201bf7[a194_0x2c65('0x15')]=_0x201bf7[a194_0x2c65('0x15')]||this[a194_0x2c65('0x15')];}return this['crudUtils'][a194_0x2c65('0x10')](_0x52741f,_0x356eac,_0x10a162,_0x201bf7);}[a194_0x2c65('0x9')](_0x390c42,_0x722cb2,_0x419cbd,_0x30790e=new crudOptions_1[(a194_0x2c65('0x8'))]()){if(_0x30790e){if(_0x30790e[a194_0x2c65('0x5')]&&_0x30790e[a194_0x2c65('0x5')][a194_0x2c65('0x16')]==0x0&&this[a194_0x2c65('0x5')][a194_0x2c65('0x16')]>0x0){_0x30790e[a194_0x2c65('0x5')]=this['include'];}_0x30790e[a194_0x2c65('0x6')]=_0x30790e[a194_0x2c65('0x6')]!=null&&_0x30790e[a194_0x2c65('0x6')][a194_0x2c65('0x16')]>0x0?_0x30790e[a194_0x2c65('0x6')]:this[a194_0x2c65('0x6')];_0x30790e[a194_0x2c65('0x15')]=_0x30790e[a194_0x2c65('0x15')]||this[a194_0x2c65('0x15')];}return this['crudUtils'][a194_0x2c65('0x9')](_0x390c42,_0x722cb2,_0x419cbd,_0x30790e);}[a194_0x2c65('0xa')](_0x1b30d1,_0x358bb9,_0x38bc9a,_0x14a5ee=new crudOptions_1['default']()){return this[a194_0x2c65('0x17')]['findById'](_0x1b30d1,_0x358bb9,_0x38bc9a,_0x14a5ee);}[a194_0x2c65('0xb')](_0x532ce0,_0x264548,_0x35e41f){return this[a194_0x2c65('0x17')][a194_0x2c65('0xb')](_0x532ce0,_0x264548,_0x35e41f);}[a194_0x2c65('0xd')](_0x4e6a85,_0x35367d,_0x17f0de,_0x5335a4=new crudOptions_1[(a194_0x2c65('0x8'))]()){return this[a194_0x2c65('0x17')]['save'](_0x4e6a85,_0x35367d,_0x17f0de,_0x5335a4);}[a194_0x2c65('0xe')](_0x37a64b,_0x4008ae,_0x963e5d){return this[a194_0x2c65('0x17')]['findOneAndUpdate'](_0x37a64b,_0x4008ae,_0x963e5d);}['findUuidAndUpdate'](_0x48b63b,_0x1c83b1,_0xaad238){return this[a194_0x2c65('0x17')][a194_0x2c65('0x18')](_0x48b63b,_0x1c83b1,_0xaad238);}[a194_0x2c65('0x19')](_0x3a5994,_0x51fd0b,_0x55d9c6){return this['crudUtils'][a194_0x2c65('0xe')](_0x3a5994,_0x51fd0b,_0x55d9c6);}[a194_0x2c65('0x1a')](_0x51c3e3,_0x54e0fc,_0x5b7d08){return this[a194_0x2c65('0x17')][a194_0x2c65('0x1a')](_0x51c3e3,_0x54e0fc,_0x5b7d08);}[a194_0x2c65('0x1b')](_0x198a70,_0x230894,_0x4d0ae8,_0x3bbafc=![],_0x58ede5=![]){return this[a194_0x2c65('0x17')][a194_0x2c65('0x1b')](_0x198a70,_0x230894,_0x4d0ae8,_0x3bbafc,_0x58ede5);}[a194_0x2c65('0xf')](_0x54454b,_0x56a17c,_0xa30807){return this[a194_0x2c65('0x17')]['remove'](_0x54454b,_0x56a17c,_0xa30807);}[a194_0x2c65('0x11')](_0x27bc50,_0x42d8fb,_0x31e53b){_0x27bc50[a194_0x2c65('0x1c')]={'is_private':![]};const _0x243f96=new crudOptions_1['default']();_0x243f96[a194_0x2c65('0x1d')]=!![];_0x243f96['shared']=!![];_0x243f96[a194_0x2c65('0x6')]=[['updated_at',a194_0x2c65('0x1e')]];return this[a194_0x2c65('0x9')](_0x27bc50,_0x42d8fb,_0x31e53b,_0x243f96);}['featuredLogged'](_0x5cc213,_0x44e2b6,_0x44af8f){const _0x447714=new crudOptions_1['default']();_0x447714[a194_0x2c65('0x6')]=[['updated_at',a194_0x2c65('0x1e')]];return this[a194_0x2c65('0x9')](_0x5cc213,_0x44e2b6,_0x44af8f,_0x447714);}[a194_0x2c65('0x13')](_0x289391,_0x40cb10,_0x972852){const _0x359b77=new crudOptions_1[(a194_0x2c65('0x8'))]();return this[a194_0x2c65('0x10')](_0x289391,_0x40cb10,_0x972852,_0x359b77);}[a194_0x2c65('0x12')](_0x1e8c55,_0x56f036,_0x4fdd27){_0x1e8c55[a194_0x2c65('0x1c')]={'is_private':![]};const _0x58b714=new crudOptions_1[(a194_0x2c65('0x8'))]();_0x58b714['public']=!![];_0x58b714['shared']=!![];return this[a194_0x2c65('0x10')](_0x1e8c55,_0x56f036,_0x4fdd27,_0x58b714);}['details'](_0x39e3d1,_0x53fe5a,_0x10b9df){const _0x54c36b=new crudOptions_1[(a194_0x2c65('0x8'))]();_0x54c36b[a194_0x2c65('0x1d')]=!![];_0x54c36b[a194_0x2c65('0x15')]=!![];_0x54c36b[a194_0x2c65('0x1f')]=!![];this['crudUtils'][a194_0x2c65('0xa')](_0x39e3d1,null,_0x10b9df,_0x54c36b)['then'](_0x189384=>{if(_0x189384==null){return responseUtils[a194_0x2c65('0x20')](_0x39e3d1,_0x53fe5a,'authentication\x20failed',0x191);}delete _0x189384[a194_0x2c65('0x21')];delete _0x189384[a194_0x2c65('0x22')];delete _0x189384[a194_0x2c65('0x23')];delete _0x189384[a194_0x2c65('0x24')];delete _0x189384['deleted_at'];delete _0x189384['password'];if(_0x189384['is_private']){if(_0x39e3d1[a194_0x2c65('0x25')]){if(_0x39e3d1['user']['id']==sequelize_utils_1[a194_0x2c65('0x8')]['decryptId'](_0x189384[a194_0x2c65('0x26')])){delete _0x189384[a194_0x2c65('0x26')];return responseUtils[a194_0x2c65('0x27')](_0x39e3d1,_0x53fe5a,_0x189384,0xc8);}else{return responseUtils[a194_0x2c65('0x20')](_0x39e3d1,_0x53fe5a,a194_0x2c65('0x28'),0x191);}}else{return responseUtils[a194_0x2c65('0x20')](_0x39e3d1,_0x53fe5a,'authentication\x20failed',0x191);}}else{delete _0x189384[a194_0x2c65('0x26')];return responseUtils[a194_0x2c65('0x27')](_0x39e3d1,_0x53fe5a,_0x189384,0xc8);}})['catch'](_0x51ab75=>{return responseUtils[a194_0x2c65('0x20')](_0x53fe5a,_0x51ab75['stack'],0x1f4);});}}exports['default']=BaseController;